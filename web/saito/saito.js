//
// this file is appended to the start of the saito.js script
// and runs as its "bootloader" -- it checks to see if the 
// user already has a pre-compiled version of saito.js that
// is not the default software, and swaps it in instead of 
// the default if it exists and can be found.
//
if (typeof(Storage) !== "undefined") {

  let mySource = document.currentScript.src;
  let sscript = document.getElementById("saito");
  let data = null;
  let options = null;
  let bundle = null;

  data = localStorage.getItem("options");
  if (data) { options = JSON.parse(data); }
  if (options) { bundle = options.bundle; }

  
  if (bundle != null && bundle != "") {
    if (bundle != mySource) {
      document.body.removeChild(sscript);

      let sscript2 = document.createElement('script');
      sscript2.onload = function () { };
      sscript2.src = bundle;
      document.body.appendChild(sscript2);

      throw new Error('Exiting before we load bad javascript...!');
    }
  }

}

!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=570)}([function(e,t,r){var n=r(6),a=r(33),i=r(21),o=r(22),s=r(34),c=function(e,t,r){var l,u,d,h,p=e&c.F,f=e&c.G,m=e&c.S,g=e&c.P,y=e&c.B,v=f?n:m?n[t]||(n[t]={}):(n[t]||{}).prototype,b=f?a:a[t]||(a[t]={}),_=b.prototype||(b.prototype={});for(l in f&&(r=t),r)d=((u=!p&&v&&void 0!==v[l])?v:r)[l],h=y&&u?s(d,n):g&&"function"==typeof d?s(Function.call,d):d,v&&o(v,l,d,e&c.U),b[l]!=d&&i(b,l,h),g&&_[l]!=d&&(_[l]=d)};n.core=a,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},function(e,t,r){var n=r(4),a=n.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return a(e,t,r)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=o),i(a,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=a(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t,r){var n=r(8);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r(775),a=r(776),i=r(353);function o(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,r){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return l(this,e,t,r)}function l(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=h(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|f(t,r),a=(e=s(e,n)).write(t,r);a!==n&&(e=e.slice(0,a));return e}(e,t,r):function(e,t){if(c.isBuffer(t)){var r=0|p(t.length);return 0===(e=s(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?s(e,0):h(e,t);if("Buffer"===t.type&&i(t.data))return h(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(u(t),e=s(e,t<0?0:0|p(t)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function h(e,t){var r=t.length<0?0:0|p(t.length);e=s(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function p(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function f(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return L(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return U(e).length;default:if(n)return L(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return D(this,t,r);case"utf8":case"utf-8":return A(this,t,r);case"ascii":return P(this,t,r);case"latin1":case"binary":return C(this,t,r);case"base64":return E(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,a){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=a?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(a)return-1;r=e.length-1}else if(r<0){if(!a)return-1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,a);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,a);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,a){var i,o=1,s=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,s/=2,c/=2,r/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(a){var u=-1;for(i=r;i<s;i++)if(l(e,i)===l(t,-1===u?0:i-u)){if(-1===u&&(u=i),i-u+1===c)return u*o}else-1!==u&&(i-=i-u),u=-1}else for(r+c>s&&(r=s-c),i=r;i>=0;i--){for(var d=!0,h=0;h<c;h++)if(l(e,i+h)!==l(t,h)){d=!1;break}if(d)return i}return-1}function b(e,t,r,n){r=Number(r)||0;var a=e.length-r;n?(n=Number(n))>a&&(n=a):n=a;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var o=0;o<n;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[r+o]=s}return o}function _(e,t,r,n){return z(L(t,e.length-r),e,r,n)}function w(e,t,r,n){return z(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function x(e,t,r,n){return w(e,t,r,n)}function k(e,t,r,n){return z(U(t),e,r,n)}function S(e,t,r,n){return z(function(e,t){for(var r,n,a,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,a=r%256,i.push(a),i.push(n);return i}(t,e.length-r),e,r,n)}function E(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function A(e,t,r){r=Math.min(e.length,r);for(var n=[],a=t;a<r;){var i,o,s,c,l=e[a],u=null,d=l>239?4:l>223?3:l>191?2:1;if(a+d<=r)switch(d){case 1:l<128&&(u=l);break;case 2:128==(192&(i=e[a+1]))&&(c=(31&l)<<6|63&i)>127&&(u=c);break;case 3:i=e[a+1],o=e[a+2],128==(192&i)&&128==(192&o)&&(c=(15&l)<<12|(63&i)<<6|63&o)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:i=e[a+1],o=e[a+2],s=e[a+3],128==(192&i)&&128==(192&o)&&128==(192&s)&&(c=(15&l)<<18|(63&i)<<12|(63&o)<<6|63&s)>65535&&c<1114112&&(u=c)}null===u?(u=65533,d=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),a+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,r){return l(null,e,t,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,r){return function(e,t,r,n){return u(t),t<=0?s(e,t):void 0!==r?"string"==typeof n?s(e,t).fill(r,n):s(e,t).fill(r):s(e,t)}(null,e,t,r)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,a=0,i=Math.min(r,n);a<i;++a)if(e[a]!==t[a]){r=e[a],n=t[a];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=c.allocUnsafe(t),a=0;for(r=0;r<e.length;++r){var o=e[r];if(!c.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,a),a+=o.length}return n},c.byteLength=f,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):m.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,r,n,a){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===a&&(a=this.length),t<0||r>e.length||n<0||a>this.length)throw new RangeError("out of range index");if(n>=a&&t>=r)return 0;if(n>=a)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(a>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),s=Math.min(i,o),l=this.slice(n,a),u=e.slice(t,r),d=0;d<s;++d)if(l[d]!==u[d]){i=l[d],o=u[d];break}return i<o?-1:o<i?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var a=this.length-t;if((void 0===r||r>a)&&(r=a),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":return w(this,e,t,r);case"latin1":case"binary":return x(this,e,t,r);case"base64":return k(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(127&e[a]);return n}function C(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(e[a]);return n}function D(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var a="",i=t;i<r;++i)a+=q(e[i]);return a}function T(e,t,r){for(var n=e.slice(t,r),a="",i=0;i<n.length;i+=2)a+=String.fromCharCode(n[i]+256*n[i+1]);return a}function O(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,r,n,a,i){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function I(e,t,r,n){t<0&&(t=65535+t+1);for(var a=0,i=Math.min(e.length-r,2);a<i;++a)e[r+a]=(t&255<<8*(n?a:1-a))>>>8*(n?a:1-a)}function R(e,t,r,n){t<0&&(t=4294967295+t+1);for(var a=0,i=Math.min(e.length-r,4);a<i;++a)e[r+a]=t>>>8*(n?a:3-a)&255}function F(e,t,r,n,a,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function B(e,t,r,n,i){return i||F(e,0,r,4),a.write(e,t,r,n,23,4),r+4}function j(e,t,r,n,i){return i||F(e,0,r,8),a.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=c.prototype;else{var a=t-e;r=new c(a,void 0);for(var i=0;i<a;++i)r[i]=this[i+e]}return r},c.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var n=this[e],a=1,i=0;++i<t&&(a*=256);)n+=this[e+i]*a;return n},c.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var n=this[e+--t],a=1;t>0&&(a*=256);)n+=this[e+--t]*a;return n},c.prototype.readUInt8=function(e,t){return t||O(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||O(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||O(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var n=this[e],a=1,i=0;++i<t&&(a*=256);)n+=this[e+i]*a;return n>=(a*=128)&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var n=t,a=1,i=this[e+--n];n>0&&(a*=256);)i+=this[e+--n]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||O(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){t||O(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||O(e,4,this.length),a.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||O(e,4,this.length),a.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||O(e,8,this.length),a.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||O(e,8,this.length),a.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||M(this,e,t,r,Math.pow(2,8*r)-1,0);var a=1,i=0;for(this[t]=255&e;++i<r&&(a*=256);)this[t+i]=e/a&255;return t+r},c.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||M(this,e,t,r,Math.pow(2,8*r)-1,0);var a=r-1,i=1;for(this[t+a]=255&e;--a>=0&&(i*=256);)this[t+a]=e/i&255;return t+r},c.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):R(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var a=Math.pow(2,8*r-1);M(this,e,t,r,a-1,-a)}var i=0,o=1,s=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var a=Math.pow(2,8*r-1);M(this,e,t,r,a-1,-a)}var i=r-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):R(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,r){return B(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return B(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return j(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return j(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var a,i=n-r;if(this===e&&r<t&&t<n)for(a=i-1;a>=0;--a)e[a+t]=this[a+r];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(a=0;a<i;++a)e[a+t]=this[a+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var o=c.isBuffer(e)?e:L(new c(e,n).toString()),s=o.length;for(i=0;i<r-t;++i)this[i+t]=o[i%s]}return this};var N=/[^+\/0-9A-Za-z-_]/g;function q(e){return e<16?"0"+e.toString(16):e.toString(16)}function L(e,t){var r;t=t||1/0;for(var n=e.length,a=null,i=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!a){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&i.push(239,191,189);continue}a=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),a=r;continue}r=65536+(a-55296<<10|r-56320)}else a&&(t-=3)>-1&&i.push(239,191,189);if(a=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function U(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(N,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function z(e,t,r,n){for(var a=0;a<n&&!(a+r>=t.length||a>=e.length);++a)t[a+r]=e[a];return a}}).call(this,r(18))},function(e,t,r){var n=t;n.binary=r(774),n.block=r(777),n.blockchain=r(778),n.blockring=r(779),n.browser=r(780),n.burnfee=r(782),n.connection=r(783),n.crypto=r(784),n.goldenticket=r(884),n.hop=r(885),n.key=r(886),n.keychain=r(887),n.miner=r(971),n.modules=r(972),n.mempool=r(973),n.network=r(974),n.networkApi=r(975),n.peer=r(977),n.staking=r(999),n.storage=r(428),n.server=r(1031),n.utxoset=r(354),n.slip=r(1032),n.storage=r(428),n.transaction=r(1033),n.wallet=r(1034)},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var r,n,a=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var c,l=[],u=!1,d=-1;function h(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&p())}function p(){if(!u){var e=s(h);u=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new f(e,t)),1!==l.length||u||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,r){(function(e){function r(e,t){for(var r=0,n=e.length-1;n>=0;n--){var a=e[n];"."===a?e.splice(n,1):".."===a?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}t.resolve=function(){for(var t="",a=!1,i=arguments.length-1;i>=-1&&!a;i--){var o=i>=0?arguments[i]:e.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,a="/"===o.charAt(0))}return(a?"/":"")+(t=r(n(t.split("/"),(function(e){return!!e})),!a).join("/"))||"."},t.normalize=function(e){var i=t.isAbsolute(e),o="/"===a(e,-1);return(e=r(n(e.split("/"),(function(e){return!!e})),!i).join("/"))||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,r){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var a=n(e.split("/")),i=n(r.split("/")),o=Math.min(a.length,i.length),s=o,c=0;c<o;c++)if(a[c]!==i[c]){s=c;break}var l=[];for(c=s;c<a.length;c++)l.push("..");return(l=l.concat(i.slice(s))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,a=!0,i=e.length-1;i>=1;--i)if(47===(t=e.charCodeAt(i))){if(!a){n=i;break}}else a=!1;return-1===n?r?"/":".":r&&1===n?"/":e.slice(0,n)},t.basename=function(e,t){var r=function(e){"string"!=typeof e&&(e+="");var t,r=0,n=-1,a=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!a){r=t+1;break}}else-1===n&&(a=!1,n=t+1);return-1===n?"":e.slice(r,n)}(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,r=0,n=-1,a=!0,i=0,o=e.length-1;o>=0;--o){var s=e.charCodeAt(o);if(47!==s)-1===n&&(a=!1,n=o+1),46===s?-1===t?t=o:1!==i&&(i=1):-1!==t&&(i=-1);else if(!a){r=o+1;break}}return-1===t||-1===n||0===i||1===i&&t===n-1&&t===r+1?"":e.slice(t,n)};var a="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,r(9))},function(e,t,r){var n=r(83)("wks"),a=r(55),i=r(6).Symbol,o="function"==typeof i;(e.exports=function(e){return n[e]||(n[e]=o&&i[e]||(o?i:a)("Symbol."+e))}).store=n},function(e,t,r){var n=r(36),a=Math.min;e.exports=function(e){return e>0?a(n(e),9007199254740991):0}},function(e,t,r){e.exports=!r(7)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,r){var n=r(3),a=r(317),i=r(38),o=Object.defineProperty;t.f=r(13)?Object.defineProperty:function(e,t,r){if(n(e),t=i(t,!0),n(r),a)try{return o(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var n=r(39);e.exports=function(e){return Object(n(e))}},function(e,t,r){(function(e){!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function a(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function i(e,t,r){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(826).Buffer}catch(e){}function s(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function c(e,t,r){var n=s(e,r);return r-1>=t&&(n|=s(e,r-1)<<4),n}function l(e,t,r,n){for(var a=0,i=Math.min(e.length,r),o=t;o<i;o++){var s=e.charCodeAt(o)-48;a*=n,a+=s>=49?s-49+10:s>=17?s-17+10:s}return a}i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var a=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(a++,this.negative=1),a<e.length&&(16===t?this._parseHex(e,a,r):(this._parseBase(e,t,a),"le"===r&&this._initArray(this.toArray(),t,r)))},i.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},i.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var i,o,s=0;if("be"===r)for(a=e.length-1,i=0;a>=0;a-=3)o=e[a]|e[a-1]<<8|e[a-2]<<16,this.words[i]|=o<<s&67108863,this.words[i+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,i++);else if("le"===r)for(a=0,i=0;a<e.length;a+=3)o=e[a]|e[a+1]<<8|e[a+2]<<16,this.words[i]|=o<<s&67108863,this.words[i+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,i++);return this.strip()},i.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var a,i=0,o=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)a=c(e,t,n)<<i,this.words[o]|=67108863&a,i>=18?(i-=18,o+=1,this.words[o]|=a>>>26):i+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)a=c(e,t,n)<<i,this.words[o]|=67108863&a,i>=18?(i-=18,o+=1,this.words[o]|=a>>>26):i+=8;this.strip()},i.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,a=1;a<=67108863;a*=t)n++;n--,a=a/t|0;for(var i=e.length-r,o=i%n,s=Math.min(i,i-o)+r,c=0,u=r;u<s;u+=n)c=l(e,u,u+n,t),this.imuln(a),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==o){var d=1;for(c=l(e,u,e.length,t),u=0;u<o;u++)d*=t;this.imuln(d),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var a=0|e.words[0],i=0|t.words[0],o=a*i,s=67108863&o,c=o/67108864|0;r.words[0]=s;for(var l=1;l<n;l++){for(var u=c>>>26,d=67108863&c,h=Math.min(l,t.length-1),p=Math.max(0,l-e.length+1);p<=h;p++){var f=l-p|0;u+=(o=(a=0|e.words[f])*(i=0|t.words[p])+d)/67108864|0,d=67108863&o}r.words[l]=0|d,c=0|u}return 0!==c?r.words[l]=0|c:r.length--,r.strip()}i.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var a=0,i=0,o=0;o<this.length;o++){var s=this.words[o],c=(16777215&(s<<a|i)).toString(16);r=0!==(i=s>>>24-a&16777215)||o!==this.length-1?u[6-c.length]+c+r:c+r,(a+=2)>=26&&(a-=26,o--)}for(0!==i&&(r=i.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var l=d[e],p=h[e];r="";var f=this.clone();for(f.negative=0;!f.isZero();){var m=f.modn(p).toString(e);r=(f=f.idivn(p)).isZero()?m+r:u[l-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(e,t){return n(void 0!==o),this.toArrayLike(o,e,t)},i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},i.prototype.toArrayLike=function(e,t,r){var a=this.byteLength(),i=r||Math.max(1,a);n(a<=i,"byte array longer than desired length"),n(i>0,"Requested array length <= 0"),this.strip();var o,s,c="le"===t,l=new e(i),u=this.clone();if(c){for(s=0;!u.isZero();s++)o=u.andln(255),u.iushrn(8),l[s]=o;for(;s<i;s++)l[s]=0}else{for(s=0;s<i-a;s++)l[s]=0;for(s=0;!u.isZero();s++)o=u.andln(255),u.iushrn(8),l[i-s-1]=o}return l},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},i.prototype.ior=function(e){return n(0==(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},i.prototype.iand=function(e){return n(0==(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},i.prototype.ixor=function(e){return n(0==(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var a=0;a<t;a++)this.words[a]=67108863&~this.words[a];return r>0&&(this.words[a]=~this.words[a]&67108863>>26-r),this.strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,a=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<a:this.words[r]&~(1<<a),this.strip()},i.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var a=0,i=0;i<n.length;i++)t=(0|r.words[i])+(0|n.words[i])+a,this.words[i]=67108863&t,a=t>>>26;for(;0!==a&&i<r.length;i++)t=(0|r.words[i])+a,this.words[i]=67108863&t,a=t>>>26;if(this.length=r.length,0!==a)this.words[this.length]=a,this.length++;else if(r!==this)for(;i<r.length;i++)this.words[i]=r.words[i];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,a=this.cmp(e);if(0===a)return this.negative=0,this.length=1,this.words[0]=0,this;a>0?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)i=(t=(0|r.words[o])-(0|n.words[o])+i)>>26,this.words[o]=67108863&t;for(;0!==i&&o<r.length;o++)i=(t=(0|r.words[o])+i)>>26,this.words[o]=67108863&t;if(0===i&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var f=function(e,t,r){var n,a,i,o=e.words,s=t.words,c=r.words,l=0,u=0|o[0],d=8191&u,h=u>>>13,p=0|o[1],f=8191&p,m=p>>>13,g=0|o[2],y=8191&g,v=g>>>13,b=0|o[3],_=8191&b,w=b>>>13,x=0|o[4],k=8191&x,S=x>>>13,E=0|o[5],A=8191&E,P=E>>>13,C=0|o[6],D=8191&C,T=C>>>13,O=0|o[7],M=8191&O,I=O>>>13,R=0|o[8],F=8191&R,B=R>>>13,j=0|o[9],N=8191&j,q=j>>>13,L=0|s[0],U=8191&L,z=L>>>13,H=0|s[1],$=8191&H,G=H>>>13,K=0|s[2],V=8191&K,W=K>>>13,Y=0|s[3],J=8191&Y,Q=Y>>>13,X=0|s[4],Z=8191&X,ee=X>>>13,te=0|s[5],re=8191&te,ne=te>>>13,ae=0|s[6],ie=8191&ae,oe=ae>>>13,se=0|s[7],ce=8191&se,le=se>>>13,ue=0|s[8],de=8191&ue,he=ue>>>13,pe=0|s[9],fe=8191&pe,me=pe>>>13;r.negative=e.negative^t.negative,r.length=19;var ge=(l+(n=Math.imul(d,U))|0)+((8191&(a=(a=Math.imul(d,z))+Math.imul(h,U)|0))<<13)|0;l=((i=Math.imul(h,z))+(a>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(f,U),a=(a=Math.imul(f,z))+Math.imul(m,U)|0,i=Math.imul(m,z);var ye=(l+(n=n+Math.imul(d,$)|0)|0)+((8191&(a=(a=a+Math.imul(d,G)|0)+Math.imul(h,$)|0))<<13)|0;l=((i=i+Math.imul(h,G)|0)+(a>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(y,U),a=(a=Math.imul(y,z))+Math.imul(v,U)|0,i=Math.imul(v,z),n=n+Math.imul(f,$)|0,a=(a=a+Math.imul(f,G)|0)+Math.imul(m,$)|0,i=i+Math.imul(m,G)|0;var ve=(l+(n=n+Math.imul(d,V)|0)|0)+((8191&(a=(a=a+Math.imul(d,W)|0)+Math.imul(h,V)|0))<<13)|0;l=((i=i+Math.imul(h,W)|0)+(a>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(_,U),a=(a=Math.imul(_,z))+Math.imul(w,U)|0,i=Math.imul(w,z),n=n+Math.imul(y,$)|0,a=(a=a+Math.imul(y,G)|0)+Math.imul(v,$)|0,i=i+Math.imul(v,G)|0,n=n+Math.imul(f,V)|0,a=(a=a+Math.imul(f,W)|0)+Math.imul(m,V)|0,i=i+Math.imul(m,W)|0;var be=(l+(n=n+Math.imul(d,J)|0)|0)+((8191&(a=(a=a+Math.imul(d,Q)|0)+Math.imul(h,J)|0))<<13)|0;l=((i=i+Math.imul(h,Q)|0)+(a>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(k,U),a=(a=Math.imul(k,z))+Math.imul(S,U)|0,i=Math.imul(S,z),n=n+Math.imul(_,$)|0,a=(a=a+Math.imul(_,G)|0)+Math.imul(w,$)|0,i=i+Math.imul(w,G)|0,n=n+Math.imul(y,V)|0,a=(a=a+Math.imul(y,W)|0)+Math.imul(v,V)|0,i=i+Math.imul(v,W)|0,n=n+Math.imul(f,J)|0,a=(a=a+Math.imul(f,Q)|0)+Math.imul(m,J)|0,i=i+Math.imul(m,Q)|0;var _e=(l+(n=n+Math.imul(d,Z)|0)|0)+((8191&(a=(a=a+Math.imul(d,ee)|0)+Math.imul(h,Z)|0))<<13)|0;l=((i=i+Math.imul(h,ee)|0)+(a>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(A,U),a=(a=Math.imul(A,z))+Math.imul(P,U)|0,i=Math.imul(P,z),n=n+Math.imul(k,$)|0,a=(a=a+Math.imul(k,G)|0)+Math.imul(S,$)|0,i=i+Math.imul(S,G)|0,n=n+Math.imul(_,V)|0,a=(a=a+Math.imul(_,W)|0)+Math.imul(w,V)|0,i=i+Math.imul(w,W)|0,n=n+Math.imul(y,J)|0,a=(a=a+Math.imul(y,Q)|0)+Math.imul(v,J)|0,i=i+Math.imul(v,Q)|0,n=n+Math.imul(f,Z)|0,a=(a=a+Math.imul(f,ee)|0)+Math.imul(m,Z)|0,i=i+Math.imul(m,ee)|0;var we=(l+(n=n+Math.imul(d,re)|0)|0)+((8191&(a=(a=a+Math.imul(d,ne)|0)+Math.imul(h,re)|0))<<13)|0;l=((i=i+Math.imul(h,ne)|0)+(a>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(D,U),a=(a=Math.imul(D,z))+Math.imul(T,U)|0,i=Math.imul(T,z),n=n+Math.imul(A,$)|0,a=(a=a+Math.imul(A,G)|0)+Math.imul(P,$)|0,i=i+Math.imul(P,G)|0,n=n+Math.imul(k,V)|0,a=(a=a+Math.imul(k,W)|0)+Math.imul(S,V)|0,i=i+Math.imul(S,W)|0,n=n+Math.imul(_,J)|0,a=(a=a+Math.imul(_,Q)|0)+Math.imul(w,J)|0,i=i+Math.imul(w,Q)|0,n=n+Math.imul(y,Z)|0,a=(a=a+Math.imul(y,ee)|0)+Math.imul(v,Z)|0,i=i+Math.imul(v,ee)|0,n=n+Math.imul(f,re)|0,a=(a=a+Math.imul(f,ne)|0)+Math.imul(m,re)|0,i=i+Math.imul(m,ne)|0;var xe=(l+(n=n+Math.imul(d,ie)|0)|0)+((8191&(a=(a=a+Math.imul(d,oe)|0)+Math.imul(h,ie)|0))<<13)|0;l=((i=i+Math.imul(h,oe)|0)+(a>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(M,U),a=(a=Math.imul(M,z))+Math.imul(I,U)|0,i=Math.imul(I,z),n=n+Math.imul(D,$)|0,a=(a=a+Math.imul(D,G)|0)+Math.imul(T,$)|0,i=i+Math.imul(T,G)|0,n=n+Math.imul(A,V)|0,a=(a=a+Math.imul(A,W)|0)+Math.imul(P,V)|0,i=i+Math.imul(P,W)|0,n=n+Math.imul(k,J)|0,a=(a=a+Math.imul(k,Q)|0)+Math.imul(S,J)|0,i=i+Math.imul(S,Q)|0,n=n+Math.imul(_,Z)|0,a=(a=a+Math.imul(_,ee)|0)+Math.imul(w,Z)|0,i=i+Math.imul(w,ee)|0,n=n+Math.imul(y,re)|0,a=(a=a+Math.imul(y,ne)|0)+Math.imul(v,re)|0,i=i+Math.imul(v,ne)|0,n=n+Math.imul(f,ie)|0,a=(a=a+Math.imul(f,oe)|0)+Math.imul(m,ie)|0,i=i+Math.imul(m,oe)|0;var ke=(l+(n=n+Math.imul(d,ce)|0)|0)+((8191&(a=(a=a+Math.imul(d,le)|0)+Math.imul(h,ce)|0))<<13)|0;l=((i=i+Math.imul(h,le)|0)+(a>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(F,U),a=(a=Math.imul(F,z))+Math.imul(B,U)|0,i=Math.imul(B,z),n=n+Math.imul(M,$)|0,a=(a=a+Math.imul(M,G)|0)+Math.imul(I,$)|0,i=i+Math.imul(I,G)|0,n=n+Math.imul(D,V)|0,a=(a=a+Math.imul(D,W)|0)+Math.imul(T,V)|0,i=i+Math.imul(T,W)|0,n=n+Math.imul(A,J)|0,a=(a=a+Math.imul(A,Q)|0)+Math.imul(P,J)|0,i=i+Math.imul(P,Q)|0,n=n+Math.imul(k,Z)|0,a=(a=a+Math.imul(k,ee)|0)+Math.imul(S,Z)|0,i=i+Math.imul(S,ee)|0,n=n+Math.imul(_,re)|0,a=(a=a+Math.imul(_,ne)|0)+Math.imul(w,re)|0,i=i+Math.imul(w,ne)|0,n=n+Math.imul(y,ie)|0,a=(a=a+Math.imul(y,oe)|0)+Math.imul(v,ie)|0,i=i+Math.imul(v,oe)|0,n=n+Math.imul(f,ce)|0,a=(a=a+Math.imul(f,le)|0)+Math.imul(m,ce)|0,i=i+Math.imul(m,le)|0;var Se=(l+(n=n+Math.imul(d,de)|0)|0)+((8191&(a=(a=a+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;l=((i=i+Math.imul(h,he)|0)+(a>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(N,U),a=(a=Math.imul(N,z))+Math.imul(q,U)|0,i=Math.imul(q,z),n=n+Math.imul(F,$)|0,a=(a=a+Math.imul(F,G)|0)+Math.imul(B,$)|0,i=i+Math.imul(B,G)|0,n=n+Math.imul(M,V)|0,a=(a=a+Math.imul(M,W)|0)+Math.imul(I,V)|0,i=i+Math.imul(I,W)|0,n=n+Math.imul(D,J)|0,a=(a=a+Math.imul(D,Q)|0)+Math.imul(T,J)|0,i=i+Math.imul(T,Q)|0,n=n+Math.imul(A,Z)|0,a=(a=a+Math.imul(A,ee)|0)+Math.imul(P,Z)|0,i=i+Math.imul(P,ee)|0,n=n+Math.imul(k,re)|0,a=(a=a+Math.imul(k,ne)|0)+Math.imul(S,re)|0,i=i+Math.imul(S,ne)|0,n=n+Math.imul(_,ie)|0,a=(a=a+Math.imul(_,oe)|0)+Math.imul(w,ie)|0,i=i+Math.imul(w,oe)|0,n=n+Math.imul(y,ce)|0,a=(a=a+Math.imul(y,le)|0)+Math.imul(v,ce)|0,i=i+Math.imul(v,le)|0,n=n+Math.imul(f,de)|0,a=(a=a+Math.imul(f,he)|0)+Math.imul(m,de)|0,i=i+Math.imul(m,he)|0;var Ee=(l+(n=n+Math.imul(d,fe)|0)|0)+((8191&(a=(a=a+Math.imul(d,me)|0)+Math.imul(h,fe)|0))<<13)|0;l=((i=i+Math.imul(h,me)|0)+(a>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(N,$),a=(a=Math.imul(N,G))+Math.imul(q,$)|0,i=Math.imul(q,G),n=n+Math.imul(F,V)|0,a=(a=a+Math.imul(F,W)|0)+Math.imul(B,V)|0,i=i+Math.imul(B,W)|0,n=n+Math.imul(M,J)|0,a=(a=a+Math.imul(M,Q)|0)+Math.imul(I,J)|0,i=i+Math.imul(I,Q)|0,n=n+Math.imul(D,Z)|0,a=(a=a+Math.imul(D,ee)|0)+Math.imul(T,Z)|0,i=i+Math.imul(T,ee)|0,n=n+Math.imul(A,re)|0,a=(a=a+Math.imul(A,ne)|0)+Math.imul(P,re)|0,i=i+Math.imul(P,ne)|0,n=n+Math.imul(k,ie)|0,a=(a=a+Math.imul(k,oe)|0)+Math.imul(S,ie)|0,i=i+Math.imul(S,oe)|0,n=n+Math.imul(_,ce)|0,a=(a=a+Math.imul(_,le)|0)+Math.imul(w,ce)|0,i=i+Math.imul(w,le)|0,n=n+Math.imul(y,de)|0,a=(a=a+Math.imul(y,he)|0)+Math.imul(v,de)|0,i=i+Math.imul(v,he)|0;var Ae=(l+(n=n+Math.imul(f,fe)|0)|0)+((8191&(a=(a=a+Math.imul(f,me)|0)+Math.imul(m,fe)|0))<<13)|0;l=((i=i+Math.imul(m,me)|0)+(a>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(N,V),a=(a=Math.imul(N,W))+Math.imul(q,V)|0,i=Math.imul(q,W),n=n+Math.imul(F,J)|0,a=(a=a+Math.imul(F,Q)|0)+Math.imul(B,J)|0,i=i+Math.imul(B,Q)|0,n=n+Math.imul(M,Z)|0,a=(a=a+Math.imul(M,ee)|0)+Math.imul(I,Z)|0,i=i+Math.imul(I,ee)|0,n=n+Math.imul(D,re)|0,a=(a=a+Math.imul(D,ne)|0)+Math.imul(T,re)|0,i=i+Math.imul(T,ne)|0,n=n+Math.imul(A,ie)|0,a=(a=a+Math.imul(A,oe)|0)+Math.imul(P,ie)|0,i=i+Math.imul(P,oe)|0,n=n+Math.imul(k,ce)|0,a=(a=a+Math.imul(k,le)|0)+Math.imul(S,ce)|0,i=i+Math.imul(S,le)|0,n=n+Math.imul(_,de)|0,a=(a=a+Math.imul(_,he)|0)+Math.imul(w,de)|0,i=i+Math.imul(w,he)|0;var Pe=(l+(n=n+Math.imul(y,fe)|0)|0)+((8191&(a=(a=a+Math.imul(y,me)|0)+Math.imul(v,fe)|0))<<13)|0;l=((i=i+Math.imul(v,me)|0)+(a>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(N,J),a=(a=Math.imul(N,Q))+Math.imul(q,J)|0,i=Math.imul(q,Q),n=n+Math.imul(F,Z)|0,a=(a=a+Math.imul(F,ee)|0)+Math.imul(B,Z)|0,i=i+Math.imul(B,ee)|0,n=n+Math.imul(M,re)|0,a=(a=a+Math.imul(M,ne)|0)+Math.imul(I,re)|0,i=i+Math.imul(I,ne)|0,n=n+Math.imul(D,ie)|0,a=(a=a+Math.imul(D,oe)|0)+Math.imul(T,ie)|0,i=i+Math.imul(T,oe)|0,n=n+Math.imul(A,ce)|0,a=(a=a+Math.imul(A,le)|0)+Math.imul(P,ce)|0,i=i+Math.imul(P,le)|0,n=n+Math.imul(k,de)|0,a=(a=a+Math.imul(k,he)|0)+Math.imul(S,de)|0,i=i+Math.imul(S,he)|0;var Ce=(l+(n=n+Math.imul(_,fe)|0)|0)+((8191&(a=(a=a+Math.imul(_,me)|0)+Math.imul(w,fe)|0))<<13)|0;l=((i=i+Math.imul(w,me)|0)+(a>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(N,Z),a=(a=Math.imul(N,ee))+Math.imul(q,Z)|0,i=Math.imul(q,ee),n=n+Math.imul(F,re)|0,a=(a=a+Math.imul(F,ne)|0)+Math.imul(B,re)|0,i=i+Math.imul(B,ne)|0,n=n+Math.imul(M,ie)|0,a=(a=a+Math.imul(M,oe)|0)+Math.imul(I,ie)|0,i=i+Math.imul(I,oe)|0,n=n+Math.imul(D,ce)|0,a=(a=a+Math.imul(D,le)|0)+Math.imul(T,ce)|0,i=i+Math.imul(T,le)|0,n=n+Math.imul(A,de)|0,a=(a=a+Math.imul(A,he)|0)+Math.imul(P,de)|0,i=i+Math.imul(P,he)|0;var De=(l+(n=n+Math.imul(k,fe)|0)|0)+((8191&(a=(a=a+Math.imul(k,me)|0)+Math.imul(S,fe)|0))<<13)|0;l=((i=i+Math.imul(S,me)|0)+(a>>>13)|0)+(De>>>26)|0,De&=67108863,n=Math.imul(N,re),a=(a=Math.imul(N,ne))+Math.imul(q,re)|0,i=Math.imul(q,ne),n=n+Math.imul(F,ie)|0,a=(a=a+Math.imul(F,oe)|0)+Math.imul(B,ie)|0,i=i+Math.imul(B,oe)|0,n=n+Math.imul(M,ce)|0,a=(a=a+Math.imul(M,le)|0)+Math.imul(I,ce)|0,i=i+Math.imul(I,le)|0,n=n+Math.imul(D,de)|0,a=(a=a+Math.imul(D,he)|0)+Math.imul(T,de)|0,i=i+Math.imul(T,he)|0;var Te=(l+(n=n+Math.imul(A,fe)|0)|0)+((8191&(a=(a=a+Math.imul(A,me)|0)+Math.imul(P,fe)|0))<<13)|0;l=((i=i+Math.imul(P,me)|0)+(a>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(N,ie),a=(a=Math.imul(N,oe))+Math.imul(q,ie)|0,i=Math.imul(q,oe),n=n+Math.imul(F,ce)|0,a=(a=a+Math.imul(F,le)|0)+Math.imul(B,ce)|0,i=i+Math.imul(B,le)|0,n=n+Math.imul(M,de)|0,a=(a=a+Math.imul(M,he)|0)+Math.imul(I,de)|0,i=i+Math.imul(I,he)|0;var Oe=(l+(n=n+Math.imul(D,fe)|0)|0)+((8191&(a=(a=a+Math.imul(D,me)|0)+Math.imul(T,fe)|0))<<13)|0;l=((i=i+Math.imul(T,me)|0)+(a>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(N,ce),a=(a=Math.imul(N,le))+Math.imul(q,ce)|0,i=Math.imul(q,le),n=n+Math.imul(F,de)|0,a=(a=a+Math.imul(F,he)|0)+Math.imul(B,de)|0,i=i+Math.imul(B,he)|0;var Me=(l+(n=n+Math.imul(M,fe)|0)|0)+((8191&(a=(a=a+Math.imul(M,me)|0)+Math.imul(I,fe)|0))<<13)|0;l=((i=i+Math.imul(I,me)|0)+(a>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul(N,de),a=(a=Math.imul(N,he))+Math.imul(q,de)|0,i=Math.imul(q,he);var Ie=(l+(n=n+Math.imul(F,fe)|0)|0)+((8191&(a=(a=a+Math.imul(F,me)|0)+Math.imul(B,fe)|0))<<13)|0;l=((i=i+Math.imul(B,me)|0)+(a>>>13)|0)+(Ie>>>26)|0,Ie&=67108863;var Re=(l+(n=Math.imul(N,fe))|0)+((8191&(a=(a=Math.imul(N,me))+Math.imul(q,fe)|0))<<13)|0;return l=((i=Math.imul(q,me))+(a>>>13)|0)+(Re>>>26)|0,Re&=67108863,c[0]=ge,c[1]=ye,c[2]=ve,c[3]=be,c[4]=_e,c[5]=we,c[6]=xe,c[7]=ke,c[8]=Se,c[9]=Ee,c[10]=Ae,c[11]=Pe,c[12]=Ce,c[13]=De,c[14]=Te,c[15]=Oe,c[16]=Me,c[17]=Ie,c[18]=Re,0!==l&&(c[19]=l,r.length++),r};function m(e,t,r){return(new g).mulp(e,t,r)}function g(e,t){this.x=e,this.y=t}Math.imul||(f=p),i.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?f(this,e,t):r<63?p(this,e,t):r<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,a=0,i=0;i<r.length-1;i++){var o=a;a=0;for(var s=67108863&n,c=Math.min(i,t.length-1),l=Math.max(0,i-e.length+1);l<=c;l++){var u=i-l,d=(0|e.words[u])*(0|t.words[l]),h=67108863&d;s=67108863&(h=h+s|0),a+=(o=(o=o+(d/67108864|0)|0)+(h>>>26)|0)>>>26,o&=67108863}r.words[i]=s,n=o,o=a}return 0!==n?r.words[i]=n:r.length--,r.strip()}(this,e,t):m(this,e,t)},g.prototype.makeRBT=function(e){for(var t=new Array(e),r=i.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},g.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,a=0;a<t;a++)n|=(1&e)<<t-a-1,e>>=1;return n},g.prototype.permute=function(e,t,r,n,a,i){for(var o=0;o<i;o++)n[o]=t[e[o]],a[o]=r[e[o]]},g.prototype.transform=function(e,t,r,n,a,i){this.permute(i,e,t,r,n,a);for(var o=1;o<a;o<<=1)for(var s=o<<1,c=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),u=0;u<a;u+=s)for(var d=c,h=l,p=0;p<o;p++){var f=r[u+p],m=n[u+p],g=r[u+p+o],y=n[u+p+o],v=d*g-h*y;y=d*y+h*g,g=v,r[u+p]=f+g,n[u+p]=m+y,r[u+p+o]=f-g,n[u+p+o]=m-y,p!==s&&(v=c*d-l*h,h=c*h+l*d,d=v)}},g.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,a=0;for(r=r/2|0;r;r>>>=1)a++;return 1<<a+1+n},g.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var a=e[n];e[n]=e[r-n-1],e[r-n-1]=a,a=t[n],t[n]=-t[r-n-1],t[r-n-1]=-a}},g.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var a=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&a,r=a<67108864?0:a/67108864|0}return e},g.prototype.convert13b=function(e,t,r,a){for(var i=0,o=0;o<t;o++)i+=0|e[o],r[2*o]=8191&i,i>>>=13,r[2*o+1]=8191&i,i>>>=13;for(o=2*t;o<a;++o)r[o]=0;n(0===i),n(0==(-8192&i))},g.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},g.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),a=this.makeRBT(n),i=this.stub(n),o=new Array(n),s=new Array(n),c=new Array(n),l=new Array(n),u=new Array(n),d=new Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,o,n),this.convert13b(t.words,t.length,l,n),this.transform(o,i,s,c,n,a),this.transform(l,i,u,d,n,a);for(var p=0;p<n;p++){var f=s[p]*u[p]-c[p]*d[p];c[p]=s[p]*d[p]+c[p]*u[p],s[p]=f}return this.conjugate(s,c,n),this.transform(s,c,h,i,n,a),this.conjugate(h,i,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),m(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){n("number"==typeof e),n(e<67108864);for(var t=0,r=0;r<this.length;r++){var a=(0|this.words[r])*e,i=(67108863&a)+(67108863&t);t>>=26,t+=a/67108864|0,t+=i>>>26,this.words[r]=67108863&i}return 0!==t&&(this.words[r]=t,this.length++),this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,a=r%26;t[r]=(e.words[n]&1<<a)>>>a}return t}(e);if(0===t.length)return new i(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var a=r.sqr();n<t.length;n++,a=a.sqr())0!==t[n]&&(r=r.mul(a));return r},i.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,a=(e-r)/26,i=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(t=0;t<this.length;t++){var s=this.words[t]&i,c=(0|this.words[t])-s<<r;this.words[t]=c|o,o=s>>>26-r}o&&(this.words[t]=o,this.length++)}if(0!==a){for(t=this.length-1;t>=0;t--)this.words[t+a]=this.words[t];for(t=0;t<a;t++)this.words[t]=0;this.length+=a}return this.strip()},i.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,r){var a;n("number"==typeof e&&e>=0),a=t?(t-t%26)/26:0;var i=e%26,o=Math.min((e-i)/26,this.length),s=67108863^67108863>>>i<<i,c=r;if(a-=o,a=Math.max(0,a),c){for(var l=0;l<o;l++)c.words[l]=this.words[l];c.length=o}if(0===o);else if(this.length>o)for(this.length-=o,l=0;l<this.length;l++)this.words[l]=this.words[l+o];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=a);l--){var d=0|this.words[l];this.words[l]=u<<26-i|d>>>i,u=d&s}return c&&0!==u&&(c.words[c.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,a=1<<t;return!(this.length<=r)&&!!(this.words[r]&a)},i.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var a=67108863^67108863>>>t<<t;this.words[this.length-1]&=a}return this.strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,r){var a,i,o=e.length+r;this._expand(o);var s=0;for(a=0;a<e.length;a++){i=(0|this.words[a+r])+s;var c=(0|e.words[a])*t;s=((i-=67108863&c)>>26)-(c/67108864|0),this.words[a+r]=67108863&i}for(;a<this.length-r;a++)s=(i=(0|this.words[a+r])+s)>>26,this.words[a+r]=67108863&i;if(0===s)return this.strip();for(n(-1===s),s=0,a=0;a<this.length;a++)s=(i=-(0|this.words[a])+s)>>26,this.words[a]=67108863&i;return this.negative=1,this.strip()},i.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),a=e,o=0|a.words[a.length-1];0!==(r=26-this._countBits(o))&&(a=a.ushln(r),n.iushln(r),o=0|a.words[a.length-1]);var s,c=n.length-a.length;if("mod"!==t){(s=new i(null)).length=c+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var u=n.clone()._ishlnsubmul(a,1,c);0===u.negative&&(n=u,s&&(s.words[c]=1));for(var d=c-1;d>=0;d--){var h=67108864*(0|n.words[a.length+d])+(0|n.words[a.length+d-1]);for(h=Math.min(h/o|0,67108863),n._ishlnsubmul(a,h,d);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(a,1,d),n.isZero()||(n.negative^=1);s&&(s.words[d]=h)}return s&&s.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},i.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(a=s.div.neg()),"div"!==t&&(o=s.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:a,mod:o}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(a=s.div.neg()),{div:a,mod:s.mod}):0!=(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(o=s.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:s.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modn(e.words[0]))}:this._wordDiv(e,t);var a,o,s},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),a=e.andln(1),i=r.cmp(n);return i<0||1===a&&0===i?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modn=function(e){n(e<=67108863);for(var t=(1<<26)%e,r=0,a=this.length-1;a>=0;a--)r=(t*r+(0|this.words[a]))%e;return r},i.prototype.idivn=function(e){n(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var a=(0|this.words[r])+67108864*t;this.words[r]=a/e|0,t=a%e}return this.strip()},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a=new i(1),o=new i(0),s=new i(0),c=new i(1),l=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++l;for(var u=r.clone(),d=t.clone();!t.isZero();){for(var h=0,p=1;0==(t.words[0]&p)&&h<26;++h,p<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(a.isOdd()||o.isOdd())&&(a.iadd(u),o.isub(d)),a.iushrn(1),o.iushrn(1);for(var f=0,m=1;0==(r.words[0]&m)&&f<26;++f,m<<=1);if(f>0)for(r.iushrn(f);f-- >0;)(s.isOdd()||c.isOdd())&&(s.iadd(u),c.isub(d)),s.iushrn(1),c.iushrn(1);t.cmp(r)>=0?(t.isub(r),a.isub(s),o.isub(c)):(r.isub(t),s.isub(a),c.isub(o))}return{a:s,b:c,gcd:r.iushln(l)}},i.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a,o=new i(1),s=new i(0),c=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var l=0,u=1;0==(t.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(t.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);for(var d=0,h=1;0==(r.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(r.iushrn(d);d-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);t.cmp(r)>=0?(t.isub(r),o.isub(s)):(r.isub(t),s.isub(o))}return(a=0===t.cmpn(1)?o:s).cmpn(0)<0&&a.iadd(e),a},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var a=t.cmp(r);if(a<0){var i=t;t=r,r=i}else if(0===a||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,a=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=a,this;for(var i=a,o=r;0!==i&&o<this.length;o++){var s=0|this.words[o];i=(s+=i)>>>26,s&=67108863,this.words[o]=s}return 0!==i&&(this.words[o]=i,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var a=0|this.words[0];t=a===e?0:a<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],a=0|e.words[r];if(n!==a){n<a?t=-1:n>a&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new k(e)},i.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function v(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){k.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},v.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(e,t){e.iushrn(this.n,0,t)},v.prototype.imulK=function(e){return e.imul(this.k)},a(b,v),b.prototype.split=function(e,t){for(var r=Math.min(e.length,9),n=0;n<r;n++)t.words[n]=e.words[n];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=4194303&a,n=10;n<e.length;n++){var i=0|e.words[n];e.words[n-10]=(4194303&i)<<4|a>>>22,a=i}a>>>=22,e.words[n-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},b.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},a(_,v),a(w,v),a(x,v),x.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,a=67108863&n;n>>>=26,e.words[r]=a,t=n}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new b;else if("p224"===e)t=new _;else if("p192"===e)t=new w;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new x}return y[e]=t,t},k.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},k.prototype._verify2=function(e,t){n(0==(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},k.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},k.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},k.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},k.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},k.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},k.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},k.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},k.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},k.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},k.prototype.isqr=function(e){return this.imul(e,e.clone())},k.prototype.sqr=function(e){return this.mul(e,e)},k.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new i(1)).iushrn(2);return this.pow(e,r)}for(var a=this.m.subn(1),o=0;!a.isZero()&&0===a.andln(1);)o++,a.iushrn(1);n(!a.isZero());var s=new i(1).toRed(this),c=s.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new i(2*u*u).toRed(this);0!==this.pow(u,l).cmp(c);)u.redIAdd(c);for(var d=this.pow(u,a),h=this.pow(e,a.addn(1).iushrn(1)),p=this.pow(e,a),f=o;0!==p.cmp(s);){for(var m=p,g=0;0!==m.cmp(s);g++)m=m.redSqr();n(g<f);var y=this.pow(d,new i(1).iushln(f-g-1));h=h.redMul(y),d=y.redSqr(),p=p.redMul(d),f=g}return h},k.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},k.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new i(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var a=r[0],o=0,s=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var l=t.words[n],u=c-1;u>=0;u--){var d=l>>u&1;a!==r[0]&&(a=this.sqr(a)),0!==d||0!==o?(o<<=1,o|=d,(4===++s||0===n&&0===u)&&(a=this.mul(a,r[o]),s=0,o=0)):s=0}c=26}return a},k.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},k.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new S(e)},a(S,k),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=r.isub(n).iushrn(this.shift),i=a;return a.cmp(this.m)>=0?i=a.isub(this.m):a.cmpn(0)<0&&(i=a.iadd(this.m)),i._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=r.isub(n).iushrn(this.shift),o=a;return a.cmp(this.m)>=0?o=a.isub(this.m):a.cmpn(0)<0&&(o=a.iadd(this.m)),o._forceRed(this)},S.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,r(66)(e))},function(e,t,r){(function(t,n){var a,i,o=r(124),s=r(1001),c=r(1003),l=r(1004),u=r(430);function d(e,t){Object.defineProperty(e,a,{get:function(){return t}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(a=Symbol.for("graceful-fs.queue"),i=Symbol.for("graceful-fs.previous")):(a="___graceful-fs.queue",i="___graceful-fs.previous");var h,p=function(){};if(u.debuglog?p=u.debuglog("gfs4"):/\bgfs4\b/i.test(t.env.NODE_DEBUG||"")&&(p=function(){var e=u.format.apply(u,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: "),console.error(e)}),!o[a]){var f=n[a]||[];d(o,f),o.close=function(e){function t(t,r){return e.call(o,t,(function(e){e||y(),"function"==typeof r&&r.apply(this,arguments)}))}return Object.defineProperty(t,i,{value:e}),t}(o.close),o.closeSync=function(e){function t(t){e.apply(o,arguments),y()}return Object.defineProperty(t,i,{value:e}),t}(o.closeSync),/\bgfs4\b/i.test(t.env.NODE_DEBUG||"")&&t.on("exit",(function(){p(o[a]),r(431).equal(o[a].length,0)}))}function m(e){s(e),e.gracefulify=m,e.createReadStream=function(t,r){return new e.ReadStream(t,r)},e.createWriteStream=function(t,r){return new e.WriteStream(t,r)};var r=e.readFile;e.readFile=function(e,t,n){"function"==typeof t&&(n=t,t=null);return function e(t,n,a,i){return r(t,n,(function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?"function"==typeof a&&a.apply(this,arguments):g([e,[t,n,a],r,i||Date.now(),Date.now()])}))}(e,t,n)};var n=e.writeFile;e.writeFile=function(e,t,r,a){"function"==typeof r&&(a=r,r=null);return function e(t,r,a,i,o){return n(t,r,a,(function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?"function"==typeof i&&i.apply(this,arguments):g([e,[t,r,a,i],n,o||Date.now(),Date.now()])}))}(e,t,r,a)};var a=e.appendFile;a&&(e.appendFile=function(e,t,r,n){"function"==typeof r&&(n=r,r=null);return function e(t,r,n,i,o){return a(t,r,n,(function(a){!a||"EMFILE"!==a.code&&"ENFILE"!==a.code?"function"==typeof i&&i.apply(this,arguments):g([e,[t,r,n,i],a,o||Date.now(),Date.now()])}))}(e,t,r,n)});var i=e.copyFile;i&&(e.copyFile=function(e,t,r,n){"function"==typeof r&&(n=r,r=0);return function e(t,r,n,a,o){return i(t,r,n,(function(i){!i||"EMFILE"!==i.code&&"ENFILE"!==i.code?"function"==typeof a&&a.apply(this,arguments):g([e,[t,r,n,a],i,o||Date.now(),Date.now()])}))}(e,t,r,n)});var o=e.readdir;if(e.readdir=function(e,t,r){"function"==typeof t&&(r=t,t=null);return function e(t,r,n,a){return o(t,r,(function(i,o){!i||"EMFILE"!==i.code&&"ENFILE"!==i.code?(o&&o.sort&&o.sort(),"function"==typeof n&&n.call(this,i,o)):g([e,[t,r,n],i,a||Date.now(),Date.now()])}))}(e,t,r)},"v0.8"===t.version.substr(0,4)){var l=c(e);f=l.ReadStream,y=l.WriteStream}var u=e.ReadStream;u&&(f.prototype=Object.create(u.prototype),f.prototype.open=function(){var e=this;b(e.path,e.flags,e.mode,(function(t,r){t?(e.autoClose&&e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r),e.read())}))});var d=e.WriteStream;d&&(y.prototype=Object.create(d.prototype),y.prototype.open=function(){var e=this;b(e.path,e.flags,e.mode,(function(t,r){t?(e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r))}))}),Object.defineProperty(e,"ReadStream",{get:function(){return f},set:function(e){f=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return y},set:function(e){y=e},enumerable:!0,configurable:!0});var h=f;Object.defineProperty(e,"FileReadStream",{get:function(){return h},set:function(e){h=e},enumerable:!0,configurable:!0});var p=y;function f(e,t){return this instanceof f?(u.apply(this,arguments),this):f.apply(Object.create(f.prototype),arguments)}function y(e,t){return this instanceof y?(d.apply(this,arguments),this):y.apply(Object.create(y.prototype),arguments)}Object.defineProperty(e,"FileWriteStream",{get:function(){return p},set:function(e){p=e},enumerable:!0,configurable:!0});var v=e.open;function b(e,t,r,n){return"function"==typeof r&&(n=r,r=null),function e(t,r,n,a,i){return v(t,r,n,(function(o,s){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?"function"==typeof a&&a.apply(this,arguments):g([e,[t,r,n,a],o,i||Date.now(),Date.now()])}))}(e,t,r,n)}return e.open=b,e}function g(e){p("ENQUEUE",e[0].name,e[1]),o[a].push(e),v()}function y(){for(var e=Date.now(),t=0;t<o[a].length;++t)o[a][t].length>2&&(o[a][t][3]=e,o[a][t][4]=e);v()}function v(){if(clearTimeout(h),h=void 0,0!==o[a].length){var e=o[a].shift(),t=e[0],r=e[1],n=e[2],i=e[3],s=e[4];if(void 0===i)p("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-i>=6e4){p("TIMEOUT",t.name,r);var c=r.pop();"function"==typeof c&&c.call(null,n)}else{var l=Date.now()-s,u=Math.max(s-i,1);l>=Math.min(1.2*u,100)?(p("RETRY",t.name,r),t.apply(null,r.concat([i]))):o[a].push(e)}void 0===h&&(h=setTimeout(v,0))}}n[a]||d(n,o[a]),e.exports=m(l(o)),t.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!o.__patched&&(e.exports=m(o),o.__patched=!0)}).call(this,r(9),r(18))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){(function(t){function n(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(a,i){var o=e.apply(t,r);function s(e){n(o,a,i,s,c,"next",e)}function c(e){n(o,a,i,s,c,"throw",e)}s(void 0)}))}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r(124);var o=r(10),s=(r(888),function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t||{},this.dirname="",this.appname="",this.name="",this.slug="",this.link="",this.events=[],this.alerts=0,this.categories="",this.db_tables=[],this.default_html=0,this.browser_active=0}var r,n,s,c,l,u,d,h,p,f,m,g;return r=e,(n=[{key:"onlyOnActiveBrowser",value:function(e){return function(){if(this.app.BROWSER&&this.browser_active){var t=e.apply(this,arguments);return t}}}},{key:"onlyInBrowser",value:function(e){return function(){if(this.app.BROWSER){var t=e.apply(this,arguments);return t}}}},{key:"onlyOnServer",value:function(e){return function(){if(!this.app.BROWSER){var t=e.apply(this,arguments);return t}}}},{key:"installModule",value:(g=a(regeneratorRuntime.mark((function e(r){var n,a,i,s,c,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=this.app.BROWSER){e.next=2;break}return e.abrupt("return");case 2:if(n="".concat(t,"/../../mods/").concat(this.dirname,"/sql"),a=r.storage.returnFileSystem(),i=encodeURI(this.returnSlug()),null==a){e.next=24;break}if(!a.existsSync(o.normalize(n))){e.next=24;break}s=a.readdirSync(n).sort(),c=0;case 9:if(!(c<s.length)){e.next=24;break}return e.prev=10,l=o.join(n,s[c]),u=a.readFileSync(l,"utf8"),console.log("Creating database for: "+i),e.next=16,r.storage.executeDatabase(u,{},i);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(10),console.log(e.t0);case 21:c++,e.next=9;break;case 24:case"end":return e.stop()}}),e,this,[[10,18]])}))),function(e){return g.apply(this,arguments)})},{key:"initialize",value:(m=a(regeneratorRuntime.mark((function e(r){var n,a,i,s,c,l,u,d=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=function(e){r.connection.on(d.events[e],(function(t){d.receiveEvent(d.events[e],t)}))},a=0;a<this.events.length;a++)n(a);if(i="".concat(t,"/../../mods/").concat(this.dirname,"/sql"),null!=(s=r.storage.returnFileSystem())&&s.existsSync(o.normalize(i)))for(c=s.readdirSync(i),l=0;l<c.length;l++)u=(u=c[l].slice(0,-4)).replace(/\d+$/,""),this.db_tables.push(u);""==this.appname&&(this.appname=this.name);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"initializeHTML",value:function(e){}},{key:"attachEvents",value:function(e){}},{key:"render",value:function(e){}},{key:"onConfirmation",value:(f=a(regeneratorRuntime.mark((function e(t,r,n,a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,t,r,n){return f.apply(this,arguments)})},{key:"onNewBlock",value:function(e,t){}},{key:"onChainReorganization",value:function(e,t,r,n){}},{key:"onConnectionUnstable",value:function(e,t){}},{key:"onConnectionStable",value:function(e,t){}},{key:"onWalletReset",value:function(){}},{key:"onPeerHandshakeComplete",value:function(e,t){}},{key:"shouldAffixCallbackToModule",value:function(e){return e==this.name?1:0}},{key:"webServer",value:function(e,r,n){var a="".concat(t,"/../../mods/").concat(this.dirname,"/web"),i=e.storage.returnFileSystem();null!=i&&(i.existsSync(a)?r.use("/"+encodeURI(this.returnSlug()),n.static(a)):this.default_html&&r.use("/"+encodeURI(this.returnSlug()),n.static(t+"/../../lib/templates/html")))}},{key:"updateBlockchainSync",value:function(e,t,r){}},{key:"respondTo",value:function(){return null}},{key:"receiveEvent",value:function(e,t){}},{key:"sendEvent",value:function(e,t){this.app.connection.emit(e,t)}},{key:"handlePeerRequest",value:(p=a(regeneratorRuntime.mark((function e(t,r,n){var a,i,o,s,c,l,u,d,h,p,f,m,g,y,v,b=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=b.length>3&&void 0!==b[3]?b[3]:null,i=0;case 2:if(!(i<this.db_tables.length)){e.next=28;break}if(o=this.name.toLowerCase()+" load "+this.db_tables[i],r.request!==o){e.next=25;break}if(s=r.data.select,c=r.data.dbname,l=r.data.tablename,u=r.data.where,/^[a-z"`'=_*()\.\n\t\r ,0-9A-Z]+$/.test(s)){e.next=11;break}return e.abrupt("return");case 11:if(/^[a-z"`'=_()\. ,0-9A-Z]+$/.test(c)){e.next=13;break}return e.abrupt("return");case 13:if(/^[a-z"`'=_()\. ,0-9A-Z]+$/.test(l)){e.next=15;break}return e.abrupt("return");case 15:return d="SELECT ".concat(s," FROM ").concat(l),""!=u&&(d+=" WHERE ".concat(u)),h={},e.next=20,this.app.storage.queryDatabase(d,h,r.data.dbname);case 20:p=e.sent,(f={}).err="",f.rows=p,a(f);case 25:i++,e.next=2;break;case 28:if("rawSQL"!=r.request){e.next=40;break}if(r.data.module!=this.name){e.next=40;break}return m=r.data.sql,g={},e.next=34,this.app.storage.queryDatabase(m,g,r.data.dbname);case 34:return y=e.sent,(v={}).err="",v.rows=y,a(v),e.abrupt("return");case 40:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return p.apply(this,arguments)})},{key:"sendPeerDatabaseRequest",value:(h=a(regeneratorRuntime.mark((function e(t,r){var n,a,i,o,s,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=c.length>2&&void 0!==c[2]?c[2]:"",a=c.length>3&&void 0!==c[3]?c[3]:"",i=c.length>4&&void 0!==c[4]?c[4]:null,o=c.length>5&&void 0!==c[5]?c[5]:null,(s={}).request=t+" load "+r,s.data={},s.data.dbname=t,s.data.tablename=r,s.data.select=n,s.data.where=a,null==i?this.app.network.sendRequestWithCallback(s.request,s.data,(function(e){console.log("callback data1: "+JSON.stringify(e)),o(e)})):i.sendRequestWithCallback(s.request,s.data,(function(e){console.log("callback data2: "+JSON.stringify(e)),o(e)}));case 12:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"sendPeerDatabaseRequestWithFilter",value:(d=a(regeneratorRuntime.mark((function e(){var t,r,n,a,i,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:"",r=o.length>1&&void 0!==o[1]?o[1]:"",n=o.length>2&&void 0!==o[2]?o[2]:null,a=o.length>3&&void 0!==o[3]?o[3]:null,""!=r){e.next=6;break}return e.abrupt("return");case 6:if(""!=t){e.next=8;break}return e.abrupt("return");case 8:(i={}).request="rawSQL",i.data={},i.data.sql=r,i.data.module=t,i.data.dbname=t.toLowerCase(),this.sendPeerRequestWithFilter((function(){return i}),n,a);case 15:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"sendPeerRequestWithServiceFilter",value:(u=a(regeneratorRuntime.mark((function e(t,r){var n,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.length>2&&void 0!==a[2]?a[2]:function(e){},this.sendPeerRequestWithFilter((function(){return r}),n,(function(e){if(e.peer.services)for(var r=0;r<e.peer.services.length;r++)if(e.peer.services[r].service===t)return 1}));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"sendPeerRequestWithFilter",value:(l=a(regeneratorRuntime.mark((function e(){var t,r,n,a,i,o,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:null,r=s.length>1&&void 0!==s[1]?s[1]:null,n=s.length>2&&void 0!==s[2]?s[2]:null,null!=(a=t())){e.next=6;break}return e.abrupt("return");case 6:if(i=[],null==n)i=this.app.network.peers;else for(o=0;o<this.app.network.peers.length;o++)n(this.app.network.peers[o])&&i.push(this.app.network.peers[o]);if(0!=i.length){e.next=10;break}return e.abrupt("return");case 10:i.forEach((function(e){e.sendRequestWithCallback(a.request,a.data,(function(e){null!=r&&r(e)}))}));case 11:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"sendPeerDatabaseRequestRaw",value:(c=a(regeneratorRuntime.mark((function e(t,r){var n,a,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.length>2&&void 0!==i[2]?i[2]:null,(a={}).request="rawSQL",a.data={},a.data.sql=r,a.data.dbname=t,a.data.module=this.name,this.app.network.sendRequestWithCallback(a.request,a.data,(function(e){n(e)}));case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"returnSlug",value:function(){return""!=this.slug||(this.appname?this.slug=this.appname.toLowerCase():this.slug=this.name.toLowerCase(),this.slug=this.slug.replace(/\t/g,"_")),this.slug}},{key:"returnLink",value:function(){return""!=this.link||(this.link="/"+this.returnSlug()),this.link}},{key:"returnServices",value:function(){return[]}},{key:"handleUrlParams",value:function(e){}},{key:"showAlert",value:function(){this.alerts++;try{var e="#"+this.returnSlug()+" > .redicon";document.querySelector(e).style.display="block"}catch(e){}}}])&&i(r.prototype,n),s&&i(r,s),e}());e.exports=s}).call(this,"/")},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,r){var n=r(14),a=r(54);e.exports=r(13)?function(e,t,r){return n.f(e,t,a(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){var n=r(6),a=r(21),i=r(26),o=r(55)("src"),s=r(574),c=(""+s).split("toString");r(33).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,r,s){var l="function"==typeof r;l&&(i(r,"name")||a(r,"name",t)),e[t]!==r&&(l&&(i(r,o)||a(r,o,e[t]?""+e[t]:c.join(String(t)))),e===n?e[t]=r:s?e[t]?e[t]=r:a(e,t,r):(delete e[t],a(e,t,r)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[o]||s.call(this)}))},function(e,t,r){var n=r(0),a=r(7),i=r(39),o=/"/g,s=function(e,t,r,n){var a=String(i(e)),s="<"+t;return""!==r&&(s+=" "+r+'="'+String(n).replace(o,"&quot;")+'"'),s+">"+a+"</"+t+">"};e.exports=function(e,t){var r={};r[e]=t(s),n(n.P+n.F*a((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",r)}},function(e,t,r){var n;!function(a){"use strict";var i,o="[big.js] ",s=o+"Invalid ",c=s+"decimal places",l={},u=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function d(e,t,r,n){var a=e.c,i=e.e+t+1;if(i<a.length){if(1===r)n=a[i]>=5;else if(2===r)n=a[i]>5||5==a[i]&&(n||i<0||void 0!==a[i+1]||1&a[i-1]);else if(3===r)n=n||!!a[0];else if(n=!1,0!==r)throw Error("[big.js] Invalid rounding mode");if(i<1)a.length=1,n?(e.e=-t,a[0]=1):a[0]=e.e=0;else{if(a.length=i--,n)for(;++a[i]>9;)a[i]=0,i--||(++e.e,a.unshift(1));for(i=a.length;!a[--i];)a.pop()}}else if(r<0||r>3||r!==~~r)throw Error("[big.js] Invalid rounding mode");return e}function h(e,t,r,n){var a,i,o=e.constructor,l=!e.c[0];if(void 0!==r){if(r!==~~r||r<(3==t)||r>1e6)throw Error(3==t?s+"precision":c);for(r=n-(e=new o(e)).e,e.c.length>++n&&d(e,r,o.RM),2==t&&(n=e.e+r+1);e.c.length<n;)e.c.push(0)}if(a=e.e,r=(i=e.c.join("")).length,2!=t&&(1==t||3==t&&n<=a||a<=o.NE||a>=o.PE))i=i.charAt(0)+(r>1?"."+i.slice(1):"")+(a<0?"e":"e+")+a;else if(a<0){for(;++a;)i="0"+i;i="0."+i}else if(a>0)if(++a>r)for(a-=r;a--;)i+="0";else a<r&&(i=i.slice(0,a)+"."+i.slice(a));else r>1&&(i=i.charAt(0)+"."+i.slice(1));return e.s<0&&(!l||4==t)?"-"+i:i}l.abs=function(){var e=new this.constructor(this);return e.s=1,e},l.cmp=function(e){var t,r=this,n=r.c,a=(e=new r.constructor(e)).c,i=r.s,o=e.s,s=r.e,c=e.e;if(!n[0]||!a[0])return n[0]?i:a[0]?-o:0;if(i!=o)return i;if(t=i<0,s!=c)return s>c^t?1:-1;for(o=(s=n.length)<(c=a.length)?s:c,i=-1;++i<o;)if(n[i]!=a[i])return n[i]>a[i]^t?1:-1;return s==c?0:s>c^t?1:-1},l.div=function(e){var t=this,r=t.constructor,n=t.c,a=(e=new r(e)).c,i=t.s==e.s?1:-1,o=r.DP;if(o!==~~o||o<0||o>1e6)throw Error(c);if(!a[0])throw Error("[big.js] Division by zero");if(!n[0])return new r(0*i);var s,l,u,h,p,f=a.slice(),m=s=a.length,g=n.length,y=n.slice(0,s),v=y.length,b=e,_=b.c=[],w=0,x=o+(b.e=t.e-e.e)+1;for(b.s=i,i=x<0?0:x,f.unshift(0);v++<s;)y.push(0);do{for(u=0;u<10;u++){if(s!=(v=y.length))h=s>v?1:-1;else for(p=-1,h=0;++p<s;)if(a[p]!=y[p]){h=a[p]>y[p]?1:-1;break}if(!(h<0))break;for(l=v==s?a:f;v;){if(y[--v]<l[v]){for(p=v;p&&!y[--p];)y[p]=9;--y[p],y[v]+=10}y[v]-=l[v]}for(;!y[0];)y.shift()}_[w++]=h?u:++u,y[0]&&h?y[v]=n[m]||0:y=[n[m]]}while((m++<g||void 0!==y[0])&&i--);return _[0]||1==w||(_.shift(),b.e--),w>x&&d(b,o,r.RM,void 0!==y[0]),b},l.eq=function(e){return!this.cmp(e)},l.gt=function(e){return this.cmp(e)>0},l.gte=function(e){return this.cmp(e)>-1},l.lt=function(e){return this.cmp(e)<0},l.lte=function(e){return this.cmp(e)<1},l.minus=l.sub=function(e){var t,r,n,a,i=this,o=i.constructor,s=i.s,c=(e=new o(e)).s;if(s!=c)return e.s=-c,i.plus(e);var l=i.c.slice(),u=i.e,d=e.c,h=e.e;if(!l[0]||!d[0])return d[0]?(e.s=-c,e):new o(l[0]?i:0);if(s=u-h){for((a=s<0)?(s=-s,n=l):(h=u,n=d),n.reverse(),c=s;c--;)n.push(0);n.reverse()}else for(r=((a=l.length<d.length)?l:d).length,s=c=0;c<r;c++)if(l[c]!=d[c]){a=l[c]<d[c];break}if(a&&(n=l,l=d,d=n,e.s=-e.s),(c=(r=d.length)-(t=l.length))>0)for(;c--;)l[t++]=0;for(c=t;r>s;){if(l[--r]<d[r]){for(t=r;t&&!l[--t];)l[t]=9;--l[t],l[r]+=10}l[r]-=d[r]}for(;0===l[--c];)l.pop();for(;0===l[0];)l.shift(),--h;return l[0]||(e.s=1,l=[h=0]),e.c=l,e.e=h,e},l.mod=function(e){var t,r=this,n=r.constructor,a=r.s,i=(e=new n(e)).s;if(!e.c[0])throw Error("[big.js] Division by zero");return r.s=e.s=1,t=1==e.cmp(r),r.s=a,e.s=i,t?new n(r):(a=n.DP,i=n.RM,n.DP=n.RM=0,r=r.div(e),n.DP=a,n.RM=i,this.minus(r.times(e)))},l.plus=l.add=function(e){var t,r=this,n=r.constructor,a=r.s,i=(e=new n(e)).s;if(a!=i)return e.s=-i,r.minus(e);var o=r.e,s=r.c,c=e.e,l=e.c;if(!s[0]||!l[0])return l[0]?e:new n(s[0]?r:0*a);if(s=s.slice(),a=o-c){for(a>0?(c=o,t=l):(a=-a,t=s),t.reverse();a--;)t.push(0);t.reverse()}for(s.length-l.length<0&&(t=l,l=s,s=t),a=l.length,i=0;a;s[a]%=10)i=(s[--a]=s[a]+l[a]+i)/10|0;for(i&&(s.unshift(i),++c),a=s.length;0===s[--a];)s.pop();return e.c=s,e.e=c,e},l.pow=function(e){var t=this,r=new t.constructor(1),n=r,a=e<0;if(e!==~~e||e<-1e6||e>1e6)throw Error(s+"exponent");for(a&&(e=-e);1&e&&(n=n.times(t)),e>>=1;)t=t.times(t);return a?r.div(n):n},l.round=function(e,t){var r=this.constructor;if(void 0===e)e=0;else if(e!==~~e||e<-1e6||e>1e6)throw Error(c);return d(new r(this),e,void 0===t?r.RM:t)},l.sqrt=function(){var e,t,r,n=this,a=n.constructor,i=n.s,s=n.e,c=new a(.5);if(!n.c[0])return new a(n);if(i<0)throw Error(o+"No square root");0===(i=Math.sqrt(n+""))||i===1/0?((t=n.c.join("")).length+s&1||(t+="0"),s=((s+1)/2|0)-(s<0||1&s),e=new a(((i=Math.sqrt(t))==1/0?"1e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+s)):e=new a(i),s=e.e+(a.DP+=4);do{r=e,e=c.times(r.plus(n.div(r)))}while(r.c.slice(0,s).join("")!==e.c.slice(0,s).join(""));return d(e,a.DP-=4,a.RM)},l.times=l.mul=function(e){var t,r=this,n=r.constructor,a=r.c,i=(e=new n(e)).c,o=a.length,s=i.length,c=r.e,l=e.e;if(e.s=r.s==e.s?1:-1,!a[0]||!i[0])return new n(0*e.s);for(e.e=c+l,o<s&&(t=a,a=i,i=t,l=o,o=s,s=l),t=new Array(l=o+s);l--;)t[l]=0;for(c=s;c--;){for(s=0,l=o+c;l>c;)s=t[l]+i[c]*a[l-c-1]+s,t[l--]=s%10,s=s/10|0;t[l]=(t[l]+s)%10}for(s?++e.e:t.shift(),c=t.length;!t[--c];)t.pop();return e.c=t,e},l.toExponential=function(e){return h(this,1,e,e)},l.toFixed=function(e){return h(this,2,e,this.e+e)},l.toPrecision=function(e){return h(this,3,e,e-1)},l.toString=function(){return h(this)},l.valueOf=l.toJSON=function(){return h(this,4)},(i=function e(){function t(r){var n=this;if(!(n instanceof t))return void 0===r?e():new t(r);r instanceof t?(n.s=r.s,n.e=r.e,n.c=r.c.slice()):function(e,t){var r,n,a;if(0===t&&1/t<0)t="-0";else if(!u.test(t+=""))throw Error(s+"number");e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(r=t.indexOf("."))>-1&&(t=t.replace(".",""));(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length);for(a=t.length,n=0;n<a&&"0"==t.charAt(n);)++n;if(n==a)e.c=[e.e=0];else{for(;a>0&&"0"==t.charAt(--a););for(e.e=r-n-1,e.c=[],r=0;n<=a;)e.c[r++]=+t.charAt(n++)}}(n,r),n.constructor=t}return t.prototype=l,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.version="5.2.2",t}()).default=i.Big=i,void 0===(n=function(){return i}.call(t,r,t,e))||(e.exports=n)}()},function(e,t,r){"use strict";t.fromCallback=function(e){return Object.defineProperty((function(){if("function"!=typeof arguments[arguments.length-1])return new Promise((t,r)=>{arguments[arguments.length]=(e,n)=>{if(e)return r(e);t(n)},arguments.length++,e.apply(this,arguments)});e.apply(this,arguments)}),"name",{value:e.name})},t.fromPromise=function(e){return Object.defineProperty((function(){const t=arguments[arguments.length-1];if("function"!=typeof t)return e.apply(this,arguments);e.apply(this,arguments).then(e=>t(null,e),t)}),"name",{value:e.name})}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){var n=r(84),a=r(39);e.exports=function(e){return n(a(e))}},function(e,t,r){var n=r(85),a=r(54),i=r(27),o=r(38),s=r(26),c=r(317),l=Object.getOwnPropertyDescriptor;t.f=r(13)?l:function(e,t){if(e=i(e),t=o(t,!0),c)try{return l(e,t)}catch(e){}if(s(e,t))return a(!n.f.call(e,t),e[t])}},function(e,t,r){var n=r(26),a=r(15),i=r(147)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=a(e),n(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=r,r.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)}},function(e,t,r){"use strict";var n=t,a=r(16),i=r(30),o=r(388);n.assert=i,n.toArray=o.toArray,n.zero2=o.zero2,n.toHex=o.toHex,n.encode=o.encode,n.getNAF=function(e,t,r){var n=new Array(Math.max(e.bitLength(),r)+1);n.fill(0);for(var a=1<<t+1,i=e.clone(),o=0;o<n.length;o++){var s,c=i.andln(a-1);i.isOdd()?(s=c>(a>>1)-1?(a>>1)-c:c,i.isubn(s)):s=0,n[o]=s,i.iushrn(1)}return n},n.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,a=0,i=0;e.cmpn(-a)>0||t.cmpn(-i)>0;){var o,s,c=e.andln(3)+a&3,l=t.andln(3)+i&3;3===c&&(c=-1),3===l&&(l=-1),o=0==(1&c)?0:3!==(n=e.andln(7)+a&7)&&5!==n||2!==l?c:-c,r[0].push(o),s=0==(1&l)?0:3!==(n=t.andln(7)+i&7)&&5!==n||2!==c?l:-l,r[1].push(s),2*a===o+1&&(a=1-a),2*i===s+1&&(i=1-i),e.iushrn(1),t.iushrn(1)}return r},n.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},n.parseBytes=function(e){return"string"==typeof e?n.toArray(e,"hex"):e},n.intFromLE=function(e){return new a(e,"hex","le")}},function(e,t,r){"use strict";const n=(0,r(25).fromCallback)(r(1009)),a=r(1010);e.exports={mkdirs:n,mkdirsSync:a,mkdirp:n,mkdirpSync:a,ensureDir:n,ensureDirSync:a}},function(e,t){var r=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=r)},function(e,t,r){var n=r(20);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,a){return e.call(t,r,n,a)}}return function(){return e.apply(t,arguments)}}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){"use strict";var n=r(7);e.exports=function(e,t){return!!e&&n((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,r){var n=r(8);e.exports=function(e,t){if(!n(e))return e;var r,a;if(t&&"function"==typeof(r=e.toString)&&!n(a=r.call(e)))return a;if("function"==typeof(r=e.valueOf)&&!n(a=r.call(e)))return a;if(!t&&"function"==typeof(r=e.toString)&&!n(a=r.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){var n=r(0),a=r(33),i=r(7);e.exports=function(e,t){var r=(a.Object||{})[e]||Object[e],o={};o[e]=t(r),n(n.S+n.F*i((function(){r(1)})),"Object",o)}},function(e,t,r){var n=r(34),a=r(84),i=r(15),o=r(12),s=r(163);e.exports=function(e,t){var r=1==e,c=2==e,l=3==e,u=4==e,d=6==e,h=5==e||d,p=t||s;return function(t,s,f){for(var m,g,y=i(t),v=a(y),b=n(s,f,3),_=o(v.length),w=0,x=r?p(t,_):c?p(t,0):void 0;_>w;w++)if((h||w in v)&&(g=b(m=v[w],w,y),e))if(r)x[w]=g;else if(g)switch(e){case 3:return!0;case 5:return m;case 6:return w;case 2:x.push(m)}else if(u)return!1;return d?-1:l||u?u:x}}},function(e,t,r){"use strict";var n=r(30),a=r(1);function i(e,t){return 55296==(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1)))}function o(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function s(e){return 1===e.length?"0"+e:e}function c(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}t.inherits=a,t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),a=0;a<e.length;a+=2)r.push(parseInt(e[a]+e[a+1],16))}else for(var n=0,a=0;a<e.length;a++){var o=e.charCodeAt(a);o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=63&o|128):i(e,a)?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++a)),r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=63&o|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=63&o|128)}else for(a=0;a<e.length;a++)r[a]=0|e[a];return r},t.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=s(e[r].toString(16));return t},t.htonl=o,t.toHex32=function(e,t){for(var r="",n=0;n<e.length;n++){var a=e[n];"little"===t&&(a=o(a)),r+=c(a.toString(16))}return r},t.zero2=s,t.zero8=c,t.join32=function(e,t,r,a){var i=r-t;n(i%4==0);for(var o=new Array(i/4),s=0,c=t;s<o.length;s++,c+=4){var l;l="big"===a?e[c]<<24|e[c+1]<<16|e[c+2]<<8|e[c+3]:e[c+3]<<24|e[c+2]<<16|e[c+1]<<8|e[c],o[s]=l>>>0}return o},t.split32=function(e,t){for(var r=new Array(4*e.length),n=0,a=0;n<e.length;n++,a+=4){var i=e[n];"big"===t?(r[a]=i>>>24,r[a+1]=i>>>16&255,r[a+2]=i>>>8&255,r[a+3]=255&i):(r[a+3]=i>>>24,r[a+2]=i>>>16&255,r[a+1]=i>>>8&255,r[a]=255&i)}return r},t.rotr32=function(e,t){return e>>>t|e<<32-t},t.rotl32=function(e,t){return e<<t|e>>>32-t},t.sum32=function(e,t){return e+t>>>0},t.sum32_3=function(e,t,r){return e+t+r>>>0},t.sum32_4=function(e,t,r,n){return e+t+r+n>>>0},t.sum32_5=function(e,t,r,n,a){return e+t+r+n+a>>>0},t.sum64=function(e,t,r,n){var a=e[t],i=n+e[t+1]>>>0,o=(i<n?1:0)+r+a;e[t]=o>>>0,e[t+1]=i},t.sum64_hi=function(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0},t.sum64_lo=function(e,t,r,n){return t+n>>>0},t.sum64_4_hi=function(e,t,r,n,a,i,o,s){var c=0,l=t;return c+=(l=l+n>>>0)<t?1:0,c+=(l=l+i>>>0)<i?1:0,e+r+a+o+(c+=(l=l+s>>>0)<s?1:0)>>>0},t.sum64_4_lo=function(e,t,r,n,a,i,o,s){return t+n+i+s>>>0},t.sum64_5_hi=function(e,t,r,n,a,i,o,s,c,l){var u=0,d=t;return u+=(d=d+n>>>0)<t?1:0,u+=(d=d+i>>>0)<i?1:0,u+=(d=d+s>>>0)<s?1:0,e+r+a+o+c+(u+=(d=d+l>>>0)<l?1:0)>>>0},t.sum64_5_lo=function(e,t,r,n,a,i,o,s,c,l){return t+n+i+s+l>>>0},t.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},t.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},t.shr64_hi=function(e,t,r){return e>>>r},t.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0}},function(e,t,r){"use strict";if(r(13)){var n=r(47),a=r(6),i=r(7),o=r(0),s=r(112),c=r(171),l=r(34),u=r(61),d=r(54),h=r(21),p=r(63),f=r(36),m=r(12),g=r(345),y=r(57),v=r(38),b=r(26),_=r(71),w=r(8),x=r(15),k=r(160),S=r(58),E=r(29),A=r(59).f,P=r(162),C=r(55),D=r(11),T=r(41),O=r(102),M=r(87),I=r(165),R=r(73),F=r(107),B=r(60),j=r(164),N=r(334),q=r(14),L=r(28),U=q.f,z=L.f,H=a.RangeError,$=a.TypeError,G=a.Uint8Array,K=Array.prototype,V=c.ArrayBuffer,W=c.DataView,Y=T(0),J=T(2),Q=T(3),X=T(4),Z=T(5),ee=T(6),te=O(!0),re=O(!1),ne=I.values,ae=I.keys,ie=I.entries,oe=K.lastIndexOf,se=K.reduce,ce=K.reduceRight,le=K.join,ue=K.sort,de=K.slice,he=K.toString,pe=K.toLocaleString,fe=D("iterator"),me=D("toStringTag"),ge=C("typed_constructor"),ye=C("def_constructor"),ve=s.CONSTR,be=s.TYPED,_e=s.VIEW,we=T(1,(function(e,t){return Ae(M(e,e[ye]),t)})),xe=i((function(){return 1===new G(new Uint16Array([1]).buffer)[0]})),ke=!!G&&!!G.prototype.set&&i((function(){new G(1).set({})})),Se=function(e,t){var r=f(e);if(r<0||r%t)throw H("Wrong offset!");return r},Ee=function(e){if(w(e)&&be in e)return e;throw $(e+" is not a typed array!")},Ae=function(e,t){if(!w(e)||!(ge in e))throw $("It is not a typed array constructor!");return new e(t)},Pe=function(e,t){return Ce(M(e,e[ye]),t)},Ce=function(e,t){for(var r=0,n=t.length,a=Ae(e,n);n>r;)a[r]=t[r++];return a},De=function(e,t,r){U(e,t,{get:function(){return this._d[r]}})},Te=function(e){var t,r,n,a,i,o,s=x(e),c=arguments.length,u=c>1?arguments[1]:void 0,d=void 0!==u,h=P(s);if(null!=h&&!k(h)){for(o=h.call(s),n=[],t=0;!(i=o.next()).done;t++)n.push(i.value);s=n}for(d&&c>2&&(u=l(u,arguments[2],2)),t=0,r=m(s.length),a=Ae(this,r);r>t;t++)a[t]=d?u(s[t],t):s[t];return a},Oe=function(){for(var e=0,t=arguments.length,r=Ae(this,t);t>e;)r[e]=arguments[e++];return r},Me=!!G&&i((function(){pe.call(new G(1))})),Ie=function(){return pe.apply(Me?de.call(Ee(this)):Ee(this),arguments)},Re={copyWithin:function(e,t){return N.call(Ee(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return X(Ee(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return j.apply(Ee(this),arguments)},filter:function(e){return Pe(this,J(Ee(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return Z(Ee(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(Ee(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){Y(Ee(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return re(Ee(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(Ee(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return le.apply(Ee(this),arguments)},lastIndexOf:function(e){return oe.apply(Ee(this),arguments)},map:function(e){return we(Ee(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return se.apply(Ee(this),arguments)},reduceRight:function(e){return ce.apply(Ee(this),arguments)},reverse:function(){for(var e,t=Ee(this).length,r=Math.floor(t/2),n=0;n<r;)e=this[n],this[n++]=this[--t],this[t]=e;return this},some:function(e){return Q(Ee(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return ue.call(Ee(this),e)},subarray:function(e,t){var r=Ee(this),n=r.length,a=y(e,n);return new(M(r,r[ye]))(r.buffer,r.byteOffset+a*r.BYTES_PER_ELEMENT,m((void 0===t?n:y(t,n))-a))}},Fe=function(e,t){return Pe(this,de.call(Ee(this),e,t))},Be=function(e){Ee(this);var t=Se(arguments[1],1),r=this.length,n=x(e),a=m(n.length),i=0;if(a+t>r)throw H("Wrong length!");for(;i<a;)this[t+i]=n[i++]},je={entries:function(){return ie.call(Ee(this))},keys:function(){return ae.call(Ee(this))},values:function(){return ne.call(Ee(this))}},Ne=function(e,t){return w(e)&&e[be]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},qe=function(e,t){return Ne(e,t=v(t,!0))?d(2,e[t]):z(e,t)},Le=function(e,t,r){return!(Ne(e,t=v(t,!0))&&w(r)&&b(r,"value"))||b(r,"get")||b(r,"set")||r.configurable||b(r,"writable")&&!r.writable||b(r,"enumerable")&&!r.enumerable?U(e,t,r):(e[t]=r.value,e)};ve||(L.f=qe,q.f=Le),o(o.S+o.F*!ve,"Object",{getOwnPropertyDescriptor:qe,defineProperty:Le}),i((function(){he.call({})}))&&(he=pe=function(){return le.call(this)});var Ue=p({},Re);p(Ue,je),h(Ue,fe,je.values),p(Ue,{slice:Fe,set:Be,constructor:function(){},toString:he,toLocaleString:Ie}),De(Ue,"buffer","b"),De(Ue,"byteOffset","o"),De(Ue,"byteLength","l"),De(Ue,"length","e"),U(Ue,me,{get:function(){return this[be]}}),e.exports=function(e,t,r,c){var l=e+((c=!!c)?"Clamped":"")+"Array",d="get"+e,p="set"+e,f=a[l],y=f||{},v=f&&E(f),b=!f||!s.ABV,x={},k=f&&f.prototype,P=function(e,r){U(e,r,{get:function(){return function(e,r){var n=e._d;return n.v[d](r*t+n.o,xe)}(this,r)},set:function(e){return function(e,r,n){var a=e._d;c&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),a.v[p](r*t+a.o,n,xe)}(this,r,e)},enumerable:!0})};b?(f=r((function(e,r,n,a){u(e,f,l,"_d");var i,o,s,c,d=0,p=0;if(w(r)){if(!(r instanceof V||"ArrayBuffer"==(c=_(r))||"SharedArrayBuffer"==c))return be in r?Ce(f,r):Te.call(f,r);i=r,p=Se(n,t);var y=r.byteLength;if(void 0===a){if(y%t)throw H("Wrong length!");if((o=y-p)<0)throw H("Wrong length!")}else if((o=m(a)*t)+p>y)throw H("Wrong length!");s=o/t}else s=g(r),i=new V(o=s*t);for(h(e,"_d",{b:i,o:p,l:o,e:s,v:new W(i)});d<s;)P(e,d++)})),k=f.prototype=S(Ue),h(k,"constructor",f)):i((function(){f(1)}))&&i((function(){new f(-1)}))&&F((function(e){new f,new f(null),new f(1.5),new f(e)}),!0)||(f=r((function(e,r,n,a){var i;return u(e,f,l),w(r)?r instanceof V||"ArrayBuffer"==(i=_(r))||"SharedArrayBuffer"==i?void 0!==a?new y(r,Se(n,t),a):void 0!==n?new y(r,Se(n,t)):new y(r):be in r?Ce(f,r):Te.call(f,r):new y(g(r))})),Y(v!==Function.prototype?A(y).concat(A(v)):A(y),(function(e){e in f||h(f,e,y[e])})),f.prototype=k,n||(k.constructor=f));var C=k[fe],D=!!C&&("values"==C.name||null==C.name),T=je.values;h(f,ge,!0),h(k,be,l),h(k,_e,!0),h(k,ye,f),(c?new f(1)[me]==l:me in k)||U(k,me,{get:function(){return l}}),x[l]=f,o(o.G+o.W+o.F*(f!=y),x),o(o.S,l,{BYTES_PER_ELEMENT:t}),o(o.S+o.F*i((function(){y.of.call(f,1)})),l,{from:Te,of:Oe}),"BYTES_PER_ELEMENT"in k||h(k,"BYTES_PER_ELEMENT",t),o(o.P,l,Re),B(l),o(o.P+o.F*ke,l,{set:Be}),o(o.P+o.F*!D,l,je),n||k.toString==he||(k.toString=he),o(o.P+o.F*i((function(){new f(1).slice()})),l,{slice:Fe}),o(o.P+o.F*(i((function(){return[1,2].toLocaleString()!=new f([1,2]).toLocaleString()}))||!i((function(){k.toLocaleString.call([1,2])}))),l,{toLocaleString:Ie}),R[l]=D?C:T,n||D||h(k,fe,T)}}else e.exports=function(){}},function(e,t,r){var n=r(340),a=r(0),i=r(83)("metadata"),o=i.store||(i.store=new(r(343))),s=function(e,t,r){var a=o.get(e);if(!a){if(!r)return;o.set(e,a=new n)}var i=a.get(t);if(!i){if(!r)return;a.set(t,i=new n)}return i};e.exports={store:o,map:s,has:function(e,t,r){var n=s(t,r,!1);return void 0!==n&&n.has(e)},get:function(e,t,r){var n=s(t,r,!1);return void 0===n?void 0:n.get(e)},set:function(e,t,r,n){s(r,n,!0).set(e,t)},keys:function(e,t){var r=s(e,t,!1),n=[];return r&&r.forEach((function(e,t){n.push(t)})),n},key:function(e){return void 0===e||"symbol"==typeof e?e:String(e)},exp:function(e){a(a.S,"Reflect",e)}}},function(e,t,r){"use strict";const n=r(25).fromPromise,a=r(429);e.exports={pathExists:n((function(e){return a.access(e).then(()=>!0).catch(()=>!1)})),pathExistsSync:a.existsSync}},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(1038),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.closebox=!0}var t,r,i;return t=e,(r=[{key:"render",value:function(e,t){document.querySelector(".saito-overlay-backdrop")||e.browser.addElementToDom(a(this.closebox))}},{key:"attachEvents",value:function(e,t){}},{key:"showOverlay",value:function(e,t,r){var n=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.render(e,t);var i=this,o=document.querySelector(".saito-overlay"),s=document.querySelector(".saito-overlay-backdrop"),c=document.querySelector(".saito-overlay-closebox");o.innerHTML=c?c.outerHTML+r:r,o.style.display="block",s.style.display="block",s.onclick=function(e){i.hideOverlay(a)},(c=document.querySelector(".saito-overlay-closebox"))&&(c.style.display="block",c.onclick=function(e){n.hideOverlay(a)})}},{key:"showOverlayBlocking",value:function(e,t,r){this.showOverlay(e,t,r,null);var n=document.querySelector(".saito-overlay-closebox");n.style.display="none"}},{key:"hideOverlay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=document.querySelector(".saito-overlay"),r=document.querySelector(".saito-overlay-backdrop"),n=document.querySelector(".saito-overlay-closebox");t.style.display="none",r.style.display="none",n&&(n.style.display="none"),null!=e&&e()}}])&&n(t.prototype,r),i&&n(t,i),e}();e.exports=i},function(e,t){e.exports=!1},function(e,t,r){var n=r(55)("meta"),a=r(8),i=r(26),o=r(14).f,s=0,c=Object.isExtensible||function(){return!0},l=!r(7)((function(){return c(Object.preventExtensions({}))})),u=function(e){o(e,n,{value:{i:"O"+ ++s,w:{}}})},d=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,n)){if(!c(e))return"F";if(!t)return"E";u(e)}return e[n].i},getWeak:function(e,t){if(!i(e,n)){if(!c(e))return!0;if(!t)return!1;u(e)}return e[n].w},onFreeze:function(e){return l&&d.NEED&&c(e)&&!i(e,n)&&u(e),e}}},function(e,t,r){var n=r(11)("unscopables"),a=Array.prototype;null==a[n]&&r(21)(a,n,{}),e.exports=function(e){a[n][e]=!0}},function(e,t,r){"use strict";var n,a="object"==typeof Reflect?Reflect:null,i=a&&"function"==typeof a.apply?a.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=a&&"function"==typeof a.ownKeys?a.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(r,n){function a(r){e.removeListener(t,i),n(r)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",a),r([].slice.call(arguments))}y(e,t,i,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&y(e,"error",t,r)}(e,a,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var c=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function d(e,t,r,n){var a,i,o,s;if(l(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),o=i[t]),void 0===o)o=i[t]=r,++e._eventsCount;else if("function"==typeof o?o=i[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(a=u(e))>0&&o.length>a&&!o.warned){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=o.length,s=c,console&&console.warn&&console.warn(s)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},a=h.bind(n);return a.listener=r,n.wrapFn=a,a}function f(e,t,r){var n=e._events;if(void 0===n)return[];var a=n[t];return void 0===a?[]:"function"==typeof a?r?[a.listener||a]:[a]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(a):g(a,a.length)}function m(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function g(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function y(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function a(i){n.once&&e.removeEventListener(t,a),r(i)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,a=this._events;if(void 0!==a)n=n&&void 0===a.error;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var c=a[e];if(void 0===c)return!1;if("function"==typeof c)i(c,this,t);else{var l=c.length,u=g(c,l);for(r=0;r<l;++r)i(u[r],this,t)}return!0},s.prototype.addListener=function(e,t){return d(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return d(this,e,t,!0)},s.prototype.once=function(e,t){return l(t),this.on(e,p(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,p(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,n,a,i,o;if(l(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(a=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){o=r[i].listener,a=i;break}if(a<0)return this;0===a?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,a),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var a,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(a=i[n])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},s.prototype.listeners=function(e){return f(this,e,!0)},s.prototype.rawListeners=function(e){return f(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,t,r){var n=r(2).Buffer,a=r(366).Transform,i=r(78).StringDecoder;function o(e){a.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}r(1)(o,a),o.prototype.update=function(e,t,r){"string"==typeof e&&(e=n.from(e,t));var a=this._update(e);return this.hashMode?this:(r&&(a=this._toString(a,r)),a)},o.prototype.setAutoPadding=function(){},o.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},o.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},o.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},o.prototype._transform=function(e,t,r){var n;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){n=e}finally{r(n)}},o.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},o.prototype._finalOrDigest=function(e){var t=this.__final()||n.alloc(0);return e&&(t=this._toString(t,e,!0)),t},o.prototype._toString=function(e,t,r){if(this._decoder||(this._decoder=new i(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var n=this._decoder.write(e);return r&&(n+=this._decoder.end()),n},e.exports=o},function(e,t,r){var n=r(444),a="object"==typeof self&&self&&self.Object===Object&&self,i=n||a||Function("return this")();e.exports=i},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.DomHandler=void 0;var i=r(97),o=r(455);a(r(455),t);var s=/\s+/g,c={normalizeWhitespace:!1,withStartIndices:!1,withEndIndices:!1,xmlMode:!1},l=function(){function e(e,t,r){this.dom=[],this.root=new o.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"==typeof t&&(r=t,t=c),"object"==typeof e&&(t=e,e=void 0),this.callback=null!=e?e:null,this.options=null!=t?t:c,this.elementCB=null!=r?r:null}return e.prototype.onparserinit=function(e){this.parser=e},e.prototype.onreset=function(){this.dom=[],this.root=new o.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},e.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},e.prototype.onerror=function(e){this.handleCallback(e)},e.prototype.onclosetag=function(){this.lastNode=null;var e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)},e.prototype.onopentag=function(e,t){var r=this.options.xmlMode?i.ElementType.Tag:void 0,n=new o.Element(e,t,void 0,r);this.addNode(n),this.tagStack.push(n)},e.prototype.ontext=function(e){var t=this.options.normalizeWhitespace,r=this.lastNode;if(r&&r.type===i.ElementType.Text)t?r.data=(r.data+e).replace(s," "):r.data+=e,this.options.withEndIndices&&(r.endIndex=this.parser.endIndex);else{t&&(e=e.replace(s," "));var n=new o.Text(e);this.addNode(n),this.lastNode=n}},e.prototype.oncomment=function(e){if(this.lastNode&&this.lastNode.type===i.ElementType.Comment)this.lastNode.data+=e;else{var t=new o.Comment(e);this.addNode(t),this.lastNode=t}},e.prototype.oncommentend=function(){this.lastNode=null},e.prototype.oncdatastart=function(){var e=new o.Text(""),t=new o.NodeWithChildren(i.ElementType.CDATA,[e]);this.addNode(t),e.parent=t,this.lastNode=e},e.prototype.oncdataend=function(){this.lastNode=null},e.prototype.onprocessinginstruction=function(e,t){var r=new o.ProcessingInstruction(e,t);this.addNode(r)},e.prototype.handleCallback=function(e){if("function"==typeof this.callback)this.callback(e,this.dom);else if(e)throw e},e.prototype.addNode=function(e){var t=this.tagStack[this.tagStack.length-1],r=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),r&&(e.prev=r,r.next=e),e.parent=t,this.lastNode=null},e}();t.DomHandler=l,t.default=l},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t,r){var n=r(319),a=r(148);e.exports=Object.keys||function(e){return n(e,a)}},function(e,t,r){var n=r(36),a=Math.max,i=Math.min;e.exports=function(e,t){return(e=n(e))<0?a(e+t,0):i(e,t)}},function(e,t,r){var n=r(3),a=r(320),i=r(148),o=r(147)("IE_PROTO"),s=function(){},c=function(){var e,t=r(145)("iframe"),n=i.length;for(t.style.display="none",r(149).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;n--;)delete c.prototype[i[n]];return c()};e.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[o]=e):r=c(),void 0===t?r:a(r,t)}},function(e,t,r){var n=r(319),a=r(148).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,a)}},function(e,t,r){"use strict";var n=r(6),a=r(14),i=r(13),o=r(11)("species");e.exports=function(e){var t=n[e];i&&t&&!t[o]&&a.f(t,o,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t,r){var n=r(34),a=r(332),i=r(160),o=r(3),s=r(12),c=r(162),l={},u={};(t=e.exports=function(e,t,r,d,h){var p,f,m,g,y=h?function(){return e}:c(e),v=n(r,d,t?2:1),b=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(i(y)){for(p=s(e.length);p>b;b++)if((g=t?v(o(f=e[b])[0],f[1]):v(e[b]))===l||g===u)return g}else for(m=y.call(e);!(f=m.next()).done;)if((g=a(m,v,f.value,t))===l||g===u)return g}).BREAK=l,t.RETURN=u},function(e,t,r){var n=r(22);e.exports=function(e,t,r){for(var a in t)n(e,a,t[a],r);return e}},function(e,t,r){var n=r(8);e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,r){"use strict";var n=r(117),a=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=d;var i=Object.create(r(88));i.inherits=r(1);var o=r(367),s=r(178);i.inherits(d,o);for(var c=a(s.prototype),l=0;l<c.length;l++){var u=c[l];d.prototype[u]||(d.prototype[u]=s.prototype[u])}function d(e){if(!(this instanceof d))return new d(e);o.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||n.nextTick(p,this)}function p(e){e.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),d.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var r=r||function(e,t){var r={},n=r.lib={},a=n.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var r=new e;return t&&r.mixIn(t),r.hasOwnProperty("init")||(r.init=function(){r.$super.init.apply(this,arguments)}),r.init.prototype=r,r.$super=this,r},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),i=n.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,a=e.sigBytes;if(this.clamp(),n%4)for(var i=0;i<a;i++){var o=r[i>>>2]>>>24-i%4*8&255;t[n+i>>>2]|=o<<24-(n+i)%4*8}else if(r.length>65535)for(i=0;i<a;i+=4)t[n+i>>>2]=r[i>>>2];else t.push.apply(t,r);return this.sigBytes+=a,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r=[],n=0;n<t;n+=4)r.push(4294967296*e.random()|0);return new i.init(r,t)}}),o=r.enc={},s=o.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],a=0;a<r;a++){var i=t[a>>>2]>>>24-a%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new i.init(r,t/2)}},c=o.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],a=0;a<r;a++){var i=t[a>>>2]>>>24-a%4*8&255;n.push(String.fromCharCode(i))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new i.init(r,t)}},l=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},u=n.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new i.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,n=r.words,a=r.sigBytes,o=this.blockSize,s=a/(4*o),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*o,l=e.min(4*c,a);if(c){for(var u=0;u<c;u+=o)this._doProcessBlock(n,u);var d=n.splice(0,c);r.sigBytes-=l}return new i.init(d,l)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),d=(n.Hasher=u.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new d.HMAC.init(e,r).finalize(t)}}}),r.algo={});return r}(Math);t.CryptoJS=r},function(e,t,r){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var a=0;a<n.length;a++)if((r=n[a])===t||r.fn===t){n.splice(a,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){n=0;for(var a=(r=r.slice(0)).length;n<a;++n)r[n].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,r){"use strict";let n,a,i,{isClean:o,my:s}=r(234),c=r(135),l=r(137),u=r(136);class d extends u{push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}each(e){if(!this.proxyOf.nodes)return;let t,r,n=this.getIterator();for(;this.indexes[n]<this.proxyOf.nodes.length&&(t=this.indexes[n],r=e(this.proxyOf.nodes[t],t),!1!==r);)this.indexes[n]+=1;return delete this.indexes[n],r}walk(e){return this.each((t,r)=>{let n;try{n=e(t,r)}catch(e){throw t.addToError(e)}return!1!==n&&t.walk&&(n=t.walk(e)),n})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((r,n)=>{if("decl"===r.type&&e.test(r.prop))return t(r,n)}):this.walk((r,n)=>{if("decl"===r.type&&r.prop===e)return t(r,n)}):(t=e,this.walk((e,r)=>{if("decl"===e.type)return t(e,r)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((r,n)=>{if("rule"===r.type&&e.test(r.selector))return t(r,n)}):this.walk((r,n)=>{if("rule"===r.type&&r.selector===e)return t(r,n)}):(t=e,this.walk((e,r)=>{if("rule"===e.type)return t(e,r)}))}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((r,n)=>{if("atrule"===r.type&&e.test(r.name))return t(r,n)}):this.walk((r,n)=>{if("atrule"===r.type&&r.name===e)return t(r,n)}):(t=e,this.walk((e,r)=>{if("atrule"===e.type)return t(e,r)}))}walkComments(e){return this.walk((t,r)=>{if("comment"===t.type)return e(t,r)})}append(...e){for(let t of e){let e=this.normalize(t,this.last);for(let t of e)this.proxyOf.nodes.push(t)}return this.markDirty(),this}prepend(...e){e=e.reverse();for(let t of e){let e=this.normalize(t,this.first,"prepend").reverse();for(let t of e)this.proxyOf.nodes.unshift(t);for(let t in this.indexes)this.indexes[t]=this.indexes[t]+e.length}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}insertBefore(e,t){let r,n=0===(e=this.index(e))&&"prepend",a=this.normalize(t,this.proxyOf.nodes[e],n).reverse();for(let t of a)this.proxyOf.nodes.splice(e,0,t);for(let t in this.indexes)r=this.indexes[t],e<=r&&(this.indexes[t]=r+a.length);return this.markDirty(),this}insertAfter(e,t){e=this.index(e);let r,n=this.normalize(t,this.proxyOf.nodes[e]).reverse();for(let t of n)this.proxyOf.nodes.splice(e+1,0,t);for(let t in this.indexes)r=this.indexes[t],e<r&&(this.indexes[t]=r+n.length);return this.markDirty(),this}removeChild(e){let t;e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);for(let r in this.indexes)t=this.indexes[r],t>=e&&(this.indexes[r]=t-1);return this.markDirty(),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}replaceValues(e,t,r){return r||(r=t,t={}),this.walkDecls(n=>{t.props&&!t.props.includes(n.prop)||t.fast&&!n.value.includes(t.fast)||(n.value=n.value.replace(e,r))}),this.markDirty(),this}every(e){return this.nodes.every(e)}some(e){return this.nodes.some(e)}index(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}normalize(e,t){if("string"==typeof e)e=function e(t){return t.map(t=>(t.nodes&&(t.nodes=e(t.nodes)),delete t.source,t))}(n(e).nodes);else if(Array.isArray(e)){e=e.slice(0);for(let t of e)t.parent&&t.parent.removeChild(t,"ignore")}else if("root"===e.type&&"document"!==this.type){e=e.nodes.slice(0);for(let t of e)t.parent&&t.parent.removeChild(t,"ignore")}else if(e.type)e=[e];else if(e.prop){if(void 0===e.value)throw new Error("Value field is missed in node creation");"string"!=typeof e.value&&(e.value=String(e.value)),e=[new c(e)]}else if(e.selector)e=[new a(e)];else if(e.name)e=[new i(e)];else{if(!e.text)throw new Error("Unknown node type in node creation");e=[new l(e)]}return e.map(e=>(e[s]||d.rebuild(e),(e=e.proxyOf).parent&&e.parent.removeChild(e),e[o]&&function e(t){if(t[o]=!1,t.proxyOf.nodes)for(let r of t.proxyOf.nodes)e(r)}(e),void 0===e.raws.before&&t&&void 0!==t.raws.before&&(e.raws.before=t.raws.before.replace(/\S/g,"")),e.parent=this,e))}getProxyProcessor(){return{set:(e,t,r)=>(e[t]===r||(e[t]=r,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0),get:(e,t)=>"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?(...r)=>e[t](...r.map(e=>"function"==typeof e?(t,r)=>e(t.toProxy(),r):e)):"every"===t||"some"===t?r=>e[t]((e,...t)=>r(e.toProxy(),...t)):"root"===t?()=>e.root().toProxy():"nodes"===t?e.nodes.map(e=>e.toProxy()):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t]}}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}}d.registerParse=e=>{n=e},d.registerRule=e=>{a=e},d.registerAtRule=e=>{i=e},e.exports=d,d.default=d,d.rebuild=e=>{"atrule"===e.type?Object.setPrototypeOf(e,i.prototype):"rule"===e.type?Object.setPrototypeOf(e,a.prototype):"decl"===e.type?Object.setPrototypeOf(e,c.prototype):"comment"===e.type&&Object.setPrototypeOf(e,l.prototype),e[s]=!0,e.nodes&&e.nodes.forEach(e=>{d.rebuild(e)})}},function(e,t,r){var n=r(14).f,a=r(26),i=r(11)("toStringTag");e.exports=function(e,t,r){e&&!a(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},function(e,t,r){var n=r(35),a=r(11)("toStringTag"),i="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,r,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),a))?r:i?n(t):"Object"==(o=n(t))&&"function"==typeof t.callee?"Arguments":o}},function(e,t,r){var n=r(0),a=r(39),i=r(7),o=r(151),s="["+o+"]",c=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),u=function(e,t,r){var a={},s=i((function(){return!!o[e]()||"​"!="​"[e]()})),c=a[e]=s?t(d):o[e];r&&(a[r]=c),n(n.P+n.F*s,"String",a)},d=u.trim=function(e,t){return e=String(a(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(l,"")),e};e.exports=u},function(e,t){e.exports={}},function(e,t,r){"use strict";(function(t,n){var a=r(2).Buffer,i=t.crypto||t.msCrypto;i&&i.getRandomValues?e.exports=function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var r=a.allocUnsafe(e);if(e>0)if(e>65536)for(var o=0;o<e;o+=65536)i.getRandomValues(r.slice(o,o+65536));else i.getRandomValues(r);if("function"==typeof t)return n.nextTick((function(){t(null,r)}));return r}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,r(18),r(9))},function(e,t,r){"use strict";var n=r(1),a=r(173),i=r(175),o=r(176),s=r(51);function c(e){s.call(this,"digest"),this._hash=e}n(c,s),c.prototype._update=function(e){this._hash.update(e)},c.prototype._final=function(){return this._hash.digest()},e.exports=function(e){return"md5"===(e=e.toLowerCase())?new a:"rmd160"===e||"ripemd160"===e?new i:new c(o(e))}},function(e,t,r){"use strict";var n={};function a(e,t,r){r||(r=Error);var a=function(e){var r,n;function a(r,n,a){return e.call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,n,a))||this}return n=e,(r=a).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,a}(r);a.prototype.name=r.name,a.prototype.code=e,n[e]=a}function i(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}a("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),a("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,a,o,s;if("string"==typeof t&&(a="not ",t.substr(!o||o<0?0:+o,a.length)===a)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))s="The ".concat(e," ").concat(n," ").concat(i(t,"type"));else{var c=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";s='The "'.concat(e,'" ').concat(c," ").concat(n," ").concat(i(t,"type"))}return s+=". Received type ".concat(typeof r)}),TypeError),a("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),a("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),a("ERR_STREAM_PREMATURE_CLOSE","Premature close"),a("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),a("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),a("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),a("ERR_STREAM_WRITE_AFTER_END","write after end"),a("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),a("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),a("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=n},function(e,t,r){"use strict";(function(t){var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=l;var a=r(357),i=r(361);r(1)(l,a);for(var o=n(i.prototype),s=0;s<o.length;s++){var c=o[s];l.prototype[c]||(l.prototype[c]=i.prototype[c])}function l(e){if(!(this instanceof l))return new l(e);a.call(this,e),i.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||t.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this,r(9))},function(e,t,r){"use strict";var n=r(2).Buffer,a=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===a||!a(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=u,this.end=d,t=3;break;default:return this.write=h,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function u(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},i.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var a=o(t[n]);if(a>=0)return a>0&&(e.lastNeed=a-1),a;if(--n<r||-2===a)return 0;if((a=o(t[n]))>=0)return a>0&&(e.lastNeed=a-2),a;if(--n<r||-2===a)return 0;if((a=o(t[n]))>=0)return a>0&&(2===a?a=0:e.lastNeed=a-3),a;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,r){var n=r(2).Buffer;function a(e,t){this._block=n.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}a.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=n.from(e,t));for(var r=this._block,a=this._blockSize,i=e.length,o=this._len,s=0;s<i;){for(var c=o%a,l=Math.min(i-s,a-c),u=0;u<l;u++)r[c+u]=e[s+u];s+=l,(o+=l)%a==0&&this._update(r)}return this._len+=i,this},a.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,a=(r-n)/4294967296;this._block.writeUInt32BE(a,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var i=this._hash();return e?i.toString(e):i},a.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e.exports=a},function(e,t,r){"use strict";function n(e,t,r,n){var a=n?" !== ":" === ",i=n?" || ":" && ",o=n?"!":"",s=n?"":"!";switch(e){case"null":return t+a+"null";case"array":return o+"Array.isArray("+t+")";case"object":return"("+o+t+i+"typeof "+t+a+'"object"'+i+s+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+a+'"number"'+i+s+"("+t+" % 1)"+i+t+a+t+(r?i+o+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+a+'"'+e+'"'+(r?i+o+"isFinite("+t+")":"")+")";default:return"typeof "+t+a+'"'+e+'"'}}e.exports={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:n,checkDataTypes:function(e,t,r){switch(e.length){case 1:return n(e[0],t,r,!0);default:var a="",o=i(e);for(var s in o.array&&o.object&&(a=o.null?"(":"(!"+t+" || ",a+="typeof "+t+' !== "object")',delete o.null,delete o.array,delete o.object),o.number&&delete o.integer,o)a+=(a?" && ":"")+n(s,t,r,!0);return a}},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++){var i=t[n];(a[i]||"array"===e&&"array"===i)&&(r[r.length]=i)}if(r.length)return r}else{if(a[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:i,getProperty:c,escapeQuotes:l,equal:r(193),ucs2length:r(913),varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var n in e)if(n!=r&&t[n])return!0},schemaUnknownRules:function(e,t){if("boolean"==typeof e)return;for(var r in e)if(!t[r])return r},toQuotedString:u,getPathExpr:function(e,t,r,n){return p(e,r?"'/' + "+t+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){var n=u(r?"/"+f(t):c(t));return p(e,n)},getData:function(e,t,r){var n,a,i,o;if(""===e)return"rootData";if("/"==e[0]){if(!d.test(e))throw new Error("Invalid JSON-pointer: "+e);a=e,i="rootData"}else{if(!(o=e.match(h)))throw new Error("Invalid JSON-pointer: "+e);if(n=+o[1],"#"==(a=o[2])){if(n>=t)throw new Error("Cannot access property/index "+n+" levels up, current level is "+t);return r[t-n]}if(n>t)throw new Error("Cannot access data "+n+" levels up, current level is "+t);if(i="data"+(t-n||""),!a)return i}for(var s=i,l=a.split("/"),u=0;u<l.length;u++){var p=l[u];p&&(i+=c(m(p)),s+=" && "+i)}return s},unescapeFragment:function(e){return m(decodeURIComponent(e))},unescapeJsonPointer:m,escapeFragment:function(e){return encodeURIComponent(f(e))},escapeJsonPointer:f};var a=i(["string","number","integer","boolean","null"]);function i(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var o=/^[a-z$_][a-z$_0-9]*$/i,s=/'|\\/g;function c(e){return"number"==typeof e?"["+e+"]":o.test(e)?"."+e:"['"+l(e)+"']"}function l(e){return e.replace(s,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function u(e){return"'"+l(e)+"'"}var d=/^\/(?:[^~]|~0|~1)*$/,h=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function p(e,t){return'""'==e?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function f(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function m(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}},function(e,t,r){var n,a=r(986),i=r(422),o=r(988),s=r(989),c=r(990);"undefined"!=typeof ArrayBuffer&&(n=r(991));var l="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),u="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),d=l||u;t.protocol=3;var h=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},p=a(h),f={type:"error",data:"parser error"},m=r(992);function g(e,t,r){for(var n=new Array(e.length),a=s(e.length,r),i=function(e,r,a){t(r,(function(t,r){n[e]=r,a(t,n)}))},o=0;o<e.length;o++)i(o,e[o],a)}t.encodePacket=function(e,r,n,a){"function"==typeof r&&(a=r,r=!1),"function"==typeof n&&(a=n,n=null);var i=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&i instanceof ArrayBuffer)return function(e,r,n){if(!r)return t.encodeBase64Packet(e,n);var a=e.data,i=new Uint8Array(a),o=new Uint8Array(1+a.byteLength);o[0]=h[e.type];for(var s=0;s<i.length;s++)o[s+1]=i[s];return n(o.buffer)}(e,r,a);if(void 0!==m&&i instanceof m)return function(e,r,n){if(!r)return t.encodeBase64Packet(e,n);if(d)return function(e,r,n){if(!r)return t.encodeBase64Packet(e,n);var a=new FileReader;return a.onload=function(){t.encodePacket({type:e.type,data:a.result},r,!0,n)},a.readAsArrayBuffer(e.data)}(e,r,n);var a=new Uint8Array(1);a[0]=h[e.type];var i=new m([a.buffer,e.data]);return n(i)}(e,r,a);if(i&&i.base64)return function(e,r){var n="b"+t.packets[e.type]+e.data.data;return r(n)}(e,a);var o=h[e.type];return void 0!==e.data&&(o+=n?c.encode(String(e.data),{strict:!1}):String(e.data)),a(""+o)},t.encodeBase64Packet=function(e,r){var n,a="b"+t.packets[e.type];if(void 0!==m&&e.data instanceof m){var i=new FileReader;return i.onload=function(){var e=i.result.split(",")[1];r(a+e)},i.readAsDataURL(e.data)}try{n=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var o=new Uint8Array(e.data),s=new Array(o.length),c=0;c<o.length;c++)s[c]=o[c];n=String.fromCharCode.apply(null,s)}return a+=btoa(n),r(a)},t.decodePacket=function(e,r,n){if(void 0===e)return f;if("string"==typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),r);if(n&&!1===(e=function(e){try{e=c.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return f;var a=e.charAt(0);return Number(a)==a&&p[a]?e.length>1?{type:p[a],data:e.substring(1)}:{type:p[a]}:f}a=new Uint8Array(e)[0];var i=o(e,1);return m&&"blob"===r&&(i=new m([i])),{type:p[a],data:i}},t.decodeBase64Packet=function(e,t){var r=p[e.charAt(0)];if(!n)return{type:r,data:{base64:!0,data:e.substr(1)}};var a=n.decode(e.substr(1));return"blob"===t&&m&&(a=new m([a])),{type:r,data:a}},t.encodePayload=function(e,r,n){"function"==typeof r&&(n=r,r=null);var a=i(e);if(r&&a)return m&&!d?t.encodePayloadAsBlob(e,n):t.encodePayloadAsArrayBuffer(e,n);if(!e.length)return n("0:");g(e,(function(e,n){t.encodePacket(e,!!a&&r,!1,(function(e){n(null,function(e){return e.length+":"+e}(e))}))}),(function(e,t){return n(t.join(""))}))},t.decodePayload=function(e,r,n){if("string"!=typeof e)return t.decodePayloadAsBinary(e,r,n);var a;if("function"==typeof r&&(n=r,r=null),""===e)return n(f,0,1);for(var i,o,s="",c=0,l=e.length;c<l;c++){var u=e.charAt(c);if(":"===u){if(""===s||s!=(i=Number(s)))return n(f,0,1);if(s!=(o=e.substr(c+1,i)).length)return n(f,0,1);if(o.length){if(a=t.decodePacket(o,r,!1),f.type===a.type&&f.data===a.data)return n(f,0,1);if(!1===n(a,c+i,l))return}c+=i,s=""}else s+=u}return""!==s?n(f,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,r){if(!e.length)return r(new ArrayBuffer(0));g(e,(function(e,r){t.encodePacket(e,!0,!0,(function(e){return r(null,e)}))}),(function(e,t){var n=t.reduce((function(e,t){var r;return e+(r="string"==typeof t?t.length:t.byteLength).toString().length+r+2}),0),a=new Uint8Array(n),i=0;return t.forEach((function(e){var t="string"==typeof e,r=e;if(t){for(var n=new Uint8Array(e.length),o=0;o<e.length;o++)n[o]=e.charCodeAt(o);r=n.buffer}a[i++]=t?0:1;var s=r.byteLength.toString();for(o=0;o<s.length;o++)a[i++]=parseInt(s[o]);a[i++]=255;for(n=new Uint8Array(r),o=0;o<n.length;o++)a[i++]=n[o]})),r(a.buffer)}))},t.encodePayloadAsBlob=function(e,r){g(e,(function(e,r){t.encodePacket(e,!0,!0,(function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),a=0;a<e.length;a++)n[a]=e.charCodeAt(a);e=n.buffer,t[0]=0}var i=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),o=new Uint8Array(i.length+1);for(a=0;a<i.length;a++)o[a]=parseInt(i[a]);if(o[i.length]=255,m){var s=new m([t.buffer,o.buffer,e]);r(null,s)}}))}),(function(e,t){return r(new m(t))}))},t.decodePayloadAsBinary=function(e,r,n){"function"==typeof r&&(n=r,r=null);for(var a=e,i=[];a.byteLength>0;){for(var s=new Uint8Array(a),c=0===s[0],l="",u=1;255!==s[u];u++){if(l.length>310)return n(f,0,1);l+=s[u]}a=o(a,2+l.length),l=parseInt(l);var d=o(a,0,l);if(c)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(e){var h=new Uint8Array(d);d="";for(u=0;u<h.length;u++)d+=String.fromCharCode(h[u])}i.push(d),a=o(a,l)}var p=i.length;i.forEach((function(e,a){n(t.decodePacket(e,r,!0),a,p)}))}},function(e,t,r){(function(t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){s(i,n,a,o,c,"next",e)}function c(e){s(i,n,a,o,c,"throw",e)}o(void 0)}))}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var a=m(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=r(19),y=r(5),v=r(1056),b=r(1058),_=r(1060),w=r(1063),x=r(437),k=r(1067),S=r(1069),E=r(1071),A=r(1073),P=r(1075),C=r(1077),D=r(1079),T=r(213),O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(q,e);var r,o,s,g,O,M,I,R,F,B,j,N=h(q);function q(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,q),(t=N.call(this,e)).name="Game",t.game={},t.moves=[],t.commands=[],t.initializeQueueCommandsExecuted=0,t.game_state_pre_move="",t.crypto_transfer_manager=new T(e),t.move_rebroadcasting_active=!1,t.move_rebroadcasting_speed=15e3,t.move_rebroadcasting_timer=null;t.useHUD=1,t.useCardfan=0,t.useCardbox=0,t.useClock=0,t.useMenu=0,t.useOverlay=0,t.useObserver=0,t.useLog=0,t.lock_interface=0,t.lock_interface_step="",t.lock_interface_tx="",t.confirm_moves=0,t.confirm_this_move=0,t.interface=0,t.relay_moves_offchain_if_possible=1,t.initialize_game_offchain_if_possible=1,t.next_move_onchain_only=0,t.hud=new _(e),t.clock=new v(e),t.log=new b(e),t.overlay=new x(e),t.cardfan=new E(e),t.playerbox=new S(e),t.cardbox=new k(e),t.menu=new w(e),t.hammer=D,t.sizer=C,t.hexgrid=new A,t.observer=new P,t.clock_timer=null,t.menus=[],t.minPlayers=2,t.maxPlayers=2,t.lang="en",t.gameboardWidth=5100,t.screenRatio=1,t.screenSize={width:null,height:null},t.gameboardZoom=1,t.gameboardMobileZoom=1,t.publisher_message="",t.time={},t.time.last_received=0,t.time.last_sent=0,t.secureroll_rnums=[],t.secureroll_hash="",t.observer_mode=0,t.old_discards={},t.old_removed={},t.old_cards={},t.old_crypt=[],t.old_keys=[],t.old_hand=[],t.gaming_active=0,t.initialize_game_run=0,t.changeable_callback=function(e){alert("CALLBACK MUST BE PROVIDED FOR CARDCLICK")};var r=f(t);return t.cardbox_callback=function(e){r.changeable_callback(e)},p(t,f(t))}return r=q,(o=[{key:"startMoveRebroadcasting",value:function(){var e=this;0!=this.app.BROWSER&&(this.move_rebroadcasting_active&&clearInterval(this.move_rebroadcasting_timer),this.move_rebroadcasting_active=!0,this.move_rebroadcasting_timer=setInterval((function(){for(var t=0;t<e.app.wallet.wallet.pending.length;t++){var r=new y.transaction(JSON.parse(e.app.wallet.wallet.pending[t]));r.msg&&r.msg.game_id&&r.msg.game_id==e.game.id&&(console.log("Rebroadcasting Pending Game TX as NEW TX"),console.log("gameid: "+r.msg.game_id))}}),this.move_rebroadcasting_speed))}},{key:"stopMoveRebroadcasting",value:function(){this.move_rebroadcasting_active=!1,clearInterval(this.move_rebroadcasting_timer)}},{key:"displayModal",value:(j=c(regeneratorRuntime.mark((function e(t){var r,n=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:"",e.next=3,salert("".concat(t,": ").concat(r));case 3:case"end":return e.stop()}}),e)}))),function(e){return j.apply(this,arguments)})},{key:"preloadImages",value:(B=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return B.apply(this,arguments)})},{key:"returnCardHeight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e*this.card_height_ratio}},{key:"initializeHTML",value:function(e){if(0!=this.browser_active){if(1==this.initialize_game_run)return 0;try{var t=window.location.hash;if(""!=t){var r=e.browser.parseHash(t),n=e.modules.returnModule("Arcade");if(n){var a=r.gid,i=r.bid,o=r.tid,s=r.lm;msg={},msg.game_id=a,msg.bid=i,msg.tid=o,msg.last_move=s,msg.player="",msg.module=this.name;var c=e.crypto.stringToBase64(JSON.stringify(msg));if(this.game.id!=a)return void n.observeGame(c,s)}}window.location.hash="#",window.location.hash=e.browser.initializeHash("#gid=".concat(this.game.id,"&bid=1&tid=1&lm=0"),t,{})}catch(e){}this.game.options&&this.game.options.clock&&(0==this.game.options.clock?(this.game.clock_limit=0,this.useClock=0):(0==this.game.clock_spent&&(this.game.clock_limit=60*parseInt(this.game.options.clock)*1e3),this.useClock=1)),1==this.useHUD&&(this.hud.render(e,this),this.hud.attachEvents(e,this)),1==this.useClock&&(this.clock.render(e,this),this.clock.attachEvents(e,this)),1!=this.useObserver&&0!=this.game.player||(this.observer.render(e,this),this.observer.attachEvents(e,this)),null!=this.app.options&&null!=this.app.options.gameprefs&&(null!=this.app.options.gameprefs.lang&&(this.lang=this.app.options.gameprefs.lang),null!=this.app.options.gameprefs.interface&&(this.interface=this.app.options.gameprefs.interface))}}},{key:"attachEvents",value:function(e){0!=this.browser_active&&1!=this.initialize_game_run&&1==this.useHUD&&this.hud.attachEvents(e,this)}},{key:"attachCardEvents",value:function(e){1==this.useHUD&&this.hud.attachCardEvents(e,this)}},{key:"respondTo",value:function(e){if("arcade-games"==e){var t={};return t.img="/"+this.returnSlug()+"/img/arcade.jpg",t.render=this.renderArcade,t.attachEvents=this.attachEventsArcade,t}return null}},{key:"renderArcade",value:function(e,t){}},{key:"attachEventsArcade",value:function(e,t){}},{key:"onConfirmation",value:(F=c(regeneratorRuntime.mark((function e(t,r,n,a){var i,o,s,c,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.returnMessage(),o=a.modules.returnModule(i.module),0!=n){e.next=31;break}if(s=0,"undefined"!==o.game&&void 0!==o.game&&""!==o.game&&null!==o.game||""==i.game_id||(o.game=o.loadGame(i.game_id)),this.app.options)for(c=0;c<this.app.options.games;c++)this.app.options.games[c].id&&this.app.options.games[c].id.length<25&&(this.app.options.games.splice(c,1),c--);if(!r.isTo(a.wallet.returnPublicKey())||"accept"!==i.request){e.next=12;break}return s=1,e.next=11,o.receiveAcceptRequest(t,r,n,a);case 11:e.sent;case 12:if(l=i.game_id,!a.options.games){e.next=31;break}u=0;case 15:if(!(u<a.options.games.length)){e.next=31;break}if(l!=a.options.games[u].id){e.next=28;break}if(following_game=1,!r.isTo(a.wallet.returnPublicKey())){e.next=22;break}0==s&&(o.isFutureMove(r.transaction.from[0].add,i)?o.addFutureMove(r):o.isUnprocessedMove(r.transaction.from[0].add,i)&&o.addNextMove(r)),e.next=28;break;case 22:if(1!=a.options.games[u].observer_mode){e.next=28;break}if("game"===i.request){e.next=25;break}return e.abrupt("return");case 25:o.game.id!=l&&o.loadGame(l),o.isFutureMove(r.transaction.from[0].add,i)?o.addFutureMove(r):o.isUnprocessedMove(r.transaction.from[0].add,i)&&o.addNextMove(r);case 28:u++,e.next=15;break;case 31:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return F.apply(this,arguments)})},{key:"isFutureMove",value:function(e,t){return t.game_id!==this.game.id||parseInt(t.step.game)<=parseInt(this.game.step.game)+1||t.step.game<=this.game.step.players[e]+1?0:t.step.game>this.game.step.game+1||t.step.game>this.game.step.players[e]+1||1==this.gaming_active?1:0}},{key:"isPastMove",value:function(e,t){return t.game_id!==this.game.id?0:parseInt(t.step.game)<=parseInt(this.game.step.game)&&parseInt(t.step.game)<=parseInt(this.game.step.players[e])?1:0}},{key:"isUnprocessedMove",value:function(e,t){return t.game_id!==this.game.id?0:parseInt(t.step.game)==this.game.step.game+1||parseInt(t.step.game)==this.game.step.players[e]+1||this.game.step.players[e]&&t.step.game>this.game.step.players[e]&&t.step.game<=this.game.step.game?1:0}},{key:"createSorryAcceptedTransaction",value:function(e,t){var r=this.app.wallet.createUnsignedTransactionWithDefaultFee(e);return r.msg.module=this.name,r.msg.request="sorry",r.msg.game_id=t,r=this.app.wallet.signTransaction(r)}},{key:"requestSecureRoll",value:function(){this.game.sroll=1}},{key:"receiveSorryAcceptedTransaction",value:function(e,t,r,n){}},{key:"createAcceptTransaction",value:function(e){for(var t=e.players,r=e.ts,n=e.players_needed,i=e.players_sigs,o=e.id,s=e.options,c=this.app.wallet.createUnsignedTransactionWithDefaultFee(),l=0;l<t.length;l++)c.transaction.to.push(new y.slip(t[l],0));return c.msg.ts=r,c.msg.module=this.name,c.msg.request="accept",c.msg.game_id=o,c.msg.options=s,c.msg.players=t,c.msg.players_needed=n,c.msg.players_sigs=[].concat(a(i),[this.app.crypto.signMessage("invite_game_".concat(r),this.app.wallet.returnPrivateKey())]),c.msg.originator=c.transaction.from[0].add,c=this.app.wallet.signTransaction(c)}},{key:"receiveInviteRequest",value:function(e,t,r,n){var a=t.returnMessage(),i=t.transaction.sig,o={},s=1;if(""!=a.game_id&&(i=a.game_id),""!=a.options&&(o=a.options),""!=a.invite_sig&&a.invite_sig,a.players_needed>1&&(s=a.players_needed),t.isTo(n.wallet.returnPublicKey())){if(null==this.app.options.games&&(this.app.options.games=[]),null!=this.app.options.games)for(var c=0;c<this.app.options.games.length;c++)if(this.app.options.games[c].id==i)return;var l=0,u=0,d=0;if(""!=a.accept_sig){var h="create_game_"+t.msg.ts;n.crypto.verifyMessage(h,a.accept_sig,this.app.wallet.returnPublicKey())&&(l=1,u=1)}if(""!=a.invite_sig){var p="invite_game_"+t.msg.ts;n.crypto.verifyMessage(p,a.invite_sig,this.app.wallet.returnPublicKey())&&(l=1)}if(""!=a.invite_sig){var f="invite_game_"+t.msg.ts;n.crypto.verifyMessage(f,a.invite_sig,t.transaction.from[0].add)&&(d=1)}if(1==l){this.loadGame(i);for(var m=0;m<t.transaction.from.length;m++)this.addPlayer(t.transaction.from[m].add);for(var g=0;g<t.transaction.to.length;g++)this.addPlayer(t.transaction.to[g].add);for(var y=0;y<this.game.players.length;y++)this.game.players[y]==this.app.wallet.returnPublicKey()&&(this.game.accepted[y]=1);if(this.game.players_needed=s,1==d)for(var v=0;v<this.game.players.length;v++)this.game.players[v]==t.transaction.from[0].add&&(this.game.accepted[v]=1);this.game.module=a.module,this.game.options=o,this.game.id=i,this.game.accept=1,this.game.players_sigs=a.players_sigs,this.saveGame(i),this.game.ts=a.ts,console.log("\n\n\nWHAT IS THE GID: "+i),console.log("WHAT IS THE TS: "+this.game.ts),console.log("PLAYERS NEEDED: "+this.game.players_needed),console.log("PLAYERS SIGS: "+this.game.players_sigs),console.log("PLAYERS ON INVITE: "+this.game.players),console.log("ACCEPTS ON INVITE: "+this.game.accepted),console.log("OPTIONS: "+JSON.stringify(this.game.options)),console.log("GAMES: ",this.app.options.games)}if(1==u){var b=this.createAcceptTransaction(this.game);n.network.propagateTransaction(b)}}}},{key:"receiveAcceptRequest",value:(R=c(regeneratorRuntime.mark((function e(t,r,n,a){var i,o,s,c,l,u,d,h,p,f,m,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.returnMessage(),o=i.game_id,i.originator,this.loadGame(o),!(i.players_needed>i.players.length)){e.next=8;break}return console.log("ACCEPT REQUEST RECEIVED -- but not enough players in accepted transaction.... aborting"),this.game.halted=0,e.abrupt("return",0);case 8:if(i.players.includes(a.wallet.returnPublicKey())){e.next=12;break}return console.log("ACCEPT REQUEST RECEIVED -- but not for a game with us in it!"),this.game.halted=0,e.abrupt("return",0);case 12:s="invite_game_"+i.ts,i.players.length,i.players_sigs.length,c=0;case 16:if(!(c<i.players.length)){e.next=24;break}if(a.crypto.verifyMessage(s,i.players_sigs[c],i.players[c])){e.next=21;break}return console.log("PLAYER SIGS do not verify for all players, aborting game acceptance"),this.game.halted=0,e.abrupt("return",0);case 21:c++,e.next=16;break;case 24:if(1!=this.game.over){e.next=27;break}return this.game.halted=0,e.abrupt("return",0);case 27:for(this.gaming_active=1,this.game.options=i.options,this.game.module=i.module,"enable"===this.game.options.observer&&(this.game.observer_mode=1,this.observer_mode=1,this.game.saveGameState=1),l=0;l<i.players.length;l++)this.addPlayer(i.players[l]);if(this.saveGame(o),0==this.game.players_set){for(u=[],d=0;d<this.game.players.length;d++)u.push(this.app.crypto.hash(this.game.players[d]+this.game.id)),this.game.keys.push(this.game.players[d]);for(u.sort(),h=[],p=0;p<u.length;p++)for(f=0;f<this.game.players.length;f++)u[p]===this.app.crypto.hash(this.game.players[f]+this.game.id)&&h.push(this.game.players[f]);for(this.game.players=h,m=0;m<u.length;m++)u[m]===this.app.crypto.hash(this.app.wallet.returnPublicKey()+this.game.id)&&(this.game.player=m+1);for(g=0;g<this.game.players.length;g++)this.game.step.players[this.game.players[g]]=1;this.saveGamePreference(o+"_sharekey",a.crypto.generateRandomNumber()),console.log("!!!!!!!!!!!!!!!!!!!!"),console.log("!!! GAME CREATED !!!"),console.log("!!!!!!!!!!!!!!!!!!!!"),console.log("My Public Key: "+this.app.wallet.returnPublicKey()),console.log("My Position: "+this.game.player),console.log("My Share Key: "+this.loadGamePreference(o+"_sharekey")),console.log("ALL KEYS: "+JSON.stringify(this.game.players)),console.log("saving with id: "+o),console.log("!!!!!!!!!!!!!!!!!!!!"),console.log("!!!!!!!!!!!!!!!!!!!!"),console.log("!!!!!!!!!!!!!!!!!!!!"),this.game.players_set=1,this.saveGame(o),this.gaming_active=0,this.initializeGameFeeder(o),this.processFutureMoves()}return e.abrupt("return",o);case 35:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return R.apply(this,arguments)})},{key:"initialize",value:function(e){if(this.initializeQueueCommands(),this.startMoveRebroadcasting(),0!=this.browser_active){$(".gameboard").height();var t=$(".gameboard").width();this.screenRatio=t/this.gameboardWidth,this.loadGame(),""===this.game.dice&&(this.game.dice=e.crypto.hash(this.game.id)),this.game.clock_spent,this.time.last_received=(new Date).getTime(),this.time.last_sent=(new Date).getTime(),this.initializeGameFeeder(this.game.id)}}},{key:"removeEventsFromBoard",value:function(){}},{key:"initializeGame",value:function(){""==this.game.dice&&(this.initializeDice(),this.queue.push("READY"),this.saveGame(this.game.id))}},{key:"initializeGameFeeder",value:(I=c(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.game&&this.game.id!==t&&this.loadGame(t),this.initializeHTML(this.app),this.attachEvents(this.app),1!=this.game.initialize_game_run||1!=this.initialize_game_run){e.next=7;break}return e.abrupt("return",0);case 7:this.game.initialize_game_run=1,this.initialize_game_run=1;case 9:return this.initializeGame(t),this.game.step.game<2&&(console.log("saving in initializegamefeeder"),this.saveGame(this.game.id)),this.startQueue(),this.gaming_active=0,e.abrupt("return",1);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return I.apply(this,arguments)})},{key:"startQueue",value:function(){this.runQueue(),1!=this.gaming_active&&this.processFutureMoves()}},{key:"runQueue",value:function(){var e=1,r=0,n=0,a="";if(this.game_state_pre_move=JSON.parse(JSON.stringify(this.game)),this.game.queue.length>0)for(;this.game.queue.length>0&&1==e;){r++,n=this.game.queue.length,a=this.game.queue[this.game.queue.length-1],r>=100&&(console.log("ENDLESS QUEUE LOOPING"),t.exit());var i=this.game.queue.length-1,o=this.game.queue[i].split("\t");this.time.last_received=(new Date).getTime();for(var s=0;s<this.commands.length;s++)if(0===this.commands[s](this,o))return 0;if(n==this.game.queue.length&&1==e&&a===this.game.queue[this.game.queue.length-1]&&(e=this.handleGameLoop()),0==e)return this.processFutureMoves(),0}}},{key:"addNextMove",value:function(e){var t=e.returnMessage();if(1==this.game.halted||1==this.gaming_active)return null!=this.game.future&&"undefined"!=this.game.future&&null!=this.game.future||(this.game.future=[]),this.game.id===t.game_id&&this.game.future.push(JSON.stringify(e.transaction)),this.saveFutureMoves(this.game.id),void(this.gaming_active=0);if(t.last_move>0){this.game.step.ts=t.last_move,this.game.step.bid=t.last_bid,this.game.step.tid=t.last_tid;try{window.location.hash="#gid=".concat(this.game.id,"&bid=").concat(this.game.step.bid,"&tid=").concat(this.game.step.tid,"&lm=").concat(this.game.step.ts)}catch(e){console.log("ERROR updating hash in observer mode")}}else window.location.hash="#gid=".concat(this.game.id,"&bid=0&tid=0&lm=").concat((new Date).getTime());if(null==t.turn&&(t.turn=[]),null==t.step&&(t.step={}),this.game.step.players[e.transaction.from[0].add]=t.step.game,t.step.game>this.game.step.game&&(this.game.step.game=t.step.game),0==this.game.player&&(console.log("OBSERVER MODE executing step: "+JSON.stringify(t.step)),t.game_state.deck)){if(t.game_state.deck.length>0)if(console.log("DECK SENT: "+JSON.stringify(t.game_state.deck)),this.game.player_decks);else if(this.game.player_decks=[],this.game.player_decks.length<this.game.players)for(var r=0;r<this.game.players.length;r++)this.game.player_decks.push={},this.game.player_decks[r].deck=[];for(var n=0;n<t.game_state.deck.length;n++)this.game.deck[n]=t.game_state.deck[n];if(t.sharekey){for(var a=0,i=0;i<this.game.players.length;i++)this.game.players[i]===e.transaction.from[0].add&&(a=i);var o=t.sharekey;if(o)for(var s=0;s<t.game_state.deck.length;s++){for(;this.game.player_decks.length<=a;)this.game.player_decks.push({}),this.game.player_decks[this.game.player_decks.length-1].deck=[];for(;this.game.player_decks[a].deck.length<=s;)this.game.player_decks[a].deck.push({});this.game.player_decks[a].deck[s].hand=JSON.parse(this.app.crypto.hexToString(this.app.crypto.decodeXOR(t.game_state.deck[s].hand,o))),this.game.player_decks[a].deck[s].keys=JSON.parse(this.app.crypto.hexToString(this.app.crypto.decodeXOR(t.game_state.deck[s].keys,o)))}}}if(null!=this.game.queue){for(var c=0;c<t.turn.length;c++)this.game.queue.push(t.turn[c]);this.saveFutureMoves(this.game.id),this.saveGame(this.game.id),this.runQueue(),this.processFutureMoves(),this.gaming_active=0}}},{key:"addFutureMove",value:function(e){if(this.game.future.includes(JSON.stringify(e.transaction))||(this.game.future.push(JSON.stringify(e.transaction)),this.saveFutureMoves(this.game.id)),0==this.game.player)try{this.observer.showNextMoveButton()}catch(e){}}},{key:"processFutureMoves",value:function(){if(0!=this.game.player){if(1==this.gaming_active)return 0;if(1==this.game.halted)return 0}for(var e=0,t=this.game.future.length,r=0,n=0,a=0,i="",o=t,s=0;t>0&&1!=this.gaming_active&&1!=this.game.halted&&0==e&&s<o;){n++,a=this.game.queue.length,i=this.game.queue[this.game.queue.length-1],r=0;for(var c=0;c<t;c++){var l=new y.transaction(JSON.parse(this.game.future[c])),u=l.returnMessage();this.isUnprocessedMove(this.game.player,u)?(this.game.future.splice(c,1),s++,this.addNextMove(l),r=1):this.isFutureMove(this.game.player,u)?r=1:(this.game.future.splice(c,1),r=1,c--),t=this.game.future.length}t=this.game.future.length,0!=r&&0!=this.game.future.length||(e=1),a==this.game.queue.length&&i==this.game.queue[this.game.queue.length-1]&&0!=n&&(e=1)}}},{key:"handleGameLoop",value:function(){return 0}},{key:"removePlayer",value:function(e){if(""!==e){for(var t=0;t<this.game.players.length;t++)this.game.players[t]===e&&(this.game.players.splice(t,1),this.game.accepted.splice(t,1));for(var r=0;r<this.game.opponents.length;r++)this.game.opponents[r]===e&&this.game.opponents.splice(r,1)}}},{key:"addPlayer",value:function(e){if(""!==e){for(var t=0;t<this.game.players.length;t++)if(this.game.players[t]===e)return;this.game.players.push(e),this.game.accepted.push(0),this.app.wallet.returnPublicKey()!==e&&this.game.opponents.push(e)}}},{key:"receiveGameoverRequest",value:function(e,t,r,n){var a=t.returnMessage(),i=a.game_id,o=a.module,s=n.modules.returnModule(o),c=this.loadGame(i);c&&s.game.players.includes(t.transaction.from[0].add)&&(c.over=1,this.saveGame(i),s.game.queue.push("GAMEOVER\t"),s.runQueue(a),s.gaming_active=0)}},{key:"tieGame",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.resignGame(e,1)}},{key:"resignGame",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.loadGame(t),a=this.app.wallet.createUnsignedTransactionWithDefaultFee();if(a.transaction.to=n.players.map((function(e){return new y.slip(e)})),0==n.over){var i=n.winner,o=n.module;i=n.players.find((function(t){return t!=e.app.wallet.returnPublicKey()})),this.game.winner>0&&(i=this.game.players[this.game.winner-1]),1==r&&(i=""),n.over=1,n.last_block=this.app.blockchain.last_bid,this.saveGame(n.id),a.msg={request:"gameover",game_id:n.id,winner:i,module:o,reason:""},a=this.app.wallet.signTransaction(a),this.app.network.propagateTransaction(a)}}},{key:"saveFutureMoves",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null!==e){if(this.app.options&&this.app.options.games)for(var t=0;t<this.app.options.games.length;t++)this.app.options.games[t].id===this.game.id&&(this.app.options.games[t].future=this.game.future);this.app.storage.saveOptions()}}},{key:"saveGame",value:(M=c(regeneratorRuntime.mark((function e(r){var n,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.app.options&&(this.app.options.games||(this.app.options=Object.assign({games:[],gameprefs:{random:this.app.crypto.generateKeys()}},this.app.options))),void 0===r&&(r=this.app.crypto.hash(Math.random())),null==r){e.next=22;break}if(!this.app.options){e.next=22;break}if(!this.app.options.games){e.next=22;break}n=0;case 6:if(!(n<this.app.options.games.length)){e.next=22;break}if(this.app.options.games[n].id!==r){e.next=19;break}if(null!=this.game){e.next=11;break}return console.log("Saving Game Error: safety catch 1"),e.abrupt("return");case 11:if(this.game.id==r){e.next=14;break}return console.log("Saving Game Error: safety catch 2"),e.abrupt("return");case 14:for(this.game.ts=(new Date).getTime(),a=0;a<this.app.options.games[n].future.length;a++){for(i=0,o=0;o<this.game.future.length;o++)this.app.options.games[n].future[a]===this.game.future[o]&&(i=1);0==i&&this.game.future.push(this.app.options.games[n].future[a])}return this.app.options.games[n]=JSON.parse(JSON.stringify(this.game)),this.app.storage.saveOptions(),e.abrupt("return",new Promise((function(e,t){setTimeout((function(){e(1)}),1e3)})));case 19:n++,e.next=6;break;case 22:return this.game.id===r?this.app.options.games.push(this.game):this.game=this.newGame(r),this.game.id.length<25&&this.game.players_needed>1&&t.exit(),this.app.storage.saveOptions(),e.abrupt("return",new Promise((function(e,t){setTimeout((function(){e(1)}),1e3)})));case 26:case"end":return e.stop()}}),e,this)}))),function(e){return M.apply(this,arguments)})},{key:"deleteGamePreference",value:function(e){return this.app.options&&this.app.options.gameprefs&&this.app.options.gameprefs[e]&&delete this.app.options.gameprefs[e],null}},{key:"loadGamePreference",value:function(e){return this.app.options&&this.app.options.gameprefs?this.app.options.gameprefs[e]:null}},{key:"saveGamePreference",value:function(e,t){null==this.app.options.games&&(this.app.options.games=[]),null==this.app.options.gameprefs&&(this.app.options.gameprefs={},this.app.options.gameprefs.random=this.app.crypto.generateKeys()),this.app.options.gameprefs[e]=t,this.app.storage.saveOptions()}},{key:"loadGame",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null==this.app.options.games&&(this.app.options.games=[]),null==this.app.options.gameprefs&&(this.app.options.gameprefs={},this.app.options.gameprefs.random=this.app.crypto.generateKeys()),null==e){for(var t=0,r=0;r<this.app.options.games.length;r++)this.app.options.games[r].ts>this.app.options.games[t].ts&&(t=r);e=null==this.app.options.games||0==this.app.options.games.length?null:this.app.options.games[t].id}if(null!=e)for(var n=0;n<this.app.options.games.length;n++)if(this.app.options.games[n].id===e)return this.game=JSON.parse(JSON.stringify(this.app.options.games[n])),this.game;return this.game=this.newGame(e),this.saveGame(e),this.game}},{key:"newGame",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null==e&&(e=Math.random().toString());var t={};return t.id=e,t.confirms_needed=[],t.crypto="",t.player=1,t.players=[],t.keys=[],t.players_needed=1,t.accepted=[],t.players_set=0,t.target=1,t.invitation=1,t.initializing=1,t.initialize_game_run=0,t.accept=0,t.over=0,t.winner=0,t.module="",t.originator="",t.ts=(new Date).getTime(),t.last_block=0,t.options={},t.options.ver=1,t.invite_sig="",t.future=[],t.halted=0,t.lock_interface=0,t.saveGameState=0,t.clock_spent=0,t.clock_limit=0,t.step={},t.step.game=1,t.step.players={},t.step.ts=0,t.queue=[],t.turn=[],t.opponents=[],t.deck=[],t.pool=[],t.dice="",t.status="",t.log=[],t.sroll=0,t.sroll_hash="",t.sroll_done=0,t.spick_card="",t.spick_hash="",t.spick_done=0,t}},{key:"rollDice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.game.dice=this.app.crypto.hash(this.game.dice);var r=parseInt(this.game.dice.slice(0,12),16)%e;if(null==t)return r+1;t(r+1)}},{key:"initializeDice",value:function(){""===this.game.dice&&(this.game.dice=this.app.crypto.hash(this.game.id))}},{key:"scale",value:function(e){return Math.floor(this.screenRatio*e)}},{key:"shuffleArray",value:function(e){var t,r,n;for(n=e.length-1;n>0;n--)t=Math.floor(Math.random()*(n+1)),r=e[n],e[n]=e[t],e[t]=r;return e}},{key:"returnNextPlayer",value:function(e){var t=parseInt(e)+1;return t>this.game.players.length?1:t}},{key:"shuffleDeck",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=[],r=[],n=this.game.deck[e-1].crypt,a=this.game.deck[e-1].keys,i=this.game.deck[e-1].crypt.length,o=i,s=0;s<i;s++){var c=this.rollDice(o)-1;t.push(n[c]),r.push(a[c]),n.splice(c,1),a.splice(c,1),o--}this.game.deck[e-1].crypt=t,this.game.deck[e-1].keys=r}},{key:"sendMessage",value:(O=c(regeneratorRuntime.mark((function e(){var t,r,n,a,i,o,s,c,l,u,d,h,p,f,m,g,v,b,_,w=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=w.length>0&&void 0!==w[0]?w[0]:"game",r=w.length>1&&void 0!==w[1]?w[1]:{},w.length>2&&void 0!==w[2]&&w[2],1!=this.confirm_moves||1!=this.confirm_this_move){e.next=12;break}if(!(this.game.turn.length>0)){e.next=12;break}return e.next=7,sconfirm("Submit this move?");case 7:if(e.sent){e.next=11;break}return window.location.reload(),e.abrupt("return");case 11:this.confirm_this_move=0;case 12:if(1==this.game.sroll&&(n=this.app.crypto.hash(Math.random()),a=this.app.crypto.hash(n),this.app.crypto.signMessage(n,this.app.wallet.returnPrivateKey()),i=this.app.crypto.signMessage(a,this.app.wallet.returnPrivateKey()),this.game.sroll_hash=n,this.game.sroll_done=0,this.game.sroll=0,this.game.turn.slice().unshift("SECUREROLL_END"),this.game.turn.push("SECUREROLL\t"+this.game.player+"\t"+a+"\t"+i)),this.time.last_sent=(new Date).getTime(),!(this.time.last_sent>this.time.last_received+1e3)){e.next=23;break}if(this.game.clock_spent+=this.time.last_sent-this.time.last_received,o=this.game.clock_limit-this.game.clock_spent,this.clock.displayTime(o),!(o<0&&this.game.clock_limit>0)){e.next=22;break}this.resignGame();try{this.displayModal("<span>The Game is Over</span> - <span>Player "+this.game.player+" loses by timeout</span>"),this.updateStatus("<span>The Game is Over</span> - <span>Player "+this.game.player+" loses by timeout</span>"),this.updateLog("<span>The Game is Over</span> - <span>Player "+this.game.player+" loses by timeout</span>")}catch(e){}return e.abrupt("return",0);case 22:this.stopClock();case 23:if(0!=this.game.player){e.next=25;break}return e.abrupt("return");case 25:if(null!=this.game.opponents){e.next=27;break}return e.abrupt("return");case 27:for(s=0,c=0;c<this.game.turn.length;c++)"READY"==this.game.turn[c]&&(s=1);if(l=this,u={},(d={}).game=this.game.step.game,"game"==t&&(d.game++,u.request="game"),1==this.game.saveGameState&&(0==this.observer_mode&&(this.game.turn.push("OBSERVER\t"+this.game.player+"\t1"),this.game.turn.push("SETVAR\tsaveGameState\t1")),u.game_state=this.returnPreMoveGameState(),u.sharekey=this.loadGamePreference(this.game.id+"_sharekey")),"SAITO"!==l.game.crypto&&""!==l.game.crypto)for(h=this.app.wallet.returnCryptoModuleByTicker(l.game.crypto),p=this.app.wallet.returnCryptoAddressByTicker(l.game.crypto),h&&(p=h.returnAddress()),f=0;f<this.game.players.length;f++)this.game.players[f]==this.app.wallet.returnPublicKey()&&this.game.keys[f]!==p&&this.game.turn.push("CRYPTOKEY\t"+this.app.wallet.returnPublicKey()+"\t"+p+"\t"+this.app.crypto.signMessage(p,this.app.wallet.returnPrivateKey()));else for(m=this.app.wallet.returnPublicKey(),g=0;g<this.game.players.length;g++)this.game.players[g]==this.app.wallet.returnPublicKey()&&this.game.keys[g]!==m&&this.game.turn.push("CRYPTOKEY\t"+m+"\t"+m+"\t"+this.app.crypto.signMessage(m,this.app.wallet.returnPrivateKey()));if(u.turn=this.game.turn,u.module=this.name,u.game_id=this.game.id,u.player=this.game.player,u.step=d,u.extra=r,null!=(v=this.app.wallet.createUnsignedTransactionWithDefaultFee(this.app.wallet.returnPublicKey(),0))){e.next=46;break}return salert("ERROR: Difficulty Sending Transaction, please reload"),e.abrupt("return");case 46:for(b=0;b<this.game.opponents.length;b++)v.transaction.to.push(new y.slip(this.game.opponents[b],0));v.msg=u,v=this.app.wallet.signTransaction(v),l.app.wallet.wallet.pending.push(JSON.stringify(v.transaction)),l.app.wallet.saveWallet(),l.saveGame(l.game.id),this.relay_moves_offchain_if_possible&&0==s&&("game"!==v.msg.request&&1!=this.initialize_game_offchain_if_possible||null==(_=this.app.modules.returnModule("Relay"))||0!=l.game.initializing&&1!=l.initialize_game_offchain_if_possible||_.sendRelayMessage(this.game.players,"game relay gamemove",v)),l.app.network.propagateTransactionWithCallback(v,(function(e){}));case 54:case"end":return e.stop()}}),e,this)}))),function(){return O.apply(this,arguments)})},{key:"handlePeerRequest",value:(g=c(regeneratorRuntime.mark((function e(t,r,n){var a,i,o,s,c,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=l.length>3&&void 0!==l[3]?l[3]:null,0!=t.BROWSER){e.next=3;break}return e.abrupt("return");case 3:return i=this,e.next=6,u(m(q.prototype),"handlePeerRequest",this).call(this,t,r,n,a);case 6:if("game relay gamemove"!==r.request){e.next=36;break}if(null==r.data){e.next=36;break}if(o=new y.transaction(r.data.transaction),s=o.returnMessage(),i.doesGameExistLocally(s.game_id)){e.next=13;break}return console.log("Game does not exist locally. Not processing HPR message: waiting for on-chain"),e.abrupt("return");case 13:if(s.module!=this.name){e.next=36;break}if(i.game&&i.game.id==s.game_id||""==s.game_id){e.next=32;break}c=0;case 16:if(!(c<s.turn.length)){e.next=32;break}if(!(s.turn[c].indexOf("FLIP")>-1)){e.next=20;break}return console.log("ERROR: game does not exist but off-chain flip creation received. Waiting for on-chain confirmation"),e.abrupt("return");case 20:if(!(s.turn[c].indexOf("DECK")>-1)){e.next=23;break}return console.log("ERROR: game does not exist but off-chain deck creation received. Waiting for on-chain confirmation"),e.abrupt("return");case 23:if(!(s.turn[c].indexOf("ISSUEKEYS")>-1)){e.next=26;break}return console.log("ERROR: game does not exist but off-chain issuekeys request received. Waiting for on-chain confirmation"),e.abrupt("return");case 26:if(!(s.turn[c].indexOf("RESOLVE")>-1)){e.next=29;break}return console.log("ERROR: game does not exist but off-chain resolve request received. Waiting for on-chain confirmation"),e.abrupt("return");case 29:c++,e.next=16;break;case 32:if("undefined"!=i.game&&null!=i.game&&""!=i.game&&null!=i.game||s.game_id==i.game.id){e.next=35;break}return console.log("peer to peer game move but not for this game so dropping"),e.abrupt("return");case 35:i.isFutureMove(o.transaction.from[0].add,s)?i.addFutureMove(o):i.isUnprocessedMove(o.transaction.from[0].add,s)&&i.addNextMove(o);case 36:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return g.apply(this,arguments)})},{key:"addPool",value:function(){var e=this.game.pool.length;this.resetPool(e)}},{key:"addDeck",value:function(){var e=this.game.deck.length;this.resetDeck(e)}},{key:"resetPool",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.game.pool[e]={},this.game.pool[e].cards={},this.game.pool[e].crypt=[],this.game.pool[e].keys=[],this.game.pool[e].hand=[],this.game.pool[e].decrypted=0}},{key:"resetDeck",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.game.deck[e]={},this.game.deck[e].cards={},this.game.deck[e].crypt=[],this.game.deck[e].keys=[],this.game.deck[e].hand=[],this.game.deck[e].xor="",this.game.deck[e].discards={},this.game.deck[e].removed={}}},{key:"updateStatus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(1!=this.lock_interface||0!=t)if(this.game.status=e,this.useHUD)this.hud.updateStatus(e);else try{if(1==this.browser_active){var r=document.getElementById("status");r.innerHTML=e}}catch(e){console.log("Error Updating Log: ignoring")}}},{key:"updateLog",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e&&(this.game.log.includes(e)||(this.game.log.unshift(e),this.game.log.length>t&&(this.game.log_length>t||this.game.log.splice(t)))),this.log.updateLog(e,this.addLogCardEvents.bind(this),r)}},{key:"returnPreMoveGameState",value:function(){for(var e=JSON.parse(JSON.stringify(this.game_state_pre_move)),t=this.loadGamePreference(this.game.id+"_sharekey"),r=0;r<e.deck.length;r++)t?(e.deck[r].hand=this.app.crypto.encodeXOR(this.app.crypto.stringToHex(JSON.stringify(e.deck[r].hand)),t),e.deck[r].keys=this.app.crypto.encodeXOR(this.app.crypto.stringToHex(JSON.stringify(e.deck[r].keys)),t)):(e.deck[r].keys=[],e.deck[r].hand=[]);return e}},{key:"returnGameState",value:function(){for(var e=JSON.parse(JSON.stringify(this.game)),t=this.loadGamePreference(this.game.id+"_sharekey"),r=0;r<e.deck.length;r++)t?(e.deck[r].hand=this.app.crypto.encodeXOR(this.app.crypto.stringToHex(JSON.stringify(e.deck[r].hand)),t),e.deck[r].keys=this.app.crypto.encodeXOR(this.app.crypto.stringToHex(JSON.stringify(e.deck[r].keys)),t)):(e.deck[r].keys=[],e.deck[r].hand=[]);return e}},{key:"returnGameOptionsHTML",value:function(){return'\n      <div id="game-wizard-advanced-return-btn" class="game-wizard-advanced-return-btn button">accept</div>\n    '}},{key:"returnFormattedGameOptions",value:function(e){return e}},{key:"returnGameRowOptionsHTML",value:function(e){var t="";for(var r in e)"clock"==r&&e[r],t+='<span class="game-option">'+r+": "+e[r]+"</span>, ";return t=t.slice(0,-2)}},{key:"prependMove",value:function(e){this.moves.unshift(e)}},{key:"addMove",value:function(e){this.moves.push(e)}},{key:"removeMove",value:function(){return this.moves.pop()}},{key:"endTurn",value:function(){var e={};this.game.turn=this.moves,this.moves=[],this.sendMessage("game",e)}},{key:"returnCardList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t="";for(i=0;i<e.length;i++)t+=this.returnCardItem(e[i]);return'<div class="status-cardbox" id="status-cardbox">'.concat(t,"</div>")}},{key:"returnCardItem",value:function(e){for(var t=0;t<this.game.deck.length;t++)if(null!=this.game.deck[t].cards[e])return'<div id="'.concat(e.replace(/ /g,""),'" class="card cardbox-hud cardbox-hud-status">').concat(this.returnCardImage(e),"</div>");return'<li class="card showcard" id="'+e+'">'+this.game.deck[0].cards[e].name+"</li>"}},{key:"returnCardImage",value:function(e){for(var t=null,r=0;null==t&&r<this.game.deck.length;r++)null==(t=this.game.deck[r].cards[e])&&(t=this.game.deck[r].discards[e]),null==t&&(t=this.game.deck[r].removed[e]);if(null==t){if("object"===n(e)&&!Array.isArray(e)&&null!=e&&null!=e.returnCardImage){var a=e.returnCardImage();if(a)return a}return'<div class="noncard">'+e+"</div>"}var i=this.returnSlug()+"/img/";return-1!=t.img.indexOf(i)?'<img class="cardimg showcard" id="'.concat(e,'" src="').concat(t.img,'" />'):'<img class="cardimg showcard" id="'.concat(e,'" src="/').concat(this.returnSlug(),"/img/").concat(t.img,'" />')}},{key:"returnDiscardedCards",value:function(e){var t={};for(var r in e=parseInt(e-1),this.game.deck[e].discards)t[r]=this.game.deck[0].cards[r],delete this.game.deck[0].cards[r];return this.game.deck[0].discards={},t}},{key:"showCard",value:function(e){var t=this.returnCardImage(e),r=this.app.browser.isMobileBrowser(navigator.userAgent)?"".concat(t,'\n        <div id="cardbox-exit-background">\n          <div class="cardbox-exit" id="cardbox-exit">×</div>\n        </div>'):t;$("#cardbox").html(r),$("#cardbox").show()}},{key:"showPlayableCard",value:function(e){var t=this.returnCardImage(e),r=this.app.browser.isMobileBrowser(navigator.userAgent)?"".concat(t,'\n      <div id="cardbox-exit-background">\n        <div class="cardbox-exit" id="cardbox-exit">×</div>\n      </div>\n      <div class="cardbox_menu_playcard cardbox_menu_btn" id="cardbox_menu_playcard">\n        PLAY\n      </div>'):t;$("#cardbox").html(r),$("#cardbox").show()}},{key:"hideCard",value:function(){$("#cardbox").hide()}},{key:"updateStatusAndListCards",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;html='\n      <div class="status-message">\n        '.concat(e,"\n      </div>\n      ").concat(this.returnCardList(t),"\n    "),this.updateStatus(html),this.addShowCardEvents(r)}},{key:"addShowCardEvents",value:function(e){this.changeable_callback=e,this.hud.attachCardEvents(this.app,this)}},{key:"addLogCardEvents",value:function(){var e=this;if(!this.app.browser.isMobileBrowser(navigator.userAgent))try{$(".logcard").off(),$(".logcard").mouseover((function(){var t=$(this).attr("id");e.showCard(t)})).mouseout((function(){var t=$(this).attr("id");e.hideCard(t)}))}catch(e){}}},{key:"removeCardFromHand",value:function(e){for(var t=0;t<this.game.deck.length;t++)for(i=0;i<this.game.deck[t].hand.length;i++)this.game.deck[t].hand[i]===e&&this.game.deck[t].hand.splice(i,1)}},{key:"returnPlayersBoxArray",value:function(){var e=[];return 2==this.game.players.length&&(e=[1,4]),3==this.game.players.length&&(e=[1,3,5]),4==this.game.players.length&&(e=[1,3,4,5]),5==this.game.players.length&&(e=[1,2,3,5,6]),6==this.game.players.length&&(e=[1,2,3,4,5,6]),e}},{key:"returnViewBoxArray",value:function(){var e=[];return 2==this.game.players.length&&(e=[3,5]),3==this.game.players.length&&(e=[3,4,5]),4==this.game.players.length&&(e=[2,3,5,6]),5==this.game.players.length&&(e=[2,3,4,5,6]),e}},{key:"playerAcknowledgeNotice",value:function(e,t){var r='<div class="status-message acknowledge-message">'+e+"</div><ul>";r+='<li class="textchoice" id="confirmit">I understand...</li>',r+="</ul></p>",this.updateStatus(r);try{var n=document.querySelector(".hud-header");n&&(document.querySelector("#confirmit").style.width=n.style.width)}catch(e){}return document.getElementById("confirmit").onclick=function(e){t()},0}},{key:"nonPlayerTurn",value:function(){console.log("it is not my turn!"),this.hud.updateStatusMessage("Waiting for Opponent to Move")}},{key:"playerTurn",value:function(){game_self=this,console.log('\n\tThis is the default Player Turn function. It should be replaced in any \n\tgame by code logic that specifies what players actually do. Their moves\n\tshould be added to the queue using addMove() and then endTurn() to \n\tsubmit those moves to all other players.\n\n\tNote that other players will execute the contents of this queue in \n\treverse order. Complicated game moves that require conditional should\n\tbe handled in .\n\n\tThe PLAY instruction does not "fall-out" automatically (it will keep \n\tcoming back to the player whose turn it is. This is deliberate design.\n\tIn order to remove this move, RESOLVE command must be issued by the \n\tplayer whose turn it is. This will permit the queue to clear and \n\tthe game will continue with the next player.\n    '),game_self.addMove("RESOLVE\t"+game_self.app.wallet.returnPublicKey()),game_self.addMove("NOTIFY\tPlayer "+game_self.game.player+" has moved"),game_self.endTurn()}},{key:"addPublickeyConfirm",value:function(e,t){this.game.tmp_confirms_received+=parseInt(t),this.game.tmp_confirms_players.push(e)}},{key:"hasPlayerConfirmed",value:function(e){return this.game.tmp_confirms_players.includes(e)||this.game.confirms_players.includes(e)?1:0}},{key:"removeConfirmsNeeded",value:function(e){this.game.confirms_needed=[],this.game.confirms_received=0,this.game.confirms_players=[],this.game.tmp_confirms_received=0,this.game.tmp_confirms_players=[];for(var t=0;t<this.game.players.length;t++)this.game.confirms_needed[t]=0}},{key:"resetConfirmsNeeded",value:function(e){this.game.confirms_needed=[],this.game.confirms_received=0,this.game.confirms_players=[],this.game.tmp_confirms_received=0,this.game.tmp_confirms_players=[];for(var t=0;t<this.game.players.length;t++)e.includes(t+1)||e.includes(this.game.players[t])?this.game.confirms_needed[t]=1:this.game.confirms_needed[t]=0}},{key:"returnPlayerName",value:function(e){return this.game.players[e-1].substring(0,11)}},{key:"endGame",value:function(e,t){if(this.game.over=1,this.game.winner=e,this.game.winner==this.game.player&&(this.game.over=0,this.resignGame()),1==this.browser_active)try{this.displayModal("<span>The Game is Over</span> - <span>"+e.toUpperCase()+"</span> <span>wins by</span> <span>"+t+"<span>"),this.updateStatus("<span>The Game is Over</span> - <span>"+e.toUpperCase()+"</span> <span>wins by</span> <span>"+t+"<span>")}catch(e){}}},{key:"formatStatusHeader",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r='<i class="fa fa-arrow-left" id="back_button"></i>';return'\n    <div class="status-header">\n      '.concat(t?r:"",'\n      <div style="text-align: center;">\n        ').concat(e,"\n      </div>\n    </div>\n    ")}},{key:"startClock",value:function(){var e=this;clearInterval(this.clock_timer),this.clock_timer=setInterval((function(){var t=(new Date).getTime(),r=e.game.clock_limit-(t-e.time.last_received)-e.game.clock_spent;e.clock.displayTime(r)}),1e3)}},{key:"stopClock",value:function(){clearInterval(this.clock_timer)}},{key:"lockInterface",value:function(){this.lock_interface=1,this.lock_interface_step=this.game.queue[this.game.queue.length-1]}},{key:"unlockInterface",value:function(){this.lock_interface=0}},{key:"mayUnlockInterface",value:function(){return this.lock_interface_step===this.game.queue[this.game.queue.length-1]?1:0}},{key:"initializeQueueCommands",value:function(){var e=this;this.commands.push((function(e,t){return"SETVAR"===t[0]&&(t[1]&&(t[3]?t[4]?e.game[t[1]][t[2]][t[3]]=t[4]:e.game[t[1]][t[2]]=t[3]:t[2]&&(e.game[t[1]]=t[2])),e.game.queue.splice(e.game.queue.length-1,1)),1})),this.commands.push((function(e,t){return"NOTIFY"!==t[0]&&"notify"!==t[0]||(e.updateLog(t[1]),e.game.queue.splice(e.game.queue.length-1,1)),1})),this.commands.push((function(e,t){return"STATUS"!==t[0]&&"status"!==t[0]||(e.updateStatus(t[1]),e.game.queue.splice(e.game.queue.length-1,1)),1})),this.commands.push((function(e,t){if("ACKNOWLEDGE"===t[0]){var r=t[1];e.game.halted=1;var n=e.game.id;return e.saveGame(e.game.id),e.playerAcknowledgeNotice(r,(function(){return e.game.id!=n&&(e.game=e.loadGame(n)),e.updateStatus(" acknowledged..."),e.game.queue.splice(e.game.queue.length-1,1),e.game.halted=0,e.saveGame(e.game.id),0==e.runQueue()&&e.processFutureMoves(),0})),0}return 1})),this.commands.push((function(e,t){return"GAMEOVER"===t[0]?(1==e.browser_active&&e.updateLog("Player has Quit the Game"),0):1})),this.commands.push((function(e,t){if("OBSERVER"===t[0]){var r={game_id:e.game.id,player:e.app.wallet.returnPublicKey(),module:e.game.module};e.app.crypto.stringToBase64(JSON.stringify(r)),e.observer_mode=1,e.game.saveGameState=1,e.game.queue.splice(e.game.queue.length-1,1)}return 1})),this.commands.push((function(e,t){if("PLAY"===t[0]){var r=[];if("all"===t[1])for(var n=0;n<e.game.players.length;n++)r.push(n+1);else try{r=t[1].isArray()?t[1]:[t[1]]}catch(e){r=t[1]}for(var a=1,i=0;i<e.game.confirms_needed.length;i++)1==e.game.confirms_needed[i]&&(a=0);1==a&&e.resetConfirmsNeeded(r);for(var o=0,s=0;s<r.length;s++)e.game.player==parseInt(r[s])&&(o=1,1==e.game.confirms_needed[r[s]-1]&&e.playerTurn());return 0==o&&e.nonPlayerTurn(),0}return 1})),this.commands.push((function(e,t){if("RESETCONFIRMSNEEDED"===t[0]){var r=[];if("all"===t[1])for(var n=0;n<e.game.players.length;n++)r.push(n+1);else try{r=t[1].isArray()?t[1]:[t[1]]}catch(e){r=t[1]}for(var a=1,i=0;i<e.game.confirms_needed.length;i++)1==e.game.confirms_needed[i]&&(a=0);return 1==a&&e.resetConfirmsNeeded(r),e.game.queue.splice(e.game.queue.length-1,1),1}return 1})),this.commands.push((function(e,t){if("RESOLVE"===t[0]){if(!t[1]){if(e.game.queue.length-1==0)return e.game.queue=[],1;var r=e.game.queue.length-2;return"RESOLVE"===e.game.queue[r]?(e.game.queue.splice(e.game.queue.length-1,1),1):r<=0?(e.game.queue=[],1):(e.game.queue.splice(r,2),1)}for(var n=0;n<e.game.players.length;n++)e.game.players[n]===t[1]&&(e.game.confirms_needed[n]=0);e.app.wallet.returnPublicKey()===t[1]&&e.unlockInterface();for(var a=1,i=0;i<e.game.confirms_needed.length;i++)1==e.game.confirms_needed[i]&&(a=0);for(var o="Players still to move: <ul>",s=0,c=0,l=0;l<e.game.confirms_needed.length;l++)1==e.game.confirms_needed[l]&&(o+='<li class="option">'+e.returnPlayerName(l+1)+"</li>",c=1),e.game.player==l+1&&(s=e.game.confirms_needed[l]);if(o+="</ul>",0==s&&(console.log("is anyone left to move: "+c),e.updateStatus(o)),1==a){if(e.game.queue.length-1==0)return e.game.queue=[],1;var u=e.game.queue.length-2;return"RESOLVE"===e.game.queue[u]?(e.game.queue.splice(e.game.queue.length-1,1),1):u<=0?(e.game.queue=[],1):(e.game.queue.splice(u,2),1)}return e.game.queue.splice(e.game.queue.length-1,1),1}return 1})),this.commands.push((function(e,t){if("READY"==t[0]&&(e.game.initializing=0,e.game.queue.splice(e.game.queue.length-1,1),e.saveGame(e.game.id),e.app.modules.isModuleActive("Arcade"))){var r=e.app.modules.returnModule("Arcade");null==r.initialization_timer&&(console.log("We seem to have loaded into a READY process while viewing the arcade, but our game is not waiting for the initialization screen, so we should check and show that launch screen."),r.launchGame(e.game.id))}return 1})),this.commands.push((function(e,t){return"SHUFFLE"===t[0]&&(e.shuffleDeck(parseInt(t[1])),e.game.queue.splice(e.game.queue.length-1,1)),1})),this.commands.push((function(e,t){if("LOGDECK"===t[0]){var r=parseInt(t[1]);e.updateLog("Contents of Deck: ".concat(e.game.deck[r-1].cards)),e.game.queue.splice(e.game.queue.length-1,1)}return 1})),this.commands.push((function(e,t){if("LOGHAND"===t[0]){var r=parseInt(t[1]);e.updateLog("Contents of Hand: ".concat(e.game.deck[r-1].hand)),e.game.queue.splice(e.game.queue.length-1,1)}return 1})),this.commands.push((function(e,t){if("LOGPOOL"===t[0]){var r=parseInt(t[1]);e.updateLog("Contents of Pool: ".concat(e.game.pool[r-1].hand)),e.game.queue.splice(e.game.queue.length-1,1)}return 1})),this.commands.push((function(e,t){if("RESOLVEDEAL"===t[0]){var r=t[1],n=t[2],a=t[3];if(e.game.player==n)for(var i=0;i<a;i++)if(e.game.deck[r-1].crypt.length>i){var o=e.game.deck[r-1].crypt[i];null!=e.game.deck[r-1].keys[i]&&(o=e.app.crypto.decodeXOR(o,e.game.deck[r-1].keys[i])),o=e.app.crypto.hexToString(o),e.game.deck[r-1].hand.includes(o)||e.game.deck[r-1].hand.push(o)}if(e.game.queue.length-1==0)e.game.queue=[];else{var s=e.game.queue.length-2;s<=0?e.game.queue=[]:e.game.queue.splice(s,2)}if(0==e.game.player)return 0==e.game.issued_keys_deleted&&(e.game.issued_keys_deleted=1),1;0==e.game.issued_keys_deleted&&(e.game.deck[r-1].keys.length<=a?(e.game.deck[r-1].keys=[],e.game.deck[r-1].crypt=[]):(e.game.deck[r-1].keys=e.game.deck[r-1].keys.splice(a,e.game.deck[r-1].keys.length-a),e.game.deck[r-1].crypt=e.game.deck[r-1].crypt.splice(a,e.game.deck[r-1].crypt.length-a)),e.game.issued_keys_deleted=1)}return 1})),this.commands.push((function(e,t){if("RESOLVEFLIP"===t[0]){for(var r=t[1],n=t[2],a=t[3],i=e.game.opponents.length+1;e.game.pool.length<a;)e.addPool();if(0==e.game.pool[a-1].crypt.length){e.game.pool[a-1].cards=e.game.deck[r-1].cards;for(var o=0;o<n;o++){e.game.pool[a-1].crypt.push(e.game.deck[r-1].crypt[o]);for(var s=0;s<i;s++)e.game.pool[a-1].keys.push([])}}var c=e.game.queue.length-1;e.game.queue.splice(e.game.queue.length-1,1);for(var l=0;l<n;l++){var u=e.game.pool[a-1].crypt[0+l],d=e.game.queue[c-1-l];e.game.pool[a-1].keys[0+l].push(d),null==d||(u=e.app.crypto.decodeXOR(u,d)),e.game.pool[a-1].crypt[0+l]=u}if(e.game.queue.splice(c-n,n),e.game.pool[a-1].decrypted++,e.game.pool[a-1].decrypted==i){for(var h=0;h<n;h++)e.game.pool[a-1].hand.push(e.app.crypto.hexToString(e.game.pool[a-1].crypt[0])),e.game.pool[a-1].crypt.splice(0,1);e.game.deck[r-1].keys=e.game.deck[r-1].keys.splice(n,e.game.deck[r-1].keys.length-n),e.game.deck[r-1].crypt=e.game.deck[r-1].crypt.splice(n,e.game.deck[r-1].crypt.length-n)}}return 1})),this.commands.push((function(e,t){if("SIMPLEDEAL"===t[0]){e.game.queue.splice(e.game.queue.length-1,1);for(var r=e.game.players.length,n=parseInt(t[1]),a=parseInt(t[2]),i=JSON.parse(t[3]),o=r;o>=1;o--)e.game.queue.push("DEAL\t"+a+"\t"+o+"\t"+n);for(var s=r;s>=1;s--)e.game.queue.push("DECKENCRYPT\t"+a+"\t"+s);for(var c=r;c>=1;c--)e.game.queue.push("DECKXOR\t"+a+"\t"+c);e.game.queue.push("DECK\t"+a+"\t"+JSON.stringify(i))}return 1})),this.commands.push((function(e,t){if("DEAL"===t[0]){var r=parseInt(t[1]),n=parseInt(t[2]),a=parseInt(t[3]);e.game.issued_keys_deleted=0;var i=e.game.opponents.length+1;if(1==i)e.game.queue.push("RESOLVEDEAL\t"+r+"\t"+n+"\t"+a);else{e.game.queue.push("RESOLVEDEAL\t"+r+"\t"+n+"\t"+a);for(var o=1;o<i+1;o++)o!=n&&e.game.queue.push("REQUESTKEYS\t"+r+"\t"+o+"\t"+n+"\t"+a)}}return 1})),this.commands.push((function(t,r){if("SAFEDEAL"===r[0]){t.game.queue.splice(t.game.queue.length-1,1);var n=parseInt(r[1]),a=parseInt(r[2]),i=parseInt(r[3]);if(t.game.deck[n-1].crypt.length>=i)e.game.queue.push("DEAL\t"+n+"\t"+a+"\t"+i);else{e.game.queue.push("DEAL\t"+n+"\t"+a+"\t"+i);var o={};for(var s in e.game.deck[n-1].discards)o[s]=e.game.deck[n-1].cards[s],delete e.game.deck[n-1].cards[s];if(e.game.deck[n-1].discards={},Object.keys(o).length<=0)e.updateLog("skipping deal - no cards available and no discards for reshuffling");else{e.game.queue.push("SHUFFLE\t"+n),e.game.queue.push("DECKRESTORE\t"+n);for(var c=e.game.players.length;c>=1;c--)e.game.queue.push("DECKENCRYPT\t"+n+"\t"+c);for(var l=e.game.players.length;l>=1;l--)e.game.queue.push("DECKXOR\t"+n+"\t"+l);e.game.queue.push("DECK\t"+n+"\t"+JSON.stringify(o)),e.game.queue.push("DECKBACKUP\t"+n),e.updateLog("notify\tshuffling discards back into deck...")}}}return 1})),this.commands.push((function(e,t){if("REQUESTKEYS"===t[0]){var r=parseInt(t[1]),n=parseInt(t[2]),a=parseInt(t[3]),i=parseInt(t[4]);if(e.game.deck[r-1].keys.length<i&&(i=e.game.deck[r-1].keys.length),e.game.player==n){e.game.turn=[],e.addMove("RESOLVE");for(var o=0;o<i;o++)e.addMove(e.game.deck[r-1].keys[o]);e.addMove("ISSUEKEYS\t"+r+"\t"+n+"\t"+a+"\t"+i+"\t"+e.game.deck[r-1].keys.length),e.endTurn()}return 0}return 1})),this.commands.push((function(e,t){if("ISSUEKEYS"===t[0]){var r=parseInt(t[1]),n=(parseInt(t[2]),parseInt(t[3])),a=parseInt(t[4]),i=parseInt(t[5]),o=e.game.queue.length-1-a;e.game.queue.splice(e.game.queue.length-1,1);var s=e.game.deck[r-1].crypt.length;if(e.game.player==n&&s==i)for(var c=0;c<a;c++)null!=e.game.queue[o+c]&&(e.game.deck[r-1].crypt[c]=e.app.crypto.decodeXOR(e.game.deck[r-1].crypt[c],e.game.queue[o+c]));a>0&&e.game.queue.splice(o,a)}return 1})),this.commands.push((function(e,t){if("SECUREROLL"===t[0]){parseInt(t[1]),t[2],t[3];for(var r=[],n=[],a="",i=e.game.queue.length-1;i>=0;i--){var o=e.game.queue[i].split("\t");if("SECUREROLL"===o[0]){if(1!=e.app.crypto.verifyMessage(o[2],o[3],e.game.players[o[1]-1]))return console.log("SIG DOES NOT VERIFY "+o[2]+" / "+o[3]+" / "+e.game.players[o[1]-1]),0;r.push(o[1]),n.push(o[2])}else{if("SECUREROLL_END"===o[0])break;a+=e.game.queue[i]}}for(var s=r[r.length-1],c=(n[n.length-1],1),l=1;l<=e.game.players.length;l++){for(var u=0,d=0;d<r.length;d++)r[d]==l&&(u=1);if(0==u){c=0;break}}if(0==e.game.sroll_done&&e.game.player!=s){var h=e.app.crypto.hash(Math.random()),p=e.app.crypto.signMessage(h,e.app.wallet.returnPrivateKey());return e.addMove("SECUREROLL\t"+e.game.player+"\t"+h+"\t"+p),e.game.sroll_done=1,e.endTurn(),0}if(0==c)return 0;for(var f=r[r.length-1],m=n[r.length-1],g="",y=0;y<r.length-1;y++)r[y]==f&&(g=n[y]);if(""===g){if(e.game.player==f){var v=e.app.crypto.signMessage(e.game.sroll_hash,e.app.wallet.returnPrivateKey());return e.addMove("SECUREROLL\t"+e.game.player+"\t"+e.game.sroll_hash+"\t"+v),e.game.sroll_done=1,e.endTurn(),0}return 0}if(e.app.crypto.hash(g)===m){for(var b=e.app.crypto.hash(a),_=0;_<n.length;_++)b=e.app.crypto.hash(b+n[_]);e.game.dice=b;for(var w=e.game.queue.length-1;w>=0&&"SECUREROLL"===e.game.queue[w].split("\t")[0];w--)e.game.queue.splice(e.game.queue.length-1,1);return 1}return alert("ERROR: the player which triggered the secure-dice-roll did not submit a second hash which hashed to their original commit. This invalidates the security of the random number generation. Halting."),0}return 1})),this.commands.push((function(e,t){return"SECUREROLL_END"===t[0]&&(e.game.sroll=0,e.game.sroll_hash="",e.game.sroll_done=0,e.game.queue.splice(e.game.queue.length-1,1)),1})),this.commands.push((function(e,t){if("SIMULTANEOUS_PICK"===t[0]){parseInt(t[1]),t[2],t[3];for(var r=[],n=[],a=e.game.queue.length-1;a>=0;a--){var i=e.game.queue[a].split("\t");if("SIMULTANEOUS_PICK"===i[0]){if(1!=e.app.crypto.verifyMessage(i[2],i[3],e.game.players[i[1]-1]))return console.log("SIG DOES NOT VERIFY "+i[2]+" / "+i[3]+" / "+e.game.players[i[1]-1]),0;r.push(i[1]),n.push(i[2])}else if("SIMULTANEOUS_PICK_END"===i[0])break}for(var o=1,s=1;s<=e.game.players.length;s++){for(var c=0,l=0;l<r.length;l++)r[l]==s&&(c=1,e.game.player);if(0==c){o=0;break}}if(0==o)return 0;if(0==e.game.spick_done){var u=e.app.crypto.signMessage(e.game.spick_card,e.app.wallet.returnPrivateKey()),d=e.game.spick_hash,h=e.app.crypto.signMessage(d,e.app.wallet.returnPrivateKey());return e.addMove("SIMULTANEOUS_PICK\t"+e.game.player+"\t"+d+"\t"+h),e.addMove("SIMULTANEOUS_PICK\t"+e.game.player+"\t"+e.game.spick_card+"\t"+u),e.game.spick_done=1,e.endTurn(),0}for(var p=1,f=1;f<=e.game.players.length;f++){for(var m=0,g=0;g<r.length;g++)r[g]==f&&m++;m<3&&(p=0)}if(0==p)return 0;e.game.state.sp=[];for(var y=1;y<=e.game.players.length;y++)for(var v="",b=0,_=0,w="",x=0;x<r.length;x++)if(r[x]==y)if(_++,0==b)v=n[x],b=1,w=e.app.crypto.hash(v);else if(2==_)w=e.app.crypto.hash(n[x]+w);else{if(w!=n[x])return alert("ERROR: Player "+y+" has submitted inconsistent hash values for their card selection. Halting."),0;e.game.state.sp[y-1]=v}for(var k=e.game.queue.length-1;k>=0&&"SIMULTANEOUS_PICK"===e.game.queue[k].split("\t")[0];k--)e.game.queue.splice(e.game.queue.length-1,1);return 0}return 1})),this.commands.push((function(e,t){if("DECKBACKUP"===t[0]){var r=parseInt(t[1]);e.old_discards=e.game.deck[r-1].discards,e.old_removed=e.game.deck[r-1].removed,e.old_cards={},e.old_crypt=[],e.old_keys=[],e.old_hand=[];for(var n=0;n<e.game.deck[r-1].crypt.length;n++)e.old_crypt[n]=e.game.deck[r-1].crypt[n],e.old_keys[n]=e.game.deck[r-1].keys[n];for(var a in e.game.deck[r-1].cards)e.old_cards[a]=e.game.deck[r-1].cards[a];for(var i=0;i<e.game.deck[r-1].hand.length;i++)e.old_hand[i]=e.game.deck[r-1].hand[i];e.game.queue.splice(e.game.queue.length-1,1)}return 1})),this.commands.push((function(e,t){if("DECKRESTORE"===t[0]){for(var r=t[1],n=e.old_crypt.length-1;n>=0;n--)e.game.deck[r-1].crypt.unshift(e.old_crypt[n]),e.game.deck[r-1].keys.unshift(e.old_keys[n]);for(var a in e.old_cards)e.game.deck[r-1].cards[a]=e.old_cards[a];for(var i=e.old_hand.length-1;i>=0;i--)e.game.deck[r-1].hand.unshift(e.old_hand[i]);e.game.deck[r-1].removed=e.old_removed,e.game.deck[r-1].discards=e.old_discards,e.old_removed={},e.old_discards={},e.old_cards={},e.old_crypt=[],e.old_keys=[],e.old_hand=[],e.game.queue.splice(e.game.queue.length-1,1)}})),this.commands.push((function(e,t){if("CARDS"===t[0]){var r=parseInt(t[1]),n=e.game.queue.length-1;e.game.queue.splice(e.game.queue.length-1,1);for(var a=0;a<parseInt(t[2]);a++)0!=e.game.player&&(e.game.deck[r-1].crypt[parseInt(t[2])-1-a]=e.game.queue[n-1-a]),e.game.queue.splice(n-1-a,1)}return 1})),this.commands.push((function(e,t){if("POOL"===t[0]){var r=t[1];for(e.resetPool(r-1);e.game.pool.length<r;)e.addPool();e.game.queue.splice(e.game.queue.length-1,1)}return 1})),this.commands.push((function(t,r){if("POOLDEAL"===r[0]){t.game.queue.splice(t.game.queue.length-1,1);for(var n=parseInt(r[1]),a=parseInt(r[2]),i=parseInt(r[3]),o=0;o<n;o++){for(var s=e.game.players.length-1;s>=0;s--)e.game.queue.push("FLIPCARD\t"+a+"\t3\t"+i+"\t"+(s+1));e.game.queue.push("FLIPRESET\t"+i)}}return 1})),this.commands.push((function(e,t){if("FLIPRESET"===t[0]){for(var r=t[1];e.game.pool.length<r;)e.addPool();e.game.pool[r-1].crypt=[],e.game.pool[r-1].keys=[],e.game.pool[r-1].decrypted=0,e.game.queue.splice(e.game.queue.length-1,1)}return 1})),this.commands.push((function(e,t){if("FLIPCARD"===t[0]){var r=t[1],n=t[2],a=t[3];if(parseInt(t[4])!=e.game.player)return 0;for(;e.game.pool.length<a;)e.addPool();e.game.turn=[],e.game.turn.push("RESOLVE");for(var i=0;i<n&&i<e.game.deck[r-1].crypt.length;i++)e.game.turn.push(e.game.deck[r-1].keys[i]);return e.game.turn.push("RESOLVEFLIP\t"+r+"\t"+n+"\t"+a),e.sendMessage("game",{}),0}return 1})),this.commands.push((function(e,t){return"OBSERVER_CHECKPOINT"===t[0]&&0==e.game.player?(e.game.halted=1,e.saveGame(e.game.id),0):1})),this.commands.push((function(e,t){if("DECK"===t[0]){var r=parseInt(t[1]),n=JSON.parse(t[2]),a=r-1;for(e.resetDeck(r-1);e.game.deck.length<r;)e.addDeck();e.game.deck[r-1].cards=n;var i=0;for(var o in e.game.deck[a].cards)e.game.deck[a].crypt[i]=e.app.crypto.stringToHex(o),i++;e.game.queue.splice(e.game.queue.length-1,1)}return 1})),this.commands.push((function(t,r){if("DECKANDENCRYPT"===r[0]){var n=parseInt(r[1]),a=parseInt(r[2]),i=JSON.parse(r[3]);for(t.resetDeck(n-1);t.game.deck.length<n;)t.addDeck();t.game.deck[n-1].cards=i;var o=0;for(var s in t.game.deck[n-1].cards)t.game.deck[n-1].crypt[o]=t.app.crypto.stringToHex(s),o++;t.game.queue.splice(t.game.queue.length-1,1);for(var c=a;c>0;c--)e.game.queue.push("DECKENCRYPT\t"+n+"\t"+c);for(var l=a;l>0;l--)e.game.queue.push("DECKXOR\t"+n+"\t"+l)}return 1})),this.commands.push((function(e,t){if("DECKXOR"===t[0]){var r=parseInt(t[1]);if(parseInt(t[2])!=e.game.player)return 0;""==e.game.deck[r-1].xor&&(e.game.deck[r-1].xor=e.app.crypto.hash(Math.random()));for(var n=0;n<e.game.deck[r-1].crypt.length;n++)e.game.deck[r-1].crypt[n]=e.app.crypto.encodeXOR(e.game.deck[r-1].crypt[n],e.game.deck[r-1].xor),e.game.deck[r-1].keys[n]=e.app.crypto.generateKeys();e.game.deck[r-1].crypt=e.shuffleArray(e.game.deck[r-1].crypt),e.game.turn=[],e.game.turn.push("RESOLVE");for(var a=0;a<e.game.deck[r-1].crypt.length;a++)e.game.turn.push(e.game.deck[r-1].crypt[a]);return e.game.turn.push("CARDS\t"+r+"\t"+e.game.deck[r-1].crypt.length),e.sendMessage("game",{}),0}return 1})),this.commands.push((function(t,r){if("DECKFLUSH"===r[0]){var n=parseInt(r[1]);"discards"==r[2]&&(e.game.deck[n].discards={}),e.game.queue.splice(qe,1)}return 1})),this.commands.push((function(e,t){if("DECKENCRYPT"===t[0]){var r=parseInt(t[1]),n=parseInt(t[2]);if(e.game.player==n){for(var a=0;a<e.game.deck[r-1].crypt.length;a++)e.game.deck[r-1].crypt[a]=e.app.crypto.decodeXOR(e.game.deck[r-1].crypt[a],e.game.deck[r-1].xor),e.game.deck[r-1].crypt[a]=e.app.crypto.encodeXOR(e.game.deck[r-1].crypt[a],e.game.deck[r-1].keys[a]);e.game.turn=[],e.game.turn.push("RESOLVE");for(var i=0;i<e.game.deck[r-1].crypt.length;i++)e.game.turn.push(e.game.deck[r-1].crypt[i]);e.game.turn.push("CARDS\t"+r+"\t"+e.game.deck[r-1].crypt.length),e.sendMessage("game",{})}return 0}return 1})),this.commands.push((function(e,t){null!==t[0]&&"null"!=t[0]||(console.log("REMOVING NULL ENTRY"),e.game.queue.splice(e.game.queue.length-1,1))})),this.commands.push((function(t,r){if("SEND"===r[0]){var n=r[1],a=r[2],i=r[3],o=r[4],s=t.game.crypto;if(r[5]&&(s=r[5]),!e.app.wallet.isOurPreferredCryptoAddress(n,s))return t.game.queue.splice(t.game.queue.length-1,1),1;for(var c="",l="",u=0;u<t.game.players.length;u++)t.game.players[u]===n&&(c=t.game.keys[u]),t.game.players[u]===a&&(l=t.game.keys[u]);console.log("SENDING FROM: "+c+" to "+l);var d=t.game.id;return t.saveGame(t.game.id),t.game.halted=1,t.crypto_transfer_manager.send(e.app,e,[c],[l],[i],o,s,(function(){return t.app.wallet.sendPayment([c],[l],[i],o,(function(e){return t.game.id!=d&&(t.game=t.loadGame(d)),t.updateLog("payments issued..."),t.game.queue.splice(t.game.queue.length-1,1),t.game.halted=0,t.saveGame(t.game.id),0==t.runQueue()&&t.processFutureMoves(),0}),s),0})),0}return 1})),this.commands.push((function(e,t){if("CRYPTOKEY"===t[0]){var r=t[1],n=t[2],a=t[3];if(console.log("CRYPTOKEY update"),e.app.crypto.verifyMessage(n,a,r)){console.log("signed");for(var i=0;i<e.game.keys.length;i++)e.game.players[i]===r&&(console.log("and key updated"),e.game.keys[i]=n)}return e.game.queue.splice(e.game.queue.length-1,1),1}return 1})),this.commands.push((function(t,r){if("RECEIVE"===r[0]){var n=r[1],a=r[2],i=r[3],o=r[4],s=t.game.crypto;r[5]&&(s=r[5]);for(var c="",l="",u=0;u<t.game.players.length;u++)t.game.players[u]===n&&(c=t.game.keys[u]),t.game.players[u]===a&&(l=t.game.keys[u]);var d=t.game.id;return t.saveGame(t.game.id),t.game.halted=1,t.crypto_transfer_manager.receive(e.app,e,[n],[a],[i],o,s,(function(){return t.app.wallet.receivePayment([c],[l],[i],o,(function(e){return t.crypto_transfer_manager.hideOverlay(),t.game.id!=d&&(t.game=t.loadGame(d)),t.updateLog("payments issued..."),t.game.queue.splice(t.game.queue.length-1,1),t.game.halted=0,t.saveGame(t.game.id),0==t.runQueue()&&t.processFutureMoves(),0}),s,-1),0})),0}})),this.commands.push((function(e,t){if("BALANCE"===t[0]){var r=[],n=parseInt(t[1]),a=t[2],i=t[3];r[0]=a,e.saveGame(e.game.id),e.game.halted=1;var o=e.game.id,s=setTimeout((function(){e.app.wallet.returnPreferredCryptoBalances(r,(function(t){for(var r=0,i=0;i<t.length;i++)t[i].address===a&&t[i].balance>=n&&(r=1,clearInterval(s));if(1==r)return e.game.id!=o&&(e.game=e.loadGame(o)),e.updateStatus(" balance adequate ... "),e.game.queue.splice(e.game.queue.length-1,1),e.game.halted=0,e.saveGame(e.game.id),0==e.runQueue()&&e.processFutureMoves(),0}),i)}),8e3);return 0}return 1}))}},{key:"doesGameExistLocally",value:function(e){if(this.app.options&&this.app.options.games)for(var t=0;t<this.app.options.games.length;t++)if(this.app.options.games[t].id===e)return 1;return 0}},{key:"returnShortGameOptionsArray",value:function(e){var t=[];for(var r in e)if(""!=e[r]){var n=1;"clock"==r&&0==e[r]&&(n=0),"observer"==r&&"enable"!=e[r]&&(n=0),"game-wizard-players-select"==r&&(n=0),"gamename"==r&&(n=0),1==n&&(t[r]=e[r])}return t}}])&&l(r.prototype,o),s&&l(r,s),q}(g);e.exports=O}).call(this,r(9))},function(e,t,r){var n=r(33),a=r(6),i=a["__core-js_shared__"]||(a["__core-js_shared__"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:r(47)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,r){var n=r(35);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){"use strict";var n=r(3);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,r){var n=r(3),a=r(20),i=r(11)("species");e.exports=function(e,t){var r,o=n(e).constructor;return void 0===o||null==(r=n(o)[i])?t:a(r)}},function(e,t,r){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(4).Buffer.isBuffer},function(e,t,r){(function(t){e.exports=function(e,r){for(var n=Math.min(e.length,r.length),a=new t(n),i=0;i<n;++i)a[i]=e[i]^r[i];return a}}).call(this,r(4).Buffer)},function(e,t,r){"use strict";var n=r(42),a=r(30);function i(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=i,i.prototype.update=function(e,t){if(e=n.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=n.join32(e,0,e.length-r,this.endian);for(var a=0;a<e.length;a+=this._delta32)this._update(e,a,a+this._delta32)}return this},i.prototype.digest=function(e){return this.update(this._pad()),a(null===this.pending),this._digest(e)},i.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var a=1;a<r;a++)n[a]=0;if(e<<=3,"big"===this.endian){for(var i=8;i<this.padLength;i++)n[a++]=0;n[a++]=0,n[a++]=0,n[a++]=0,n[a++]=0,n[a++]=e>>>24&255,n[a++]=e>>>16&255,n[a++]=e>>>8&255,n[a++]=255&e}else for(n[a++]=255&e,n[a++]=e>>>8&255,n[a++]=e>>>16&255,n[a++]=e>>>24&255,n[a++]=0,n[a++]=0,n[a++]=0,n[a++]=0,i=8;i<this.padLength;i++)n[a++]=0;return n}},function(e,t,r){"use strict";const n=r(1),a=r(189).Reporter,i=r(187).Buffer;function o(e,t){a.call(this,t),i.isBuffer(e)?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function s(e,t){if(Array.isArray(e))this.length=0,this.value=e.map((function(e){return s.isEncoderBuffer(e)||(e=new s(e,t)),this.length+=e.length,e}),this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=i.byteLength(e);else{if(!i.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}n(o,a),t.DecoderBuffer=o,o.isDecoderBuffer=function(e){if(e instanceof o)return!0;return"object"==typeof e&&i.isBuffer(e.base)&&"DecoderBuffer"===e.constructor.name&&"number"==typeof e.offset&&"number"==typeof e.length&&"function"==typeof e.save&&"function"==typeof e.restore&&"function"==typeof e.isEmpty&&"function"==typeof e.readUInt8&&"function"==typeof e.skip&&"function"==typeof e.raw},o.prototype.save=function(){return{offset:this.offset,reporter:a.prototype.save.call(this)}},o.prototype.restore=function(e){const t=new o(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,a.prototype.restore.call(this,e.reporter),t},o.prototype.isEmpty=function(){return this.offset===this.length},o.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},o.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");const r=new o(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+e,this.offset+=e,r},o.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},t.EncoderBuffer=s,s.isEncoderBuffer=function(e){if(e instanceof s)return!0;return"object"==typeof e&&"EncoderBuffer"===e.constructor.name&&"number"==typeof e.length&&"function"==typeof e.join},s.prototype.join=function(e,t){return e||(e=i.alloc(this.length)),t||(t=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(r){r.join(e,t),t+=r.length})):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):i.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e}},function(e,t,r){(function(n){function a(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(t=e.exports=r(980)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var a=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(a++,"%c"===e&&(i=a))})),e.splice(i,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=a,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(a())}).call(this,r(9))},function(e,t){e.exports=ArcadeContainerTemplate=function(e,t){return'\n    <div class="header-shim" style=""></div>\n    <div id="arcade-container" class="arcade-container"></div>\n  '}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){a(o,n,i,s,c,"next",e)}function c(e){a(o,n,i,s,c,"throw",e)}s(void 0)}))}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var a=d(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=r(1050),p=r(1051),f=r(1052),m=r(1053),g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(g,e);var t,r,n,a,u,p=l(g);function g(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),(t=p.call(this,e)).name="SaitoHeader UIComponent",t.app=e,e.BROWSER&&(t.sideMenu=new f(e)),t.initialize(e),t}return t=g,(r=[{key:"initialize",value:function(e){var t=this;s(d(g.prototype),"initialize",this).call(this,e),e.connection.on("update_balance",(function(r){t.renderCrypto(e,t)})),e.connection.on("update_identifier",(function(r){t.renderUsername(e,t)})),e.connection.on("update_email",(function(r){t.sideMenu.render(e,t)})),e.connection.on("set_preferred_crypto",(function(r){t.renderCrypto(e,t)}))}},{key:"updateIdentifier",value:function(e){try{var t=this.app.keys.returnIdentifierByPublicKey(e.wallet.returnPublicKey());t==e.wallet.returnPublicKey()||""==t||(document.getElementById("header-username").innerHTML=t)}catch(e){}}},{key:"loadBalance",value:(u=i(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r="activate "+t.ticker,!t.returnIsActivated()){e.next=7;break}return e.next=5,t.formatBalance();case 5:n=e.sent,r=n+" "+t.ticker;case 7:document.querySelector("#crypto-option-".concat(t.name)).innerHTML=r,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),function(e){return u.apply(this,arguments)})},{key:"render",value:function(e,t){try{if(null==t)return;document.getElementById("saito-header")||e.browser.addElementToDom(h(e)),this.renderPhoto(e,t),this.renderUsername(e,t),this.renderCrypto(e,t),this.sideMenu.render(e,t),m.render(e,t),m.attachEvents(e,t),this.attachEvents(e,t)}catch(e){console.log(e)}}},{key:"renderCrypto",value:(a=i(regeneratorRuntime.mark((function e(){var t,r,n,a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.app.wallet.returnInstalledCryptos(),r=this.app.wallet.returnPreferredCrypto(),e.next=5,this.app.wallet.returnPreferredCrypto().returnAddress();case 5:for(document.getElementById("profile-public-key").innerHTML=e.sent,document.querySelector("#header-token-select").innerHTML="",n='<option id="crypto-option-'.concat(r.name,'" value="').concat(r.ticker,'">... ').concat(r.ticker,"</option>"),this.app.browser.addElementToElement(n,document.querySelector("#header-token-select")),this.loadBalance(r),a=0;a<t.length;a++)(i=t[a]).name!=r.name&&(o='<option id="crypto-option-'.concat(i.name,'" value="').concat(i.ticker,'">... ').concat(i.ticker,"</option>"),this.app.browser.addElementToElement(o,document.querySelector("#header-token-select")),this.loadBalance(t[a]));this.app.browser.addElementToElement('<option id="crypto-option-add-new" value="add-new">install new crypto...</option>',document.querySelector("#header-token-select")),(s=new ModalSelectCrypto(app,r)).render(app,r),s.attachEvents(app,r),e.next=20;break;case 18:e.prev=18,e.t0=e.catch(0);case 20:case"end":return e.stop()}}),e,this,[[0,18]])}))),function(){return a.apply(this,arguments)})},{key:"renderPhoto",value:function(e,t){try{document.getElementById("header-profile-photo").src=e.keys.returnIdenticon(e.wallet.returnPublicKey())}catch(e){}}},{key:"renderUsername",value:function(e,t){try{var r=e.keys.returnIdentifierByPublicKey(e.wallet.returnPublicKey());""!=r&&r!=e.wallet.returnPublicKey()||(r="Anonymous Account"),document.getElementById("header-username").innerHTML=r}catch(e){}}},{key:"receiveEvent",value:function(e,t){}},{key:"attachEvents",value:function(e,t){var r=this;if(document){for(var n=0,a=0,o=0;o<e.modules.mods.length;o++)"Email"==e.modules.mods[o].name&&1==e.modules.mods[o].browser_active&&(n=1),"QRScanner"==e.modules.mods[o].name&&(a=1);document.querySelectorAll("#header-logo-link").forEach((function(t){t.onclick=function(t){var r=e.modules.returnActiveModule();r?e.browser.logMatomoEvent("Navigation","".concat(r.name,"HeaderNavigationClick"),"HeaderLogoHomepageLink"):(e.browser.logMatomoEvent("Navigation","UnknownModuleHeaderNavigationClick","HeaderLogoHomepageLink"),console.log("Error: No active module"))}})),document.querySelectorAll("#profile-public-key").forEach((function(e,t){e.onmouseup=function(){if(window.getSelection().toString()===e.innerHTML&&"copied..."!=e.innerHTML){document.execCommand("copy");var t=e.innerHTML;e.innerHTML="Copied",setTimeout((function(){e.innerHTML=t}),300)}}})),document.querySelectorAll("#header-token-select").forEach((function(t,n){t.onchange=function(n){if("add-new"!==t.value)e.wallet.setPreferredCrypto(t.value,1);else{var a=r.app.wallet.returnPreferredCrypto();document.querySelector("#header-token-select").value=a.name;var i=e.modules.returnModule("AppStore");i?i.openAppstoreOverlay({search:"",category:"Cryptocurrency",featured:1}):salert("We cannot install additional cryptocurrencies without AppStore installed!")}}})),document.getElementById("header-dropdown-scan-qr")&&(document.getElementById("header-dropdown-scan-qr").onclick=function(){1==a?e.modules.returnModule("QRScanner").startScanner():salert("QR Scanner not installed or disabled")}),document.getElementById("header-dropdown-my-profile")&&(document.getElementById("header-dropdown-my-profile").onclick=function(){if(1==n)for(var e=document.getElementsByClassName("email-apps-item"),t=0;t<e.length;t++)"Profile"===e[t].innerHTML&&e[t].click();else window.location="/wallet/#page=email_appspace&subpage=Profile"}),document.getElementById("header-dropdown-faucet")&&(document.getElementById("header-dropdown-faucet").onclick=function(){var t=e.wallet.createUnsignedTransaction(e.wallet.returnPublicKey(),0);t.msg.module="Reward",t.msg.action="faucet",t=e.wallet.signTransaction(t),e.network.propagateTransaction(t),salert("Faucet request sent.<br/><br/><i>(Faucet will only pay once every 24 hours)<i/>")}),document.getElementById("header-dropdown-add-contacts")&&(document.getElementById("header-dropdown-add-contacts").onclick=function(){var t=e.modules.returnModule("Tutorial");t&&t.inviteFriendsModal()}),document.getElementById("header-dropdown-reset-wallet")&&(document.getElementById("header-dropdown-reset-wallet").onclick=function(){e.wallet.resetWallet()}),document.getElementById("header-dropdown-backup-wallet")&&(document.getElementById("header-dropdown-backup-wallet").onclick=function(){e.wallet.backupWallet()}),document.getElementById("header-dropdown-settings")&&(document.getElementById("header-dropdown-settings").onclick=function(){if(1==n)for(var e=document.getElementsByClassName("email-apps-item"),t=0;t<e.length;t++)"Settings"===e[t].innerHTML&&e[t].click();else window.location="/wallet/#page=email_appspace&subpage=Settings"}),document.getElementById("header-dropdown-restore-wallet")&&(document.getElementById("header-dropdown-restore-wallet").onclick=function(){var t=i(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:document.getElementById("saito-header-file-input").addEventListener("change",(function(t){var r=t.target.files[0];e.wallet.restoreWallet(r)})),document.querySelector("#saito-header-file-input").click();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),document.querySelector(".manage-account")&&(document.querySelector(".manage-account").onclick=function(){window.location="/wallet/#page=email_appspace&subpage=Settings"})}}}])&&o(t.prototype,r),n&&o(t,n),g}(p);e.exports=g},function(e,t,r){var n=r(1095),a=r(1100);e.exports=function(e,t){var r=a(e,t);return n(r)?r:void 0}},function(e,t,r){var n=r(228),a=r(1096),i=r(1097),o=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?a(e):i(e)}},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Doctype=t.CDATA=t.Tag=t.Style=t.Script=t.Comment=t.Directive=t.Text=t.Root=t.isTag=t.ElementType=void 0,function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"}(n=t.ElementType||(t.ElementType={})),t.isTag=function(e){return e.type===n.Tag||e.type===n.Script||e.type===n.Style},t.Root=n.Root,t.Text=n.Text,t.Directive=n.Directive,t.Comment=n.Comment,t.Script=n.Script,t.Style=n.Style,t.Tag=n.Tag,t.CDATA=n.CDATA,t.Doctype=n.Doctype},function(e,t,r){"use strict";let n,a,i=r(69);class o extends i{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}removeChild(e,t){let r=this.index(e);return!t&&0===r&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),super.removeChild(e)}normalize(e,t,r){let n=super.normalize(e);if(t)if("prepend"===r)this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let e of n)e.raws.before=t.raws.before;return n}toResult(e={}){return new n(new a,this,e).stringify()}}o.registerLazyResult=e=>{n=e},o.registerProcessor=e=>{a=e},e.exports=o,o.default=o},function(e,t,r){var n=r(247),a=r(133);r(229),r(230),r(242);e.exports=ChatRoom={render:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null!=r?t.active_group=r:r=t.active_group,t.renderMode="chatroom",document.getElementById("chat-main").innerHTML="",e.browser.addElementToDom(n(r),"chat-main");var i=document.querySelector("#input.chat-room-input");for(null==i||i.value;r.txs.length>100;)r.txs.shift();for(var o=t.createMessageBlocks(r),s=document.getElementById("chat-room-content-".concat(r.id)),c=0;c<o.length;c++){var l=a(e,t,r,o[c]);if(c==o.length-1){var u="first_comment_sig";o[c].length>0&&(u=e.crypto.hash(o[c][0].transaction.sig));try{document.getElementById("chat-message-set-".concat(u)).destroy()}catch(e){}l=a(e,t,r,o[c]),s.innerHTML+=l}else s.innerHTML+=l}console.log("scrolling to the bottom!"),this.scrollToBottom(r.id)},attachEvents:function(e,t){var r=document.getElementById("input"),n=r.getAttribute("data-id");r.addEventListener("keypress",(function(a){if((13==a.which||13==a.keyCode)&&!a.shiftKey){if(a.preventDefault(),""==r.value)return;var i=t.createMessage(n,r.value);t.sendMessage(e,i),t.receiveMessage(e,i,"chatroom"),r.value="",document.querySelector("#input.chat-room-input").focus(),document.querySelector("#input.chat-room-input").select()}})),document.getElementById("back-button").onclick=function(r){t.renderMode="main",t.render(e,"main")},document.getElementById("back-button").ontouch=function(r){t.renderMode="main",t.render(e,"main")},document.querySelector(".chat-room-submit-button").onclick=function(a){if(a.preventDefault(),""!=r.value){e.browser.logMatomoEvent("Chat","ArcadeChatSendMessage","OnClick");var i=t.createMessage(n,r.value);t.sendMessage(e,i),t.receiveMessage(e,i,"chatroom"),r.value=""}},document.querySelector(".chat-room-submit-button").ontouch=function(a){if(a.preventDefault(),""!=r.value){e.browser.logMatomoEvent("Chat","ArcadeChatSendMessage","OnTouch");var i=t.createMessage(n,r.value);t.sendMessage(e,i),t.receiveMessage(e,i,"chatroom"),r.value=""}}},addMessage:function(e,t,r,n){e.modules.returnModule("Chat").receiveMessage(e,n,"chatroom");for(var a=0;a<t.groups.length;a++)t.groups[a].id===r&&(this.render(e,t,t.groups[a]),this.attachEvents(e,t),this.scrollToBottom(r))},scrollToBottom:function(e){var t=document.getElementById("chat-room-content-".concat(e));t&&(t.scrollTop=t.scrollHeight)}}},function(e,t,r){var n=r(547),a=r(549);function i(t,r){return delete e.exports[t],e.exports[t]=r,r}e.exports={Parser:n,Tokenizer:r(548),ElementType:r(101),DomHandler:a,get FeedHandler(){return i("FeedHandler",r(1193))},get Stream(){return i("Stream",r(1207))},get WritableStream(){return i("WritableStream",r(556))},get ProxyHandler(){return i("ProxyHandler",r(1209))},get DomUtils(){return i("DomUtils",r(551))},get CollectingHandler(){return i("CollectingHandler",r(1210))},DefaultHandler:a,get RssHandler(){return i("RssHandler",this.FeedHandler)},parseDOM:function(e,t){var r=new a(t);return new n(r,t).end(e),r.dom},parseFeed:function(t,r){var a=new e.exports.FeedHandler(r);return new n(a,r).end(t),a.dom},createDomStream:function(e,t,r){var i=new a(e,t,r);return new n(i,t)},EVENTS:{attribute:2,cdatastart:0,cdataend:0,text:1,processinginstruction:2,comment:1,commentend:0,closetag:1,opentag:2,opentagname:1,error:1,end:0}}},function(e,t){e.exports={Text:"text",Directive:"directive",Comment:"comment",Script:"script",Style:"style",Tag:"tag",CDATA:"cdata",Doctype:"doctype",isTag:function(e){return"tag"===e.type||"script"===e.type||"style"===e.type}}},function(e,t,r){var n=r(27),a=r(12),i=r(57);e.exports=function(e){return function(t,r,o){var s,c=n(t),l=a(c.length),u=i(o,l);if(e&&r!=r){for(;l>u;)if((s=c[u++])!=s)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===r)return e||u||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){var n=r(35);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var n=r(36),a=r(39);e.exports=function(e){return function(t,r){var i,o,s=String(a(t)),c=n(r),l=s.length;return c<0||c>=l?e?"":void 0:(i=s.charCodeAt(c))<55296||i>56319||c+1===l||(o=s.charCodeAt(c+1))<56320||o>57343?e?s.charAt(c):i:e?s.slice(c,c+2):o-56320+(i-55296<<10)+65536}}},function(e,t,r){var n=r(8),a=r(35),i=r(11)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==a(e))}},function(e,t,r){var n=r(11)("iterator"),a=!1;try{var i=[7][n]();i.return=function(){a=!0},Array.from(i,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!a)return!1;var r=!1;try{var i=[7],o=i[n]();o.next=function(){return{done:r=!0}},i[n]=function(){return o},e(i)}catch(e){}return r}},function(e,t,r){"use strict";var n=r(71),a=RegExp.prototype.exec;e.exports=function(e,t){var r=e.exec;if("function"==typeof r){var i=r.call(e,t);if("object"!=typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(e))throw new TypeError("RegExp#exec called on incompatible receiver");return a.call(e,t)}},function(e,t,r){"use strict";r(336);var n=r(22),a=r(21),i=r(7),o=r(39),s=r(11),c=r(166),l=s("species"),u=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();e.exports=function(e,t,r){var h=s(e),p=!i((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),f=p?!i((function(){var t=!1,r=/a/;return r.exec=function(){return t=!0,null},"split"===e&&(r.constructor={},r.constructor[l]=function(){return r}),r[h](""),!t})):void 0;if(!p||!f||"replace"===e&&!u||"split"===e&&!d){var m=/./[h],g=r(o,h,""[e],(function(e,t,r,n,a){return t.exec===c?p&&!a?{done:!0,value:m.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}})),y=g[0],v=g[1];n(String.prototype,e,y),a(RegExp.prototype,h,2==t?function(e,t){return v.call(e,this,t)}:function(e){return v.call(e,this)})}}},function(e,t,r){var n=r(6).navigator;e.exports=n&&n.userAgent||""},function(e,t,r){"use strict";var n=r(6),a=r(0),i=r(22),o=r(63),s=r(48),c=r(62),l=r(61),u=r(8),d=r(7),h=r(107),p=r(70),f=r(152);e.exports=function(e,t,r,m,g,y){var v=n[e],b=v,_=g?"set":"add",w=b&&b.prototype,x={},k=function(e){var t=w[e];i(w,e,"delete"==e||"has"==e?function(e){return!(y&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return y&&!u(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if("function"==typeof b&&(y||w.forEach&&!d((function(){(new b).entries().next()})))){var S=new b,E=S[_](y?{}:-0,1)!=S,A=d((function(){S.has(1)})),P=h((function(e){new b(e)})),C=!y&&d((function(){for(var e=new b,t=5;t--;)e[_](t,t);return!e.has(-0)}));P||((b=t((function(t,r){l(t,b,e);var n=f(new v,t,b);return null!=r&&c(r,g,n[_],n),n}))).prototype=w,w.constructor=b),(A||C)&&(k("delete"),k("has"),g&&k("get")),(C||E)&&k(_),y&&w.clear&&delete w.clear}else b=m.getConstructor(t,e,g,_),o(b.prototype,r),s.NEED=!0;return p(b,e),x[e]=b,a(a.G+a.W+a.F*(b!=v),x),y||m.setStrong(b,e,g),b}},function(e,t,r){for(var n,a=r(6),i=r(21),o=r(55),s=o("typed_array"),c=o("view"),l=!(!a.ArrayBuffer||!a.DataView),u=l,d=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");d<9;)(n=a[h[d++]])?(i(n.prototype,s,!0),i(n.prototype,c,!0)):u=!1;e.exports={ABV:l,CONSTR:u,TYPED:s,VIEW:c}},function(e,t,r){"use strict";e.exports=r(47)||!r(7)((function(){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete r(6)[e]}))},function(e,t,r){"use strict";var n=r(0);e.exports=function(e){n(n.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,r){"use strict";var n=r(0),a=r(20),i=r(34),o=r(62);e.exports=function(e){n(n.S,e,{from:function(e){var t,r,n,s,c=arguments[1];return a(this),(t=void 0!==c)&&a(c),null==e?new this:(r=[],t?(n=0,s=i(c,arguments[2],2),o(e,!1,(function(e){r.push(s(e,n++))}))):o(e,!1,r.push,r),new this(r))}})}},function(e,t,r){"use strict";t.randomBytes=t.rng=t.pseudoRandomBytes=t.prng=r(74),t.createHash=t.Hash=r(75),t.createHmac=t.Hmac=r(371);var n=r(808),a=Object.keys(n),i=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(a);t.getHashes=function(){return i};var o=r(374);t.pbkdf2=o.pbkdf2,t.pbkdf2Sync=o.pbkdf2Sync;var s=r(810);t.Cipher=s.Cipher,t.createCipher=s.createCipher,t.Cipheriv=s.Cipheriv,t.createCipheriv=s.createCipheriv,t.Decipher=s.Decipher,t.createDecipher=s.createDecipher,t.Decipheriv=s.Decipheriv,t.createDecipheriv=s.createDecipheriv,t.getCiphers=s.getCiphers,t.listCiphers=s.listCiphers;var c=r(825);t.DiffieHellmanGroup=c.DiffieHellmanGroup,t.createDiffieHellmanGroup=c.createDiffieHellmanGroup,t.getDiffieHellman=c.getDiffieHellman,t.createDiffieHellman=c.createDiffieHellman,t.DiffieHellman=c.DiffieHellman;var l=r(830);t.createSign=l.createSign,t.Sign=l.Sign,t.createVerify=l.createVerify,t.Verify=l.Verify,t.createECDH=r(863);var u=r(864);t.publicEncrypt=u.publicEncrypt,t.privateEncrypt=u.privateEncrypt,t.publicDecrypt=u.publicDecrypt,t.privateDecrypt=u.privateDecrypt;var d=r(867);t.randomFill=d.randomFill,t.randomFillSync=d.randomFillSync,t.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},t.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},function(e,t,r){"use strict";(function(t){void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,r,n,a){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,o,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,r)}));case 3:return t.nextTick((function(){e.call(null,r,n)}));case 4:return t.nextTick((function(){e.call(null,r,n,a)}));default:for(i=new Array(s-1),o=0;o<i.length;)i[o++]=arguments[o];return t.nextTick((function(){e.apply(null,i)}))}}}:e.exports=t}).call(this,r(9))},function(e,t,r){var n=r(2).Buffer;function a(e){n.isBuffer(e)||(e=n.from(e));for(var t=e.length/4|0,r=new Array(t),a=0;a<t;a++)r[a]=e.readUInt32BE(4*a);return r}function i(e){for(;0<e.length;e++)e[0]=0}function o(e,t,r,n,a){for(var i,o,s,c,l=r[0],u=r[1],d=r[2],h=r[3],p=e[0]^t[0],f=e[1]^t[1],m=e[2]^t[2],g=e[3]^t[3],y=4,v=1;v<a;v++)i=l[p>>>24]^u[f>>>16&255]^d[m>>>8&255]^h[255&g]^t[y++],o=l[f>>>24]^u[m>>>16&255]^d[g>>>8&255]^h[255&p]^t[y++],s=l[m>>>24]^u[g>>>16&255]^d[p>>>8&255]^h[255&f]^t[y++],c=l[g>>>24]^u[p>>>16&255]^d[f>>>8&255]^h[255&m]^t[y++],p=i,f=o,m=s,g=c;return i=(n[p>>>24]<<24|n[f>>>16&255]<<16|n[m>>>8&255]<<8|n[255&g])^t[y++],o=(n[f>>>24]<<24|n[m>>>16&255]<<16|n[g>>>8&255]<<8|n[255&p])^t[y++],s=(n[m>>>24]<<24|n[g>>>16&255]<<16|n[p>>>8&255]<<8|n[255&f])^t[y++],c=(n[g>>>24]<<24|n[p>>>16&255]<<16|n[f>>>8&255]<<8|n[255&m])^t[y++],[i>>>=0,o>>>=0,s>>>=0,c>>>=0]}var s=[0,1,2,4,8,16,32,64,128,27,54],c=function(){for(var e=new Array(256),t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var r=[],n=[],a=[[],[],[],[]],i=[[],[],[],[]],o=0,s=0,c=0;c<256;++c){var l=s^s<<1^s<<2^s<<3^s<<4;l=l>>>8^255&l^99,r[o]=l,n[l]=o;var u=e[o],d=e[u],h=e[d],p=257*e[l]^16843008*l;a[0][o]=p<<24|p>>>8,a[1][o]=p<<16|p>>>16,a[2][o]=p<<8|p>>>24,a[3][o]=p,p=16843009*h^65537*d^257*u^16843008*o,i[0][l]=p<<24|p>>>8,i[1][l]=p<<16|p>>>16,i[2][l]=p<<8|p>>>24,i[3][l]=p,0===o?o=s=1:(o=u^e[e[e[h^u]]],s^=e[e[s]])}return{SBOX:r,INV_SBOX:n,SUB_MIX:a,INV_SUB_MIX:i}}();function l(e){this._key=a(e),this._reset()}l.blockSize=16,l.keySize=32,l.prototype.blockSize=l.blockSize,l.prototype.keySize=l.keySize,l.prototype._reset=function(){for(var e=this._key,t=e.length,r=t+6,n=4*(r+1),a=[],i=0;i<t;i++)a[i]=e[i];for(i=t;i<n;i++){var o=a[i-1];i%t==0?(o=o<<8|o>>>24,o=c.SBOX[o>>>24]<<24|c.SBOX[o>>>16&255]<<16|c.SBOX[o>>>8&255]<<8|c.SBOX[255&o],o^=s[i/t|0]<<24):t>6&&i%t==4&&(o=c.SBOX[o>>>24]<<24|c.SBOX[o>>>16&255]<<16|c.SBOX[o>>>8&255]<<8|c.SBOX[255&o]),a[i]=a[i-t]^o}for(var l=[],u=0;u<n;u++){var d=n-u,h=a[d-(u%4?0:4)];l[u]=u<4||d<=4?h:c.INV_SUB_MIX[0][c.SBOX[h>>>24]]^c.INV_SUB_MIX[1][c.SBOX[h>>>16&255]]^c.INV_SUB_MIX[2][c.SBOX[h>>>8&255]]^c.INV_SUB_MIX[3][c.SBOX[255&h]]}this._nRounds=r,this._keySchedule=a,this._invKeySchedule=l},l.prototype.encryptBlockRaw=function(e){return o(e=a(e),this._keySchedule,c.SUB_MIX,c.SBOX,this._nRounds)},l.prototype.encryptBlock=function(e){var t=this.encryptBlockRaw(e),r=n.allocUnsafe(16);return r.writeUInt32BE(t[0],0),r.writeUInt32BE(t[1],4),r.writeUInt32BE(t[2],8),r.writeUInt32BE(t[3],12),r},l.prototype.decryptBlock=function(e){var t=(e=a(e))[1];e[1]=e[3],e[3]=t;var r=o(e,this._invKeySchedule,c.INV_SUB_MIX,c.INV_SBOX,this._nRounds),i=n.allocUnsafe(16);return i.writeUInt32BE(r[0],0),i.writeUInt32BE(r[3],4),i.writeUInt32BE(r[2],8),i.writeUInt32BE(r[1],12),i},l.prototype.scrub=function(){i(this._keySchedule),i(this._invKeySchedule),i(this._key)},e.exports.AES=l},function(e,t,r){var n=r(2).Buffer,a=r(173);e.exports=function(e,t,r,i){if(n.isBuffer(e)||(e=n.from(e,"binary")),t&&(n.isBuffer(t)||(t=n.from(t,"binary")),8!==t.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var o=r/8,s=n.alloc(o),c=n.alloc(i||0),l=n.alloc(0);o>0||i>0;){var u=new a;u.update(l),u.update(e),t&&u.update(t),l=u.digest();var d=0;if(o>0){var h=s.length-o;d=Math.min(o,l.length),l.copy(s,h,0,d),o-=d}if(d<l.length&&i>0){var p=c.length-i,f=Math.min(i,l.length-d);l.copy(c,p,d,d+f),i-=f}}return l.fill(0),{key:s,iv:c}}},function(e,t,r){"use strict";var n=t;n.version=r(834).version,n.utils=r(31),n.rand=r(182),n.curve=r(389),n.curves=r(185),n.ec=r(845),n.eddsa=r(849)},function(e,t,r){"use strict";var n=r(16),a=r(31),i=a.getNAF,o=a.getJSF,s=a.assert;function c(e,t){this.type=e,this.p=new n(t.p,16),this.red=t.prime?n.red(t.prime):n.mont(this.p),this.zero=new n(0).toRed(this.red),this.one=new n(1).toRed(this.red),this.two=new n(2).toRed(this.red),this.n=t.n&&new n(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function l(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=c,c.prototype.point=function(){throw new Error("Not implemented")},c.prototype.validate=function(){throw new Error("Not implemented")},c.prototype._fixedNafMul=function(e,t){s(e.precomputed);var r=e._getDoubles(),n=i(t,1,this._bitLength),a=(1<<r.step+1)-(r.step%2==0?2:1);a/=3;var o,c,l=[];for(o=0;o<n.length;o+=r.step){c=0;for(var u=o+r.step-1;u>=o;u--)c=(c<<1)+n[u];l.push(c)}for(var d=this.jpoint(null,null,null),h=this.jpoint(null,null,null),p=a;p>0;p--){for(o=0;o<l.length;o++)(c=l[o])===p?h=h.mixedAdd(r.points[o]):c===-p&&(h=h.mixedAdd(r.points[o].neg()));d=d.add(h)}return d.toP()},c.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var a=n.points,o=i(t,r,this._bitLength),c=this.jpoint(null,null,null),l=o.length-1;l>=0;l--){for(var u=0;l>=0&&0===o[l];l--)u++;if(l>=0&&u++,c=c.dblp(u),l<0)break;var d=o[l];s(0!==d),c="affine"===e.type?d>0?c.mixedAdd(a[d-1>>1]):c.mixedAdd(a[-d-1>>1].neg()):d>0?c.add(a[d-1>>1]):c.add(a[-d-1>>1].neg())}return"affine"===e.type?c.toP():c},c.prototype._wnafMulAdd=function(e,t,r,n,a){var s,c,l,u=this._wnafT1,d=this._wnafT2,h=this._wnafT3,p=0;for(s=0;s<n;s++){var f=(l=t[s])._getNAFPoints(e);u[s]=f.wnd,d[s]=f.points}for(s=n-1;s>=1;s-=2){var m=s-1,g=s;if(1===u[m]&&1===u[g]){var y=[t[m],null,null,t[g]];0===t[m].y.cmp(t[g].y)?(y[1]=t[m].add(t[g]),y[2]=t[m].toJ().mixedAdd(t[g].neg())):0===t[m].y.cmp(t[g].y.redNeg())?(y[1]=t[m].toJ().mixedAdd(t[g]),y[2]=t[m].add(t[g].neg())):(y[1]=t[m].toJ().mixedAdd(t[g]),y[2]=t[m].toJ().mixedAdd(t[g].neg()));var v=[-3,-1,-5,-7,0,7,5,1,3],b=o(r[m],r[g]);for(p=Math.max(b[0].length,p),h[m]=new Array(p),h[g]=new Array(p),c=0;c<p;c++){var _=0|b[0][c],w=0|b[1][c];h[m][c]=v[3*(_+1)+(w+1)],h[g][c]=0,d[m]=y}}else h[m]=i(r[m],u[m],this._bitLength),h[g]=i(r[g],u[g],this._bitLength),p=Math.max(h[m].length,p),p=Math.max(h[g].length,p)}var x=this.jpoint(null,null,null),k=this._wnafT4;for(s=p;s>=0;s--){for(var S=0;s>=0;){var E=!0;for(c=0;c<n;c++)k[c]=0|h[c][s],0!==k[c]&&(E=!1);if(!E)break;S++,s--}if(s>=0&&S++,x=x.dblp(S),s<0)break;for(c=0;c<n;c++){var A=k[c];0!==A&&(A>0?l=d[c][A-1>>1]:A<0&&(l=d[c][-A-1>>1].neg()),x="affine"===l.type?x.mixedAdd(l):x.add(l))}}for(s=0;s<n;s++)d[s]=null;return a?x:x.toP()},c.BasePoint=l,l.prototype.eq=function(){throw new Error("Not implemented")},l.prototype.validate=function(){return this.curve.validate(this)},c.prototype.decodePoint=function(e,t){e=a.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?s(e[e.length-1]%2==0):7===e[0]&&s(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},l.prototype.encodeCompressed=function(e){return this.encode(e,!0)},l.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},l.prototype.encode=function(e,t){return a.encode(this._encode(t),e)},l.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},l.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},l.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,a=0;a<t;a+=e){for(var i=0;i<e;i++)n=n.dbl();r.push(n)}return{step:e,points:r}},l.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),a=1;a<r;a++)t[a]=t[a-1].add(n);return{wnd:e,points:t}},l.prototype._getBeta=function(){return null},l.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}},function(e,t,r){var n=r(853),a=r(860),i=r(861),o=r(180),s=r(374),c=r(2).Buffer;function l(e){var t;"object"!=typeof e||c.isBuffer(e)||(t=e.passphrase,e=e.key),"string"==typeof e&&(e=c.from(e));var r,l,u=i(e,t),d=u.tag,h=u.data;switch(d){case"CERTIFICATE":l=n.certificate.decode(h,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(l||(l=n.PublicKey.decode(h,"der")),r=l.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPublicKey.decode(l.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return l.subjectPrivateKey=l.subjectPublicKey,{type:"ec",data:l};case"1.2.840.10040.4.1":return l.algorithm.params.pub_key=n.DSAparam.decode(l.subjectPublicKey.data,"der"),{type:"dsa",data:l.algorithm.params};default:throw new Error("unknown key id "+r)}case"ENCRYPTED PRIVATE KEY":h=function(e,t){var r=e.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(e.algorithm.decrypt.kde.kdeparams.iters.toString(),10),i=a[e.algorithm.decrypt.cipher.algo.join(".")],l=e.algorithm.decrypt.cipher.iv,u=e.subjectPrivateKey,d=parseInt(i.split("-")[1],10)/8,h=s.pbkdf2Sync(t,r,n,d,"sha1"),p=o.createDecipheriv(i,h,l),f=[];return f.push(p.update(u)),f.push(p.final()),c.concat(f)}(h=n.EncryptedPrivateKey.decode(h,"der"),t);case"PRIVATE KEY":switch(r=(l=n.PrivateKey.decode(h,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPrivateKey.decode(l.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:l.algorithm.curve,privateKey:n.ECPrivateKey.decode(l.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return l.algorithm.params.priv_key=n.DSAparam.decode(l.subjectPrivateKey,"der"),{type:"dsa",params:l.algorithm.params};default:throw new Error("unknown key id "+r)}case"RSA PUBLIC KEY":return n.RSAPublicKey.decode(h,"der");case"RSA PRIVATE KEY":return n.RSAPrivateKey.decode(h,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:n.DSAPrivateKey.decode(h,"der")};case"EC PRIVATE KEY":return{curve:(h=n.ECPrivateKey.decode(h,"der")).parameters.value,privateKey:h.privateKey};default:throw new Error("unknown key type "+d)}}e.exports=l,l.signature=n.signature},function(e,t,r){(function(e,t){(function(){var r,n,a,i;for(a=(null!==e?e.exports:void 0)||(window.Base58={}),r="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",n={},i=0;i<r.length;)n[r.charAt(i)]=i,i++;a.encode=function(e){var t,n,a;if(0===e.length)return"";for(i=void 0,a=void 0,n=[0],i=0;i<e.length;){for(a=0;a<n.length;)n[a]<<=8,a++;for(n[0]+=e[i],t=0,a=0;a<n.length;)n[a]+=t,t=n[a]/58|0,n[a]%=58,++a;for(;t;)n.push(t%58),t=t/58|0;i++}for(i=0;0===e[i]&&i<e.length-1;)n.push(0),i++;return n.reverse().map((function(e){return r[e]})).join("")},a.decode=function(e){var r,a,o,s;if(0===e.length)return new("undefined"!=typeof Uint8Array&&null!==Uint8Array?Uint8Array:t)(0);for(i=void 0,s=void 0,r=[0],i=0;i<e.length;){if(!((a=e[i])in n))throw"Base58.decode received unacceptable input. Character '"+a+"' is not in the Base58 alphabet.";for(s=0;s<r.length;)r[s]*=58,s++;for(r[0]+=n[a],o=0,s=0;s<r.length;)r[s]+=o,o=r[s]>>8,r[s]&=255,++s;for(;o;)r.push(255&o),o>>=8;i++}for(i=0;"1"===e[i]&&i<e.length-1;)r.push(0),i++;return new("undefined"!=typeof Uint8Array&&null!==Uint8Array?Uint8Array:t)(r.reverse())}}).call(this)}).call(this,r(66)(e),r(4).Buffer)},function(e,t){},function(e,t,r){"use strict";var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n)return n;throw new Error("unable to locate global object")}();e.exports=t=n.fetch,n.fetch&&(t.default=n.fetch.bind(n)),t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response},function(e,t){t.encode=function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t},t.decode=function(e){for(var t={},r=e.split("&"),n=0,a=r.length;n<a;n++){var i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},function(e,t){e.exports=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){(function(n){function a(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(t=e.exports=r(993)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var a=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(a++,"%c"===e&&(i=a))})),e.splice(i,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=a,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(a())}).call(this,r(9))},function(e,t,r){"use strict";(function(t){const n=r(17),a=r(10),i=t.versions.node.split("."),o=Number.parseInt(i[0],10),s=Number.parseInt(i[1],10),c=Number.parseInt(i[2],10);function l(){if(o>10)return!0;if(10===o){if(s>5)return!0;if(5===s&&c>=0)return!0}return!1}function u(e,t){const r=a.resolve(e).split(a.sep).filter(e=>e),n=a.resolve(t).split(a.sep).filter(e=>e);return r.reduce((e,t,r)=>e&&n[r]===t,!0)}function d(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}e.exports={checkPaths:function(e,t,r,a){!function(e,t,r){l()?n.stat(e,{bigint:!0},(e,a)=>{if(e)return r(e);n.stat(t,{bigint:!0},(e,t)=>e?"ENOENT"===e.code?r(null,{srcStat:a,destStat:null}):r(e):r(null,{srcStat:a,destStat:t}))}):n.stat(e,(e,a)=>{if(e)return r(e);n.stat(t,(e,t)=>e?"ENOENT"===e.code?r(null,{srcStat:a,destStat:null}):r(e):r(null,{srcStat:a,destStat:t}))})}(e,t,(n,i)=>{if(n)return a(n);const{srcStat:o,destStat:s}=i;return s&&s.ino&&s.dev&&s.ino===o.ino&&s.dev===o.dev?a(new Error("Source and destination must not be the same.")):o.isDirectory()&&u(e,t)?a(new Error(d(e,t,r))):a(null,{srcStat:o,destStat:s})})},checkPathsSync:function(e,t,r){const{srcStat:a,destStat:i}=function(e,t){let r,a;r=l()?n.statSync(e,{bigint:!0}):n.statSync(e);try{a=l()?n.statSync(t,{bigint:!0}):n.statSync(t)}catch(e){if("ENOENT"===e.code)return{srcStat:r,destStat:null};throw e}return{srcStat:r,destStat:a}}(e,t);if(i&&i.ino&&i.dev&&i.ino===a.ino&&i.dev===a.dev)throw new Error("Source and destination must not be the same.");if(a.isDirectory()&&u(e,t))throw new Error(d(e,t,r));return{srcStat:a,destStat:i}},checkParentPaths:function e(t,r,i,o,s){const c=a.resolve(a.dirname(t)),u=a.resolve(a.dirname(i));if(u===c||u===a.parse(u).root)return s();l()?n.stat(u,{bigint:!0},(n,a)=>n?"ENOENT"===n.code?s():s(n):a.ino&&a.dev&&a.ino===r.ino&&a.dev===r.dev?s(new Error(d(t,i,o))):e(t,r,u,o,s)):n.stat(u,(n,a)=>n?"ENOENT"===n.code?s():s(n):a.ino&&a.dev&&a.ino===r.ino&&a.dev===r.dev?s(new Error(d(t,i,o))):e(t,r,u,o,s))},checkParentPathsSync:function e(t,r,i,o){const s=a.resolve(a.dirname(t)),c=a.resolve(a.dirname(i));if(c===s||c===a.parse(c).root)return;let u;try{u=l()?n.statSync(c,{bigint:!0}):n.statSync(c)}catch(e){if("ENOENT"===e.code)return;throw e}if(u.ino&&u.dev&&u.ino===r.ino&&u.dev===r.dev)throw new Error(d(t,i,o));return e(t,r,c,o)},isSrcSubdir:u}}).call(this,r(9))},function(e,t,r){"use strict";const n=r(25).fromCallback,a=r(1015);e.exports={remove:n(a),removeSync:a.sync}},function(e,t){e.exports=ArcadeInviteTemplate=function(e,t,n,a){for(var i=n.msg.game,o=0;o<e.modules.mods.length;o++)e.modules.mods[o].name===i&&(i=e.modules.mods[o].returnSlug());var s="open-invite",c=0;if(n.isMine&&(s="my-invite"),n.msg&&(n.msg.options["game-wizard-players-select"]<=n.msg.players.length&&(c=1),n.msg.players_needed<=n.msg.players.length&&(c=1)),e.options&&e.options.games)for(var l=0;l<e.options.games.length;l++)1==e.options.games[l].initializing&&(c=0);n.msg.players_needed>4||n.msg.players_needed;var u='<div class="playerInfo" style="">';if(n.msg.players.length>n.msg.players_needed)for(var d=0;d<n.msg.players.length;d++){var h=e.keys.returnIdenticon(n.msg.players[d]);u+='<div class="player-slot tip id-'.concat(n.msg.players[d],'"><img class="identicon" src="').concat(h,'"><div class="tiptext">').concat(e.browser.returnAddressHTML(n.msg.players[d]),"</div></div>")}else for(var p=0;p<n.msg.players_needed;p++){if(!(p<4)){u+='<div style="color:#f5f5f59c;margin-left:0.2em;" class="player-slot-ellipsis fas fa-ellipsis-h"></div>';break}if(p<n.msg.players.length){var f=e.keys.returnIdenticon(n.msg.players[p]);u+='<div class="player-slot tip id-'.concat(n.msg.players[p],'"><img class="identicon" src="').concat(f,'"><div class="tiptext">').concat(e.browser.returnAddressHTML(n.msg.players[p]),"</div></div>")}else u+='<div class="player-slot identicon-empty"></div>'}if(u+="</div>",document.getElementById("invite-".concat(n.transaction.sig)))return"";var m='\n    <div id="invite-'.concat(n.transaction.sig,'" class="arcade-tile i_').concat(a," ").concat(s,'" style="background-image: url(\'/').concat(i,'/img/arcade.jpg\');">\n      <div class="invite-tile-wrapper">\n        <div class="game-inset-img" style="background-image: url(\'/').concat(i,'/img/arcade.jpg\');"></div>\n        <div class="invite-col-2">\n          <div class="gameName">').concat(n.msg.game,'</div>\n          <div class="gamePlayers">').concat(u,'</div>\n        </div>\n        <div class="gameShortDescription">').concat(r(e,n),'</div>\n\t<div class="gameButtons">\n    ');return n.isMine?(1==c&&(m+='<button data-sig="'.concat(n.transaction.sig,'" data-cmd="continue" class="button invite-tile-button">CONTINUE</button>')),m+='<button data-sig="'.concat(n.transaction.sig,'" data-cmd="cancel" class="button invite-tile-button">CANCEL</button>')):1==c?(m+='<button data-sig="'.concat(n.transaction.sig,'" data-cmd="continue" class="button invite-tile-button">WATCH</button>'),m+='<button data-sig="'.concat(n.transaction.sig,'" data-cmd="cancel" class="button invite-tile-button">CANCEL</button>')):m+='<button data-sig="'.concat(n.transaction.sig,'" data-cmd="join" class="button invite-tile-button invite-tile-button-join">JOIN</button>'),m+="\n        </div>\n      </div>\n    </div>\n    "};var r=function(e,t){var r="";if(t.msg){var n=e.modules.returnModule(t.msg.game);if(n){var a=n.returnShortGameOptionsArray(t.msg.options);for(var i in a){r+='<div class="gameShortDescriptionRow"><div class="gameShortDescriptionKey">'.concat(i.replace(/_/g," "),': </div><div class="gameShortDescriptionValue">').concat(a[i],"</div></div>")}}}return r}},function(e,t,r){function n(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var a=r(210),i=r(211),o=r(213),s=function(){var e={};return document.querySelectorAll("form input, form select").forEach((function(t){"checkbox"==t.type?t.checked&&(e[t.name]=1):e[t.name]=t.value})),e};e.exports=ArcadeGameDetails={render:function(e,t,r){var n=e.modules.returnModule(r.msg.game);document.getElementById("background-shim")||e.browser.addElementToDom('<div id="background-shim" class="background-shim" style=""><div id="background-shim-cover" class="background-shim-cover"></div></div>'),t.overlay.showOverlay(e,t,a(e,t,r),(function(){document.querySelector(".background-shim").destroy()})),t.meta_overlay=new i(e,n),t.meta_overlay.render(e,n),t.meta_overlay.attachEvents(e,n);var o="/"+n.returnSlug()+"/img/arcade.jpg";if(document.querySelector(".game-image").src=o,document.querySelector(".background-shim").style.backgroundImage="url("+o+")",document.querySelector(".game-wizard-advanced-options-overlay").style.display="none",document.querySelector(".game-wizard-options-toggle").onclick=function(r){t.meta_overlay.showOverlay(e,n,n.returnGameOptionsHTML()),document.querySelector(".game-wizard-advanced-options-overlay").style.display="block";try{document.getElementById("game-wizard-advanced-return-btn")&&(document.querySelector(".game-wizard-advanced-return-btn").onclick=function(e){document.getElementById("game-wizard-advanced-options-overlay").style.display="none"})}catch(e){}},n.status){var s="\n      <h3>Development Status: ".concat(n.status,'.</h3>\n      <p>\n      Saito is a community project. Our games are under constant development. If you would like to participate email developers@saito.io, connect on <a href="https://t.me/SaitoIO" target="_blank">Telegram</a> or head over to <a href="https://github.com/saitotech" target="_blank">Github</a> to get started. \n      </p>');document.querySelector(".game-wizard-status").innerHTML=s}n.publisher_message&&(document.querySelector(".game-wizard-publisher-message").innerHTML='<span style="font-weight:bold">NOTE: </span>'.concat(n.publisher_message)),document.querySelector(".game-wizard-title").innerHTML=n.name,document.querySelector(".game-wizard-description").innerHTML=n.description,setTimeout((function(){document.querySelector(".game-wizard-players-select").innerHTML="";for(var e=n.minPlayers;e<=n.maxPlayers;e++){var t=document.createElement("option");t.text=e+" player",t.value=e,document.querySelector(".game-wizard-players-select").add(t)}}),100);var c=document.querySelector(".game-wizard-advanced-box"),l=document.querySelector(".game-overlay"),u=document.querySelector(".game-overlay-backdrop"),d=document.querySelector(".game-wizard-advanced-options-overlay");d.appendChild(l),d.appendChild(u),c&&d.appendChild(c)},attachEvents:function(e,t){document.getElementById("game-invite-btn").addEventListener("click",function(){var r,a=(r=regeneratorRuntime.mark((function r(n){var a,i,c,l,u,d,h,p,f,m,g;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,""==(a=s()).crypto){r.next=23;break}if(!(a.stake>0)){r.next=23;break}if(i=e.wallet.returnCryptoModuleByTicker(a.crypto).ticker,c=e.wallet.returnPreferredCrypto().ticker,i!==c){r.next=21;break}return l=e.wallet.returnPreferredCrypto().returnAddress(),(u=new o(e)).balance(e,t,l,a.crypto,(function(){})),r.next=12,e.wallet.returnPreferredCryptoBalances([l],null,a.crypto);case 12:for(d=r.sent,u.hideOverlay(),h=0,p=0;p<d.length;p++)d[p].address==l&&parseFloat(d[p].balance)>=parseFloat(a.stake)&&(h=1);if(0!=h){r.next=19;break}return salert("You don't have enough "+a.crypto+" to create this game!"),r.abrupt("return");case 19:r.next=23;break;case 21:return salert("".concat(a.crypto," must be set as your preferred crypto to create a game using ").concat(a.crypto)),r.abrupt("return");case 23:if(e.browser.logMatomoEvent("Arcade","ArcadeCreateNewInvite",a.gamename),f=e.modules.returnModule(a.gamename),m={name:f.name,slug:f.returnSlug(),options:f.returnFormattedGameOptions(a),options_html:f.returnGameRowOptionsHTML(a),players_needed:document.querySelector(".game-wizard-players-select").value},1!=document.querySelector(".game-wizard-players-select").value){r.next=32;break}return t.launchSinglePlayerGame(e,m),r.abrupt("return");case 32:t.overlay.hideOverlay(),document.getElementById("background-shim").destroy(),g=t.createOpenTransaction(m),t.app.network.propagateTransaction(g),t.renderArcadeMain(e,t);case 37:r.next=42;break;case 39:r.prev=39,r.t0=r.catch(0),alert("error: "+r.t0);case 42:return r.abrupt("return",!1);case 43:case"end":return r.stop()}}),r,null,[[0,39]])})),function(){var e=this,t=arguments;return new Promise((function(a,i){var o=r.apply(e,t);function s(e){n(o,a,i,s,c,"next",e)}function c(e){n(o,a,i,s,c,"throw",e)}s(void 0)}))});return function(e){return a.apply(this,arguments)}}())}}},function(e,t,r){var n=r(227),a=r(1089);e.exports=ChatBoxMessageBlockTemplate=function(e,t,r,i){var o="",s="",c="",l=(new Date).getTime(),u="others",d="",h=0;if(2==r.members.length?(o=r.members[0]!=e.wallet.returnPublicKey()?r.members[0]:r.members[1],publickey=o):(o=r.id,publickey=r.members[0]),s=e.keys.returnIdenticon(o),c=e.keys.returnIdenticonColor(o),keyHTML=e.browser.returnAddressHTML(o),0==i.length)return"";for(var p=[],f="",m=0;m<i.length;m++){var g=i[m];0==m&&(d=e.crypto.hash(g.transaction.sig)),"others"==u&&g.transaction.from[0].add==e.wallet.returnPublicKey()&&(u="myself");var y=g.returnMessage();document.getElementById(g.transaction.sig)||p.includes(g.transaction.sig)||(f+=n(e,t,y.message,g.transaction.sig,u),l=g.transaction.ts,publickey=g.transaction.from[0].add,s=e.keys.returnIdenticon(publickey),c=e.keys.returnIdenticonColor(publickey),keyHTML=e.browser.returnAddressHTML(publickey),p.push(g.transaction.sig),h++)}var v=t.app.browser.formatDate(l);return 0==h?"":'\n    <div class="chat-message-set chat-message-set-'.concat(u," chat-message-set-").concat(d,'" id="chat-message-set-').concat(d,'">\n      <img src="').concat(s,'" class="chat-room-message-identicon"/>\n      <div class="chat-message-set-content chat-message-set-content-').concat(u,'">\n        <div class="chat-message-header">\n              <p class="chat-message-author">').concat(keyHTML,'</p>\n              <p class="chat-message-timestamp">').concat(v.hours,":").concat(v.minutes,'</p>\n        </div>\n        <div class="chat-box-message-container chat-box-message-container-').concat(u,'" style="border-color:').concat(c,';">\n          ').concat(a.emojify(f),"\n        </div>\n      </div>\n    </div>\n  ")}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,r){"use strict";let n=r(136);class a extends n{constructor(e){e&&void 0!==e.value&&"string"!=typeof e.value&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}}e.exports=a,a.default=a},function(e,t,r){"use strict";let{isClean:n,my:a}=r(234),i=r(233),o=r(464),s=r(235);class c{constructor(e={}){this.raws={},this[n]=!1,this[a]=!0;for(let t in e)if("nodes"===t){this.nodes=[];for(let r of e[t])"function"==typeof r.clone?this.append(r.clone()):this.append(r)}else this[t]=e[t]}error(e,t={}){if(this.source){let r=this.positionBy(t);return this.source.input.error(e,r.line,r.column,t)}return new i(e)}warn(e,t,r){let n={node:this};for(let e in r)n[e]=r[e];return e.warn(t,n)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}toString(e=s){e.stringify&&(e=e.stringify);let t="";return e(this,e=>{t+=e}),t}assign(e={}){for(let t in e)this[t]=e[t];return this}clone(e={}){let t=function e(t,r){let n=new t.constructor;for(let a in t){if(!Object.prototype.hasOwnProperty.call(t,a))continue;if("proxyCache"===a)continue;let i=t[a],o=typeof i;"parent"===a&&"object"===o?r&&(n[a]=r):"source"===a?n[a]=i:Array.isArray(i)?n[a]=i.map(t=>e(t,n)):("object"===o&&null!==i&&(i=e(i)),n[a]=i)}return n}(this);for(let r in e)t[r]=e[r];return t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}replaceWith(...e){if(this.parent){let t=this,r=!1;for(let n of e)n===this?r=!0:r?(this.parent.insertAfter(t,n),t=n):this.parent.insertBefore(t,n);r||this.remove()}return this}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}before(e){return this.parent.insertBefore(this,e),this}after(e){return this.parent.insertAfter(this,e),this}root(){let e=this;for(;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}raw(e,t){return(new o).raw(this,e,t)}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}toJSON(e,t){let r={},n=null==t;t=t||new Map;let a=0;for(let e in this){if(!Object.prototype.hasOwnProperty.call(this,e))continue;if("parent"===e||"proxyCache"===e)continue;let n=this[e];if(Array.isArray(n))r[e]=n.map(e=>"object"==typeof e&&e.toJSON?e.toJSON(null,t):e);else if("object"==typeof n&&n.toJSON)r[e]=n.toJSON(null,t);else if("source"===e){let i=t.get(n.input);null==i&&(i=a,t.set(n.input,a),a++),r[e]={inputId:i,start:n.start,end:n.end}}else r[e]=n}return n&&(r.inputs=[...t.keys()].map(e=>e.toJSON())),r}positionInside(e){let t=this.toString(),r=this.source.start.column,n=this.source.start.line;for(let a=0;a<e;a++)"\n"===t[a]?(r=1,n+=1):r+=1;return{line:n,column:r}}positionBy(e){let t=this.source.start;if(e.index)t=this.positionInside(e.index);else if(e.word){let r=this.toString().indexOf(e.word);-1!==r&&(t=this.positionInside(r))}return t}getProxyProcessor(){return{set:(e,t,r)=>(e[t]===r||(e[t]=r,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0),get:(e,t)=>"proxyOf"===t?e:"root"===t?()=>e.root().toProxy():e[t]}}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}markDirty(){if(this[n]){this[n]=!1;let e=this;for(;e=e.parent;)e[n]=!1}}get proxyOf(){return this}}e.exports=c,c.default=c},function(e,t,r){"use strict";let n=r(136);class a extends n{constructor(e){super(e),this.type="comment"}}e.exports=a,a.default=a},function(e,t,r){var n=r(255),a=r(257),i=r(261),o=r(263);r(265);e.exports=EmailHeader={render:function(e,t){switch(t.header=this,e.browser.parseHash(window.location.hash).page){case"email_list":n.render(e,t),n.attachEvents(e,t);break;case"email_detail":a.render(e,t),a.attachEvents(e,t);break;case"email_form":i.render(e,t),i.attachEvents(e,t);break;case"email_appspace":case"crypto_page":o.render(e,t),o.attachEvents(e,t)}t.cacheAndRenderPreferredCryptoBalance()},attachEvents:function(e,t){var r=document.getElementById("email-bars-icon");r&&r.addEventListener("click",(function(e){var t=document.querySelector("#mobile.email-bars-menu");t.style.display="block"==t.style.display?"none":"block"})),document.querySelectorAll("#email-form-back-button").forEach((function(e,t){e.onclick=function(){window.history.back()}}))}}},function(e,t){e.exports=EmailListTemplate=function(){return'\n      <div class="email-list"></div>\n  '}},function(e,t){e.exports=elParser=function(e){return(new DOMParser).parseFromString(e,"text/html").body.firstChild}},function(e,t,r){function n(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(a,i){var o=e.apply(t,r);function s(e){n(o,a,i,s,c,"next",e)}function c(e){n(o,a,i,s,c,"throw",e)}s(void 0)}))}}var i=r(5),o=r(46),s=r(289),c=r(290);e.exports=PostView={render:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.overlay=new o(e,t),t.overlay.render(e,t),t.overlay.attachEvents(e,t),t.comments=[];var a='SELECT id, tx FROM posts WHERE thread_id = "'.concat(n,'" ORDER BY ts ASC');t.sendPeerDatabaseRequestWithFilter("Post",a,(function(a){if(a&&a.rows){for(var o=0;o<a.rows.length;o++){for(var s=1,c=new i.transaction(JSON.parse(a.rows[o].tx)),l=c.returnMessage(),u=0;u<t.comments.length;u++)t.comments[u].transaction.sig==c.transaction.sig&&(s=0);if(c.transaction.sig==n){s=0;try{document.getElementById("post-view-parent-comment").innerHTML=l.comment;var d=document.getElementById("post-view-gallery"),h="";if(l.images.length>0){for(var p=0;p<c.msg.images.length;p++)h+='<img class="post-view-gallery-image" src="'.concat(c.msg.images[p],'" />');d.innerHTML=h,d.style.display="block"}}catch(e){console.log("error showing comment or gallery")}}1==s&&(c.originalSig=a.rows[o].id,t.comments.push(c))}for(var f=0;f<t.comments.length;f++)r.addComment(e,t,t.comments[f]);r.attachEvents(e,t,n)}})),t.overlay.showOverlay(e,t,s(e,t,n),(function(){}))},rerender:function(e,t,r){},attachEvents:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";document.querySelector(".post-submit-btn").onclick=function(a){var i=document.querySelector(".post-view-textarea").innerHTML;if(document.querySelector(".post-view-textarea").innerHTML="",""!=i){var o=t.createCommentTransaction(n,i);e.network.propagateTransaction(o),o.children=0,t.comments.push(o),r.addComment(e,t,o),r.attachEvents(e,t,n)}},document.querySelectorAll(".post-view-edit").forEach((function(a){a.onclick=function(i){console.log("********* post-view-edit onclick ********");var o=a.getAttribute("data-id");document.querySelectorAll(".post-view-parent-comment").forEach((function(a){if(a.getAttribute("data-id")===o&&"edit"!=a.getAttribute("mode")){a.setAttribute("mode","edit");var i='\n                <textarea data-id="'.concat(o,'" id="textedit-field-').concat(o,'">').concat(a.innerHTML,'</textarea>\n                <button id="edit-button-').concat(o,'" data-id="').concat(o,'" type="button" class="comment-edit-button" value="Edit Post">edit comment</button>\n              ');a.innerHTML=i,document.getElementById("edit-button-".concat(o)).onclick=function(i){for(var s=document.querySelector("#textedit-field-".concat(o)).value,c=null,l=0;l<t.posts.length;l++)t.posts[l].transaction.sig===o&&(c=t.posts[l]);var u=t.createEditPostTransaction(c.msg.title,s,c.msg.link,c.msg.forum,c.msg.images,o);e.network.propagateTransaction(u);for(var d=0;d<t.posts.length;d++)t.posts[d].transaction.sig===o&&(u.children=t.posts[d].children,t.posts[d]=u);a.setAttribute("mode","read"),a.innerHTML=s,document.querySelectorAll(".post-view-parent-comment, .post-view-edit").forEach((function(e){e.setAttribute("data-id",u.transaction.sig)})),r.attachEvents(e,t,n)}}}))}}));try{document.querySelectorAll(".post-view-comment-edit").forEach((function(r){r.onclick=function(n){var a=r.getAttribute("data-id");document.querySelectorAll(".post-view-comment-text").forEach((function(r){if(r.getAttribute("data-id")===a){var n='\n                <textarea data-id="'.concat(a,'" id="textedit-field-').concat(a,'">').concat(r.innerHTML,'</textarea>\n                <button id="edit-button-').concat(a,'" data-id="').concat(a,'" type="button" class="comment-edit-button" value="Edit Comment">edit comment</button>\n              ');r.innerHTML=n,document.getElementById("edit-button-".concat(a)).onclick=function(n){var i=document.querySelector("#textedit-field-".concat(a)).value,o=t.createEditTransaction(a,i);e.network.propagateTransaction(o);for(var s=0;s<t.comments.length;s++)t.comments[s].transaction.sig===a&&(o.children=t.comments[s].children,t.comments[s]=o);for(var c=0;c<t.posts.length;c++)t.posts[c].transaction.sig===a&&(o.children=t.posts[c].children,t.comments[c]=o);r.innerHTML=i}}}))}}))}catch(e){}document.querySelectorAll(".post-view-report").forEach((function(r){r.onclick=function(){var n=a(regeneratorRuntime.mark((function n(a){var i,o,s,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,sconfirm("Report this post or comments to the mods?");case 2:if(!n.sent){n.next=13;break}return i=r.getAttribute("data-id"),n.next=7,salert("Thank you for flagging this");case 7:for(o=0;o<t.posts.length;o++)t.posts[o].transaction.sig===i&&t.posts.splice(o,1);for(s=0;s<t.comments.length;s++)t.comments[s].transaction.sig===i&&t.comments.splice(s,1);t.render(),t.overlay.hideOverlay(),c=t.createReportTransaction(i),e.network.propagateTransaction(c);case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}))},addComment:function(e,t,r){e.browser.addElementToDom(c(e,t,r),"post-view-comments")}}},function(e,t,r){function n(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var a=r(291),i=r(46);e.exports=PostCreate={render:function(e,t){var r=this;this.new_post={},this.new_post.images=[],this.new_post.title="",this.new_post.comment="",this.new_post.link="",this.new_post.forum="",t.overlay=new i(e,t),t.overlay.render(e,t),t.overlay.attachEvents(e,t),t.overlay.showOverlay(e,t,a(),(function(){})),this.showTab("discussion"),document.querySelector(".post-create-header-discussion").onclick=function(e){r.showTab("discussion")},document.querySelector(".post-create-header-link").onclick=function(e){r.showTab("link")},document.querySelector(".post-create-header-image").onclick=function(e){r.showTab("image")},e.browser.addDragAndDropFileUploadToElement("post-create-image",(function(n){console.log(n),r.new_post.images.push(n),e.browser.addElementToDom('<div data-id="'.concat(r.new_post.images.length-1,'" class="post-create-image-preview"><img src="').concat(n,'" style="top: 0px; position: relative; float: left; height: 50px; width: auto; margin-left: auto; margin-right: auto;width: auto;" /></div>'),"post-create-image-preview-container"),r.attachEvents(e,t)}))},attachEvents:function(e,t){var r=this;document.querySelector(".post-submit-btn").onclick=function(n){if(r.new_post.title=document.querySelector(".post-create-title").value,r.new_post.comment=document.querySelector(".post-create-textarea").innerHTML,r.new_post.link=document.querySelector(".post-create-link-input").value,r.new_post.forum=document.querySelector(".post-create-forum").value,console.log("Submitted Title--\x3e"+r.new_post.title+"<---"),""!=r.new_post.title){var a=t.createPostTransaction(r.new_post.title,r.new_post.comment,r.new_post.link,r.new_post.forum,r.new_post.images);e.network.propagateTransaction(a),a.children=0,t.posts.push(a),t.render(),t.overlay.hideOverlay()}else salert("Please provide a title for your post!")},document.querySelectorAll(".post-create-image-preview").forEach((function(e){e.onclick=function(){var t,a=(t=regeneratorRuntime.mark((function t(n){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,sconfirm("Do you want to delete this image?");case 2:t.sent&&(a=e.getAttribute("data-id"),e.destroy(),r.new_post.images.splice(a,1),document.querySelectorAll(".post-create-image-preview").forEach((function(e){var t=e.getAttribute("data-id");t>a&&e.setAttribute("data-id",t-1)})));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(a,i){var o=t.apply(e,r);function s(e){n(o,a,i,s,c,"next",e)}function c(e){n(o,a,i,s,c,"throw",e)}s(void 0)}))});return function(e){return a.apply(this,arguments)}}()}))},showTab:function(e){var t=".post-create-header-"+e;document.querySelectorAll(".post-create-header-item").forEach((function(e){e.classList.remove("post-create-active")})),document.querySelector(t).classList.toggle("post-create-active"),"discussion"===e&&(document.querySelector(".post-create-link").style.display="none",document.querySelector(".post-create-image").style.display="none",document.querySelector(".post-create-textarea").style.display="block"),"link"===e&&(document.querySelector(".post-create-link").style.display="block",document.querySelector(".post-create-image").style.display="none",document.querySelector(".post-create-textarea").style.display="none"),"image"===e&&(document.querySelector(".post-create-link").style.display="none",document.querySelector(".post-create-image").style.display="block",document.querySelector(".post-create-textarea").style.display="none")}}},function(e,t){e.exports=PostStyleTemplate=function(e,t){return"\n  "}},function(e,t,r){"use strict";var n=r(1175),a=r(1176);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=b,t.resolve=function(e,t){return b(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?b(e,!1,!0).resolveObject(t):t},t.format=function(e){a.isString(e)&&(e=b(e));return e instanceof i?e.format():i.prototype.format.call(e)},t.Url=i;var o=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(l),d=["%","/","?",";","#"].concat(u),h=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=r(1177);function b(e,t,r){if(e&&a.isObject(e)&&e instanceof i)return e;var n=new i;return n.parse(e,t,r),n}i.prototype.parse=function(e,t,r){if(!a.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),s=-1!==i&&i<e.indexOf("#")?"?":"#",l=e.split(s);l[0]=l[0].replace(/\\/g,"/");var b=e=l.join(s);if(b=b.trim(),!r&&1===e.split("#").length){var _=c.exec(b);if(_)return this.path=b,this.href=b,this.pathname=_[1],_[2]?(this.search=_[2],this.query=t?v.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var w=o.exec(b);if(w){var x=(w=w[0]).toLowerCase();this.protocol=x,b=b.substr(w.length)}if(r||w||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var k="//"===b.substr(0,2);!k||w&&g[w]||(b=b.substr(2),this.slashes=!0)}if(!g[w]&&(k||w&&!y[w])){for(var S,E,A=-1,P=0;P<h.length;P++){-1!==(C=b.indexOf(h[P]))&&(-1===A||C<A)&&(A=C)}-1!==(E=-1===A?b.lastIndexOf("@"):b.lastIndexOf("@",A))&&(S=b.slice(0,E),b=b.slice(E+1),this.auth=decodeURIComponent(S)),A=-1;for(P=0;P<d.length;P++){var C;-1!==(C=b.indexOf(d[P]))&&(-1===A||C<A)&&(A=C)}-1===A&&(A=b.length),this.host=b.slice(0,A),b=b.slice(A),this.parseHost(),this.hostname=this.hostname||"";var D="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!D)for(var T=this.hostname.split(/\./),O=(P=0,T.length);P<O;P++){var M=T[P];if(M&&!M.match(p)){for(var I="",R=0,F=M.length;R<F;R++)M.charCodeAt(R)>127?I+="x":I+=M[R];if(!I.match(p)){var B=T.slice(0,P),j=T.slice(P+1),N=M.match(f);N&&(B.push(N[1]),j.unshift(N[2])),j.length&&(b="/"+j.join(".")+b),this.hostname=B.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),D||(this.hostname=n.toASCII(this.hostname));var q=this.port?":"+this.port:"",L=this.hostname||"";this.host=L+q,this.href+=this.host,D&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!m[x])for(P=0,O=u.length;P<O;P++){var U=u[P];if(-1!==b.indexOf(U)){var z=encodeURIComponent(U);z===U&&(z=escape(U)),b=b.split(U).join(z)}}var H=b.indexOf("#");-1!==H&&(this.hash=b.substr(H),b=b.slice(0,H));var $=b.indexOf("?");if(-1!==$?(this.search=b.substr($),this.query=b.substr($+1),t&&(this.query=v.parse(this.query)),b=b.slice(0,$)):t&&(this.search="",this.query={}),b&&(this.pathname=b),y[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){q=this.pathname||"";var G=this.search||"";this.path=q+G}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&a.isObject(this.query)&&Object.keys(this.query).length&&(o=v.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),t+i+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+n},i.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(a.isString(e)){var t=new i;t.parse(e,!1,!0),e=t}for(var r=new i,n=Object.keys(this),o=0;o<n.length;o++){var s=n[o];r[s]=this[s]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),l=0;l<c.length;l++){var u=c[l];"protocol"!==u&&(r[u]=e[u])}return y[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!y[e.protocol]){for(var d=Object.keys(e),h=0;h<d.length;h++){var p=d[h];r[p]=e[p]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||g[e.protocol])r.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),r.pathname=f.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var m=r.pathname||"",v=r.search||"";r.path=m+v}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var b=r.pathname&&"/"===r.pathname.charAt(0),_=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=_||b||r.host&&e.pathname,x=w,k=r.pathname&&r.pathname.split("/")||[],S=(f=e.pathname&&e.pathname.split("/")||[],r.protocol&&!y[r.protocol]);if(S&&(r.hostname="",r.port=null,r.host&&(""===k[0]?k[0]=r.host:k.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),w=w&&(""===f[0]||""===k[0])),_)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,k=f;else if(f.length)k||(k=[]),k.pop(),k=k.concat(f),r.search=e.search,r.query=e.query;else if(!a.isNullOrUndefined(e.search)){if(S)r.hostname=r.host=k.shift(),(D=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=D.shift(),r.host=r.hostname=D.shift());return r.search=e.search,r.query=e.query,a.isNull(r.pathname)&&a.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!k.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var E=k.slice(-1)[0],A=(r.host||e.host||k.length>1)&&("."===E||".."===E)||""===E,P=0,C=k.length;C>=0;C--)"."===(E=k[C])?k.splice(C,1):".."===E?(k.splice(C,1),P++):P&&(k.splice(C,1),P--);if(!w&&!x)for(;P--;P)k.unshift("..");!w||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift(""),A&&"/"!==k.join("/").substr(-1)&&k.push("");var D,T=""===k[0]||k[0]&&"/"===k[0].charAt(0);S&&(r.hostname=r.host=T?"":k.length?k.shift():"",(D=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=D.shift(),r.host=r.hostname=D.shift()));return(w=w||r.host&&k.length)&&!T&&k.unshift(""),k.length?r.pathname=k.join("/"):(r.pathname=null,r.path=null),a.isNull(r.pathname)&&a.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},i.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,r){var n=r(8),a=r(6).document,i=n(a)&&n(a.createElement);e.exports=function(e){return i?a.createElement(e):{}}},function(e,t,r){var n=r(6),a=r(33),i=r(47),o=r(318),s=r(14).f;e.exports=function(e){var t=a.Symbol||(a.Symbol=i?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},function(e,t,r){var n=r(83)("keys"),a=r(55);e.exports=function(e){return n[e]||(n[e]=a(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,r){var n=r(6).document;e.exports=n&&n.documentElement},function(e,t,r){var n=r(8),a=r(3),i=function(e,t){if(a(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{(n=r(34)(Function.call,r(28).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return i(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:i}},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,r){var n=r(8),a=r(150).set;e.exports=function(e,t,r){var i,o=t.constructor;return o!==r&&"function"==typeof o&&(i=o.prototype)!==r.prototype&&n(i)&&a&&a(e,i),e}},function(e,t,r){"use strict";var n=r(36),a=r(39);e.exports=function(e){var t=String(a(this)),r="",i=n(e);if(i<0||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(r+=t);return r}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var r=Math.expm1;e.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:r},function(e,t,r){"use strict";var n=r(47),a=r(0),i=r(22),o=r(21),s=r(73),c=r(157),l=r(70),u=r(29),d=r(11)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,r,f,m,g,y){c(r,t,f);var v,b,_,w=function(e){if(!h&&e in E)return E[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},x=t+" Iterator",k="values"==m,S=!1,E=e.prototype,A=E[d]||E["@@iterator"]||m&&E[m],P=A||w(m),C=m?k?w("entries"):P:void 0,D="Array"==t&&E.entries||A;if(D&&(_=u(D.call(new e)))!==Object.prototype&&_.next&&(l(_,x,!0),n||"function"==typeof _[d]||o(_,d,p)),k&&A&&"values"!==A.name&&(S=!0,P=function(){return A.call(this)}),n&&!y||!h&&!S&&E[d]||o(E,d,P),s[t]=P,s[x]=p,m)if(v={values:k?P:w("values"),keys:g?P:w("keys"),entries:C},y)for(b in v)b in E||i(E,b,v[b]);else a(a.P+a.F*(h||S),t,v);return v}},function(e,t,r){"use strict";var n=r(58),a=r(54),i=r(70),o={};r(21)(o,r(11)("iterator"),(function(){return this})),e.exports=function(e,t,r){e.prototype=n(o,{next:a(1,r)}),i(e,t+" Iterator")}},function(e,t,r){var n=r(106),a=r(39);e.exports=function(e,t,r){if(n(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(a(e))}},function(e,t,r){var n=r(11)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,r){var n=r(73),a=r(11)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||i[a]===e)}},function(e,t,r){"use strict";var n=r(14),a=r(54);e.exports=function(e,t,r){t in e?n.f(e,t,a(0,r)):e[t]=r}},function(e,t,r){var n=r(71),a=r(11)("iterator"),i=r(73);e.exports=r(33).getIteratorMethod=function(e){if(null!=e)return e[a]||e["@@iterator"]||i[n(e)]}},function(e,t,r){var n=r(663);e.exports=function(e,t){return new(n(e))(t)}},function(e,t,r){"use strict";var n=r(15),a=r(57),i=r(12);e.exports=function(e){for(var t=n(this),r=i(t.length),o=arguments.length,s=a(o>1?arguments[1]:void 0,r),c=o>2?arguments[2]:void 0,l=void 0===c?r:a(c,r);l>s;)t[s++]=e;return t}},function(e,t,r){"use strict";var n=r(49),a=r(335),i=r(73),o=r(27);e.exports=r(156)(Array,"Array",(function(e,t){this._t=o(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,a(1)):a(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])}),"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},function(e,t,r){"use strict";var n,a,i=r(86),o=RegExp.prototype.exec,s=String.prototype.replace,c=o,l=(n=/a/,a=/b*/g,o.call(n,"a"),o.call(a,"a"),0!==n.lastIndex||0!==a.lastIndex),u=void 0!==/()??/.exec("")[1];(l||u)&&(c=function(e){var t,r,n,a,c=this;return u&&(r=new RegExp("^"+c.source+"$(?!\\s)",i.call(c))),l&&(t=c.lastIndex),n=o.call(c,e),l&&n&&(c.lastIndex=c.global?n.index+n[0].length:t),u&&n&&n.length>1&&s.call(n[0],r,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(n[a]=void 0)})),n}),e.exports=c},function(e,t,r){"use strict";var n=r(105)(!0);e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},function(e,t,r){var n,a,i,o=r(34),s=r(325),c=r(149),l=r(145),u=r(6),d=u.process,h=u.setImmediate,p=u.clearImmediate,f=u.MessageChannel,m=u.Dispatch,g=0,y={},v=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},b=function(e){v.call(e.data)};h&&p||(h=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return y[++g]=function(){s("function"==typeof e?e:Function(e),t)},n(g),g},p=function(e){delete y[e]},"process"==r(35)(d)?n=function(e){d.nextTick(o(v,e,1))}:m&&m.now?n=function(e){m.now(o(v,e,1))}:f?(i=(a=new f).port2,a.port1.onmessage=b,n=o(i.postMessage,i,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(n=function(e){u.postMessage(e+"","*")},u.addEventListener("message",b,!1)):n="onreadystatechange"in l("script")?function(e){c.appendChild(l("script")).onreadystatechange=function(){c.removeChild(this),v.call(e)}}:function(e){setTimeout(o(v,e,1),0)}),e.exports={set:h,clear:p}},function(e,t,r){var n=r(6),a=r(168).set,i=n.MutationObserver||n.WebKitMutationObserver,o=n.process,s=n.Promise,c="process"==r(35)(o);e.exports=function(){var e,t,r,l=function(){var n,a;for(c&&(n=o.domain)&&n.exit();e;){a=e.fn,e=e.next;try{a()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(c)r=function(){o.nextTick(l)};else if(!i||n.navigator&&n.navigator.standalone)if(s&&s.resolve){var u=s.resolve(void 0);r=function(){u.then(l)}}else r=function(){a.call(n,l)};else{var d=!0,h=document.createTextNode("");new i(l).observe(h,{characterData:!0}),r=function(){h.data=d=!d}}return function(n){var a={fn:n,next:void 0};t&&(t.next=a),e||(e=a,r()),t=a}}},function(e,t,r){"use strict";var n=r(20);function a(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)}e.exports.f=function(e){return new a(e)}},function(e,t,r){"use strict";var n=r(6),a=r(13),i=r(47),o=r(112),s=r(21),c=r(63),l=r(7),u=r(61),d=r(36),h=r(12),p=r(345),f=r(59).f,m=r(14).f,g=r(164),y=r(70),v=n.ArrayBuffer,b=n.DataView,_=n.Math,w=n.RangeError,x=n.Infinity,k=v,S=_.abs,E=_.pow,A=_.floor,P=_.log,C=_.LN2,D=a?"_b":"buffer",T=a?"_l":"byteLength",O=a?"_o":"byteOffset";function M(e,t,r){var n,a,i,o=new Array(r),s=8*r-t-1,c=(1<<s)-1,l=c>>1,u=23===t?E(2,-24)-E(2,-77):0,d=0,h=e<0||0===e&&1/e<0?1:0;for((e=S(e))!=e||e===x?(a=e!=e?1:0,n=c):(n=A(P(e)/C),e*(i=E(2,-n))<1&&(n--,i*=2),(e+=n+l>=1?u/i:u*E(2,1-l))*i>=2&&(n++,i/=2),n+l>=c?(a=0,n=c):n+l>=1?(a=(e*i-1)*E(2,t),n+=l):(a=e*E(2,l-1)*E(2,t),n=0));t>=8;o[d++]=255&a,a/=256,t-=8);for(n=n<<t|a,s+=t;s>0;o[d++]=255&n,n/=256,s-=8);return o[--d]|=128*h,o}function I(e,t,r){var n,a=8*r-t-1,i=(1<<a)-1,o=i>>1,s=a-7,c=r-1,l=e[c--],u=127&l;for(l>>=7;s>0;u=256*u+e[c],c--,s-=8);for(n=u&(1<<-s)-1,u>>=-s,s+=t;s>0;n=256*n+e[c],c--,s-=8);if(0===u)u=1-o;else{if(u===i)return n?NaN:l?-x:x;n+=E(2,t),u-=o}return(l?-1:1)*n*E(2,u-t)}function R(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function F(e){return[255&e]}function B(e){return[255&e,e>>8&255]}function j(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function N(e){return M(e,52,8)}function q(e){return M(e,23,4)}function L(e,t,r){m(e.prototype,t,{get:function(){return this[r]}})}function U(e,t,r,n){var a=p(+r);if(a+t>e[T])throw w("Wrong index!");var i=e[D]._b,o=a+e[O],s=i.slice(o,o+t);return n?s:s.reverse()}function z(e,t,r,n,a,i){var o=p(+r);if(o+t>e[T])throw w("Wrong index!");for(var s=e[D]._b,c=o+e[O],l=n(+a),u=0;u<t;u++)s[c+u]=l[i?u:t-u-1]}if(o.ABV){if(!l((function(){v(1)}))||!l((function(){new v(-1)}))||l((function(){return new v,new v(1.5),new v(NaN),"ArrayBuffer"!=v.name}))){for(var H,$=(v=function(e){return u(this,v),new k(p(e))}).prototype=k.prototype,G=f(k),K=0;G.length>K;)(H=G[K++])in v||s(v,H,k[H]);i||($.constructor=v)}var V=new b(new v(2)),W=b.prototype.setInt8;V.setInt8(0,2147483648),V.setInt8(1,2147483649),!V.getInt8(0)&&V.getInt8(1)||c(b.prototype,{setInt8:function(e,t){W.call(this,e,t<<24>>24)},setUint8:function(e,t){W.call(this,e,t<<24>>24)}},!0)}else v=function(e){u(this,v,"ArrayBuffer");var t=p(e);this._b=g.call(new Array(t),0),this[T]=t},b=function(e,t,r){u(this,b,"DataView"),u(e,v,"DataView");var n=e[T],a=d(t);if(a<0||a>n)throw w("Wrong offset!");if(a+(r=void 0===r?n-a:h(r))>n)throw w("Wrong length!");this[D]=e,this[O]=a,this[T]=r},a&&(L(v,"byteLength","_l"),L(b,"buffer","_b"),L(b,"byteLength","_l"),L(b,"byteOffset","_o")),c(b.prototype,{getInt8:function(e){return U(this,1,e)[0]<<24>>24},getUint8:function(e){return U(this,1,e)[0]},getInt16:function(e){var t=U(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=U(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return R(U(this,4,e,arguments[1]))},getUint32:function(e){return R(U(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return I(U(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return I(U(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){z(this,1,e,F,t)},setUint8:function(e,t){z(this,1,e,F,t)},setInt16:function(e,t){z(this,2,e,B,t,arguments[2])},setUint16:function(e,t){z(this,2,e,B,t,arguments[2])},setInt32:function(e,t){z(this,4,e,j,t,arguments[2])},setUint32:function(e,t){z(this,4,e,j,t,arguments[2])},setFloat32:function(e,t){z(this,4,e,q,t,arguments[2])},setFloat64:function(e,t){z(this,8,e,N,t,arguments[2])}});y(v,"ArrayBuffer"),y(b,"DataView"),s(b.prototype,o.VIEW,!0),t.ArrayBuffer=v,t.DataView=b},function(e,t,r){var n,a;
/*! @preserve
 * numeral.js
 * version : 2.0.6
 * author : Adam Draper
 * license : MIT
 * http://adamwdraper.github.com/Numeral-js/
 */void 0===(a="function"==typeof(n=function(){var e,t,r,n,a,i={},o={},s={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},c={currentLocale:s.currentLocale,zeroFormat:s.zeroFormat,nullFormat:s.nullFormat,defaultFormat:s.defaultFormat,scalePercentBy100:s.scalePercentBy100};function l(e,t){this._input=e,this._value=t}return(e=function(r){var n,a,o,s;if(e.isNumeral(r))n=r.value();else if(0===r||void 0===r)n=0;else if(null===r||t.isNaN(r))n=null;else if("string"==typeof r)if(c.zeroFormat&&r===c.zeroFormat)n=0;else if(c.nullFormat&&r===c.nullFormat||!r.replace(/[^0-9]+/g,"").length)n=null;else{for(a in i)if((s="function"==typeof i[a].regexps.unformat?i[a].regexps.unformat():i[a].regexps.unformat)&&r.match(s)){o=i[a].unformat;break}n=(o=o||e._.stringToNumber)(r)}else n=Number(r)||null;return new l(r,n)}).version="2.0.6",e.isNumeral=function(e){return e instanceof l},e._=t={numberToFormat:function(t,r,n){var a,i,s,c,l,u,d,h,p=o[e.options.currentLocale],f=!1,m=!1,g="",y="",v=!1;if(t=t||0,s=Math.abs(t),e._.includes(r,"(")?(f=!0,r=r.replace(/[\(|\)]/g,"")):(e._.includes(r,"+")||e._.includes(r,"-"))&&(u=e._.includes(r,"+")?r.indexOf("+"):t<0?r.indexOf("-"):-1,r=r.replace(/[\+|\-]/g,"")),e._.includes(r,"a")&&(i=!!(i=r.match(/a(k|m|b|t)?/))&&i[1],e._.includes(r," a")&&(g=" "),r=r.replace(new RegExp(g+"a[kmbt]?"),""),s>=1e12&&!i||"t"===i?(g+=p.abbreviations.trillion,t/=1e12):s<1e12&&s>=1e9&&!i||"b"===i?(g+=p.abbreviations.billion,t/=1e9):s<1e9&&s>=1e6&&!i||"m"===i?(g+=p.abbreviations.million,t/=1e6):(s<1e6&&s>=1e3&&!i||"k"===i)&&(g+=p.abbreviations.thousand,t/=1e3)),e._.includes(r,"[.]")&&(m=!0,r=r.replace("[.]",".")),c=t.toString().split(".")[0],l=r.split(".")[1],d=r.indexOf(","),a=(r.split(".")[0].split(",")[0].match(/0/g)||[]).length,l?(e._.includes(l,"[")?(l=(l=l.replace("]","")).split("["),y=e._.toFixed(t,l[0].length+l[1].length,n,l[1].length)):y=e._.toFixed(t,l.length,n),c=y.split(".")[0],y=e._.includes(y,".")?p.delimiters.decimal+y.split(".")[1]:"",m&&0===Number(y.slice(1))&&(y="")):c=e._.toFixed(t,0,n),g&&!i&&Number(c)>=1e3&&g!==p.abbreviations.trillion)switch(c=String(Number(c)/1e3),g){case p.abbreviations.thousand:g=p.abbreviations.million;break;case p.abbreviations.million:g=p.abbreviations.billion;break;case p.abbreviations.billion:g=p.abbreviations.trillion}if(e._.includes(c,"-")&&(c=c.slice(1),v=!0),c.length<a)for(var b=a-c.length;b>0;b--)c="0"+c;return d>-1&&(c=c.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+p.delimiters.thousands)),0===r.indexOf(".")&&(c=""),h=c+y+(g||""),f?h=(f&&v?"(":"")+h+(f&&v?")":""):u>=0?h=0===u?(v?"-":"+")+h:h+(v?"-":"+"):v&&(h="-"+h),h},stringToNumber:function(e){var t,r,n,a=o[c.currentLocale],i=e,s={thousand:3,million:6,billion:9,trillion:12};if(c.zeroFormat&&e===c.zeroFormat)r=0;else if(c.nullFormat&&e===c.nullFormat||!e.replace(/[^0-9]+/g,"").length)r=null;else{for(t in r=1,"."!==a.delimiters.decimal&&(e=e.replace(/\./g,"").replace(a.delimiters.decimal,".")),s)if(n=new RegExp("[^a-zA-Z]"+a.abbreviations[t]+"(?:\\)|(\\"+a.currency.symbol+")?(?:\\))?)?$"),i.match(n)){r*=Math.pow(10,s[t]);break}r*=(e.split("-").length+Math.min(e.split("(").length-1,e.split(")").length-1))%2?1:-1,e=e.replace(/[^0-9\.]+/g,""),r*=Number(e)}return r},isNaN:function(e){return"number"==typeof e&&isNaN(e)},includes:function(e,t){return-1!==e.indexOf(t)},insert:function(e,t,r){return e.slice(0,r)+t+e.slice(r)},reduce:function(e,t){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var r,n=Object(e),a=n.length>>>0,i=0;if(3===arguments.length)r=arguments[2];else{for(;i<a&&!(i in n);)i++;if(i>=a)throw new TypeError("Reduce of empty array with no initial value");r=n[i++]}for(;i<a;i++)i in n&&(r=t(r,n[i],i,n));return r},multiplier:function(e){var t=e.toString().split(".");return t.length<2?1:Math.pow(10,t[1].length)},correctionFactor:function(){var e=Array.prototype.slice.call(arguments);return e.reduce((function(e,r){var n=t.multiplier(r);return e>n?e:n}),1)},toFixed:function(e,t,r,n){var a,i,o,s,c=e.toString().split("."),l=t-(n||0);return a=2===c.length?Math.min(Math.max(c[1].length,l),t):l,o=Math.pow(10,a),s=(r(e+"e+"+a)/o).toFixed(a),n>t-a&&(i=new RegExp("\\.?0{1,"+(n-(t-a))+"}$"),s=s.replace(i,"")),s}},e.options=c,e.formats=i,e.locales=o,e.locale=function(e){return e&&(c.currentLocale=e.toLowerCase()),c.currentLocale},e.localeData=function(e){if(!e)return o[c.currentLocale];if(e=e.toLowerCase(),!o[e])throw new Error("Unknown locale : "+e);return o[e]},e.reset=function(){for(var e in s)c[e]=s[e]},e.zeroFormat=function(e){c.zeroFormat="string"==typeof e?e:null},e.nullFormat=function(e){c.nullFormat="string"==typeof e?e:null},e.defaultFormat=function(e){c.defaultFormat="string"==typeof e?e:"0.0"},e.register=function(e,t,r){if(t=t.toLowerCase(),this[e+"s"][t])throw new TypeError(t+" "+e+" already registered.");return this[e+"s"][t]=r,r},e.validate=function(t,r){var n,a,i,o,s,c,l,u;if("string"!=typeof t&&(t+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",t)),(t=t.trim()).match(/^\d+$/))return!0;if(""===t)return!1;try{l=e.localeData(r)}catch(t){l=e.localeData(e.locale())}return i=l.currency.symbol,s=l.abbreviations,n=l.delimiters.decimal,a="."===l.delimiters.thousands?"\\.":l.delimiters.thousands,!(null!==(u=t.match(/^[^\d]+/))&&(t=t.substr(1),u[0]!==i)||null!==(u=t.match(/[^\d]+$/))&&(t=t.slice(0,-1),u[0]!==s.thousand&&u[0]!==s.million&&u[0]!==s.billion&&u[0]!==s.trillion)||(c=new RegExp(a+"{2}"),t.match(/[^\d.,]/g)||(o=t.split(n)).length>2||(o.length<2?!o[0].match(/^\d+.*\d$/)||o[0].match(c):1===o[0].length?!o[0].match(/^\d+$/)||o[0].match(c)||!o[1].match(/^\d+$/):!o[0].match(/^\d+.*\d$/)||o[0].match(c)||!o[1].match(/^\d+$/))))},e.fn=l.prototype={clone:function(){return e(this)},format:function(t,r){var n,a,o,s=this._value,l=t||c.defaultFormat;if(r=r||Math.round,0===s&&null!==c.zeroFormat)a=c.zeroFormat;else if(null===s&&null!==c.nullFormat)a=c.nullFormat;else{for(n in i)if(l.match(i[n].regexps.format)){o=i[n].format;break}a=(o=o||e._.numberToFormat)(s,l,r)}return a},value:function(){return this._value},input:function(){return this._input},set:function(e){return this._value=Number(e),this},add:function(e){var r=t.correctionFactor.call(null,this._value,e);return this._value=t.reduce([this._value,e],(function(e,t,n,a){return e+Math.round(r*t)}),0)/r,this},subtract:function(e){var r=t.correctionFactor.call(null,this._value,e);return this._value=t.reduce([e],(function(e,t,n,a){return e-Math.round(r*t)}),Math.round(this._value*r))/r,this},multiply:function(e){return this._value=t.reduce([this._value,e],(function(e,r,n,a){var i=t.correctionFactor(e,r);return Math.round(e*i)*Math.round(r*i)/Math.round(i*i)}),1),this},divide:function(e){return this._value=t.reduce([this._value,e],(function(e,r,n,a){var i=t.correctionFactor(e,r);return Math.round(e*i)/Math.round(r*i)})),this},difference:function(t){return Math.abs(e(this._value).subtract(t).value())}},e.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),e.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(t,r,n){var a,i=e._.includes(r," BPS")?" ":"";return t*=1e4,r=r.replace(/\s?BPS/,""),a=e._.numberToFormat(t,r,n),e._.includes(a,")")?((a=a.split("")).splice(-1,0,i+"BPS"),a=a.join("")):a=a+i+"BPS",a},unformat:function(t){return+(1e-4*e._.stringToNumber(t)).toFixed(15)}}),n={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},a="("+(a=(r={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}).suffixes.concat(n.suffixes.filter((function(e){return r.suffixes.indexOf(e)<0}))).join("|")).replace("B","B(?!PS)")+")",e.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(a)},format:function(t,a,i){var o,s,c,l=e._.includes(a,"ib")?n:r,u=e._.includes(a," b")||e._.includes(a," ib")?" ":"";for(a=a.replace(/\s?i?b/,""),o=0;o<=l.suffixes.length;o++)if(s=Math.pow(l.base,o),c=Math.pow(l.base,o+1),null===t||0===t||t>=s&&t<c){u+=l.suffixes[o],s>0&&(t/=s);break}return e._.numberToFormat(t,a,i)+u},unformat:function(t){var a,i,o=e._.stringToNumber(t);if(o){for(a=r.suffixes.length-1;a>=0;a--){if(e._.includes(t,r.suffixes[a])){i=Math.pow(r.base,a);break}if(e._.includes(t,n.suffixes[a])){i=Math.pow(n.base,a);break}}o*=i||1}return o}}),e.register("format","currency",{regexps:{format:/(\$)/},format:function(t,r,n){var a,i,o=e.locales[e.options.currentLocale],s={before:r.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:r.match(/([\+|\-|\)|\s|\$]*)$/)[0]};for(r=r.replace(/\s?\$\s?/,""),a=e._.numberToFormat(t,r,n),t>=0?(s.before=s.before.replace(/[\-\(]/,""),s.after=s.after.replace(/[\-\)]/,"")):t<0&&!e._.includes(s.before,"-")&&!e._.includes(s.before,"(")&&(s.before="-"+s.before),i=0;i<s.before.length;i++)switch(s.before[i]){case"$":a=e._.insert(a,o.currency.symbol,i);break;case" ":a=e._.insert(a," ",i+o.currency.symbol.length-1)}for(i=s.after.length-1;i>=0;i--)switch(s.after[i]){case"$":a=i===s.after.length-1?a+o.currency.symbol:e._.insert(a,o.currency.symbol,-(s.after.length-(1+i)));break;case" ":a=i===s.after.length-1?a+" ":e._.insert(a," ",-(s.after.length-(1+i)+o.currency.symbol.length-1))}return a}}),e.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(t,r,n){var a=("number"!=typeof t||e._.isNaN(t)?"0e+0":t.toExponential()).split("e");return r=r.replace(/e[\+|\-]{1}0/,""),e._.numberToFormat(Number(a[0]),r,n)+"e"+a[1]},unformat:function(t){var r=e._.includes(t,"e+")?t.split("e+"):t.split("e-"),n=Number(r[0]),a=Number(r[1]);return a=e._.includes(t,"e-")?a*=-1:a,e._.reduce([n,Math.pow(10,a)],(function(t,r,n,a){var i=e._.correctionFactor(t,r);return t*i*(r*i)/(i*i)}),1)}}),e.register("format","ordinal",{regexps:{format:/(o)/},format:function(t,r,n){var a=e.locales[e.options.currentLocale],i=e._.includes(r," o")?" ":"";return r=r.replace(/\s?o/,""),i+=a.ordinal(t),e._.numberToFormat(t,r,n)+i}}),e.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(t,r,n){var a,i=e._.includes(r," %")?" ":"";return e.options.scalePercentBy100&&(t*=100),r=r.replace(/\s?\%/,""),a=e._.numberToFormat(t,r,n),e._.includes(a,")")?((a=a.split("")).splice(-1,0,i+"%"),a=a.join("")):a=a+i+"%",a},unformat:function(t){var r=e._.stringToNumber(t);return e.options.scalePercentBy100?.01*r:r}}),e.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(e,t,r){var n=Math.floor(e/60/60),a=Math.floor((e-60*n*60)/60),i=Math.round(e-60*n*60-60*a);return n+":"+(a<10?"0"+a:a)+":"+(i<10?"0"+i:i)},unformat:function(e){var t=e.split(":"),r=0;return 3===t.length?(r+=60*Number(t[0])*60,r+=60*Number(t[1]),r+=Number(t[2])):2===t.length&&(r+=60*Number(t[0]),r+=Number(t[1])),Number(r)}}),e})?n.call(t,r,t,e):n)||(e.exports=a)},function(e,t,r){"use strict";var n=r(1),a=r(355),i=r(2).Buffer,o=new Array(16);function s(){a.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function c(e,t){return e<<t|e>>>32-t}function l(e,t,r,n,a,i,o){return c(e+(t&r|~t&n)+a+i|0,o)+t|0}function u(e,t,r,n,a,i,o){return c(e+(t&n|r&~n)+a+i|0,o)+t|0}function d(e,t,r,n,a,i,o){return c(e+(t^r^n)+a+i|0,o)+t|0}function h(e,t,r,n,a,i,o){return c(e+(r^(t|~n))+a+i|0,o)+t|0}n(s,a),s.prototype._update=function(){for(var e=o,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var r=this._a,n=this._b,a=this._c,i=this._d;r=l(r,n,a,i,e[0],3614090360,7),i=l(i,r,n,a,e[1],3905402710,12),a=l(a,i,r,n,e[2],606105819,17),n=l(n,a,i,r,e[3],3250441966,22),r=l(r,n,a,i,e[4],4118548399,7),i=l(i,r,n,a,e[5],1200080426,12),a=l(a,i,r,n,e[6],2821735955,17),n=l(n,a,i,r,e[7],4249261313,22),r=l(r,n,a,i,e[8],1770035416,7),i=l(i,r,n,a,e[9],2336552879,12),a=l(a,i,r,n,e[10],4294925233,17),n=l(n,a,i,r,e[11],2304563134,22),r=l(r,n,a,i,e[12],1804603682,7),i=l(i,r,n,a,e[13],4254626195,12),a=l(a,i,r,n,e[14],2792965006,17),r=u(r,n=l(n,a,i,r,e[15],1236535329,22),a,i,e[1],4129170786,5),i=u(i,r,n,a,e[6],3225465664,9),a=u(a,i,r,n,e[11],643717713,14),n=u(n,a,i,r,e[0],3921069994,20),r=u(r,n,a,i,e[5],3593408605,5),i=u(i,r,n,a,e[10],38016083,9),a=u(a,i,r,n,e[15],3634488961,14),n=u(n,a,i,r,e[4],3889429448,20),r=u(r,n,a,i,e[9],568446438,5),i=u(i,r,n,a,e[14],3275163606,9),a=u(a,i,r,n,e[3],4107603335,14),n=u(n,a,i,r,e[8],1163531501,20),r=u(r,n,a,i,e[13],2850285829,5),i=u(i,r,n,a,e[2],4243563512,9),a=u(a,i,r,n,e[7],1735328473,14),r=d(r,n=u(n,a,i,r,e[12],2368359562,20),a,i,e[5],4294588738,4),i=d(i,r,n,a,e[8],2272392833,11),a=d(a,i,r,n,e[11],1839030562,16),n=d(n,a,i,r,e[14],4259657740,23),r=d(r,n,a,i,e[1],2763975236,4),i=d(i,r,n,a,e[4],1272893353,11),a=d(a,i,r,n,e[7],4139469664,16),n=d(n,a,i,r,e[10],3200236656,23),r=d(r,n,a,i,e[13],681279174,4),i=d(i,r,n,a,e[0],3936430074,11),a=d(a,i,r,n,e[3],3572445317,16),n=d(n,a,i,r,e[6],76029189,23),r=d(r,n,a,i,e[9],3654602809,4),i=d(i,r,n,a,e[12],3873151461,11),a=d(a,i,r,n,e[15],530742520,16),r=h(r,n=d(n,a,i,r,e[2],3299628645,23),a,i,e[0],4096336452,6),i=h(i,r,n,a,e[7],1126891415,10),a=h(a,i,r,n,e[14],2878612391,15),n=h(n,a,i,r,e[5],4237533241,21),r=h(r,n,a,i,e[12],1700485571,6),i=h(i,r,n,a,e[3],2399980690,10),a=h(a,i,r,n,e[10],4293915773,15),n=h(n,a,i,r,e[1],2240044497,21),r=h(r,n,a,i,e[8],1873313359,6),i=h(i,r,n,a,e[15],4264355552,10),a=h(a,i,r,n,e[6],2734768916,15),n=h(n,a,i,r,e[13],1309151649,21),r=h(r,n,a,i,e[4],4149444226,6),i=h(i,r,n,a,e[11],3174756917,10),a=h(a,i,r,n,e[2],718787259,15),n=h(n,a,i,r,e[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+a|0,this._d=this._d+i|0},s.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=i.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},e.exports=s},function(e,t,r){"use strict";var n=r(76).codes.ERR_STREAM_PREMATURE_CLOSE;function a(){}e.exports=function e(t,r,i){if("function"==typeof r)return e(t,null,r);r||(r={}),i=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];e.apply(this,n)}}}(i||a);var o=r.readable||!1!==r.readable&&t.readable,s=r.writable||!1!==r.writable&&t.writable,c=function(){t.writable||u()},l=t._writableState&&t._writableState.finished,u=function(){s=!1,l=!0,o||i.call(t)},d=t._readableState&&t._readableState.endEmitted,h=function(){o=!1,d=!0,s||i.call(t)},p=function(e){i.call(t,e)},f=function(){var e;return o&&!d?(t._readableState&&t._readableState.ended||(e=new n),i.call(t,e)):s&&!l?(t._writableState&&t._writableState.ended||(e=new n),i.call(t,e)):void 0},m=function(){t.req.on("finish",u)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?s&&!t._writableState&&(t.on("end",c),t.on("close",c)):(t.on("complete",u),t.on("abort",f),t.req?m():t.on("request",m)),t.on("end",h),t.on("finish",u),!1!==r.error&&t.on("error",p),t.on("close",f),function(){t.removeListener("complete",u),t.removeListener("abort",f),t.removeListener("request",m),t.req&&t.req.removeListener("finish",u),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",u),t.removeListener("end",h),t.removeListener("error",p),t.removeListener("close",f)}}},function(e,t,r){"use strict";var n=r(4).Buffer,a=r(1),i=r(355),o=new Array(16),s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],c=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],u=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],d=[0,1518500249,1859775393,2400959708,2840853838],h=[1352829926,1548603684,1836072691,2053994217,0];function p(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function f(e,t){return e<<t|e>>>32-t}function m(e,t,r,n,a,i,o,s){return f(e+(t^r^n)+i+o|0,s)+a|0}function g(e,t,r,n,a,i,o,s){return f(e+(t&r|~t&n)+i+o|0,s)+a|0}function y(e,t,r,n,a,i,o,s){return f(e+((t|~r)^n)+i+o|0,s)+a|0}function v(e,t,r,n,a,i,o,s){return f(e+(t&n|r&~n)+i+o|0,s)+a|0}function b(e,t,r,n,a,i,o,s){return f(e+(t^(r|~n))+i+o|0,s)+a|0}a(p,i),p.prototype._update=function(){for(var e=o,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var r=0|this._a,n=0|this._b,a=0|this._c,i=0|this._d,p=0|this._e,_=0|this._a,w=0|this._b,x=0|this._c,k=0|this._d,S=0|this._e,E=0;E<80;E+=1){var A,P;E<16?(A=m(r,n,a,i,p,e[s[E]],d[0],l[E]),P=b(_,w,x,k,S,e[c[E]],h[0],u[E])):E<32?(A=g(r,n,a,i,p,e[s[E]],d[1],l[E]),P=v(_,w,x,k,S,e[c[E]],h[1],u[E])):E<48?(A=y(r,n,a,i,p,e[s[E]],d[2],l[E]),P=y(_,w,x,k,S,e[c[E]],h[2],u[E])):E<64?(A=v(r,n,a,i,p,e[s[E]],d[3],l[E]),P=g(_,w,x,k,S,e[c[E]],h[3],u[E])):(A=b(r,n,a,i,p,e[s[E]],d[4],l[E]),P=m(_,w,x,k,S,e[c[E]],h[4],u[E])),r=p,p=i,i=f(a,10),a=n,n=A,_=S,S=k,k=f(x,10),x=w,w=P}var C=this._b+a+k|0;this._b=this._c+i+S|0,this._c=this._d+p+_|0,this._d=this._e+r+w|0,this._e=this._a+n+x|0,this._a=C},p.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=n.alloc?n.alloc(20):new n(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},e.exports=p},function(e,t,r){(t=e.exports=function(e){e=e.toLowerCase();var r=t[e];if(!r)throw new Error(e+" is not supported (we accept pull requests)");return new r}).sha=r(793),t.sha1=r(794),t.sha224=r(795),t.sha256=r(364),t.sha384=r(796),t.sha512=r(365)},function(e,t,r){(t=e.exports=r(367)).Stream=t,t.Readable=t,t.Writable=r(178),t.Duplex=r(65),t.Transform=r(370),t.PassThrough=r(802)},function(e,t,r){"use strict";(function(t,n,a){var i=r(117);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var a=n.callback;t.pendingcb--,a(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=v;var s,c=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?n:i.nextTick;v.WritableState=y;var l=Object.create(r(88));l.inherits=r(1);var u={deprecate:r(362)},d=r(368),h=r(2).Buffer,p=a.Uint8Array||function(){};var f,m=r(369);function g(){}function y(e,t){s=s||r(65),e=e||{};var n=t instanceof s;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var a=e.highWaterMark,l=e.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:n&&(l||0===l)?l:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var d=!1===e.decodeStrings;this.decodeStrings=!d,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,a=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,a){--t.pendingcb,r?(i.nextTick(a,n),i.nextTick(S,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(a(n),e._writableState.errorEmitted=!0,e.emit("error",n),S(e,t))}(e,r,n,t,a);else{var o=x(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||w(e,r),n?c(_,e,r,o,a):_(e,r,o,a)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function v(e){if(s=s||r(65),!(f.call(v,this)||this instanceof s))return new v(e);this._writableState=new y(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),d.call(this)}function b(e,t,r,n,a,i,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,r?e._writev(a,t.onwrite):e._write(a,i,t.onwrite),t.sync=!1}function _(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),S(e,t)}function w(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,a=new Array(n),i=t.corkedRequestsFree;i.entry=r;for(var s=0,c=!0;r;)a[s]=r,r.isBuf||(c=!1),r=r.next,s+=1;a.allBuffers=c,b(e,t,!0,t.length,a,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,u=r.encoding,d=r.callback;if(b(e,t,!1,t.objectMode?1:l.length,l,u,d),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function x(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function k(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),S(e,t)}))}function S(e,t){var r=x(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,i.nextTick(k,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}l.inherits(v,d),y.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(y.prototype,"buffer",{get:u.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(e){return!!f.call(this,e)||this===v&&(e&&e._writableState instanceof y)}})):f=function(e){return e instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(e,t,r){var n,a=this._writableState,o=!1,s=!a.objectMode&&(n=e,h.isBuffer(n)||n instanceof p);return s&&!h.isBuffer(e)&&(e=function(e){return h.from(e)}(e)),"function"==typeof t&&(r=t,t=null),s?t="buffer":t||(t=a.defaultEncoding),"function"!=typeof r&&(r=g),a.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),i.nextTick(t,r)}(this,r):(s||function(e,t,r,n){var a=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),i.nextTick(n,o),a=!1),a}(this,a,e,r))&&(a.pendingcb++,o=function(e,t,r,n,a,i){if(!r){var o=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=h.from(t,r));return t}(t,n,a);n!==o&&(r=!0,a="buffer",n=o)}var s=t.objectMode?1:n.length;t.length+=s;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:a,isBuf:r,callback:i,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,s,n,a,i);return c}(this,a,s,e,t,r)),o},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},v.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,S(e,t),r&&(t.finished?i.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),v.prototype.destroy=m.destroy,v.prototype._undestroy=m.undestroy,v.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,r(9),r(800).setImmediate,r(18))},function(e,t,r){"use strict";var n=r(30);function a(e){this.options=e,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}e.exports=a,a.prototype._init=function(){},a.prototype.update=function(e){return 0===e.length?[]:"decrypt"===this.type?this._updateDecrypt(e):this._updateEncrypt(e)},a.prototype._buffer=function(e,t){for(var r=Math.min(this.buffer.length-this.bufferOff,e.length-t),n=0;n<r;n++)this.buffer[this.bufferOff+n]=e[t+n];return this.bufferOff+=r,r},a.prototype._flushBuffer=function(e,t){return this._update(this.buffer,0,e,t),this.bufferOff=0,this.blockSize},a.prototype._updateEncrypt=function(e){var t=0,r=0,n=(this.bufferOff+e.length)/this.blockSize|0,a=new Array(n*this.blockSize);0!==this.bufferOff&&(t+=this._buffer(e,t),this.bufferOff===this.buffer.length&&(r+=this._flushBuffer(a,r)));for(var i=e.length-(e.length-t)%this.blockSize;t<i;t+=this.blockSize)this._update(e,t,a,r),r+=this.blockSize;for(;t<e.length;t++,this.bufferOff++)this.buffer[this.bufferOff]=e[t];return a},a.prototype._updateDecrypt=function(e){for(var t=0,r=0,n=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,a=new Array(n*this.blockSize);n>0;n--)t+=this._buffer(e,t),r+=this._flushBuffer(a,r);return t+=this._buffer(e,t),a},a.prototype.final=function(e){var t,r;return e&&(t=this.update(e)),r="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),t?t.concat(r):r},a.prototype._pad=function(e,t){if(0===t)return!1;for(;t<e.length;)e[t++]=0;return!0},a.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e},a.prototype._unpad=function(e){return e},a.prototype._finalDecrypt=function(){n.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)}},function(e,t,r){var n=r(815),a=r(823),i=r(383);t.createCipher=t.Cipher=n.createCipher,t.createCipheriv=t.Cipheriv=n.createCipheriv,t.createDecipher=t.Decipher=a.createDecipher,t.createDecipheriv=t.Decipheriv=a.createDecipheriv,t.listCiphers=t.getCiphers=function(){return Object.keys(i)}},function(e,t,r){var n={ECB:r(816),CBC:r(817),CFB:r(818),CFB8:r(819),CFB1:r(820),OFB:r(821),CTR:r(381),GCM:r(381)},a=r(383);for(var i in a)a[i].module=n[a[i].mode];e.exports=a},function(e,t,r){var n;function a(e){this.rand=e}if(e.exports=function(e){return n||(n=new a(null)),n.generate(e)},e.exports.Rand=a,a.prototype.generate=function(e){return this._rand(e)},a.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?a.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?a.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(a.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var i=r(827);if("function"!=typeof i.randomBytes)throw new Error("Not supported");a.prototype._rand=function(e){return i.randomBytes(e)}}catch(e){}},function(e,t,r){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var n=r(4),a=n.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return a(e,t,r)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=o),o.prototype=Object.create(a.prototype),i(a,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=a(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t,r){(function(t){var n=r(832),a=r(74);function i(e){var t,r=e.modulus.byteLength();do{t=new n(a(r))}while(t.cmp(e.modulus)>=0||!t.umod(e.prime1)||!t.umod(e.prime2));return t}function o(e,r){var a=function(e){var t=i(e);return{blinder:t.toRed(n.mont(e.modulus)).redPow(new n(e.publicExponent)).fromRed(),unblinder:t.invm(e.modulus)}}(r),o=r.modulus.byteLength(),s=new n(e).mul(a.blinder).umod(r.modulus),c=s.toRed(n.mont(r.prime1)),l=s.toRed(n.mont(r.prime2)),u=r.coefficient,d=r.prime1,h=r.prime2,p=c.redPow(r.exponent1).fromRed(),f=l.redPow(r.exponent2).fromRed(),m=p.isub(f).imul(u).umod(d).imul(h);return f.iadd(m).imul(a.unblinder).umod(r.modulus).toArrayLike(t,"be",o)}o.getr=i,e.exports=o}).call(this,r(4).Buffer)},function(e,t,r){"use strict";var n,a=t,i=r(186),o=r(389),s=r(31).assert;function c(e){"short"===e.type?this.curve=new o.short(e):"edwards"===e.type?this.curve=new o.edwards(e):this.curve=new o.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function l(e,t){Object.defineProperty(a,e,{configurable:!0,enumerable:!0,get:function(){var r=new c(t);return Object.defineProperty(a,e,{configurable:!0,enumerable:!0,value:r}),r}})}a.PresetCurve=c,l("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:i.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),l("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:i.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),l("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:i.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),l("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:i.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),l("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:i.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),l("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:i.sha256,gRed:!1,g:["9"]}),l("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:i.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{n=r(844)}catch(e){n=void 0}l("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:i.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",n]})},function(e,t,r){var n=t;n.utils=r(42),n.common=r(90),n.sha=r(838),n.ripemd=r(842),n.hmac=r(843),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},function(e,t,r){"use strict";(function(t){var n,a=r(4),i=a.Buffer,o={};for(n in a)a.hasOwnProperty(n)&&"SlowBuffer"!==n&&"Buffer"!==n&&(o[n]=a[n]);var s=o.Buffer={};for(n in i)i.hasOwnProperty(n)&&"allocUnsafe"!==n&&"allocUnsafeSlow"!==n&&(s[n]=i[n]);if(o.Buffer.prototype=i.prototype,s.from&&s.from!==Uint8Array.from||(s.from=function(e,t,r){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return i(e,t,r)}),s.alloc||(s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var n=i(e);return t&&0!==t.length?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n}),!o.kStringMaxLength)try{o.kStringMaxLength=t.binding("buffer").kStringMaxLength}catch(e){}o.constants||(o.constants={MAX_LENGTH:o.kMaxLength},o.kStringMaxLength&&(o.constants.MAX_STRING_LENGTH=o.kStringMaxLength)),e.exports=o}).call(this,r(9))},function(e,t,r){"use strict";const n=r(189).Reporter,a=r(91).EncoderBuffer,i=r(91).DecoderBuffer,o=r(30),s=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],c=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(s);function l(e,t,r){const n={};this._baseState=n,n.name=r,n.enc=e,n.parent=t||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}e.exports=l;const u=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];l.prototype.clone=function(){const e=this._baseState,t={};u.forEach((function(r){t[r]=e[r]}));const r=new this.constructor(t.parent);return r._baseState=t,r},l.prototype._wrap=function(){const e=this._baseState;c.forEach((function(t){this[t]=function(){const r=new this.constructor(this);return e.children.push(r),r[t].apply(r,arguments)}}),this)},l.prototype._init=function(e){const t=this._baseState;o(null===t.parent),e.call(this),t.children=t.children.filter((function(e){return e._baseState.parent===this}),this),o.equal(t.children.length,1,"Root node can have only one child")},l.prototype._useArgs=function(e){const t=this._baseState,r=e.filter((function(e){return e instanceof this.constructor}),this);e=e.filter((function(e){return!(e instanceof this.constructor)}),this),0!==r.length&&(o(null===t.children),t.children=r,r.forEach((function(e){e._baseState.parent=this}),this)),0!==e.length&&(o(null===t.args),t.args=e,t.reverseArgs=e.map((function(e){if("object"!=typeof e||e.constructor!==Object)return e;const t={};return Object.keys(e).forEach((function(r){r==(0|r)&&(r|=0);const n=e[r];t[n]=r})),t})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(e){l.prototype[e]=function(){const t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}})),s.forEach((function(e){l.prototype[e]=function(){const t=this._baseState,r=Array.prototype.slice.call(arguments);return o(null===t.tag),t.tag=e,this._useArgs(r),this}})),l.prototype.use=function(e){o(e);const t=this._baseState;return o(null===t.use),t.use=e,this},l.prototype.optional=function(){return this._baseState.optional=!0,this},l.prototype.def=function(e){const t=this._baseState;return o(null===t.default),t.default=e,t.optional=!0,this},l.prototype.explicit=function(e){const t=this._baseState;return o(null===t.explicit&&null===t.implicit),t.explicit=e,this},l.prototype.implicit=function(e){const t=this._baseState;return o(null===t.explicit&&null===t.implicit),t.implicit=e,this},l.prototype.obj=function(){const e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},l.prototype.key=function(e){const t=this._baseState;return o(null===t.key),t.key=e,this},l.prototype.any=function(){return this._baseState.any=!0,this},l.prototype.choice=function(e){const t=this._baseState;return o(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map((function(t){return e[t]}))),this},l.prototype.contains=function(e){const t=this._baseState;return o(null===t.use),t.contains=e,this},l.prototype._decode=function(e,t){const r=this._baseState;if(null===r.parent)return e.wrapResult(r.children[0]._decode(e,t));let n,a=r.default,o=!0,s=null;if(null!==r.key&&(s=e.enterKey(r.key)),r.optional){let n=null;if(null!==r.explicit?n=r.explicit:null!==r.implicit?n=r.implicit:null!==r.tag&&(n=r.tag),null!==n||r.any){if(o=this._peekTag(e,n,r.any),e.isError(o))return o}else{const n=e.save();try{null===r.choice?this._decodeGeneric(r.tag,e,t):this._decodeChoice(e,t),o=!0}catch(e){o=!1}e.restore(n)}}if(r.obj&&o&&(n=e.enterObject()),o){if(null!==r.explicit){const t=this._decodeTag(e,r.explicit);if(e.isError(t))return t;e=t}const n=e.offset;if(null===r.use&&null===r.choice){let t;r.any&&(t=e.save());const n=this._decodeTag(e,null!==r.implicit?r.implicit:r.tag,r.any);if(e.isError(n))return n;r.any?a=e.raw(t):e=n}if(t&&t.track&&null!==r.tag&&t.track(e.path(),n,e.length,"tagged"),t&&t.track&&null!==r.tag&&t.track(e.path(),e.offset,e.length,"content"),r.any||(a=null===r.choice?this._decodeGeneric(r.tag,e,t):this._decodeChoice(e,t)),e.isError(a))return a;if(r.any||null!==r.choice||null===r.children||r.children.forEach((function(r){r._decode(e,t)})),r.contains&&("octstr"===r.tag||"bitstr"===r.tag)){const n=new i(a);a=this._getUse(r.contains,e._reporterState.obj)._decode(n,t)}}return r.obj&&o&&(a=e.leaveObject(n)),null===r.key||null===a&&!0!==o?null!==s&&e.exitKey(s):e.leaveKey(s,r.key,a),a},l.prototype._decodeGeneric=function(e,t,r){const n=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,n.args[0],r):/str$/.test(e)?this._decodeStr(t,e,r):"objid"===e&&n.args?this._decodeObjid(t,n.args[0],n.args[1],r):"objid"===e?this._decodeObjid(t,null,null,r):"gentime"===e||"utctime"===e?this._decodeTime(t,e,r):"null_"===e?this._decodeNull(t,r):"bool"===e?this._decodeBool(t,r):"objDesc"===e?this._decodeStr(t,e,r):"int"===e||"enum"===e?this._decodeInt(t,n.args&&n.args[0],r):null!==n.use?this._getUse(n.use,t._reporterState.obj)._decode(t,r):t.error("unknown tag: "+e)},l.prototype._getUse=function(e,t){const r=this._baseState;return r.useDecoder=this._use(e,t),o(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},l.prototype._decodeChoice=function(e,t){const r=this._baseState;let n=null,a=!1;return Object.keys(r.choice).some((function(i){const o=e.save(),s=r.choice[i];try{const r=s._decode(e,t);if(e.isError(r))return!1;n={type:i,value:r},a=!0}catch(t){return e.restore(o),!1}return!0}),this),a?n:e.error("Choice not matched")},l.prototype._createEncoderBuffer=function(e){return new a(e,this.reporter)},l.prototype._encode=function(e,t,r){const n=this._baseState;if(null!==n.default&&n.default===e)return;const a=this._encodeValue(e,t,r);return void 0===a||this._skipDefault(a,t,r)?void 0:a},l.prototype._encodeValue=function(e,t,r){const a=this._baseState;if(null===a.parent)return a.children[0]._encode(e,t||new n);let i=null;if(this.reporter=t,a.optional&&void 0===e){if(null===a.default)return;e=a.default}let o=null,s=!1;if(a.any)i=this._createEncoderBuffer(e);else if(a.choice)i=this._encodeChoice(e,t);else if(a.contains)o=this._getUse(a.contains,r)._encode(e,t),s=!0;else if(a.children)o=a.children.map((function(r){if("null_"===r._baseState.tag)return r._encode(null,t,e);if(null===r._baseState.key)return t.error("Child should have a key");const n=t.enterKey(r._baseState.key);if("object"!=typeof e)return t.error("Child expected, but input is not object");const a=r._encode(e[r._baseState.key],t,e);return t.leaveKey(n),a}),this).filter((function(e){return e})),o=this._createEncoderBuffer(o);else if("seqof"===a.tag||"setof"===a.tag){if(!a.args||1!==a.args.length)return t.error("Too many args for : "+a.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");const r=this.clone();r._baseState.implicit=null,o=this._createEncoderBuffer(e.map((function(r){const n=this._baseState;return this._getUse(n.args[0],e)._encode(r,t)}),r))}else null!==a.use?i=this._getUse(a.use,r)._encode(e,t):(o=this._encodePrimitive(a.tag,e),s=!0);if(!a.any&&null===a.choice){const e=null!==a.implicit?a.implicit:a.tag,r=null===a.implicit?"universal":"context";null===e?null===a.use&&t.error("Tag could be omitted only for .use()"):null===a.use&&(i=this._encodeComposite(e,s,r,o))}return null!==a.explicit&&(i=this._encodeComposite(a.explicit,!1,"context",i)),i},l.prototype._encodeChoice=function(e,t){const r=this._baseState,n=r.choice[e.type];return n||o(!1,e.type+" not found in "+JSON.stringify(Object.keys(r.choice))),n._encode(e.value,t)},l.prototype._encodePrimitive=function(e,t){const r=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&r.args)return this._encodeObjid(t,r.reverseArgs[0],r.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,r.args&&r.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},l.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},l.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)}},function(e,t,r){"use strict";const n=r(1);function a(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function i(e,t){this.path=e,this.rethrow(t)}t.Reporter=a,a.prototype.isError=function(e){return e instanceof i},a.prototype.save=function(){const e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},a.prototype.restore=function(e){const t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},a.prototype.enterKey=function(e){return this._reporterState.path.push(e)},a.prototype.exitKey=function(e){const t=this._reporterState;t.path=t.path.slice(0,e-1)},a.prototype.leaveKey=function(e,t,r){const n=this._reporterState;this.exitKey(e),null!==n.obj&&(n.obj[t]=r)},a.prototype.path=function(){return this._reporterState.path.join("/")},a.prototype.enterObject=function(){const e=this._reporterState,t=e.obj;return e.obj={},t},a.prototype.leaveObject=function(e){const t=this._reporterState,r=t.obj;return t.obj=e,r},a.prototype.error=function(e){let t;const r=this._reporterState,n=e instanceof i;if(t=n?e:new i(r.path.map((function(e){return"["+JSON.stringify(e)+"]"})).join(""),e.message||e,e.stack),!r.options.partial)throw t;return n||r.errors.push(t),t},a.prototype.wrapResult=function(e){const t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},n(i,Error),i.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,i),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}},function(e,t,r){"use strict";function n(e){const t={};return Object.keys(e).forEach((function(r){(0|r)==r&&(r|=0);const n=e[r];t[n]=r})),t}t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=n(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=n(t.tag)},function(e,t,r){"use strict";e.exports=r(878)(r(882))},function(e,t,r){"use strict";var n=r(912),a=r(193),i=r(80),o=r(406),s=r(914);function c(e,t,r){var n=this._refs[r];if("string"==typeof n){if(!this._refs[n])return c.call(this,e,t,n);n=this._refs[n]}if((n=n||this._schemas[r])instanceof o)return f(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var a,i,s,u=l.call(this,t,r);return u&&(a=u.schema,t=u.root,s=u.baseId),a instanceof o?i=a.validate||e.call(this,a.schema,t,void 0,s):void 0!==a&&(i=f(a,this._opts.inlineRefs)?a:e.call(this,a,t,void 0,s)),i}function l(e,t){var r=n.parse(t),a=g(r),i=m(this._getId(e.schema));if(0===Object.keys(e.schema).length||a!==i){var s=v(a),c=this._refs[s];if("string"==typeof c)return u.call(this,e,c,r);if(c instanceof o)c.validate||this._compile(c),e=c;else{if(!((c=this._schemas[s])instanceof o))return;if(c.validate||this._compile(c),s==v(t))return{schema:c,root:e,baseId:i};e=c}if(!e.schema)return;i=m(this._getId(e.schema))}return h.call(this,r,i,e.schema,e)}function u(e,t,r){var n=l.call(this,e,t);if(n){var a=n.schema,i=n.baseId;e=n.root;var o=this._getId(a);return o&&(i=b(i,o)),h.call(this,r,i,a,e)}}e.exports=c,c.normalizeId=v,c.fullPath=m,c.url=b,c.ids=function(e){var t=v(this._getId(e)),r={"":t},o={"":m(t,!1)},c={},l=this;return s(e,{allKeys:!0},(function(e,t,s,u,d,h,p){if(""!==t){var f=l._getId(e),m=r[u],g=o[u]+"/"+d;if(void 0!==p&&(g+="/"+("number"==typeof p?p:i.escapeFragment(p))),"string"==typeof f){f=m=v(m?n.resolve(m,f):f);var y=l._refs[f];if("string"==typeof y&&(y=l._refs[y]),y&&y.schema){if(!a(e,y.schema))throw new Error('id "'+f+'" resolves to more than one schema')}else if(f!=v(g))if("#"==f[0]){if(c[f]&&!a(e,c[f]))throw new Error('id "'+f+'" resolves to more than one schema');c[f]=e}else l._refs[f]=g}r[t]=m,o[t]=g}})),c},c.inlineRef=f,c.schema=l;var d=i.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function h(e,t,r,n){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var a=e.fragment.split("/"),o=1;o<a.length;o++){var s=a[o];if(s){if(void 0===(r=r[s=i.unescapeFragment(s)]))break;var c;if(!d[s]&&((c=this._getId(r))&&(t=b(t,c)),r.$ref)){var u=b(t,r.$ref),h=l.call(this,n,u);h&&(r=h.schema,n=h.root,t=h.baseId)}}}return void 0!==r&&r!==n.schema?{schema:r,root:n,baseId:t}:void 0}}var p=i.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function f(e,t){return!1!==t&&(void 0===t||!0===t?function e(t){var r;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if("object"==typeof(r=t[n])&&!e(r))return!1}else for(var a in t){if("$ref"==a)return!1;if("object"==typeof(r=t[a])&&!e(r))return!1}return!0}(e):t?function e(t){var r,n=0;if(Array.isArray(t)){for(var a=0;a<t.length;a++)if("object"==typeof(r=t[a])&&(n+=e(r)),n==1/0)return 1/0}else for(var i in t){if("$ref"==i)return 1/0;if(p[i])n++;else if("object"==typeof(r=t[i])&&(n+=e(r)+1),n==1/0)return 1/0}return n}(e)<=t:void 0)}function m(e,t){return!1!==t&&(e=v(e)),g(n.parse(e))}function g(e){return n.serialize(e).split("#")[0]+"#"}var y=/#\/?$/;function v(e){return e?e.replace(y,""):""}function b(e,t){return t=v(t),n.resolve(e,t)}},function(e,t,r){"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,a,i;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(a=n;0!=a--;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(i=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=n;0!=a--;)if(!Object.prototype.hasOwnProperty.call(r,i[a]))return!1;for(a=n;0!=a--;){var o=i[a];if(!e(t[o],r[o]))return!1}return!0}return t!=t&&r!=r}},function(e,t,r){"use strict";var n=r(192);function a(e,t,r){this.message=r||a.message(e,t),this.missingRef=n.url(e,t),this.missingSchema=n.normalizeId(n.fullPath(this.missingRef))}function i(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}e.exports={Validation:i((function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0})),MissingRef:i(a)},a.message=function(e,t){return"can't resolve reference "+t+" from id "+e}},function(e,t,r){"use strict";e.exports={metaSchemaRef:function(e){var t=e._opts.defaultMeta;return"string"==typeof t?{$ref:t}:e.getSchema("http://json-schema.org/draft-07/schema")?{$ref:"http://json-schema.org/draft-07/schema"}:(console.warn("meta schema not defined"),{})}}},function(e,t,r){var n=r(92)("socket.io-parser"),a=r(68),i=r(981),o=r(417),s=r(418);function c(){}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=c,t.Decoder=d;var l=t.ERROR+'"encode error"';function u(e){var r=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(r+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(r+=e.nsp+","),null!=e.id&&(r+=e.id),null!=e.data){var a=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===a)return l;r+=a}return n("encoded %j as %s",e,r),r}function d(){this.reconstructor=null}function h(e){this.reconPack=e,this.buffers=[]}function p(e){return{type:t.ERROR,data:"parser error: "+e}}c.prototype.encode=function(e,r){(n("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type)?function(e,t){i.removeBlobs(e,(function(e){var r=i.deconstructPacket(e),n=u(r.packet),a=r.buffers;a.unshift(n),t(a)}))}(e,r):r([u(e)])},a(d.prototype),d.prototype.add=function(e){var r;if("string"==typeof e)r=function(e){var r=0,a={type:Number(e.charAt(0))};if(null==t.types[a.type])return p("unknown packet type "+a.type);if(t.BINARY_EVENT===a.type||t.BINARY_ACK===a.type){for(var i=r+1;"-"!==e.charAt(++r)&&r!=e.length;);var s=e.substring(i,r);if(s!=Number(s)||"-"!==e.charAt(r))throw new Error("Illegal attachments");a.attachments=Number(s)}if("/"===e.charAt(r+1)){for(i=r+1;++r;){if(","===(l=e.charAt(r)))break;if(r===e.length)break}a.nsp=e.substring(i,r)}else a.nsp="/";var c=e.charAt(r+1);if(""!==c&&Number(c)==c){for(i=r+1;++r;){var l;if(null==(l=e.charAt(r))||Number(l)!=l){--r;break}if(r===e.length)break}a.id=Number(e.substring(i,r+1))}if(e.charAt(++r)){var u=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(r));if(!(!1!==u&&(a.type===t.ERROR||o(u))))return p("invalid payload");a.data=u}return n("decoded %s as %j",e,a),a}(e),t.BINARY_EVENT===r.type||t.BINARY_ACK===r.type?(this.reconstructor=new h(r),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",r)):this.emit("decoded",r);else{if(!s(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(r=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",r))}},d.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},h.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=i.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},h.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,r){var n=r(984),a=r(198);e.exports=function(e){var t=e.xdomain,r=e.xscheme,i=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||n))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!r&&i)return new XDomainRequest}catch(e){}if(!t)try{return new(a[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},function(e,t){e.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},function(e,t,r){var n=r(81),a=r(68);function i(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}e.exports=i,a(i.prototype),i.prototype.onError=function(e,t){var r=new Error(e);return r.type="TransportError",r.description=t,this.emit("error",r),this},i.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},i.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},i.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},i.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},i.prototype.onData=function(e){var t=n.decodePacket(e,this.socket.binaryType);this.onPacket(t)},i.prototype.onPacket=function(e){this.emit("packet",e)},i.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t,r){"use strict";const n=r(25).fromCallback,a=r(1023);e.exports={readJson:n(a.readFile),readJsonSync:a.readFileSync,writeJson:n(a.writeFile),writeJsonSync:a.writeFileSync}},function(e,t,r){function n(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var a=r(202),i=r(93),o=r(203),s=r(205),c=r(207),l=r(1041),u=(r(132),r(131)),d=r(214),h=r(213),p=["arcade","observables","tournaments"];e.exports=ArcadeMain={render:function(e,t){if(1!=t.viewing_arcade_initialization_page){document.getElementById("arcade-main")&&document.getElementById("arcade-main").destroy();for(var r=0,n=0;n<t.games.length;n++)if(t.isMyGame(t.games[n],e)){t.games[n].isMine=!0;var c=t.games[r];t.games[r]=t.games[n],t.games[n]=c,r++}else t.games[n].isMine=!1;document.getElementById("arcade-container")||e.browser.addElementToDom(i(e,t)),document.querySelector(".arcade-main")||e.browser.addElementToDom(a(e,t),"arcade-container"),p.forEach((function(t,r){document.querySelector("#tab-button-"+t).onclick=function(){e.browser.logMatomoEvent("Arcade","ArcadeTabNavigationClick",t),p.forEach((function(e,r){e===t?(document.querySelector("#"+e+"-hero").classList.remove("arcade-tab-hidden"),document.querySelector("#tab-button-"+e).classList.add("active-tab-button")):(document.querySelector("#"+e+"-hero").classList.add("arcade-tab-hidden"),document.querySelector("#tab-button-"+e).classList.remove("active-tab-button"))}))}})),document.querySelector(".arcade-hero")&&(t.games.forEach((function(r,n){e.browser.addElementToElement(u(e,t,r,n),document.querySelector(".arcade-hero"))})),t.observer.forEach((function(r,n){e.browser.addElementToElement(d(e,t,r,n,e.crypto.stringToBase64(JSON.stringify(r))),document.querySelector(".observables-hero"))}))),document.querySelectorAll(".observe-game-btn").forEach((function(r,n){r.onclick=function(r){var n=r.currentTarget.getAttribute("data-gameobj");"watch"!==r.currentTarget.getAttribute("data-cmd")||h.observeGame(e,t,n)}}));var h=this;if(t.games.forEach((function(r,n){try{document.querySelectorAll("#invite-".concat(r.transaction.sig," .invite-tile-button")).forEach((function(r,n){r.onclick=function(r){var n=r.currentTarget.getAttribute("data-sig"),a=r.currentTarget.getAttribute("data-cmd");e.browser.logMatomoEvent("Arcade","ArcadeAcceptInviteButtonClick",a),"delete"!==a?"cancel"!==a?"join"!==a?"continue"!==a||h.continueGame(e,t,n):h.joinGame(e,t,n):h.cancelGame(e,t,n):h.deleteGame(e,t,n)}}))}catch(e){}})),o.render(e,t),s.render(e,t),0==t.games.length)new l(e).render(e,t,"arcade","arcade-hero");e.browser.addIdentifiersToDom();try{0==e.browser.isSupportedBrowser(navigator.userAgent)&&(document.querySelector(".alert-banner").style.display="block")}catch(e){}}},attachEvents:function(e,t){},joinGame:function(e,t,r){return(a=regeneratorRuntime.mark((function n(){var a,i,o,s,l,u,d,p,f,m,g;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=null,t.games.forEach((function(e){e.transaction.sig===r&&(a=e)})),a){n.next=5;break}return console.log("ERR: game not found"),n.abrupt("return");case 5:if(n.prev=5,i=a.msg,""==(o=i.options).crypto||null==o.crypto){n.next=39;break}if(o.crypto===e.wallet.returnPreferredCrypto().ticker){n.next=12;break}return salert("You must set ".concat(o.crypto," as your preferred crypto to join this game")),n.abrupt("return");case 12:s=null,n.prev=13,s=e.wallet.returnCryptoModuleByTicker(o.crypto),n.next=25;break;case 17:if(n.prev=17,n.t0=n.catch(13),!n.t0.startsWith("Module Not Found")){n.next=24;break}return salert("This game requires "+o.crypto+" crypto to play!"),n.abrupt("return");case 24:throw n.t0;case 25:if(confirm("This game requires "+o.crypto+" crypto to play. OK?")){n.next=28;break}return n.abrupt("return");case 28:if(!(parseFloat(o.stake)>0)){n.next=39;break}return l=e.wallet.returnPreferredCrypto(o.crypto).returnAddress(),(u=new h(e)).balance(e,t,l,o.crypto,(function(){})),u.hideOverlay(),n.next=35,s.returnBalance();case 35:if(!((d=n.sent)<o.stake)){n.next=39;break}return salert("You do not have enough "+o.crypto+"! Balance: "+d),n.abrupt("return");case 39:n.next=45;break;case 41:return n.prev=41,n.t1=n.catch(5),console.log("ERROR checking if crypto-required: "+n.t1),n.abrupt("return");case 45:if(p=parseInt(a.msg.players_needed),f=a.msg.players.length,!(p>f+1)){n.next=53;break}return m=t.createJoinTransaction(a),e.network.propagateTransaction(m),t.joinGameOnOpenList(m),salert("Joining game! Please wait a moment"),n.abrupt("return");case 53:if(a.transaction.from[0].add!=e.wallet.returnPublicKey()){n.next=58;break}a.returnMessage().players.length>1&&salert("You created this game! Waiting for enough players to join we can start..."),n.next=74;break;case 58:if(!e.options.games){n.next=73;break}if(-1==(g=e.options.games.find((function(e){return e.id==r})))||!g){n.next=73;break}if(1!=g.initializing){n.next=68;break}return salert("Accepted Game! It may take a minute for your browser to update -- please be patient!"),c.render(e,data),c.attachEvents(e,data),n.abrupt("return");case 68:return g.ts=(new Date).getTime(),g.initialize_game_run=0,e.storage.saveOptions(),window.location="/"+g.module.toLowerCase(),n.abrupt("return");case 73:t.sendPeerRequestWithFilter((function(){var e={request:"rawSQL",data:{}};return e.data.module="Arcade",e.data.sql='SELECT is_game_already_accepted FROM games WHERE game_id = "'.concat(r,'"'),e.data.game_id=r,e}),(function(r){if(null!=r.rows)if(r.rows.length>0){if(1==r.rows[0].game_still_open||0==r.rows[0].game_still_open&&p>2){var n=a.transaction;Object.assign({msg:{players_array:null}},n),salert("Game accepted - please wait");var i=t.createAcceptTransaction(a);return t.app.network.propagateTransaction(i),c.render(e,t),void c.attachEvents(e,t)}salert("Sorry, this game has been accepted already!")}else salert("Sorry, this game has already been accepted!");else console.log("ERROR 458103: cannot fetch information on whether game already accepted!")}));case 74:case"end":return n.stop()}}),n,null,[[5,41],[13,17]])})),function(){var e=this,t=arguments;return new Promise((function(r,i){var o=a.apply(e,t);function s(e){n(o,r,i,s,c,"next",e)}function c(e){n(o,r,i,s,c,"throw",e)}s(void 0)}))})();var a},continueGame:function(e,t,r){var n=e.options.games.find((function(e){return e.id==r}));if(-1!=n&&n)return 1==n.initializing?(salert("Accepted Game! It may take a minute for your browser to update -- please be patient!"),c.render(e,data),void c.attachEvents(e,data)):(n.ts=(new Date).getTime(),n.initialize_game_run=0,e.storage.saveOptions(),void(window.location="/"+n.module.toLowerCase()))},cancelGame:function(e,t,r){var n=r,a="",i=[];if(e.options.games)for(var o=0;o<e.options.games.length;o++)void 0!==e.options.games[o].transaction?a=e.options.games[o].transaction.sig:void 0!==e.options.games[o].id&&(a=e.options.games[o].id),a==n&&(e.options.games[o].over=1,i=e.options.games[o].players,e.options.games.splice(o,1),e.storage.saveOptions());for(var s=e.wallet.createUnsignedTransactionWithDefaultFee(),c=e.wallet.returnPublicKey(),l=0;l<i.length;l++)i[l]!=c&&s.transaction.to.push(e.wallet.createSlip(i[l]));var u={sig:n,status:"close",request:"close",winner:i[0]==c?i[1]:i[0],module:"Arcade"};s.msg=u,s=e.wallet.signTransaction(s),e.network.propagateTransaction(s),this.removeGameFromList(n)},deleteGame:function(e,t,r){if(salert("Delete game id: ".concat(r)),e.options.games){e.options.games;for(var n=0;n<e.options.games.length;n++)if(e.options.games[n].id==r){var a=e.options.games[n];if(0==a.over)e.modules.returnModule(a.module).resignGame(r);else e.options.games[n].over=1,e.options.games[n].last_block=e.blockchain.last_bid,e.storage.saveOptions()}this.removeGameFromList(r)}},observeGame:function(e,t,r){console.log("ABOUT TO JOIN GAME"),t.observeGame(r)},removeGameFromList:function(e){document.getElementById("arcade-hero").removeChild(document.getElementById("invite-".concat(e)))}}},function(e,t,r){r(131);e.exports=ArcadeMainTemplate=function(e,t){return'\n    <div id="arcade-main" class="arcade-main">\n\n      <div class="alert-banner">\n        <div class="alert-icon">&#9888;</div>\n        <div class="alert-body">\n\t  <div class="alert-title">Warning</div>\n \t  <div class="alert-notice">Saito requires a standards-compliant browser: yours may freeze <a href="#" style="text-decoration:none">click for details</a></div>\n        </div>\n      </div>\n\n      <div id="arcade-tab-buttons">\n        <div id="tab-button-arcade" class="tab-button active-tab-button"><span>Invites</span></div>\n        <div id="tab-button-observables" class="tab-button"><span>Watch</span></div>\n        <div id="tab-button-tournaments" class="tab-button"><span>Tournaments</span></div>\n      </div>\n      <div id="arcade-tabs">\n        <div id="arcade-hero" class="arcade-hero">\n        </div>\n        <div id="observables-hero" class="observables-hero arcade-tab-hidden">\n        </div>\n        <div id="tournaments-hero" class="tournaments-hero arcade-tab-hidden">\n          coming soon\n        </div>\n      </div>\n      <div id="arcade-sub" class="arcade-sub">\n      </div>\n    </div>\n  '}},function(e,t,r){var n=r(204);e.exports=ArcadePosts={render:function(e,t){document.querySelector(".arcade-posts")||e.browser.addElementToDom(n(),"arcade-sub"),e.modules.respondTo("arcade-posts").forEach((function(t){null!=t&&t.respondTo("arcade-posts").render(e,t)}))},attachEvents:function(e,t){e.modules.respondTo("arcade-posts").forEach((function(t){null!=t&&t.respondTo("arcade-posts").attachEvents(e,t)}))}}},function(e,t){e.exports=ArcadePostsTemplate=function(){return'\n    <div class="arcade-posts">\n      <div id="arcade-posts-add" class="arcade-posts-add"><i id="arcade-posts-insert-add-contact" class="icon-med fas fa-plus"></i></div>\n      <div id="arcade-posts"></div>\n    </div>\n  '}},function(e,t,r){var n=r(206);e.exports=ArcadeInfobox={render:function(e,t){document.querySelector(".arcade-infobox")||e.browser.addElementToDom(n(),"arcade-sub"),e.modules.respondTo("arcade-infobox").forEach((function(r){var n=r.respondTo("arcade-infobox");n.render(e,t),n.attachEvents(e,t)}))},attachEvents:function(e,t){}}},function(e,t){e.exports=ArcadeInfoboxTemplate=function(){return'\n    <div id="arcade-infobox" class="arcade-infobox">\n    </div>\n  '}},function(e,t,r){var n=r(208),a=r(209);e.exports=GameLoader={render:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.viewing_arcade_initialization_page=1,document.getElementById("arcade-main").innerHTML=""!=r?a(r):n()},attachEvents:function(e,t){try{document.querySelector(".start-game-btn").addEventListener("click",(function(t){for(var r=t.currentTarget.id,n=0;n<e.options.games.length;n++)if(e.options.games[n].id==r){e.browser.logMatomoEvent("Arcade","StartGameClick",e.options.games[n].module),e.options.games[n].ts=(new Date).getTime(),e.options.games[n].initialize_game_run=0,e.storage.saveOptions();for(var a=0;a<e.modules.mods.length;a++)if(e.modules.mods[a].name==e.options.games[n].module)return void(window.location="/"+e.modules.mods[a].returnSlug());break}}))}catch(e){}}}},function(e,t){e.exports=GameLoaderTemplate=function(){return'  \n    <div id="arcade-initialize-game-container" class="arcade-initialize-game-container">\n      <center><div id="game-loader-title" class="game-loader-title">Your Game is Initializing</div></center>\n      <div class="game-loader-spinner loader" id="game-loader-spinner"></div>\n    </div>\n  '}},function(e,t){e.exports=GameLoaderTemplate=function(e){return' \n      <div class="arcade-initialize-game-container">\n        <center>Your game is ready to start!</center>\n        <button class="start-game-btn" id="'.concat(e,'">start game</button>\n      </div>\n  ')}},function(e,t){e.exports=ArcadeGameDetailsTemplate=function(e,t,r){return'\n    <div class="game-wizard">\n      <form id="game-wizard-form" class="game-wizard-form">\n\n\t<div class="game-wizard-header">\n          <div class="game-wizard-image"><img class="game-image" src="/imperium/img/arcade.jpg"/></div>\n\t  <div class="game-wizard-intro">\n\t    <input type="hidden" name="gamename" value="'.concat(r.msg.game,'" />\n            <div class="game-wizard-title">Red Imperium</div>\n            <div class="game-wizard-description">Red Imperium is a multi-player space exploration and conquest simulator. Each player controls a unique faction vying for political control of the galaxy in the waning days of a dying Empire.</div>\n            <div class="game-wizard-status"></div>\n\t  </div>\n\t</div>\n        \n\n\t<div class="game-wizard-controls">\n\n          <div id="game-wizard-players" class="game-wizard-players">\n            <select class="game-wizard-players-select" name="game-wizard-players-select">\n            </select>\n\t    <div class="game-wizard-options-toggle"><span class="game-wizard-options-toggle-text">advanced options...</span></div>\n          </div>\n\n\t  <div id="game-wizard-invite" class="game-wizard-invite">\t\n            <button type="button" id="game-invite-btn" class="game-invite-btn">Create New Game</button>\n\t  </div>\n\n\t</div>\n\n        <div id="game-wizard-publisher-message" class="game-wizard-publisher-message"></div>\n\n        <div id="game-wizard-advanced-options-overlay" class="game-wizard-advanced-options-overlay"></div>\n\n      </form>\n    </div>\n')}},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(212),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t}var t,r,i;return t=e,(r=[{key:"render",value:function(e,t){document.querySelector(".game-overlay-backdrop")||e.browser.addElementToDom(a(),"game-wizard-advanced-options-overlay");var r=document.querySelector(".game-overlay");r.style.display="none",r.innerHTML=t.returnGameOptionsHTML()}},{key:"attachEvents",value:function(e,t){}},{key:"showOverlay",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.render(e,t);var a=this,i=document.querySelector(".game-overlay"),o=document.querySelector(".game-overlay-backdrop");i.innerHTML=r,i.style.display="block",o.style.display="block",o.style.opacity=1,o.style.backgroundColor="#111",o.onclick=function(e){a.hideOverlay(n)}}},{key:"hideOverlay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=document.querySelector(".game-overlay"),r=document.querySelector(".game-overlay-backdrop");t.style.display="none",r.style.display="none",null!=e&&e()}}])&&n(t.prototype,r),i&&n(t,i),e}();e.exports=i},function(e,t){e.exports=AdvancedOverlayTemplate=function(){return'  \n    <div id="game-overlay" class="game-overlay"></div>\n    <div id="game-overlay-backdrop" class="game-overlay-backdrop"></div>\n  '}},function(t,r,n){function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n(1044);var i=n(1045),o=n(1046),s=n(1047),c=n(437),l=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.app=e,this.game_crypto_transfer_manager_overlay=new c(e)}var r,n,l;return r=t,(n=[{key:"render",value:function(e,t){}},{key:"attachEvents",value:function(e,t){}},{key:"balance",value:function(t,r,n,a){var i={};i.address=n,i.ticker=a,this.game_crypto_transfer_manager_overlay.showOverlay(t,r,s(t,i)),document.querySelector(".game-overlay-backdrop").onclick=e={}}},{key:"send",value:function(t,r,n,a,o,s,c){var l=this,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,d={};d.amount=o,d.from=n,d.to=a,d.ticker=c,this.game_crypto_transfer_manager_overlay.showOverlay(t,r,i(t,d)),document.querySelector(".game-overlay-backdrop").onclick=e={},document.querySelector(".crypto_transfer_btn").onclick=function(e){l.game_crypto_transfer_manager_overlay.hideOverlay(u)}}},{key:"receive",value:function(t,r,n,a,i,s,c){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,u={};u.amount=i,u.from=n,u.to=a,u.ticker=c,this.game_crypto_transfer_manager_overlay.showOverlay(t,r,o(t,u)),document.querySelector(".game-overlay-backdrop").onclick=e={},null!=l&&l()}},{key:"hideOverlay",value:function(){this.game_crypto_transfer_manager_overlay.hideOverlay()}}])&&a(r.prototype,n),l&&a(r,l),t}();t.exports=l},function(e,t){e.exports=ArcadeObserveTemplate=function(e,t,n,a,i){for(var o=n.module,s=0;s<e.modules.mods.length;s++)e.modules.mods[s].name===o&&(o=e.modules.mods[s].returnSlug());var c='<div class="playerInfo" style="grid-template-columns: repeat('.concat(n.players_array.split("_").length,', 1fr);">'),l=(new Date).getTime(),u=e.browser.formatDate(l);return n.players_array.split("_").forEach((function(t){var r=e.keys.returnIdenticon(t);c+='<div class="player-slot tip id-'.concat(t,'"><img class="identicon" src="').concat(r,'"><div class="tiptext">').concat(e.browser.returnAddressHTML(t),"</div></div>")})),c+="</div>",'\n    <div id="invite-'.concat(n.game_id,'" class="arcade-tile" style="background-image: url(/\'').concat(o,'/img/arcade.jpg\');">\n      <div class="invite-tile-wrapper">\n        <div class="game-inset-img" style="background-image: url(\'/').concat(o,'/img/arcade.jpg\');"></div>\n        <div class="invite-col-2">\n          <div class="gameName" style="font-size:0.9em">').concat(u.day," ").concat(u.month," ").concat(u.year,"</div>\n          ").concat(c,'\n        </div>\n        <div class="gameShortDescription">').concat(r(e,n),'</div>\n\t<div class="gameButtons">\n          <button data-sig="').concat(n.game_id,'" data-gameobj="').concat(i,'" data-cmd="watch" class="button observe-game-btn">WATCH</button>\n        </div>\n      </div>\n    </div>\n    ')};var r=function(e,t){var r="";if(t.msg){var n=e.modules.returnModule(t.msg.game);if(n){var a=n.returnShortGameOptionsArray(t.msg.options);for(var i in a){r+='<div class="gameShortDescriptionRow"><div class="gameShortDescriptionKey">'.concat(i,': </div><div class="gameShortDescriptionValue">').concat(a[i],"</div></div>")}}}return r}},function(e,t,r){var n=r(5),a=r(216),i=(r(217),r(46),r(438)),o=r(132),s=r(93);e.exports=ArcadeSidebar={render:function(e,t){document.getElementById("arcade-container")||e.browser.addElementToDom(s()),document.querySelector(".arcade-sidebar")||e.browser.addElementToDom(a(),"arcade-container"),e.modules.respondTo("email-chat").forEach((function(t){null!=t&&t.respondTo("email-chat").render(e,t)}));var r=document.querySelector(".arcade-apps");e.modules.respondTo("arcade-games").forEach((function(e){var t=e.name;try{e.gamename&&(t=e.gamename)}catch(e){}var n="";try{e.status&&(n='<div class="tiptext">This game is: '+e.status+".</div>")}catch(e){}document.getElementById(e.name)||(r.innerHTML+='<li class="arcade-navigator-item tip" id="'.concat(e.name,'">').concat(t).concat(n,"</li>"))}))},attachEvents:function(e,t){document.getElementById("games-add-game")&&(null!=e.modules.returnModule("AppStore")&&(document.getElementById("games-add-game").onclick=function(){var t=e.modules.returnModule("AppStore");if(t){t.openAppstoreOverlay({search:"",category:"Entertainment",featured:1})}}),Array.from(document.getElementsByClassName("arcade-navigator-item")).forEach((function(r){r.addEventListener("click",(function(r){var a=r.currentTarget.id;e.browser.logMatomoEvent("Arcade","ArcadeSidebarInviteCreateClick",a);var s=function(){var r=new n.transaction;r.msg.game=a,o.render(e,t,r),o.attachEvents(e,t,r)};if(""==e.keys.returnIdentifierByPublicKey(e.wallet.returnPublicKey())&&1!=e.options.wallet.anonymous)return t.modal_register_username=new i(e,s),t.modal_register_username.render(e,t),void t.modal_register_username.attachEvents(e,t);s()}))})),e.modules.respondTo("email-chat").forEach((function(r){r.respondTo("email-chat").attachEvents(e,t)})))}}},function(e,t){e.exports=ArcadeSidebarTemplate=function(){return'\n  <div class="arcade-sidebar" id="arcade-sidebar">\n    <div class="arcade-controls">\n      <div class="arcade-bars-menu">\n        <div class="arcade-navigator-bars-menu register-username-check">\n          <div class="arcade-sidebar-active-games-header" style="display:flex; align-items:center;justify-content: space-between">\n            <h2>Games</h2>\n            <i id="games-add-game" class="icon-med fas fa-plus"></i>\n          </div>\n          <div class="arcade-apps-wrapper">\n            <ul class="arcade-apps" id="arcade-apps"></ul>\n          </div>\n        </div>\n    </div>\n  </div>\n  <div id="arcade-announcement" class="arcade-announcement">Like large multiplayer games? See our upcoming <a href="https://docs.google.com/spreadsheets/d/1f1QrDFd8f6RaIJhV5m-pQFBoAO9WZGxpCoJmdKBaQwI/edit#gid=0" target="_community">Community Games and Events</a>.</div>\n  <div id="email-chat" class="email-chat"></div>\n  '}},function(e,t){e.exports=ArcadeGamesFullListOverlayTemplate=function(e,t){var r='\n    <div id="installed-games" class="installed-games">\';\n       <h1>Installed Games</h1>\n       <div class="return-to-arcade" id="return-to-arcade"><i class="icon-large fas fa-times-circle"></i></div>\n       <div class="start-game-list">\n  ';return e.modules.respondTo("arcade-games").forEach((function(e){var t="/"+e.slug+"/img/arcade.jpg",n="Players: ",a=e.minPlayers,i=e.maxPlayers;n+=a==i?a:a+"-"+i,r+='<div class="arcade-game-list-item" data-game="'.concat(e.name,'">\n         <div class="arcade-game-list-image" style="background-image: url(').concat(t,');"></div>\n         <div class="arcade-gema-list-details">\n           <div class="arcade-game-list-title"><h4>').concat(e.name,'</h4></div>\n           <div class="arcade-game-list-type">').concat(e.type,'</h4></div>\n           <div class="arcade-game-list-players">').concat(n,"</h4></div>\n         </div>\n       </div>")})),gamemod_url="/saito/img/dreamscape.png",r+='<div class="arcade-game-list-item" data-game="Install New Game">\n        <div class="arcade-game-list-image" style="background-image: url('.concat(gamemod_url,');"></div>\n        <div class="arcade-gema-list-details">\n          <div class="arcade-game-list-title"><h4>Install New Game</h4></div>\n          <div class="arcade-game-list-type">Saito Appstore</h4></div>\n          <div class="arcade-game-list-players">1 - 6</h4></div>\n        </div>\n        </div>'),r+="\n       </div>\n     </div>\n  "}},function(e,t){var r="zPwFAUi2S3AAUwhAxX19UAAUUisrrw9QtMTpwAC6w3fK",n={transaction:{id:9,from:[{add:r,bid:0,tid:0,sid:0,bsh:"",amt:"0",type:0,lc:1}],to:[{add:r,bid:0,tid:0,sid:0,bsh:"",amt:"0",type:0,lc:1},{add:r,bid:0,tid:0,sid:1,bsh:"",amt:"0",type:0,lc:1}],ts:1605090741941,sig:"2msmS9EjCrMeromNHpy4Yv8br3JT8wbFrmoGownu2ctvJRghLor6kz2DCmGT3sAwVwVEJJNBjTtwbgVXYFumHeHM",ver:1,path:[{from:r,to:"ySSjMVrEqbtAAtcob5ZWDC2hZQ5Cj6zSC4Q4t1myosGd",sig:"66ZAocz6VMwxpwhVA2h3vdMjgpQ5myTnm5kAJXLnXSvCbb912DWpzR19j1TqHr9CRejgahu5nBRSSwjS4aKSNLbf"}],r:1,type:0,m:"eyJ0cyI6MTYwNTA5MDc0MTg5MiwibW9kdWxlIjoiQXJjYWRlIiwicmVxdWVzdCI6Im9wZW4iLCJnYW1lIjoiQ2hlc3MiLCJvcHRpb25zIjp7ImNvbG9yIjoiYmxhY2siLCJjbG9jayI6IjAifSwib3B0aW9uc19odG1sIjoiPHNwYW4gY2xhc3M9XCJnYW1lLW9wdGlvblwiPmNvbG9yOiBibGFjazwvc3Bhbj4sIDxzcGFuIGNsYXNzPVwiZ2FtZS1vcHRpb25cIj5jbG9jazogMDwvc3Bhbj4iLCJwbGF5ZXJzX25lZWRlZCI6MiwicGxheWVycyI6WyJ6UHdGQVVpMlMzQUFVd2hBeFgxOVVBQVVVaXNycnc5UXRNVHB3QUM2dzNmSyJdLCJwbGF5ZXJzX3NpZ3MiOlsiNHpxb0trdDc1R2JOQ0Y5ck5hZjhNN3lCUFJCWm4xWkRmZDh0dFBxRnB6SzUyanRNVll4WFBiSnJUQk5Nd0Rybmtib251aW9KQndacTlVWGVlUG84dEE5bSJdfQ==",ps:0},fees_total:"",work_available_to_me:"",work_available_to_creator:"",work_cumulative:"0.0",msg:{ts:1605090741892,module:"Arcade",request:"open",game:"Chess",options:{color:"black",clock:"0"},options_html:'<span class="game-option">color: black</span>, <span class="game-option">clock: 0</span>',players_needed:2,players:[r],players_sigs:["4zqoKkt75GbNCF9rNaf8M7yBPRBZn1ZDfd8ttPqFpzK52jtMVYxXPbJrTBNMwDrnkbonuioJBwZq9UXeePo8tA9m"]},dmsg:"",size:1277,is_valid:1,atr_trapdoor:"00000000000000000000000000000000000000000000",atr_rebroadcasting_limit:10};e.exports=getMockGames=function(e){for(var t=[],a=Math.floor(40*Math.random()),i=0;i<a;i++)t.push(JSON.parse(JSON.stringify(n)));return t.forEach((function(t,n){var a,i;t.transaction.sig=function(e){for(var t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length,a=0;a<e;a++)t+=r.charAt(Math.floor(Math.random()*n));return t}(1),t.msg.game=(a=["Wordblocks","Chess","Twilight","Poker","Imperium"])[Math.floor(Math.random()*a.length)],t.msg.players_needed=(i=[2,4,6,8])[Math.floor(Math.random()*i.length)],t.msg.players[0]=function(e){return Math.floor(2*Math.random())?r:e.wallet.returnPublicKey()}(e)})),t}},function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r(1054),o=r(46),s=r(5),c={NEWSLETTER:0,PRIVATESALE:1,REGISTEREMAIL:2,BACKUP:3},l=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};n(this,e),this.app=t,this.callback=r,this.mode=null}var t,r,l;return t=e,(r=[{key:"render",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.NEWSLETTER;this.mode=r,this.modal_overlay_email=new o(e),this.modal_overlay_email.render(e,t),this.modal_overlay_email.attachEvents(e,t),document.querySelector(".add-user")||this.modal_overlay_email.showOverlay(e,t,i(r,c))}},{key:"attachEvents",value:function(e,t){var r=this;document.querySelectorAll(".tutorial-skip").forEach((function(e){e.onclick=function(){r.modal_overlay_email.hideOverlay()}})),document.querySelectorAll("#registry-input").forEach((function(e){e.onclick=function(){document.querySelector("#registry-input").setAttribute("placeholder","")}})),document.querySelectorAll("#backup-email-button").forEach((function(n){n.onclick=function(){var n=document.querySelector("#registry-input").value,a=document.querySelector("#signup")&&document.querySelector("#signup").checked;if(r.mode===c.NEWSLETTER)r.doNewsletterSignup(e,t,n);else if(r.mode===c.PRIVATESALE)r.doPrivateSaleSignup(e,t,n,a);else if(r.mode===c.REGISTEREMAIL)r.doRegisterEmail(e,t,n,a);else{if(r.mode!==c.BACKUP)throw"No such mode: "+r.mode;r.doEmailBackup(e,t,n,a)}r.modal_overlay_email.hideOverlay(),salert("Thanks for signing up!")}}))}},{key:"validateEmail",value:function(e){return!(!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())||"email@domain.com"===e)||(salert("Invalid email address!"),!1)}},{key:"sendServiceRequest",value:function(e,t){tx=new s.transaction,tx.msg={key:this.app.wallet.returnPublicKey(),email:e,time:Date.now()},this.app.modules.returnActiveModule().sendPeerRequestWithServiceFilter("emailcollector",{request:t,data:tx},(function(e){document.querySelector(".arcade-sidebar-done").innerHTML="",e.forEach((function(e){void 0===e.label&&void 0===e.icon||(document.querySelector(".arcade-sidebar-done").innerHTML+=RewardsSidebarRow(e.label,e.icon,e.count))}))}))}},{key:"doRegisterEmail",value:function(e,t,r,n){this.validateEmail(r)&&(e.keys.updateEmail(e.wallet.returnPublicKey(),r),n&&this.doNewsletterSignup(e,t,r),window.location.reload())}},{key:"doEmailBackup",value:function(e,t,r,n){this.validateEmail(r)&&(e.keys.updateEmail(e.wallet.returnPublicKey(),r),n&&this.doNewsletterSignup(e,t,r))}},{key:"doPrivateSaleSignup",value:function(e,t,r,n){this.validateEmail(r)&&(this.sendServiceRequest(r,"public sale signup"),n&&this.doNewsletterSignup(e,t,r))}},{key:"doNewsletterSignup",value:function(e,t,r){this.validateEmail(r)&&this.sendServiceRequest(r,"newsletter signup")}}])&&a(t.prototype,r),l&&a(t,l),e}();l.MODES=c,e.exports=l},function(e,t){e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{var r=function(e){return(e=e||window.event).preventDefault(),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,s=e.clientX,c=e.clientY,document.onmouseup=a,document.onmousemove=n,!1},n=function(t){(t=t||window.event).preventDefault(),i=s-t.clientX,o=c-t.clientY,s=t.clientX,c=t.clientY,e.style.top=e.offsetTop-o+"px",e.style.left=e.offsetLeft-i+"px"},a=function(){document.onmouseup=null,document.onmousemove=null,null!=t&&t()},i=0,o=0,s=0,c=0;document.getElementById(e.id+"-header")?document.getElementById(e.id+"-header").onmousedown=r:e.onmousedown=r}catch(e){}}},function(e,t,r){var n=r(222),a=r(225);e.exports=EmailChat={render:function(e,t){t.renderMode="email",n.render(e,t),n.attachEvents(e,t),a.render(e,t),a.attachEvents(e,t)},attachEvents:function(e,t){},showChatBox:function(e,t,r){t.renderMode="email",a.showChatBox(e,t,r)}}},function(e,t,r){var n=r(223),a=r(224),i=r(443);e.exports=ChatSidebar={render:function(e,t){t.modal_add_user=new i(e),document.querySelector(".chat-header")||e.browser.addElementToDom(n(),"email-chat");for(var r=0;r<t.groups.length;r++)document.getElementById(t.groups[r].id)||e.browser.addElementToDom(a(e,t.groups[r]),"chat-list")},attachEvents:function(e,t){document.querySelectorAll(".chat-row").forEach((function(r){r.onclick=function(r){t.mute_community_chat=0;try{var n=document.querySelector("#".concat(r.currentTarget.id," .chat-group-name")).innerHTML;e.browser.logMatomoEvent("Chat","ArcadeSidebarChatOpenedClick",n)}catch(r){e.browser.logMatomoEvent("Chat","ArcadeSidebarChatOpenedClick","unknownChat")}t.openChatBox(r.currentTarget.id)}})),document.getElementById("email-chat-add-contact").onclick=function(r){t.modal_add_user.render(e,t),t.modal_add_user.attachEvents(e,t)}}}},function(e,t){e.exports=ChatSidebarTemplate=function(){return'\n      <div class="chat-header">\n        <h2>Chat</h2>\n        <div id="online-count" class="online-count"></div>\n        <i id="email-chat-add-contact" class="icon-med fas fa-plus"></i>\n      </div>\n      <div id="chat-list" class="chat-list"></div>\n  '}},function(e,t){e.exports=ChatSidebarContactTemplate=function(e,t){var r=e.browser.formatDate((new Date).getTime()),n="";0==t.txs.length?n="New Chat Room":n=t.txs[t.txs.length-1].returnMessage().message;return'\n    <div id="'.concat(t.id,'" class="chat-row">\n      <img class="chat-row-image" src="').concat(e.keys.returnIdenticon(t.members[0]),'">\n      <div class="chat-content">\n          <div class="chat-group-name">').concat(t.name,'</div>\n          <div id="chat-last-message-').concat(t.id,'" class="chat-last-message">').concat(n,'</div>\n      </div>\n      <div style="display; grid;">\n        <div class="chat-last-message-timestamp">').concat(r.hours,":").concat(r.minutes,"</div>\n      </div>\n    </div>\n  ")}},function(e,t,r){function n(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i=r(226),o=r(133),s=r(229),c=r(230),l=r(242);e.exports=ChatBox={render:function(e,t){var r=this;document.querySelectorAll(".chat-box").forEach((function(n){for(var a=n.getAttribute("data-id"),i=-1,s=document.getElementById("chat-box-main-".concat(a)),c=0;c<t.groups.length;c++)t.groups[c].id==a&&(i=c);if(-1!=i){for(0==t.groups[i].txs.length&&(s.innerHTML='<p id="chat-box-default-message-'.concat(a,'" style="text-align:center">No messages in this group :(</p>'));t.groups[i].txs.length>100;)t.groups[i].txs.shift();for(var l=t.createMessageBlocks(t.groups[i]),u=0;u<l.length;u++){var d=o(e,t,t.groups[i],l[u]);if(u==l.length-1){var h="first_comment_sig";l[u].length>0&&(h=e.crypto.hash(l[u][0].transaction.sig));try{document.getElementById("chat-message-set-".concat(h)).destroy()}catch(e){}d=o(e,t,t.groups[i],l[u]),s.innerHTML+=d}else s.innerHTML+=d}document.querySelectorAll("img.img-prev").forEach((function(e){e.addEventListener("click",window.imgPop(e))})),r.scrollToBottom(a)}else alert("could not find chat group...")}))},attachDragAndDropEvents:function(e,t,r){document.querySelectorAll("#".concat(e)).forEach((function(e){t.browser.addDragAndDropFileUploadToElement(e.id,(function(n){var a=e.id.split("chat-box-main-")[1],i=document.createElement("img");if(i.classList.add("img-prev"),i.src=n,i.outerHTML.length>r.max_msg_size)salert("Image too large: 220kb max");else{var o=r.createMessage(a,i.outerHTML);r.sendMessage(t,o),r.receiveMessage(t,o)}}),!1)}))},attachEvents:function(e,t){document.querySelectorAll(".chat-box").forEach((function(r){var n=r.getAttribute("data-id"),a=document.getElementById("chat-box-new-message-input-".concat(n));a.addEventListener("keypress",(function(r){if((13==r.which||13==r.keyCode)&&!r.shiftKey){if(r.preventDefault(),""==a.value)return;e.browser.logMatomoEvent("Chat","ArcadeChatSendMessage","PressedEnter");var i=t.createMessage(n,a.value);t.sendMessage(e,i),t.receiveMessage(e,i),a.value=""}}))})),document.querySelectorAll(".chat-room-submit-button").forEach((function(r){r.ontouch=function(r){var n=r.currentTarget.id.split("chat-room-submit-button-")[1],a=document.getElementById("chat-box-new-message-input-".concat(n));if(""!=a.value){var i=t.createMessage(n,a.value);e.modules.returnModule("Chat").sendMessage(e,i),e.modules.returnModule("Chat").receiveMessage(e,i),a.value=""}},r.onclick=function(r){var n=r.currentTarget.id.split("chat-room-submit-button-")[1],a=document.getElementById("chat-box-new-message-input-".concat(n));if(""!=a.value){var i=t.createMessage(n,a.value);e.modules.returnModule("Chat").sendMessage(e,i),e.modules.returnModule("Chat").receiveMessage(e,i),a.value=""}}})),document.querySelectorAll(".chat-box-header").forEach((function(e){e.ontouch=function(e){var t=e.currentTarget.id.split("chat-box-header-")[1],r=document.getElementById("chat-box-".concat(t)),n=document.getElementById("chat-box-header-".concat(t));(0==r.style.left&&0==r.style.top||(n.style.cursor="unset",r.classList.contains("min-chat")))&&(r.classList.toggle("chat-box-hide"),r.classList.toggle("min-chat"),r.classList.contains("min-chat"),r.style.bottom=0,e.stopPropagation(),e.preventDefault())},e.onclick=function(e){var t=e.currentTarget.id.split("chat-box-header-")[1],r=document.getElementById("chat-box-".concat(t)),n=document.getElementById("chat-box-header-".concat(t));(0==r.style.left&&0==r.style.top||(n.style.cursor="unset",r.classList.contains("min-chat")))&&(r.classList.toggle("chat-box-hide"),r.classList.toggle("min-chat"),r.classList.contains("min-chat"),r.style.bottom=0,e.stopPropagation(),e.preventDefault())}})),document.querySelectorAll(".chat-box-close").forEach((function(e){var r=t.returnCommunityChat();e.ontouch=function(e){var n=e.currentTarget.id.split("chat-box-close-")[1];n==r.id&&(t.mute_community_chat=1),e.stopPropagation();var a=document.getElementById("chat-box-".concat(n));a.parentNode.removeChild(a)},e.onclick=function(e){var n=e.currentTarget.id.split("chat-box-close-")[1];n==r.id&&(t.mute_community_chat=1),e.stopPropagation();var a=document.getElementById("chat-box-".concat(n));a.parentNode.removeChild(a)}})),document.querySelectorAll(".chat-box").forEach((function(t){var r=t.id.split("chat-box-")[1];e.browser.makeDraggable(t.id,"chat-box-header-".concat(r),(function(){}))}))},showChatBox:function(e,t,r){for(var n=0,a=0,o=0;o<t.groups.length;o++)document.getElementById("chat-box-".concat(t.groups[o].id))&&(n++,a+=document.getElementById("chat-box-".concat(t.groups[o].id)).getBoundingClientRect().width);0==n?document.querySelector(".chat-box")||(e.browser.addElementToDom(i(r)),this.attachDragAndDropEvents("chat-box-main-".concat(r.id),e,t)):(document.getElementById("chat-box-".concat(r.id))||(e.browser.addElementToDom(i(r)),this.attachDragAndDropEvents("chat-box-main-".concat(r.id),e,t)),document.getElementById("chat-box-".concat(r.id)).style.right=a+20*n+"px");this.attachEvents(e,t)},addMessage:function(e,t,r){e.modules.returnModule("Chat").receiveMessage(e,r),this.addTXToDOM(e,t,r)},addTXToDOM:function(e,t,r){var n=Object.assign({},r.returnMessage(),{type:"myself"});this.addMessageToDOM(e,t,n)},addMessageToDOM:function(e,t,r){try{if(document.getElementById(r.sig))return;var a=Object.assign({},r,{keyHTML:e.browser.returnAddressHTML(r.publickey),identicon:e.keys.returnIdenticon(r.publickey),identicon_color:e.keys.returnIdenticonColor(r.publickey)}),i=document.getElementById("chat-box-main-".concat(a.group_id));if(console.log("MBL: "+this.message_blocks.length),this.message_blocks.length>0){var s=Object.assign({messages:[]},this.message_blocks[this.message_blocks.length-1]);if(Object.assign({},s.messages[s.messages.length-1]).publickey==a.publickey)s=Object.assign({},s,{last_message_timestamp:a.timestamp,last_message_sig:a.sig,messages:[].concat(n(s.messages),[a]),type:e.wallet.returnPublicKey()==a.publickey?"myself":"others"}),i.removeChild(i.lastElementChild),i.innerHTML+=o(s,t),this.message_blocks[this.message_blocks.length-1]=s;else{var c=Object.assign({},{publickey:a.publickey,group_id:a.group_id,last_message_timestamp:a.timestamp,last_message_sig:a.sig,keyHTML:a.keyHTML,identicon:a.identicon,identicon_color:a.identicon_color,type:e.wallet.returnPublicKey()==a.publickey?"myself":"others",messages:[a]});this.message_blocks.push(c),i.innerHTML+=o(c,t)}}else{console.log("Here!");var l=Object.assign({},{publickey:a.publickey,group_id:a.group_id,last_message_timestamp:a.timestamp,last_message_sig:a.sig,keyHTML:a.keyHTML,identicon:a.identicon,identicon_color:a.identicon_color,type:e.wallet.returnPublicKey()==a.publickey?"myself":"others",messages:[a]});this.message_blocks.push(l),i.innerHTML+=o(l,t)}document.querySelectorAll(".img-prev").forEach((function(e){e.addEventListener("click",window.imgPop(e))})),this.scrollToBottom(a.group_id)}catch(e){console.log("Error @ chat-box.js | addMessageToDOM\n ERROR: "+e)}},createMessageBlocks:function(e,t,r){for(var n=0,a=[],i=[],o=r.txs,s="";n<o.length;)0==a.length?(o[n].transaction.from[0].add!=s&&""!=s&&a.push(i),i.push(o[n]),s=o[n].transaction.from[0].add):o[n].transaction.from[0].add==s?i.push(o[n]):(a.push(i),(i=[]).push(o[n]),s=o[n].transaction.from[0].add),n++;return a.push(i),a},formatMessage:function(e){return e=l(e,{target:{url:"_self"}}),e=s(e),e=c(e,{allowedTags:["h1","h2","h3","h4","h5","h6","blockquote","p","a","ul","ol","nl","li","b","i","strong","em","strike","code","hr","br","div","table","thead","caption","tbody","tr","th","td","pre","img","marquee","pre"],allowedAttributes:{div:["class","id"],a:["href","name","target","class","id"],img:["src","class"]},selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","cite"],allowProtocolRelative:!0,transformTags:{a:c.simpleTransform("a",{target:"_blank"})}})},removeDefaultMessage:function(e){var t=document.getElementById("chat-box-default-message-".concat(e));t&&t.parentNode.removeChild(t)},scrollToBottom:function(e){var t=document.getElementById("chat-box-main-".concat(e));t&&(t.scrollTop=t.scrollHeight)}}},function(e,t){e.exports=ChatBoxTemplate=function(e){return'\n      <div data-id="'.concat(e.id,'" id="chat-box-').concat(e.id,'" class="chat-box">\n\t<div id="chat-box-header-').concat(e.id,'" class="chat-box-header">\n          <span><h2 class="chat-box-header-title">').concat(e.name,'</h2></span>\n          <span class="chat-box-close" id="chat-box-close-').concat(e.id,'" style="justify-self:end;font-size: 0.75em">&#x2715</span>\n\t</div>\n\t<div id="chat-box-main-').concat(e.id,'" class="chat-box-main"></div>\n\t<div id="chat-box-input-').concat(e.id,'" class="chat-box-input">\n          <textarea class="chat-box-new-message-input" id="chat-box-new-message-input-').concat(e.id,'"></textarea>\n          <div class="chat-room-submit-button" id="chat-room-submit-button-').concat(e.id,'"><i class="icon-small fas fa-arrow-circle-right"></i></div>\n        </div>\n      </div>\n  ')}},function(e,t){e.exports=ChatMessageTemplate=function(e,t,r,n,a){r=t.formatMessage(r);try{for(var i=r.match(/<a href="([^"]*)/)[1],o=0,s=[".apng",".gif",".ico",".cur",".jpg",".jpeg",".jfif",".pjpeg",".pjp",".png",".svg"];o<s.length;o++){var c=s[o];if(i.toLowerCase().includes(c))return'\n        <div id="'.concat(n,'" class="chat-room-message chat-room-message-').concat(a,'">\n          <div class="chat-message-text">').concat(r,'</div>\n        </div>\n        <div id="').concat(n,'" class="chat-room-message chat-room-message-').concat(a,'">\n          <div class="chat-message-text">\n              <img class="img-prev" src="').concat(i,'">\n          </div>\n        </div>')}}catch(e){}return'\n    <div id="'.concat(n,'" class="chat-room-message chat-room-message-').concat(a,'">\n      <div class="chat-message-text">').concat(r,"</div>\n    </div>\n  ")}},function(e,t,r){var n=r(52).Symbol;e.exports=n},function(e,t,r){e.exports=function(){"use strict";function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function r(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,r){if(e){if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n={exports:{}};function a(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}n.exports={defaults:{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},getDefaults:a,changeDefaults:function(e){n.exports.defaults=e}};var i=/[&<>"']/,o=/[&<>"']/g,s=/[<>"']|&(?!#?\w+;)/,c=/[<>"']|&(?!#?\w+;)/g,l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},u=function(e){return l[e]},d=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function h(e){return e.replace(d,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))}var p=/(^|[^\[])\^/g,f=/[^\w:]/g,m=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,g={},y=/^[^:]+:\/*[^/]*$/,v=/^([^:]+:)[\s\S]*$/,b=/^([^:]+:\/*[^/]*)[\s\S]*$/;function _(e,t){g[" "+e]||(y.test(e)?g[" "+e]=e+"/":g[" "+e]=w(e,"/",!0));var r=-1===(e=g[" "+e]).indexOf(":");return"//"===t.substring(0,2)?r?t:e.replace(v,"$1")+t:"/"===t.charAt(0)?r?t:e.replace(b,"$1")+t:e+t}function w(e,t,r){var n=e.length;if(0===n)return"";for(var a=0;a<n;){var i=e.charAt(n-a-1);if(i!==t||r){if(i===t||!r)break;a++}else a++}return e.substr(0,n-a)}var x=function(e,t){if(t){if(i.test(e))return e.replace(o,u)}else if(s.test(e))return e.replace(c,u);return e},k=h,S=function(e,t){e=e.source||e,t=t||"";var r={replace:function(t,n){return n=(n=n.source||n).replace(p,"$1"),e=e.replace(t,n),r},getRegex:function(){return new RegExp(e,t)}};return r},E=function(e,t,r){if(e){var n;try{n=decodeURIComponent(h(r)).replace(f,"").toLowerCase()}catch(e){return null}if(0===n.indexOf("javascript:")||0===n.indexOf("vbscript:")||0===n.indexOf("data:"))return null}t&&!m.test(r)&&(r=_(t,r));try{r=encodeURI(r).replace(/%25/g,"%")}catch(e){return null}return r},A={exec:function(){}},P=function(e){for(var t,r,n=1;n<arguments.length;n++)for(r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},C=function(e,t){var r=e.replace(/\|/g,(function(e,t,r){for(var n=!1,a=t;--a>=0&&"\\"===r[a];)n=!n;return n?"|":" |"})).split(/ \|/),n=0;if(r[0].trim()||r.shift(),r[r.length-1].trim()||r.pop(),r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;n<r.length;n++)r[n]=r[n].trim().replace(/\\\|/g,"|");return r},D=w,T=function(e,t){if(-1===e.indexOf(t[1]))return-1;for(var r=e.length,n=0,a=0;a<r;a++)if("\\"===e[a])a++;else if(e[a]===t[0])n++;else if(e[a]===t[1]&&--n<0)return a;return-1},O=function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},M=function(e,t){if(t<1)return"";for(var r="";t>1;)1&t&&(r+=e),t>>=1,e+=e;return r+e},I=n.exports.defaults,R=D,F=C,B=x,j=T;function N(e,t,r,n){var a=t.href,i=t.title?B(t.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){n.state.inLink=!0;var s={type:"link",raw:r,href:a,title:i,text:o,tokens:n.inlineTokens(o,[])};return n.state.inLink=!1,s}return{type:"image",raw:r,href:a,title:i,text:B(o)}}var q=function(){function e(e){this.options=e||I}var t=e.prototype;return t.space=function(e){var t=this.rules.block.newline.exec(e);if(t)return t[0].length>1?{type:"space",raw:t[0]}:{raw:"\n"}},t.code=function(e){var t=this.rules.block.code.exec(e);if(t){var r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:R(r,"\n")}}},t.fences=function(e){var t=this.rules.block.fences.exec(e);if(t){var r=t[0],n=function(e,t){var r=e.match(/^(\s+)(?:```)/);if(null===r)return t;var n=r[1];return t.split("\n").map((function(e){var t=e.match(/^\s+/);return null===t?e:t[0].length>=n.length?e.slice(n.length):e})).join("\n")}(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim():t[2],text:n}}},t.heading=function(e){var t=this.rules.block.heading.exec(e);if(t){var r=t[2].trim();if(/#$/.test(r)){var n=R(r,"#");this.options.pedantic?r=n.trim():n&&!/ $/.test(n)||(r=n.trim())}var a={type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:[]};return this.lexer.inline(a.text,a.tokens),a}},t.hr=function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}},t.blockquote=function(e){var t=this.rules.block.blockquote.exec(e);if(t){var r=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(r,[]),text:r}}},t.list=function(e){var t=this.rules.block.list.exec(e);if(t){var r,n,a,i,o,s,c,l,u,d,h=t[1].trim(),p=h.length>1,f={type:"list",raw:"",ordered:p,start:p?+h.slice(0,-1):"",loose:!1,items:[]};h=p?"\\d{1,9}\\"+h.slice(-1):"\\"+h,this.options.pedantic&&(h=p?h:"[*+-]");for(var m=new RegExp("^( {0,3}"+h+")((?: [^\\n]*| *)(?:\\n[^\\n]*)*(?:\\n|$))");e&&!this.rules.block.hr.test(e)&&(t=m.exec(e));){u=t[2].split("\n"),this.options.pedantic?(i=2,d=u[0].trimLeft()):(i=t[2].search(/[^ ]/),i=t[1].length+(i>4?1:i),d=u[0].slice(i-t[1].length)),s=!1,r=t[0],!u[0]&&/^ *$/.test(u[1])&&(r=t[1]+u.slice(0,2).join("\n")+"\n",f.loose=!0,u=[]);var g=new RegExp("^ {0,"+Math.min(3,i-1)+"}(?:[*+-]|\\d{1,9}[.)])");for(o=1;o<u.length;o++){if(l=u[o],this.options.pedantic&&(l=l.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),g.test(l)){r=t[1]+u.slice(0,o).join("\n")+"\n";break}if(s){if(!(l.search(/[^ ]/)>=i)&&l.trim()){r=t[1]+u.slice(0,o).join("\n")+"\n";break}d+="\n"+l.slice(i)}else l.trim()||(s=!0),l.search(/[^ ]/)>=i?d+="\n"+l.slice(i):d+="\n"+l}f.loose||(c?f.loose=!0:/\n *\n *$/.test(r)&&(c=!0)),this.options.gfm&&(n=/^\[[ xX]\] /.exec(d))&&(a="[ ] "!==n[0],d=d.replace(/^\[[ xX]\] +/,"")),f.items.push({type:"list_item",raw:r,task:!!n,checked:a,loose:!1,text:d}),f.raw+=r,e=e.slice(r.length)}f.items[f.items.length-1].raw=r.trimRight(),f.items[f.items.length-1].text=d.trimRight(),f.raw=f.raw.trimRight();var y=f.items.length;for(o=0;o<y;o++)this.lexer.state.top=!1,f.items[o].tokens=this.lexer.blockTokens(f.items[o].text,[]),f.items[o].tokens.some((function(e){return"space"===e.type}))&&(f.loose=!0,f.items[o].loose=!0);return f}},t.html=function(e){var t=this.rules.block.html.exec(e);if(t){var r={type:"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};return this.options.sanitize&&(r.type="paragraph",r.text=this.options.sanitizer?this.options.sanitizer(t[0]):B(t[0]),r.tokens=[],this.lexer.inline(r.text,r.tokens)),r}},t.def=function(e){var t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}},t.table=function(e){var t=this.rules.block.table.exec(e);if(t){var r={type:"table",header:F(t[1]).map((function(e){return{text:e}})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]?t[3].replace(/\n$/,"").split("\n"):[]};if(r.header.length===r.align.length){r.raw=t[0];var n,a,i,o,s=r.align.length;for(n=0;n<s;n++)/^ *-+: *$/.test(r.align[n])?r.align[n]="right":/^ *:-+: *$/.test(r.align[n])?r.align[n]="center":/^ *:-+ *$/.test(r.align[n])?r.align[n]="left":r.align[n]=null;for(s=r.rows.length,n=0;n<s;n++)r.rows[n]=F(r.rows[n],r.header.length).map((function(e){return{text:e}}));for(s=r.header.length,a=0;a<s;a++)r.header[a].tokens=[],this.lexer.inlineTokens(r.header[a].text,r.header[a].tokens);for(s=r.rows.length,a=0;a<s;a++)for(o=r.rows[a],i=0;i<o.length;i++)o[i].tokens=[],this.lexer.inlineTokens(o[i].text,o[i].tokens);return r}}},t.lheading=function(e){var t=this.rules.block.lheading.exec(e);if(t){var r={type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:[]};return this.lexer.inline(r.text,r.tokens),r}},t.paragraph=function(e){var t=this.rules.block.paragraph.exec(e);if(t){var r={type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(r.text,r.tokens),r}},t.text=function(e){var t=this.rules.block.text.exec(e);if(t){var r={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(r.text,r.tokens),r}},t.escape=function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:B(t[1])}},t.tag=function(e){var t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):B(t[0]):t[0]}},t.link=function(e){var t=this.rules.inline.link.exec(e);if(t){var r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;var n=R(r.slice(0,-1),"\\");if((r.length-n.length)%2==0)return}else{var a=j(t[2],"()");if(a>-1){var i=(0===t[0].indexOf("!")?5:4)+t[1].length+a;t[2]=t[2].substring(0,a),t[0]=t[0].substring(0,i).trim(),t[3]=""}}var o=t[2],s="";if(this.options.pedantic){var c=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o);c&&(o=c[1],s=c[3])}else s=t[3]?t[3].slice(1,-1):"";return o=o.trim(),/^</.test(o)&&(o=this.options.pedantic&&!/>$/.test(r)?o.slice(1):o.slice(1,-1)),N(t,{href:o?o.replace(this.rules.inline._escapes,"$1"):o,title:s?s.replace(this.rules.inline._escapes,"$1"):s},t[0],this.lexer)}},t.reflink=function(e,t){var r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){var n=(r[2]||r[1]).replace(/\s+/g," ");if(!(n=t[n.toLowerCase()])||!n.href){var a=r[0].charAt(0);return{type:"text",raw:a,text:a}}return N(r,n,r[0],this.lexer)}},t.emStrong=function(e,t,r){void 0===r&&(r="");var n=this.rules.inline.emStrong.lDelim.exec(e);if(n&&(!n[3]||!r.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var a=n[1]||n[2]||"";if(!a||a&&(""===r||this.rules.inline.punctuation.exec(r))){var i,o,s=n[0].length-1,c=s,l=0,u="*"===n[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+s);null!=(n=u.exec(t));)if(i=n[1]||n[2]||n[3]||n[4]||n[5]||n[6])if(o=i.length,n[3]||n[4])c+=o;else if(!((n[5]||n[6])&&s%3)||(s+o)%3){if(!((c-=o)>0)){if(o=Math.min(o,o+c+l),Math.min(s,o)%2){var d=e.slice(1,s+n.index+o);return{type:"em",raw:e.slice(0,s+n.index+o+1),text:d,tokens:this.lexer.inlineTokens(d,[])}}var h=e.slice(2,s+n.index+o-1);return{type:"strong",raw:e.slice(0,s+n.index+o+1),text:h,tokens:this.lexer.inlineTokens(h,[])}}}else l+=o}}},t.codespan=function(e){var t=this.rules.inline.code.exec(e);if(t){var r=t[2].replace(/\n/g," "),n=/[^ ]/.test(r),a=/^ /.test(r)&&/ $/.test(r);return n&&a&&(r=r.substring(1,r.length-1)),r=B(r,!0),{type:"codespan",raw:t[0],text:r}}},t.br=function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}},t.del=function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}},t.autolink=function(e,t){var r,n,a=this.rules.inline.autolink.exec(e);if(a)return n="@"===a[2]?"mailto:"+(r=B(this.options.mangle?t(a[1]):a[1])):r=B(a[1]),{type:"link",raw:a[0],text:r,href:n,tokens:[{type:"text",raw:r,text:r}]}},t.url=function(e,t){var r;if(r=this.rules.inline.url.exec(e)){var n,a;if("@"===r[2])a="mailto:"+(n=B(this.options.mangle?t(r[0]):r[0]));else{var i;do{i=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0]}while(i!==r[0]);n=B(r[0]),a="www."===r[1]?"http://"+n:n}return{type:"link",raw:r[0],text:n,href:a,tokens:[{type:"text",raw:n,text:n}]}}},t.inlineText=function(e,t){var r,n=this.rules.inline.text.exec(e);if(n)return r=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):B(n[0]):n[0]:B(this.options.smartypants?t(n[0]):n[0]),{type:"text",raw:n[0],text:r}},e}(),L=A,U=S,z=P,H={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:L,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};H.def=U(H.def).replace("label",H._label).replace("title",H._title).getRegex(),H.bullet=/(?:[*+-]|\d{1,9}[.)])/,H.listItemStart=U(/^( *)(bull) */).replace("bull",H.bullet).getRegex(),H.list=U(H.list).replace(/bull/g,H.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+H.def.source+")").getRegex(),H._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",H._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,H.html=U(H.html,"i").replace("comment",H._comment).replace("tag",H._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),H.paragraph=U(H._paragraph).replace("hr",H.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",H._tag).getRegex(),H.blockquote=U(H.blockquote).replace("paragraph",H.paragraph).getRegex(),H.normal=z({},H),H.gfm=z({},H.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),H.gfm.table=U(H.gfm.table).replace("hr",H.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",H._tag).getRegex(),H.pedantic=z({},H.normal,{html:U("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",H._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:L,paragraph:U(H.normal._paragraph).replace("hr",H.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",H.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var $={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:L,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:L,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};$.punctuation=U($.punctuation).replace(/punctuation/g,$._punctuation).getRegex(),$.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,$.escapedEmSt=/\\\*|\\_/g,$._comment=U(H._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),$.emStrong.lDelim=U($.emStrong.lDelim).replace(/punct/g,$._punctuation).getRegex(),$.emStrong.rDelimAst=U($.emStrong.rDelimAst,"g").replace(/punct/g,$._punctuation).getRegex(),$.emStrong.rDelimUnd=U($.emStrong.rDelimUnd,"g").replace(/punct/g,$._punctuation).getRegex(),$._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,$._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,$._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,$.autolink=U($.autolink).replace("scheme",$._scheme).replace("email",$._email).getRegex(),$._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,$.tag=U($.tag).replace("comment",$._comment).replace("attribute",$._attribute).getRegex(),$._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,$._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,$._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,$.link=U($.link).replace("label",$._label).replace("href",$._href).replace("title",$._title).getRegex(),$.reflink=U($.reflink).replace("label",$._label).getRegex(),$.reflinkSearch=U($.reflinkSearch,"g").replace("reflink",$.reflink).replace("nolink",$.nolink).getRegex(),$.normal=z({},$),$.pedantic=z({},$.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:U(/^!?\[(label)\]\((.*?)\)/).replace("label",$._label).getRegex(),reflink:U(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",$._label).getRegex()}),$.gfm=z({},$.normal,{escape:U($.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),$.gfm.url=U($.gfm.url,"i").replace("email",$.gfm._extended_email).getRegex(),$.breaks=z({},$.gfm,{br:U($.br).replace("{2,}","*").getRegex(),text:U($.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var G={block:H,inline:$},K=q,V=n.exports.defaults,W=G.block,Y=G.inline,J=M;function Q(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function X(e){var t,r,n="",a=e.length;for(t=0;t<a;t++)r=e.charCodeAt(t),Math.random()>.5&&(r="x"+r.toString(16)),n+="&#"+r+";";return n}var Z=function(){function t(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||V,this.options.tokenizer=this.options.tokenizer||new K,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var t={block:W.normal,inline:Y.normal};this.options.pedantic?(t.block=W.pedantic,t.inline=Y.pedantic):this.options.gfm&&(t.block=W.gfm,this.options.breaks?t.inline=Y.breaks:t.inline=Y.gfm),this.tokenizer.rules=t}t.lex=function(e,r){return new t(r).lex(e)},t.lexInline=function(e,r){return new t(r).inlineTokens(e)};var r,n,a,i=t.prototype;return i.lex=function(e){var t;for(e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens},i.blockTokens=function(e,t){var r,n,a,i,o=this;for(void 0===t&&(t=[]),this.options.pedantic&&(e=e.replace(/^ +$/gm,""));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((function(n){return!!(r=n.call({lexer:o},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)}))))if(r=this.tokenizer.space(e))e=e.substring(r.raw.length),r.type&&t.push(r);else if(r=this.tokenizer.code(e))e=e.substring(r.raw.length),!(n=t[t.length-1])||"paragraph"!==n.type&&"text"!==n.type?t.push(r):(n.raw+="\n"+r.raw,n.text+="\n"+r.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text);else if(r=this.tokenizer.fences(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.heading(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.hr(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.blockquote(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.list(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.html(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.def(e))e=e.substring(r.raw.length),!(n=t[t.length-1])||"paragraph"!==n.type&&"text"!==n.type?this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title}):(n.raw+="\n"+r.raw,n.text+="\n"+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text);else if(r=this.tokenizer.table(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.lheading(e))e=e.substring(r.raw.length),t.push(r);else if(a=e,this.options.extensions&&this.options.extensions.startBlock&&function(){var t=1/0,r=e.slice(1),n=void 0;o.options.extensions.startBlock.forEach((function(e){"number"==typeof(n=e.call({lexer:this},r))&&n>=0&&(t=Math.min(t,n))})),t<1/0&&t>=0&&(a=e.substring(0,t+1))}(),this.state.top&&(r=this.tokenizer.paragraph(a)))n=t[t.length-1],i&&"paragraph"===n.type?(n.raw+="\n"+r.raw,n.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):t.push(r),i=a.length!==e.length,e=e.substring(r.raw.length);else if(r=this.tokenizer.text(e))e=e.substring(r.raw.length),(n=t[t.length-1])&&"text"===n.type?(n.raw+="\n"+r.raw,n.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):t.push(r);else if(e){var s="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(s);break}throw new Error(s)}return this.state.top=!0,t},i.inline=function(e,t){this.inlineQueue.push({src:e,tokens:t})},i.inlineTokens=function(e,t){var r,n,a,i=this;void 0===t&&(t=[]);var o,s,c,l=e;if(this.tokens.links){var u=Object.keys(this.tokens.links);if(u.length>0)for(;null!=(o=this.tokenizer.rules.inline.reflinkSearch.exec(l));)u.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,o.index)+"["+J("a",o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(o=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,o.index)+"["+J("a",o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(o=this.tokenizer.rules.inline.escapedEmSt.exec(l));)l=l.slice(0,o.index)+"++"+l.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(s||(c=""),s=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((function(n){return!!(r=n.call({lexer:i},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)}))))if(r=this.tokenizer.escape(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.tag(e))e=e.substring(r.raw.length),(n=t[t.length-1])&&"text"===r.type&&"text"===n.type?(n.raw+=r.raw,n.text+=r.text):t.push(r);else if(r=this.tokenizer.link(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(r.raw.length),(n=t[t.length-1])&&"text"===r.type&&"text"===n.type?(n.raw+=r.raw,n.text+=r.text):t.push(r);else if(r=this.tokenizer.emStrong(e,l,c))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.codespan(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.br(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.del(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.autolink(e,X))e=e.substring(r.raw.length),t.push(r);else if(this.state.inLink||!(r=this.tokenizer.url(e,X))){if(a=e,this.options.extensions&&this.options.extensions.startInline&&function(){var t=1/0,r=e.slice(1),n=void 0;i.options.extensions.startInline.forEach((function(e){"number"==typeof(n=e.call({lexer:this},r))&&n>=0&&(t=Math.min(t,n))})),t<1/0&&t>=0&&(a=e.substring(0,t+1))}(),r=this.tokenizer.inlineText(a,Q))e=e.substring(r.raw.length),"_"!==r.raw.slice(-1)&&(c=r.raw.slice(-1)),s=!0,(n=t[t.length-1])&&"text"===n.type?(n.raw+=r.raw,n.text+=r.text):t.push(r);else if(e){var d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}throw new Error(d)}}else e=e.substring(r.raw.length),t.push(r);return t},r=t,a=[{key:"rules",get:function(){return{block:W,inline:Y}}}],(n=null)&&e(r.prototype,n),a&&e(r,a),t}(),ee=n.exports.defaults,te=E,re=x,ne=function(){function e(e){this.options=e||ee}var t=e.prototype;return t.code=function(e,t,r){var n=(t||"").match(/\S*/)[0];if(this.options.highlight){var a=this.options.highlight(e,n);null!=a&&a!==e&&(r=!0,e=a)}return e=e.replace(/\n$/,"")+"\n",n?'<pre><code class="'+this.options.langPrefix+re(n,!0)+'">'+(r?e:re(e,!0))+"</code></pre>\n":"<pre><code>"+(r?e:re(e,!0))+"</code></pre>\n"},t.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},t.html=function(e){return e},t.heading=function(e,t,r,n){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+n.slug(r)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},t.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},t.list=function(e,t,r){var n=t?"ol":"ul";return"<"+n+(t&&1!==r?' start="'+r+'"':"")+">\n"+e+"</"+n+">\n"},t.listitem=function(e){return"<li>"+e+"</li>\n"},t.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},t.paragraph=function(e){return"<p>"+e+"</p>\n"},t.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},t.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},t.tablecell=function(e,t){var r=t.header?"th":"td";return(t.align?"<"+r+' align="'+t.align+'">':"<"+r+">")+e+"</"+r+">\n"},t.strong=function(e){return"<strong>"+e+"</strong>"},t.em=function(e){return"<em>"+e+"</em>"},t.codespan=function(e){return"<code>"+e+"</code>"},t.br=function(){return this.options.xhtml?"<br/>":"<br>"},t.del=function(e){return"<del>"+e+"</del>"},t.link=function(e,t,r){if(null===(e=te(this.options.sanitize,this.options.baseUrl,e)))return r;var n='<a href="'+re(e)+'"';return t&&(n+=' title="'+t+'"'),n+=">"+r+"</a>"},t.image=function(e,t,r){if(null===(e=te(this.options.sanitize,this.options.baseUrl,e)))return r;var n='<img src="'+e+'" alt="'+r+'"';return t&&(n+=' title="'+t+'"'),n+=this.options.xhtml?"/>":">"},t.text=function(e){return e},e}(),ae=function(){function e(){}var t=e.prototype;return t.strong=function(e){return e},t.em=function(e){return e},t.codespan=function(e){return e},t.del=function(e){return e},t.html=function(e){return e},t.text=function(e){return e},t.link=function(e,t,r){return""+r},t.image=function(e,t,r){return""+r},t.br=function(){return""},e}(),ie=function(){function e(){this.seen={}}var t=e.prototype;return t.serialize=function(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},t.getNextSafeSlug=function(e,t){var r=e,n=0;if(this.seen.hasOwnProperty(r)){n=this.seen[e];do{r=e+"-"+ ++n}while(this.seen.hasOwnProperty(r))}return t||(this.seen[e]=n,this.seen[r]=0),r},t.slug=function(e,t){void 0===t&&(t={});var r=this.serialize(e);return this.getNextSafeSlug(r,t.dryrun)},e}(),oe=ne,se=ae,ce=ie,le=n.exports.defaults,ue=k,de=Z,he=function(){function e(e){this.options=e||le,this.options.renderer=this.options.renderer||new oe,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new se,this.slugger=new ce}e.parse=function(t,r){return new e(r).parse(t)},e.parseInline=function(t,r){return new e(r).parseInline(t)};var t=e.prototype;return t.parse=function(e,t){void 0===t&&(t=!0);var r,n,a,i,o,s,c,l,u,d,h,p,f,m,g,y,v,b,_,w="",x=e.length;for(r=0;r<x;r++)if(d=e[r],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[d.type])||!1===(_=this.options.extensions.renderers[d.type].call({parser:this},d))&&["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(d.type))switch(d.type){case"space":continue;case"hr":w+=this.renderer.hr();continue;case"heading":w+=this.renderer.heading(this.parseInline(d.tokens),d.depth,ue(this.parseInline(d.tokens,this.textRenderer)),this.slugger);continue;case"code":w+=this.renderer.code(d.text,d.lang,d.escaped);continue;case"table":for(l="",c="",i=d.header.length,n=0;n<i;n++)c+=this.renderer.tablecell(this.parseInline(d.header[n].tokens),{header:!0,align:d.align[n]});for(l+=this.renderer.tablerow(c),u="",i=d.rows.length,n=0;n<i;n++){for(c="",o=(s=d.rows[n]).length,a=0;a<o;a++)c+=this.renderer.tablecell(this.parseInline(s[a].tokens),{header:!1,align:d.align[a]});u+=this.renderer.tablerow(c)}w+=this.renderer.table(l,u);continue;case"blockquote":u=this.parse(d.tokens),w+=this.renderer.blockquote(u);continue;case"list":for(h=d.ordered,p=d.start,f=d.loose,i=d.items.length,u="",n=0;n<i;n++)y=(g=d.items[n]).checked,v=g.task,m="",g.task&&(b=this.renderer.checkbox(y),f?g.tokens.length>0&&"paragraph"===g.tokens[0].type?(g.tokens[0].text=b+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&"text"===g.tokens[0].tokens[0].type&&(g.tokens[0].tokens[0].text=b+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:b}):m+=b),m+=this.parse(g.tokens,f),u+=this.renderer.listitem(m,v,y);w+=this.renderer.list(u,h,p);continue;case"html":w+=this.renderer.html(d.text);continue;case"paragraph":w+=this.renderer.paragraph(this.parseInline(d.tokens));continue;case"text":for(u=d.tokens?this.parseInline(d.tokens):d.text;r+1<x&&"text"===e[r+1].type;)u+="\n"+((d=e[++r]).tokens?this.parseInline(d.tokens):d.text);w+=t?this.renderer.paragraph(u):u;continue;default:var k='Token with "'+d.type+'" type was not found.';if(this.options.silent)return void console.error(k);throw new Error(k)}else w+=_||"";return w},t.parseInline=function(e,t){t=t||this.renderer;var r,n,a,i="",o=e.length;for(r=0;r<o;r++)if(n=e[r],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type])||!1===(a=this.options.extensions.renderers[n.type].call({parser:this},n))&&["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type))switch(n.type){case"escape":i+=t.text(n.text);break;case"html":i+=t.html(n.text);break;case"link":i+=t.link(n.href,n.title,this.parseInline(n.tokens,t));break;case"image":i+=t.image(n.href,n.title,n.text);break;case"strong":i+=t.strong(this.parseInline(n.tokens,t));break;case"em":i+=t.em(this.parseInline(n.tokens,t));break;case"codespan":i+=t.codespan(n.text);break;case"br":i+=t.br();break;case"del":i+=t.del(this.parseInline(n.tokens,t));break;case"text":i+=t.text(n.text);break;default:var s='Token with "'+n.type+'" type was not found.';if(this.options.silent)return void console.error(s);throw new Error(s)}else i+=a||"";return i},e}(),pe=q,fe=ne,me=ae,ge=ie,ye=P,ve=O,be=x,_e=n.exports.getDefaults,we=n.exports.changeDefaults,xe=n.exports.defaults;function ke(e,t,r){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(r=t,t=null),t=ye({},ke.defaults,t||{}),ve(t),r){var n,a=t.highlight;try{n=de.lex(e,t)}catch(e){return r(e)}var i=function(e){var i;if(!e)try{t.walkTokens&&ke.walkTokens(n,t.walkTokens),i=he.parse(n,t)}catch(t){e=t}return t.highlight=a,e?r(e):r(null,i)};if(!a||a.length<3)return i();if(delete t.highlight,!n.length)return i();var o=0;return ke.walkTokens(n,(function(e){"code"===e.type&&(o++,setTimeout((function(){a(e.text,e.lang,(function(t,r){if(t)return i(t);null!=r&&r!==e.text&&(e.text=r,e.escaped=!0),0==--o&&i()}))}),0))})),void(0===o&&i())}try{var s=de.lex(e,t);return t.walkTokens&&ke.walkTokens(s,t.walkTokens),he.parse(s,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+be(e.message+"",!0)+"</pre>";throw e}}return ke.options=ke.setOptions=function(e){return ye(ke.defaults,e),we(ke.defaults),ke},ke.getDefaults=_e,ke.defaults=xe,ke.use=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,a=ye.apply(void 0,[{}].concat(t)),i=ke.defaults.extensions||{renderers:{},childTokens:{}};t.forEach((function(e){if(e.extensions&&(n=!0,e.extensions.forEach((function(e){if(!e.name)throw new Error("extension name required");if(e.renderer){var t=i.renderers?i.renderers[e.name]:null;i.renderers[e.name]=t?function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=e.renderer.apply(this,n);return!1===i&&(i=t.apply(this,n)),i}:e.renderer}if(e.tokenizer){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");i[e.level]?i[e.level].unshift(e.tokenizer):i[e.level]=[e.tokenizer],e.start&&("block"===e.level?i.startBlock?i.startBlock.push(e.start):i.startBlock=[e.start]:"inline"===e.level&&(i.startInline?i.startInline.push(e.start):i.startInline=[e.start]))}e.childTokens&&(i.childTokens[e.name]=e.childTokens)}))),e.renderer&&function(){var t=ke.defaults.renderer||new fe,r=function(r){var n=t[r];t[r]=function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];var s=e.renderer[r].apply(t,i);return!1===s&&(s=n.apply(t,i)),s}};for(var n in e.renderer)r(n);a.renderer=t}(),e.tokenizer&&function(){var t=ke.defaults.tokenizer||new pe,r=function(r){var n=t[r];t[r]=function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];var s=e.tokenizer[r].apply(t,i);return!1===s&&(s=n.apply(t,i)),s}};for(var n in e.tokenizer)r(n);a.tokenizer=t}(),e.walkTokens){var t=ke.defaults.walkTokens;a.walkTokens=function(r){e.walkTokens.call(this,r),t&&t.call(this,r)}}n&&(a.extensions=i),ke.setOptions(a)}))},ke.walkTokens=function(e,t){for(var n,a=function(){var e=n.value;switch(t.call(ke,e),e.type){case"table":for(var a,i=r(e.header);!(a=i()).done;){var o=a.value;ke.walkTokens(o.tokens,t)}for(var s,c=r(e.rows);!(s=c()).done;)for(var l,u=r(s.value);!(l=u()).done;){var d=l.value;ke.walkTokens(d.tokens,t)}break;case"list":ke.walkTokens(e.items,t);break;default:ke.defaults.extensions&&ke.defaults.extensions.childTokens&&ke.defaults.extensions.childTokens[e.type]?ke.defaults.extensions.childTokens[e.type].forEach((function(r){ke.walkTokens(e[r],t)})):e.tokens&&ke.walkTokens(e.tokens,t)}},i=r(e);!(n=i()).done;)a()},ke.parseInline=function(e,t){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");t=ye({},ke.defaults,t||{}),ve(t);try{var r=de.lexInline(e,t);return t.walkTokens&&ke.walkTokens(r,t.walkTokens),he.parseInline(r,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+be(e.message+"",!0)+"</pre>";throw e}},ke.Parser=he,ke.parser=he.parse,ke.Renderer=fe,ke.TextRenderer=me,ke.Lexer=de,ke.lexer=de.lex,ke.Tokenizer=pe,ke.Slugger=ge,ke.parse=ke,ke}()},function(e,t,r){const n=r(1133),a=r(1142),{klona:i}=r(1143),{isPlainObject:o}=r(1144),s=r(1145),c=r(1146),{parse:l}=r(1147),u=["img","audio","video","picture","svg","object","map","iframe","embed"],d=["script","style"];function h(e,t){e&&Object.keys(e).forEach((function(r){t(e[r],r)}))}function p(e,t){return{}.hasOwnProperty.call(e,t)}function f(e,t){const r=[];return h(e,(function(e){t(e)&&r.push(e)})),r}e.exports=g;const m=/^[^\0\t\n\f\r /<=>]+$/;function g(e,t,r){if(null==e)return"";let v="",b="";function _(e,t){const r=this;this.tag=e,this.attribs=t||{},this.tagPosition=v.length,this.text="",this.mediaChildren=[],this.updateParentNodeText=function(){if(D.length){D[D.length-1].text+=r.text}},this.updateParentNodeMediaChildren=function(){if(D.length&&u.includes(this.tag)){D[D.length-1].mediaChildren.push(this.tag)}}}(t=Object.assign({},g.defaults,t)).parser=Object.assign({},y,t.parser),d.forEach((function(e){t.allowedTags&&t.allowedTags.indexOf(e)>-1&&!t.allowVulnerableTags&&console.warn(`\n\n⚠️ Your \`allowedTags\` option includes, \`${e}\`, which is inherently\nvulnerable to XSS attacks. Please remove it from \`allowedTags\`.\nOr, to disable this warning, add the \`allowVulnerableTags\` option\nand ensure you are accounting for this risk.\n\n`)}));const w=t.nonTextTags||["script","style","textarea","option"];let x,k;t.allowedAttributes&&(x={},k={},h(t.allowedAttributes,(function(e,t){x[t]=[];const r=[];e.forEach((function(e){"string"==typeof e&&e.indexOf("*")>=0?r.push(a(e).replace(/\\\*/g,".*")):x[t].push(e)})),r.length&&(k[t]=new RegExp("^("+r.join("|")+")$"))})));const S={},E={};h(t.allowedClasses,(function(e,t){x&&(p(x,t)||(x[t]=[]),x[t].push("class")),S[t]=[];const r=[];e.forEach((function(e){"string"==typeof e&&e.indexOf("*")>=0?r.push(a(e).replace(/\\\*/g,".*")):S[t].push(e)})),r.length&&(E[t]=new RegExp("^("+r.join("|")+")$"))}));const A={};let P,C,D,T,O,M,I;h(t.transformTags,(function(e,t){let r;"function"==typeof e?r=e:"string"==typeof e&&(r=g.simpleTransform(e)),"*"===t?P=r:A[t]=r}));let R=!1;B();const F=new n.Parser({onopentag:function(e,r){if(t.enforceHtmlBoundary&&"html"===e&&B(),M)return void I++;const n=new _(e,r);D.push(n);let a=!1;const u=!!n.text;let d;if(p(A,e)&&(d=A[e](e,r),n.attribs=r=d.attribs,void 0!==d.text&&(n.innerText=d.text),e!==d.tagName&&(n.name=e=d.tagName,O[C]=d.tagName)),P&&(d=P(e,r),n.attribs=r=d.attribs,e!==d.tagName&&(n.name=e=d.tagName,O[C]=d.tagName)),(t.allowedTags&&-1===t.allowedTags.indexOf(e)||"recursiveEscape"===t.disallowedTagsMode&&!function(e){for(const t in e)if(p(e,t))return!1;return!0}(T)||null!=t.nestingLimit&&C>=t.nestingLimit)&&(a=!0,T[C]=!0,"discard"===t.disallowedTagsMode&&-1!==w.indexOf(e)&&(M=!0,I=1),T[C]=!0),C++,a){if("discard"===t.disallowedTagsMode)return;b=v,v=""}v+="<"+e,"script"===e&&(t.allowedScriptHostnames||t.allowedScriptDomains)&&(n.innerText=""),(!x||p(x,e)||x["*"])&&h(r,(function(r,a){if(!m.test(a))return void delete n.attribs[a];let u,d=!1;if(!x||p(x,e)&&-1!==x[e].indexOf(a)||x["*"]&&-1!==x["*"].indexOf(a)||p(k,e)&&k[e].test(a)||k["*"]&&k["*"].test(a))d=!0;else if(x&&x[e])for(const t of x[e])if(o(t)&&t.name&&t.name===a){d=!0;let e="";if(!0===t.multiple){const n=r.split(" ");for(const r of n)-1!==t.values.indexOf(r)&&(""===e?e=r:e+=" "+r)}else t.values.indexOf(r)>=0&&(e=r);r=e}if(d){if(-1!==t.allowedSchemesAppliedToAttributes.indexOf(a)&&N(e,r))return void delete n.attribs[a];if("script"===e&&"src"===a){let e=!0;try{const n=new URL(r);if(t.allowedScriptHostnames||t.allowedScriptDomains){const r=(t.allowedScriptHostnames||[]).find((function(e){return e===n.hostname})),a=(t.allowedScriptDomains||[]).find((function(e){return n.hostname===e||n.hostname.endsWith("."+e)}));e=r||a}}catch(t){e=!1}if(!e)return void delete n.attribs[a]}if("iframe"===e&&"src"===a){let e=!0;try{if((r=r.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//")).startsWith("relative:"))throw new Error("relative: exploit attempt");let n="relative://relative-site";for(let e=0;e<100;e++)n+="/"+e;const a=new URL(r,n);if(a&&"relative-site"===a.hostname&&"relative:"===a.protocol)e=p(t,"allowIframeRelativeUrls")?t.allowIframeRelativeUrls:!t.allowedIframeHostnames&&!t.allowedIframeDomains;else if(t.allowedIframeHostnames||t.allowedIframeDomains){const r=(t.allowedIframeHostnames||[]).find((function(e){return e===a.hostname})),n=(t.allowedIframeDomains||[]).find((function(e){return a.hostname===e||a.hostname.endsWith("."+e)}));e=r||n}}catch(t){e=!1}if(!e)return void delete n.attribs[a]}if("srcset"===a)try{if(u=c(r),u.forEach((function(e){N("srcset",e.url)&&(e.evil=!0)})),u=f(u,(function(e){return!e.evil})),!u.length)return void delete n.attribs[a];r=f(u,(function(e){return!e.evil})).map((function(e){if(!e.url)throw new Error("URL missing");return e.url+(e.w?` ${e.w}w`:"")+(e.h?` ${e.h}h`:"")+(e.d?` ${e.d}x`:"")})).join(", "),n.attribs[a]=r}catch(e){return void delete n.attribs[a]}if("class"===a){const t=S[e],i=S["*"],o=[E[e],E["*"]].filter((function(e){return e}));if(!(r=q(r,t&&i?s(t,i):t||i,o)).length)return void delete n.attribs[a]}if("style"===a)try{const o=l(e+" {"+r+"}");if(0===(r=function(e){return e.nodes[0].nodes.reduce((function(e,t){return e.push(t.prop+":"+t.value),e}),[]).join(";")}(function(e,t){if(!t)return e;const r=i(e),n=e.nodes[0];let a;a=t[n.selector]&&t["*"]?s(t[n.selector],t["*"]):t[n.selector]||t["*"];a&&(r.nodes[0].nodes=n.nodes.reduce(function(e){return function(t,r){if(p(e,r.prop)){e[r.prop].some((function(e){return e.test(r.value)}))&&t.push(r)}return t}}(a),[]));return r}(o,t.allowedStyles))).length)return void delete n.attribs[a]}catch(e){return void delete n.attribs[a]}v+=" "+a,r&&r.length&&(v+='="'+j(r,!0)+'"')}else delete n.attribs[a]})),-1!==t.selfClosing.indexOf(e)?v+=" />":(v+=">",!n.innerText||u||t.textFilter||(v+=j(n.innerText),R=!0)),a&&(v=b+j(v),b="")},ontext:function(e){if(M)return;const r=D[D.length-1];let n;if(r&&(n=r.tag,e=void 0!==r.innerText?r.innerText:e),"discard"!==t.disallowedTagsMode||"script"!==n&&"style"!==n){const r=j(e,!1);t.textFilter&&!R?v+=t.textFilter(r,n):R||(v+=r)}else v+=e;if(D.length){D[D.length-1].text+=e}},onclosetag:function(e){if(M){if(I--,I)return;M=!1}const r=D.pop();if(!r)return;M=!!t.enforceHtmlBoundary&&"html"===e,C--;const n=T[C];if(n){if(delete T[C],"discard"===t.disallowedTagsMode)return void r.updateParentNodeText();b=v,v=""}O[C]&&(e=O[C],delete O[C]),t.exclusiveFilter&&t.exclusiveFilter(r)?v=v.substr(0,r.tagPosition):(r.updateParentNodeMediaChildren(),r.updateParentNodeText(),-1===t.selfClosing.indexOf(e)?(v+="</"+e+">",n&&(v=b+j(v),b="")):n&&(v=b,b=""))}},t.parser);return F.write(e),F.end(),v;function B(){v="",C=0,D=[],T={},O={},M=!1,I=0}function j(e,r){return"string"!=typeof e&&(e+=""),t.parser.decodeEntities&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),r&&(e=e.replace(/"/g,"&quot;"))),e=e.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),r&&(e=e.replace(/"/g,"&quot;")),e}function N(e,r){const n=(r=(r=r.replace(/[\x00-\x20]+/g,"")).replace(/<!--.*?-->/g,"")).match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!n)return!!r.match(/^[/\\]{2}/)&&!t.allowProtocolRelative;const a=n[1].toLowerCase();return p(t.allowedSchemesByTag,e)?-1===t.allowedSchemesByTag[e].indexOf(a):!t.allowedSchemes||-1===t.allowedSchemes.indexOf(a)}function q(e,t,r){return t?(e=e.split(/\s+/)).filter((function(e){return-1!==t.indexOf(e)||r.some((function(t){return t.test(e)}))})).join(" "):e}}const y={decodeEntities:!0};g.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src"]},selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1},g.simpleTransform=function(e,t,r){return r=void 0===r||r,t=t||{},function(n,a){let i;if(r)for(i in t)a[i]=t[i];else a=t;return{tagName:e,attribs:a}}}},function(e){e.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Abreve":"Ă","abreve":"ă","ac":"∾","acd":"∿","acE":"∾̳","Acirc":"Â","acirc":"â","acute":"´","Acy":"А","acy":"а","AElig":"Æ","aelig":"æ","af":"⁡","Afr":"𝔄","afr":"𝔞","Agrave":"À","agrave":"à","alefsym":"ℵ","aleph":"ℵ","Alpha":"Α","alpha":"α","Amacr":"Ā","amacr":"ā","amalg":"⨿","amp":"&","AMP":"&","andand":"⩕","And":"⩓","and":"∧","andd":"⩜","andslope":"⩘","andv":"⩚","ang":"∠","ange":"⦤","angle":"∠","angmsdaa":"⦨","angmsdab":"⦩","angmsdac":"⦪","angmsdad":"⦫","angmsdae":"⦬","angmsdaf":"⦭","angmsdag":"⦮","angmsdah":"⦯","angmsd":"∡","angrt":"∟","angrtvb":"⊾","angrtvbd":"⦝","angsph":"∢","angst":"Å","angzarr":"⍼","Aogon":"Ą","aogon":"ą","Aopf":"𝔸","aopf":"𝕒","apacir":"⩯","ap":"≈","apE":"⩰","ape":"≊","apid":"≋","apos":"\'","ApplyFunction":"⁡","approx":"≈","approxeq":"≊","Aring":"Å","aring":"å","Ascr":"𝒜","ascr":"𝒶","Assign":"≔","ast":"*","asymp":"≈","asympeq":"≍","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","awconint":"∳","awint":"⨑","backcong":"≌","backepsilon":"϶","backprime":"‵","backsim":"∽","backsimeq":"⋍","Backslash":"∖","Barv":"⫧","barvee":"⊽","barwed":"⌅","Barwed":"⌆","barwedge":"⌅","bbrk":"⎵","bbrktbrk":"⎶","bcong":"≌","Bcy":"Б","bcy":"б","bdquo":"„","becaus":"∵","because":"∵","Because":"∵","bemptyv":"⦰","bepsi":"϶","bernou":"ℬ","Bernoullis":"ℬ","Beta":"Β","beta":"β","beth":"ℶ","between":"≬","Bfr":"𝔅","bfr":"𝔟","bigcap":"⋂","bigcirc":"◯","bigcup":"⋃","bigodot":"⨀","bigoplus":"⨁","bigotimes":"⨂","bigsqcup":"⨆","bigstar":"★","bigtriangledown":"▽","bigtriangleup":"△","biguplus":"⨄","bigvee":"⋁","bigwedge":"⋀","bkarow":"⤍","blacklozenge":"⧫","blacksquare":"▪","blacktriangle":"▴","blacktriangledown":"▾","blacktriangleleft":"◂","blacktriangleright":"▸","blank":"␣","blk12":"▒","blk14":"░","blk34":"▓","block":"█","bne":"=⃥","bnequiv":"≡⃥","bNot":"⫭","bnot":"⌐","Bopf":"𝔹","bopf":"𝕓","bot":"⊥","bottom":"⊥","bowtie":"⋈","boxbox":"⧉","boxdl":"┐","boxdL":"╕","boxDl":"╖","boxDL":"╗","boxdr":"┌","boxdR":"╒","boxDr":"╓","boxDR":"╔","boxh":"─","boxH":"═","boxhd":"┬","boxHd":"╤","boxhD":"╥","boxHD":"╦","boxhu":"┴","boxHu":"╧","boxhU":"╨","boxHU":"╩","boxminus":"⊟","boxplus":"⊞","boxtimes":"⊠","boxul":"┘","boxuL":"╛","boxUl":"╜","boxUL":"╝","boxur":"└","boxuR":"╘","boxUr":"╙","boxUR":"╚","boxv":"│","boxV":"║","boxvh":"┼","boxvH":"╪","boxVh":"╫","boxVH":"╬","boxvl":"┤","boxvL":"╡","boxVl":"╢","boxVL":"╣","boxvr":"├","boxvR":"╞","boxVr":"╟","boxVR":"╠","bprime":"‵","breve":"˘","Breve":"˘","brvbar":"¦","bscr":"𝒷","Bscr":"ℬ","bsemi":"⁏","bsim":"∽","bsime":"⋍","bsolb":"⧅","bsol":"\\\\","bsolhsub":"⟈","bull":"•","bullet":"•","bump":"≎","bumpE":"⪮","bumpe":"≏","Bumpeq":"≎","bumpeq":"≏","Cacute":"Ć","cacute":"ć","capand":"⩄","capbrcup":"⩉","capcap":"⩋","cap":"∩","Cap":"⋒","capcup":"⩇","capdot":"⩀","CapitalDifferentialD":"ⅅ","caps":"∩︀","caret":"⁁","caron":"ˇ","Cayleys":"ℭ","ccaps":"⩍","Ccaron":"Č","ccaron":"č","Ccedil":"Ç","ccedil":"ç","Ccirc":"Ĉ","ccirc":"ĉ","Cconint":"∰","ccups":"⩌","ccupssm":"⩐","Cdot":"Ċ","cdot":"ċ","cedil":"¸","Cedilla":"¸","cemptyv":"⦲","cent":"¢","centerdot":"·","CenterDot":"·","cfr":"𝔠","Cfr":"ℭ","CHcy":"Ч","chcy":"ч","check":"✓","checkmark":"✓","Chi":"Χ","chi":"χ","circ":"ˆ","circeq":"≗","circlearrowleft":"↺","circlearrowright":"↻","circledast":"⊛","circledcirc":"⊚","circleddash":"⊝","CircleDot":"⊙","circledR":"®","circledS":"Ⓢ","CircleMinus":"⊖","CirclePlus":"⊕","CircleTimes":"⊗","cir":"○","cirE":"⧃","cire":"≗","cirfnint":"⨐","cirmid":"⫯","cirscir":"⧂","ClockwiseContourIntegral":"∲","CloseCurlyDoubleQuote":"”","CloseCurlyQuote":"’","clubs":"♣","clubsuit":"♣","colon":":","Colon":"∷","Colone":"⩴","colone":"≔","coloneq":"≔","comma":",","commat":"@","comp":"∁","compfn":"∘","complement":"∁","complexes":"ℂ","cong":"≅","congdot":"⩭","Congruent":"≡","conint":"∮","Conint":"∯","ContourIntegral":"∮","copf":"𝕔","Copf":"ℂ","coprod":"∐","Coproduct":"∐","copy":"©","COPY":"©","copysr":"℗","CounterClockwiseContourIntegral":"∳","crarr":"↵","cross":"✗","Cross":"⨯","Cscr":"𝒞","cscr":"𝒸","csub":"⫏","csube":"⫑","csup":"⫐","csupe":"⫒","ctdot":"⋯","cudarrl":"⤸","cudarrr":"⤵","cuepr":"⋞","cuesc":"⋟","cularr":"↶","cularrp":"⤽","cupbrcap":"⩈","cupcap":"⩆","CupCap":"≍","cup":"∪","Cup":"⋓","cupcup":"⩊","cupdot":"⊍","cupor":"⩅","cups":"∪︀","curarr":"↷","curarrm":"⤼","curlyeqprec":"⋞","curlyeqsucc":"⋟","curlyvee":"⋎","curlywedge":"⋏","curren":"¤","curvearrowleft":"↶","curvearrowright":"↷","cuvee":"⋎","cuwed":"⋏","cwconint":"∲","cwint":"∱","cylcty":"⌭","dagger":"†","Dagger":"‡","daleth":"ℸ","darr":"↓","Darr":"↡","dArr":"⇓","dash":"‐","Dashv":"⫤","dashv":"⊣","dbkarow":"⤏","dblac":"˝","Dcaron":"Ď","dcaron":"ď","Dcy":"Д","dcy":"д","ddagger":"‡","ddarr":"⇊","DD":"ⅅ","dd":"ⅆ","DDotrahd":"⤑","ddotseq":"⩷","deg":"°","Del":"∇","Delta":"Δ","delta":"δ","demptyv":"⦱","dfisht":"⥿","Dfr":"𝔇","dfr":"𝔡","dHar":"⥥","dharl":"⇃","dharr":"⇂","DiacriticalAcute":"´","DiacriticalDot":"˙","DiacriticalDoubleAcute":"˝","DiacriticalGrave":"`","DiacriticalTilde":"˜","diam":"⋄","diamond":"⋄","Diamond":"⋄","diamondsuit":"♦","diams":"♦","die":"¨","DifferentialD":"ⅆ","digamma":"ϝ","disin":"⋲","div":"÷","divide":"÷","divideontimes":"⋇","divonx":"⋇","DJcy":"Ђ","djcy":"ђ","dlcorn":"⌞","dlcrop":"⌍","dollar":"$","Dopf":"𝔻","dopf":"𝕕","Dot":"¨","dot":"˙","DotDot":"⃜","doteq":"≐","doteqdot":"≑","DotEqual":"≐","dotminus":"∸","dotplus":"∔","dotsquare":"⊡","doublebarwedge":"⌆","DoubleContourIntegral":"∯","DoubleDot":"¨","DoubleDownArrow":"⇓","DoubleLeftArrow":"⇐","DoubleLeftRightArrow":"⇔","DoubleLeftTee":"⫤","DoubleLongLeftArrow":"⟸","DoubleLongLeftRightArrow":"⟺","DoubleLongRightArrow":"⟹","DoubleRightArrow":"⇒","DoubleRightTee":"⊨","DoubleUpArrow":"⇑","DoubleUpDownArrow":"⇕","DoubleVerticalBar":"∥","DownArrowBar":"⤓","downarrow":"↓","DownArrow":"↓","Downarrow":"⇓","DownArrowUpArrow":"⇵","DownBreve":"̑","downdownarrows":"⇊","downharpoonleft":"⇃","downharpoonright":"⇂","DownLeftRightVector":"⥐","DownLeftTeeVector":"⥞","DownLeftVectorBar":"⥖","DownLeftVector":"↽","DownRightTeeVector":"⥟","DownRightVectorBar":"⥗","DownRightVector":"⇁","DownTeeArrow":"↧","DownTee":"⊤","drbkarow":"⤐","drcorn":"⌟","drcrop":"⌌","Dscr":"𝒟","dscr":"𝒹","DScy":"Ѕ","dscy":"ѕ","dsol":"⧶","Dstrok":"Đ","dstrok":"đ","dtdot":"⋱","dtri":"▿","dtrif":"▾","duarr":"⇵","duhar":"⥯","dwangle":"⦦","DZcy":"Џ","dzcy":"џ","dzigrarr":"⟿","Eacute":"É","eacute":"é","easter":"⩮","Ecaron":"Ě","ecaron":"ě","Ecirc":"Ê","ecirc":"ê","ecir":"≖","ecolon":"≕","Ecy":"Э","ecy":"э","eDDot":"⩷","Edot":"Ė","edot":"ė","eDot":"≑","ee":"ⅇ","efDot":"≒","Efr":"𝔈","efr":"𝔢","eg":"⪚","Egrave":"È","egrave":"è","egs":"⪖","egsdot":"⪘","el":"⪙","Element":"∈","elinters":"⏧","ell":"ℓ","els":"⪕","elsdot":"⪗","Emacr":"Ē","emacr":"ē","empty":"∅","emptyset":"∅","EmptySmallSquare":"◻","emptyv":"∅","EmptyVerySmallSquare":"▫","emsp13":" ","emsp14":" ","emsp":" ","ENG":"Ŋ","eng":"ŋ","ensp":" ","Eogon":"Ę","eogon":"ę","Eopf":"𝔼","eopf":"𝕖","epar":"⋕","eparsl":"⧣","eplus":"⩱","epsi":"ε","Epsilon":"Ε","epsilon":"ε","epsiv":"ϵ","eqcirc":"≖","eqcolon":"≕","eqsim":"≂","eqslantgtr":"⪖","eqslantless":"⪕","Equal":"⩵","equals":"=","EqualTilde":"≂","equest":"≟","Equilibrium":"⇌","equiv":"≡","equivDD":"⩸","eqvparsl":"⧥","erarr":"⥱","erDot":"≓","escr":"ℯ","Escr":"ℰ","esdot":"≐","Esim":"⩳","esim":"≂","Eta":"Η","eta":"η","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","euro":"€","excl":"!","exist":"∃","Exists":"∃","expectation":"ℰ","exponentiale":"ⅇ","ExponentialE":"ⅇ","fallingdotseq":"≒","Fcy":"Ф","fcy":"ф","female":"♀","ffilig":"ﬃ","fflig":"ﬀ","ffllig":"ﬄ","Ffr":"𝔉","ffr":"𝔣","filig":"ﬁ","FilledSmallSquare":"◼","FilledVerySmallSquare":"▪","fjlig":"fj","flat":"♭","fllig":"ﬂ","fltns":"▱","fnof":"ƒ","Fopf":"𝔽","fopf":"𝕗","forall":"∀","ForAll":"∀","fork":"⋔","forkv":"⫙","Fouriertrf":"ℱ","fpartint":"⨍","frac12":"½","frac13":"⅓","frac14":"¼","frac15":"⅕","frac16":"⅙","frac18":"⅛","frac23":"⅔","frac25":"⅖","frac34":"¾","frac35":"⅗","frac38":"⅜","frac45":"⅘","frac56":"⅚","frac58":"⅝","frac78":"⅞","frasl":"⁄","frown":"⌢","fscr":"𝒻","Fscr":"ℱ","gacute":"ǵ","Gamma":"Γ","gamma":"γ","Gammad":"Ϝ","gammad":"ϝ","gap":"⪆","Gbreve":"Ğ","gbreve":"ğ","Gcedil":"Ģ","Gcirc":"Ĝ","gcirc":"ĝ","Gcy":"Г","gcy":"г","Gdot":"Ġ","gdot":"ġ","ge":"≥","gE":"≧","gEl":"⪌","gel":"⋛","geq":"≥","geqq":"≧","geqslant":"⩾","gescc":"⪩","ges":"⩾","gesdot":"⪀","gesdoto":"⪂","gesdotol":"⪄","gesl":"⋛︀","gesles":"⪔","Gfr":"𝔊","gfr":"𝔤","gg":"≫","Gg":"⋙","ggg":"⋙","gimel":"ℷ","GJcy":"Ѓ","gjcy":"ѓ","gla":"⪥","gl":"≷","glE":"⪒","glj":"⪤","gnap":"⪊","gnapprox":"⪊","gne":"⪈","gnE":"≩","gneq":"⪈","gneqq":"≩","gnsim":"⋧","Gopf":"𝔾","gopf":"𝕘","grave":"`","GreaterEqual":"≥","GreaterEqualLess":"⋛","GreaterFullEqual":"≧","GreaterGreater":"⪢","GreaterLess":"≷","GreaterSlantEqual":"⩾","GreaterTilde":"≳","Gscr":"𝒢","gscr":"ℊ","gsim":"≳","gsime":"⪎","gsiml":"⪐","gtcc":"⪧","gtcir":"⩺","gt":">","GT":">","Gt":"≫","gtdot":"⋗","gtlPar":"⦕","gtquest":"⩼","gtrapprox":"⪆","gtrarr":"⥸","gtrdot":"⋗","gtreqless":"⋛","gtreqqless":"⪌","gtrless":"≷","gtrsim":"≳","gvertneqq":"≩︀","gvnE":"≩︀","Hacek":"ˇ","hairsp":" ","half":"½","hamilt":"ℋ","HARDcy":"Ъ","hardcy":"ъ","harrcir":"⥈","harr":"↔","hArr":"⇔","harrw":"↭","Hat":"^","hbar":"ℏ","Hcirc":"Ĥ","hcirc":"ĥ","hearts":"♥","heartsuit":"♥","hellip":"…","hercon":"⊹","hfr":"𝔥","Hfr":"ℌ","HilbertSpace":"ℋ","hksearow":"⤥","hkswarow":"⤦","hoarr":"⇿","homtht":"∻","hookleftarrow":"↩","hookrightarrow":"↪","hopf":"𝕙","Hopf":"ℍ","horbar":"―","HorizontalLine":"─","hscr":"𝒽","Hscr":"ℋ","hslash":"ℏ","Hstrok":"Ħ","hstrok":"ħ","HumpDownHump":"≎","HumpEqual":"≏","hybull":"⁃","hyphen":"‐","Iacute":"Í","iacute":"í","ic":"⁣","Icirc":"Î","icirc":"î","Icy":"И","icy":"и","Idot":"İ","IEcy":"Е","iecy":"е","iexcl":"¡","iff":"⇔","ifr":"𝔦","Ifr":"ℑ","Igrave":"Ì","igrave":"ì","ii":"ⅈ","iiiint":"⨌","iiint":"∭","iinfin":"⧜","iiota":"℩","IJlig":"Ĳ","ijlig":"ĳ","Imacr":"Ī","imacr":"ī","image":"ℑ","ImaginaryI":"ⅈ","imagline":"ℐ","imagpart":"ℑ","imath":"ı","Im":"ℑ","imof":"⊷","imped":"Ƶ","Implies":"⇒","incare":"℅","in":"∈","infin":"∞","infintie":"⧝","inodot":"ı","intcal":"⊺","int":"∫","Int":"∬","integers":"ℤ","Integral":"∫","intercal":"⊺","Intersection":"⋂","intlarhk":"⨗","intprod":"⨼","InvisibleComma":"⁣","InvisibleTimes":"⁢","IOcy":"Ё","iocy":"ё","Iogon":"Į","iogon":"į","Iopf":"𝕀","iopf":"𝕚","Iota":"Ι","iota":"ι","iprod":"⨼","iquest":"¿","iscr":"𝒾","Iscr":"ℐ","isin":"∈","isindot":"⋵","isinE":"⋹","isins":"⋴","isinsv":"⋳","isinv":"∈","it":"⁢","Itilde":"Ĩ","itilde":"ĩ","Iukcy":"І","iukcy":"і","Iuml":"Ï","iuml":"ï","Jcirc":"Ĵ","jcirc":"ĵ","Jcy":"Й","jcy":"й","Jfr":"𝔍","jfr":"𝔧","jmath":"ȷ","Jopf":"𝕁","jopf":"𝕛","Jscr":"𝒥","jscr":"𝒿","Jsercy":"Ј","jsercy":"ј","Jukcy":"Є","jukcy":"є","Kappa":"Κ","kappa":"κ","kappav":"ϰ","Kcedil":"Ķ","kcedil":"ķ","Kcy":"К","kcy":"к","Kfr":"𝔎","kfr":"𝔨","kgreen":"ĸ","KHcy":"Х","khcy":"х","KJcy":"Ќ","kjcy":"ќ","Kopf":"𝕂","kopf":"𝕜","Kscr":"𝒦","kscr":"𝓀","lAarr":"⇚","Lacute":"Ĺ","lacute":"ĺ","laemptyv":"⦴","lagran":"ℒ","Lambda":"Λ","lambda":"λ","lang":"⟨","Lang":"⟪","langd":"⦑","langle":"⟨","lap":"⪅","Laplacetrf":"ℒ","laquo":"«","larrb":"⇤","larrbfs":"⤟","larr":"←","Larr":"↞","lArr":"⇐","larrfs":"⤝","larrhk":"↩","larrlp":"↫","larrpl":"⤹","larrsim":"⥳","larrtl":"↢","latail":"⤙","lAtail":"⤛","lat":"⪫","late":"⪭","lates":"⪭︀","lbarr":"⤌","lBarr":"⤎","lbbrk":"❲","lbrace":"{","lbrack":"[","lbrke":"⦋","lbrksld":"⦏","lbrkslu":"⦍","Lcaron":"Ľ","lcaron":"ľ","Lcedil":"Ļ","lcedil":"ļ","lceil":"⌈","lcub":"{","Lcy":"Л","lcy":"л","ldca":"⤶","ldquo":"“","ldquor":"„","ldrdhar":"⥧","ldrushar":"⥋","ldsh":"↲","le":"≤","lE":"≦","LeftAngleBracket":"⟨","LeftArrowBar":"⇤","leftarrow":"←","LeftArrow":"←","Leftarrow":"⇐","LeftArrowRightArrow":"⇆","leftarrowtail":"↢","LeftCeiling":"⌈","LeftDoubleBracket":"⟦","LeftDownTeeVector":"⥡","LeftDownVectorBar":"⥙","LeftDownVector":"⇃","LeftFloor":"⌊","leftharpoondown":"↽","leftharpoonup":"↼","leftleftarrows":"⇇","leftrightarrow":"↔","LeftRightArrow":"↔","Leftrightarrow":"⇔","leftrightarrows":"⇆","leftrightharpoons":"⇋","leftrightsquigarrow":"↭","LeftRightVector":"⥎","LeftTeeArrow":"↤","LeftTee":"⊣","LeftTeeVector":"⥚","leftthreetimes":"⋋","LeftTriangleBar":"⧏","LeftTriangle":"⊲","LeftTriangleEqual":"⊴","LeftUpDownVector":"⥑","LeftUpTeeVector":"⥠","LeftUpVectorBar":"⥘","LeftUpVector":"↿","LeftVectorBar":"⥒","LeftVector":"↼","lEg":"⪋","leg":"⋚","leq":"≤","leqq":"≦","leqslant":"⩽","lescc":"⪨","les":"⩽","lesdot":"⩿","lesdoto":"⪁","lesdotor":"⪃","lesg":"⋚︀","lesges":"⪓","lessapprox":"⪅","lessdot":"⋖","lesseqgtr":"⋚","lesseqqgtr":"⪋","LessEqualGreater":"⋚","LessFullEqual":"≦","LessGreater":"≶","lessgtr":"≶","LessLess":"⪡","lesssim":"≲","LessSlantEqual":"⩽","LessTilde":"≲","lfisht":"⥼","lfloor":"⌊","Lfr":"𝔏","lfr":"𝔩","lg":"≶","lgE":"⪑","lHar":"⥢","lhard":"↽","lharu":"↼","lharul":"⥪","lhblk":"▄","LJcy":"Љ","ljcy":"љ","llarr":"⇇","ll":"≪","Ll":"⋘","llcorner":"⌞","Lleftarrow":"⇚","llhard":"⥫","lltri":"◺","Lmidot":"Ŀ","lmidot":"ŀ","lmoustache":"⎰","lmoust":"⎰","lnap":"⪉","lnapprox":"⪉","lne":"⪇","lnE":"≨","lneq":"⪇","lneqq":"≨","lnsim":"⋦","loang":"⟬","loarr":"⇽","lobrk":"⟦","longleftarrow":"⟵","LongLeftArrow":"⟵","Longleftarrow":"⟸","longleftrightarrow":"⟷","LongLeftRightArrow":"⟷","Longleftrightarrow":"⟺","longmapsto":"⟼","longrightarrow":"⟶","LongRightArrow":"⟶","Longrightarrow":"⟹","looparrowleft":"↫","looparrowright":"↬","lopar":"⦅","Lopf":"𝕃","lopf":"𝕝","loplus":"⨭","lotimes":"⨴","lowast":"∗","lowbar":"_","LowerLeftArrow":"↙","LowerRightArrow":"↘","loz":"◊","lozenge":"◊","lozf":"⧫","lpar":"(","lparlt":"⦓","lrarr":"⇆","lrcorner":"⌟","lrhar":"⇋","lrhard":"⥭","lrm":"‎","lrtri":"⊿","lsaquo":"‹","lscr":"𝓁","Lscr":"ℒ","lsh":"↰","Lsh":"↰","lsim":"≲","lsime":"⪍","lsimg":"⪏","lsqb":"[","lsquo":"‘","lsquor":"‚","Lstrok":"Ł","lstrok":"ł","ltcc":"⪦","ltcir":"⩹","lt":"<","LT":"<","Lt":"≪","ltdot":"⋖","lthree":"⋋","ltimes":"⋉","ltlarr":"⥶","ltquest":"⩻","ltri":"◃","ltrie":"⊴","ltrif":"◂","ltrPar":"⦖","lurdshar":"⥊","luruhar":"⥦","lvertneqq":"≨︀","lvnE":"≨︀","macr":"¯","male":"♂","malt":"✠","maltese":"✠","Map":"⤅","map":"↦","mapsto":"↦","mapstodown":"↧","mapstoleft":"↤","mapstoup":"↥","marker":"▮","mcomma":"⨩","Mcy":"М","mcy":"м","mdash":"—","mDDot":"∺","measuredangle":"∡","MediumSpace":" ","Mellintrf":"ℳ","Mfr":"𝔐","mfr":"𝔪","mho":"℧","micro":"µ","midast":"*","midcir":"⫰","mid":"∣","middot":"·","minusb":"⊟","minus":"−","minusd":"∸","minusdu":"⨪","MinusPlus":"∓","mlcp":"⫛","mldr":"…","mnplus":"∓","models":"⊧","Mopf":"𝕄","mopf":"𝕞","mp":"∓","mscr":"𝓂","Mscr":"ℳ","mstpos":"∾","Mu":"Μ","mu":"μ","multimap":"⊸","mumap":"⊸","nabla":"∇","Nacute":"Ń","nacute":"ń","nang":"∠⃒","nap":"≉","napE":"⩰̸","napid":"≋̸","napos":"ŉ","napprox":"≉","natural":"♮","naturals":"ℕ","natur":"♮","nbsp":" ","nbump":"≎̸","nbumpe":"≏̸","ncap":"⩃","Ncaron":"Ň","ncaron":"ň","Ncedil":"Ņ","ncedil":"ņ","ncong":"≇","ncongdot":"⩭̸","ncup":"⩂","Ncy":"Н","ncy":"н","ndash":"–","nearhk":"⤤","nearr":"↗","neArr":"⇗","nearrow":"↗","ne":"≠","nedot":"≐̸","NegativeMediumSpace":"​","NegativeThickSpace":"​","NegativeThinSpace":"​","NegativeVeryThinSpace":"​","nequiv":"≢","nesear":"⤨","nesim":"≂̸","NestedGreaterGreater":"≫","NestedLessLess":"≪","NewLine":"\\n","nexist":"∄","nexists":"∄","Nfr":"𝔑","nfr":"𝔫","ngE":"≧̸","nge":"≱","ngeq":"≱","ngeqq":"≧̸","ngeqslant":"⩾̸","nges":"⩾̸","nGg":"⋙̸","ngsim":"≵","nGt":"≫⃒","ngt":"≯","ngtr":"≯","nGtv":"≫̸","nharr":"↮","nhArr":"⇎","nhpar":"⫲","ni":"∋","nis":"⋼","nisd":"⋺","niv":"∋","NJcy":"Њ","njcy":"њ","nlarr":"↚","nlArr":"⇍","nldr":"‥","nlE":"≦̸","nle":"≰","nleftarrow":"↚","nLeftarrow":"⇍","nleftrightarrow":"↮","nLeftrightarrow":"⇎","nleq":"≰","nleqq":"≦̸","nleqslant":"⩽̸","nles":"⩽̸","nless":"≮","nLl":"⋘̸","nlsim":"≴","nLt":"≪⃒","nlt":"≮","nltri":"⋪","nltrie":"⋬","nLtv":"≪̸","nmid":"∤","NoBreak":"⁠","NonBreakingSpace":" ","nopf":"𝕟","Nopf":"ℕ","Not":"⫬","not":"¬","NotCongruent":"≢","NotCupCap":"≭","NotDoubleVerticalBar":"∦","NotElement":"∉","NotEqual":"≠","NotEqualTilde":"≂̸","NotExists":"∄","NotGreater":"≯","NotGreaterEqual":"≱","NotGreaterFullEqual":"≧̸","NotGreaterGreater":"≫̸","NotGreaterLess":"≹","NotGreaterSlantEqual":"⩾̸","NotGreaterTilde":"≵","NotHumpDownHump":"≎̸","NotHumpEqual":"≏̸","notin":"∉","notindot":"⋵̸","notinE":"⋹̸","notinva":"∉","notinvb":"⋷","notinvc":"⋶","NotLeftTriangleBar":"⧏̸","NotLeftTriangle":"⋪","NotLeftTriangleEqual":"⋬","NotLess":"≮","NotLessEqual":"≰","NotLessGreater":"≸","NotLessLess":"≪̸","NotLessSlantEqual":"⩽̸","NotLessTilde":"≴","NotNestedGreaterGreater":"⪢̸","NotNestedLessLess":"⪡̸","notni":"∌","notniva":"∌","notnivb":"⋾","notnivc":"⋽","NotPrecedes":"⊀","NotPrecedesEqual":"⪯̸","NotPrecedesSlantEqual":"⋠","NotReverseElement":"∌","NotRightTriangleBar":"⧐̸","NotRightTriangle":"⋫","NotRightTriangleEqual":"⋭","NotSquareSubset":"⊏̸","NotSquareSubsetEqual":"⋢","NotSquareSuperset":"⊐̸","NotSquareSupersetEqual":"⋣","NotSubset":"⊂⃒","NotSubsetEqual":"⊈","NotSucceeds":"⊁","NotSucceedsEqual":"⪰̸","NotSucceedsSlantEqual":"⋡","NotSucceedsTilde":"≿̸","NotSuperset":"⊃⃒","NotSupersetEqual":"⊉","NotTilde":"≁","NotTildeEqual":"≄","NotTildeFullEqual":"≇","NotTildeTilde":"≉","NotVerticalBar":"∤","nparallel":"∦","npar":"∦","nparsl":"⫽⃥","npart":"∂̸","npolint":"⨔","npr":"⊀","nprcue":"⋠","nprec":"⊀","npreceq":"⪯̸","npre":"⪯̸","nrarrc":"⤳̸","nrarr":"↛","nrArr":"⇏","nrarrw":"↝̸","nrightarrow":"↛","nRightarrow":"⇏","nrtri":"⋫","nrtrie":"⋭","nsc":"⊁","nsccue":"⋡","nsce":"⪰̸","Nscr":"𝒩","nscr":"𝓃","nshortmid":"∤","nshortparallel":"∦","nsim":"≁","nsime":"≄","nsimeq":"≄","nsmid":"∤","nspar":"∦","nsqsube":"⋢","nsqsupe":"⋣","nsub":"⊄","nsubE":"⫅̸","nsube":"⊈","nsubset":"⊂⃒","nsubseteq":"⊈","nsubseteqq":"⫅̸","nsucc":"⊁","nsucceq":"⪰̸","nsup":"⊅","nsupE":"⫆̸","nsupe":"⊉","nsupset":"⊃⃒","nsupseteq":"⊉","nsupseteqq":"⫆̸","ntgl":"≹","Ntilde":"Ñ","ntilde":"ñ","ntlg":"≸","ntriangleleft":"⋪","ntrianglelefteq":"⋬","ntriangleright":"⋫","ntrianglerighteq":"⋭","Nu":"Ν","nu":"ν","num":"#","numero":"№","numsp":" ","nvap":"≍⃒","nvdash":"⊬","nvDash":"⊭","nVdash":"⊮","nVDash":"⊯","nvge":"≥⃒","nvgt":">⃒","nvHarr":"⤄","nvinfin":"⧞","nvlArr":"⤂","nvle":"≤⃒","nvlt":"<⃒","nvltrie":"⊴⃒","nvrArr":"⤃","nvrtrie":"⊵⃒","nvsim":"∼⃒","nwarhk":"⤣","nwarr":"↖","nwArr":"⇖","nwarrow":"↖","nwnear":"⤧","Oacute":"Ó","oacute":"ó","oast":"⊛","Ocirc":"Ô","ocirc":"ô","ocir":"⊚","Ocy":"О","ocy":"о","odash":"⊝","Odblac":"Ő","odblac":"ő","odiv":"⨸","odot":"⊙","odsold":"⦼","OElig":"Œ","oelig":"œ","ofcir":"⦿","Ofr":"𝔒","ofr":"𝔬","ogon":"˛","Ograve":"Ò","ograve":"ò","ogt":"⧁","ohbar":"⦵","ohm":"Ω","oint":"∮","olarr":"↺","olcir":"⦾","olcross":"⦻","oline":"‾","olt":"⧀","Omacr":"Ō","omacr":"ō","Omega":"Ω","omega":"ω","Omicron":"Ο","omicron":"ο","omid":"⦶","ominus":"⊖","Oopf":"𝕆","oopf":"𝕠","opar":"⦷","OpenCurlyDoubleQuote":"“","OpenCurlyQuote":"‘","operp":"⦹","oplus":"⊕","orarr":"↻","Or":"⩔","or":"∨","ord":"⩝","order":"ℴ","orderof":"ℴ","ordf":"ª","ordm":"º","origof":"⊶","oror":"⩖","orslope":"⩗","orv":"⩛","oS":"Ⓢ","Oscr":"𝒪","oscr":"ℴ","Oslash":"Ø","oslash":"ø","osol":"⊘","Otilde":"Õ","otilde":"õ","otimesas":"⨶","Otimes":"⨷","otimes":"⊗","Ouml":"Ö","ouml":"ö","ovbar":"⌽","OverBar":"‾","OverBrace":"⏞","OverBracket":"⎴","OverParenthesis":"⏜","para":"¶","parallel":"∥","par":"∥","parsim":"⫳","parsl":"⫽","part":"∂","PartialD":"∂","Pcy":"П","pcy":"п","percnt":"%","period":".","permil":"‰","perp":"⊥","pertenk":"‱","Pfr":"𝔓","pfr":"𝔭","Phi":"Φ","phi":"φ","phiv":"ϕ","phmmat":"ℳ","phone":"☎","Pi":"Π","pi":"π","pitchfork":"⋔","piv":"ϖ","planck":"ℏ","planckh":"ℎ","plankv":"ℏ","plusacir":"⨣","plusb":"⊞","pluscir":"⨢","plus":"+","plusdo":"∔","plusdu":"⨥","pluse":"⩲","PlusMinus":"±","plusmn":"±","plussim":"⨦","plustwo":"⨧","pm":"±","Poincareplane":"ℌ","pointint":"⨕","popf":"𝕡","Popf":"ℙ","pound":"£","prap":"⪷","Pr":"⪻","pr":"≺","prcue":"≼","precapprox":"⪷","prec":"≺","preccurlyeq":"≼","Precedes":"≺","PrecedesEqual":"⪯","PrecedesSlantEqual":"≼","PrecedesTilde":"≾","preceq":"⪯","precnapprox":"⪹","precneqq":"⪵","precnsim":"⋨","pre":"⪯","prE":"⪳","precsim":"≾","prime":"′","Prime":"″","primes":"ℙ","prnap":"⪹","prnE":"⪵","prnsim":"⋨","prod":"∏","Product":"∏","profalar":"⌮","profline":"⌒","profsurf":"⌓","prop":"∝","Proportional":"∝","Proportion":"∷","propto":"∝","prsim":"≾","prurel":"⊰","Pscr":"𝒫","pscr":"𝓅","Psi":"Ψ","psi":"ψ","puncsp":" ","Qfr":"𝔔","qfr":"𝔮","qint":"⨌","qopf":"𝕢","Qopf":"ℚ","qprime":"⁗","Qscr":"𝒬","qscr":"𝓆","quaternions":"ℍ","quatint":"⨖","quest":"?","questeq":"≟","quot":"\\"","QUOT":"\\"","rAarr":"⇛","race":"∽̱","Racute":"Ŕ","racute":"ŕ","radic":"√","raemptyv":"⦳","rang":"⟩","Rang":"⟫","rangd":"⦒","range":"⦥","rangle":"⟩","raquo":"»","rarrap":"⥵","rarrb":"⇥","rarrbfs":"⤠","rarrc":"⤳","rarr":"→","Rarr":"↠","rArr":"⇒","rarrfs":"⤞","rarrhk":"↪","rarrlp":"↬","rarrpl":"⥅","rarrsim":"⥴","Rarrtl":"⤖","rarrtl":"↣","rarrw":"↝","ratail":"⤚","rAtail":"⤜","ratio":"∶","rationals":"ℚ","rbarr":"⤍","rBarr":"⤏","RBarr":"⤐","rbbrk":"❳","rbrace":"}","rbrack":"]","rbrke":"⦌","rbrksld":"⦎","rbrkslu":"⦐","Rcaron":"Ř","rcaron":"ř","Rcedil":"Ŗ","rcedil":"ŗ","rceil":"⌉","rcub":"}","Rcy":"Р","rcy":"р","rdca":"⤷","rdldhar":"⥩","rdquo":"”","rdquor":"”","rdsh":"↳","real":"ℜ","realine":"ℛ","realpart":"ℜ","reals":"ℝ","Re":"ℜ","rect":"▭","reg":"®","REG":"®","ReverseElement":"∋","ReverseEquilibrium":"⇋","ReverseUpEquilibrium":"⥯","rfisht":"⥽","rfloor":"⌋","rfr":"𝔯","Rfr":"ℜ","rHar":"⥤","rhard":"⇁","rharu":"⇀","rharul":"⥬","Rho":"Ρ","rho":"ρ","rhov":"ϱ","RightAngleBracket":"⟩","RightArrowBar":"⇥","rightarrow":"→","RightArrow":"→","Rightarrow":"⇒","RightArrowLeftArrow":"⇄","rightarrowtail":"↣","RightCeiling":"⌉","RightDoubleBracket":"⟧","RightDownTeeVector":"⥝","RightDownVectorBar":"⥕","RightDownVector":"⇂","RightFloor":"⌋","rightharpoondown":"⇁","rightharpoonup":"⇀","rightleftarrows":"⇄","rightleftharpoons":"⇌","rightrightarrows":"⇉","rightsquigarrow":"↝","RightTeeArrow":"↦","RightTee":"⊢","RightTeeVector":"⥛","rightthreetimes":"⋌","RightTriangleBar":"⧐","RightTriangle":"⊳","RightTriangleEqual":"⊵","RightUpDownVector":"⥏","RightUpTeeVector":"⥜","RightUpVectorBar":"⥔","RightUpVector":"↾","RightVectorBar":"⥓","RightVector":"⇀","ring":"˚","risingdotseq":"≓","rlarr":"⇄","rlhar":"⇌","rlm":"‏","rmoustache":"⎱","rmoust":"⎱","rnmid":"⫮","roang":"⟭","roarr":"⇾","robrk":"⟧","ropar":"⦆","ropf":"𝕣","Ropf":"ℝ","roplus":"⨮","rotimes":"⨵","RoundImplies":"⥰","rpar":")","rpargt":"⦔","rppolint":"⨒","rrarr":"⇉","Rrightarrow":"⇛","rsaquo":"›","rscr":"𝓇","Rscr":"ℛ","rsh":"↱","Rsh":"↱","rsqb":"]","rsquo":"’","rsquor":"’","rthree":"⋌","rtimes":"⋊","rtri":"▹","rtrie":"⊵","rtrif":"▸","rtriltri":"⧎","RuleDelayed":"⧴","ruluhar":"⥨","rx":"℞","Sacute":"Ś","sacute":"ś","sbquo":"‚","scap":"⪸","Scaron":"Š","scaron":"š","Sc":"⪼","sc":"≻","sccue":"≽","sce":"⪰","scE":"⪴","Scedil":"Ş","scedil":"ş","Scirc":"Ŝ","scirc":"ŝ","scnap":"⪺","scnE":"⪶","scnsim":"⋩","scpolint":"⨓","scsim":"≿","Scy":"С","scy":"с","sdotb":"⊡","sdot":"⋅","sdote":"⩦","searhk":"⤥","searr":"↘","seArr":"⇘","searrow":"↘","sect":"§","semi":";","seswar":"⤩","setminus":"∖","setmn":"∖","sext":"✶","Sfr":"𝔖","sfr":"𝔰","sfrown":"⌢","sharp":"♯","SHCHcy":"Щ","shchcy":"щ","SHcy":"Ш","shcy":"ш","ShortDownArrow":"↓","ShortLeftArrow":"←","shortmid":"∣","shortparallel":"∥","ShortRightArrow":"→","ShortUpArrow":"↑","shy":"­","Sigma":"Σ","sigma":"σ","sigmaf":"ς","sigmav":"ς","sim":"∼","simdot":"⩪","sime":"≃","simeq":"≃","simg":"⪞","simgE":"⪠","siml":"⪝","simlE":"⪟","simne":"≆","simplus":"⨤","simrarr":"⥲","slarr":"←","SmallCircle":"∘","smallsetminus":"∖","smashp":"⨳","smeparsl":"⧤","smid":"∣","smile":"⌣","smt":"⪪","smte":"⪬","smtes":"⪬︀","SOFTcy":"Ь","softcy":"ь","solbar":"⌿","solb":"⧄","sol":"/","Sopf":"𝕊","sopf":"𝕤","spades":"♠","spadesuit":"♠","spar":"∥","sqcap":"⊓","sqcaps":"⊓︀","sqcup":"⊔","sqcups":"⊔︀","Sqrt":"√","sqsub":"⊏","sqsube":"⊑","sqsubset":"⊏","sqsubseteq":"⊑","sqsup":"⊐","sqsupe":"⊒","sqsupset":"⊐","sqsupseteq":"⊒","square":"□","Square":"□","SquareIntersection":"⊓","SquareSubset":"⊏","SquareSubsetEqual":"⊑","SquareSuperset":"⊐","SquareSupersetEqual":"⊒","SquareUnion":"⊔","squarf":"▪","squ":"□","squf":"▪","srarr":"→","Sscr":"𝒮","sscr":"𝓈","ssetmn":"∖","ssmile":"⌣","sstarf":"⋆","Star":"⋆","star":"☆","starf":"★","straightepsilon":"ϵ","straightphi":"ϕ","strns":"¯","sub":"⊂","Sub":"⋐","subdot":"⪽","subE":"⫅","sube":"⊆","subedot":"⫃","submult":"⫁","subnE":"⫋","subne":"⊊","subplus":"⪿","subrarr":"⥹","subset":"⊂","Subset":"⋐","subseteq":"⊆","subseteqq":"⫅","SubsetEqual":"⊆","subsetneq":"⊊","subsetneqq":"⫋","subsim":"⫇","subsub":"⫕","subsup":"⫓","succapprox":"⪸","succ":"≻","succcurlyeq":"≽","Succeeds":"≻","SucceedsEqual":"⪰","SucceedsSlantEqual":"≽","SucceedsTilde":"≿","succeq":"⪰","succnapprox":"⪺","succneqq":"⪶","succnsim":"⋩","succsim":"≿","SuchThat":"∋","sum":"∑","Sum":"∑","sung":"♪","sup1":"¹","sup2":"²","sup3":"³","sup":"⊃","Sup":"⋑","supdot":"⪾","supdsub":"⫘","supE":"⫆","supe":"⊇","supedot":"⫄","Superset":"⊃","SupersetEqual":"⊇","suphsol":"⟉","suphsub":"⫗","suplarr":"⥻","supmult":"⫂","supnE":"⫌","supne":"⊋","supplus":"⫀","supset":"⊃","Supset":"⋑","supseteq":"⊇","supseteqq":"⫆","supsetneq":"⊋","supsetneqq":"⫌","supsim":"⫈","supsub":"⫔","supsup":"⫖","swarhk":"⤦","swarr":"↙","swArr":"⇙","swarrow":"↙","swnwar":"⤪","szlig":"ß","Tab":"\\t","target":"⌖","Tau":"Τ","tau":"τ","tbrk":"⎴","Tcaron":"Ť","tcaron":"ť","Tcedil":"Ţ","tcedil":"ţ","Tcy":"Т","tcy":"т","tdot":"⃛","telrec":"⌕","Tfr":"𝔗","tfr":"𝔱","there4":"∴","therefore":"∴","Therefore":"∴","Theta":"Θ","theta":"θ","thetasym":"ϑ","thetav":"ϑ","thickapprox":"≈","thicksim":"∼","ThickSpace":"  ","ThinSpace":" ","thinsp":" ","thkap":"≈","thksim":"∼","THORN":"Þ","thorn":"þ","tilde":"˜","Tilde":"∼","TildeEqual":"≃","TildeFullEqual":"≅","TildeTilde":"≈","timesbar":"⨱","timesb":"⊠","times":"×","timesd":"⨰","tint":"∭","toea":"⤨","topbot":"⌶","topcir":"⫱","top":"⊤","Topf":"𝕋","topf":"𝕥","topfork":"⫚","tosa":"⤩","tprime":"‴","trade":"™","TRADE":"™","triangle":"▵","triangledown":"▿","triangleleft":"◃","trianglelefteq":"⊴","triangleq":"≜","triangleright":"▹","trianglerighteq":"⊵","tridot":"◬","trie":"≜","triminus":"⨺","TripleDot":"⃛","triplus":"⨹","trisb":"⧍","tritime":"⨻","trpezium":"⏢","Tscr":"𝒯","tscr":"𝓉","TScy":"Ц","tscy":"ц","TSHcy":"Ћ","tshcy":"ћ","Tstrok":"Ŧ","tstrok":"ŧ","twixt":"≬","twoheadleftarrow":"↞","twoheadrightarrow":"↠","Uacute":"Ú","uacute":"ú","uarr":"↑","Uarr":"↟","uArr":"⇑","Uarrocir":"⥉","Ubrcy":"Ў","ubrcy":"ў","Ubreve":"Ŭ","ubreve":"ŭ","Ucirc":"Û","ucirc":"û","Ucy":"У","ucy":"у","udarr":"⇅","Udblac":"Ű","udblac":"ű","udhar":"⥮","ufisht":"⥾","Ufr":"𝔘","ufr":"𝔲","Ugrave":"Ù","ugrave":"ù","uHar":"⥣","uharl":"↿","uharr":"↾","uhblk":"▀","ulcorn":"⌜","ulcorner":"⌜","ulcrop":"⌏","ultri":"◸","Umacr":"Ū","umacr":"ū","uml":"¨","UnderBar":"_","UnderBrace":"⏟","UnderBracket":"⎵","UnderParenthesis":"⏝","Union":"⋃","UnionPlus":"⊎","Uogon":"Ų","uogon":"ų","Uopf":"𝕌","uopf":"𝕦","UpArrowBar":"⤒","uparrow":"↑","UpArrow":"↑","Uparrow":"⇑","UpArrowDownArrow":"⇅","updownarrow":"↕","UpDownArrow":"↕","Updownarrow":"⇕","UpEquilibrium":"⥮","upharpoonleft":"↿","upharpoonright":"↾","uplus":"⊎","UpperLeftArrow":"↖","UpperRightArrow":"↗","upsi":"υ","Upsi":"ϒ","upsih":"ϒ","Upsilon":"Υ","upsilon":"υ","UpTeeArrow":"↥","UpTee":"⊥","upuparrows":"⇈","urcorn":"⌝","urcorner":"⌝","urcrop":"⌎","Uring":"Ů","uring":"ů","urtri":"◹","Uscr":"𝒰","uscr":"𝓊","utdot":"⋰","Utilde":"Ũ","utilde":"ũ","utri":"▵","utrif":"▴","uuarr":"⇈","Uuml":"Ü","uuml":"ü","uwangle":"⦧","vangrt":"⦜","varepsilon":"ϵ","varkappa":"ϰ","varnothing":"∅","varphi":"ϕ","varpi":"ϖ","varpropto":"∝","varr":"↕","vArr":"⇕","varrho":"ϱ","varsigma":"ς","varsubsetneq":"⊊︀","varsubsetneqq":"⫋︀","varsupsetneq":"⊋︀","varsupsetneqq":"⫌︀","vartheta":"ϑ","vartriangleleft":"⊲","vartriangleright":"⊳","vBar":"⫨","Vbar":"⫫","vBarv":"⫩","Vcy":"В","vcy":"в","vdash":"⊢","vDash":"⊨","Vdash":"⊩","VDash":"⊫","Vdashl":"⫦","veebar":"⊻","vee":"∨","Vee":"⋁","veeeq":"≚","vellip":"⋮","verbar":"|","Verbar":"‖","vert":"|","Vert":"‖","VerticalBar":"∣","VerticalLine":"|","VerticalSeparator":"❘","VerticalTilde":"≀","VeryThinSpace":" ","Vfr":"𝔙","vfr":"𝔳","vltri":"⊲","vnsub":"⊂⃒","vnsup":"⊃⃒","Vopf":"𝕍","vopf":"𝕧","vprop":"∝","vrtri":"⊳","Vscr":"𝒱","vscr":"𝓋","vsubnE":"⫋︀","vsubne":"⊊︀","vsupnE":"⫌︀","vsupne":"⊋︀","Vvdash":"⊪","vzigzag":"⦚","Wcirc":"Ŵ","wcirc":"ŵ","wedbar":"⩟","wedge":"∧","Wedge":"⋀","wedgeq":"≙","weierp":"℘","Wfr":"𝔚","wfr":"𝔴","Wopf":"𝕎","wopf":"𝕨","wp":"℘","wr":"≀","wreath":"≀","Wscr":"𝒲","wscr":"𝓌","xcap":"⋂","xcirc":"◯","xcup":"⋃","xdtri":"▽","Xfr":"𝔛","xfr":"𝔵","xharr":"⟷","xhArr":"⟺","Xi":"Ξ","xi":"ξ","xlarr":"⟵","xlArr":"⟸","xmap":"⟼","xnis":"⋻","xodot":"⨀","Xopf":"𝕏","xopf":"𝕩","xoplus":"⨁","xotime":"⨂","xrarr":"⟶","xrArr":"⟹","Xscr":"𝒳","xscr":"𝓍","xsqcup":"⨆","xuplus":"⨄","xutri":"△","xvee":"⋁","xwedge":"⋀","Yacute":"Ý","yacute":"ý","YAcy":"Я","yacy":"я","Ycirc":"Ŷ","ycirc":"ŷ","Ycy":"Ы","ycy":"ы","yen":"¥","Yfr":"𝔜","yfr":"𝔶","YIcy":"Ї","yicy":"ї","Yopf":"𝕐","yopf":"𝕪","Yscr":"𝒴","yscr":"𝓎","YUcy":"Ю","yucy":"ю","yuml":"ÿ","Yuml":"Ÿ","Zacute":"Ź","zacute":"ź","Zcaron":"Ž","zcaron":"ž","Zcy":"З","zcy":"з","Zdot":"Ż","zdot":"ż","zeetrf":"ℨ","ZeroWidthSpace":"​","Zeta":"Ζ","zeta":"ζ","zfr":"𝔷","Zfr":"ℨ","ZHcy":"Ж","zhcy":"ж","zigrarr":"⇝","zopf":"𝕫","Zopf":"ℤ","Zscr":"𝒵","zscr":"𝓏","zwj":"‍","zwnj":"‌"}')},function(e){e.exports=JSON.parse('{"amp":"&","apos":"\'","gt":">","lt":"<","quot":"\\""}')},function(e,t,r){"use strict";let n=r(1148),a=r(463);class i extends Error{constructor(e,t,r,n,a,o){super(e),this.name="CssSyntaxError",this.reason=e,a&&(this.file=a),n&&(this.source=n),o&&(this.plugin=o),void 0!==t&&void 0!==r&&(this.line=t,this.column=r),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,i)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;null==e&&(e=n.isColorSupported),a&&e&&(t=a(t));let r,i,o=t.split(/\r?\n/),s=Math.max(this.line-3,0),c=Math.min(this.line+2,o.length),l=String(c).length;if(e){let{bold:e,red:t,gray:a}=n.createColors(!0);r=r=>e(t(r)),i=e=>a(e)}else r=i=e=>e;return o.slice(s,c).map((e,t)=>{let n=s+1+t,a=" "+(" "+n).slice(-l)+" | ";if(n===this.line){let t=i(a.replace(/\d/g," "))+e.slice(0,this.column-1).replace(/[^\t]/g," ");return r(">")+i(a)+e+"\n "+t+r("^")}return" "+i(a)+e}).join("\n")}toString(){let e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}}e.exports=i,i.default=i},function(e,t,r){"use strict";e.exports.isClean=Symbol("isClean"),e.exports.my=Symbol("my")},function(e,t,r){"use strict";let n=r(464);function a(e,t){new n(t).stringify(e)}e.exports=a,a.default=a},function(e,t){},function(e,t){},function(e,t,r){"use strict";let n,a,i=r(69);class o extends i{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new n(new a,this,e).stringify()}}o.registerLazyResult=e=>{n=e},o.registerProcessor=e=>{a=e},e.exports=o,o.default=o},function(e,t,r){"use strict";let n=r(69);class a extends n{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}}e.exports=a,a.default=a,n.registerAtRule(a)},function(e,t,r){"use strict";let n=r(69),a=r(470);class i extends n{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return a.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,r=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(r)}}e.exports=i,i.default=i,n.registerRule(i)},function(e,t,r){"use strict";let{SourceMapConsumer:n,SourceMapGenerator:a}=r(236),{fileURLToPath:i,pathToFileURL:o}=r(466),{resolve:s,isAbsolute:c}=r(237),{nanoid:l}=r(1153),u=r(463),d=r(233),h=r(471),p=Symbol("fromOffsetCache"),f=Boolean(n&&a),m=Boolean(s&&c);class g{constructor(e,t={}){if(null==e||"object"==typeof e&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),"\ufeff"===this.css[0]||"￾"===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!m||/^\w+:\/\//.test(t.from)||c(t.from)?this.file=t.from:this.file=s(t.from)),m&&f){let e=new h(this.css,t);if(e.text){this.map=e;let t=e.consumer().file;!this.file&&t&&(this.file=this.mapResolve(t))}}this.file||(this.id="<input css "+l(6)+">"),this.map&&(this.map.file=this.from)}fromOffset(e){let t,r;if(this[p])r=this[p];else{let e=this.css.split("\n");r=new Array(e.length);let t=0;for(let n=0,a=e.length;n<a;n++)r[n]=t,t+=e[n].length+1;this[p]=r}t=r[r.length-1];let n=0;if(e>=t)n=r.length-1;else{let t,a=r.length-2;for(;n<a;)if(t=n+(a-n>>1),e<r[t])a=t-1;else{if(!(e>=r[t+1])){n=t;break}n=t+1}}return{line:n+1,col:e-r[n]+1}}error(e,t,r,n={}){let a;if(!r){let e=this.fromOffset(t);t=e.line,r=e.col}let i=this.origin(t,r);return a=i?new d(e,i.line,i.column,i.source,i.file,n.plugin):new d(e,t,r,this.css,this.file,n.plugin),a.input={line:t,column:r,source:this.css},this.file&&(o&&(a.input.url=o(this.file).toString()),a.input.file=this.file),a}origin(e,t){if(!this.map)return!1;let r,n=this.map.consumer(),a=n.originalPositionFor({line:e,column:t});if(!a.source)return!1;r=c(a.source)?o(a.source):new URL(a.source,this.map.consumer().sourceRoot||o(this.map.mapFile));let s={url:r.toString(),line:a.line,column:a.column};if("file:"===r.protocol){if(!i)throw new Error("file: protocol is not available in this PostCSS build");s.file=i(r)}let l=n.sourceContentFor(a.source);return l&&(s.source=l),s}mapResolve(e){return/^\w+:\/\//.test(e)?e:s(this.map.consumer().sourceRoot||this.map.root||".",e)}get from(){return this.file||this.id}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])null!=this[t]&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}}e.exports=g,g.default=g,u&&u.registerInput&&u.registerInput(g)},function(e,t,r){"use strict";var n=new(r(1157))(void 0,{fuzzyEmail:!1});n.tlds(["chat"],!0),Object.keys(n.__compiled__).forEach((function(e){if(n.__compiled__[e].validate){var t=n.__compiled__[e].validate;n.__compiled__[e].validate=function(r,n,a){a.re.markdownLink||(a.re.markdownLink=new RegExp(/[!&]?\[([!&]?\[.*?\)|[^\]]*?)]\((.*?)( .*?)?\)/));var i=n-e.length,o=r.match(a.re.markdownLink);if(o&&i<=o[1].length+2+o.index+1)return!1;return t(r,n,a)}}}));e.exports=function(e){var t=n.match(e);if(!t)return e;var r=[],a=0;return t.forEach((function(t){a<t.index&&r.push(e.slice(a,t.index)),r.push("["+t.text+"]("+t.url+")"),a=t.lastIndex})),a<e.length&&r.push(e.slice(a)),r.join("")}},function(e,t,r){var n=r(244),a=r(99),i=r(248);e.exports=ChatMain={render:function(e,t){0!=e.BROWSER&&(document.getElementById("chat-main")||(t.renderMode="main",e.browser.addElementToDom(i())),"main"==t.renderMode?(n.render(e,t),n.attachEvents(e,t)):(a.render(e,t),a.attachEvents(e,t)))},attachEvents:function(e,t){}}},function(e,t,r){var n=r(245),a=r(246),i=r(99),o=r(443);e.exports=ChatList={render:function(e,t){t.add_user_modal=new o,document.getElementById("chat-main").innerHTML="",e.browser.addElementToDom(n(),"chat-main"),document.querySelector(".chat-list-container").innerHTML="";for(var r=0;r<t.groups.length;r++){var i,s="",c=(new Date).getTime();t.groups[r].txs.length>0&&(s=t.groups[r].txs[t.groups[r].txs.length-1].returnMessage().message,c=t.groups[r].txs[t.groups[r].txs.length-1].transaction.ts);var l=e.browser.formatDate(c);i=l.hours+":"+l.minutes,e.browser.addElementToDom(a(t.groups[r],s,i),"chat-list-container")}},attachEvents:function(e,t){var r=this;Array.from(document.getElementsByClassName("chat-row")).forEach((function(r){r.onclick=function(r){for(var n=document.getElementById(r.currentTarget.id).getAttribute("data-id"),a=0;a<t.groups.length;a++)if(t.groups[a].id===n){var o=t.groups[a];i.render(e,t,o),i.attachEvents(e,t)}}})),document.getElementById("chat-nav-add-contact").onclick=function(){t.add_user_modal.render(e,t),t.add_user_modal.attachEvents(e,t)},e.modules.respondTo("chat-navbar").forEach((function(t){t.respondTo("chat-navbar").render(e,t),t.respondTo("chat-navbar").attachEvents(e,t)})),document.querySelector("#chat.create-button").onclick=function(){return r.toggleChatNav()}},toggleChatNav:function(){var e=document.getElementById("chat-nav");e.style.display="none"==e.style.display?"flex":"none"}}},function(e,t){e.exports=ChatListTemplate=function(){return'\n      <div id="chat-list-container" class="chat-list-container">\n      </div>\n      <button id="chat" class="create-button"><i class="fas fa-plus"></i></button>\n      <div id="chat-nav" class="chat-dropdown" style="display: none"><ul style="display: grid;grid-gap: 0.5em;" id="chat-navbar" class="chat-navbar"><li id="chat-nav-add-contact" class="chat-nav-row"><i class="fas fa-user-plus"></i>Add Contact</li></ul>\n        <div class="chat-nav-arrow"></div>\n        <div class="chat-nav-arrow" id="chat-nav-arrow-interior"></div>\n      </div>\n  '}},function(e,t){e.exports=ChatListHeaderTemplate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n='\n    <div data-id="'.concat(e.id,'" id="chat-row-').concat(e.id,'" class="chat-row">\n      <img src="/saito/img/logo-color.svg">\n      <div class="chat-content">\n        <div class="chat-group-name">').concat(e.name,'</div>\n        <div id="chat-last-message-').concat(e.id,'" class="chat-last-message">').concat(t,'</div>\n      </div>\n      <div style="display: grid;">\n        <div id="chat-last-message-timestamp-').concat(e.id,'" class="chat-last-message-timestamp">').concat(r,"</div>\n      </div>\n    </div>\n  ");return n}},function(e,t){e.exports=ChatRoomTemplate=function(e){return'\n        <div class="chat-room" id="chat-room-'.concat(e.id,'">\n\n            <div class="chat-room-header">\n\t      <i id="back-button" class="icon-med fas fa-arrow-left"></i>\n\t      <p class="chat-room-name">').concat(e.name,'</p>\n\t    </div>\n\n            <div class="chat-room-content" id="chat-room-content-').concat(e.id,'" style="max-height:100%;overflow-y: scroll;"></div>\n\n            <div class="chat-room-footer">\n              <div class="chat-room-input">\n                <textarea data-id="').concat(e.id,'" id="input" class="chat-room-input"></textarea>\n                <div class="chat-room-submit-button"><i class="icon-small fas fa-arrow-right"></i></div>\n              </div>\n\t    </div>\n\n        </div>\n    ')}},function(e,t){e.exports=ChatMainTemplate=function(){return'\n    <div id="chat-main" class="chat-main">\n    </div>\n  '}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.Chess=function(e){var t="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",r=["1-0","0-1","1/2-1/2","*"],a={b:[16,32,17,15],w:[-16,-32,-17,-15]},i={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},o=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],s=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],c={p:0,n:1,b:2,r:3,q:4,k:5},l={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},u={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},d={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},h={w:[{square:d.a1,flag:u.QSIDE_CASTLE},{square:d.h1,flag:u.KSIDE_CASTLE}],b:[{square:d.a8,flag:u.QSIDE_CASTLE},{square:d.h8,flag:u.KSIDE_CASTLE}]},p=new Array(128),f={w:-1,b:-1},m="w",g={w:0,b:0},y=-1,v=0,b=1,_=[],w={};function x(){p=new Array(128),f={w:-1,b:-1},m="w",g={w:0,b:0},y=-1,v=0,b=1,_=[],w={},C(A())}function k(){S(t)}function S(e){var t=e.split(/\s+/),r=t[0],n=0;if(!E(e).valid)return!1;x();for(var a=0;a<r.length;a++){var i=r.charAt(a);if("/"===i)n+=8;else if(-1!=="0123456789".indexOf(i))n+=parseInt(i,10);else{var o=i<"a"?"w":"b";T({type:i.toLowerCase(),color:o},G(n)),n++}}return m=t[1],t[2].indexOf("K")>-1&&(g.w|=u.KSIDE_CASTLE),t[2].indexOf("Q")>-1&&(g.w|=u.QSIDE_CASTLE),t[2].indexOf("k")>-1&&(g.b|=u.KSIDE_CASTLE),t[2].indexOf("q")>-1&&(g.b|=u.QSIDE_CASTLE),y="-"===t[3]?-1:d[t[3]],v=parseInt(t[4],10),b=parseInt(t[5],10),C(A()),!0}function E(e){var t="No errors.",r="FEN string must contain six space-delimited fields.",n="6th field (move number) must be a positive integer.",a="5th field (half move counter) must be a non-negative integer.",i="4th field (en-passant square) is invalid.",o="3rd field (castling availability) is invalid.",s="2nd field (side to move) is invalid.",c="1st field (piece positions) does not contain 8 '/'-delimited rows.",l="1st field (piece positions) is invalid [consecutive numbers].",u="1st field (piece positions) is invalid [invalid piece].",d="1st field (piece positions) is invalid [row too large].",h=e.split(/\s+/);if(6!==h.length)return{valid:!1,error_number:1,error:r};if(isNaN(h[5])||parseInt(h[5],10)<=0)return{valid:!1,error_number:2,error:n};if(isNaN(h[4])||parseInt(h[4],10)<0)return{valid:!1,error_number:3,error:a};if(!/^(-|[abcdefgh][36])$/.test(h[3]))return{valid:!1,error_number:4,error:i};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(h[2]))return{valid:!1,error_number:5,error:o};if(!/^(w|b)$/.test(h[1]))return{valid:!1,error_number:6,error:s};var p=h[0].split("/");if(8!==p.length)return{valid:!1,error_number:7,error:c};for(var f=0;f<p.length;f++){for(var m=0,g=!1,y=0;y<p[f].length;y++)if(isNaN(p[f][y])){if(!/^[prnbqkPRNBQK]$/.test(p[f][y]))return{valid:!1,error_number:9,error:u};m+=1,g=!1}else{if(g)return{valid:!1,error_number:8,error:l};m+=parseInt(p[f][y],10),g=!0}if(8!==m)return{valid:!1,error_number:10,error:d}}return{valid:!0,error_number:0,error:t}}function A(){for(var e=0,t="",r=d.a8;r<=d.h1;r++){if(null==p[r])e++;else{e>0&&(t+=e,e=0);var n=p[r].color,a=p[r].type;t+="w"===n?a.toUpperCase():a.toLowerCase()}r+1&136&&(e>0&&(t+=e),r!==d.h1&&(t+="/"),e=0,r+=8)}var i="";g.w&u.KSIDE_CASTLE&&(i+="K"),g.w&u.QSIDE_CASTLE&&(i+="Q"),g.b&u.KSIDE_CASTLE&&(i+="k"),g.b&u.QSIDE_CASTLE&&(i+="q"),i=i||"-";var o=-1===y?"-":G(y);return[t,m,i,o,v,b].join(" ")}function P(e){for(var t=0;t<e.length;t+=2)"string"==typeof e[t]&&"string"==typeof e[t+1]&&(w[e[t]]=e[t+1]);return w}function C(e){_.length>0||(e!==t?(w.SetUp=e,w.FEN="1"):(delete w.SetUp,delete w.FEN))}function D(e){var t=p[d[e]];return t?{type:t.type,color:t.color}:null}function T(e,t){if(!("type"in e)||!("color"in e))return!1;if(-1==="pnbrqkPNBRQK".indexOf(e.type.toLowerCase()))return!1;if(!(t in d))return!1;var r=d[t];return p[r]={type:e.type,color:e.color},"k"===e.type&&(f[e.color]=r),C(A()),!0}function O(e,t,r,n,a){var i={color:m,from:t,to:r,flags:n,piece:e[t].type};return a&&(i.flags|=u.PROMOTION,i.promotion=a),e[r]?i.captured=e[r].type:n&u.EP_CAPTURE&&(i.captured="p"),i}function M(e){function t(e,t,r,n,a){if("p"!==e[r].type||0!==H(n)&&7!==H(n))t.push(O(e,r,n,a));else for(var i=["q","r","b","n"],o=0,s=i.length;o<s;o++)t.push(O(e,r,n,a,i[o]))}var r=[],n=m,o=K(n),s={b:1,w:6},c=d.a8,l=d.h1,h=!1,v=void 0===e||!("legal"in e)||e.legal;if(void 0!==e&&"square"in e){if(!(e.square in d))return[];c=l=d[e.square],h=!0}for(var b=c;b<=l;b++)if(136&b)b+=7;else{var _=p[b];if(null!=_&&_.color===n)if("p"===_.type){var w=b+a[n][0];if(null==p[w]){t(p,r,b,w,u.NORMAL);w=b+a[n][1];s[n]===H(b)&&null==p[w]&&t(p,r,b,w,u.BIG_PAWN)}for(x=2;x<4;x++){136&(w=b+a[n][x])||(null!=p[w]&&p[w].color===o?t(p,r,b,w,u.CAPTURE):w===y&&t(p,r,b,y,u.EP_CAPTURE))}}else for(var x=0,k=i[_.type].length;x<k;x++){var S=i[_.type][x];for(w=b;!(136&(w+=S));){if(null!=p[w]){if(p[w].color===n)break;t(p,r,b,w,u.CAPTURE);break}if(t(p,r,b,w,u.NORMAL),"n"===_.type||"k"===_.type)break}}}if(!h||l===f[n]){if(g[n]&u.KSIDE_CASTLE){var E=(A=f[n])+2;null!=p[A+1]||null!=p[E]||R(o,f[n])||R(o,A+1)||R(o,E)||t(p,r,f[n],E,u.KSIDE_CASTLE)}if(g[n]&u.QSIDE_CASTLE){var A;E=(A=f[n])-2;null!=p[A-1]||null!=p[A-2]||null!=p[A-3]||R(o,f[n])||R(o,A-1)||R(o,E)||t(p,r,f[n],E,u.QSIDE_CASTLE)}}if(!v)return r;var P=[];for(b=0,k=r.length;b<k;b++)U(r[b]),F(n)||P.push(r[b]),z();return P}function I(e){var t="";if(e.flags&u.KSIDE_CASTLE)t="O-O";else if(e.flags&u.QSIDE_CASTLE)t="O-O-O";else{var r=function(e){for(var t=M(),r=e.from,n=e.to,a=e.piece,i=0,o=0,s=0,c=0,l=t.length;c<l;c++){var u=t[c].from,d=t[c].to,h=t[c].piece;a===h&&r!==u&&n===d&&(i++,H(r)===H(u)&&o++,$(r)===$(u)&&s++)}if(i>0)return o>0&&s>0?G(r):s>0?G(r).charAt(1):G(r).charAt(0);return""}(e);"p"!==e.piece&&(t+=e.piece.toUpperCase()+r),e.flags&(u.CAPTURE|u.EP_CAPTURE)&&("p"===e.piece&&(t+=G(e.from)[0]),t+="x"),t+=G(e.to),e.flags&u.PROMOTION&&(t+="="+e.promotion.toUpperCase())}return U(e),B()&&(j()?t+="#":t+="+"),z(),t}function R(e,t){for(var r=d.a8;r<=d.h1;r++)if(136&r)r+=7;else if(null!=p[r]&&p[r].color===e){var n=p[r],a=r-t,i=a+119;if(o[i]&1<<c[n.type]){if("p"===n.type){if(a>0){if("w"===n.color)return!0}else if("b"===n.color)return!0;continue}if("n"===n.type||"k"===n.type)return!0;for(var l=s[i],u=r+l,h=!1;u!==t;){if(null!=p[u]){h=!0;break}u+=l}if(!h)return!0}}return!1}function F(e){return R(K(e),f[e])}function B(){return F(m)}function j(){return B()&&0===M().length}function N(){return!B()&&0===M().length}function q(){for(var e={},t=[],r=0,n=0,a=d.a8;a<=d.h1;a++)if(n=(n+1)%2,136&a)a+=7;else{var i=p[a];i&&(e[i.type]=i.type in e?e[i.type]+1:1,"b"===i.type&&t.push(n),r++)}if(2===r)return!0;if(3===r&&(1===e.b||1===e.n))return!0;if(r===e.b+2){var o=0,s=t.length;for(a=0;a<s;a++)o+=t[a];if(0===o||o===s)return!0}return!1}function L(){for(var e=[],t={},r=!1;;){var n=z();if(!n)break;e.push(n)}for(;;){var a=A().split(" ").slice(0,4).join(" ");if(t[a]=a in t?t[a]+1:1,t[a]>=3&&(r=!0),!e.length)break;U(e.pop())}return r}function U(e){var t=m,r=K(t);if(function(e){_.push({move:e,kings:{b:f.b,w:f.w},turn:m,castling:{b:g.b,w:g.w},ep_square:y,half_moves:v,move_number:b})}(e),p[e.to]=p[e.from],p[e.from]=null,e.flags&u.EP_CAPTURE&&("b"===m?p[e.to-16]=null:p[e.to+16]=null),e.flags&u.PROMOTION&&(p[e.to]={type:e.promotion,color:t}),"k"===p[e.to].type){if(f[p[e.to].color]=e.to,e.flags&u.KSIDE_CASTLE){var n=e.to-1,a=e.to+1;p[n]=p[a],p[a]=null}else if(e.flags&u.QSIDE_CASTLE){n=e.to+1,a=e.to-2;p[n]=p[a],p[a]=null}g[t]=""}if(g[t])for(var i=0,o=h[t].length;i<o;i++)if(e.from===h[t][i].square&&g[t]&h[t][i].flag){g[t]^=h[t][i].flag;break}if(g[r])for(i=0,o=h[r].length;i<o;i++)if(e.to===h[r][i].square&&g[r]&h[r][i].flag){g[r]^=h[r][i].flag;break}y=e.flags&u.BIG_PAWN?"b"===m?e.to-16:e.to+16:-1,"p"===e.piece||e.flags&(u.CAPTURE|u.EP_CAPTURE)?v=0:v++,"b"===m&&b++,m=K(m)}function z(){var e=_.pop();if(null==e)return null;var t=e.move;f=e.kings,m=e.turn,g=e.castling,y=e.ep_square,v=e.half_moves,b=e.move_number;var r,n,a=m,i=K(m);if(p[t.from]=p[t.to],p[t.from].type=t.piece,p[t.to]=null,t.flags&u.CAPTURE)p[t.to]={type:t.captured,color:i};else if(t.flags&u.EP_CAPTURE){var o;o="b"===a?t.to-16:t.to+16,p[o]={type:"p",color:i}}t.flags&(u.KSIDE_CASTLE|u.QSIDE_CASTLE)&&(t.flags&u.KSIDE_CASTLE?(r=t.to+1,n=t.to-1):t.flags&u.QSIDE_CASTLE&&(r=t.to-2,n=t.to+1),p[r]=p[n],p[n]=null);return t}function H(e){return e>>4}function $(e){return 15&e}function G(e){var t=$(e),r=H(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(r,r+1)}function K(e){return"w"===e?"b":"w"}function V(e){var t=function e(t){var r=t instanceof Array?[]:{};for(var a in t)"object"===n(a)?r[a]=e(t[a]):r[a]=t[a];return r}(e);t.san=I(t),t.to=G(t.to),t.from=G(t.from);var r="";for(var a in u)u[a]&t.flags&&(r+=l[a]);return t.flags=r,t}function W(e){return e.replace(/^\s+|\s+$/g,"")}return S(void 0===e?t:e),{WHITE:"w",BLACK:"b",PAWN:"p",KNIGHT:"n",BISHOP:"b",ROOK:"r",QUEEN:"q",KING:"k",SQUARES:function(){for(var e=[],t=d.a8;t<=d.h1;t++)136&t?t+=7:e.push(G(t));return e}(),FLAGS:l,load:function(e){return S(e)},reset:function(){return k()},moves:function(e){for(var t=M(e),r=[],n=0,a=t.length;n<a;n++)void 0!==e&&"verbose"in e&&e.verbose?r.push(V(t[n])):r.push(I(t[n]));return r},in_check:function(){return B()},in_checkmate:function(){return j()},in_stalemate:function(){return N()},in_draw:function(){return v>=100||N()||q()||L()},insufficient_material:function(){return q()},in_threefold_repetition:function(){return L()},game_over:function(){return v>=100||j()||N()||q()||L()},validate_fen:function(e){return E(e)},fen:function(){return A()},pgn:function(e){var t="object"===n(e)&&"string"==typeof e.newline_char?e.newline_char:"\n",r="object"===n(e)&&"number"==typeof e.max_width?e.max_width:0,a=[],i=!1;for(var o in w)a.push("["+o+' "'+w[o]+'"]'+t),i=!0;i&&_.length&&a.push(t);for(var s=[];_.length>0;)s.push(z());for(var c=[],l="",u=1;s.length>0;){var d=s.pop();1===u&&"b"===d.color?(l="1. ...",u++):"w"===d.color&&(l.length&&c.push(l),l=u+".",u++),l=l+" "+I(d),U(d)}if(l.length&&c.push(l),void 0!==w.Result&&c.push(w.Result),0===r)return a.join("")+c.join(" ");var h=0;for(o=0;o<c.length;o++)h+c[o].length>r&&0!==o?(" "===a[a.length-1]&&a.pop(),a.push(t),h=0):0!==o&&(a.push(" "),h++),a.push(c[o]),h+=c[o].length;return a.join("")},load_pgn:function(e,t){function o(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}function s(e){return function(e){var t,r,n,o=u.NORMAL,s=e.match(/^([NBKRQ])?([abcdefgh12345678][12345678]?)?(x)?([abcdefgh][12345678])(=?[NBRQ])?/);if("O-O-O"===e.slice(0,5))t=(r=f[m])-2,o=u.QSIDE_CASTLE;else if("O-O"===e.slice(0,3))t=(r=f[m])+2,o=u.KSIDE_CASTLE;else if(s&&s[1]){var c=s[1].toLowerCase();s[3]&&(o=u.CAPTURE),t=d[s[4]];for(var l=0,h=i[c].length;l<h;l++)for(var g=i[c][l],y=t;!(136&(y+=g));){if(v=p[y]){v.color===m&&v.type===c&&(!s[2]||G(y).indexOf(s[2])>=0)&&(r=y);break}if("n"===c||"k"===c)break}}else if(s){if(s[3]){t=d[s[4]];for(l=2;l<4;l++){136&(y=t-a[m][l])||null!=p[y]&&p[y].color===m&&G(y)[0]===s[2]&&(r=y)}o=p[t]?u.CAPTURE:u.EP_CAPTURE}else{var v,b=(t=d[e.slice(0,2)])-a[m][0];(v=p[b])&&"p"===v.type&&v.color===m?r=b:(b=t-a[m][1],(v=p[b])&&"p"===v.type&&v.color===m&&(r=b,o=u.BIG_PAWN))}s[5]&&(n=void 0===s[5][1]?s[5][0].toLowerCase():s[5][1].toLowerCase())}if(r>=0&&t>=0&&o)return O(p,r,t,o,n);e.length}(W(e))}var c="object"===n(t)&&"string"==typeof t.newline_char?t.newline_char:"\r?\n",l=new RegExp("^(\\[(.|"+o(c)+")*\\])("+o(c)+")*1.("+o(c)+"|.)*$","g"),h=e.replace(l,"$1");"["!==h[0]&&(h=""),k();var g=function(e,t){for(var r="object"===n(t)&&"string"==typeof t.newline_char?t.newline_char:"\r?\n",a={},i=e.split(r),o="",s="",c=0;c<i.length;c++)o=i[c].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),s=i[c].replace(/^\[[A-Za-z]+\s"(.*)"\]$/,"$1"),W(o).length>0&&(a[o]=s);return a}(h,t);for(var y in g)P([y,g[y]]);var v=e.replace(h,"").replace(new RegExp(o(c),"g")," "),b=W(v=(v=v.replace(/(\{[^}]+\})+?/g,"")).replace(/\d+\./g,"")).split(new RegExp(/\s+/));b=b.join(",").replace(/,,+/g,",").split(",");for(var _="",x=0;x<b.length-1;x++){if(null==(_=s(b[x])))return!1;U(_)}if(_=b[b.length-1],r.indexOf(_)>-1)(function(e){var t=!1;for(var r in e)t=!0;return t})(w)&&void 0===w.Result&&P(["Result",_]);else{if(null==(_=s(_)))return!1;U(_)}return!0},header:function(){return P(arguments)},ascii:function(){return function(){for(var e="   +------------------------+\n",t=d.a8;t<=d.h1;t++){if(0===$(t)&&(e+=" "+"87654321"[H(t)]+" |"),null==p[t])e+=" . ";else{var r=p[t].type;e+=" "+("w"===p[t].color?r.toUpperCase():r.toLowerCase())+" "}t+1&136&&(e+="|\n",t+=8)}return e+="   +------------------------+\n",e+="     a  b  c  d  e  f  g  h\n"}()},turn:function(){return m},move:function(e){var t=null,r=M();if("string"==typeof e){for(var a=0,i=r.length;a<i;a++)if(e===I(r[a])){t=r[a];break}}else if("object"===n(e))for(a=0,i=r.length;a<i;a++)if(e.from===G(r[a].from)&&e.to===G(r[a].to)&&(!("promotion"in r[a])||e.promotion===r[a].promotion)){t=r[a];break}if(!t)return null;var o=V(t);return U(t),o},undo:function(){var e=z();return e?V(e):null},clear:function(){return x()},put:function(e,t){return T(e,t)},get:function(e){return D(e)},remove:function(e){return function(e){var t=D(e);return p[d[e]]=null,t&&"k"===t.type&&(f[t.color]=-1),C(A()),t}(e)},perft:function(e){return function e(t){for(var r=M({legal:!1}),n=0,a=m,i=0,o=r.length;i<o;i++){if(U(r[i]),!F(a))if(t-1>0)n+=e(t-1);else n++;z()}return n}(e)},square_color:function(e){if(e in d){var t=d[e];return(H(t)+$(t))%2==0?"light":"dark"}return null},history:function(e){for(var t=[],r=[],n=(void 0!==e&&"verbose"in e&&e.verbose);_.length>0;)t.push(z());for(;t.length>0;){var a=t.pop();n?r.push(V(a)):r.push(I(a)),U(a)}return r}}}},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!
 * chessboard.js $version$
 *
 * Copyright 2013 Chris Oakman
 * Released under the MIT license
 * https://github.com/oakmac/chessboardjs/blob/master/LICENSE
 *
 * Date: $date$
 */var n="abcdefgh".split("");function a(e){if("string"!=typeof e)return!1;var t=e.split("-");return 2===t.length&&(!0===i(t[0])&&!0===i(t[1]))}function i(e){return"string"==typeof e&&-1!==e.search(/^[a-h][1-8]$/)}function o(e){if("string"!=typeof e)return!1;var t=(e=e.replace(/ .+$/,"")).split("/");if(8!==t.length)return!1;for(var r=0;r<8;r++)if(""===t[r]||t[r].length>8||-1!==t[r].search(/[^kqrbnpKQRNBP1-8]/))return!1;return!0}function s(e){if("object"!==r(e))return!1;for(var t in e)if(!0===e.hasOwnProperty(t)&&(!0!==i(t)||!0!=("string"==typeof(n=e[t])&&-1!==n.search(/^[bw][KQRNBP]$/))))return!1;var n;return!0}function c(e){if(!0!==o(e))return!1;for(var t,r=(e=e.replace(/ .+$/,"")).split("/"),a={},i=8,s=0;s<8;s++){for(var c=r[s].split(""),l=0,u=0;u<c.length;u++){if(-1!==c[u].search(/[1-8]/))l+=parseInt(c[u],10);else a[n[l]+i]=(t=c[u]).toLowerCase()===t?"b"+t.toUpperCase():"w"+t.toUpperCase(),l++}i--}return a}function l(e){if(!0!==s(e))return!1;for(var t,r,a="",i=8,o=0;o<8;o++){for(var c=0;c<8;c++){var l=n[c]+i;!0===e.hasOwnProperty(l)?a+=(t=e[l],r=void 0,"w"===(r=t.split(""))[0]?r[1].toUpperCase():r[1].toLowerCase()):a+="1"}7!==o&&(a+="/"),i--}return a=(a=(a=(a=(a=(a=(a=a.replace(/11111111/g,"8")).replace(/1111111/g,"7")).replace(/111111/g,"6")).replace(/11111/g,"5")).replace(/1111/g,"4")).replace(/111/g,"3")).replace(/11/g,"2")}var u=function(e,t){t=t||{};var u,d,h,p,f,m,g,y,v,b,_=c("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR"),w={alpha:"alpha-d2270",black:"black-3c85d",board:"board-b72b1",chessboard:"chessboard-63f37",clearfix:"clearfix-7da63",highlight1:"highlight1-32417",highlight2:"highlight2-9c5d2",notation:"notation-322f9",numeric:"numeric-fc462",piece:"piece-417db",row:"row-5277c",sparePieces:"spare-pieces-7492f",sparePiecesBottom:"spare-pieces-bottom-ae20f",sparePiecesTop:"spare-pieces-top-4028b",square:"square-55d63",white:"white-1e1d7"},x={},k=2,S="white",E={},A=!1,P={},C={};function D(){return"xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx".replace(/x/g,(function(e){return(16*Math.random()|0).toString(16)}))}function T(e){return JSON.parse(JSON.stringify(e))}function O(e){var t=e.split(".");return{major:parseInt(t[0],10),minor:parseInt(t[1],10),patch:parseInt(t[2],10)}}function M(e,n,a){if(!0===t.hasOwnProperty("showErrors")&&!1!==t.showErrors){var i="ChessBoard Error "+e+": "+n;return"console"===t.showErrors&&"object"===("undefined"==typeof console?"undefined":r(console))&&"function"==typeof console.log?(console.log(i),void(arguments.length>=2&&console.log(a))):"alert"===t.showErrors?(a&&(i+="\n\n"+JSON.stringify(a)),void window.alert(i)):void("function"==typeof t.showErrors&&t.showErrors(e,n,a))}}function I(){if("string"==typeof e){if(""===e)return window.alert("ChessBoard Error 1001: The first argument to ChessBoard() cannot be an empty string.\n\nExiting..."),!1;var t=document.getElementById(e);if(!t)return window.alert('ChessBoard Error 1002: Element with id "'+e+'" does not exist in the DOM.\n\nExiting...'),!1;u=$(t)}else if(1!==(u=$(e)).length)return window.alert("ChessBoard Error 1003: The first argument to ChessBoard() must be an ID or a single DOM node.\n\nExiting..."),!1;return window.JSON&&"function"==typeof JSON.stringify&&"function"==typeof JSON.parse?!!(r(window.$)&&$.fn&&$.fn.jquery&&!0==(n=$.fn.jquery,a="1.7.0",n=O(n),a=O(a),1e4*n.major*1e4+1e4*n.minor+n.patch>=1e4*a.major*1e4+1e4*a.minor+a.patch))||(window.alert("ChessBoard Error 1005: Unable to find a valid version of jQuery. Please include jQuery 1.7.0 or higher on the page.\n\nExiting..."),!1):(window.alert("ChessBoard Error 1004: JSON does not exist. Please include a JSON polyfill.\n\nExiting..."),!1);var n,a}function R(e){return"fast"===e||"slow"===e||parseInt(e,10)+""==e+""&&e>=0}function F(e){return"function"==typeof t.pieceTheme?t.pieceTheme(e):"string"==typeof t.pieceTheme?t.pieceTheme.replace(/{piece}/g,e):(M(8272,"Unable to build image source for cfg.pieceTheme."),"")}function B(e,t,r){var n='<img src="'+F(e)+'" ';return r&&"string"==typeof r&&(n+='id="'+r+'" '),n+='alt="" class="'+w.piece+'" data-piece="'+e+'" style="width: '+m+"px;height: "+m+"px;",!0===t&&(n+="display:none;"),n+='" />'}function j(e){var t=["wK","wQ","wR","wB","wN","wP"];"black"===e&&(t=["bK","bQ","bR","bB","bN","bP"]);for(var r="",n=0;n<t.length;n++)r+=B(t[n],!1,P[t[n]]);return r}function N(e,r,n,a){var i=$("#"+C[e]),o=i.offset(),s=$("#"+C[r]),c=s.offset(),l=D();$("body").append(B(n,!0,l));var u=$("#"+l);u.css({display:"",position:"absolute",top:o.top,left:o.left}),i.find("."+w.piece).remove();var d={duration:t.moveSpeed,complete:function(){s.append(B(n)),u.remove(),"function"==typeof a&&a()}};u.animate(c,d)}function q(e,r,n){var a=$("#"+P[e]).offset(),i=$("#"+C[r]),o=i.offset(),s=D();$("body").append(B(e,!0,s));var c=$("#"+s);c.css({display:"",position:"absolute",left:a.left,top:a.top});var l={duration:t.moveSpeed,complete:function(){i.find("."+w.piece).remove(),i.append(B(e)),c.remove(),"function"==typeof n&&n()}};c.animate(o,l)}function L(e,r,n){if(0!==e.length){!0;for(var a=0,i=0;i<e.length;i++)"clear"===e[i].type&&$("#"+C[e[i].square]+" ."+w.piece).fadeOut(t.trashSpeed,o),"add"===e[i].type&&!0!==t.sparePieces&&$("#"+C[e[i].square]).append(B(e[i].piece,!0)).find("."+w.piece).fadeIn(t.appearSpeed,o),"add"===e[i].type&&!0===t.sparePieces&&q(e[i].piece,e[i].square,o),"move"===e[i].type&&N(e[i].source,e[i].destination,e[i].piece,o)}function o(){++a===e.length&&(G(),!1,!0===t.hasOwnProperty("onMoveEnd")&&"function"==typeof t.onMoveEnd&&t.onMoveEnd(T(r),T(n)))}}function U(e,t){e=e.split("");var r=n.indexOf(e[0])+1,a=parseInt(e[1],10);t=t.split("");var i=n.indexOf(t[0])+1,o=parseInt(t[1],10),s=Math.abs(r-i),c=Math.abs(a-o);return s>=c?s:c}function z(e,t,r){for(var a=function(e){for(var t=[],r=0;r<8;r++)for(var a=0;a<8;a++){var i=n[r]+(a+1);e!==i&&t.push({square:i,distance:U(e,i)})}t.sort((function(e,t){return e.distance-t.distance}));var o=[];for(r=0;r<t.length;r++)o.push(t[r].square);return o}(r),i=0;i<a.length;i++){var o=a[i];if(!0===e.hasOwnProperty(o)&&e[o]===t)return o}return!1}function H(e,t){e=T(e),t=T(t);var r=[],n={};for(var a in t)!0===t.hasOwnProperty(a)&&!0===e.hasOwnProperty(a)&&e[a]===t[a]&&(delete e[a],delete t[a]);for(var a in t)if(!0===t.hasOwnProperty(a)){var i=z(e,t[a],a);!1!==i&&(r.push({type:"move",source:i,destination:a,piece:t[a]}),delete e[i],delete t[a],n[a]=!0)}for(var a in t)!0===t.hasOwnProperty(a)&&(r.push({type:"add",square:a,piece:t[a]}),delete t[a]);for(var a in e)!0===e.hasOwnProperty(a)&&!0!==n.hasOwnProperty(a)&&(r.push({type:"clear",square:a,piece:e[a]}),delete e[a]);return r}function G(){for(var e in d.find("."+w.piece).remove(),E)!0===E.hasOwnProperty(e)&&$("#"+C[e]).append(B(E[e]))}function K(){d.html(function(e){"black"!==e&&(e="white");var r="",a=T(n),i=8;"black"===e&&(a.reverse(),i=1);for(var o="white",s=0;s<8;s++){r+='<div class="'+w.row+'">';for(var c=0;c<8;c++){var l=a[c]+i;r+='<div class="'+w.square+" "+w[o]+" square-"+l+'" style="width: '+m+"px; height: "+m+'px" id="'+C[l]+'" data-square="'+l+'">',!0===t.showNotation&&(("white"===e&&1===i||"black"===e&&8===i)&&(r+='<div class="'+w.notation+" "+w.alpha+'">'+a[c]+"</div>"),0===c&&(r+='<div class="'+w.notation+" "+w.numeric+'">'+i+"</div>")),r+="</div>",o="white"===o?"black":"white"}r+='<div class="'+w.clearfix+'"></div></div>',o="white"===o?"black":"white","white"===e?i--:i++}return r}(S)),G(),!0===t.sparePieces&&("white"===S?(p.html(j("black")),f.html(j("white"))):(p.html(j("white")),f.html(j("black"))))}function V(e,t){for(var r in e=T(e),t)if(!0===t.hasOwnProperty(r)&&!0===e.hasOwnProperty(r)){var n=e[r];delete e[r],e[t[r]]=n}return e}function W(e){var r=T(E),n=T(e);l(r)!==l(n)&&(!0===t.hasOwnProperty("onChange")&&"function"==typeof t.onChange&&t.onChange(r,n),E=e)}function Y(e,t){for(var r in b)if(!0===b.hasOwnProperty(r)){var n=b[r];if(e>=n.left&&e<n.left+m&&t>=n.top&&t<n.top+m)return r}return"offboard"}function J(){d.find("."+w.square).removeClass(w.highlight1+" "+w.highlight2)}function Q(){J();var e=T(E);delete e[v],W(e),G(),h.fadeOut(t.trashSpeed),A=!1}function X(e,r,n,a){"function"==typeof t.onDragStart&&!1===t.onDragStart(e,r,T(E),S)||(A=!0,g=r,v=e,y="spare"===e?"offboard":e,function(){for(var e in b={},C)!0===C.hasOwnProperty(e)&&(b[e]=$("#"+C[e]).offset())}(),h.attr("src",F(r)).css({display:"",position:"absolute",left:n-m/2,top:a-m/2}),"spare"!==e&&$("#"+C[e]).addClass(w.highlight1).find("."+w.piece).css("display","none"))}function Z(e,r){h.css({left:e-m/2,top:r-m/2});var n=Y(e,r);n!==y&&(!0===i(y)&&$("#"+C[y]).removeClass(w.highlight2),!0===i(n)&&$("#"+C[n]).addClass(w.highlight2),"function"==typeof t.onDragMove&&t.onDragMove(n,y,v,g,T(E),S),y=n)}function ee(e){var r="drop";if("offboard"===e&&"snapback"===t.dropOffBoard&&(r="snapback"),"offboard"===e&&"trash"===t.dropOffBoard&&(r="trash"),!0===t.hasOwnProperty("onDrop")&&"function"==typeof t.onDrop){var n=T(E);"spare"===v&&!0===i(e)&&(n[e]=g),!0===i(v)&&"offboard"===e&&delete n[v],!0===i(v)&&!0===i(e)&&(delete n[v],n[e]=g);var a=T(E),o=t.onDrop(v,e,g,n,a,S);"snapback"!==o&&"trash"!==o||(r=o)}"snapback"===r?function(){if("spare"!==v){J();var e=$("#"+C[v]).offset(),r={duration:t.snapbackSpeed,complete:function(){G(),h.css("display","none"),!0===t.hasOwnProperty("onSnapbackEnd")&&"function"==typeof t.onSnapbackEnd&&t.onSnapbackEnd(g,v,T(E),S)}};h.animate(e,r),A=!1}else Q()}():"trash"===r?Q():"drop"===r&&function(e){J();var r=T(E);delete r[v],r[e]=g,W(r);var n=$("#"+C[e]).offset(),a={duration:t.snapSpeed,complete:function(){G(),h.css("display","none"),!0===t.hasOwnProperty("onSnapEnd")&&"function"==typeof t.onSnapEnd&&t.onSnapEnd(v,e,g)}};h.animate(n,a),A=!1}(e)}function te(e){e.preventDefault()}function re(e){if(!0===t.draggable){var r=$(this).attr("data-square");!0===i(r)&&!0===E.hasOwnProperty(r)&&X(r,E[r],e.pageX,e.pageY)}}function ne(e){if(!0===t.draggable){var r=$(this).attr("data-square");!0===i(r)&&!0===E.hasOwnProperty(r)&&(e=e.originalEvent,X(r,E[r],e.changedTouches[0].pageX,e.changedTouches[0].pageY))}}function ae(e){!0===t.sparePieces&&X("spare",$(this).attr("data-piece"),e.pageX,e.pageY)}function ie(e){!0===t.sparePieces&&X("spare",$(this).attr("data-piece"),(e=e.originalEvent).changedTouches[0].pageX,e.changedTouches[0].pageY)}function oe(e){!0===A&&Z(e.pageX,e.pageY)}function se(e){!0===A&&(e.preventDefault(),Z(e.originalEvent.changedTouches[0].pageX,e.originalEvent.changedTouches[0].pageY))}function ce(e){!0===A&&ee(Y(e.pageX,e.pageY))}function le(e){!0===A&&ee(Y(e.originalEvent.changedTouches[0].pageX,e.originalEvent.changedTouches[0].pageY))}function ue(e){if(!1===A&&!0===t.hasOwnProperty("onMouseoverSquare")&&"function"==typeof t.onMouseoverSquare){var r=$(e.currentTarget).attr("data-square");if(!0===i(r)){var n=!1;!0===E.hasOwnProperty(r)&&(n=E[r]),t.onMouseoverSquare(r,n,T(E),S)}}}function de(e){if(!1===A&&!0===t.hasOwnProperty("onMouseoutSquare")&&"function"==typeof t.onMouseoutSquare){var r=$(e.currentTarget).attr("data-square");if(!0===i(r)){var n=!1;!0===E.hasOwnProperty(r)&&(n=E[r]),t.onMouseoutSquare(r,n,T(E),S)}}}function he(){$("body").on("mousedown mousemove","."+w.piece,te),d.on("mousedown","."+w.square,re),u.on("mousedown","."+w.sparePieces+" ."+w.piece,ae),d.on("mouseenter","."+w.square,ue).on("mouseleave","."+w.square,de),!0===(navigator&&navigator.userAgent&&-1!==navigator.userAgent.search(/MSIE/))?(document.ondragstart=function(){return!1},$("body").on("mousemove",oe).on("mouseup",ce)):$(window).on("mousemove",oe).on("mouseup",ce),"ontouchstart"in document.documentElement==!0&&(d.on("touchstart","."+w.square,ne),u.on("touchstart","."+w.sparePieces+" ."+w.piece,ie),$(window).on("touchmove",se).on("touchend",le))}function pe(){!function(){for(var e=0;e<n.length;e++)for(var t=1;t<=8;t++){var r=n[e]+t;C[r]=r+"-"+D()}var a="KQRBNP".split("");for(e=0;e<a.length;e++){var i="w"+a[e],o="b"+a[e];P[i]=i+"-"+D(),P[o]=o+"-"+D()}}(),u.html(function(){var e='<div class="'+w.chessboard+'">';return!0===t.sparePieces&&(e+='<div class="'+w.sparePieces+" "+w.sparePiecesTop+'"></div>'),e+='<div class="'+w.board+'"></div>',!0===t.sparePieces&&(e+='<div class="'+w.sparePieces+" "+w.sparePiecesBottom+'"></div>'),e+="</div>"}()),d=u.find("."+w.board),!0===t.sparePieces&&(p=u.find("."+w.sparePiecesTop),f=u.find("."+w.sparePiecesBottom));var e=D();$("body").append(B("wP",!0,e)),h=$("#"+e),k=parseInt(d.css("borderLeftWidth"),10),x.resize()}return x.clear=function(e){x.position({},e)},x.destroy=function(){u.html(""),h.remove(),u.unbind()},x.fen=function(){return x.position("fen")},x.flip=function(){return x.orientation("flip")},x.move=function(){if(0!==arguments.length){for(var e=!0,t={},r=0;r<arguments.length;r++)if(!1!==arguments[r])if(!0===a(arguments[r])){var n=arguments[r].split("-");t[n[0]]=n[1]}else M(2826,"Invalid move passed to the move method.",arguments[r]);else e=!1;var i=V(E,t);return x.position(i,e),i}},x.orientation=function(e){return 0===arguments.length?S:"white"===e||"black"===e?(S=e,K(),S):"flip"===e?(S="white"===S?"black":"white",K(),S):void M(5482,"Invalid value passed to the orientation method.",e)},x.position=function(e,t){return 0===arguments.length?T(E):"string"==typeof e&&"fen"===e.toLowerCase()?l(E):(!1!==t&&(t=!0),"string"==typeof e&&"start"===e.toLowerCase()&&(e=T(_)),!0===o(e)&&(e=c(e)),void(!0===s(e)?!0===t?(L(H(E,e),E,e),W(e)):(W(e),G()):M(6482,"Invalid value passed to the position method.",e)))},x.resize=function(){m=function(){var e=parseInt(u.width(),10);if(!e||e<=0)return 0;for(var t=e-1;t%8!=0&&t>0;)t--;return t/8}(),d.css("width",8*m+"px"),h.css({height:m,width:m}),!0===t.sparePieces&&u.find("."+w.sparePieces).css("paddingLeft",m+k+"px"),K()},x.start=function(e){x.position("start",e)},!0===I()&&1==("string"!=typeof t&&!0!==s(t)||(t={position:t}),"black"!==t.orientation&&(t.orientation="white"),S=t.orientation,!1!==t.showNotation&&(t.showNotation=!0),!0!==t.draggable&&(t.draggable=!1),"trash"!==t.dropOffBoard&&(t.dropOffBoard="snapback"),!0!==t.sparePieces&&(t.sparePieces=!1),!0===t.sparePieces&&(t.draggable=!0),(!0!==t.hasOwnProperty("pieceTheme")||"string"!=typeof t.pieceTheme&&"function"!=typeof t.pieceTheme)&&(t.pieceTheme="img/chesspieces/wikipedia/{piece}.png"),!0===t.hasOwnProperty("appearSpeed")&&!0===R(t.appearSpeed)||(t.appearSpeed=200),!0===t.hasOwnProperty("moveSpeed")&&!0===R(t.moveSpeed)||(t.moveSpeed=200),!0===t.hasOwnProperty("snapbackSpeed")&&!0===R(t.snapbackSpeed)||(t.snapbackSpeed=50),!0===t.hasOwnProperty("snapSpeed")&&!0===R(t.snapSpeed)||(t.snapSpeed=25),!0===t.hasOwnProperty("trashSpeed")&&!0===R(t.trashSpeed)||(t.trashSpeed=100),!0===t.hasOwnProperty("position")&&("start"===t.position?E=T(_):!0===o(t.position)?E=c(t.position):!0===s(t.position)?E=T(t.position):M(7263,"Invalid value passed to config.position.",t.position)),!0)&&(pe(),he()),x};u.fenToObj=c,u.objToFen=l,e.exports=u},function(e,t,r){var n=r(252),a=r(1163);e.exports=DebugAppspace={render:function(e,t){document.querySelector(".email-appspace").innerHTML=n();try{a.create(e.options,document.getElementById("email-appspace-debug"))}catch(e){console.log("error creating jsonTree: "+a)}},attachEvents:function(e,t){}}},function(e,t){e.exports=DebugAppspaceTemplate=function(){return'\n  <link rel="stylesheet" type="text/css" href="/saito/lib/jsonTree/jsonTree.css" /> \n  <h3>Wallet Configuration:</h3> \n  <div style="clear:both;padding-top:10px;padding-bottom:10px;" id="email-appspace-debug" class="email-appspace-debug"></div>\n  <div class="send-wallet-info tip">\n    <button class="sent-wallet">Send the Saito Team Your Wallet for Debug</button>\n    <i class="fas fa-info-circle"></i>\n    <div class="tiptext">This is a debug-only feature and sends your whole wallet including PRIVATE KEY.</div>\n  </div>\n  <p>\n    <textarea class="debug-message" placeholder="Please tell us who you are and why you sent this wallet."></textarea>\n  </p>\n    <hr />\n  '}},function(e,t,r){var n=r(254),a=r(138),i=r(267);e.exports=EmailMain={render:function(e,t){var r=document.querySelector(".email-main");r&&(r.innerHTML=n(e,t),t.main=this,a.render(e,t),i.render(e,t))},attachEvents:function(e,t){a.attachEvents(e,t),i.attachEvents(e,t)}}},function(e,t){e.exports=EmailMainTemplate=function(e,t){for(var r='\n      <div class="email-header"></div>\n      <div class="email-body"></div>\n      <button id="email" class="create-button"><i class="fas fa-plus"></i></button>\n  ',n=e.modules.respondTo("email-appspace"),a=0;a<n.length;a++){var i=n[a];null!=i&&""!=i.script&&"undefined"!==i.script&&null!=i.script&&(r+=i.script)}return r}},function(e,t,r){var n=r(256);e.exports=EmailInboxHeader={render:function(e,t){var r=e.browser.parseHash(window.location.hash).subpage;document.querySelector(".email-header").innerHTML=n(e,t,r)},attachEvents:function(e,t){document.getElementById("email-select-icon").addEventListener("click",(function(e){Array.from(document.getElementsByClassName("email-selected")).forEach((function(t){t.checked=e.currentTarget.checked}))})),document.getElementById("email-delete-icon").addEventListener("click",(function(r){var n=document.querySelector(".email-list"),a=e.browser.parseHash(window.location.hash).subpage;Array.from(document.getElementsByClassName("email-message")).forEach((function(e){if(e.children[0].checked){n.removeChild(e);var r=t.getSelectedEmail(e.id,a);t.deleteTransaction(r,a)}}))}))}}},function(e,t){e.exports=EmailInboxHeaderTemplate=function(e,t,r){return'\n    <div class="email-inbox-header-holder">\n      <div class="email-icons">\n        <input id="email-select-icon" type="checkbox">\n        <i id="email-delete-icon" class="icon-med far fa-trash-alt"></i>\n        <i id="email-bars-icon" class="icon-med fas fa-bars"></i>\n      </div>\n      <div class="email-balance"><span id="email-balance"></span><nbsp/><span id="email-token"></span></div>\n      <div class="email-box-name">'.concat(r,"</div>\n    </div>\n  ")}},function(e,t,r){r(258);var n=r(260);e.exports=EmailDetailHeader={render:function(e,t){document.querySelector(".email-header").innerHTML=n(e,t)},attachEvents:function(e,t){document.getElementById("email-delete-icon").onclick=function(r){try{var n=e.browser.parseHash(window.location.hash).selectedemail,a=e.browser.parseHash(window.location.hash).subpage,i=t.getSelectedEmail(n,a);t.deleteTransaction(i,a),window.location.hash=t.goToLocation("#page=email_list&subpage=inbox")}catch(e){salert("Error deleting email<br/>".concat(e))}},document.getElementById("email-detail-reply").onclick=function(r){var n=e.browser.parseHash(window.location.hash).selectedemail;window.location.hash=t.goToLocation("#page=email_form&original=".concat(n,"&type=reply"))},document.getElementById("email-detail-forward").onclick=function(r){var n=e.browser.parseHash(window.location.hash).selectedemail;window.location.hash=t.goToLocation("#page=email_form&original=".concat(n,"&type=fwd"))}}}},function(e,t,r){var n=r(139),a=r(259),i=r(476);e.exports=EmailList={render:function(e,t){var r;console.log("------render inbox-------"),document.querySelector(".email-body").innerHTML=n();try{var o=e.browser.parseHash(window.location.hash).subpage;r=t.emails[o]}catch(e){t.locationErrorFallback("Error fetching emails.<br/>".concat(e),e)}r?r.forEach((function(e){document.querySelector(".email-list").innerHTML+=a(e,t.returnAddressHTML(e.transaction.from[0].add),i)})):t.locationErrorFallback("No emails found.","No emails found in ".concat(subpage))},attachEvents:function(e,t){Array.from(document.getElementsByClassName("email-message")).forEach((function(r){r.onclick=function(r){if("INPUT"!=r.srcElement.nodeName){var n=e.browser.parseHash(window.location.hash).subpage;window.location.hash=t.goToLocation("#page=email_detail&subpage=".concat(n,"&selectedemail=").concat(r.currentTarget.id))}}}))}}},function(e,t){e.exports=EmailListRowTemplate=function(e,t,r){var n=e.returnMessage(),a=n.message,i=n.title,o=(e.transaction.from,e.transaction.ts),s=e.transaction.sig,c=(r.datetime_formatter,datetimeFormatter(o)),l=document.createElement("DIV");return l.innerHTML=a,a=(a=l.innerText).length>64?"".concat(a.substring(0,64),"..."):a,'\n  <div class="email-message" id="'.concat(s,'">\n      <input class="email-selected" type="checkbox">\n      <div class="email-message-content">\n          <div class="email-message-from">').concat(t,'</div>\n          <div class="email-message-title">').concat(i,'</div>\n          <div class="email-message-message">').concat(a,'</div>\n      </div>\n      <p class="email-message-timestamp">').concat(c.hours,":").concat(c.minutes,"</p>\n  </div>")}},function(e,t){e.exports=EmailDetailHeaderTempkate=function(e,t){return'\n  <div class="email-header-holder">\n    <div class="email-detail-left-options">\n      <i id="email-form-back-button" class="icon-med fas fa-arrow-left"></i>\n      <i id="email-bars-icon" class="icon-med fas fa-bars"></i>\n    </div>\n    <div class="email-detail-right-options">\n      <div class="email-icons-detail">\n        <i id="email-delete-icon" class="icon-med far fa-trash-alt"></i>\n        <i id="email-detail-reply" class="icon-med fas fa-reply"></i>\n        <i id="email-detail-forward" class="icon-med fas fa-share"></i>\n      </div>\n      <div class="email-balance-detail"><span id="email-balance"></span><nbsp/><span id="email-token"></span></div>\n    </div>\n  </div>\n  '}},function(e,t,r){var n=r(262);e.exports=EmailFormHeader={render:function(e,t){document.querySelector(".email-header").innerHTML=n(e,t)},attachEvents:function(e,t){}}},function(e,t){e.exports=EmailHeaderTemplate=function(e,t){return'\n  <div class="email-header-holder">\n    <div class="email-icons">\n      <i id="email-form-back-button" class="icon-med fas fa-arrow-left"></i>\n      <i id="email-bars-icon" class="icon-med fas fa-bars"></i>\n    </div>\n    <div class="email-balance"><span id="email-balance"></span><nbsp/><span id="email-token"></span></div>\n  </div>\n  '}},function(e,t,r){var n=r(264);e.exports=EmailAppspaceHeader={render:function(e,t){document.querySelector(".email-header").innerHTML=n(e,t)},attachEvents:function(e,t){}}},function(e,t){e.exports=EmailAppspaceHeaderTemplate=function(e,t){return'\n    <div class="email-header-holder">\n      <div class="email-detail-left-options">\n        <i id="email-form-back-button" class="icon-med fas fa-arrow-left"></i>\n        <i id="email-bars-icon" class="icon-med fas fa-bars"></i>\n      </div>\n      <div class="email-balance"><span id="email-balance"></span><nbsp/><span id="email-token"></span></div>\n    </div>\n  '}},function(e,t,r){var n=r(266);e.exports=EmailAppspaceHeader={render:function(e,t){document.querySelector(".email-header").innerHTML=n(e,t)},attachEvents:function(e,t){}}},function(e,t){e.exports=EmailCryptoAppspaceHeaderTemplate=function(e,t){return'\n  <div class="email-header-holder">\n    <div class="email-detail-left-options">\n      <i id="email-form-back-button" class="icon-med fas fa-arrow-left"></i>\n      <i id="email-bars-icon" class="icon-med fas fa-bars"></i>\n    </div>\n    <div class="email-balance"><span id="email-balance"></span><nbsp/><span id="email-token"></span></div>\n  </div>\n  '}},function(e,t,r){var n=r(268),a=r(270),i=r(272),o=r(274);r(139);e.exports=EmailBody={app:{},render:function(e,t){switch(t.body=this,e.browser.parseHash(window.location.hash).page){case"email_list":EmailList.render(e,t),EmailList.attachEvents(e,t);break;case"email_form":n.render(e,t),n.attachEvents(e,t);break;case"email_detail":a.render(e,t),a.attachEvents(e,t);break;case"email_appspace":i.render(e,t);break;case"crypto_page":o.render(e,t);break;default:t.locationErrorFallback()}},attachEvents:function(e,t){document.querySelector("#email.create-button")&&document.querySelector("#email.create-button").addEventListener("click",(function(e){window.location.hash=t.goToLocation("#page=email_form")}))}}},function(e,t,r){function n(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var a=r(269);e.exports=EmailForm={app:{},saito:{},emailList:{},render:function(e,t){this.app=e,this.saito=this.app;var r="",n="",i="",o=null;r=(r=e.browser.parseHash(window.location.hash).toaddress)||"";var s=e.browser.parseHash(window.location.hash).original,c=e.browser.parseHash(window.location.hash).type;s&&(o=t.getSelectedEmail(s,"inbox")),o&&"reply"==c?(r=o.transaction.from[0].add,n="Re: "+o.msg.title,i="<br /><hr /><i>Quoted Text: </i> <br />"+o.msg.message):o&&"fwd"==c&&(r=o.transaction.from[0].add,n="Fwd: ".concat(o.msg.title),i="<br/><hr/><i>Forwarded Text: </i><br/>\nForwarded from: ".concat(o.transaction.from[0].add,"\n\n").concat(o.msg.message)),document.querySelector(".email-body").innerHTML=a(r,n,i),document.querySelector(".create-button")&&document.querySelector(".create-button").classList.add("mobile-hide"),this.addData();new MediumEditor("#email-text",{placeholder:{text:"Content",hideOnClick:!0},buttonLabels:"fontawesome",toolbar:{allowMultiParagraphSelection:!0,buttons:["bold","italic","underline","anchor","h2","h3","quote"],diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",relativeContainer:null,standardizeSelectionStart:!1,static:!1,updateOnEmptySelection:!0,anchor:{customClassOption:null,customClassOptionText:"Button",linkValidation:!0,placeholderText:"Paste or type a link",targetCheckbox:!0,targetCheckboxText:"Open in new window"}}})},attachEvents:function(e,t){var r=this;document.querySelector(".email-submit").addEventListener("click",(function(n){return r.sendEmailTransaction(e,t)})),document.querySelector(".email-payment-btn").onclick=function(e){var t=document.querySelector(".email-payment-row");"block"!=t.style.display?t.style.display="block":t.style.display="none"}},addData:function(){document.getElementById("email-from-address").value="".concat(this.saito.wallet.returnPublicKey()," (me)")},sendEmailTransaction:function(e,t){return(r=regeneratorRuntime.mark((function r(){var n,a,i,o,s,c,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=document.querySelector(".email-title").value,a=document.getElementById("email-to-address").value,i=document.getElementById("email-text").innerHTML,o=document.querySelector(".email-amount"),s=0,a.indexOf(" (me)")>0&&(a=a.substring(0,a.indexOf(" (me)"))),o&&o.value>0&&(s=parseFloat(o.value)),r.next=9,t.returnPublicKey(a);case 9:if(!(c=r.sent)){r.next=24;break}if(l=e.wallet.returnBalance()>0?e.wallet.createUnsignedTransactionWithDefaultFee(c,s):e.wallet.createUnsignedTransaction(c,s,0)){r.next=15;break}return salert("Unable to send email. You appear to need more tokens"),r.abrupt("return");case 15:l.msg.module="Email",l.msg.title=n,l.msg.message=i,l=e.wallet.signAndEncryptTransaction(l),e.network.propagateTransaction(l),window.location.hash=t.goToLocation("#page=email_list&subpage=inbox"),salert("Your message has been sent"),r.next=25;break;case 24:salert("Could not find user "+a);case 25:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(a,i){var o=r.apply(e,t);function s(e){n(o,a,i,s,c,"next",e)}function c(e){n(o,a,i,s,c,"throw",e)}s(void 0)}))})();var r},verifyJSON:function(){var e=document.querySelector(".raw-message"),t=e.value;try{JSON.parse(t)}catch(t){return e.style.background="#FCC",e.style.color="red",!1}return e.style.background="#FFF",e.style.color="#000",!0}}},function(e,t){e.exports=EmailFormTemplate=function(e,t,r){return'\n  <div class="email-compose">\n  <div class="grid-2" style="grid-template-columns:6em 1fr">\n    <div>From:</div>\n    <div>\n      <input id="email-from-address" class="email-address" type="text" readonly>\n    </div>\n    <div>To:</div>\n    <div>\n      <input id="email-to-address" class="email-address" type="text" placeholder="Address" value="'.concat(e,'">\n    </div>\n    <div class="email-payment-row" style="display:none;grid-column-start: 1;grid-column-end:span 2">\n      <div class="amount-label tip">\n        SAITO:\n        <div class="tiptext" style="font-family: " visuelt-light",="" "microsoft="" yahei",="" "hiragino="" sans="" gb";"=""> Optional.</div>\n      </div>\n      <div class="amount-value">\n        <input class="email-amount" type="number" placeholder="0.0">\n      </div>  \n    </div>\n  </div>\n  \n  <div id="email-form-options" class="tip">\n    \x3c!--i class="icon-med fas fa-paperclip"></i>\n    <i class="icon-med fas fa-image"></i>\n    <i class="icon-small fas fa-dollar-sign"></i>\n    <div class="tiptext tip-left">\n      <div>\n        <i class="icon-small fas fa-dollar-sign"></i>Send Saito\n      </div>\n    </div--\x3e\n  </div>\n  <div>\n      <input class="email-title" type="text" placeholder="Subject" value="').concat(t,'">\n  </div>\n  <div id="email-text" class="email-text markdown" placeholder="Message">').concat(r,'</div>\n  </div>\n  <div>\n    <div class="email-payment-btn">include payment</div>\n    <button class="email-submit">Send</button>\n  </div>\n  ')}},function(e,t,r){var n=r(271);e.exports=EmailDetail={render:function(e,t){document.querySelector(".email-body").innerHTML=n(e,t)},attachEvents:function(e,t){}}},function(e,t){e.exports=EmailDetailTemplate=function(e,t){var r=e.browser.parseHash(window.location.hash).subpage,n=e.browser.parseHash(window.location.hash).selectedemail,a=t.getSelectedEmail(n,r);if(a){var i=a.transaction.from[0].add,o=a.transaction.to[0].add,s=a.transaction.to[0].amt,c=a.transaction.ts,l=a.returnMessage(),u=l.title,d=t.returnAddressHTML(i),h=t.returnAddressHTML(o);""!=d&&(i=d),""!=h&&(o=h);var p=e.browser.formatDate(c),f='\n      <div>\n        <div class="email-detail-addresses">\n          <div class="email-detail-address-row">\n            <p>FROM:</p>\n            <p class="email-detail-address-id">'.concat(i,'</p>\n          </div>\n          <div class="email-detail-address-row">\n            <p>TO:</p>\n            <p class="email-detail-address-id">').concat(o,"</p>\n          </div>\n      ");return s2Number(s)>0&&(f+='\n          <div class="email-detail-address-row">\n            <p>Amt:</p>\n            <p class="email-detail-ammount">'.concat(s2Number(s),"</p>\n          </div>\n\t")),f+='\n          <div>\n            <div class="email-detail-timestamp">'.concat(p.hours,":").concat(p.minutes,'</div>\n            <div class="email-detail-subject">').concat(u,'</div>\n          </div>\n        </div>\n        <div class="email-detail-message">\n          <div class="email-detail-text"><div>').concat(l.message,"</div></div>\n        </div>\n      </div>\n    ")}return'\n      <div>\n        <div class="email-detail-addresses">\n          <div>\n            <h4 class="email-detail-subject">Loading...</h4>\n          </div>\n          </div>\n        </div>\n      '}},function(e,t,r){var n=r(273);e.exports=EmailAppspace={render:function(e,t){document.querySelector(".email-body").innerHTML=n();try{var r=e.browser.parseHash(window.location.hash).subpage,a=e.modules.returnModule(r).respondTo("email-appspace");a.render(e,t),a.attachEvents&&a.attachEvents(e,t)}catch(e){t.locationErrorFallback("Error fetching module.<br/>".concat(e),e)}}}},function(e,t){e.exports=EmailAppspaceTemplate=function(){return'\n    <div class="email-appspace">\n      <center><div class="loader"></div></center>\n    </div>\n  '}},function(e,t,r){function n(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(a,i){var o=e.apply(t,r);function s(e){n(o,a,i,s,c,"next",e)}function c(e){n(o,a,i,s,c,"throw",e)}s(void 0)}))}}var i=r(275),o={app:null,rerenderCallback:function(){return a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.rerender(o.app);case 2:case"end":return e.stop()}}),e)})))()},render:function(e,t){var r=this;return a(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.app=e,n.prev=1,n.next=4,r.rerender(e);case 4:e.connection.removeListener("set_preferred_crypto",r.rerenderCallback),e.connection.on("set_preferred_crypto",r.rerenderCallback),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),t.locationErrorFallback("Error loading Crypto Module.<br/>".concat(n.t0),n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))()},getCryptoMod:function(e){var t=e.browser.parseHash(window.location.hash).subpage;return e.modules.returnModule(t)},rerender:function(e){var t=this;return a(regeneratorRuntime.mark((function r(){var n,o,s;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=function(){var e=a(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.returnIsActivated()){e.next=6;break}return document.querySelectorAll(".email-appspace-".concat(t.ticker," .crypto-container .balance")).forEach((function(e,t){e.innerHTML="loading..."})),e.next=4,t.returnBalance();case 4:r=e.sent,document.querySelectorAll(".email-appspace-".concat(t.ticker," .crypto-container .balance")).forEach((function(e,t){e.innerHTML=r}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=a(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.returnAddress();case 2:r=e.sent,document.querySelector(".crypto-container .address").innerHTML=r;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=t.getCryptoMod(e),e.wallet.returnPreferredCrypto(),document.querySelector(".email-body").innerHTML=i(e,s),n(s),o(s),document.querySelectorAll(".email-appspace-".concat(s.ticker," .crypto-container .balance")).forEach((function(e,t){e.onclick=function(e){s.activate(),n(s)}}));try{document.getElementById("private-key").onclick=function(e){document.getElementById("private-key").toggleClass("password")}}catch(e){console.log(e)}document.querySelector(".crypto-container .sendbutton").onclick=function(){var r=document.querySelector(".crypto-container .howmuch").value,n=document.querySelector(".crypto-container .pubkeyto").value;try{t.getCryptoMod(e).transfer(r,n),salert("Sent!"),document.querySelector(".crypto-container .howmuch").value="",document.querySelector(".crypto-container .pubkeyto").value=""}catch(e){salert("Error sending transaction.\n{error}")}};case 10:case"end":return r.stop()}}),r)})))()}};e.exports=o},function(e,t){e.exports=EmailCryptoAppspaceTemplate=function(e,t){var r="not-preferred";return e.wallet.returnPreferredCrypto()===t&&(r="preferred"),'\n    <div class="email-appspace email-appspace-'.concat(t.ticker,'">\n      <div class="crypto-container">\n        <h1 class="ticker">').concat(t.ticker,'</h1>\n        <div class="crypto-title">').concat(t.information,'</div>\n        <div class="crypto-info">').concat(t.warning,'</div>\n        \n        <div class="grid-2 info" style="margin-top:20px">\n          <div>Address:</div>\n          <div class="address">loading...</div>\n          <div>Balance:</div>\n          <div class="balance">activate ').concat(t.ticker,' module</div>\n          <div>Private Key:</div>\n          <div id="private-key" class="private-key password">').concat(t.returnPrivateKey(),'<i style="margin-left:5px" class="see-password fas fa-eye" id="see-password"></i></div>\n        </div>\n\x3c!----\n        <button class="set-preferred ').concat(r,'"></button>\n---\x3e\n\n        <hr />\n\n        <h2>Withdraw ').concat(t.ticker,'</h2>\n        <div class="withdrawal-warning">Saito is not intended as a commercial wallet for use of third-party cryptocurrencies unless otherwise indicated. If you would like to withdraw tokens associated with this address please ensure your withdrawal address and withdrawal amount are correct before clicking "Send"</div>\n        <div class="grid-2 transfer">\n          <div>Amount:</div>\n          <div><input class="howmuch" type="text"></input></div>\n          <div>To:</div>\n          <div><input class="pubkeyto" type="text"></input></div>\n        </div>\n        <button class="sendbutton">Send</button>\n      </div>\n    </div>\n  ')}},function(e,t,r){var n=r(277),a=r(278),i=r(282);e.exports=EmailSidebar={render:function(e,t){var r=e.browser.parseHash(window.location.hash).subpage;document.querySelectorAll(".active-navigator-item").forEach((function(e,t){e.classList.remove("active-navigator-item")})),document.querySelectorAll("#email-nav-".concat(r,".email-navigator-item, #email-nav-").concat(r,".email-apps-item, #email-nav-").concat(r,".crypto-apps-item")).forEach((function(e,t){e.classList.add("active-navigator-item")})),document.querySelector(".email-controls")||(document.querySelector(".email-sidebar").innerHTML=n(),a.render(e,t),a.attachEvents(e,t),i.render(e,t),i.attachEvents(e,t))},attachEvents:function(e,t){}}},function(e,t){e.exports=EmailSidebarTemplate=function(){return'\n    <div id="email-controls" class="email-controls">\n    </div>\n    <div id="email-chat" class="email-chat">\n    </div>\n  '}},function(e,t,r){var n=r(279),a=(r(138),r(280));e.exports=EmailControls={render:function(e,t){document.querySelector(".email-controls").innerHTML=n(),a.render(e,t)},attachEvents:function(e,t){a.attachEvents(e,t),document.querySelectorAll("#email-compose-btn, #mobile-email-compose-btn").forEach((function(e,r){e.addEventListener("click",(function(e){window.location.hash=t.goToLocation("#page=email_form")}))}))}}},function(e,t){e.exports=EmailControlsTemplate=function(){return'\n      <button class="super" id="email-compose-btn">SEND</button>\n      <div class="email-bars-menu">\n      </div>\n      <div id="email-loader" class="email-loader">\n        <div class="blockchain_synclabel">syncing blocks...</div>\n        <div class="blockchain_syncbox">\n          <div class="blockchain_syncbar" style="width: 100%;"></div>\n        </div>\n      </div>\n  '}},function(e,t,r){function n(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var a=r(281);e.exports=EmailBarsMenu={render:function(e,t){document.querySelector(".email-bars-menu").innerHTML=a();for(var r=document.querySelector(".email-apps"),i=e.modules.respondTo("email-appspace"),o=0;o<i.length;o++){var s=i[o];"MyQRCode"===s.name?r.innerHTML+='<li class="email-apps-item email-apps-item-'.concat(o,'" style="display:none" id="email-nav-').concat(s.name,'">').concat(s.name,"</li>"):r.innerHTML+='<li class="email-apps-item email-apps-item-'.concat(o,'" id="email-nav-').concat(s.name,'">').concat(s.name,"</li>")}if(e.wallet.returnActivatedCryptos().forEach(function(){var t,r=(t=regeneratorRuntime.mark((function t(r,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"Saito"!==r.name&&e.browser.addElementToDom('<li id="email-nav-'.concat(r.name,'" class="crypto-apps-item">\n          ').concat(r.ticker,"\n        </li>"),"crypto-apps");case 1:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(a,i){var o=t.apply(e,r);function s(e){n(o,a,i,s,c,"next",e)}function c(e){n(o,a,i,s,c,"throw",e)}s(void 0)}))});return function(e,t){return r.apply(this,arguments)}}()),!document.querySelector("#mobile.email-bars-menu")){var c=document.querySelector(".email-bars-menu").innerHTML;c=c.replaceAll("email-nav-","mobile-email-nav-"),e.browser.addElementToDom('<div id="mobile" class="email-bars-menu" style="display:none;">\n        <button class="super" id="mobile-email-compose-btn">SEND</button>\n        '.concat(c,"\n      </div>"))}},attachEvents:function(e,t){document.querySelectorAll(".crypto-apps-item").forEach((function(e,r){e.onclick=function(e){var r=e.currentTarget.id.replace("email-nav-","").replace("mobile-","");window.location.hash=t.goToLocation("#page=crypto_page&subpage=".concat(r))}})),document.querySelectorAll(".email-navigator-item").forEach((function(e){e.onclick=function(e){var r=e.currentTarget.id.replace("email-nav-","").replace("mobile-","");window.location.hash=t.goToLocation("#page=email_list&subpage=".concat(r))}})),document.querySelectorAll(".email-apps-item").forEach((function(e){e.addEventListener("click",(function(e){var r=e.currentTarget.id.replace("email-nav-","").replace("mobile-","");window.location.hash=t.goToLocation("#page=email_appspace&subpage=".concat(r))}))}));var r=document.querySelector("#mobile.email-bars-menu"),n=function(){r.style.display="none"};r.removeEventListener("click",n),r.addEventListener("click",n);var a=function(e){"email-bars-icon"!==e.target.id&&(r.style.display="none")};window.removeEventListener("click",a),window.addEventListener("click",a)}}},function(e,t){e.exports=EmailBarsMenuTemplate=function(){return'\n<div class="email-navigator-bars-menu">\n  <div>\n    <ul class="email-navigator" id="email-navigator">\n      <li class="email-navigator-item active-navigator-item" id="email-nav-inbox">Inbox</li>\n      <li class="email-navigator-item" id="email-nav-sent">Sent</li>\n      \x3c!--li class="email-navigator-item" id="email-nav-trash">Trash</li--\x3e\n    </ul>\n  </div>\n  <div>\n    <ul class="email-apps" id="email-apps"></ul>\n  </div>\n  <div>\n    <ul class="crypto-apps" id="crypto-apps"></ul>\n  </div>\n  </div>\n  '}},function(e,t){e.exports=EmailChat={render:function(e,t){for(var r=e.modules.respondTo("email-chat"),n=0;n<r.length;n++)r[n].respondTo("email-chat").render(e,t)},attachEvents:function(e,t){for(var r=e.modules.respondTo("email-chat"),n=0;n<r.length;n++)r[n].respondTo("email-chat").attachEvents(e,t)}}},function(e,t){e.exports=EmailAppspaceTemplate=function(){return'\n<div class="email-appspace-encrypt">\n  <h3>Encrypt transations and messages:</h3>\n  <p>\n    Enter a private key or address to perform an onchain Diffie-Hellman key exchange and encrypt your transactions.\n  </p>\n  <br />\n  <div class="grid-2">\n    <div>Address:</div>\n    <div><input id="email-to-address" type="text" placeholder="Recipient Address"></div>\n    <div></div>\n    <div>\n      <button class="email-submit">Encrypt</button>\n    </div>\n  </div>\n</div> \n  '}},function(e,t,r){var n=r(285);e.exports=MyQRCodeAppspace={render:function(e,t){document.querySelector(".email-appspace").innerHTML=n(e),this.generateQRCode(e.wallet.returnPublicKey())},attachEvents:function(e,t){},generateQRCode:function(e){return new(r(1166))(document.getElementById("qrcode"),e)}}},function(e,t){e.exports=MyQRCodeAppspaceTemplate=function(e){return'\n  <div class="email-appspace-settings">\n\n    <h3>Your QR Code:</h3>\n  \n    <p></p>\n\n    <div id="qrcode"></div>\n\n  </div>\n  '}},function(e,t,r){var n=r(287),a=r(288),i=r(141),o=r(142),s=r(143);e.exports=ArcadePosts={render:function(e,t){document.getElementById("arcade-posts-container")||e.browser.addElementToDom(n());for(var r=t.posts.length-1;r>=0;r--)this.addPost(e,t,t.posts[r]);t.renderMethod="arcade",document.getElementById("posts-stylesheet")||e.browser.addElementToDom(s())},attachEvents:function(e,t){document.querySelectorAll(".arcade-post-title, .arcade-post-comments").forEach((function(r){r.onclick=function(r){var n=r.currentTarget.id.replace("arcade-post-","");e.browser.logMatomoEvent("Posts","ArcadePostsViewClick",n);var a=r.currentTarget.getAttribute("data-id");i.render(e,t,a),i.attachEvents(e,t,a)}}));try{document.querySelector(".arcade-posts-add").onclick=function(r){o.render(e,t),o.attachEvents(e,t)}}catch(e){}},addPost:function(e,t,r){var n=1;document.querySelectorAll(".arcade-post").forEach((function(e){e.getAttribute("data-id")===r.transaction.sig&&(n=0)})),0!=n&&e.browser.prependElementToDom(a(e,t,r),document.getElementById("arcade-posts"))}}},function(e,t){e.exports=PostMainTemplate=function(e,t){return'\n  <div id="arcade-posts-container" class="arcade-posts-container">\n  </div>\n    '}},function(e,t){e.exports=PostTeaserTemplate=function(e,t,r){var n="0 comments";1==r.children&&(n="1 comment"),r.children>1&&(n=r.children+" comments");var a=r.msg.images[0];null==a&&(a="/post/img/post-logo.png"),""==a&&(a="/post/img/post-logo.png");var i=datetimeRelative(r.transaction.ts);return'\n    <div data-id="'.concat(r.transaction.sig,'" id="arcade-post" class="arcade-post">\n      <div class="arcade-post-front">\n        <div id="arcade-post-thumbnail" class="arcade-post-thumbnail" style="background-image: url(\'').concat(a,'\')"></div>\n      </div>\n      <div class="arcade-post-back">\n        <div class="arcade-post-header">\n          <div data-id="').concat(r.transaction.sig,'" id="arcade-post-title" class="arcade-post-title">').concat(r.msg.title,'</div>\n        </div>\n        <div id="arcade-post-sublinks"  class="arcade-post-sublinks">\n          <div id="arcade-post-posted-by" class="arcade-post-posted-by">posted</div>\n          <div id="arcade-post-ts" class="arcade-post-ts">').concat(i,'</div>\n          <div class="arcade-post-posted-by">by</div>\n          <div id="arcade-post-user" class="arcade-post-user">').concat(e.keys.returnUsername(r.transaction.from[0].add),'</div>\n          <div data-id="').concat(r.transaction.sig,'" id="arcade-post-comments" class="arcade-post-comments">').concat(n,"</div>\n        </div>\n      </div>\n    </div>\n\n  ")}},function(e,t){e.exports=PostViewTemplate=function(e,t,r){for(var n=null,a=0;a<t.posts.length;a++)r===t.posts[a].transaction.sig&&(n=t.posts[a]);if(null!=n){var i=datetimeRelative(n.transaction.ts),o=e.keys.returnIdenticon(n.transaction.from[0].add),s=e.keys.returnUsername(n.transaction.from[0].add),c="";n.transaction.from[0].add===e.wallet.returnPublicKey()&&(c='<div data-id="'.concat(r,'" id="post-view-edit" class="post-view-edit"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">\n      <path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z" />\n      <path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" />\n    </svg>\n    edit</div>'));var l='\n      <div class="post-view-actions">\n        '.concat(c,'\n        <div data-id="').concat(r,'" id="post-view-report" class="post-view-report"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">\n          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />\n          </svg>\n          report\n        </div>\n      </div>\n  '),u='\n  <div id="post-view-container" class="post-view-container">\n    <div id="post-view-overview" class="post-view-overview">\n      '.concat(l,'\n      <div class="post-header">\n        <div class="post-user-avatar">\n          <img src="').concat(o,'" class="post-view-user-identicon" />\n        </div>\n        <div class="post-details">\n          <div id="post-view-user" class="post-view-user">').concat(s,'</div>\n          <div id="post-view-ts" class="post-view-ts">').concat(i,'</div>\n        </div>\n      </div>\n      <h2 class="post-view-title">').concat(n.msg.title,"</h2>\n  ");""!=n.msg.link&&(u='\n    <div id="post-view-container" class="post-view-container">\n      <div id="post-view-overview" class="post-view-overview">\n        <div class="post-header">\n          <div class="post-user-avatar">\n            <img src="'.concat(o,'" class="post-view-user-identicon" />\n          </div>\n          <div class="post-details">\n            <div id="post-view-user" class="post-view-user">').concat(s,'</div>\n            <div id="post-view-ts" class="post-view-ts">').concat(i,'</div>\n          </div>\n        </div>\n        <h2 class="post-view-title">').concat(n.msg.title,'</h2>\n        <div id="post-view-url" class="post-view-url"><a target="_blank" href="').concat(n.msg.link,'"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">\n        <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />\n        </svg> ').concat(n.msg.link,"</a></div>\n    "));var d='<div class="post-loader-spinner loader" id="post-loader-spinner"></div>';if(n.msg.comment&&(d=n.msg.comment),u+='\n      <div data-id="'.concat(r,'" id="post-view-parent-comment" class="post-view-parent-comment">').concat(d,"</div>\n    </div>\n  "),n.msg.images.length>0){u+='<div id="post-view-gallery" class="post-view-gallery">';for(var h=0;h<n.msg.images.length;h++)u+='<img class="post-view-gallery-image" src="'.concat(n.msg.images[h],'" />');u+="</div>"}else u+='<div id="post-view-gallery" style="display:none" class="post-view-gallery"></div>';return u+='\n    <hr />\n    <div id="post-view-comments" class="post-view-comments">\n    </div>\n    <div id="post-view-leave-comment" class="post-view-leave-comment">\n      <div>Leave a comment: </div>\n      <div id="comment-create" class="post-view-textarea markdown medium-editor-element" placeholder="Your post..." contenteditable="true" spellcheck="true" data-medium-editor-element="true" role="textbox" aria-multiline="true" data-medium-editor-editor-index="1" medium-editor-index="37877e4c-7415-e298-1409-7dca41eed3b8"></div>\n      <button class="post-submit-btn">Submit</button>\n    </div>\n  </div>\n  '}}},function(e,t){e.exports=PostViewCommentTemplate=function(e,t,r){var n=r.returnMessage(),a=datetimeRelative(r.transaction.ts),i=e.keys.returnIdenticon(r.transaction.from[0].add),o=e.keys.returnUsername(r.transaction.from[0].add),s='\n  <div id="post-view-comment" class="post-view-comment">\n    <div id="post-view-actions" class="post-view-actions">\n      <div id="post-view-comment-sublinks" class="post-view-comment-sublinks">\n  ';return r.transaction.from[0].add===e.wallet.returnPublicKey()&&(s+='\n        <div data-id="'.concat(r.originalSig,'" id="post-view-comment-edit" class="post-view-comment-edit"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">\n        <path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z" />\n        <path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" />\n      </svg> edit</div>\n    ')),s+='\n        <div data-id="'.concat(r.originalSig,'" id="post-view-report" class="post-view-report"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">\n        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />\n      </svg> report</div>\n      </div>\n  '),s+="\n    </div>\n  ",s+='\n      <div class="post-header">\n        <div class="post-user-avatar"><img src="'.concat(i,'" class="post-view-user-identicon" /></div>\n        <div class="post-details">\n          <div id="post-view-user" class="post-view-user">').concat(o,'</div>\n          <div id="post-view-ts" class="post-view-ts"> ').concat(a,'</div>\n        </div>\n      </div>\n      <div data-id="').concat(r.originalSig,'" id="post-view-comment-text" class="post-view-comment-text">').concat(n.comment,"</div>\n    </div>\n  ")}},function(e,t){e.exports=PostCreateTemplate=function(e,t){return'\n  <div id="post-create-container" class="post-create-container">\n    <div id="post-create-header" class="post-create-header">\n      <div id="post-create-header-link" class="post-header-active post-create-header-item post-create-header-discussion post-create-active">Discussion</div>\n      <div id="post-create-header-link" class="post-create-header-item post-create-header-image">Image</div>\n      <div id="post-create-header-link" class="post-create-header-item post-create-header-link">Link</div>\n    </div>\n\n    <div id="post-create" class="post-create">\n\n      <input type="text" class="post-create-title" name="post-create-title" placeholder="Post Title">\n\n      <div id="post-create-link" class="post-create-link">\n        <input type="text" class="post-create-link-input" name="post-create-link-input" placeholder="https://...">\n      </div>\n\n      <div id="post-create-image" class="post-create-image" name="post-create-image" tabindex="0">drag-and-drop, click or paste image</div>\n\n      <div id="post-create" class="post-create-textarea markdown medium-editor-element" placeholder="Your post..." contenteditable="true" spellcheck="true" data-medium-editor-element="true" role="textbox" aria-multiline="true" data-medium-editor-editor-index="1" medium-editor-index="37877e4c-7415-e298-1409-7dca41eed3b8"></div>\n\n      <input type="hidden" class="post-create-forum" name="post-create-forum" />\n\n      <div id="post-create-image-preview-container" class="post-create-image-preview-container">\n      </div>\n\n      <button class="post-submit-btn">Submit</button>\n\n    </div>\n  </div>\n  '}},function(e,t,r){var n=r(293),a=r(294),i=r(141),o=r(143);e.exports=PostMain={render:function(e,t){t.renderMethod="main",document.getElementById("post-container")||e.browser.addElementToDom('<div id="post-container" class="post-container"></div>'),document.querySelector(".post-main")||e.browser.addElementToDom(n(e,t),"post-container");for(var r=t.posts.length-1;r>=0;r--)this.addPost(e,t,t.posts[r]);document.getElementById("posts-stylesheet")||e.browser.addElementToDom(o())},attachEvents:function(e,t){document.querySelectorAll(".post-teaser-title").forEach((function(r){r.onclick=function(r){var n=r.currentTarget.getAttribute("data-id");i.render(e,t,n),i.attachEvents(e,t,n)}})),document.querySelectorAll(".post-teaser-comments").forEach((function(r){r.onclick=function(r){var n=r.currentTarget.getAttribute("data-id");i.render(e,t,n),i.attachEvents(e,t,n)}}))},addPost:function(e,t,r){var n=1;document.querySelectorAll(".post-teaser").forEach((function(e){e.getAttribute("data-id")===r.transaction.sig&&(n=0)})),0!=n&&e.browser.prependElementToDom(a(e,t,r),document.getElementById("post-posts"))}}},function(e,t){e.exports=PostMainTemplate=function(e,t){return'\n    <div id="post-main" class="post-main">\n      <div id="post-headers" class="post-headers"></div>\n      <div id="post-posts" class="post-posts"></div>\n    </div>\n    '}},function(e,t){e.exports=PostTeaserTemplate=function(e,t,r){var n="0 comments";1==r.children&&(n="1 comment"),r.children>1&&(n=r.children+" comments");var a=r.img;return null==a&&(a="/post/img/post-logo.png"),""==a&&(a="/post/img/post-logo.png"),'\n    <div data-id="'.concat(r.transaction.sig,'" id="post-teaser" class="post-teaser">\n      <div class="post-teaser-front">\n        <div id="post-teaser-thumbnail" class="post-teaser-thumbnail" style="background-image: url(\'').concat(a,'\')"></div>\n      </div>\n      <div class="post-teaser-back">\n        <div  data-id="').concat(r.transaction.sig,'" id="post-teaser-title" class="post-teaser-title">').concat(r.msg.title,'</div>\n        <div id="post-teaser-sublinks"  class="post-teaser-sublinks">\n\t  <div id="post-teaser-posted-by" class="post-teaser-posted-by">posted by </div>\n\t  <div id="post-teaser-user" class="post-teaser-user">').concat(e.keys.returnUsername(r.transaction.from[0].add),'</div>\n\t  <div data-id="').concat(r.transaction.sig,'" id="post-teaser-comments" class="post-teaser-comments">').concat(n,"</div>\n        </div>\n      </div>\n    </div>\n\n  ")}},function(e,t,r){var n=r(296),a=r(142);e.exports=PostSidebar={render:function(e,t){document.getElementById("post-container")||e.browser.addElementToDom('<div id="post-container" class="post-container"></div>'),document.querySelector(".post-sidebar")||e.browser.addElementToDom(n(e,t),"post-container"),e.modules.respondTo("email-chat").forEach((function(t){null!=t&&t.respondTo("email-chat").render(e,t)})),document.querySelector(".post-sidebar-create-btn").onclick=function(r){a.render(e,t),a.attachEvents(e,t)}},attachEvents:function(e,t){e.modules.respondTo("email-chat").forEach((function(r){r.respondTo("email-chat").attachEvents(e,t)}))}}},function(e,t){e.exports=PostSidebarTemplate=function(e,t){return'\n    <div id="post-sidebar" class="post-sidebar">\n      <button class="post-sidebar-create-btn"><i class="fas fa-plus-circle"></i> New Post</button>\n      <div id="email-chat" class="email_chat"></div>\n    </div>\n    '}},function(e,t){e.exports=NewPostTemplate=function(e,t){return'\n    \n    <div class="new-post-wrapper">\n      <div class="new-post-form">\n      <div class="post-close"></div>\n      <textarea class="new-post-content" placeholder"Write your post here"></textarea>\n        <button class="new-post-btn">Post</button>\n      </div>\n    </div>\n\n    '}},function(e,t){e.exports=ShowPostTemplate=function(e,t,r){return r.author==e.wallet.returnPublicKey()?'\n    <div class="show-post-wrapper">\n      <div class="show-post-form">\n        <textarea class="show-post-content">'.concat(r.content,'</textarea>\n        <button class="show-post-update-btn">Update</button>\n      </div>\n    </div>\n    <div class="post-comments"></div>\n    '):'\n    <div class="show-post-wrapper">\n      <div class="show-post-form">\n        <div class="show-post-content">'.concat(r.content,'</div>\n      </div>\n    </div>\n    <div class="post-comments"></div>\n    ')}},function(e,t,r){var n=r(300),a=r(301);e.exports=AddContact={render:function(e,t){document.querySelector("body").innerHTML=n(t),t.header.render(e,t),t.header.attachEvents(e,t)},attachEvents:function(e,t){document.getElementById("add-contact-add-button").onclick=function(){var r=document.getElementById("add-contact-publickey").value;e.modules.returnModule("Encrypt").initiate_key_exchange(r),a.render(e,t)}}}},function(e,t){e.exports=AddContactTemplate=function(e){var t=e.publickey;return'\n    <div class="header"></div>\n    <div\n      style="\n        display: grid;\n        grid-gap: 1em;\n        justify-items: center;\n        align-items: center;\n        padding: 1em;\n        margin-top: 5em;\n      ">\n      <div style="display:grid; grid-template-columns: 5.2em auto 5.2e; width:100%">\n        <i id="back-button" class="icon-med fas fa-arrow-left"></i>\n        <h1 style="justify-self: center">Add Contact</h1>\n      </div>\n      <input id="add-contact-publickey" type="text" placeholder="Publickey" value="'.concat(t,'">\n      <button style="margin: 0; padding: 1em; width: 100%;" id="add-contact-add-button">ADD</button>\n    </div>\n  ')}},function(e,t,r){var n=r(302);e.exports=AddContact={render:function(e,t){document.querySelector("body").innerHTML=n(t),t.header.render(e,t),t.header.attachEvents(e,t)},attachEvents:function(e,t){}}},function(e,t){e.exports=AddContactCompleteTemplate=function(){return'\n    <div class="header"></div>\n    <div\n      style="\n        display: grid;\n        grid-gap: 1em;\n        justify-items: center;\n        align-items: center;\n        padding: 1em;\n        margin-top: 5em;\n      ">\n      <div style="display:grid; grid-template-columns: 5.2em auto 5.2e; width:100%">\n        <i id="back-button" class="icon-med fas fa-arrow-left"></i>\n        <h3 style="justify-self: center">Your request has been sent</h3>\n      </div>\n      <button style="margin: 0; width: 100%;padding: 1em;font-size: 1.2em;" onclick="location.href=\'/email\'"><i class="far fa-envelope"></i>Email</button>\n      <button style="margin: 0; width: 100%;padding: 1em;font-size: 1.2em;" onclick="location.href=\'/chat\'"><i class="far fa-comments"></i>Chat</button>\n    </div>\n  '}},function(e,t){e.exports=RegistryAppspaceTemplate=function(){return'\n<div class="email-appspace-registry">\n<h3>Register an human address:</h3>\n<div class="grid-2">\n  <div>Address:</div>\n  <div><input id="identifier-requested" class="identifier-requested" type="text" placeholder="Your nickname or handle (what comes before the @)"></div>\n</div>  \n<button class="registry-submit" id="registry-submit">register</button>\n  '}},function(e,t,r){function n(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(a,i){var o=e.apply(t,r);function s(e){n(o,a,i,s,c,"next",e)}function c(e){n(o,a,i,s,c,"throw",e)}s(void 0)}))}}var i=r(305),o=r(306);e.exports=RegistryModal={render:function(e,t){if(!document.getElementById("registry-modal")){var r=t.helpers.el_parser;document.querySelector("body").append(r(i()))}document.getElementById("registry-modal").style.display="block"},attachEvents:function(e,t){var r=this,n=document.getElementById("registry-modal");document.getElementById("modal-close").onclick=function(){return n.style.display="none"};var i=document.getElementById("registry-input");i.onfocus=function(){return i.placeholder=""},i.onblur=function(){return i.placeholder="Username"};var s=document.getElementById("registry-add-button");s&&(s.onclick=function(){var a=document.getElementById("registry-input").value;e.modules.returnModule("Registry").registerIdentifier(a)&&(Array.from(document.getElementsByClassName("saito-identifier")).forEach((function(e){e.innerHTML="<h3>".concat(a,"@saito</h3>")})),n.innerHTML=o(),r.attachEvents(e,t))});var c=document.getElementById("registry-email-button");c&&(c.onclick=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))),document.addEventListener("keydown",(function(e){"27"==e.keyCode&&(n.style.display="none")}))}}},function(e,t){e.exports=RegistryModalTemplate=function(){return'\n    <div id="registry-modal" class="modal" style="font-family: visuelt-medium;">\n      <div id="registry-modal-content" class="modal-content" style="max-width: 600px;">\n        <div style="display: grid; grid-gap: 1em">\n          <div style="display: grid; grid-template-columns: auto 1em">\n            <h1 style="color: black; margin: 0">Register Username</h1>\n            <i id="modal-close" class="close fas fa-times" style="justify-self: end;"></i>\n          </div>\n          <div style="display: grid;grid-gap: 1em;">\n            <div style="display: flex">\n              <input style="text-align: right; color: black" id="registry-input" type="text" placeholder="Username">\n              <h3 style="color: black; margin-left: 5px">@saito</h3>\n            </div>\n            <div style="display: flex;align-items: center;">\n              <button id="registry-add-button">SUBMIT</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  '}},function(e,t){e.exports=RegistrySuccessModalTemplate=function(){return'\n    \x3c!-- <div id="registry-modal" class="modal" style="font-family: visuelt-medium;"> --\x3e\n      <div id="registry-modal-content" class="modal-content" style="max-width: 800px;">\n        <div style="display: grid; grid-gap: 1em; color: black">\n          <div style="display: grid; grid-template-columns: auto 1em">\n            <h1 style="color: black; margin: 0">Registry Success!</h1>\n            <i id="modal-close" class="close fas fa-times" style="justify-self: end;"></i>\n          </div>\n          <div style="display: grid;grid-gap: 1em; color: black">\n            <p>As a thanks, have 50 SAITO on us.</p>\n            <p>To get more SAITO, provide us an email or join us on Discord and Telegram</p>\n            <div style="\n              display: grid;\n              grid-template-columns: 6fr 1fr 1fr;\n              justify-items: right;\n              align-items: center;\n              ">\n              <div class="registry-succes-email" style="display: flex;width: 100%;">\n                <input style="color: black" id="registry-input" type="text" placeholder="Email">\n                <button id="registry-email-button" style="margin: unset;margin-left: 10px;">SUBMIT</button>\n              </div>\n              <div id="registry-succes-discord">\n                <a href="https://discord.gg/HjTFh9Tfec" target="_blank">\n                  <i class="fab fa-discord" style="color: black; font-size: 2em"></i>\n                </a>\n              </div>\n              <div id="registry-succes-telegram">\n                <a href="https://t.me/SaitoIO" target="_blank">\n                  <i class="fab fa-telegram" style="color: black; font-size: 2em"></i>\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    \x3c!-- </div> --\x3e\n  '}},function(e,t,r){function n(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(a,i){var o=e.apply(t,r);function s(e){n(o,a,i,s,c,"next",e)}function c(e){n(o,a,i,s,c,"throw",e)}s(void 0)}))}}var i=r(308),o=r(438),s=r(219);e.exports=SettingsAppspace={private_key_visible:0,render:function(e,t){if(document.querySelector(".email-appspace").innerHTML=i(e),document.querySelector(".settings-appspace"))for(var r=0;r<e.modules.mods.length;r++){if(null!=e.modules.mods[r].respondTo("settings-appspace"))e.modules.mods[r].respondTo("settings-appspace").render(e,t)}},attachEvents:function(e,t){try{try{if(document.querySelector(".settings-appspace"))for(var r=0;r<e.modules.mods.length;r++){if(null!=e.modules.mods[r].respondTo("settings-appspace"))e.modules.mods[r].respondTo("settings-appspace").attachEvents(e,t)}}catch(e){}try{document.getElementById("register-email-btn").onclick=function(r){t.modal_register_email=new s(e,(function(){})),t.modal_register_email.render(e,t,s.MODES.REGISTEREMAIL),t.modal_register_email.attachEvents(e,t)}}catch(e){}try{document.getElementById("register-identifier-btn").onclick=function(r){t.modal_register_username=new o(e,(function(){})),t.modal_register_username.render(e,t),t.modal_register_username.attachEvents(e,t)}}catch(e){}try{document.getElementById("privatekey").onclick=function(e){1==this.private_key_visible||(document.getElementById("privatekey").toggleClass("password"),this.private_key_visible=1)}}catch(e){}try{document.getElementById("see-password").onclick=function(e){document.getElementById("privatekey").toggleClass("password"),1==this.private_key_visible?this.private_key_visible=0:this.private_key_visible=1}}catch(e){}try{document.getElementById("trigger-appstore-btn")&&(document.getElementById("trigger-appstore-btn").onclick=function(t){var r=e.modules.returnModule("AppStore");r&&r.openAppstoreOverlay(e,r)})}catch(e){}try{Array.from(document.getElementsByClassName("modules_mods_checkbox")).forEach((function(t){t.onclick=function(){var t=a(regeneratorRuntime.mark((function t(r){var n,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=parseInt(r.currentTarget.id),a=r.currentTarget,1!=r.currentTarget.checked){t.next=9;break}return t.next=5,sconfirm("Reactivate this module?");case 5:t.sent?(e.options.modules[n].active=1,e.storage.saveOptions(),window.location=window.location):window.location=window.location,t.next=13;break;case 9:return t.next=11,sconfirm("Remove this module?");case 11:t.sent?(e.options.modules[n].active=0,e.storage.saveOptions(),window.location=window.location):a.checked=!0;case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}))}catch(e){console.log(e)}try{document.getElementById("backup-account-btn").addEventListener("click",(function(t){e.wallet.backupWallet()}))}catch(e){console.log(e)}try{document.getElementById("restore-account-btn").onclick=function(){var t=a(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:document.getElementById("file-input").addEventListener("change",(function(t){var r=t.target.files[0];e.wallet.restoreWallet(r)})),document.querySelector("#file-input").click();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}catch(e){console.log(e)}try{document.getElementById("reset-account-btn").onclick=function(){var r=a(regeneratorRuntime.mark((function r(n){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,sconfirm("This will reset your account, do you wish to proceed?");case 2:confirmation=r.sent,confirmation&&(e.wallet.resetWallet(),e.modules.returnModule("Arcade").onResetWallet(),e.storage.saveOptions(),t.emails.inbox=[],t.emails.sent=[],t.emails.trash=[],t.render(e,t),t.attachEvents(e,t),e.blockchain.resetBlockchain());case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}catch(e){}try{document.getElementById("restore-privatekey-btn").onclick=function(){var t=a(regeneratorRuntime.mark((function t(r){var n,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.storage.resetOptions();case 2:return n="",a="",t.prev=4,t.next=7,sprompt("Enter Private Key:");case 7:if(""==(n=t.sent)){t.next=20;break}return a=e.crypto.returnPublicKey(n),e.wallet.wallet.privatekey=n,e.wallet.wallet.publickey=a,e.wallet.wallet.inputs=[],e.wallet.wallet.outputs=[],e.wallet.wallet.spends=[],e.wallet.wallet.pending=[],e.blockchain.resetBlockchain(),t.next=19,e.wallet.saveWallet();case 19:window.location=window.location;case 20:t.next=26;break;case 22:t.prev=22,t.t0=t.catch(4),salert("Restore Private Key ERROR: "+t.t0),console.log("Restore Private Key ERROR: "+t.t0);case 26:case"end":return t.stop()}}),t,null,[[4,22]])})));return function(e){return t.apply(this,arguments)}}()}catch(e){}}catch(e){console.log("Error in Settings Appspace: "+JSON.stringify(e))}}}},function(e,t){e.exports=SettingsAppspaceTemplate=function(e){var t=e.keys.returnEmail(e.wallet.returnPublicKey()),r=e.keys.returnIdentifierByPublicKey(e.wallet.returnPublicKey());""==t&&(t='<span id="register-email-btn" style="cursor:pointer" class="register-email-btn">register an email address</span>'),""==r&&(r='<span id="register-identifier-btn" style="cursor:pointer" class="register-identifier-btn">register a username</span>');var n="Wallet Outdated - module selection not supported";try{n=e.options.modules.map((function(e,t){var r=e.active?"CHECKED":"";return'\n        <div class="settings-app-select">\n          <label class="s-container">'.concat(e.name,'\n            <input\n              type="checkbox"\n              value="modules_mods_').concat(t,'"\n              class="modules_mods_checkbox"\n              name="modules_mods_').concat(t,'" id="').concat(t,'" ').concat(r,'/>\n            <span class="s-checkmark"></span>\n          </label>\n         </div>\n      ')})).join("")}catch(e){n=e.message.startsWith("Cannot read property 'map'")?"Initialization error. Refresh page should fix this.":"Unknown error<br/>".concat(e)}var a="";e.modules.mods.forEach((function(t){"Balance"==t.name&&(a='\n        <a target="_blank" href="'.concat(window.location.origin+"/balance?address="+e.wallet.returnPublicKey(),'">Check Recorded Balance</a>\n      '))}));var i='\n  <link rel="stylesheet" href="/settings/style.css">\n  <div class="email-appspace-settings">\n\n    <div class="settings-grid">\n\n      <div class="settings-wallet-management">\n\n        <div class="settings-buttons">\n          <button id="backup-account-btn" class="backup-account-btn"">Backup Wallet</button>\n          <button id="restore-account-btn" class="restore-account-btn">Restore Wallet</button>\n          <button id="restore-privatekey-btn" class="restore-privatekey-btn">Import Private Key</button>\n          <input id="file-input" class="file-input" type="file" name="name" style="display:none;" />\n        </div>\n\n        '.concat(a,'\n\n\n        <div class="grid-2">\n\n          <div>Email:</div>\n          <div>').concat(t,"</div>\n\n          <div>Username:</div>\n          <div>").concat(r,'</div>\n\n          <div class="public-key">Public Key:</div>\n          <div>').concat(e.wallet.returnPublicKey(),'</div>\n\n          <div>Private Key:</div>\n          <div class="private-key">\n            <input id="privatekey" type="text" value="').concat(e.wallet.returnPrivateKey(),'" class="password" />\n            <i class="see-password fas fa-eye" id="see-password"></i>\n          </div>\n\n\t</div>\n\n      </div>\n\n      <div class="settings-app-management">\n\n        <h3>Installed Modules: ');return null!=e.modules.returnModule("AppStore")&&(i+=' &nbsp; [<span id="trigger-appstore-btn" class="trigger-appstore-btn">&nbsp;install more&nbsp;</span>]'),i+='</h2>\n        <div class="settings-app-list">\n        '.concat(n,'\n        </div>\n      </div>\n\n      <div id="settings-appspace" class="settings-appspace"></div>\n\n      <hr />\n      <div class="grid-4">\n        <div>Code Version:</div>\n        <div>').concat(e.wallet.wallet.version,"</div>\n        <div>Wallet Version:</div>\n        <div>").concat(e.options.wallet.version,'</div>\n      </div>\n\n      <div style="padding-bottom:40px;">\n        Having trouble? Try clearing your browser cache or <span style="cursor:pointer; border-bottom: 1px dashed" id="reset-account-btn" class="">resetting your account</span>. If that doesn\'t fix things, write to us at info@saito.tech.\n      </div>\n\n    </div>\n  </div>\n</div>\n  ')}},function(e,t){e.exports=WebsiteDataTemplate=function(){return'\n    <div>Latest Block Number:</div>\n    <div class="info block-number"></div>\n    <div>Latest Block Time:</div>\n    <div class="info block-time"></div>\n    '}},function(e,t){e.exports=FAQTemplate=function(e){var t="";return[{q:"What is Saito?",a:"Saito is a layer-one blockchain. The network is noteworthy for being more secure than Bitcoin while making payments not just to miners and stakers but also the nodes in the network that offer data-services to users in the network."},{q:"Why do we need another blockchain?",a:"There are two market failures that affect every non-Saito blockchain: a tragedy of the commons problems that encourages blockchain bloat, and a free-rider problem that pushes up the cost of using the network. These problems get worse and worse as networks scale and costs rise. In order to have a truly-scalable public blockchain we need to fix these problems."},{q:"How does Saito solve the 51 percent attack?",a:"Saito ensures that producing blocks is always expensive. Honest nodes pay those costs with the fees they collect from users. Attackers must pay out-of-pocket and are guaranteed to lose a quantifiable amount of money with each block they produce. There is no point at which this cost-of-attack falls below zero."},{q:"How does Saito solve the fifty-one percent attack?",a:"Unless attackers match the amount of work done by the overall network, they either cannot produce blocks as quickly as honest nodes, or are able to produce blocks but not collect payments. Attackers must either go bankrupt or permit others to add work to their chain."},{q:"Surely there is a 51 percent attack in there somewhere?",a:"No. Attackers who have a mere 50 percent of network resources lose about half their money each block. The cost-of-attack scales with the volume of network fees collected by others in the network."},{q:"How does transaction rebroadcasting work?",a:"Saito uses a technique called Automatic Transaction rebroadcasting. This forces old transactions to compete with new ones for space on the blockchain. In market equilibrium the most profitable strategy for block producers is to ensure the same amount of data is deleted from the chain as is added each block."}].forEach((function(e,r){var n=0==r;t+='\n    <section class="drop-down-menu">\n      <input type="checkbox" class="activate" id="accordion-'.concat(r,'" name="accordion-').concat(r,'" ').concat(n?"checked":"",'>\n      <label for="accordion-').concat(r,'" class="menu-title">').concat(e.q,'</label>\n      <div class="drop-down">\n        ').concat(e.a,"\n      </div>\n    </section>")})),'\n    <div class="faq-page">\n      <h1 class="page-title">Frequently Asked Questions</h1>\n      <div class="faq-container menu">\n        '.concat(t,"\n      </div>\n    </div>")}},function(e,t){e.exports=HowSaitoWorksTemplate=function(e){return'\n    <div class="how-saito-works-page">\n        <h1 class="page-title">Welcome to the Saito Project</h1>\n        <h2>What is Saito?</h2>\n        <p>Saito is an open network that runs cryptocurrency applications in browsers without plugins, private APIs and non-open infrastructure. Saito survives without an owner while funding the nodes that provide user-facing infrastructure for its own network and other public blockchains.</p>\n        <p>If you are new to Saito, you might enjoy our quick video introduction on <a href="https://www.youtube.com/watch?v=7LQQWOIeWSw">what problems Saito solves</a>. Or jump to trying out the network by visiting our community-driven <a href="/arcade">Saito Arcade</a>. For developers interested in building applications or adding support for other crypto cryptocurrencies, our developer section has technical information and tutorials that will get you started. And coding on Saito is really very easy: our introductory tutorial covering how to build and deploy your first application takes about five minutes to complete.</p>\n        <p>The remainder of this site contains information on Saito’s mechanism design, economics and technical implementation. Because the problems that Saito solves are still poorly understood outside of actual economics, we recommend that those interested in learning how Saito works start with our overview of the <a href="https://org.saito.tech/economics">economic problems</a> that stand in the way of other scaling attempts. Once the basic economic problems can be seen, it is easier to understand why Saito makes the design decisions it does, as documented in our <a href="/saito-whitepaper.pdf">Saito whitepaper</a> and online repositories for <a href="https://github.com/saitotech/saito-lite">code and other network documentation</a>.</p>\n    </div>'}},function(e,t){e.exports=TeamTemplate=function(){var e="";return[{name:"David Lancashire",photoFile:"David_Lancashire.jpeg",desc:"A tech entrepreneur who has been involved with the Chinese crypto space since 2012. He co-founded the Saito project and has presented on blockchain at Tsinghua, Deconomy, and at the Asia Blockchain Summit in Taipei. David did graduate work at the Berkeley and has a background in tech, political science and economics.",linkedin:"https://linkedin.com/in/david-lancashire"},{name:"Richard Parris",photoFile:"richard-headshot-300x300.jpg",desc:"Has 15 years of experience leading technology projects and teams in Japan and China. After exiting his previous startup Richard helped design Saito Consensus and co-founded the project. He has degrees in Mathematics and Philosophy from Melbourne, and has lived in Beijing since 2007.",linkedin:"https://linkedin.com/in/richard-parris-02b5a39/"},{name:"Clayton Rabenda",photoFile:"Clayton_Rabenda.jpg",desc:"Studied Electrical Engineering at Lehigh University and worked on the web technologies teams at Viacom and Amplify Inc. before joining Google as a Senior Software Engineer on their advertising fraud protection team, Ad Traffic Quality, which leveraged Machine Learning at Internet Scale to defend the majority Google's revenue.",linkedin:"https://linkedin.com/in/clayton-rabenda-6ab9b39"}].forEach((function(t){e+='\n    <div class="team-member">\n      <div class="team-photo" style="background-image: url(\'/subpagestyle/team/'.concat(t.photoFile,'\')"></div>\n      <div class="team-details">\n        <h3 class="team-name">').concat(t.name,'</h3>\n        <p class="team-desc">').concat(t.desc,'</p>\n        <div class="team-links">\n          <a href="').concat(t.linkedin,'" class="button">LinkedIn Profile</a></div>\n      </div>\n    </div>\n    ')})),'\n    <div class="team-page">\n      <h1 class="page-title">Our Team</h1>\n      <p class="desc">Our team is based in Chaoyang District, Beijing. For more information or to speak to a member of the team please contact our address for general email inquiries: info@saito.tech.</p>\n      \n      <div class="team-container">'.concat(e,'</div>\n\n      <p class="team-footer">We are also proud to be running a distributed team of marketing staff, network debuggers and testers, application developers and community managers. Approximately half of our staff are based in Asia, with the remainder distributed through Spain, South Africa and South America.</p>\n    </div>')}},function(e,t){var r="",n="",a="",i="";["0x002e6dafc52d6db609e1148d5b3724479608bfab","0x008c068bfd922e3eb7d14e31ecf0daa1e04f906f","0x010ed7839b8a2ea15d8e6382735b725ad1f8bb6c","0x0177e505a8fdf5ab39f6fd7f7335e16c6e0a66c5","0x018686f68b9d0f366c132550bdb982a301590384","0x029b317b115dc4a40cb4774069e69c40705e0e2a","0x02b24ff4bdd38c09cee33c9231454e59f1f36cbf","0x02c9cc94dd0ca7c85e1153c6e7ecad336bd6726e","0x0316196c7d2bc1354723d3fbf445f783d8febe53","0x03b308b0091c8d1fec5406cff741352a2e66ae28","0x03b76647464cf57255f20289d2501417a5ec457e","0x03b924278d38db7bdfddb3a57b538debb420770b","0x0409f1e6cac36afa03ab57c25cbb0334cef7f8e4","0x0448b99214c85013cd3e5e25cb1a421c96e7c060","0x050d2623b8ebc71653acefe6700248bf2991e58f","0x056615f0364429a85fd9bea32e3f27a916c84bfb","0x05de4af98481dc6ca566679bee656d1d6ac6999d","0x06783487ef7579d65a619b8a16abaf3497fba4bc","0x068bdd067ce78427901c01607f9e42722975821a","0x0718d289e4e6fa61e9fb05c6f46681a25baeede3","0x0757c4f0c97e1d3703661c4fa3d6280ec2d74d5f","0x0768edad62715ca3c5d7b919b7f52a704f1d87c6","0x079a13288f70b52d927a345c004376c500414121","0x0871c4db647a0a948598fb374af82756f5cec6c0","0x08bf8d6fa77f7bc937e62dcb7a5d1201890c48fa","0x090595122594786f97934ae1f27a4aa7939f18ae","0x0a16ddb102df6a250dd21389b2baebabeee268d5","0x0a2b975557c0262d3844c719fc021d371f82f747","0x0a465bd9404d2e2e6fafc86c0fef430d3f84cf86","0x0a5bd327b39cb8c996118f1b42e68dd3e8727e6f","0x0ab6f86fdf3c4c45090641c276a983941787587b","0x0aeed0374ec871243bb4d78392ca7777f22fb3ce","0x0b120a91a256ebae10acd8fbcaf2bf75d629e565","0x0b5d27f291c55c4742bbe2ed99b49dcce7684191","0x0b5d2f7d8b1cdb0974e3aa056f94ca98f139f369","0x0ba857029c8d486696a04d719932f1b4a94913d9","0x0bbaf4af7344754ca26b5def315756744f5d9e8b","0x0bd13e45eb62770d200f2efb658f73546f9a8c37","0x0bd61a2ef4c1b3c293f9cb98d5d985134e832711","0x0bf98720eb6ef66968b1db120c31335f13df94f8","0x0c4c9e3e0b8582b791d42db5f3921d9e5147fb98","0x0ca3f1f475d9c07c86e2f3cf0e92451d7d7d5240","0x0cb50da1b23c41c5a3e2cd2c4019e7af6e372477","0x0ce730fac3a07820fdc9e17bb68e3574f6fdfc0e","0x0cea740790617e2875c6ad1ac6f7d4f0ee907de3","0x0d1cab82681b58ff0ef38ff92a2369668b867990","0x0d7391085f27e910fb203cdce825dd28d9e29701","0x0d97a3b5a15ed668aa41d6f45ab9c32770b656d1","0x0e5773642def2ff242128fba88c5ceee83b6ded3","0x0e5a6bf662bd640f54bf766748592872a624c51d","0x0e715539593063503d9827237610788fb86c0182","0x0ebce9bb5e2a18d5e735ccbb835b219998a560cc","0x0f0924a3a5111e7987a23a49af826d2ba431342e","0x0f0ada09222c149d292f8786353a0b539af22277","0x0f9ff5028ef1aa963c965632f0bc113a140e63d2","0x0fcc669136934da42e4c48a0703721c34bee777d","0x104252d77c7b3c4e2e8ba18f4997d9b6399fad82","0x105cc968def09b0a6a5bee111d527ceffd611242","0x10c811e24f5653ac9842f3314d1149d5abeb470f","0x112af92409b81bd996cd3aa6d33d366e19230fea","0x1140e000bc127c1799040d8b61afd822083274a3","0x1181ea8ed8e4db358d5a20ee18382e11cff82a26","0x11a163ef98b019dddb0dbec8afb9fade50f1e9e3","0x11a1b7eb973dd982ae6e8b077a5cefcbcdb534e1","0x11ce4333f56fda2afa263206d43e1c00c4ce2479","0x121dd42384db6ad04851f7ac1e81bcd8bbb1876e","0x1274c165bc582b1bd81c38cbf5c95fcdb924a201","0x12e3633a8a4d6ef918b156374b7ac750e092332a","0x132a3643b457db8c20652c0be1810791c070c5f4","0x13abdf5f2ce5187c14de18982551367280b88fac","0x14008ab6c4e87a0679a0e4b3fc242587fe3c1aa7","0x14200888c9b85b4f1e589de4be12e46916b7af31","0x145109949f6af5e9068714aa8376a862e6e26bfe","0x14798026c6bf1c70835992056c7e128bc3b39143","0x150e90bc93e1527b6d45df5b802d83d575b76126","0x1563547dd0c62a802779bf55af1184e65bb1a6e5","0x15660fb6d6b66d00ce6e8b9692414fe33dfce431","0x158a714d69072f78398b7f1ad1fd6ce7bf908437","0x15a6e66988a886f8ca3548262841d0317e26acff","0x1621c4f772b284dd71052e882e197366e1faa942","0x16632f29451e49120e44f36211ac924905186616","0x16b0e4ad0b7287341e8436f335b558d168dd0985","0x16b942a59054186dc4c4067169fb126bd0f443dd","0x16d267f8f77617d327af137d2c9137cfd140df86","0x174b7da2e94bbcb498fe5f71801f9b7941e20613","0x179d9788f34618c88996d749d32a74e875964f50","0x17a58cdcee893486f7b17351f69d5d44b2961eed","0x17ac83fa732eacb07d57c4767eb3aed2928c558c","0x17d2549712fe4347c9c574431b360df11f89e3e0","0x185d38d04b3e52811a5f010ec5a8e0435abd0bbc","0x189621aad41e1be257ddf8049c4276697af7806e","0x189c7f09d72a1d8233478751ddd3e7d7f4bb3055","0x1920b396867915c7763a9860875d971f81eac9ac","0x1993b688ef5f5ce61cd71cd8a8d7516a97d58681","0x1a3c8759566071ca5fd32299aecd84a1f51e53f2","0x1a6d7040161fd4c0e8872c5bd3ec4d1cd22a255a","0x1a748ad5b635b422a99817092207150152cdef3f","0x1ab73cfe1cdb707a9b7b466db281546241d54e39","0x1abaffb51ea7cb711b6af78e294634df30ecb10f","0x1b0243ce8781cfff2a6b64e1f0ba3017fc4b89c2","0x1b752293437f25032ac09a51e3c5d9c49420cd14","0x1b8375e5626fb491cedaa63741469c9bb631b900","0x1c46718463877607b620aa26d10e75bc771ba24e","0x1ce454b07a7c5a5a6d488fea3f5f37cbbf32030d","0x1d1c483d1571342fe0ebdd3f1fb8ef6510690919","0x1d436c04aa4875866a14d124171eb3cb8564077b","0x1d5543d3906204414e033c00d70380a3741bcc8d","0x1d6cba2d941c6800deb7dc4eda00eb54d16210f0","0x1d9808c8c12fe4192e60890e7830ac32a7cff634","0x1db69578db176694c61643869f8668ddc66d82af","0x1e3dea460ef6745b7080953cbc3fa10d84dffefc","0x1f8d2df6024d42bd3eb4030a68776c5a2ab4907b","0x1f94157cd424f3390c65e2dcdef1536fd9ee509c","0x202f3b669a8e971b66553e493a0883713dff8d68","0x20b084c18809ebd560d1c392ac05fb28838ebec5","0x20b4a99014e33a9167db54d322cac1ef5d481250","0x21b85d5e5c9a752eedcfb9cef464eeb1150ba03d","0x2258782b63ca3683c4d4e3012808532c24ae5d52","0x238d968a7e6755469c8a4fdd2ce115dcde5e3a09","0x23d1ed22383c5c6517ad8da3f5d5181b79254fe7","0x24109da5f19ce30d57d5dd4373da99b781a72ee8","0x2490dc1685200c2dffff04df450dbd4c0971ffb5","0x249e8d871dbe1985cb49f35c7747eb0f0454fce3","0x24d6d4b311e29651d011bc0bd221de08025587dd","0x251fa89b5430ab0f0dcf0779000b48e70e9a7c6e","0x2545471cabbb93c2245101e3f1418c18fb7603fd","0x259d542b3507404af5dbdd90432a64228639452e","0x25ee71e0141347972b2ef66faf197cd09c93ae88","0x262dd61271d02870307567e19de1a69e92e32554","0x265adabfdb4dd7f5b6a104c2cdb6e0259cbcb2f0","0x2663d87f4e34b7b0356efe93426e8e7f050afb77","0x266988c1f5648f7510eecd85162e24cc5a391f14","0x26aaa46b57a5ce4254a6adb72b5adfa12bf1744a","0x26d802bce108f310b08cecd6237c47401a802867","0x271b68a4aa515a78b8d6dd0b2628fed2f1224643","0x271be020715b307000d11f5d2a86f60c56628210","0x27689177ddda66a138ef573fc41d381f2d94bbc8","0x27d4cfc6dc3a0ff6a931d19f6d8e743c03bdf88d","0x27f4ff93a39bd5d3f1ffac43bc8adc63d77bfde6","0x28047b79cfff41c513acfbb7e0e60366c23eea94","0x28c448b185894c003a812586b1466e9f56b20883","0x2980d9076aeb79d87fb7a07c830bcedb70650142","0x299f08a8ed7238efcf377cc0b89524d01657190e","0x29d6d6d84c9662486198667b5a9fbda3e698b23f","0x29e2bbb64a06d3b66f6b3d9aab6b80eb1784df3d","0x29e433a7da5ed6cdb2678bb0b4bda234ea2703fa","0x2aa9b52c4e57d3517301dfb39fefa2ec89bc1796","0x2ada97af9cc3e4c50d919aa6d4ce095b51a3030f","0x2ae3abf255c417d0b3aec296c0a607f54e9673e4","0x2b78452cf3bd2b1a00b3296b54005b78dbeb3a0f","0x2ba81a31ff63f31d190fb6c3aa12084fd61b56ac","0x2be1a753b1c0562c4cf35a24f6f62619961ceb53","0x2c15d08b51ab773c23387ae48bb7978b6e58f02e","0x2c2add1c863551a0644876be227604c8e458dd7e","0x2c59900b9442b7a865f93219c04f553a0d7bd003","0x2d818498053a15990c71de6744faff9753f91d24","0x2dbab983d00b6bfbe00f6f08d71602ce6ddb0b3d","0x2dfa6e0f031f3f246787bdcefed866be3e26977b","0x2e5c0674da08c3461a12bc4b44dad48727729497","0x2f7c6ea622a1722125bccbedb47307c7b3b9aa69","0x2fa805e45d39ebcec106e035aa3b942d3b8eb13e","0x304d702a8d7085c8e5dea787e63c0d3db0f669b8","0x3079d3a14aa8d8c9bb69122b1805cf7acc4321dd","0x3105e43caab7cddc8c70843195ea00f0159aecf1","0x3117d469c817c66233ebcc0714789a04762dacff","0x31b1c5b5e2d1c8d23c556f6d6029d265ee0af98e","0x31b6f2771e2e56aa754b319b7ee8134d9bd66cc0","0x32188df16621e517c49406b08b4c3fc7a8464cdc","0x324768c81f1d580225dec690f5389cef9358a904","0x32eb7acbc60eec7101b063da8df148454410a353","0x32f8e0361ce2b9ca84824bc4b446c18f6b2fc183","0x33119674cdb6bc1754ef466b1d0f175f3b51c88a","0x3333bbcfec5af86e14758ac684d01279d9089863","0x33929cbafbd7f2df4b7f38b5dd318d2c788dc564","0x33d1d53c2c9df744682d0d4f3a0a57e3b7b76595","0x346fbd09e7d6055164bac365d8f386170094b3e3","0x348ecbd26decdb75f1a14231f063ca82d32cbc83","0x3531eae7584747af1536881b1ca3c3e96a122124","0x3563fd9a390eb7425935cb5774bac91c87caf1d5","0x35672696496dd9d2d1cf8520fc6556e4d570eb64","0x358913b531e1cf4e937f524d4c09b4100b137cde","0x35f26e17229381ce51e49eb6678af436937b9e34","0x362c2c1f5ebc1d0f1fc6f28eefb9dd542c384830","0x363a83b68ce43476e9e2a505cb9020eb5a7fec83","0x3673cf19b6efb296e29d9b07666e9625ed63cfe1","0x371ee3545f78465aa29c7d842546f9c7cfb175b8","0x3756681f03dd2c8b5cce162d22986ed86c385b10","0x386c82b52d6e0dfb636c51b577577140cc1df4bf","0x387227d2681c547ca874417a70dd5edac08e129e","0x388445266e5d3c029e2ddcf18c803124efbf79b8","0x38e87dea8b44059c54d1f6bd7fa390bd1ab82d08","0x38e96dda4f19f2658719bc4ead69c7c21970b799","0x3916839ae08c8723c5cb7a1f789a12accfca9aa9","0x393746c74d3b3bdd1816133da4d7961b36e88346","0x39493d461cc533ea4ebb15cb266d1f45cda150e7","0x39869f20b65675c49d2884fab2e15ac2d1c30728","0x39d565a3a1a90cc3dc13e35ab59b7435e4066d28","0x39fbd25cf5a2c1fc32f01d56e11643a8cf3c2a09","0x3a3d8d6e73e15f6c289c08ef215a3ecb94111d42","0x3a8781327bc0d0c80cbd5a1505edc5e4aacf5732","0x3a995db2c00d3fd595e1003d04de35d6beaba934","0x3ab7fcd5798713a03887661dc495b5f82092feab","0x3b39427bfa2cd333daeb8a3e811e827447ef3dde","0x3bf124372c36a8a946010e4899dd45586d82c481","0x3c033aab89b26650057881dabbc0815146ffc0f2","0x3d2c7eac8e154988314681ed5aaef730976f87b8","0x3db21955a90f83aafd568ecaf55b7cee52f88bce","0x3de2da6ad41e50c21fcf271fe414aa86e1776891","0x3df047d6ffe88d5309859cebb1bd9a3e19338fcd","0x3e49faed39e1f8f7147d33eef177b9fedff8b0d2","0x3e702e39e0649bd8581d07a5bf1b9e5924d94ce0","0x3ed1e4f3db895f3990ac06f7c22ac83ef70f12b9","0x3eecaf77f17bdde5e4304ff2bebb050f7031bc21","0x3ef37b4bb5e64d0d9536ad437342c216107d6df5","0x3f4cbf443aff15add12f8179fea19839cc0593ef","0x3f923a45e473331de342e98db7a07c867308c849","0x3f942244b1f18c843752e914cb3b96cedbecfe29","0x3fe7493385eaae7ec98dc33f77b4fbe71aeb5edd","0x4033ad61ce26b65c5b6bbf01dc4a0139b3486cfb","0x403991744ee359971ddef35ed540ef837373af73","0x408a426153f4578d88ff0383cf5a32073e755fa8","0x409f29238cc6f2505cb7c8cf3f45728f060582d1","0x40f35fcceb856bdfc0d40d67891dd83f77905432","0x40ffd28ca404cfcd1bf7b0c92a997138f73a02c8","0x41022a0594bfbe728cf8457787b42e54df167ca3","0x4184edea458b3dbe3492e5a93c08aec926bc74af","0x42309ab9681352613bfffb6df39acd25e7444ef6","0x427912304f97d34116f033eecf6929e20c31a3e6","0x429100fffc1b37b4117219ca3f831a55643d384f","0x42b89ae22833935bc10e4b2eedabc9cdca868f4c","0x431431b7da6a87c08312dae9d15625a4753d354a","0x435e39c2093d3bc133715fc1ae18136baada81d8","0x438aba1f5b2abc4bb56ef518f1d42de454164a93","0x441aa3be62291d4c651639d823bd61ea44049ad3","0x445365e92f8d3b3c4525a04a8b603bd66e76aa9e","0x44dc3320ead2bd42a0f8c4abd980c568f1e40417","0x452e99c306c63c1264012bf036df034a8ee4b7e2","0x454debf212f4a30fbcfcc04c3fc21f33e2714c3f","0x454ef2831c463ec265010924e7aaf8b1e937bb5f","0x4620921a5e85acaec95b9908f42fdd8dc637cd5e","0x469bd2246fd4b94de0939c4e97b3bc6ded660fb5","0x4787a53a3e59f88ef5ae785a48cf4e81a165d6b6","0x47927b4e81a4a36dc1c6c340464fd8aa502fdbf2","0x47c3eb3dcdd524c2508da649d08f94571dcd398a","0x4803300b595e627c8167a8586795c4056c4fafd0","0x480d57dc208fd4c5a2306f0c8614621053b7c643","0x480dc8e2a679901c39080bcfd21d4f2cd2eef58c","0x4811fcb686708ed7712b5287dfb263fa68c91b05","0x48373b8cd69333fb65500f0a52e0f9d1a3188068","0x48c5be9c033d64af2ccba5dbe155a27663b78cff","0x48f9eebcbedb325f88ca819bbfd098ccc3522333","0x495833d72cb1c78c5f53e0fbafdbe18e012b2482","0x499bccf632e06dea6a768f84b764f4f721885003","0x49a3de1241d9cd15eb5615a4aaaba41ad4cc536b","0x4a38a0d781ed30c7f2f7decb3c2d933017deea49","0x4a5431099650f07e4bd35131499a8b26f8090ece","0x4a58c28f4ecd250c3b24792add4a03352dc3bffd","0x4a5aaf21e9baf9ef59e758a6754efe0d5fa1cea2","0x4b69511c0b077200771f73f3c7cd4ecd60c77707","0x4b98d7050682f26c0ff800c12826f03c58336c82","0x4c3d50a0a003e640e18b13e13c770d4cbf3e8ae2","0x4c4d89104a853540fecb617df1dae16280a0f19c","0x4ccd298f069f4305e842cd427bff649bb9209485","0x4cef2cf576dc4bcdf7a2a09ce457fd01cc50c7d9","0x4d04a3bfd8d9eec765412cb03a3020215ea58156","0x4da6643c5c6f36c326e679501f71b634d0c27111","0x4db947dd4c0c183df03fb38907839ad927e16cdb","0x4dc0a736d0b2ff9222fd6d347b03f0c010c5390e","0x4def87be9f22ad43cb20eb0f0092136b536205cd","0x4e72f7e288f7c1c58a439f8d101ded16587045d1","0x4e8c101bd3beaaa049e42b0db1877c9c5f90b724","0x4ea71d9b0a41ac87bed08ba19ff2e47a57cbec1a","0x4eb395694556a8b95bc4dfff47ea5babdf57ec74","0x4eb5c09f266a6681f3a7729cd4587cbb1ae3d41e","0x50060fdac9a4617bf64a16d7ab422ee439cd08f7","0x511bcfc958011b7ab9fd0098ab9a0667eb7f03aa","0x51bd618e74b4796585edb3d4ef17166077032a48","0x51df7b838a61d95b3f7508ac84316f4daf656302","0x520a6e36c86d35996c9a1d7c73ed9f801ebbbf0f","0x5363c32d81266cbe7e00e867a11462c3bfc771c9","0x5368fa588d7c6a4353b2b0a3683ed7a4006bbd76","0x5408c0acbb51ee6934f3102bcc1a5523a108ac95","0x54198623da15e0690e665e490c470391d92fcfde","0x54a0c58d2d38f39bd01f3a2761f3ada530001cee","0x5559720211fa37842efdce0951ee699fe20dff40","0x58addb0456871d27fd96d58c9efa0ad4d90d38b8","0x58f8b97a4ebb481731765e917ddeab1ac3fb200a","0x59311215f55b02f30cbf5c48aafb1d3307a91f38","0x5a03d04c2586699319844245fab96e47afdbe57d","0x5a343e35a472d49d50598b8f4e08e6fe5aa9aaa8","0x5a91621b20eb28a19862e6a20993478a44c65410","0x5ab2d1f5069dd2f9aeec3b0a8e923b1cdbe7fc44","0x5ae5e5278ce81a34b1fdfb737f7a6adaf8d110c4","0x5b191f5a2b4a867c4ed71858daccc51fc59c69c0","0x5b206e074347912603ee1dabde6ffed5108b86ab","0x5b7102185ef51982809c6d5e17d008d1dc272ad1","0x5be798bf258ac5319e74428a66e635df491de2b2","0x5bfdbed17075ef1e06fe13a6260e51c4abdd96b3","0x5c35b34610343bf51c30b3f5c590d972d9fae97f","0x5cce781b6a9408b438cd6b7aae486a6dd4356655","0x5cfc0af2db55938b879c5be94d0cd860ec2db029","0x5d3d79d8e5fca2b8756682a045f8ee119d5c4f19","0x5d5119df5db720fd12bff0d14096db5762f523f8","0x5d78037e90a0866ad9a00a3aa0afc7066610f1b5","0x5d9b1a54422dc49522d6a7d4eafb27091faf8171","0x5dc000b8060fca14234d8034326b73eb95c88502","0x5e6a70bce4f53a3f56e9047f1378d8eba6ecf79b","0x5e902a9ff6289fc5dc245e67a239fc01739a7332","0x5f0b23d415b82421780aaeea6362860e76e90a2f","0x5f6602f4e257b9836295c826c0a38260019b549a","0x5fbeff3e8bbce68ad8eb99dca3c38105eead9dad","0x5fff5a656ace8da161fe9ff71648321b98fe1b7d","0x60b17b6302d6fd1848e5328ddbe85fe42cd26110","0x60b83af2bc4f1f2a7db6c4c1d10d3da24f9e70eb","0x610409d24a2aa193d53ea45f9314aa54b9511dfb","0x6152d1010ab7f0b7fe1ffc866446b58638ed1d56","0x61555d49b2eee106aa5b07916e63969ecfe0ca95","0x615f0dd2a5717318917fb0d413e9248739f11223","0x61fc898bd97ab50c72780266f2d4ab251db07458","0x62756bedc2c98f80ce83e45bc9f8062345b65d8e","0x62c466f7aae3d51c48226598e66619c42cfead85","0x62d609d5890a01fc816220124ff04d3e5b9b1d86","0x62ebac26547363ce8211eac4ca4c255abe5ceac8","0x6385f783506a8e4917569dcf017202ffb5ea3e0e","0x63b67d9b4cc64bb4a1d773066784b7f5a6d27c8e","0x6475372b5207fcbc430a8fb98e5345a597236ad6","0x64db70e8cbb6f1cbb04154a378389f51b5c3682d","0x6586ddf4a8dc7002ff78a2c78dfd0a68db9c1c4d","0x658d777dadc32b2385655913dacccf70e687ccf8","0x65b495d9a24f5f10c73f233e25f9d88fa146b6bc","0x660bfb45df18e718264efe1f9f03b6e00dfe5be3","0x662018e6971d8fa89f707886aab59c5b86802735","0x6661e7afbe1bf703992889e9ad93832df60a3d99","0x668f1099990bcf968ed6cdcb29c8167c0831873b","0x6691c2af7d7eafddd5b1747b16c943ead6e5a928","0x66b7720207c04e5ad95e92bda8f8e4a0b19eea0c","0x66c3545900c352147ce00c6040adfd678c66e77f","0x67ca64e6d0a97bae9d85b6b005a0ccdd876ab896","0x67e0623132e24076b62e401efb8c739a1091c818","0x68662163a2e664f8f81a751463db74864eea7522","0x68ae8c25e9c0d2c245fa63434286765bde7c00e3","0x68cc876034e0a1f38e21b5018af131c5994c657d","0x68da0dceb08660d0f6a17fe8f8b8a6c9d161e7fe","0x6942b8dfc13c63b733c17a38ca4706be1f6fdb90","0x694a046ab2728d67365069af3093de18fe026c5e","0x694b09f4697ec0185722bc91f0b9722c5b57a632","0x69a4e5e84cb9ee053900a678bd845f644f5d2100","0x69aae96a220813975083048175926c3f1f19da16","0x6a5904d318d2820292876f97e3834c16cd7a16c3","0x6ab79ff8206f607a53a86f60e275d464351a3c8b","0x6ad12f37dc2357bb7dc19fe50afd2a981440aa99","0x6b3de22ec227d168dfaee06f1fc629b49eb73e60","0x6bb861e9363d6440fc2faeaa7883ba853c913d8e","0x6c85835c1ff1a30c839acb9e6b9bafe749424b6b","0x6cc52fd37374e257b80b8ec9dc8145cd1e689605","0x6ce2abaeb765337bf54c45ab3da2a0c60f3f84a3","0x6d1201947680d780d1bd9e7a322d7a0a7f6d83b7","0x6d40c602cf27bb690d4c7a8436b7868af347732b","0x6db1f499e420f43d9b9c07ead32e0695b7200b82","0x6dc9e5c4200fcdf0fbc6148eaec5cc9417295131","0x6dcd96c4c1e8b98c99db39d8c0b351a134631d01","0x6dcff558cb0f7c0e45ff7f968a68709250d6c6c7","0x6dd44477808e8e1a77b1f4bc10b32d01d7051597","0x6e0f74ce1630529e766f6ce0d6b5d8d655a897bf","0x6e159e0429ed6eb90c54f99014eaee0b3c287a87","0x6e3998bab30f24d0b7bb09a24fbc7105f3f2dcf8","0x6ead67d57f5b0cec890fa47ef8085a5e86a2008f","0x6eafbc2fa701bd8710466e6bc4c8544b9cc6e1ed","0x6ec24b2b96abbf08fc5a2612e29001b13e883d13","0x6f446e99e322593775a2944fcac4adb3e2518ac2","0x6f8b0d7ef9465498ef88f64ff5fbbb822113976e","0x6fc3b5a4e815bf18ee303fef81a4dba30974aad3","0x7021163e97179b328dc746ca9213174ca180df04","0x70817f848cc79acb114f606685e8751943fb02c2","0x70b3886f26bb60716c8e2fc3e5c0b0b0e87cacf8","0x70de1021e0dc0876ce3df2889adbf1aed381fc69","0x7118ba0bdf2a1ac06f8cee78fd6e5a86b159f2e7","0x7132949f1637e0ec1722b40f9e2e58f8b40ffbcc","0x7189e276277088fdce943ece936fd9ce7f161671","0x71ec5abfc49075e158b0f85575d400d0f5d7d3be","0x72cdc67f32a853fdab3440d842c215466480cba9","0x72dc63ccc77626f3dc0309feccb17c6ea7fb3b8a","0x72e9323a9e7ad11178372aab0e62f67d9ac36253","0x7335f905b4dd29d58c5afcb4f8d8016e1eb5ad9b","0x7350b22228aa71c1ae9ae5502a62eb04a2128d7c","0x739621ea040cf397a169047df2935458c6502d63","0x744c409f310c12d731b596312c59743f94058f2a","0x744ef3c4b61909432b88be78f0ce4f6de7f67817","0x74aa8b45270cb70719070d008ec26fe568625f73","0x74f4d373c24ef347ecc86609af00831d7d62bb40","0x752ecc81eb5bffec6366e00483bccfebb933affa","0x75a70b3f24eb6f32e75b53fbe9315111d05851d0","0x75ca62210e38d111896f6b46d47201d6bba9f4a2","0x760dfc5f7ef070159d9106156eb8b4e27c11dc1d","0x765af8f104ec655a4b421bff2b66b96702ac25c7","0x76a366289781477ac1a181d2c346cdca244d6cc7","0x76e4dc8ffc318b45518774a57e4277c98ec197ac","0x7729de7dad47e5c283c249f2c21a64f494946723","0x772afcb40272cf109c4952782fdc4a17bb529917","0x7742b9643958770ea186b6e5a0d67b42fbf2f0e0","0x777ad2a02d28f1aef023aff6526effd7f6ef499d","0x77965bb2a20a91b7d476eeb5b25e450f476d3281","0x77f6c2b37d38fb42c0f27ac2ff52190805ba46d2","0x783fff4152b25150eec13c19b7b9546301b75f9e","0x7885948abffb2ce9c3efc3075bca1796ab7c63e1","0x78c64ff0d6f3a3419688bb2624231a43e842365e","0x796b0389b596c35d40ec0bef393c46012bff180c","0x7a0584eafd56e980ef74dd053802b832eabdbbff","0x7a3578d9007485a77ab90ac4b94bd8d8e55d67f2","0x7a5c81cce0c4fa27c94dc46427cf794987b0124f","0x7a7892b3ef64abede8348684ba57a37fd7edc0d9","0x7a9c9e82382b8a9df2291e1af44d47ddd9834366","0x7ab417afd459335213601f160dda165b789b0193","0x7b001b722e36150dc8820226b11fac792e49fbf7","0x7b0f2412fed45d8160209b0ad140de93c0eff42d","0x7b359142aa64654932b3fe21bf26caa57b72e2f8","0x7bfc4c5c47d2c2a7e727438d3e02fec0f9fe88fb","0x7c61134c814622b3533291520f682009811578ea","0x7c8206bfbb42171e2a620e16e669d79b1a800c27","0x7d0057450d0ee0ae7997077792cd5a6f199b8122","0x7d537213300571b3e2e020c0c5d42b3f27db3a27","0x7dfd5fec79cc6877ae6a62f97f57980fc99dab3e","0x7e13edf4cfaeead0d5f97d950897d0759e95bc3e","0x7e1ff6e9ea45b83d5992171fc20f13a07111962c","0x7e36f211736333ca3cba204181e2f49fcc828cad","0x7e5550abc321fc49c2e9d0a0425a93b1a193a841","0x7e6f169c5bdbaa06cf81936d5395340c524f3815","0x7e7aa18bd8664e5366082c9bba855a3486609f8b","0x7ed5bbd68063b7708e749bdf8a110769ebf8ad7f","0x7eea962086ed3ba5ed35c5aef8784bda29a22185","0x7f05e2326caf37626faa7dd542aa7847cb627822","0x7f0ca7bc35a0b45e25055fc1775631ade7c082be","0x7f592ef45d8c5d4f630a7b92ec7cdf470ebf5b5d","0x7f892323bc373ed7e7c3ba4e95f9838690d7e0cc","0x7f8e64e458b3699dd96d4d0ffc167a7803bd6c18","0x7fff30cdca03629e4b47ef25bd0de3a82b5f6c93","0x5ffef06d2207a8ceea5cd704246861b9a3345026"].forEach((function(e,t){r+='<div class="address">'.concat(e,"</div>")})),["0x80b759f0a9391e64351e6b94e32c384a40d96b7d","0x80bdf29f00a508107d02d30d1ea4125da38b03d8","0x80e6a290dbeea137970f779900f87f5e34f05f6e","0x80fc46fc85c32e8f0b89753549aa7ca5a9155957","0x81210106806bcd45df0fead7c5226cdca1b5edab","0x81a0751be20155bb1039afae1e3f8992f8bf1b8d","0x81a7e8c827286ac78e1b669bd5f1dba341582edb","0x8219a3bcaa0cd2c2d0ec16524284bd5a80502ca6","0x821ec1bd94fb961315cab6a1f9b11d506d68de12","0x82340331ca670b95a02d433237458aa05dbfb64c","0x8257e8d24f1960de1ce366f7704c930ccac09716","0x82aafa5136bdf51d6b63ec38aa8ce89e87edaaef","0x82ab6ab7905a1a03ed7c34631e5448fffb8c8293","0x834fd28b731e45d150d4e4a1deee343da04f47eb","0x835649a4ad9c806405b03e39bfcd02d6e81b408f","0x83aaf8cc72bbfaa434af7c6f0a8aab9b581b48c5","0x83b82623d62e4620e8f62406c15d42e2cfe1dfdd","0x843fdd402952da6e170497e40bcadccf704e1320","0x84c191dcfd652f6b1012bde262aaa933a793e56f","0x8502adfe5318f0b302b26f3ca82385994a63bb1d","0x858e6ca4fad8b103f97b2cafc1ab181b1e3de6f1","0x8596baa4ed3c95ac55e73a2f2bdeb138b428d54d","0x85dd36038eacbeedf785927cde2ac47fdb581032","0x863ad0c4cfd3fdd2cb435d186c3477ac95e8029e","0x8667e16238752e6afe8da6a68ca92ff5e5ab5253","0x8669d2a4a5c5ef2c1cb3a0f44c527f9ad73e5d00","0x86c4b6000b6f5c8a213589d7f6985d77ff1cb2ad","0x86c4f1983ada6f36ff56d8892be6bbaa21decd90","0x87227b608f9ad95d88da75e6813a8dfdfdc9ddfa","0x8727b0d5e43ca8525490962d33d5eb9c6d554ce3","0x8975a0910288d04fccf16a3be8f561cb6fd7e90d","0x89cf691caff859ec99432863516824bc1325ab26","0x8af39232099b1732ab876b2247b9ff2cb038e285","0x8b400882263dfa8c1f7558a6bebcaa37622da3b1","0x8b9a45071aedf59f57da339a90b57ee2796abff1","0x8cf947b055f1d95bd10f9f69e23a38ff557656d6","0x8cfd525eb5f38195ea5b6d269f0dfc36cdb4e953","0x8ee58f10611d0371fb9fd388d1cb8497c57a7331","0x8f1ca7b7689b75db9f5701cff07dcd335e7774cb","0x8f39f0be19fcd7ad14ab4890743ea5c046f4460b","0x8f43080660760216fb21863f98e3cfb079215a61","0x8f4b3c45c05efff44c8af8c5e506054cb7a5c3b8","0x8fd76f31a0c7ed0588d6c630e0fe35154937acbb","0x90615bf436f18a824224d48ba6fa2d7a510453d7","0x9092164dcde75456862c7ac90c52120fa87094fb","0x90cf7434b764923c32a66162559a1a878530603a","0x90d39d816c50f719bb57c2a3f78d327659b1d562","0x90e563e070e201c134a822d651fc5c2fe44ba735","0x90f90ce6487c70a042a36e1487c1e506a936ffd7","0x9103644e4a493763de37d0d46d25b3547d17ae33","0x91221cc001724872ac6b6563a047b1a12a14efb7","0x91282d4550f3619e37fefb18435799ac2ec20b6d","0x9140fea79f58cb0558e8e171943abd74f1e2e4a9","0x91a35d0d46792ec18d3ec72e7fddd85653c385d3","0x91af56e2f6e58da67054310295421afe034c1246","0x91ce2eaaa0ae31b8b109e4a2038fa7ac3e83034f","0x925c15e3e3b1a57b94dc51909b9891073350b653","0x927edb33ab70071a2bf571f287037d18a94e5e4a","0x9280b633f45eaced5a0129ed853f264dff8b6d63","0x92ab3c14a092a1852973a3a42fbb05c6c8dab79f","0x9329c98e8c09031f3228ed44fcf8fcffc8725699","0x9346a5ec7bd8f5993e1cb68c4890709671ba4ff2","0x93628e1326df23e742e9ffa25aab350f9ab197e7","0x937d55363c487dd2ae6a1ef77675c394e32fcc45","0x93f3fa9c721707cdbfccf4a4a3a01df7da0047af","0x93f4db584fc56f5dfd2a16d0040e045fc4511cc7","0x94b52ce06ce6b5d4220491e7a1deae36d27ddf71","0x94c62922a83da3a258666719518678ba18e9e869","0x9542cbaee99cd2c18cfe54730a5c88cf4d0bab21","0x959a80a8ec49af23d3502fd50cd8243f09286061","0x95a5f38b726dbcbbaf233f318b2bd711159c6ec8","0x95fe31703a15aefe22b2d4638ec5ec03d8e514aa","0x96593577d6ff8feba6bc2b2feb5811bd1442304b","0x968187c08a42cc32f5a5652a9083691173e1d492","0x9692ede6566b0296b359b9bbf66fb8a23de32167","0x97b102e00d88f02debfd6b1e4b901dd6931bb982","0x983f3fbe0abd51484da4d5f076e199b5bae03e13","0x989842bf1c679dab41e06bad31139272bc1ad960","0x9924b012a230776408ce8d3863573657140f7a8e","0x9a97a784f33b492ca0faa884cf9629eebf0bc505","0x9aca73f166d46dac8afe9feb57045a0edd792dc6","0x9ae8d8ed55aac2edbf8b94c5ed81c69f67e7e906","0x9b06a34e264336b1e3ac292c211a0b4b3e1c8fa1","0x9b5ebe633fae7ade637af998d2099dcca8af4215","0x9b795c57aafc2e20e57c4f6f29fe0b55625cbe4c","0x9bb07e2cf238360c373689d66d82ad2492a749ee","0x9bce3aa6f5d938eb5e60632777385f7dfb5b5a75","0x9bf7cc7c1217f97308f7e50c11ed731a3f52ac75","0x9c62088c11af7f9630b8c8d666127f6dcff0e1c4","0x9ca23235728ce9ef5bc879a9abb68af3a003551c","0x9d401a9c0e1481810512ee2b5b54a9ddbb360d63","0x9d5a852240770e6f0538ed6bbc4e366386ede52c","0x9da1701efe0369ccfa4f50b347ebebc626d66134","0x9e80d62ab4e0f13444914a685c8cefed8a7f2f78","0x9ea0749cd68c88034f52b4835b467308376dd84a","0x9ea83a28f16d2d4e37468eeda7a15d41c6357c9a","0x9eb1a2cb2ea19336006e49c16d0a2b0c296e1413","0x9ec568e0566f19912c632a99d8dad5c6240c4e4d","0x9faa1d30f0fd9ed130ffe3abb6b4cda16e15a05a","0x9fcae73fbf4fc6283b636f707c17529c2ba7b684","0xa002b3f5cbc5e00d0fa17b29ddee4f1a6e9f57fb","0xa05941a77dc6fc50440de6e67bb7166ae9a7e428","0xa0d751cae2ba4d1c5f2566767fd70e6130729667","0xa0ec32d109bd544252848596d291348e62e660e3","0xa12d205d2b2aef73089ec2b8bd700789489742c4","0xa167efb805e22407390a525e970d9de2e818f14f","0xa1a971124137d0f8eabc36f473a5668b8d86dabb","0xa1b1389dd5f571352d642d39be702b71aa9d3fbd","0xa20d33f08abccbd0007bce2852e0e545b584cecb","0xa214c3dae6cf372db39f219d6a8c788044db7e2b","0xa2165c20395f602b1bd91a6f311858386531ea93","0xa239a14afd3448161efe657d5f93c83d6cfeb57e","0xa23d2bc20ad9ae652c58ca4956273ef4d06dd489","0xa28e586e24e6d78d05e822188ddc118ac2fb034b","0xa2be0ef4ae2e20c4eb6f2f194b1a78bc71bc376d","0xa314921b83db11d8139eb977880809b96bb09d1e","0xa3795ee3215258f223349fa8a079eedd8b174e93","0xa38e734035540001b950f3a9295e1bfa85de50eb","0xa3d7cceeb6831e8d80637e2e490fff7b257fc3f0","0xa4117d4a882c1a569963f42dcf56c8287442a99a","0xa43589fc8f89f02ab33f3a96de1601624f7ee06c","0xa469d886022025b08de50e1ef8cc2209bf0d7c04","0xa47e77fa3bc838d8ce1514de2b272231ab07e34a","0xa496e24f30e778f75e21e5842197c3b609f95aab","0xa4c350f7ee6d318215a76a22d6d1d10d62cd2137","0xa5aa940b4ac3f71e86a36ceed2ec65325d163954","0xa637360862d3889b4d171b33cc587a22baee6fee","0xa6585b22c2c7c92e80c33bb6620e2869bad08cf5","0xa6c9b5696cf6edbef25d941714ce1bfca544f3c4","0xa6d674cb39567d9f03a882eff5755f2307dcbd49","0xa709f05606a95d75af8d8a3e36dedc0ae74f598b","0xa73660448d30b1a14c15593f004ca2df7a8de0f0","0xa74974367597159d97442ac54496f3f2afd0f984","0xa767e4c1365323c7a7823206a3e647b97380799c","0xa7894d97369fe4a66d1f1c0596e5f7c60117502b","0xa7c63e27c86aae5b1f558a45a4ec1a83c3e54d85","0xa7e5a837382c4b2a484bd2afadc8b5a5f6d74e87","0xa8085e19e0cf43652edb0b32bc10ea13f545d9c4","0xa8208234cace0fc629ae4177467bb09e27e7df6d","0xa8804df6f73782fdbe5b0c9bce43ef12183cff75","0xa899c645381fc951bf764c3594cb6af3a2534380","0xa942533ecf3b410e773f9c6692893f338e39aa1d","0xa9cd05d325d9faeaea0faed9efe01711e7c4e956","0xa9d1fb515510474cccf71bc8fa6f511b262b4045","0xa9d885dd4b6277caa830dc49dc5a8dd8eeb6b64a","0xaa51734bb35ca823ae5c8606726c62953c8933a2","0xaa753b07bd6e763867d508048018393a3fb5c230","0xab69b3c138e9252d6b5f0021240620a2e5e40524","0xab94ad5b4e71a160664f3aa86df61b364fba3f00","0xabaa3af313d8059d82b00ef2b6e72ab14eedc680","0xabfc60bc9e4c0c158b74fe045f0aa12e3debe64f","0xac931bbbc70d3b0c152de83ea4930260744f4d06","0xad5240b6780555e4a177c39280f2fa6f4c87c2a9","0xadb9a7cc511ab7a81a24c8d85fc6165a93567b87","0xae28ac855cd33d4019a4aaa26d4fcaab00c37b89","0xae2c61b70712520a9379ffc0d6850fd74196472c","0xae5195823004e2654fbc39a1a8719b62264c6171","0xae53fbb432e07a4305cd46ebf23a210d8298aeb2","0xae78517d081f15782a876ea0bb07096d6998c076","0xae85d9232b23fda93e481b831b0d3d4e10b027de","0xaee9fb881b178c164c5a8919eae013806bb9f049","0xaf49a9d6c202d6aea7277adf765096e6191a981e","0xaf507392d8c30afe3a467ec0379720ce0b4071c5","0xaf9b8f51802ed65f80f96d84ca6baae1b5f92e2f","0xafa76f79442cdea9eee862b1a63eff1018302728","0xafcd469822ceda9ecdb884766ed5219583e34872","0xafe019f6f74880e4ab83211b39d8b278744f6e9f","0xafe8fcf13821cb259b982008d4e2d90c93bdf3f7","0xb0e95798c439b0796cea52e380b545b1cbee72fb","0xb18b0a5884ca2b86eeed964c9b573598b74ef27a","0xb218bbbbb916cdbe26eabbefbd61c5a169e65368","0xb234f5c6a51b1b04a675e318a2209a6064cb7ca2","0xb25e6ac820428f6c96e3ecb6d64d9bcddf781aa0","0xb260ce46b192afb520d90ef253a1b3b0301a678b","0xb2e56c203881d609447b63c5e642379ac70fd7eb","0xb42da6073a45d89ca334ebe5ed015291b8e731d8","0xb46dd1a2aee6d757498ec1a31934e48acc0aa24b","0xb4c343d7b271dccb741588d83fb69d3504e582e3","0xb4d0e8be45395e72e9c1af25f59d854bc7dc5b48","0xb50bab0ff3f28250556fd6f030911c69e0c524df","0xb526852aa1bdcd20e3bebdaa640e6ec157d23c4f","0xb5b882bc92245398352c225d7375196f1dcd9815","0xb5ff53fdec916f39021cc5e8a84a89c0e7fe18f7","0xb6b6d490acfd383dcd296b316e81e767db4a7a80","0xb774b7a1095b99ce4706ae8bfc43b944a0019179","0xb7c877d5e555fffbe799a4604b774001398d99d3","0xb86f79e12e97bb484ee4fe7f3dce7aeded032e5d","0xb8b773eaf43ad51717cb653386427af91ad4a6fe","0xb8e38504a8f19bbf6ebf6d9f6e4efb1127dc2a7d","0xb8ee2a367c4e7be085b5b00f9a01a0935fa5ca6f","0xb9943826b76a11ff0feedbd3f53b2cab1ee0a61f","0xb9f831f19f94f09709cf75c757e5bd7a9a812819","0xba0bfdd660bdce11fd35d004556da799df3c6dc2","0xba29da594a4d959d32b549378b15bec6c45d8cfc","0xba85054cae9f3da71e8527367ffe4352df930383","0xba87af3ae788b0e97536592f49d8e2824c011553","0xba96a2ba89ea249148ee599d2bbcd669de94d4b6","0xbb31c023bb56d028db6a41338b60a5f07071d634","0xbbac6d7e6f7a0d3a00546ba5977e791d5622b834","0xbc0939b9b2cbe1e66ea4d0c9d81a57071148defc","0xbc19ea63e0749521c26afe71ce3b2f6b939b3089","0xbc3e272fa8af6ad5b75ded59aca6a9173cc1d847","0xbc46f94f79f22b6e2600b8ae79801b306cd58a87","0xbca920d946ccf181609d3bf39877385a16df8adc","0xbcb1584db935fe69630222e1fe20d4a1da1548af","0xbd44d8add2c59584c37c5dee45c8b8efb445ba4f","0xbe676a680343de114f7e71df9397bdeabe77551e","0xbf6e4a14d6b66e49b81e6dbd2306040278bae769","0xbf8bd0d0b1fe8e9322792961631c59eb248d97f3","0xc0741cb56a86ddd99e2a5fd0053c380fc1daf435","0xc0d3a8d939d8653f0fd8fe7a0646dd3884293466","0xc157ebd304ca3d25c0c690c80e371372bfd3bc44","0xc17894874503314905e99bb97c290af0b2bc72cc","0xc19543c278b109399d311ef57bf671585d2d1b5e","0xc19758964270a4e17d64eb20e946eed6359603fb","0xc1e8378af6b6aa2386012fa40290282d53e740e5","0xc290f9607c5e598d9b7f6548813b489b9382ecf7","0xc2bcc918533695edf778db941d8301bc3a9f6716","0xc2ea697505f6c53e6cb910de80c57ea083722c44","0xc3095115383c84030b71547f56a86db816b8b237","0xc30acafea2d005b711601fd2ce192bfcba0bab36","0xc33acb0c3fc2b44b2ae6d69ff6dabff84b3e15cf","0xc342313b119697f292ac2debd79192e75b602061","0xc37e705f34801896121b2da24327332cb7dc2ca7","0xc3c8462d6caebc894697a24030796a33e0c8b240","0xc3ec4a1e588ce22c85a58c790e5a75db076fa394","0xc44ad6546ec4aa311e1130055ee77211414275db","0xc52b32709966fccb9179ad9c3c794a2f76580f96","0xc5a15e32ae94d405d4700cd6ac7620f7c6f01ee9","0xc5af04edd873c4591c377ad47d13f2fffb3d3829","0xc5b35ff8dc087d09a9a802dea8efd8dabd88ca8c","0xc5efc0fed2a350fe0119d49ed38584e62f5f01e8","0xc60d7112618227253702ecab9eff4a8ce56ab02a","0xc62367a7ffd67a932a7950fa926a9899f0a2c69a","0xc632388da43dbb86fabe22e8dc4a510956dea66c","0xc65c48fb1f2ac66b106e7bfbf703e57536808c63","0xc6be020af953b4a1f27872348aaeb4501128acdb","0xc72f3c1a11d8fd137673796f91d29fe8d10b72ce","0xc736d9e06419ef52b02aa969940fd1da4fc9a519","0xc7610188eb55b700cf89d6461b1b559d6718bb77","0xc770240526d75bd0b5662d7b8d8aed9cba243d5f","0xc771d2f0f04bbfc9f243fe12ece0c16055d6cd6b","0xc7bc7edd3d12640616192b17aaa0c4cdbd66e9ac","0xc7c009c6cb1b4f2f147a5aca84a6e19fc8ad7b2e","0xc837899d2448cf5de4ce5e40cbfb30e3d73cf05c","0xc85d47c7a6520e390404ac13cc6fb379d23cb1f8","0xc869a312104958deb20583ae524edf43252baf7b","0xc86e15edf575c511a0d7af9552003edd31a03ac9","0xc87dbc752f7993e5da314541f8c6e36734baaeca","0xc89d3ebdb88724ab5295ecac386d3d25dea74446","0xc8aec25691ce21dcc905855c1162bf0bdce8cd55","0xc9201294cd69c65d9a00c038ba92982b9153aac4","0xc97ef8b510ef22d9194b9542c37e631777225b3d","0xc9b359a287a06a22bf8154e6ea0dea5cb0fcd8cb","0xc9c645c50ff45320c47fee44664b3ec37b93e027","0xca05da65c7f83a30556ffffb035e58bada4d9ccf","0xca4c17c45c7ff5e3355efd51d86ee9a3fe858edf","0xca7ee42b6a83667812a6ff544bdc7ab51dd977d1","0xcaaadda6c4f21f7b658e5cfafe21342eeea48476","0xcaaf1042892717a91d850b481422a0116cb022d0","0xcb62acfd962b8a412b152e72d8643d3d60ba2dab","0xcb7edf27e4f37ef3884c2e8aabc88790d51f0540","0xcbb592d7a8f5c56007634d5fd1e26d6b3e3aa091","0xcbc40bf02bedddc03dd36b2a6250fcde00c95d13","0xcc1d1e75d5a79a0ad8d1a5d8608d8d7e8b3c157d","0xcc65d65afb907b855b2e366f65f5df2c8521e54a","0xcc7203f89d87a26c8bb4a6101a01b67772766ad8","0xccadb7e9bf311fb80e2e77a2fa75c4d00e67431a","0xccd7d496840ce0d7d47f37a6c407952644582379","0xcd56a103af16169c7ed5b249c6e20c1841449fef","0xcd67717950db3169e18aaf7ddc9887fe40b336a8","0xcd677598298bc995d5e9cbf006bb75942ce88f8e","0xcda114e4433e86fd6904b9d00be8244637732097","0xcdb90b32097c3694cde5266ff42a96f98128d4b1","0xcdf3531d5efab6bba12613482025aad570d88d2b","0xce4f23068693241d9579f0f889097a042b5e82d5","0xce7032d22218ef180fd3d9049d355a5024cce7ec","0xcf0387fde3f2168b623e3be42c6b1a09986402c9","0xcf41bf8a499dfff5fd25edee80bb5e51c27a4b90","0xcf54f040936df968bc7cae732903c926af3c0e20","0xcf5f03d5a38a41a805e078763c5dc90619a13fad","0xcf883f477e6c7ba87baa1312d73f1a46a7a5b6e2","0xd07bdb3cd7813df5446dd34ed52c4dd3460db4e7","0xd0cac792a8d1e276ab5c49b02090767ed5cd963d","0xd0d129096ee74a5aa705597b7032b46ee47b71a5","0xd13efd856f87acfb13432c4ead3a153dac4c3865","0xd18848abfa3747fb05038a287b763bc2bae9f99a","0xd18992db12494f18f0fd2e4a05c1596aced9131e","0xd2143b88b098bfe433292d90d8aa13dc0f58f69a","0xd280572f0f2e6386589aaea71fd87a1bdd9bf304","0xd3aed84a9d7c8676104b405276a54b5e02b716bd","0xd435d8a86ae726623fa723037cab6e290b924077","0xd490a652433d94bd3ad98eae707c2c7318a5f473","0xd518d11b35b0d9c379fa618aec44ba5186b57583","0xd623b57f3cff2008938eaabb5fac2e2265a12100","0xd6fab8562a4187b9dc03e32d701a7a7d1aaca5e8","0xd71fe01201c5f6a5cf3e4ee0a39c2a510255a66d","0xd79629e3e67305375b59472e48c4972b7b169973","0xd7dece5204b669926b09da4e5ea85473cf2d2ee7","0xd7f136be5eb9762034727e77c6d09b1f42e3321a","0xd7f54bdc3dcc865854ef72e0e38b1ddfe51a1b94","0xd8b3eb911e261c3cc4534b374ece6f3672d724d4","0xd8edab5e646d724a3e2d40d41858ea650ceaceb9","0xd971dd609cf44c60a8b80114db25fb49cfeffbcd","0xd9ff99d7d37cc95014c12f1eeb54cd935c14e369","0xda1d7fa6ec63004f43025731e63cfa2ecb929f9a","0xda93f8e08c439d7ffe77e0bce1ca6a8ab153d35b","0xdab6adaccaf60960e9b9c0c32c3c8c564f2db890","0xdb106e923031395ddc7032545cde695eb86c00a1","0xdb5f98d56f9731d265cd1ed771ecd4abfafc3902","0xdc11e7196a5b9c1b7c61e3351bca8215d6d2bd00","0xdc324433c9936c38c9334b373db2468719cc17b9","0xdce15d156ef74e3aa0e433b0439b6f91409cf164","0xdcff982963ee55df2ab68d41b50b9a6fde4cb7f8","0xdd14ab54cf695664bdd7172940efc7e3693b1c52","0xdd645db3b4895cd01edaf7848984354fa149c43d","0xdd7253d5030d3c4ebd5ecad49ae13dabab8b6b01","0xde243d9ac33ec3d329bbae465a69f6547e051894","0xde5dc85b8a951c1c2072cef8e0b72b912f0baa10","0xde9bd8a6b86f2754944e6eceffd6f7f02920e345","0xdec35dd5f3fc1ac8ce0c14a88353b99ffbdfaa5c","0xdf2593f626c4e859727f21609381e4f8f4e7acc3","0xdfda8ed37215ea5f15352443b9ceaa2474f8f6a1","0xe03bd3cc3c646ace450f740c6317c5afa7fcafa6","0xe09a4684d0481df72af26f2a210e64180db16a47","0xe0ae80c87b4b833bfff6cd52389746920913ae71","0xe0fe58a5b982f5feeb10cafc4c76bc9f9effa81a","0xe1442612771a25b1bfc13bce6f827ad4c75e6d88","0xe182e66eb47bf155fc384473697b948973f72256","0xe1e0da672b12f7d0d025f4b52512ab1678b2c7fd","0xe26211851e76370091004bf543121e967a56a0e2","0xe2ea0a384bb20ba4e000c64ffe9ee14f642270f2","0xe2f0284aa44a35cfd83f2946b767335b14347b96","0xe3120f4510f05666592d5864b0cd9b2a1a139b0c","0xe394f6de596ed18fa8298b5af36f398620bb3347","0xe3bdaa9ffc03f8aa3f51168c5205e445ab216f15","0xe3e50c0d809a42b361128efc478660cbe077fec4","0xe3f9249256f6c3987c520475cb6b1882e5bf5fd2","0xe419bc78d80a3689dff874e83cc2e3e9aa822f7e","0xe427865bd83ccf16387efebc0c1b1b6506d4dd85","0xe4369be6df50aa406db8212ae00cf81917c848ea","0xe45afe9ad8ff46108524414be5687ea3a7ce41f3","0xe4fe8492ab211e10175209160c9dc257daef47ab","0xe52da1186b764fdefa2ed05dd567bfcba7dfd3c6","0xe5a84dbb403f199586b51ad3480ddf9068bd8cc1","0xe650b41b32af0e642338fc5ca46e9236556b1070","0xe699da57db4886f6b2240aee33ac81ac43bea824","0xe72544fe12930afca5a4a18d48ec390ddcc94bc5","0xe73c8c4f440e6223172bdab5c83da2639274832e","0xe7525df6328557c642eb2d8657d4a91b73504a0a","0xe7736944eb074bd0708a6d02f4a4961c032c072d","0xe7c1db78d86a6ab2295a2b911559fd754710b64e","0xe861e92bb2ada49f2af17c4830a8f0f8f6578eab","0xe8a0ab3057db4a881415e88ca9f6b317974924b0","0xe8b1aac4c3ff77eeb26948faf930c9b645eccdb3","0xe8ea4a357b04e9de5dbd0ccb3d16e72f4954ebf2","0xe900903c0cd72ce0fff46edf936a5f62dff467a5","0xe9033f151edd1aef6a77e025fd10cd04af49880c","0xe92a7c379fae71fba24070a00f0d79e3577b817d","0xe966534f34e6ec039cbc1df1c3b5d18e9c32795b","0xe9f0a8030957fa13ecc1b7c01c92d9b056167361","0xea6f1dcdb06bd36ac1f8df137d1263446865ab7a","0xea90a2afb358a1d26d2ede65a35bd15af69fdb4e","0xeaa80a2bf835a81e04ef2199bf68aedcb2b74c2a","0xeb5dd4f80270242e7abe71fd951008b269c9d464","0xebc7e58735280478eadb480f7584c79ab955b094","0xebfaa8a9caabebc93a1eef9006b0ff440d450d75","0xec0a9996fec2f38cfda6c307c22c8ee7305eec56","0xec4976ef2c41aae824a6efbfe04fbc2f3c1a9d49","0xec4fef5a46a6b6a14a785ab8a889374031b6231b","0xec580b42c76f09216f1f177068ab880fd59c453b","0xecc5bea14144fb565fabd9ed3780234c8685829f","0xed1ca63db6eda02b140fbcd0b2cd0af09ab3b67e","0xed31be2c881ae9f91846e3d249157b9242ed7967","0xed4eb8f301d38120798e23cd0de5f3bc8e5b213c","0xed694315a7a63ce2283630c2be5083182040d0ba","0xeda452817a24aea26e6e90cd6f614c121a3fb014","0xee22ee448a3a2b6b8f01a45da1476e2d01e24f3a","0xee842cae52a6f77e3abadd575966ec2dbd61d9ea","0xeec177e86e93ba2c9e1c67312baf691a41c8129c","0xeefb745e597f887d6d1cf4e474134c6e71c06fb9","0xef2425952ec14433b52217368674d908900b82d6","0xef3dba55a6e07f8e6c06f483bc14bd4d10a57e2d","0xefb421f95f958011849847cebbf2edb182ad3cb4","0xf0029d065f6cebec6c245f1d97adbb979eb7dd0e","0xf04e04f02f4da915aeb512408fab8b09e7599bee","0xf152581b8cb486b24d73ad51e23a3fd3e0222538","0xf179945e6d4b3c56f5b00c6d80ad3c184ccfe0d2","0xf1a496317368b028c2578f32f151bd1745047b98","0xf29544ac8202c5b24d7a6c67b4a961e4e2de33ca","0xf2c95079e35a27c296b01759431e05c38e392a21","0xf2f01c54b21bf8d73e414200a8c9e1c12536d7ca","0xf30442d1d41acf211b9e294bb3c0ed11f03d0676","0xf306213d72d081f872c5ed8566bb5505b3e4be20","0xf30b1be86b062b2deb159df7265ce070e6a15d32","0xf321ed95bbd3776a7c7d6592d989fae98eae4560","0xf32838d9647681066ef040cbf9382d3eb55eb98b","0xf37c3fbe0a404f848c38a31fdbbc37294531363b","0xf3d39d852d513246c1d627a664d2e1bba94a8859","0xf41a10e5eadcf58a9ebf4957ddbabc364379f6e5","0xf499122e3453d264ff2360531308bfe5580759ed","0xf4e4388e34342a5f2c8300efb2223fcff23b2256","0xf519b290b3019889f1c5da98e4408ef502140cb3","0xf539cb2f1093279ce1509c89cf229b54393a8546","0xf56188ac23c57fd9ccc55ea76e542b86e46b9a51","0xf5f8dd66f5359c2b8e2990be6d6c0bc762d5e575","0xf5fb1cca28137c1bf274660bf49cbb6307fcb778","0xf61845a86282d63be91b5b5818abce5ab2cc8a9f","0xf6769fbe1ece4e9e851c1c30af8fbada0d07d84d","0xf6c0dd57dd4db03cc898ad396bb7c8ceaf554d30","0xf73d5f6509c1369242dab42f5bcc255edb1cb19e","0xf79aa684927b27175477b2d9439a9e4f819e4877","0xf7ba5c25bfea681b29a9326359314ce66c07d5c7","0xf9091ba435a41f0d461d896cfea6f5e78ffb475e","0xf9560151036625c0a0a49380bfe38f0384e20a2f","0xf9df3fa78e095b560555ddc03f0834781727fbed","0xfa4e2a87c2380f41539133a8f5dc275176fbb4bb","0xfa787e81a06019c92fd70bfee89be38b07171725","0xfa9e56b3bb8de6f9ca2abbb4d8b7c88e48ea454f","0xfab71b789653fb120476f5bf51d32e69c1f495b4","0xfb07899adb82676956440d8efdb39f97a131c3f8","0xfb77b72e5ead7ac452deeabb39919a717a5b77d8","0xfb9025fc1967bff23da9b95aab2f0b5679d4ede0","0xfcd69b45f3620a56dd5d6bd166b95a69d6ccd29c","0xfce0413bad4e59f55946669e678eccfe87777777","0xfcfaf264c820a06027a8e3f78761829da5073965","0xfd432fde40256cf0afad2a9353431c62f0c0f8cc","0xfd61f2b20e34f06243117338df3f29d8c4657e20","0xfd8ee0bb372c48e1ecb4157d41359e7d70da897c","0xfe368b52cd9e985ef47b8113f2b4543c5222b311","0xfe8b1168fa27a2a7b0228bd30cdf2dd3a991e118","0xfea13addf5d01e63a7a015db13f691b6f86227fa","0xfeca43c1d638e70f7ab76df1db480419eab9fb28","0xfedde14ac70ed6aec56f955d204355196427e09f","0xff2ba16fd74389907f4e9ad808ef6c6b25e7e5c5","0xff36a97ba095c69698f8e1059b17b9a061732ef9","0xff4a016b08caa88cb42b72264ccdfe6fb892efe3","0xff8f6f4accc8fe7db1940f9799e4e7ca4f476616"].forEach((function(e,t){n+='<div class="address">'.concat(e,"</div>")})),["0x0079eb5d976cc513b6add198c8bb7fd6f47f3ded","0x00839b7f009017966ad34ffc656eb62523d304df","0x00e9fff5d7a833e83cd6eda4e73443ddc48abb1e","0x015b9422b7822a3913915fc84fb710cc56a0dfd8","0x016155b2dcc9e4828c50674e3e24d488f847e3b5","0x01d7a98d738e571b48070ec7a84d2029e7fdcdcd","0x033836b8c7c03647621fcc2d84ce8c0c39a26b05","0x033c831b6701779f6c503471901c6b07ba68b5d0","0x039fdd26513f05fdb56b45031c5a26d201f2d748","0x044d943766c5370d466e666ddc80fb160a800015","0x049808d5eaa90a2665b9703d2246dded34f1eb73","0x04c1c15a1554891fb2dd7c4939e7d95d06ee253f","0x04db4fe56824f83692cec5776f0779f27fb2e047","0x04ee321ee32021c6607a5e6421b3e09008bebc08","0x05377e8833340628434ef89aa74464a4e10ff2c9","0x054f2aeb6195dd48990c928e9b890a3feae036ef","0x05610f81b1c013d93395a831a87126760650e817","0x057e951678c8344f95628da6b5f3827daf8589b3","0x05bf3be79137365b0839254b7b47d846edaebb2d","0x06b6f68670f26a140d9bfce83d2bd3dea672e3ab","0x06deeb0fd82ee006ea10433f1e024160619e1422","0x0743c080ab509b7f2643db1fdcd591e0d6051daa","0x07628cdd664ba384a3cb54462004378025611da0","0x079fbccd9f57c38060bfd02ff17ccc7be53c23cd","0x07f63d15a3843dbf0284359e4326e66a6031e2d9","0x08066b76c7513f1dc2e405939e215c7443231d7b","0x0854301c8bcb7de95101c74ffc22b145015e7a68","0x086ee1beb10153972922fc4328170ca52a271ea8","0x089f2d56d39f3b79bd1a1f520259a36896eef9a3","0x092bb2154499d79ff6741374dcecae3b71fb767b","0x093a7a7535701990805a768de29e2f3a4473b1cf","0x09ad2713b8944c8f01997c6da240baa035c8ccbd","0x0a25d60c7294d5bae7387f3114fc30c1186e6690","0x0a69420b3ce18e166d0f7f1d8224212a19b251ed","0x0ad5027bf85c2d984f722c90e0e2d99f960a0d89","0x0b24dc8537340dcf4ff89f522f32ceb6395ef396","0x0b954316dae976ace03382bd7a81c62ead656c1b","0x0c2fe3108f1f5693b796f054843aca2b64ef5b69","0x0c801e6087f05291057147376ae78aa9e63b2300","0x0cbe26d99453ae4a72a9343a697cb4f8669c6c80","0x0dd3d2c271d7d534138675db6ce1092d4d59a71a","0x0e03dfb967edc8ad751b5ae31d27547b9b07b5ef","0x0e7b9ce009b1014cb1fac27a69e46b2eec84da38","0x0f08cc35b12d11a617756466b20354e4a9be3a77","0x0f10375515be5bcadd6782353bbbef21d0ce985c","0x0f5e3c3c9f55a2557da91908c2aa9c688220ecff","0x0f651ec1d3fbba195e06478dff2bca215d653e63","0x100447360303a97c980e758b45ec96377ceb1f24","0x11ba1f1cb9d2b13de813457fbc82e7e17b00809a","0x11c54dc71f782094c2f059684cf6066589d3ba07","0x120d59681f45eecabaf9a3ba0b4c8d6865213902","0x1259ba53592708adea6eecd8eb0b10be0d89cb8f","0x12c6c468371313c9b1512bdd551802635e94e91a","0x1393af6536e05754d4e6488fed320ccf90f10be6","0x13d2a0bd700610f27b0ce3c0238b9563206c1c10","0x1546b970afc85bb7448b2c50504be0c4640408dd","0x1568e9ea15f65a69b12e0ff4df3c21e747b51037","0x15c365665da4f503d9e6c0b2c79aa5c997347aa2","0x15cd1328b9fe4c05a9c668c2ff68a0d5a5d308e2","0x15d3ffac9b7d5dbbee095910db6380040222b99f","0x160de5667b9e251f49847fac351c16caa44f3521","0x166720672d63ba30a10ba606064e92d7e552f5d4","0x16eac9445a686ef706b146a93d490fa28b16b48f","0x170d40ec525fa42fbdbfe11495c47c5328090f65","0x17543a55aa8bf29b3faff59e10c528951954c7ea","0x17d070ce7da089805d10d6099e1a22a46bc4f407","0x183de20c42cc189127acfefaa87ee7c49168e294","0x18c2d34291326500e07eba84170add0052ca000e","0x18d5ed48783e4864b94eb9c6bdc042d96c46a063","0x1a23efea1f7be73e1f36677507e2d3b6a73fe9d4","0x1b44b67def7e5264901944ed940172a9c8829453","0x1c48ca819a3b2ef555223de007ec85eb15c8a321","0x1ca71ab71833ed9ff7478c647860a90e0a08c3f4","0x1dd0bc47a0aa714c7ccf9fe1c8f4070e085bb98b","0x1e214b2be566cc97803761fb695d2f707d360643","0x1e95cc833aa15a03827c77ae605ec943764c39b6","0x1ee5c736b3e81925c0680534527e86b71a3d5970","0x1f512addf482b8a3fced3c3ad04991b37b2ac5ae","0x1f9c2618981f3a51030a21391803f98c434d5c27","0x1fcb50404bbee6ff9b8383f34c6e174c8e86ff44","0x2010f0d8b26622f862462f76a92bc02c2ab3aca0","0x20564d3de7dd48c7fc717aa8f9f0ad87ddbd6063","0x2063a5502bae0ceb7c9c8ab8fc27b61f3d1e19e3","0x20ac54b286f6787003869b1e2f97b79fcdcc5bce","0x20ca412f9b5a6ec52ad2c068f619362c6c5539c6","0x212139306aa39d8848b055857035a463c2eb6bf6","0x212306e9a787d2b74b2f3ca198309380a5a9d7d0","0x21c9664134144955774cf08bcf934f042589eef7","0x227aece8066cb077bba73e08303ae091c652bd01","0x22a2964902e79ce63bdad987e4fc6cde6b7273e8","0x234d7c0858632fe0133a72a227bbd00159b7b5b1","0x2359e2a063af5b28a011483af708053d5ef8f24c","0x23c6188a898c16fb14c0e19b40be89e928d676d2","0x23e01e05aa1376fa3ac83c954816b967a7302891","0x23f9a100a25ebe03f663f9417ffd12428f711b15","0x2477a40f0e5419ef9bbcc8cbacd23bef96588179","0x24a2ba747e099de4099e2c10d4089b45e8522f65","0x24ab430a4e3ea24a685b01ecc67fb694b5d040c9","0x24d1415cc5f130f5708ce73aefa34f436fd219ea","0x24ef6a325a0e7e9c594368f50b0eea99f51adb76","0x25679e25318512b89d1376b18e3f9561daae1069","0x259D542b3507404Af5dBdD90432A64228639452E","0x25b7b8e65c37535a657e2ddb72979ed2c501cb3a","0x25c8276388eaa942f8c3ef565befc91d0d5489d0","0x25d98329345e90a9edf85ebdcc30c052fc173fd5","0x25f281738e3a5c4e44f579ee43c65325098c07c7","0x2615d6323a425a3b851dcadc2c2ae22272028dd6","0x2631029b7f7019ac7a27a7b135493923381cc0fb","0x2638dd18b3005c6edeb077ac9f120317f18fb81d","0x269fbf2aa791b17e56202f09f83ff11adaf78387","0x270f6f2bd050d0349f0ad81fb123bb0799a7d6f6","0x2755f07c0619876e01733338625f67730f6ff26b","0x27b524858f4646150696d5b8cd08c4d058e9b0dc","0x28141dc9447521ab33c84cf9257a0e46c073f794","0x28e672a29a5a059f5e7b84ef3c11e4d1019ac540","0x29bd5cab96ba39c037a4a01f78fee24362212503","0x29f050ed2a2644bb31837ac60e7dbfe64d7b620f","0x2a3007e6c55c4a1eaf68018b913181185b7c3e82","0x2a78ae3d2c048794ebe71c56984552483a35201c","0x2afa376e98be0b2d386aa09ffe32a7890d92fab7","0x2afbc4356bf863a029ef58875ad00cf6b8975a52","0x2c5b6570dcecd5b3dfdd62855cf94359d1b2a3b1","0x2cb34f0bf904f588e7a794c52ed46c552b0fb38a","0x2ccab11adbafa8fd2a04014dea0ee138e14fe081","0x2cd1de9846dd8236e6c16ebe232b7ab6472fa6ad","0x2d4104788d3776ea60ca32e8f87522d198490605","0x2e3a13e1d4c78bdf1904ada6dbb0d1a2987f1440","0x2e7552eb0526e08f0e6ea3d28f9296620bc0c635","0x2ecf0b742d8d9e54681fd200a0e55d7d57b00a87","0x2f5947a91da9dfcf6cc2e5a2a60ae087a540c3d2","0x2f944e3cc9714425e43a6f28e71d039e58955750","0x2fd6f509245ae085945d9710f54a955c06c8a036","0x30da457f284bf5e72d9bd5a0866415522819242b","0x30e40e470914d6cbc38ff19c2ef1d1467731e988","0x30ff41ed5cc8fcab63265d69cf43a884b6c3ab18","0x3169f86536e378110a8583e9f3834ef08e458ebc","0x31c79acbe36f88f616842714c599c920f9a35b6a","0x31e11bce49e482332627099d5ed2e455e28e6869","0x3209ef1116affca49d3a3f646f5921e9224d0424","0x3279132306c1fe366181a58509172fab0b5d7cb9","0x3288ad9b8e7d32f698ac35de51ccc18373e33a85","0x331d936b49511a81719e1dc0b6de78258ecd85e1","0x331e09e1efb62cdb1b9f9a7bf92d6f28ac00e856","0x33596f5b00c5386ebde2e699fff370095f68053c","0x33b39338577db9b513259580fc22057351fd7da4","0x33f8c8016cc37a7da4d2b699c0f008d6c10beef8","0x3439735eb520eab31a58b45aae98513ca158b7a6","0x345904891a163187784fdbf6703720586c44ae72","0x346eb1024c756b5eb9be31a04e29300a8badf77c","0x34ba976f202cc700586f9d12aa11a6a56bbc1bf7","0x356fa5c2b6e217b2c1d42a309283fc42561fd77f","0x36efe492ab7e91c17cbcadd94097d01559379c34","0x36f42dd3e548f721623e66e496a57c3f1fbf5640","0x36fcd9f92d79b45bdcef267e834e276f45f0d27d","0x37508968369fb97d76ed89ce18027219f65824b4","0x3780220f9869ecae387c3725f89679dc8ecdcb7b","0x3780d4b9977122cf52392ec07d5e5269dcebd479","0x3783e4456974b56f9dfc9eb7704342cc008bcb94","0x383f9e2d3c462f34d9ebb6c674d06bdd7c9466a9","0x38630f5c0a85fa3436f23d3af4a27763cbdb113f","0x386fc8c61b460d1bc73fede8315389ee2cfbb0c7","0x38be01a71115156edec961f893b6fee1d3ad71d3","0x398c70ae80129ed503f6c73af5c0e5f0c7370564","0x39aa32b0552342201ef6fc0667bee4ca46263970","0x39b0b46956638d395ffb44ea49a436c8ca438cf7","0x3a2ed3fcb00814e325eadbaba88bb903047c3fed","0x3a31d9d9120013a2f1f55ce45068ed9ce4795e9f","0x3a41c922a3ed3c9e6b0a4ec1763fecf4f0c15d86","0x3a8419038c5c72cabee30696759146986d95397f","0x3ad2a8d7301d301817cbc7a88000ba729f324a8d","0x3b061104d9e9da05df48d73c059be04c0024590f","0x3b5bee36fec63c9eac657b99f4638c72f4e51357","0x3b7318457f091965c488dac7e58559993e4971de","0x3c11656a88646be05576c456cf1ffeab690c17fa","0x3c71ebe6840d6ef501fed6221f5e4f45c062c864","0x3c89c28de5148377e7f806bb12677d6267159ba0","0x3d03291f68358cd14d0cbe850dd14465431200ec","0x3d62630d9e1cc40c168ce7acd334c608276cf11d","0x3d7371bf02fedc56e742baae3c09964827edcf2c","0x3ea911f1a11a1894c73a7efede30328e78cf9d39","0x3f3b64fa895e6e81bf7d4ed39cfd12ecad3d9f33","0x3f8ceee4f53d8ffbabba13e3e90334c6702a8440","0x3f8ea8d62e117bca3845760e7ea75e977df955a4","0x402824c43d9b95c3337892b4d39f4b222a46cb7f","0x41b670b34523b20f58d6b1395741425f5fc1edc1","0x41da60e3fdbdba213ee316635d854da4ef77f6a1","0x420922832ee49545e09af4896d462fb0501066b2","0x425317b10a8b81d45cb56dddc0b15a637f218858","0x42dc8eec314f05c81c495c6f8ce8f8dd6795b575","0x42e04be7efea3e152347a78f510a51e8f4698f76","0x42f1605c24c38def2943142f3cf03ea4f5489b30","0x43f5fd8c7e64b4092be216ff5b3cb43231698f1b","0x44df5bedd373e7ae7e93a8e4d4122ead2a4ee472","0x45aed24e4c2d1b523a79dff802dbdf596572cf50","0x463b0e723cc5bf3623dace1f692dff52ed49ed52","0x464c07eb99995b44b8cb67cef702f59b8ceab593","0x46a7552be51f4e2beb6c595ed52711e4c5f7ba6c","0x46ad7a9fdbd2cbb33f3db8b76bba7dfde88f941f","0x46ea7f5c3d03cebc68915a1acdc92f6f56f23bf1","0x47747a55f23e768d50b041458e18cdcc35eea833","0x47b4d3546892237c55bcf9078b10b6be5e922551","0x480a2e76ee81897711892b75dace053d22e1c290","0x48698b507747eef21168e44b380e2619191ab130","0x48788252ec154730eeca50b0cef6dd43b757f9bb","0x487944d8d5c5ce50600967d9c47982e73708de59","0x48d7b3659c1f93562205c97d784fcd13ea940499","0x491025393407ed348ca9ea841d1b82cf0b369358","0x49b70ebb91a03b6b67a89e383f0e1eb77de4fb0f","0x49f9307536739580deb16f2dae82ba0d25a23b47","0x4a05776d37b755b61bf1c6f9d681ae45bdc43f26","0x4b0898b36cdcc9d0eb1ecbc87ba9ba066bc04411","0x4b8720b15ba0da6e4b223617a1d15f0ee9347d38","0x4b8a45eeff56ed07aa618d15f852bc23b23c18fa","0x4ba245c3d3ee8509e7470fa86ef921ad4a8fcd58","0x4be8086ce43a04e93e919be274e3cd15fb64d762","0x4c11b4e28ee88b17e11ca0c0f72fdb1f156a3ceb","0x4c78a07c85a4ceb0357eadaa6d4eba37edbf921e","0x4c9929111d9e9f8c399c07d7553a1c96b9830418","0x4ce7d126dcb606008a711b46c2d8df50d88e4244","0x4d0d19eccf3129557a537e90437a3a627fe50f1e","0x4d14f48f340e62f75b6e306b73d614a539a95bfc","0x4d17247380a4ad216fc1e05cebbb42f5a818d193","0x4d58b698966814b9ac52211aa196b08cf3f06327","0x4dd898b16506ee60b72ba961927cd2ad26f263e2","0x4e19646b2744021690f7da584117b083dc73a412","0x4e7654fa749cd589e05b28f64349d03e2282bc06","0x4ed789996d3c09e230ff3d5dc90b4d49b3b839d5","0x4fd4b42c5c17aeb9fbf36353eff9d4efea032d1c","0x502e7535b1e7a9698351358fb1fef10844e82c3b","0x5035cc6e16f6bce951807ed33e68cca951cc2b5b","0x5044911aadd74207a6a7b2950e008b3f27ca7ca9","0x506dc121f906159c9085320fad8c5c07a21fe7fd","0x50a0f8ddc966afa76d39a8c346a2d3ad9e591d1d","0x50d3867bf345b27f2ceb812142408e5d645bd87e","0x511f0c12772479204968ae6c988984bc08d7a2f2","0x5173afb1acda54a24fec5d474ce5775231802670","0x519e50d624fa85c16abea62fee7f5b233d913697","0x51c0ac97fe85b5bfccb7f631b49a90b0cb75de24","0x51fe1f2a9695e9d52d8c6743a08781c64ba776df","0x5257a189c782c3823791fa6a1aeb62b154dd188d","0x525b82244b74098082ac20916bc7bb592da3d96f","0x52c6d2a4c77f057c327816b2f5c6ad8c8b325f27","0x534be5ff046ce5e5c156090b57f39f37f73b1624","0x53a6bc4ef69da237c728935128c977af3f57020b","0x53c13001d390dde50703482c855c0ac930cac7e2","0x53cc62fe9d7d0c1642cec459819a37e6b095c6df","0x53dd188dcafacf67c98ca512ce1032031c7df49e","0x54143c1e28b2f54a77ea8fd046a939e3ea808d0a","0x541785b3c6ee75b4f14d95319e27e37ff379fe47","0x5447489df2e2ce3c7d74730fdef1f5212b2132c8","0x548bd646d0d2c5c7f79ebdcdb74365a5b032b1cc","0x54a401769c38281a79b101769fd5543260e2e8ac","0x55291a528b04b9f366e38a6ce1eb965fc5d67391","0x557447245b6aaae989e5191f13f037c8c8f63e67","0x55d8bb862f8084cc6264254ac756ffc7cb6c643a","0x55ea12c4197ad3d1b0ddb7fb35ddb7d7d53cb739","0x560c1a7dd6dcd97855f9cc4ead8f0c74ddceea7e","0x5675cdadcdf34bd1e52049794b5b70a8cb8cc69c","0x571b90ff189c2b9b5fd01baa88bed41073f388a6","0x57a01ebd0449c08da3dbc9531692bc0244291b57","0x57dd7f7dec129f623eb9dda3acd900be2619200f","0x587a533ae239db6d5efad5b9906a4a4b2803951b","0x58901db470b92c9e6bf25cca25bab50d90733877","0x58b02efbb922d6db49b1642e1ff9133300d84143","0x5905bb9fab89822c9496f46542334e3b1d20e853","0x5992fb8c5ef1e22ef742c5ebd681d693a7e50547","0x5b2a8b9867628cdc1ff5b285204ad9eb3f58574c","0x5b54f9251ce57440628f3a37ef8510453bfc1bb8","0x5b769ec4eca27386c796a075ce19236d05fdc910","0x5b97a6f636233394a59858e3d4a4e1698739e20a","0x5ba1fbbae044907b22b0f01a566d30a2e3401dc1","0x5c9a360dcf17d751d519daacedef8336e4780d7c","0x5d12224d75f9ae39ccdfa805e1a81dc9d64c865e","0x5d39036947e83862ce5f3db351cc64e3d4592cd5","0x5d920cc69b1ade6822c38b3815a45a4600b2cbf4","0x5dcec3d1410697f7d8d15378d39ffac86120c126","0x5e82370cd816a88628e0029db4bdad227bce845c","0x5e88f89f428495458ff99c411ddf77e177fe3f62","0x5ede481beee1fcce692baf31bdaf96290a8142d3","0x5efcf030649f1475aa93ef4b01ab127583238795","0x5fb0058280611b57e7fd96dc4ba3616bd0d29806","0x5fbb91b6f86c60f5b135e3f1871c0cdeb4f810bc","0x5fdac9911566521032b26f4466382c29ab74a3cf","0x60848b288b4f554407ae149656dba63909ea0326","0x60964766bb471e0c11dc763d1e603d2ad45f675e","0x60e2a272b6233d4fe08908bfa6ea44518501732a","0x61858bf584fc67bedda2cd244e9dddcefff56ad3","0x620828155203a098a74a23d64840da9a6083b9a2","0x62300cda14b11e06769fcda7c55d42a988489c42","0x6273ca89c39c8576611b3d6e4737e7814d81ab21","0x62b242f0365931d4b3441c745a66cd337e7122fd","0x6325246e88510d64dbdf10ca77095f06c5ca8735","0x633cc03b8f2b53d65dff0c20fd9ac9872c5d55a5","0x6359f52241d07b5dc53e6e38d42f2a46079ea535","0x63ece9430f424661c0fc7351ad6e71d4281b64df","0x63fa298d1650c6f4b8e856f8917c56481e9a0c82","0x64290d1a6af37b74a37c5812bb27fe18af4847d7","0x645b8d820585c8a3bdedb8edaf86ec6f2fd0a3e0","0x645bb87363526ee8000c380d83a602553928b4e0","0x64e624a2d03cad550fee9961bf1bc6a7643efeaa","0x652773ac0fa1f6c87370ce5baf0c72d8f81df00c","0x6527f3e9547782a9a368925685a81a92d97b8b96","0x6529770a5c58ca859558670cf98171f600c48783","0x656fa6bf18a53a24f62d29f69c5005d22d85c0f2","0x6657cddf937c4ff4ebea43fce9e3488fdaa8c12c","0x66663a76d9067cb005196fc11cde4758b04e3aa8","0x6682e331c36ace77d022517b2e78bb1bd21746d1","0x66a2c7b0d4da7e699f6dd27f89b49ab15b0a51e8","0x66ef83647fd6828e51299df2957b6658e6a1e4d9","0x674751bf36ac637bf53f342e7b39e9e3eb6990d0","0x67c0fc4b0490ab7e76c08c2bbd30fac0059bbc7a","0x67fa427f624be81b7ccd0ead5ef0f6a1a4d62bff","0x680635f33646c3BA83E6Ec9D7be500f804cDCfEe","0x6814330fe3ecf1e81aa91660b6e75d10a17ef985","0x68aabe3f2d4d6fba703f97d06b8ba12693f97833","0x68bd992d5feeb3a3030c128a7a5b0764ba152a33","0x696248b0566eedbe8beb4733a68410f4cfbc83cb","0x69eb97ef47f711545a9ca79c8633298661c80dad","0x6a511b9404f1177b2489ab147ac45e151df0c782","0x6a595f46a215b73341adcdb98f04d5fa442857c9","0x6af58ced7d0e5162aae77aa05b7eb6cb026ef60b","0x6cca27411c2bcf026d5973f98de573e49b6be49f","0x6cdd6a55dc9b445afb1252fa5336db1e56b8c1ca","0x6d0dc00d2585b76e1081b8ebbafaaadd81dd6ed4","0x6d590febf12912fa7c25ef26347e9a0c869e88cb","0x6d88611f1788064a28b5cb79bdd29bf587879516","0x6da7a4bf934a7d3f8b188f7baf73097fee1a1774","0x6dc330a7e965a1836a5038c26f13063cd1a9f8fa","0x6df98843544a45295f91a0585349040d3089059e","0x6e2918b14fc8af5581ccb435deae586674663f06","0x6e4d867b0b9da23d0b15e28d1ddc8f382e9e3a5b","0x6f3c97e08a8f472426ece1ed944d4e91356eb3a3","0x6f94e44fbda18b57546342dce8f05f56cc957372","0x6facbfaf5901c01102798568f7fb71b2a059b651","0x702d0fb384d24580e71ef101a4e2b72f7b1f2ac6","0x7038e5400cd2d26a3bb48a95551bdeefbd483ceb","0x7071a5df87a625eea6c25c73dc2d4c51c4d3defd","0x711102ee2a92f718b5d3a807f1b896b9fac7a2a3","0x711c877958e6a6476c1607261de10778db5fa074","0x71e466f31cfef866d2b887b306c883cd7d096284","0x71fedc462ae56223da650365780202ae0145f221","0x723b2494dea104c29b410d7b9ba44bdfbc57c222","0x724505cea9304baa8eec6bf4c7da2c93e0969031","0x7259387ca93f2d26c1c31d58d6c39002b2dbcef4","0x72b77f235560388a28814a6321cb638a39fe88e2","0x72be0aee75afeb770ae7565838fdda70222713a6","0x72f3bbf44d853bc8839145646bb3b6a76a614fcc","0x7333e0a08beacf70f04e43edf3eb86a8a053f64b","0x7369155c75455333e2995097980bd1c26416a7aa","0x73c92bd0f8cb887f1bfaf4b821ebd7bc480bf3fb","0x73ea5acd464037330004ad9b50b3006ef2ac6e2e","0x745207d4c3b9fedc386eec2eb5a6966f27ee6854","0x74a1b835529d251637b4e48562abbea146f913d7","0x74ba331c57896f84f0c08845904a67d82012bac2","0x74e797cafec0b717ce93cccc31f874aaae988d43","0x751146f9e2fe39ce2b1e15098c79ad85f600afd3","0x7528d4cd80e58c20110cf96b892317b318cc1229","0x756e68f85226e17c2ad9a36f5f3c81f88a01b20d","0x75b0b49e014ee30a990e302390efc1bdbcf4692b","0x75c63fb3e4329f330a5cc178ab2f50e2bc9736c1","0x75d4519389c97746fd57645b44d55f9034cebd27","0x7607aedb36183deb0474037b8783f31d2026a36f","0x76b3e3184175a690a41b8a3dfedf7bde382ae5a5","0x7705e2ab68410af6a7be1f5a75d143f5455235d6","0x77542806ca1574a7ab2eb4b791d57be1932d1b78","0x77641ad6a12bda8a093a8b13e026960ecefe52b9","0x77a8bc96350cfc939dd7e73d995417e0526f189f","0x7894da4f32ceb6a9c9312d637af12eaa2520763c","0x7913cf6c639760319e477f78c3ad68e463fed453","0x7963097647906f831ea7e0509813fea903754493","0x7971c1ea756aeda3e1e1fae6d48d86e5b6d95341","0x799a478d13fdfe58232c4d592f84ec5f52ac3427","0x79aa911b8f1dbb6e5edb5d12e9bf8365cc6b9e36","0x79fe7b208422b97a83abf30149070bfd7b096160","0x7a3dadac73f44a29ca9f93a28ce134491851f9a1","0x7a444a7f4a60afc4f4ff6c8ba158788f1f587eba","0x7a588598ea0c589adff8f873b7f56d82f3873f10","0x7ab73a9e3c1fad2ea01e71caba34aba35002de62","0x7aaa2b547bfbf5082b3111d6f84c388953f7912b","0x7ae07f03d2a52396dec1da9f27f4b7122a68fc24","0x7b850bb3b7ce30f60eaa92aecb2154f180c46590","0x7ba80c4b38e2bfe6da2649c4861b877096e3c042","0x7c0ed78ac57c08199d3505ea8f0863584103995d","0x7c917078fc1eaa17de762e2f87652fb75ae8e190","0x7def7c46d3d56dadd8e5bea7c3d62b71651136b0","0x7ea1ee5dd03c7109332e643be2e96dc82da5689b","0x7ea4066237ffd02759abd20e9cf6f8768b2d835d","0x7ea715eea52104cb3d2f6b8c5cb7e8e60cb7da3f","0x7ed33a1763a88eddd8e055fe974f812f82ffb5c8","0x7fa6657ca88a9b27ffad59acce4280ae84e20067","0x7fabdae9211072af08e315334cdbc84762b43e01","0x7fd14822f93880a47aa6578283de50573e7a9428","0x7fe23b29085dbd51aa43b6000a38afb0f10712cb","0x7fe595bd221c29281b32bb1d8c6b51e7d8688e69","0x800f10c9ca6699bd17f445e7df69e3fc44049770","0x8055899293172b684d7e399b5e226277e826e1d4","0x8076ab95158ef060fad1a817a7dd2790eb762efa","0x80d2537b611cde21d0528c8ffe9e14a1e6372069","0x810a1435c57f5eb24604bce9585ddc2a20341338","0x812be860ec8aa47cd4109bff840b15cc5034ed53","0x82422fc1ecc281381236d376cb6ec9cb12c2b93c"].forEach((function(e,t){a+='<div class="address">'.concat(e,"</div>")})),["0x829c5b4af03b5374d39626389b3814603dfca69a","0x829ce26f3d97c96ad1be529957e3fef90800e471","0x832376f39d77fc8f33e65042f685e80ec25e7353","0x834c6238ac0182b26e3d59f6a7a7a430f3dd0d26","0x83a1279d786ee5794ed5140575c2e0bd6d5073b5","0x83bdae685001e4699050742f03e2eeb48498b408","0x83ec7ec8284d833a486ce2c8122475667eb5bc59","0x8494ab34ad3d308825e1af680e402ce788bec7a7","0x84b676bcd8cd46e4b7668856eb8c35887e104b69","0x853e960a347b24143e2c7d317b5e356cc987a05c","0x855b21503daf4518d3d5153993ed1152f0f1d438","0x855bea49cfff9fa595482bf5888935fdb851bc6f","0x858c08e7840ab8b559f6e131e28130e5bf8a4167","0x859fae6bb0ab6d0455e0db42f8bbaf80790078f7","0x85d31c01afac54830ccde094fc4a2dd429167890","0x86096686bbc522491ffd5ad694929d6fc0da952e","0x861cef0fc4b2065d60e41ea12d03523617cc00d0","0x864ca497e15c9416af8b4235c8d570a86c857749","0x8671ecd4ec55149642b7199d3a3037def5ff36cf","0x86c4b6000b6f5c8a213589d7f6985d77ff1cb2ad","0x8714a644abaea27bf1c8589176a6fc0629fecca6","0x87364e1bf02ffa328e626271afcc12089917c966","0x874725ee43dc646a0780dcecfb0ac7bb05e3d887","0x874d7afa627c52e42aa64cb270f76645151cfd82","0x88186de0866efae2d784152568eaa73c64ccc0fd","0x88573b505e2c588c7c14c66dda0264650fd774ce","0x887601a901bc05b18c1c9a92d2c260bc130ee568","0x88c3cdf79f47ab7af8efcb081771487ff13bf029","0x88da7e82eb3142eb7e5d6d437efcb9a44b27f21d","0x88f009c0882b3dec0a192011d5314a641e2adcff","0x8947a685e1c2934b3dfe45659331720573d46d5d","0x8951aa74800cd6d21333d285f0e4e203feec3f36","0x8a013a16d19e447c8e455cd836c6003b14dbad35","0x8a7122101039e6a1464a17cd54007657a91bb765","0x8afea1222b9837e18177be9f271b922e0cec0c9a","0x8b36e7e37be6e10f7a24b0000b0602b575fbb54f","0x8b3c22a2060fc0667e4b48ad1801bca7a7d1f067","0x8be7bb5c6146d4d48dd50a22d27cf065e1aa2dc8","0x8c0dd33aefa9782acacb7f2bcfc813a504322109","0x8c475e667aa6c90a672c25bd6977ca6efd75bdcf","0x8c85d91e649917914b7aefd38f1aa6a4e4dae3bc","0x8c8ae0b57a65ad4b7f0e67f8ad56caf975771810","0x8c9c3070b31f8a55c85b0ae8ca4680e6211233c4","0x8d1e946e47d8fc24bd02d56c37ca5559084de8fc","0x8d560b3ba4d4cb91f7e1ea69ce0d652893799ead","0x8db29161bc34b8786931646a96ca82236451ce96","0x8e0c7503bea7b4eac750fa90f680c0d0537f706c","0x8e6B6C79C09a7694B299AE96E84733a696C6326B","0x8fc4b234bbfd1bb03d70ecf1710b9f51f6d36246","0x8ffb5c1d19f771a0484652e6e9b408ff759ff687","0x901ee12bad8eacaf76341da658ac30d1d3f6b88c","0x90ae5e849127eb80272e3020f22276ce47768d49","0x918fcb82cf8da371bd346d7674e5fb472c4d7072","0x91a503945eaf68ff638da328931f460893ef42d6","0x91ea10899678cda7a155cfb652b3a8d9f3485a08","0x92045118179fda2f62c98aa3b64a8b451f615358","0x92ec90d6e692d39b189308621c9b12f33372ddb9","0x93860b13312c1d5f34d49aa67a6f009c03c0ceba","0x93bf0ab2cec1dc2eb3538b9dced2bb7207131a20","0x9401d4e05a6ee105707709fb075306623edc4316","0x944fa3dc8a4de7a048394cff541d81c4a161d82a","0x952377798bd0621266058b5ddb5e338fcfb460aa","0x953e94453c8f1819c5b8c0fade5f3ec7c423d07d","0x9553da295680bcb59e5a15ff582877f62e304297","0x9615f0b30ff3f634408a1e9b4bc3e970863a33b4","0x96bc70dd34ae6e58c4ab3df82f496b1a0d316aee","0x97077dfd4d8075b9e50d10688c22b9b0fd3248d2","0x978362165ff0001f95503e7e10126d940cbaa31a","0x9806d0ba3efd1eb53f349430dca7db307229879b","0x98620a02ab5313d78569fe2197271eed7cfd1d16","0x98c69c7f4808866481a31f3b5df50fda0bc004eb","0x98e8109f769eff0cff8c252768c2d794d15580e1","0x98fdc93da473c71fc5d00d6a9cdfb99c6f9502aa","0x990f7bb51e752e1670bdc0b8b699ae8e49d7c739","0x99c87707f324e42c2b09a4a7c5da78d50f42bde6","0x9a815e666c62aab21dcb3cb9542a610dbf420fa2","0x9af5b257b8209d6008a2436594df12a0f13fb747","0x9b2a48514415dfd388d775b3bee32e39efc0f1bd","0x9b83e45a5be4868df666ca29920877039ca532d2","0x9b8f6a9c9e6fb7e1f81abde8b228f009dbae8397","0x9bd3016a6b443942c1ef38f2f3af1d428c247120","0x9bd9b0f131b51d9e257e221f7c474d56b1f75afa","0x9cb081e573f0fa73b781c7982fb46bd78530d988","0x9cdbb3c9bfc043dab2cf10ccbb14fccb252afe6d","0x9d26588ef577766116ac96c7e6b3557c19025eec","0x9d5c4d02a741046d9ee2cdc76267fae7cd647ab2","0x9d9cedd04378dfa19bfbd677d6c605cdcd7e4adf","0x9db6aa030dc6f693e1c41af3e2953e8e1bfc2394","0x9dd3d075226fc201abdfa5c48571e3dbf16a28b7","0x9f14bd5754f740eb65c518290ce09197842cf532","0x9f4104e8752b759951bf9271f954966d0731d501","0x9f74b490fc968f1ef947855fa22efcc49d14f981","0x9fa79f61f53898a6b09afb1fc9fb7704ff92582a","0xa04f936fa0c4f35dcc6981f56d57ab034fe4a0f8","0xa058d180bdefe805dda2dc677b50df01010507e5","0xa07ae4f9e2d41715416ae074c7a6fe857693de4b","0xa0bceadcdd08aa74c2606eb720c1af8d89119955","0xa12c8eaced4109a836011d7e88a4d658e03a20b9","0xa199e33992b24041df113635c1a4d758286d5bb7","0xa1a6e58bb4a75be25fa601e89459cb8d896b37ba","0xa1a9b32fd542320f80c8216a8720a2a7b6c40878","0xa2681bdd3cfd2ece5a63dae1523d09cb0fd1c139","0xa32c699132b7f0ab620590f217344df44b85be84","0xa339ddf8237751e287bcf39ae53ebfcdfcd38cb0","0xa38d48a063b70693d557e88ff058d4e25897e790","0xa4152f3c42af66636ddafc79e11b8bbe0ae204b7","0xa43c750d5de3bd88ee4f35def72cf76afebec274","0xa44af547c564de2c3ff00a0649f744ad91f52e5c","0xa4865aa934df282c7c50854988e38d0667b36873","0xa5704fa7dd51481232d02996478781e217f14e77","0xa5c5677c63729c5b53ec8ce465e4b154b1f82f0c","0xa5e6cb5915a768aa26a1e5d0ab04141c86babd78","0xa5ff0af8113ab75b8c1200fcf5e67ba3cf040cc0","0xa626aff55e18faec57e507bf9483845323c23e0b","0xa64e9b0a6901b03e0c12febfcd18b21f2fb83d7f","0xa7353c8653c15333740b7d3edad8b412d140cce8","0xa75cdeb01f9cac60ccc07f2b7db3942a1b4c9903","0xa7a123b111ed601a90816541ddc0d6169eacd1dc","0xa85943c4bc0f269df2731f875ca3832f7652e7aa","0xa8627d272b0f355d43cd25d323a7e9b370dca26a","0xa86a7666f6b09f4709d94c59abf5df21898d3f0b","0xa87dbb982008e26f3ec39258dbb69344631274c5","0xa89c688e956bf4bbba9de4e90a9f1be2f4fa1be3","0xa89d5e9801cf0e7a3663b85b5861091641f739b6","0xa8e9e4d0f213736b463ebeff5b92dc8ef873f772","0xaa2498eb77801789ffd2f30aad906aced9cbcc10","0xaa34c2c73048eede963cc8089f733d37649e3560","0xaa638a5426ad0904cc52e161b4a4832168eb9d40","0xaa832692b3f0b065aabec2fcfbc1a9939f086e13","0xaa91fc64c276e34c1fdc39156e15a261c408b3ee","0xab4bf3dbfd731705cf9beb952774777b776debb1","0xab771667b15c7b648fcb18499fe56ce94a20ec35","0xab78af5d653f8bb2b0b33ba0363e492f724c05a8","0xac32faea1894d8063ad5685d08a5411172e4d096","0xac431575c4d47ee348ce6d271c7ff1cb64442bb3","0xac70fd3058022ca9e1728e229673ea68810f136b","0xAcA9b8AF5DDb180D6FF6E4BcE7533dd76820148C","0xacba37679a7903821c8493f988a7171b27a21941","0xacf164b7bc01ade3c42583b04635f52291a735ab","0xacf5b8f972aa883722d6b47b3c501a2283258f1f","0xad9f9194c68bd83250a534a7da574687e1f102ff","0xade076215b97847526c031dc3dc33757de62fe53","0xae04746a5134dd8596fb05c9c6358e82de138ba0","0xaea1005a554c0c78231d0310631cea1f0db1bea0","0xafbfb7bb2f09000ff9d43ae124db084d8e4ebee8","0xb089a6ed58d34aa53d4beea84b98a72244ea2ed8","0xb0c3f6aec528b406c8c54a0fff5f57a3a49faa7f","0xb1399f1489c67832a1cca4ed124cb3bfaccdfcbd","0xb14a2843fce9b592048d1ed7edd939b3b1dc36de","0xb1a8ea6b8876ce8685c2d5c5d61385036bcc965d","0xb1ab255d5e2c1c2fbebe3596629a513ba9ee57a3","0xb1da2bf874377401cff866b7473f2a4390dbd65e","0xb204648e4467fd2e5c07634b7553f42b542879f0","0xb210169f7b8c98b03c8ba442906b7f9d6d4462d4","0xb25e559bd09e91f3b28f787c17530b2da5d2b5fe","0xb288090e6b2427e2e4b52afb0590f0f22ea0f6d4","0xb2a51faddd831e31d8b8594f786a744be29733c1","0xb2ee11060806ed93eb9e9cd89b425f5e4c0609cf","0xb32533aa64e513c68b3c79bb751d10d57f4665d2","0xb3b0fffef3397d7a3e85751ba5e7b18684f75131","0xb3c2471c028e254b212fafed202df313d4c8e21b","0xb3f48a4ff10e3b21d9e6e7f99a15247866806044","0xb47343e384c878125f8de007dca361a32d3b95f0","0xb4af91e789b9b0ec41eef93b44ce7bea4eecf413","0xb4b04564f56f4795ea4e14d566af78da54a99980","0xb4bbcd6408756dc719087cc4b8549ca73f110a92","0xb4ffecb1aa10758988b83f7eee5cb3765c133359","0xb5d2ab0cae9a8c1aab8527120308b5b8f06666ac","0xb5efdb84b02844dd4fbd378c4abe73a680ec6a60","0xb65e6425fcba02008169fc9616cd597d6c630d88","0xb6a6a6fbafcfb120d5de6535c27db98432e8bcb0","0xb6f898ffffbf531d545c3d169e029cc030048b6b","0xb711c62db3a995afb5cc26c3197f7ddc6b4981ec","0xb71e2bc7592ca3c0aff6b59a9e61a8cb3fee2945","0xb797dcb569cd0f9583c16f824499096549b4bf99","0xb802914ba42591d6e03aa34e37ef73f22370761f","0xb82033cd4d80d51f2769fec8b91156b0ef1022bf","0xb8507ee604c5c7937002e3cb2937ddd430051f62","0xb87f9e0868918e8bdac47bc83c5a6253d6e56623","0xb8cf513f7df90bca3bf35d706567825c6f7fd7d6","0xb8d2349d9e98040b7edb7b359135e0173e0160e2","0xb9baf97c2db7f2e2ff0a1377b3f6e646a4b912ef","0xba99926be550865a956febaf4a747ffa0648797a","0xbc6540ae63301e1af04033a1a1c5e34ef3029cd2","0xbc7a5da2f8334ed07d3c4cf26f4126892d0626a2","0xbd4921f4e6109a6cb616ab7a549cf0afd32ef778","0xbde59da9549572047ffd196e08b963a38b6abc86","0xbdf6ec1c2fe3b4a489c38e8e66af0e6b4e350916","0xbe19425f73f843a6e97e97fb3229c337d5f1d64f","0xbe73748446811ebc2a4ddddcd55867d013d6136e","0xbec9f774f12b9b370e9922fb5c8739edb019aa81","0xbee96173c3ad333766db277ebf6384fb17085774","0xc01bc2728960decdb6633bc5d7f441972cd41caa","0xc068a2f22f7c7f95c60281ae938b6970dccb5a99","0xc0706a8f5c509186d7f4977f53d2637930ace388","0xc0d773ca30871fef7c21cedfa60d380215d45a3d","0xc0f7192815c6f81ac9c155bf1f56c89de8f44cf6","0xc1276e4ac0628e88501de7f4f89123bdec57089f","0xc1603a5085f46c4c6f8b1a88d7eb590fecc2f7b1","0xc1d5547d9b644016b889510e4a094c22b6f6f070","0xc1e4c83845fbb84dde84701013072433abc9ed26","0xc1f793803346bbb8090a084cd8c64e057b9043db","0xc2b07c9deb5c6e4b74f0dd9453c7fdbbbbc4cb49","0xc2b5e6717e22b28c824c7581f3c39388eb90e00f","0xc31047a053e1a9c1ba548792c9f3b6f619428986","0xc32b7438b3df7844c9ee799930a2224fe6e26426","0xc365dbcb86abbe473b286d4d0c1e290b77b28bdd","0xc3f2ca4edc2275e0c1f933ada41d6930aead88c6","0xc47c1e1c624654700b5141b5e2fd0e6e963d5288","0xc4ea745a21c7cc9e6e7b2384996b6b312db8c7c1","0xc5822bA39771C774759Ee4Cf9010a6084CCC2134","0xc6743aedd9abea181bc81d80e6af4e1d00802651","0xc690e2f703c541251d0ba1aedb00993ca29c54fb","0xc6e3879bccf181d0c3dc4d925eda6afaf2b1f53a","0xc70136f393c147d9901c816ac2e92de7ef8eb43b","0xc769f2eef1d247b70240d0b6d243be9a046ce015","0xc7754ad9e918f2ff55520ffe76a7c358ec1d2b21","0xc8495c741afef91a558abf145afbe96a83ffee51","0xc8b122c3f31438f6cba3841b6628e790300c6233","0xc8d73e2c225b2291d6697f1f73a81e243cfd9864","0xc90f53218b8021d8369f57084fcd78f5c37398db","0xc92baf0d320ce18af4cff5795dbe6ea3a40e7c01","0xca04b1d80f0aeee157b341f4af6691eb4f3b38d5","0xca927f005b5b8d333351c481ab3246689c9533be","0xcb802f085a02d604e65fa9eff1c5b6485072fb9d","0xcb91840635ed62cb71579fc55b4b0165055b4f9d","0xcBbE207A43Ea8937A04d2f47A0FD51566C79b0e0","0xCBC83a731E2baF8C26507EF952deE6889770c6f3","0xcc0b1e3d129b54595a3e2096c1aa16e2835ccbe5","0xcc158cd1d38779a5ac9c78a6237d797fb9a97cbc","0xcc6552ab6bebb53a1a13da97100ce0bfd4074214","0xccb9dffdae3911889543e40ff93b72d91b0e882d","0xccee13c19efbce3449c1fddf2733556472280954","0xcd0f5386305a667cf9a8e0ff6b1c98ebd4643689","0xcd43e0c21bfa737afde548af3a80e20eafed6a04","0xcd4463e40b3d2858cfe449cc5ebb6eb53a6303d6","0xcd8e2ef83fbe32c81e6b4271dd39a18d03b9306f","0xcdc2c4b5007baf387a2a09cb2b8e43b38c447492","0xcdf80ed32e01bba48db89595ac040871d1808de8","0xce48bb7958253a5e8efa14b6775315adae09376b","0xce66389ac799547e77a28e1f32da38b491ad4375","0xce79d6f01e83023613f92c6e98b45489918a030d","0xceabed0e4df7f38d1609bbf937bc5ca30f70aa01","0xceacf4230c2df593e3130b2d73b614bbb6b087ff","0xcf4d8f04650764377d04277b3b07ff60bd70e13b","0xcf6fb2edbbfeee3238faa4358f12f1e9c0a47fd6","0xcf7538d392b9538b85a4b4cf10499123beaf9e50","0xd102414e9630b4388204ebfbedabb870ef88a90d","0xd1036faf90c4503193d287cd2845704fd1ccce0f","0xd10914b85d585b5fe085ba81c8df624777b15a30","0xd116fac0563ab7785d8bc6ec5f676b36b0f9fad3","0xd16bdde3c4388e90e3f640896c9b92f28a71bf08","0xd1acde3e5c7051ad407a12e47192f7a16b3052ad","0xd1ff49ff845ffbf1f6a1ba8ff4c7909a38768986","0xd206b9bb19cc50323e964a18df47d37f565d9dcd","0xd2725d2b609c2a090a8c358caedae747f1f42a53","0xd2a414c79fbc3ee3d8adc8c3d960ffa32ef73747","0xd3081c8bbc56ced89de090daf50565a4c5fee21f","0xd31e15811507f9e6308a0d9dbb3b0aaa60d69c4f","0xd3c3c4ca6d1a136be570016f6a7c283559e3f654","0xd3d8e3e442815a89023a89a1f077db66bd7d04d2","0xd3dadc71b44d390b28f54e1faa7267cc37d6aec2","0xd40f7683b9bbe7547a70b44603ba265e5d5df0d0","0xd4aE1C3Dc64371F6Ee619E328EF14a70a9298d04","0xd4c88a429a2ee72c92edc9d28ae2f77120e9f67d","0xd4de9f0fa7c40853146ad4994bb3a52615ffdb40","0xd5b9595b49e6fd3bb639ff0c17e64ba4dd665f12","0xd5caa8a47bf5f9a4a6b89d8306a9505ae8b999db","0xd678e9825e0261838b51c6b1952d4a45967f68aa","0xd6c5e5daa110115ed6fc5b62d7ccd2433ec63c92","0xd72d5f6c53e480abcfb030adc1adf25debe156f0","0xd76b29d1995200586aa58db8d715ba1214c6d51c","0xd87a666145b589f2a604be4a05eb20d109050d70","0xd91e89e68871e04d9ff8f56299810c1824a331d8","0xd975f2bf87333edc2b5510d2d7b65eefa1570329","0xd98de831a9da563243a70252a0c59f0946fbf4e1","0xda0402ae38ec0a808134cc990b6bd28c1f64aaa8","0xda16459ad529997b2f6b3ec232f4f95ca6f77f91","0xda3140d6698805aec58384f99897d9781bd1ac6e","0xda573972cb1d4cf5df5ff31afecb8f434f546da4","0xda88b50e9db7894b00c816789a859576e3eb2373","0xda8e703a378b491b13e2b34fcff41b9e0b6b6f44","0xdab9311032141e38e388f5f2e6f5365eb8f1ccb4","0xdad9ea8de6b159245648bf126e884e0425f3735b","0xdbfa71b513e22df96768c38f3739dd9fd07bf94f","0xdc00faa14901bc93c6fd3e3e49eb8b4cb09ebf72","0xdc66441f5a58ad1dd983bb0e3eb17ef8df530383","0xdc82b3659fd8fcb8a38b827865011863311a61f4","0xdc9803c9d1dae20bbe5e64866019419ae4225534","0xdcc047ed047efe5740fab936860bb666b261bda8","0xdde09c753d2f535882661abb41663b7bbf24bc09","0xde1f9cb3978be5a545dc8c383160ac1fb3626986","0xdfb0cb3393684ca1160aff0d087b649a7c560258","0xdff969438dcb83f17e34cc7a41b5deed3ac636a0","0xe019b48e08a238ebe9f7107f8327b60803a4ba67","0xe04aa993c63476faabbc92d334179321e38e421c","0xe073b5872dcdb01c6208e30e045a321f23cbe6fd","0xe0b27124a91b745df258c981682cb7bfc26d9ba5","0xe1506ea9d720651b4b4dbf4d3c2b5528d56b80da","0xe1891116b9fe32296c7bc95d9534b26145effc1c","0xe1ae152439993d035bb1ead71db3e663a550ccc9","0xe1ebb6ae67f99a53a1e1c987d9dfc1134a44fb32","0xe23cedadbba887bf6bbb6f161ff9281f6c39b5eb","0xe268f93e94514aaf5c6eae6c92f4049bd6ecaa64","0xe26ea9010d93d1ae4e57a74f5d11d4c11ce14e35","0xe2e1449dba3093e4eb43a0b7ddd6ffc508f7d9d4","0xe2e83df35ab973a52ce086b761c1673bd9d8ce51","0xe32ebd6b6b5c74d58096afc9fd99bffc79cd487b","0xe35483c045e12bd679681469a0a38445e228417c","0xe41df0c883d7e1f4f9df0b856cb14cebde0f2e21","0xe44102f08e1dcde4e21649ad27edd285f1a1ce1f","0xe44e17f364d5d24ba7df23fe8ea565c544ae36d4","0xe4d72a7fe71e6fb91fbc09459905c6031e120865","0xe50548454ec410bed6b2338d77121aa67d277ff4","0xe59030b21b2714708afd08a7e0f8d0a90f5ec251","0xe5ccee17815a0a39e2e7efe6854582c1dd103d2b","0xe5f83ce1e8f41cfd9ddcc85a0db726c81c9f789f","0xe71fc339d0783875d4942ad17540c3f2650915ba","0xe7eac2a558e9f0e009f6a0fb7f53923c39c37035","0xe7ef6563fcf1965e91075f13a4cfb4b607fceeef","0xe81a57f5b208735e44e99f84728a047ae29256ab","0xe8a305b264ae56cc115e036e63ee94ecf0d993a4","0xe94d448083dfd5feafb629ff1d546ae2bd189783","0xe95baeb396ecec3ed3fe37ba8f0e3fcf922c583f","0xe97a8888c89951ed4567d61fbca8a6c6c7e762c2","0xe9aa8eb20a2fa96c0e3c26173cc0ebdc9838fa94","0xe9b4f7755f74be4389f54e07c94d1541e27c2f33","0xea24918a807399a819b74e30baa05f0375ecdbbd","0xea50a527fb7dddb11bd7361285b3decda432ea2c","0xea7f8af79b6e69b3e65959f41ea6c181740e570d","0xeae4581390f2a537350169b9ca14d0856e208785","0xeb4019bc9aec9160ad9c9c7c2331cc7c4ca31465","0xeb6b06c316dc8f43538480fad4cdcf7d1ee48d6e","0xeb76f570e30419010acbbe765bba90263f3b8bab","0xeb9402df89bc70a6b9dc31fcf2d6b8078ea4b0f4","0xeba3af243ce855c2506f9a2e176adec456378e22","0xebbc65643714d884486356a6bb071a012037a364","0xebcb909bd7dfd73eec9c2bedb72d9ff0bdb1e32e","0xebf21c70465e0c9ca5faf21e1c17d3bfac95c647","0xec5f1a1d7ea81e5f08b7ae00e6f56f161f6ab869","0xed608006bc545bf7948d79a152e7fc101e0e44fb","0xed7dea54dbeff0dd16aef8d227564c1aa289626f","0xee3711ea1fd2fc2b770fe258a822aeb1d9199467","0xee853ddB68BE3D5431B62e5305295e8215a86A60","0xef07780777d1449e7d4a09c1f5bbeac51b55c037","0xef321b3871add26b727b6eb0895eefd881118399","0xef5c424b1b0a04418bfec2799ed5e2896836a8d1","0xef6ee1ece8664605493e69de51f490c096beeaa7","0xefa171c1939ae0fff98513daab961785b1c79514","0xefdf43acfe9050948468ccb732dfc3f0d4f75e80","0xf03e21afd74bfc892e3314507952d749b92afe16","0xf0404545ff84ac7d265f1c87ad00801a678ed076","0xf04663fd686eae663448547c19451e1afbaecfa4","0xf1298c937d86f8be3b2ac4579681c2e6ed6c21cf","0xf13bcf5d81626808646c18f60d078a1823471d26","0xf172db4d92bf8e72fa4e9182dcc811641b85fa97","0xf1b2030efd520136f7c5c7bddfdba54ca4f4ddbc","0xf1c0694962ab2c64e625758c71f82cd325c93dd7","0xf1dcd0dc8126c8e7bb2aa6793b03ad75b3b17af7","0xf1dfa94d8b0bc4a627217abc6b09a2821a50e9f6","0xf1f838ebb4b949b20afc3859991a27ffb87ba276","0xf2ce1fc162ff873c226304314c685ef6ef7ef96e","0xf313a87f42729655ba41a3b142078b19cc86da89","0xf3956963b012930d94a86c91da2905ff7a4ec34f","0xf3b706a26fa7298bf1309a49ccb5886db176639a","0xf45227bd50fcce84908b6a0439ac0035cc175b6f","0xf46bf67c9fe161ad0dccf2bdcd5a787fd8a1a929","0xf4802f43e0656267821a68b7d75a9ededc42f958","0xf48c70d44618f8862a0fbb7076b362c0f07787fa","0xf4b0011d2921df727132c44429aa4985e5a366c4","0xf56001723d00c15ca5c390fd38d1786d34f0ad48","0xf58ef1e69b1d2299e41033657c4e3ea828479dbb","0xf5b4c93a02b7264f5bcf6443cdc70728ced257c8","0xf5c7e89021183cb51409829f07eedb855c6b83de","0xf619b6e1beca45a13e147eaa935ef91b9c1bd918","0xf84432862824a1535b8a8cfaad6c82a3a9e8e49f","0xF870Fb499CAbA8D0a77e33E1BF0592c6b6aE2E2f","0xf8bafbf962b791e416d9c218994e86f489a970e1","0xf9033d896d9adfc2439668b561ee757bcb8e1eac","0xf9102e3b05eb6f26c300df9e21bdd3f3b40d329b","0xf9b51d5415fd38414299950083357444849e509f","0xfa7933c0398951493232a4ca95caa94d2d888bee","0xfb2ccaacb87ed7495b3be858029878fadee14b6b","0xfb562be56c348e6486e2fd32cf0fb47782f04501","0xfb884e55644ae7289553983d822d3f12d1becd0c","0xfc045b4b949ffd654fd8b7596682a686e150b36d","0xfc4b2f6ef1efa354d602fb8feb2737f8de2ae52e","0xfcc0894f7b5d115f9f3bc16b7928faa6388ab598","0xfcced881dd348c8c33493a5ddbae8604bd1c9ae1","0xfce50ec01725d9bc975ce358b266dfdbe7cc26c5","0xfd03bdac6895acad03dbf0eb343aab5a7373cd1b","0xfe330cda968026db1a0793243f43486955b82c42","0xfe3f30ab5fad436a0b4d71d6e348e907b00a9472","0xfef5bc8e7bbf4da33ba52791d2d260b635812f7e","0xff513529cfd2718ea94ca6580dbb10bc79d981b3","0xff85e61f719b09f3590b9343b86c84878300c6e6","0xff8ba48f19979a2fa42fa56ce3b85979c6170671","0xff9b4c8352f0caefbf15651e80204a5682da9ef1","0xffd7cc82fbdd7c1d9be09bd0a686ecb63df33eb1","0x33982ed97cc9a2bb4d06e059b6aad66ecc1ecac1"].forEach((function(e,t){i+='<div class="address">'.concat(e,"</div>")})),e.exports=WhitelistTemplate=function(){return'\n  <div class="whitelistSection">\n    <div class="communityAddresses">\n      <div class="whitelistTitle">Saito POLS 1</div>\n      '.concat(r,'\n    </div>\n    <div class="polsAddresses">\n      <div class="whitelistTitle">Saito POLS 2</div>\n      ').concat(n,'\n    </div>\n    <div class="polsAddresses">\n      <div class="whitelistTitle">Saito Public 1</div>\n      ').concat(a,'\n    </div>\n    <div class="polsAddresses">\n      <div class="whitelistTitle">Saito Public 2</div>\n      ').concat(i,"\n    </div>\n  </div>")}},function(e,t){function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e.exports=TokenTemplate=function(){var e,t=(r(e={title:"SAITO ERC-20 Token Contract",para1:'The token\'s address is <a href="https://etherscan.io/token/0xFa14Fa6958401314851A17d6C5360cA29f74B57B">0xFa14Fa6958401314851A17d6C5360cA29f74B57B</a> and the Uniswap pair is <a href="https://info.uniswap.org/pair/0xdfcf744c8ae896e8631ba9b9dc717546646f6708">0xdfcf744c8ae896e8631ba9b9dc717546646f6708</a>.',para2:'Details can be seen on <a href="https://etherscan.io/token/0xFa14Fa6958401314851A17d6C5360cA29f74B57B">Etherscan</a>, <a href="https://coinmarketcap.com/currencies/saito/">Coinmarketcap</a>, and <a href="https://www.coingecko.com/en/coins/saito">Coingecko</a>.'},"para2","Following our successful IDO launched on PolkaStarter, SAITO is available as a swappable ERC-20 Token. Each ERC-20 SAITO represents a native SAITO coin and is 1-to-1 convertible to native coins withheld on the native network by the Saito Team."),r(e,"para3","SAITO can be traded on Uniswap and will soon also be available on more traditional platforms, so stay tuned for those announcements."),r(e,"para4","In order to receive and hold your ERC-20 SAITO, you should use an ERC-20 compatible wallet such as MyEtherWallet, MetaMask or TrustWallet."),r(e,"para5","We encourage you to consider a hardware-based solution for you key storage such as a Trezor or Ledger device. Also be sure to keep a backup of your keys in a safe place."),r(e,"para6","Also be careful not to use the token address as a receiving address!"),r(e,"para7","Team Saito greatly appreciates your support. A blockchain is only as strong as it's community, we couldn't succeed without you."),r(e,"para8",'<a id="burnlink" href="/website/tokenburn">Click here</a> for instructions on how to burn your ERC-20 SAITO in exchange for native SAITO.'),r(e,"class8","burninfo"),e);return document.location.host.includes("cn.saito.io")&&(t={title:"SAITO ERC-20 代币合约",para1:'代币地址为0xFa14Fa6958401314851A17d6C5360cA29f74B57B。 您可以在<a href="https://etherscan.io/token/0xFa14Fa6958401314851A17d6C5360cA29f74B57B">Etherscan</a>，<a href="https://coinmarketcap.com/currencies/saito/">Coinmarketcap</a>和<a href="https://www.coingecko.com/en/coins/saito">Coingecko</a>上查找详细信 息。',para2:"在PolkaStarter上成功进行IDO之后，SAITO将作为可交易的ERC-20代币使用。 每个ERC- 20 SAITO代表一个原生的SAITO代币，并且可以以1:1的比例转换为Saito主网上的原生代币。",para3:"SAITO可以在Uniswap上进行交易，并且很快还将在更多平台上线，敬请期待官方公告。",para4:"为了接收和持有ERC-20 SAITO，建议您使用与ERC-20兼容的钱包，例如 MyEtherWallet，MetaMask或TrustWallet。",para5:"我们鼓励您考虑基于硬件的钱包用于密钥存储，例如Trezor或Ledger。 另外，请务必将密 钥备份保存在安全的地方。",para6:"另外请注意不要将代币地址用作收款地址!",para7:"Saito团队非常感谢您的支持。 正因为社区，区块链才会如此强大，没有您我们就无法成功。",para8:'单击<a id="burnlink" href="/website/tokenburn">此处</a>获取有关如何将ERC-20 SAITO代币兑换成原生SAITO代币的说明。',class8:"burninfo"}),'\n  <div>\n    <div class="title">'.concat(t.title,"</div>\n    <p>\n      ").concat(t.para1,"\n    </p>\n    <p>\n      ").concat(t.para2,"\n    </p>\n    <p>\n      ").concat(t.para3,"\n    </p>\n    <p>\n      ").concat(t.para4,"\n    </p>\n    <p>\n      ").concat(t.para5,"\n    </p>\n    <p>\n      ").concat(t.para6,"\n    </p>\n    <p>\n      ").concat(t.para7,'\n    </p>\n    <p class="').concat(t.class8,'">\n      ').concat(t.para8,"\n    </p>\n  </div>")}},function(e,t){e.exports=TokenTemplate=function(){return'\n  <div class="">\n    <div class="title">How to burn your ERC-20 SAITO in exchange for Native SAITO</div>\n    <p>\n      By burning your ERC-20 SAITO, it\'s possible to swap to Native Saito.\n    </p>\n    <p>\n      In the burn function of our ERC-20 token, the data field of the burn function should be used to provide a valid SAITO native address in base-58 format.\n    </p>\n    <p>\n      If you\'re using MyEtherWallet, you\'ll need to provide the ABI, which can be found <a href="https://github.com/SaitoTech/saito-evm-token/tree/master/deployments/live-0xFa14Fa6958401314851A17d6C5360cA29f74B57B">in the ERC20 github project in the deployments directory</a>. Detailed instructions for burning via MEW can be found <a href="https://github.com/SaitoTech/saito-evm-token/blob/master/README.md">in the README</a>.\n    </p>\n    <p>\n      The ABI has also been uploaded to Etherscan and the burn() function can be accessed via their writeContract interface <a href="https://etherscan.io/token/0xFa14Fa6958401314851A17d6C5360cA29f74B57B#writeContract">here</a>.\n    </p>\n    <p>\n      Please consider reaching out to the team at info@saito.tech before proceeding. We may have other means to help you with what you\'re trying to accomplish.\n    </p>\n  </div>  \n  '}},function(e,t){e.exports=Web3Template=function(e){return'\n    <div class="web3-page">\n      <div class="web3-heading">\n        <div class="left">\n          <h1>Play <span class="heading-poker">Poker</span></h1>\n          <h2>with Westend Coins</h2>\n          <div class="powered-by">\n            <div class="powered">powered by</div>\n            <div class="powered-logo"><img src="/saito/img/logo.svg" /></div>\n          </div>\n        </div>\n        <div class="right">\n          <img src="/subpagestyle/web3/poker_cards.png" />\n        </div>\n      </div>\n      <h3 class="page-heading">Before you can start a game,<br />\n      you\'ll need to get some <a href="">WND</a>.</h3>\n      <div class="page-content">\n        <p>You already have a new <b>Westend wallet</b> running in this webpage. Under the menu on the top right you should see your <b>Westend address</b>. \n        </p>\n        <p><span class="the-button"><a class="button" href="">Visit the faucet</a></span> and get some tokens sent to your address.\n        </p>\n        <p>After you get your tokens, you should see your balance by visiting <a href="">this block explorer link</a> or by refreshing this page and checking your balance in the sidebar menu below your address.\n        </p>\n        <p class="flex">After you confirm your balance you can visit the <a href="/arcade" class="arcade-button"><img src="/website/img/top_logo.png" class="saito-logo" />  <span class="sep">|</span> <span class="arcade">Arcade</span></a> to start a game.</p> \n        <p>Look for a <b>poker invite using Westend</b> or <b>start your own game</b> by clicking Poker on the left, choosing <b>advanaced options</b>, and selecting <b>WND</b> under the Token dropdown.\n        </p>\n      </div>\n    </div>'}},function(e,t,r){e.exports=!r(13)&&!r(7)((function(){return 7!=Object.defineProperty(r(145)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,r){t.f=r(11)},function(e,t,r){var n=r(26),a=r(27),i=r(102)(!1),o=r(147)("IE_PROTO");e.exports=function(e,t){var r,s=a(e),c=0,l=[];for(r in s)r!=o&&n(s,r)&&l.push(r);for(;t.length>c;)n(s,r=t[c++])&&(~i(l,r)||l.push(r));return l}},function(e,t,r){var n=r(14),a=r(3),i=r(56);e.exports=r(13)?Object.defineProperties:function(e,t){a(e);for(var r,o=i(t),s=o.length,c=0;s>c;)n.f(e,r=o[c++],t[r]);return e}},function(e,t,r){var n=r(27),a=r(59).f,i={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return o&&"[object Window]"==i.call(e)?function(e){try{return a(e)}catch(e){return o.slice()}}(e):a(n(e))}},function(e,t,r){"use strict";var n=r(13),a=r(56),i=r(103),o=r(85),s=r(15),c=r(84),l=Object.assign;e.exports=!l||r(7)((function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach((function(e){t[e]=e})),7!=l({},e)[r]||Object.keys(l({},t)).join("")!=n}))?function(e,t){for(var r=s(e),l=arguments.length,u=1,d=i.f,h=o.f;l>u;)for(var p,f=c(arguments[u++]),m=d?a(f).concat(d(f)):a(f),g=m.length,y=0;g>y;)p=m[y++],n&&!h.call(f,p)||(r[p]=f[p]);return r}:l},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,r){"use strict";var n=r(20),a=r(8),i=r(325),o=[].slice,s={},c=function(e,t,r){if(!(t in s)){for(var n=[],a=0;a<t;a++)n[a]="a["+a+"]";s[t]=Function("F,a","return new F("+n.join(",")+")")}return s[t](e,r)};e.exports=Function.bind||function(e){var t=n(this),r=o.call(arguments,1),s=function(){var n=r.concat(o.call(arguments));return this instanceof s?c(t,n.length,n):i(t,n,e)};return a(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(6).parseInt,a=r(72).trim,i=r(151),o=/^[-+]?0[xX]/;e.exports=8!==n(i+"08")||22!==n(i+"0x16")?function(e,t){var r=a(String(e),3);return n(r,t>>>0||(o.test(r)?16:10))}:n},function(e,t,r){var n=r(6).parseFloat,a=r(72).trim;e.exports=1/n(r(151)+"-0")!=-1/0?function(e){var t=a(String(e),3),r=n(t);return 0===r&&"-"==t.charAt(0)?-0:r}:n},function(e,t,r){var n=r(35);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=n(e))throw TypeError(t);return+e}},function(e,t,r){var n=r(8),a=Math.floor;e.exports=function(e){return!n(e)&&isFinite(e)&&a(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,r){var n=r(154),a=Math.pow,i=a(2,-52),o=a(2,-23),s=a(2,127)*(2-o),c=a(2,-126);e.exports=Math.fround||function(e){var t,r,a=Math.abs(e),l=n(e);return a<c?l*(a/c/o+1/i-1/i)*c*o:(r=(t=(1+o/i)*a)-(t-a))>s||r!=r?l*(1/0):l*r}},function(e,t,r){var n=r(3);e.exports=function(e,t,r,a){try{return a?t(n(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&n(i.call(e)),t}}},function(e,t,r){var n=r(20),a=r(15),i=r(84),o=r(12);e.exports=function(e,t,r,s,c){n(t);var l=a(e),u=i(l),d=o(l.length),h=c?d-1:0,p=c?-1:1;if(r<2)for(;;){if(h in u){s=u[h],h+=p;break}if(h+=p,c?h<0:d<=h)throw TypeError("Reduce of empty array with no initial value")}for(;c?h>=0:d>h;h+=p)h in u&&(s=t(s,u[h],h,l));return s}},function(e,t,r){"use strict";var n=r(15),a=r(57),i=r(12);e.exports=[].copyWithin||function(e,t){var r=n(this),o=i(r.length),s=a(e,o),c=a(t,o),l=arguments.length>2?arguments[2]:void 0,u=Math.min((void 0===l?o:a(l,o))-c,o-s),d=1;for(c<s&&s<c+u&&(d=-1,c+=u-1,s+=u-1);u-- >0;)c in r?r[s]=r[c]:delete r[s],s+=d,c+=d;return r}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){"use strict";var n=r(166);r(0)({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},function(e,t,r){r(13)&&"g"!=/./g.flags&&r(14).f(RegExp.prototype,"flags",{configurable:!0,get:r(86)})},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,r){var n=r(3),a=r(8),i=r(170);e.exports=function(e,t){if(n(e),a(t)&&t.constructor===e)return t;var r=i.f(e);return(0,r.resolve)(t),r.promise}},function(e,t,r){"use strict";var n=r(341),a=r(64);e.exports=r(111)("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=n.getEntry(a(this,"Map"),e);return t&&t.v},set:function(e,t){return n.def(a(this,"Map"),0===e?0:e,t)}},n,!0)},function(e,t,r){"use strict";var n=r(14).f,a=r(58),i=r(63),o=r(34),s=r(61),c=r(62),l=r(156),u=r(335),d=r(60),h=r(13),p=r(48).fastKey,f=r(64),m=h?"_s":"size",g=function(e,t){var r,n=p(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,l){var u=e((function(e,n){s(e,u,t,"_i"),e._t=t,e._i=a(null),e._f=void 0,e._l=void 0,e[m]=0,null!=n&&c(n,r,e[l],e)}));return i(u.prototype,{clear:function(){for(var e=f(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var r=f(this,t),n=g(r,e);if(n){var a=n.n,i=n.p;delete r._i[n.i],n.r=!0,i&&(i.n=a),a&&(a.p=i),r._f==n&&(r._f=a),r._l==n&&(r._l=i),r[m]--}return!!n},forEach:function(e){f(this,t);for(var r,n=o(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!g(f(this,t),e)}}),h&&n(u.prototype,"size",{get:function(){return f(this,t)[m]}}),u},def:function(e,t,r){var n,a,i=g(e,t);return i?i.v=r:(e._l=i={i:a=p(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=i),n&&(n.n=i),e[m]++,"F"!==a&&(e._i[a]=i)),e},getEntry:g,setStrong:function(e,t,r){l(e,t,(function(e,r){this._t=f(e,t),this._k=r,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?u(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,u(1))}),r?"entries":"values",!r,!0),d(t)}}},function(e,t,r){"use strict";var n=r(341),a=r(64);e.exports=r(111)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return n.def(a(this,"Set"),e=0===e?0:e,e)}},n)},function(e,t,r){"use strict";var n,a=r(6),i=r(41)(0),o=r(22),s=r(48),c=r(322),l=r(344),u=r(8),d=r(64),h=r(64),p=!a.ActiveXObject&&"ActiveXObject"in a,f=s.getWeak,m=Object.isExtensible,g=l.ufstore,y=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},v={get:function(e){if(u(e)){var t=f(e);return!0===t?g(d(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return l.def(d(this,"WeakMap"),e,t)}},b=e.exports=r(111)("WeakMap",y,v,l,!0,!0);h&&p&&(c((n=l.getConstructor(y,"WeakMap")).prototype,v),s.NEED=!0,i(["delete","has","get","set"],(function(e){var t=b.prototype,r=t[e];o(t,e,(function(t,a){if(u(t)&&!m(t)){this._f||(this._f=new n);var i=this._f[e](t,a);return"set"==e?this:i}return r.call(this,t,a)}))})))},function(e,t,r){"use strict";var n=r(63),a=r(48).getWeak,i=r(3),o=r(8),s=r(61),c=r(62),l=r(41),u=r(26),d=r(64),h=l(5),p=l(6),f=0,m=function(e){return e._l||(e._l=new g)},g=function(){this.a=[]},y=function(e,t){return h(e.a,(function(e){return e[0]===t}))};g.prototype={get:function(e){var t=y(this,e);if(t)return t[1]},has:function(e){return!!y(this,e)},set:function(e,t){var r=y(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=p(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,r,i){var l=e((function(e,n){s(e,l,t,"_i"),e._t=t,e._i=f++,e._l=void 0,null!=n&&c(n,r,e[i],e)}));return n(l.prototype,{delete:function(e){if(!o(e))return!1;var r=a(e);return!0===r?m(d(this,t)).delete(e):r&&u(r,this._i)&&delete r[this._i]},has:function(e){if(!o(e))return!1;var r=a(e);return!0===r?m(d(this,t)).has(e):r&&u(r,this._i)}}),l},def:function(e,t,r){var n=a(i(t),!0);return!0===n?m(e).set(t,r):n[e._i]=r,e},ufstore:m}},function(e,t,r){var n=r(36),a=r(12);e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=a(t);if(t!==r)throw RangeError("Wrong length!");return r}},function(e,t,r){var n=r(59),a=r(103),i=r(3),o=r(6).Reflect;e.exports=o&&o.ownKeys||function(e){var t=n.f(i(e)),r=a.f;return r?t.concat(r(e)):t}},function(e,t,r){"use strict";var n=r(104),a=r(8),i=r(12),o=r(34),s=r(11)("isConcatSpreadable");e.exports=function e(t,r,c,l,u,d,h,p){for(var f,m,g=u,y=0,v=!!h&&o(h,p,3);y<l;){if(y in c){if(f=v?v(c[y],y,r):c[y],m=!1,a(f)&&(m=void 0!==(m=f[s])?!!m:n(f)),m&&d>0)g=e(t,r,f,i(f.length),g,d-1)-1;else{if(g>=9007199254740991)throw TypeError();t[g]=f}g++}y++}return g}},function(e,t,r){var n=r(12),a=r(153),i=r(39);e.exports=function(e,t,r,o){var s=String(i(e)),c=s.length,l=void 0===r?" ":String(r),u=n(t);if(u<=c||""==l)return s;var d=u-c,h=a.call(l,Math.ceil(d/l.length));return h.length>d&&(h=h.slice(0,d)),o?h+s:s+h}},function(e,t,r){var n=r(13),a=r(56),i=r(27),o=r(85).f;e.exports=function(e){return function(t){for(var r,s=i(t),c=a(s),l=c.length,u=0,d=[];l>u;)r=c[u++],n&&!o.call(s,r)||d.push(e?[r,s[r]]:s[r]);return d}}},function(e,t,r){var n=r(71),a=r(351);e.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return a(this)}}},function(e,t,r){var n=r(62);e.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},function(e,t){e.exports=Math.scale||function(e,t,r,n,a){return 0===arguments.length||e!=e||t!=t||r!=r||n!=n||a!=a?NaN:e===1/0||e===-1/0?e:(e-t)*(a-n)/(r-t)+n}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r(5);var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.slips=[]}var t,r,a;return t=e,(r=[{key:"update",value:function(e,t){this.slips[e]=t}},{key:"validate",value:function(e){return 1==this.slips[e]}}])&&n(t.prototype,r),a&&n(t,a),e}();e.exports=a},function(e,t,r){"use strict";var n=r(785).Buffer,a=r(356).Transform;function i(e){a.call(this),this._block=n.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}r(1)(i,a),i.prototype._transform=function(e,t,r){var n=null;try{this.update(e,t)}catch(e){n=e}r(n)},i.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},i.prototype.update=function(e,t){if(function(e,t){if(!n.isBuffer(e)&&"string"!=typeof e)throw new TypeError(t+" must be a string or a buffer")}(e,"Data"),this._finalized)throw new Error("Digest already called");n.isBuffer(e)||(e=n.from(e,t));for(var r=this._block,a=0;this._blockOffset+e.length-a>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)r[i++]=e[a++];this._update(),this._blockOffset=0}for(;a<e.length;)r[this._blockOffset++]=e[a++];for(var o=0,s=8*e.length;s>0;++o)this._length[o]+=s,(s=this._length[o]/4294967296|0)>0&&(this._length[o]-=4294967296*s);return this},i.prototype._update=function(){throw new Error("_update is not implemented")},i.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return t},i.prototype._digest=function(){throw new Error("_digest is not implemented")},e.exports=i},function(e,t,r){(t=e.exports=r(357)).Stream=t,t.Readable=t,t.Writable=r(361),t.Duplex=r(77),t.Transform=r(363),t.PassThrough=r(791),t.finished=r(174),t.pipeline=r(792)},function(e,t,r){"use strict";(function(t,n){var a;e.exports=E,E.ReadableState=S;r(50).EventEmitter;var i=function(e,t){return e.listeners(t).length},o=r(358),s=r(4).Buffer,c=t.Uint8Array||function(){};var l,u=r(786);l=u&&u.debuglog?u.debuglog("stream"):function(){};var d,h,p,f=r(787),m=r(359),g=r(360).getHighWaterMark,y=r(76).codes,v=y.ERR_INVALID_ARG_TYPE,b=y.ERR_STREAM_PUSH_AFTER_EOF,_=y.ERR_METHOD_NOT_IMPLEMENTED,w=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(1)(E,o);var x=m.errorOrDestroy,k=["error","close","destroy","pause","resume"];function S(e,t,n){a=a||r(77),e=e||{},"boolean"!=typeof n&&(n=t instanceof a),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=g(this,e,"readableHighWaterMark",n),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=r(78).StringDecoder),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function E(e){if(a=a||r(77),!(this instanceof E))return new E(e);var t=this instanceof a;this._readableState=new S(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),o.call(this)}function A(e,t,r,n,a){l("readableAddChunk",t);var i,o=e._readableState;if(null===t)o.reading=!1,function(e,t){if(l("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?D(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,T(e)))}(e,o);else if(a||(i=function(e,t){var r;n=t,s.isBuffer(n)||n instanceof c||"string"==typeof t||void 0===t||e.objectMode||(r=new v("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(o,t)),i)x(e,i);else if(o.objectMode||t&&t.length>0)if("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=function(e){return s.from(e)}(t)),n)o.endEmitted?x(e,new w):P(e,o,t,!0);else if(o.ended)x(e,new b);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||0!==t.length?P(e,o,t,!1):O(e,o)):P(e,o,t,!1)}else n||(o.reading=!1,O(e,o));return!o.ended&&(o.length<o.highWaterMark||0===o.length)}function P(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&D(e)),O(e,t)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),E.prototype.destroy=m.destroy,E.prototype._undestroy=m.undestroy,E.prototype._destroy=function(e,t){t(e)},E.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=s.from(e,t),t=""),r=!0),A(this,e,t,!1,r)},E.prototype.unshift=function(e){return A(this,e,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(e){d||(d=r(78).StringDecoder);var t=new d(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,a="";null!==n;)a+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==a&&this._readableState.buffer.push(a),this._readableState.length=a.length,this};function C(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=1073741824?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function D(e){var t=e._readableState;l("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(l("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(T,e))}function T(e){var t=e._readableState;l("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,B(e)}function O(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(M,e,t))}function M(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(l("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function I(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function R(e){l("readable nexttick read 0"),e.read(0)}function F(e,t){l("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),B(e),t.flowing&&!t.reading&&e.read(0)}function B(e){var t=e._readableState;for(l("flow",t.flowing);t.flowing&&null!==e.read(););}function j(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function N(e){var t=e._readableState;l("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(q,t,e))}function q(e,t){if(l("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function L(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}E.prototype.read=function(e){l("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return l("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?N(this):D(this),null;if(0===(e=C(e,t))&&t.ended)return 0===t.length&&N(this),null;var n,a=t.needReadable;return l("need readable",a),(0===t.length||t.length-e<t.highWaterMark)&&l("length less than watermark",a=!0),t.ended||t.reading?l("reading or ended",a=!1):a&&(l("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=C(r,t))),null===(n=e>0?j(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&N(this)),null!==n&&this.emit("data",n),n},E.prototype._read=function(e){x(this,new _("_read()"))},E.prototype.pipe=function(e,t){var r=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,l("pipe count=%d opts=%j",a.pipesCount,t);var o=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?c:g;function s(t,n){l("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,l("cleanup"),e.removeListener("close",f),e.removeListener("finish",m),e.removeListener("drain",u),e.removeListener("error",p),e.removeListener("unpipe",s),r.removeListener("end",c),r.removeListener("end",g),r.removeListener("data",h),d=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}function c(){l("onend"),e.end()}a.endEmitted?n.nextTick(o):r.once("end",o),e.on("unpipe",s);var u=function(e){return function(){var t=e._readableState;l("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,B(e))}}(r);e.on("drain",u);var d=!1;function h(t){l("ondata");var n=e.write(t);l("dest.write",n),!1===n&&((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==L(a.pipes,e))&&!d&&(l("false write response, pause",a.awaitDrain),a.awaitDrain++),r.pause())}function p(t){l("onerror",t),g(),e.removeListener("error",p),0===i(e,"error")&&x(e,t)}function f(){e.removeListener("finish",m),g()}function m(){l("onfinish"),e.removeListener("close",f),g()}function g(){l("unpipe"),r.unpipe(e)}return r.on("data",h),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",p),e.once("close",f),e.once("finish",m),e.emit("pipe",r),a.flowing||(l("pipe resume"),r.resume()),e},E.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<a;i++)n[i].emit("unpipe",this,{hasUnpiped:!1});return this}var o=L(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},E.prototype.on=function(e,t){var r=o.prototype.on.call(this,e,t),a=this._readableState;return"data"===e?(a.readableListening=this.listenerCount("readable")>0,!1!==a.flowing&&this.resume()):"readable"===e&&(a.endEmitted||a.readableListening||(a.readableListening=a.needReadable=!0,a.flowing=!1,a.emittedReadable=!1,l("on readable",a.length,a.reading),a.length?D(this):a.reading||n.nextTick(R,this))),r},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(e,t){var r=o.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(I,this),r},E.prototype.removeAllListeners=function(e){var t=o.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||n.nextTick(I,this),t},E.prototype.resume=function(){var e=this._readableState;return e.flowing||(l("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(F,e,t))}(this,e)),e.paused=!1,this},E.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var a in e.on("end",(function(){if(l("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(a){(l("wrapped data"),r.decoder&&(a=r.decoder.write(a)),r.objectMode&&null==a)||(r.objectMode||a&&a.length)&&(t.push(a)||(n=!0,e.pause()))})),e)void 0===this[a]&&"function"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var i=0;i<k.length;i++)e.on(k[i],this.emit.bind(this,k[i]));return this._read=function(t){l("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=r(789)),h(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),E._fromList=j,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(e,t){return void 0===p&&(p=r(790)),p(E,e,t)})}).call(this,r(18),r(9))},function(e,t,r){e.exports=r(50).EventEmitter},function(e,t,r){"use strict";(function(t){function r(e,t){a(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function a(e,t){e.emit("error",t)}e.exports={destroy:function(e,i){var o=this,s=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return s||c?(i?i(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(a,this,e)):t.nextTick(a,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!i&&e?o._writableState?o._writableState.errorEmitted?t.nextTick(n,o):(o._writableState.errorEmitted=!0,t.nextTick(r,o,e)):t.nextTick(r,o,e):i?(t.nextTick(n,o),i(e)):t.nextTick(n,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this,r(9))},function(e,t,r){"use strict";var n=r(76).codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,a){var i=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,a,r);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new n(a?r:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384}}},function(e,t,r){"use strict";(function(t,n){function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var a=n.callback;t.pendingcb--,a(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var i;e.exports=E,E.WritableState=S;var o={deprecate:r(362)},s=r(358),c=r(4).Buffer,l=t.Uint8Array||function(){};var u,d=r(359),h=r(360).getHighWaterMark,p=r(76).codes,f=p.ERR_INVALID_ARG_TYPE,m=p.ERR_METHOD_NOT_IMPLEMENTED,g=p.ERR_MULTIPLE_CALLBACK,y=p.ERR_STREAM_CANNOT_PIPE,v=p.ERR_STREAM_DESTROYED,b=p.ERR_STREAM_NULL_VALUES,_=p.ERR_STREAM_WRITE_AFTER_END,w=p.ERR_UNKNOWN_ENCODING,x=d.errorOrDestroy;function k(){}function S(e,t,o){i=i||r(77),e=e||{},"boolean"!=typeof o&&(o=t instanceof i),this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=h(this,e,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,a=r.sync,i=r.writecb;if("function"!=typeof i)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,a,i){--t.pendingcb,r?(n.nextTick(i,a),n.nextTick(O,e,t),e._writableState.errorEmitted=!0,x(e,a)):(i(a),e._writableState.errorEmitted=!0,x(e,a),O(e,t))}(e,r,a,t,i);else{var o=D(r)||e.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||C(e,r),a?n.nextTick(P,e,r,o,i):P(e,r,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function E(e){var t=this instanceof(i=i||r(77));if(!t&&!u.call(E,this))return new E(e);this._writableState=new S(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),s.call(this)}function A(e,t,r,n,a,i,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new v("write")):r?e._writev(a,t.onwrite):e._write(a,i,t.onwrite),t.sync=!1}function P(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),O(e,t)}function C(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var s=0,c=!0;r;)i[s]=r,r.isBuf||(c=!1),r=r.next,s+=1;i.allBuffers=c,A(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,u=r.encoding,d=r.callback;if(A(e,t,!1,t.objectMode?1:l.length,l,u,d),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function D(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function T(e,t){e._final((function(r){t.pendingcb--,r&&x(e,r),t.prefinished=!0,e.emit("prefinish"),O(e,t)}))}function O(e,t){var r=D(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(T,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var a=e._readableState;(!a||a.autoDestroy&&a.endEmitted)&&e.destroy()}return r}r(1)(E,s),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:o.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(e){return!!u.call(this,e)||this===E&&(e&&e._writableState instanceof S)}})):u=function(e){return e instanceof this},E.prototype.pipe=function(){x(this,new y)},E.prototype.write=function(e,t,r){var a,i=this._writableState,o=!1,s=!i.objectMode&&(a=e,c.isBuffer(a)||a instanceof l);return s&&!c.isBuffer(e)&&(e=function(e){return c.from(e)}(e)),"function"==typeof t&&(r=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=k),i.ending?function(e,t){var r=new _;x(e,r),n.nextTick(t,r)}(this,r):(s||function(e,t,r,a){var i;return null===r?i=new b:"string"==typeof r||t.objectMode||(i=new f("chunk",["string","Buffer"],r)),!i||(x(e,i),n.nextTick(a,i),!1)}(this,i,e,r))&&(i.pendingcb++,o=function(e,t,r,n,a,i){if(!r){var o=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,r));return t}(t,n,a);n!==o&&(r=!0,a="buffer",n=o)}var s=t.objectMode?1:n.length;t.length+=s;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:a,isBuf:r,callback:i,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else A(e,t,!1,s,n,a,i);return l}(this,i,s,e,t,r)),o},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||C(this,e))},E.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(e,t,r){r(new m("_write()"))},E.prototype._writev=null,E.prototype.end=function(e,t,r){var a=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),a.corked&&(a.corked=1,this.uncork()),a.ending||function(e,t,r){t.ending=!0,O(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,a,r),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),E.prototype.destroy=d.destroy,E.prototype._undestroy=d.undestroy,E.prototype._destroy=function(e,t){t(e)}}).call(this,r(18),r(9))},function(e,t,r){(function(t){function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this,r(18))},function(e,t,r){"use strict";e.exports=u;var n=r(76).codes,a=n.ERR_METHOD_NOT_IMPLEMENTED,i=n.ERR_MULTIPLE_CALLBACK,o=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0,c=r(77);function l(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new i);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function u(e){if(!(this instanceof u))return new u(e);c.call(this,e),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,r){h(e,t,r)}))}function h(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new s;if(e._transformState.transforming)throw new o;return e.push(null)}r(1)(u,c),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,r){r(new a("_transform()"))},u.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var a=this._readableState;(n.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},u.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},u.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}},function(e,t,r){var n=r(1),a=r(79),i=r(2).Buffer,o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=new Array(64);function c(){this.init(),this._w=s,a.call(this,64,56)}function l(e,t,r){return r^e&(t^r)}function u(e,t,r){return e&t|r&(e|t)}function d(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function h(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function p(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function f(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}n(c,a),c.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},c.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,a=0|this._c,i=0|this._d,s=0|this._e,c=0|this._f,m=0|this._g,g=0|this._h,y=0;y<16;++y)t[y]=e.readInt32BE(4*y);for(;y<64;++y)t[y]=f(t[y-2])+t[y-7]+p(t[y-15])+t[y-16]|0;for(var v=0;v<64;++v){var b=g+h(s)+l(s,c,m)+o[v]+t[v]|0,_=d(r)+u(r,n,a)|0;g=m,m=c,c=s,s=i+b|0,i=a,a=n,n=r,r=b+_|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=a+this._c|0,this._d=i+this._d|0,this._e=s+this._e|0,this._f=c+this._f|0,this._g=m+this._g|0,this._h=g+this._h|0},c.prototype._hash=function(){var e=i.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},e.exports=c},function(e,t,r){var n=r(1),a=r(79),i=r(2).Buffer,o=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],s=new Array(160);function c(){this.init(),this._w=s,a.call(this,128,112)}function l(e,t,r){return r^e&(t^r)}function u(e,t,r){return e&t|r&(e|t)}function d(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function h(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function p(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function f(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function m(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function g(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function y(e,t){return e>>>0<t>>>0?1:0}n(c,a),c.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},c.prototype._update=function(e){for(var t=this._w,r=0|this._ah,n=0|this._bh,a=0|this._ch,i=0|this._dh,s=0|this._eh,c=0|this._fh,v=0|this._gh,b=0|this._hh,_=0|this._al,w=0|this._bl,x=0|this._cl,k=0|this._dl,S=0|this._el,E=0|this._fl,A=0|this._gl,P=0|this._hl,C=0;C<32;C+=2)t[C]=e.readInt32BE(4*C),t[C+1]=e.readInt32BE(4*C+4);for(;C<160;C+=2){var D=t[C-30],T=t[C-30+1],O=p(D,T),M=f(T,D),I=m(D=t[C-4],T=t[C-4+1]),R=g(T,D),F=t[C-14],B=t[C-14+1],j=t[C-32],N=t[C-32+1],q=M+B|0,L=O+F+y(q,M)|0;L=(L=L+I+y(q=q+R|0,R)|0)+j+y(q=q+N|0,N)|0,t[C]=L,t[C+1]=q}for(var U=0;U<160;U+=2){L=t[U],q=t[U+1];var z=u(r,n,a),H=u(_,w,x),$=d(r,_),G=d(_,r),K=h(s,S),V=h(S,s),W=o[U],Y=o[U+1],J=l(s,c,v),Q=l(S,E,A),X=P+V|0,Z=b+K+y(X,P)|0;Z=(Z=(Z=Z+J+y(X=X+Q|0,Q)|0)+W+y(X=X+Y|0,Y)|0)+L+y(X=X+q|0,q)|0;var ee=G+H|0,te=$+z+y(ee,G)|0;b=v,P=A,v=c,A=E,c=s,E=S,s=i+Z+y(S=k+X|0,k)|0,i=a,k=x,a=n,x=w,n=r,w=_,r=Z+te+y(_=X+ee|0,X)|0}this._al=this._al+_|0,this._bl=this._bl+w|0,this._cl=this._cl+x|0,this._dl=this._dl+k|0,this._el=this._el+S|0,this._fl=this._fl+E|0,this._gl=this._gl+A|0,this._hl=this._hl+P|0,this._ah=this._ah+r+y(this._al,_)|0,this._bh=this._bh+n+y(this._bl,w)|0,this._ch=this._ch+a+y(this._cl,x)|0,this._dh=this._dh+i+y(this._dl,k)|0,this._eh=this._eh+s+y(this._el,S)|0,this._fh=this._fh+c+y(this._fl,E)|0,this._gh=this._gh+v+y(this._gl,A)|0,this._hh=this._hh+b+y(this._hl,P)|0},c.prototype._hash=function(){var e=i.allocUnsafe(64);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},e.exports=c},function(e,t,r){e.exports=a;var n=r(50).EventEmitter;function a(){n.call(this)}r(1)(a,n),a.Readable=r(177),a.Writable=r(803),a.Duplex=r(804),a.Transform=r(805),a.PassThrough=r(806),a.Stream=a,a.prototype.pipe=function(e,t){var r=this;function a(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",a),e.on("drain",i),e._isStdio||t&&!1===t.end||(r.on("end",s),r.on("close",c));var o=!1;function s(){o||(o=!0,e.end())}function c(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(u(),0===n.listenerCount(this,"error"))throw e}function u(){r.removeListener("data",a),e.removeListener("drain",i),r.removeListener("end",s),r.removeListener("close",c),r.removeListener("error",l),e.removeListener("error",l),r.removeListener("end",u),r.removeListener("close",u),e.removeListener("close",u)}return r.on("error",l),e.on("error",l),r.on("end",u),r.on("close",u),e.on("close",u),e.emit("pipe",r),e}},function(e,t,r){"use strict";(function(t,n){var a=r(117);e.exports=b;var i,o=r(353);b.ReadableState=v;r(50).EventEmitter;var s=function(e,t){return e.listeners(t).length},c=r(368),l=r(2).Buffer,u=t.Uint8Array||function(){};var d=Object.create(r(88));d.inherits=r(1);var h=r(797),p=void 0;p=h&&h.debuglog?h.debuglog("stream"):function(){};var f,m=r(798),g=r(369);d.inherits(b,c);var y=["error","close","destroy","pause","resume"];function v(e,t){e=e||{};var n=t instanceof(i=i||r(65));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var a=e.highWaterMark,o=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:n&&(o||0===o)?o:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(f||(f=r(78).StringDecoder),this.decoder=new f(e.encoding),this.encoding=e.encoding)}function b(e){if(i=i||r(65),!(this instanceof b))return new b(e);this._readableState=new v(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),c.call(this)}function _(e,t,r,n,a){var i,o=e._readableState;null===t?(o.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,k(e)}(e,o)):(a||(i=function(e,t){var r;n=t,l.isBuffer(n)||n instanceof u||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(o,t)),i?e.emit("error",i):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=function(e){return l.from(e)}(t)),n?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):w(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||0!==t.length?w(e,o,t,!1):E(e,o)):w(e,o,t,!1))):n||(o.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function w(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&k(e)),E(e,t)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(e,t){this.push(null),t(e)},b.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=l.from(e,t),t=""),r=!0),_(this,e,t,!1,r)},b.prototype.unshift=function(e){return _(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){return f||(f=r(78).StringDecoder),this._readableState.decoder=new f(e),this._readableState.encoding=e,this};function x(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function k(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(p("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?a.nextTick(S,e):S(e))}function S(e){p("emit readable"),e.emit("readable"),D(e)}function E(e,t){t.readingMore||(t.readingMore=!0,a.nextTick(A,e,t))}function A(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(p("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function P(e){p("readable nexttick read 0"),e.read(0)}function C(e,t){t.reading||(p("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),D(e),t.flowing&&!t.reading&&e.read(0)}function D(e){var t=e._readableState;for(p("flow",t.flowing);t.flowing&&null!==e.read(););}function T(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,a=r.data;e-=a.length;for(;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(o===i.length?a+=i:a+=i.slice(0,e),0===(e-=o)){o===i.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(o));break}++n}return t.length-=n,a}(e,t):function(e,t){var r=l.allocUnsafe(e),n=t.head,a=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(r,r.length-e,0,o),0===(e-=o)){o===i.length?(++a,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(o));break}++a}return t.length-=a,r}(e,t);return n}(e,t.buffer,t.decoder),r);var r}function O(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,a.nextTick(M,t,e))}function M(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function I(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}b.prototype.read=function(e){p("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return p("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?O(this):k(this),null;if(0===(e=x(e,t))&&t.ended)return 0===t.length&&O(this),null;var n,a=t.needReadable;return p("need readable",a),(0===t.length||t.length-e<t.highWaterMark)&&p("length less than watermark",a=!0),t.ended||t.reading?p("reading or ended",a=!1):a&&(p("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=x(r,t))),null===(n=e>0?T(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&O(this)),null!==n&&this.emit("data",n),n},b.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,p("pipe count=%d opts=%j",i.pipesCount,t);var c=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?u:b;function l(t,n){p("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,p("cleanup"),e.removeListener("close",y),e.removeListener("finish",v),e.removeListener("drain",d),e.removeListener("error",g),e.removeListener("unpipe",l),r.removeListener("end",u),r.removeListener("end",b),r.removeListener("data",m),h=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||d())}function u(){p("onend"),e.end()}i.endEmitted?a.nextTick(c):r.once("end",c),e.on("unpipe",l);var d=function(e){return function(){var t=e._readableState;p("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,D(e))}}(r);e.on("drain",d);var h=!1;var f=!1;function m(t){p("ondata"),f=!1,!1!==e.write(t)||f||((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==I(i.pipes,e))&&!h&&(p("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,f=!0),r.pause())}function g(t){p("onerror",t),b(),e.removeListener("error",g),0===s(e,"error")&&e.emit("error",t)}function y(){e.removeListener("finish",v),b()}function v(){p("onfinish"),e.removeListener("close",y),b()}function b(){p("unpipe"),r.unpipe(e)}return r.on("data",m),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?o(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",g),e.once("close",y),e.once("finish",v),e.emit("pipe",r),i.flowing||(p("pipe resume"),r.resume()),e},b.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<a;i++)n[i].emit("unpipe",this,r);return this}var o=I(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},b.prototype.on=function(e,t){var r=c.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&k(this):a.nextTick(P,this))}return r},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var e=this._readableState;return e.flowing||(p("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,a.nextTick(C,e,t))}(this,e)),this},b.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var a in e.on("end",(function(){if(p("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(a){(p("wrapped data"),r.decoder&&(a=r.decoder.write(a)),r.objectMode&&null==a)||(r.objectMode||a&&a.length)&&(t.push(a)||(n=!0,e.pause()))})),e)void 0===this[a]&&"function"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var i=0;i<y.length;i++)e.on(y[i],this.emit.bind(this,y[i]));return this._read=function(t){p("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=T}).call(this,r(18),r(9))},function(e,t,r){e.exports=r(50).EventEmitter},function(e,t,r){"use strict";var n=r(117);function a(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,i=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return i||o?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n.nextTick(a,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(n.nextTick(a,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,r){"use strict";e.exports=o;var n=r(65),a=Object.create(r(88));function i(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);n.call(this,e),this._transformState={afterTransform:i.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"==typeof this._flush?this._flush((function(t,r){c(e,t,r)})):c(this,null,null)}function c(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}a.inherits=r(1),a.inherits(o,n),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var a=this._readableState;(n.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))}},function(e,t,r){"use strict";var n=r(1),a=r(807),i=r(51),o=r(2).Buffer,s=r(372),c=r(175),l=r(176),u=o.alloc(128);function d(e,t){i.call(this,"digest"),"string"==typeof t&&(t=o.from(t));var r="sha512"===e||"sha384"===e?128:64;(this._alg=e,this._key=t,t.length>r)?t=("rmd160"===e?new c:l(e)).update(t).digest():t.length<r&&(t=o.concat([t,u],r));for(var n=this._ipad=o.allocUnsafe(r),a=this._opad=o.allocUnsafe(r),s=0;s<r;s++)n[s]=54^t[s],a[s]=92^t[s];this._hash="rmd160"===e?new c:l(e),this._hash.update(n)}n(d,i),d.prototype._update=function(e){this._hash.update(e)},d.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new c:l(this._alg)).update(this._opad).update(e).digest()},e.exports=function(e,t){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new d("rmd160",t):"md5"===e?new a(s,t):new d(e,t)}},function(e,t,r){var n=r(173);e.exports=function(e){return(new n).update(e).digest()}},function(e){e.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},function(e,t,r){t.pbkdf2=r(809),t.pbkdf2Sync=r(377)},function(e,t){var r=Math.pow(2,30)-1;e.exports=function(e,t){if("number"!=typeof e)throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if("number"!=typeof t)throw new TypeError("Key length not a number");if(t<0||t>r||t!=t)throw new TypeError("Bad key length")}},function(e,t,r){(function(t,r){var n;if(t.process&&t.process.browser)n="utf-8";else if(t.process&&t.process.version){n=parseInt(r.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary"}else n="utf-8";e.exports=n}).call(this,r(18),r(9))},function(e,t,r){var n=r(372),a=r(175),i=r(176),o=r(2).Buffer,s=r(375),c=r(376),l=r(378),u=o.alloc(128),d={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function h(e,t,r){var s=function(e){function t(t){return i(e).update(t).digest()}return"rmd160"===e||"ripemd160"===e?function(e){return(new a).update(e).digest()}:"md5"===e?n:t}(e),c="sha512"===e||"sha384"===e?128:64;t.length>c?t=s(t):t.length<c&&(t=o.concat([t,u],c));for(var l=o.allocUnsafe(c+d[e]),h=o.allocUnsafe(c+d[e]),p=0;p<c;p++)l[p]=54^t[p],h[p]=92^t[p];var f=o.allocUnsafe(c+r+4);l.copy(f,0,0,c),this.ipad1=f,this.ipad2=l,this.opad=h,this.alg=e,this.blocksize=c,this.hash=s,this.size=d[e]}h.prototype.run=function(e,t){return e.copy(t,this.blocksize),this.hash(t).copy(this.opad,this.blocksize),this.hash(this.opad)},e.exports=function(e,t,r,n,a){s(r,n);var i=new h(a=a||"sha1",e=l(e,c,"Password"),(t=l(t,c,"Salt")).length),u=o.allocUnsafe(n),p=o.allocUnsafe(t.length+4);t.copy(p,0,0,t.length);for(var f=0,m=d[a],g=Math.ceil(n/m),y=1;y<=g;y++){p.writeUInt32BE(y,t.length);for(var v=i.run(p,i.ipad1),b=v,_=1;_<r;_++){b=i.run(b,i.ipad2);for(var w=0;w<m;w++)v[w]^=b[w]}v.copy(u,f),f+=m}return u}},function(e,t,r){var n=r(2).Buffer;e.exports=function(e,t,r){if(n.isBuffer(e))return e;if("string"==typeof e)return n.from(e,t);if(ArrayBuffer.isView(e))return n.from(e.buffer);throw new TypeError(r+" must be a string, a Buffer, a typed array or a DataView")}},function(e,t,r){"use strict";t.readUInt32BE=function(e,t){return(e[0+t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])>>>0},t.writeUInt32BE=function(e,t,r){e[0+r]=t>>>24,e[1+r]=t>>>16&255,e[2+r]=t>>>8&255,e[3+r]=255&t},t.ip=function(e,t,r,n){for(var a=0,i=0,o=6;o>=0;o-=2){for(var s=0;s<=24;s+=8)a<<=1,a|=t>>>s+o&1;for(s=0;s<=24;s+=8)a<<=1,a|=e>>>s+o&1}for(o=6;o>=0;o-=2){for(s=1;s<=25;s+=8)i<<=1,i|=t>>>s+o&1;for(s=1;s<=25;s+=8)i<<=1,i|=e>>>s+o&1}r[n+0]=a>>>0,r[n+1]=i>>>0},t.rip=function(e,t,r,n){for(var a=0,i=0,o=0;o<4;o++)for(var s=24;s>=0;s-=8)a<<=1,a|=t>>>s+o&1,a<<=1,a|=e>>>s+o&1;for(o=4;o<8;o++)for(s=24;s>=0;s-=8)i<<=1,i|=t>>>s+o&1,i<<=1,i|=e>>>s+o&1;r[n+0]=a>>>0,r[n+1]=i>>>0},t.pc1=function(e,t,r,n){for(var a=0,i=0,o=7;o>=5;o--){for(var s=0;s<=24;s+=8)a<<=1,a|=t>>s+o&1;for(s=0;s<=24;s+=8)a<<=1,a|=e>>s+o&1}for(s=0;s<=24;s+=8)a<<=1,a|=t>>s+o&1;for(o=1;o<=3;o++){for(s=0;s<=24;s+=8)i<<=1,i|=t>>s+o&1;for(s=0;s<=24;s+=8)i<<=1,i|=e>>s+o&1}for(s=0;s<=24;s+=8)i<<=1,i|=e>>s+o&1;r[n+0]=a>>>0,r[n+1]=i>>>0},t.r28shl=function(e,t){return e<<t&268435455|e>>>28-t};var n=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];t.pc2=function(e,t,r,a){for(var i=0,o=0,s=n.length>>>1,c=0;c<s;c++)i<<=1,i|=e>>>n[c]&1;for(c=s;c<n.length;c++)o<<=1,o|=t>>>n[c]&1;r[a+0]=i>>>0,r[a+1]=o>>>0},t.expand=function(e,t,r){var n=0,a=0;n=(1&e)<<5|e>>>27;for(var i=23;i>=15;i-=4)n<<=6,n|=e>>>i&63;for(i=11;i>=3;i-=4)a|=e>>>i&63,a<<=6;a|=(31&e)<<1|e>>>31,t[r+0]=n>>>0,t[r+1]=a>>>0};var a=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];t.substitute=function(e,t){for(var r=0,n=0;n<4;n++){r<<=4,r|=a[64*n+(e>>>18-6*n&63)]}for(n=0;n<4;n++){r<<=4,r|=a[256+64*n+(t>>>18-6*n&63)]}return r>>>0};var i=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];t.permute=function(e){for(var t=0,r=0;r<i.length;r++)t<<=1,t|=e>>>i[r]&1;return t>>>0},t.padSplit=function(e,t,r){for(var n=e.toString(2);n.length<t;)n="0"+n;for(var a=[],i=0;i<t;i+=r)a.push(n.slice(i,i+r));return a.join(" ")}},function(e,t,r){"use strict";var n=r(30),a=r(1),i=r(379),o=r(179);function s(){this.tmp=new Array(2),this.keys=null}function c(e){o.call(this,e);var t=new s;this._desState=t,this.deriveKeys(t,e.key)}a(c,o),e.exports=c,c.create=function(e){return new c(e)};var l=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];c.prototype.deriveKeys=function(e,t){e.keys=new Array(32),n.equal(t.length,this.blockSize,"Invalid key length");var r=i.readUInt32BE(t,0),a=i.readUInt32BE(t,4);i.pc1(r,a,e.tmp,0),r=e.tmp[0],a=e.tmp[1];for(var o=0;o<e.keys.length;o+=2){var s=l[o>>>1];r=i.r28shl(r,s),a=i.r28shl(a,s),i.pc2(r,a,e.keys,o)}},c.prototype._update=function(e,t,r,n){var a=this._desState,o=i.readUInt32BE(e,t),s=i.readUInt32BE(e,t+4);i.ip(o,s,a.tmp,0),o=a.tmp[0],s=a.tmp[1],"encrypt"===this.type?this._encrypt(a,o,s,a.tmp,0):this._decrypt(a,o,s,a.tmp,0),o=a.tmp[0],s=a.tmp[1],i.writeUInt32BE(r,o,n),i.writeUInt32BE(r,s,n+4)},c.prototype._pad=function(e,t){for(var r=e.length-t,n=t;n<e.length;n++)e[n]=r;return!0},c.prototype._unpad=function(e){for(var t=e[e.length-1],r=e.length-t;r<e.length;r++)n.equal(e[r],t);return e.slice(0,e.length-t)},c.prototype._encrypt=function(e,t,r,n,a){for(var o=t,s=r,c=0;c<e.keys.length;c+=2){var l=e.keys[c],u=e.keys[c+1];i.expand(s,e.tmp,0),l^=e.tmp[0],u^=e.tmp[1];var d=i.substitute(l,u),h=s;s=(o^i.permute(d))>>>0,o=h}i.rip(s,o,n,a)},c.prototype._decrypt=function(e,t,r,n,a){for(var o=r,s=t,c=e.keys.length-2;c>=0;c-=2){var l=e.keys[c],u=e.keys[c+1];i.expand(o,e.tmp,0),l^=e.tmp[0],u^=e.tmp[1];var d=i.substitute(l,u),h=o;o=(s^i.permute(d))>>>0,s=h}i.rip(o,s,n,a)}},function(e,t,r){var n=r(89),a=r(2).Buffer,i=r(382);function o(e){var t=e._cipher.encryptBlockRaw(e._prev);return i(e._prev),t}t.encrypt=function(e,t){var r=Math.ceil(t.length/16),i=e._cache.length;e._cache=a.concat([e._cache,a.allocUnsafe(16*r)]);for(var s=0;s<r;s++){var c=o(e),l=i+16*s;e._cache.writeUInt32BE(c[0],l+0),e._cache.writeUInt32BE(c[1],l+4),e._cache.writeUInt32BE(c[2],l+8),e._cache.writeUInt32BE(c[3],l+12)}var u=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),n(t,u)}},function(e,t){e.exports=function(e){for(var t,r=e.length;r--;){if(255!==(t=e.readUInt8(r))){t++,e.writeUInt8(t,r);break}e.writeUInt8(0,r)}}},function(e){e.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},function(e,t,r){var n=r(118),a=r(2).Buffer,i=r(51),o=r(1),s=r(822),c=r(89),l=r(382);function u(e,t,r,o){i.call(this);var c=a.alloc(4,0);this._cipher=new n.AES(t);var u=this._cipher.encryptBlock(c);this._ghash=new s(u),r=function(e,t,r){if(12===t.length)return e._finID=a.concat([t,a.from([0,0,0,1])]),a.concat([t,a.from([0,0,0,2])]);var n=new s(r),i=t.length,o=i%16;n.update(t),o&&(o=16-o,n.update(a.alloc(o,0))),n.update(a.alloc(8,0));var c=8*i,u=a.alloc(8);u.writeUIntBE(c,0,8),n.update(u),e._finID=n.state;var d=a.from(e._finID);return l(d),d}(this,r,u),this._prev=a.from(r),this._cache=a.allocUnsafe(0),this._secCache=a.allocUnsafe(0),this._decrypt=o,this._alen=0,this._len=0,this._mode=e,this._authTag=null,this._called=!1}o(u,i),u.prototype._update=function(e){if(!this._called&&this._alen){var t=16-this._alen%16;t<16&&(t=a.alloc(t,0),this._ghash.update(t))}this._called=!0;var r=this._mode.encrypt(this,e);return this._decrypt?this._ghash.update(e):this._ghash.update(r),this._len+=e.length,r},u.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var e=c(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(e,t){var r=0;e.length!==t.length&&r++;for(var n=Math.min(e.length,t.length),a=0;a<n;++a)r+=e[a]^t[a];return r}(e,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=e,this._cipher.scrub()},u.prototype.getAuthTag=function(){if(this._decrypt||!a.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},u.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},u.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length},e.exports=u},function(e,t,r){var n=r(118),a=r(2).Buffer,i=r(51);function o(e,t,r,o){i.call(this),this._cipher=new n.AES(t),this._prev=a.from(r),this._cache=a.allocUnsafe(0),this._secCache=a.allocUnsafe(0),this._decrypt=o,this._mode=e}r(1)(o,i),o.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},o.prototype._final=function(){this._cipher.scrub()},e.exports=o},function(e,t,r){var n=r(74);e.exports=v,v.simpleSieve=g,v.fermatTest=y;var a=r(16),i=new a(24),o=new(r(387)),s=new a(1),c=new a(2),l=new a(5),u=(new a(16),new a(8),new a(10)),d=new a(3),h=(new a(7),new a(11)),p=new a(4),f=(new a(12),null);function m(){if(null!==f)return f;var e=[];e[0]=2;for(var t=1,r=3;r<1048576;r+=2){for(var n=Math.ceil(Math.sqrt(r)),a=0;a<t&&e[a]<=n&&r%e[a]!=0;a++);t!==a&&e[a]<=n||(e[t++]=r)}return f=e,e}function g(e){for(var t=m(),r=0;r<t.length;r++)if(0===e.modn(t[r]))return 0===e.cmpn(t[r]);return!0}function y(e){var t=a.mont(e);return 0===c.toRed(t).redPow(e.subn(1)).fromRed().cmpn(1)}function v(e,t){if(e<16)return new a(2===t||5===t?[140,123]:[140,39]);var r,f;for(t=new a(t);;){for(r=new a(n(Math.ceil(e/8)));r.bitLength()>e;)r.ishrn(1);if(r.isEven()&&r.iadd(s),r.testn(1)||r.iadd(c),t.cmp(c)){if(!t.cmp(l))for(;r.mod(u).cmp(d);)r.iadd(p)}else for(;r.mod(i).cmp(h);)r.iadd(p);if(g(f=r.shrn(1))&&g(r)&&y(f)&&y(r)&&o.test(f)&&o.test(r))return r}}},function(e,t,r){var n=r(16),a=r(182);function i(e){this.rand=e||new a.Rand}e.exports=i,i.create=function(e){return new i(e)},i.prototype._randbelow=function(e){var t=e.bitLength(),r=Math.ceil(t/8);do{var a=new n(this.rand.generate(r))}while(a.cmp(e)>=0);return a},i.prototype._randrange=function(e,t){var r=t.sub(e);return e.add(this._randbelow(r))},i.prototype.test=function(e,t,r){var a=e.bitLength(),i=n.mont(e),o=new n(1).toRed(i);t||(t=Math.max(1,a/48|0));for(var s=e.subn(1),c=0;!s.testn(c);c++);for(var l=e.shrn(c),u=s.toRed(i);t>0;t--){var d=this._randrange(new n(2),s);r&&r(d);var h=d.toRed(i).redPow(l);if(0!==h.cmp(o)&&0!==h.cmp(u)){for(var p=1;p<c;p++){if(0===(h=h.redSqr()).cmp(o))return!1;if(0===h.cmp(u))break}if(p===c)return!1}}return!0},i.prototype.getDivisor=function(e,t){var r=e.bitLength(),a=n.mont(e),i=new n(1).toRed(a);t||(t=Math.max(1,r/48|0));for(var o=e.subn(1),s=0;!o.testn(s);s++);for(var c=e.shrn(s),l=o.toRed(a);t>0;t--){var u=this._randrange(new n(2),o),d=e.gcd(u);if(0!==d.cmpn(1))return d;var h=u.toRed(a).redPow(c);if(0!==h.cmp(i)&&0!==h.cmp(l)){for(var p=1;p<s;p++){if(0===(h=h.redSqr()).cmp(i))return h.fromRed().subn(1).gcd(e);if(0===h.cmp(l))break}if(p===s)return(h=h.redSqr()).fromRed().subn(1).gcd(e)}}return!1}},function(e,t,r){"use strict";var n=t;function a(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",r=0;r<e.length;r++)t+=a(e[r].toString(16));return t}n.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e);for(n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(n=0;n<e.length;n++){var a=e.charCodeAt(n),i=a>>8,o=255&a;i?r.push(i,o):r.push(o)}return r},n.zero2=a,n.toHex=i,n.encode=function(e,t){return"hex"===t?i(e):e}},function(e,t,r){"use strict";var n=t;n.base=r(121),n.short=r(835),n.mont=r(836),n.edwards=r(837)},function(e,t,r){"use strict";var n=r(42).rotr32;function a(e,t,r){return e&t^~e&r}function i(e,t,r){return e&t^e&r^t&r}function o(e,t,r){return e^t^r}t.ft_1=function(e,t,r,n){return 0===e?a(t,r,n):1===e||3===e?o(t,r,n):2===e?i(t,r,n):void 0},t.ch32=a,t.maj32=i,t.p32=o,t.s0_256=function(e){return n(e,2)^n(e,13)^n(e,22)},t.s1_256=function(e){return n(e,6)^n(e,11)^n(e,25)},t.g0_256=function(e){return n(e,7)^n(e,18)^e>>>3},t.g1_256=function(e){return n(e,17)^n(e,19)^e>>>10}},function(e,t,r){"use strict";var n=r(42),a=r(90),i=r(390),o=r(30),s=n.sum32,c=n.sum32_4,l=n.sum32_5,u=i.ch32,d=i.maj32,h=i.s0_256,p=i.s1_256,f=i.g0_256,m=i.g1_256,g=a.BlockHash,y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function v(){if(!(this instanceof v))return new v;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=y,this.W=new Array(64)}n.inherits(v,g),e.exports=v,v.blockSize=512,v.outSize=256,v.hmacStrength=192,v.padLength=64,v.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=c(m(r[n-2]),r[n-7],f(r[n-15]),r[n-16]);var a=this.h[0],i=this.h[1],g=this.h[2],y=this.h[3],v=this.h[4],b=this.h[5],_=this.h[6],w=this.h[7];for(o(this.k.length===r.length),n=0;n<r.length;n++){var x=l(w,p(v),u(v,b,_),this.k[n],r[n]),k=s(h(a),d(a,i,g));w=_,_=b,b=v,v=s(y,x),y=g,g=i,i=a,a=s(x,k)}this.h[0]=s(this.h[0],a),this.h[1]=s(this.h[1],i),this.h[2]=s(this.h[2],g),this.h[3]=s(this.h[3],y),this.h[4]=s(this.h[4],v),this.h[5]=s(this.h[5],b),this.h[6]=s(this.h[6],_),this.h[7]=s(this.h[7],w)},v.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(e,t,r){"use strict";var n=r(42),a=r(90),i=r(30),o=n.rotr64_hi,s=n.rotr64_lo,c=n.shr64_hi,l=n.shr64_lo,u=n.sum64,d=n.sum64_hi,h=n.sum64_lo,p=n.sum64_4_hi,f=n.sum64_4_lo,m=n.sum64_5_hi,g=n.sum64_5_lo,y=a.BlockHash,v=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;y.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=v,this.W=new Array(160)}function _(e,t,r,n,a){var i=e&r^~e&a;return i<0&&(i+=4294967296),i}function w(e,t,r,n,a,i){var o=t&n^~t&i;return o<0&&(o+=4294967296),o}function x(e,t,r,n,a){var i=e&r^e&a^r&a;return i<0&&(i+=4294967296),i}function k(e,t,r,n,a,i){var o=t&n^t&i^n&i;return o<0&&(o+=4294967296),o}function S(e,t){var r=o(e,t,28)^o(t,e,2)^o(t,e,7);return r<0&&(r+=4294967296),r}function E(e,t){var r=s(e,t,28)^s(t,e,2)^s(t,e,7);return r<0&&(r+=4294967296),r}function A(e,t){var r=o(e,t,14)^o(e,t,18)^o(t,e,9);return r<0&&(r+=4294967296),r}function P(e,t){var r=s(e,t,14)^s(e,t,18)^s(t,e,9);return r<0&&(r+=4294967296),r}function C(e,t){var r=o(e,t,1)^o(e,t,8)^c(e,t,7);return r<0&&(r+=4294967296),r}function D(e,t){var r=s(e,t,1)^s(e,t,8)^l(e,t,7);return r<0&&(r+=4294967296),r}function T(e,t){var r=o(e,t,19)^o(t,e,29)^c(e,t,6);return r<0&&(r+=4294967296),r}function O(e,t){var r=s(e,t,19)^s(t,e,29)^l(e,t,6);return r<0&&(r+=4294967296),r}n.inherits(b,y),e.exports=b,b.blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var a=T(r[n-4],r[n-3]),i=O(r[n-4],r[n-3]),o=r[n-14],s=r[n-13],c=C(r[n-30],r[n-29]),l=D(r[n-30],r[n-29]),u=r[n-32],d=r[n-31];r[n]=p(a,i,o,s,c,l,u,d),r[n+1]=f(a,i,o,s,c,l,u,d)}},b.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,n=this.h[0],a=this.h[1],o=this.h[2],s=this.h[3],c=this.h[4],l=this.h[5],p=this.h[6],f=this.h[7],y=this.h[8],v=this.h[9],b=this.h[10],C=this.h[11],D=this.h[12],T=this.h[13],O=this.h[14],M=this.h[15];i(this.k.length===r.length);for(var I=0;I<r.length;I+=2){var R=O,F=M,B=A(y,v),j=P(y,v),N=_(y,v,b,C,D),q=w(y,v,b,C,D,T),L=this.k[I],U=this.k[I+1],z=r[I],H=r[I+1],$=m(R,F,B,j,N,q,L,U,z,H),G=g(R,F,B,j,N,q,L,U,z,H);R=S(n,a),F=E(n,a),B=x(n,a,o,s,c),j=k(n,a,o,s,c,l);var K=d(R,F,B,j),V=h(R,F,B,j);O=D,M=T,D=b,T=C,b=y,C=v,y=d(p,f,$,G),v=h(f,f,$,G),p=c,f=l,c=o,l=s,o=n,s=a,n=d($,G,K,V),a=h($,G,K,V)}u(this.h,0,n,a),u(this.h,2,o,s),u(this.h,4,c,l),u(this.h,6,p,f),u(this.h,8,y,v),u(this.h,10,b,C),u(this.h,12,D,T),u(this.h,14,O,M)},b.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(e,t,r){(function(e){!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function a(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function i(e,t,r){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(852).Buffer}catch(e){}function s(e,t){var r=e.charCodeAt(t);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+e)}function c(e,t,r){var n=s(e,r);return r-1>=t&&(n|=s(e,r-1)<<4),n}function l(e,t,r,a){for(var i=0,o=0,s=Math.min(e.length,r),c=t;c<s;c++){var l=e.charCodeAt(c)-48;i*=a,o=l>=49?l-49+10:l>=17?l-17+10:l,n(l>=0&&o<a,"Invalid character"),i+=o}return i}function u(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var a=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(a++,this.negative=1),a<e.length&&(16===t?this._parseHex(e,a,r):(this._parseBase(e,t,a),"le"===r&&this._initArray(this.toArray(),t,r)))},i.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},i.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var i,o,s=0;if("be"===r)for(a=e.length-1,i=0;a>=0;a-=3)o=e[a]|e[a-1]<<8|e[a-2]<<16,this.words[i]|=o<<s&67108863,this.words[i+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,i++);else if("le"===r)for(a=0,i=0;a<e.length;a+=3)o=e[a]|e[a+1]<<8|e[a+2]<<16,this.words[i]|=o<<s&67108863,this.words[i+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,i++);return this._strip()},i.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var a,i=0,o=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)a=c(e,t,n)<<i,this.words[o]|=67108863&a,i>=18?(i-=18,o+=1,this.words[o]|=a>>>26):i+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)a=c(e,t,n)<<i,this.words[o]|=67108863&a,i>=18?(i-=18,o+=1,this.words[o]|=a>>>26):i+=8;this._strip()},i.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,a=1;a<=67108863;a*=t)n++;n--,a=a/t|0;for(var i=e.length-r,o=i%n,s=Math.min(i,i-o)+r,c=0,u=r;u<s;u+=n)c=l(e,u,u+n,t),this.imuln(a),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==o){var d=1;for(c=l(e,u,e.length,t),u=0;u<o;u++)d*=t;this.imuln(d),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype._move=function(e){u(e,this)},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch(e){i.prototype.inspect=d}else i.prototype.inspect=d;function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var a=0,i=0,o=0;o<this.length;o++){var s=this.words[o],c=(16777215&(s<<a|i)).toString(16);r=0!==(i=s>>>24-a&16777215)||o!==this.length-1?h[6-c.length]+c+r:c+r,(a+=2)>=26&&(a-=26,o--)}for(0!==i&&(r=i.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var l=p[e],u=f[e];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modrn(u).toString(e);r=(d=d.idivn(u)).isZero()?m+r:h[l-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(e,t){return this.toArrayLike(o,e,t)}),i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function m(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var a=0|e.words[0],i=0|t.words[0],o=a*i,s=67108863&o,c=o/67108864|0;r.words[0]=s;for(var l=1;l<n;l++){for(var u=c>>>26,d=67108863&c,h=Math.min(l,t.length-1),p=Math.max(0,l-e.length+1);p<=h;p++){var f=l-p|0;u+=(o=(a=0|e.words[f])*(i=0|t.words[p])+d)/67108864|0,d=67108863&o}r.words[l]=0|d,c=0|u}return 0!==c?r.words[l]=0|c:r.length--,r._strip()}i.prototype.toArrayLike=function(e,t,r){this._strip();var a=this.byteLength(),i=r||Math.max(1,a);n(a<=i,"byte array longer than desired length"),n(i>0,"Requested array length <= 0");var o=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,i);return this["_toArrayLike"+("le"===t?"LE":"BE")](o,a),o},i.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,a=0,i=0;a<this.length;a++){var o=this.words[a]<<i|n;e[r++]=255&o,r<e.length&&(e[r++]=o>>8&255),r<e.length&&(e[r++]=o>>16&255),6===i?(r<e.length&&(e[r++]=o>>24&255),n=0,i=0):(n=o>>>24,i+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},i.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,a=0,i=0;a<this.length;a++){var o=this.words[a]<<i|n;e[r--]=255&o,r>=0&&(e[r--]=o>>8&255),r>=0&&(e[r--]=o>>16&255),6===i?(r>=0&&(e[r--]=o>>24&255),n=0,i=0):(n=o>>>24,i+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},i.prototype.ior=function(e){return n(0==(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},i.prototype.iand=function(e){return n(0==(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},i.prototype.ixor=function(e){return n(0==(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var a=0;a<t;a++)this.words[a]=67108863&~this.words[a];return r>0&&(this.words[a]=~this.words[a]&67108863>>26-r),this._strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,a=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<a:this.words[r]&~(1<<a),this._strip()},i.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var a=0,i=0;i<n.length;i++)t=(0|r.words[i])+(0|n.words[i])+a,this.words[i]=67108863&t,a=t>>>26;for(;0!==a&&i<r.length;i++)t=(0|r.words[i])+a,this.words[i]=67108863&t,a=t>>>26;if(this.length=r.length,0!==a)this.words[this.length]=a,this.length++;else if(r!==this)for(;i<r.length;i++)this.words[i]=r.words[i];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,a=this.cmp(e);if(0===a)return this.negative=0,this.length=1,this.words[0]=0,this;a>0?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)i=(t=(0|r.words[o])-(0|n.words[o])+i)>>26,this.words[o]=67108863&t;for(;0!==i&&o<r.length;o++)i=(t=(0|r.words[o])+i)>>26,this.words[o]=67108863&t;if(0===i&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var g=function(e,t,r){var n,a,i,o=e.words,s=t.words,c=r.words,l=0,u=0|o[0],d=8191&u,h=u>>>13,p=0|o[1],f=8191&p,m=p>>>13,g=0|o[2],y=8191&g,v=g>>>13,b=0|o[3],_=8191&b,w=b>>>13,x=0|o[4],k=8191&x,S=x>>>13,E=0|o[5],A=8191&E,P=E>>>13,C=0|o[6],D=8191&C,T=C>>>13,O=0|o[7],M=8191&O,I=O>>>13,R=0|o[8],F=8191&R,B=R>>>13,j=0|o[9],N=8191&j,q=j>>>13,L=0|s[0],U=8191&L,z=L>>>13,H=0|s[1],$=8191&H,G=H>>>13,K=0|s[2],V=8191&K,W=K>>>13,Y=0|s[3],J=8191&Y,Q=Y>>>13,X=0|s[4],Z=8191&X,ee=X>>>13,te=0|s[5],re=8191&te,ne=te>>>13,ae=0|s[6],ie=8191&ae,oe=ae>>>13,se=0|s[7],ce=8191&se,le=se>>>13,ue=0|s[8],de=8191&ue,he=ue>>>13,pe=0|s[9],fe=8191&pe,me=pe>>>13;r.negative=e.negative^t.negative,r.length=19;var ge=(l+(n=Math.imul(d,U))|0)+((8191&(a=(a=Math.imul(d,z))+Math.imul(h,U)|0))<<13)|0;l=((i=Math.imul(h,z))+(a>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(f,U),a=(a=Math.imul(f,z))+Math.imul(m,U)|0,i=Math.imul(m,z);var ye=(l+(n=n+Math.imul(d,$)|0)|0)+((8191&(a=(a=a+Math.imul(d,G)|0)+Math.imul(h,$)|0))<<13)|0;l=((i=i+Math.imul(h,G)|0)+(a>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(y,U),a=(a=Math.imul(y,z))+Math.imul(v,U)|0,i=Math.imul(v,z),n=n+Math.imul(f,$)|0,a=(a=a+Math.imul(f,G)|0)+Math.imul(m,$)|0,i=i+Math.imul(m,G)|0;var ve=(l+(n=n+Math.imul(d,V)|0)|0)+((8191&(a=(a=a+Math.imul(d,W)|0)+Math.imul(h,V)|0))<<13)|0;l=((i=i+Math.imul(h,W)|0)+(a>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(_,U),a=(a=Math.imul(_,z))+Math.imul(w,U)|0,i=Math.imul(w,z),n=n+Math.imul(y,$)|0,a=(a=a+Math.imul(y,G)|0)+Math.imul(v,$)|0,i=i+Math.imul(v,G)|0,n=n+Math.imul(f,V)|0,a=(a=a+Math.imul(f,W)|0)+Math.imul(m,V)|0,i=i+Math.imul(m,W)|0;var be=(l+(n=n+Math.imul(d,J)|0)|0)+((8191&(a=(a=a+Math.imul(d,Q)|0)+Math.imul(h,J)|0))<<13)|0;l=((i=i+Math.imul(h,Q)|0)+(a>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(k,U),a=(a=Math.imul(k,z))+Math.imul(S,U)|0,i=Math.imul(S,z),n=n+Math.imul(_,$)|0,a=(a=a+Math.imul(_,G)|0)+Math.imul(w,$)|0,i=i+Math.imul(w,G)|0,n=n+Math.imul(y,V)|0,a=(a=a+Math.imul(y,W)|0)+Math.imul(v,V)|0,i=i+Math.imul(v,W)|0,n=n+Math.imul(f,J)|0,a=(a=a+Math.imul(f,Q)|0)+Math.imul(m,J)|0,i=i+Math.imul(m,Q)|0;var _e=(l+(n=n+Math.imul(d,Z)|0)|0)+((8191&(a=(a=a+Math.imul(d,ee)|0)+Math.imul(h,Z)|0))<<13)|0;l=((i=i+Math.imul(h,ee)|0)+(a>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(A,U),a=(a=Math.imul(A,z))+Math.imul(P,U)|0,i=Math.imul(P,z),n=n+Math.imul(k,$)|0,a=(a=a+Math.imul(k,G)|0)+Math.imul(S,$)|0,i=i+Math.imul(S,G)|0,n=n+Math.imul(_,V)|0,a=(a=a+Math.imul(_,W)|0)+Math.imul(w,V)|0,i=i+Math.imul(w,W)|0,n=n+Math.imul(y,J)|0,a=(a=a+Math.imul(y,Q)|0)+Math.imul(v,J)|0,i=i+Math.imul(v,Q)|0,n=n+Math.imul(f,Z)|0,a=(a=a+Math.imul(f,ee)|0)+Math.imul(m,Z)|0,i=i+Math.imul(m,ee)|0;var we=(l+(n=n+Math.imul(d,re)|0)|0)+((8191&(a=(a=a+Math.imul(d,ne)|0)+Math.imul(h,re)|0))<<13)|0;l=((i=i+Math.imul(h,ne)|0)+(a>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(D,U),a=(a=Math.imul(D,z))+Math.imul(T,U)|0,i=Math.imul(T,z),n=n+Math.imul(A,$)|0,a=(a=a+Math.imul(A,G)|0)+Math.imul(P,$)|0,i=i+Math.imul(P,G)|0,n=n+Math.imul(k,V)|0,a=(a=a+Math.imul(k,W)|0)+Math.imul(S,V)|0,i=i+Math.imul(S,W)|0,n=n+Math.imul(_,J)|0,a=(a=a+Math.imul(_,Q)|0)+Math.imul(w,J)|0,i=i+Math.imul(w,Q)|0,n=n+Math.imul(y,Z)|0,a=(a=a+Math.imul(y,ee)|0)+Math.imul(v,Z)|0,i=i+Math.imul(v,ee)|0,n=n+Math.imul(f,re)|0,a=(a=a+Math.imul(f,ne)|0)+Math.imul(m,re)|0,i=i+Math.imul(m,ne)|0;var xe=(l+(n=n+Math.imul(d,ie)|0)|0)+((8191&(a=(a=a+Math.imul(d,oe)|0)+Math.imul(h,ie)|0))<<13)|0;l=((i=i+Math.imul(h,oe)|0)+(a>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(M,U),a=(a=Math.imul(M,z))+Math.imul(I,U)|0,i=Math.imul(I,z),n=n+Math.imul(D,$)|0,a=(a=a+Math.imul(D,G)|0)+Math.imul(T,$)|0,i=i+Math.imul(T,G)|0,n=n+Math.imul(A,V)|0,a=(a=a+Math.imul(A,W)|0)+Math.imul(P,V)|0,i=i+Math.imul(P,W)|0,n=n+Math.imul(k,J)|0,a=(a=a+Math.imul(k,Q)|0)+Math.imul(S,J)|0,i=i+Math.imul(S,Q)|0,n=n+Math.imul(_,Z)|0,a=(a=a+Math.imul(_,ee)|0)+Math.imul(w,Z)|0,i=i+Math.imul(w,ee)|0,n=n+Math.imul(y,re)|0,a=(a=a+Math.imul(y,ne)|0)+Math.imul(v,re)|0,i=i+Math.imul(v,ne)|0,n=n+Math.imul(f,ie)|0,a=(a=a+Math.imul(f,oe)|0)+Math.imul(m,ie)|0,i=i+Math.imul(m,oe)|0;var ke=(l+(n=n+Math.imul(d,ce)|0)|0)+((8191&(a=(a=a+Math.imul(d,le)|0)+Math.imul(h,ce)|0))<<13)|0;l=((i=i+Math.imul(h,le)|0)+(a>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(F,U),a=(a=Math.imul(F,z))+Math.imul(B,U)|0,i=Math.imul(B,z),n=n+Math.imul(M,$)|0,a=(a=a+Math.imul(M,G)|0)+Math.imul(I,$)|0,i=i+Math.imul(I,G)|0,n=n+Math.imul(D,V)|0,a=(a=a+Math.imul(D,W)|0)+Math.imul(T,V)|0,i=i+Math.imul(T,W)|0,n=n+Math.imul(A,J)|0,a=(a=a+Math.imul(A,Q)|0)+Math.imul(P,J)|0,i=i+Math.imul(P,Q)|0,n=n+Math.imul(k,Z)|0,a=(a=a+Math.imul(k,ee)|0)+Math.imul(S,Z)|0,i=i+Math.imul(S,ee)|0,n=n+Math.imul(_,re)|0,a=(a=a+Math.imul(_,ne)|0)+Math.imul(w,re)|0,i=i+Math.imul(w,ne)|0,n=n+Math.imul(y,ie)|0,a=(a=a+Math.imul(y,oe)|0)+Math.imul(v,ie)|0,i=i+Math.imul(v,oe)|0,n=n+Math.imul(f,ce)|0,a=(a=a+Math.imul(f,le)|0)+Math.imul(m,ce)|0,i=i+Math.imul(m,le)|0;var Se=(l+(n=n+Math.imul(d,de)|0)|0)+((8191&(a=(a=a+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;l=((i=i+Math.imul(h,he)|0)+(a>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(N,U),a=(a=Math.imul(N,z))+Math.imul(q,U)|0,i=Math.imul(q,z),n=n+Math.imul(F,$)|0,a=(a=a+Math.imul(F,G)|0)+Math.imul(B,$)|0,i=i+Math.imul(B,G)|0,n=n+Math.imul(M,V)|0,a=(a=a+Math.imul(M,W)|0)+Math.imul(I,V)|0,i=i+Math.imul(I,W)|0,n=n+Math.imul(D,J)|0,a=(a=a+Math.imul(D,Q)|0)+Math.imul(T,J)|0,i=i+Math.imul(T,Q)|0,n=n+Math.imul(A,Z)|0,a=(a=a+Math.imul(A,ee)|0)+Math.imul(P,Z)|0,i=i+Math.imul(P,ee)|0,n=n+Math.imul(k,re)|0,a=(a=a+Math.imul(k,ne)|0)+Math.imul(S,re)|0,i=i+Math.imul(S,ne)|0,n=n+Math.imul(_,ie)|0,a=(a=a+Math.imul(_,oe)|0)+Math.imul(w,ie)|0,i=i+Math.imul(w,oe)|0,n=n+Math.imul(y,ce)|0,a=(a=a+Math.imul(y,le)|0)+Math.imul(v,ce)|0,i=i+Math.imul(v,le)|0,n=n+Math.imul(f,de)|0,a=(a=a+Math.imul(f,he)|0)+Math.imul(m,de)|0,i=i+Math.imul(m,he)|0;var Ee=(l+(n=n+Math.imul(d,fe)|0)|0)+((8191&(a=(a=a+Math.imul(d,me)|0)+Math.imul(h,fe)|0))<<13)|0;l=((i=i+Math.imul(h,me)|0)+(a>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(N,$),a=(a=Math.imul(N,G))+Math.imul(q,$)|0,i=Math.imul(q,G),n=n+Math.imul(F,V)|0,a=(a=a+Math.imul(F,W)|0)+Math.imul(B,V)|0,i=i+Math.imul(B,W)|0,n=n+Math.imul(M,J)|0,a=(a=a+Math.imul(M,Q)|0)+Math.imul(I,J)|0,i=i+Math.imul(I,Q)|0,n=n+Math.imul(D,Z)|0,a=(a=a+Math.imul(D,ee)|0)+Math.imul(T,Z)|0,i=i+Math.imul(T,ee)|0,n=n+Math.imul(A,re)|0,a=(a=a+Math.imul(A,ne)|0)+Math.imul(P,re)|0,i=i+Math.imul(P,ne)|0,n=n+Math.imul(k,ie)|0,a=(a=a+Math.imul(k,oe)|0)+Math.imul(S,ie)|0,i=i+Math.imul(S,oe)|0,n=n+Math.imul(_,ce)|0,a=(a=a+Math.imul(_,le)|0)+Math.imul(w,ce)|0,i=i+Math.imul(w,le)|0,n=n+Math.imul(y,de)|0,a=(a=a+Math.imul(y,he)|0)+Math.imul(v,de)|0,i=i+Math.imul(v,he)|0;var Ae=(l+(n=n+Math.imul(f,fe)|0)|0)+((8191&(a=(a=a+Math.imul(f,me)|0)+Math.imul(m,fe)|0))<<13)|0;l=((i=i+Math.imul(m,me)|0)+(a>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(N,V),a=(a=Math.imul(N,W))+Math.imul(q,V)|0,i=Math.imul(q,W),n=n+Math.imul(F,J)|0,a=(a=a+Math.imul(F,Q)|0)+Math.imul(B,J)|0,i=i+Math.imul(B,Q)|0,n=n+Math.imul(M,Z)|0,a=(a=a+Math.imul(M,ee)|0)+Math.imul(I,Z)|0,i=i+Math.imul(I,ee)|0,n=n+Math.imul(D,re)|0,a=(a=a+Math.imul(D,ne)|0)+Math.imul(T,re)|0,i=i+Math.imul(T,ne)|0,n=n+Math.imul(A,ie)|0,a=(a=a+Math.imul(A,oe)|0)+Math.imul(P,ie)|0,i=i+Math.imul(P,oe)|0,n=n+Math.imul(k,ce)|0,a=(a=a+Math.imul(k,le)|0)+Math.imul(S,ce)|0,i=i+Math.imul(S,le)|0,n=n+Math.imul(_,de)|0,a=(a=a+Math.imul(_,he)|0)+Math.imul(w,de)|0,i=i+Math.imul(w,he)|0;var Pe=(l+(n=n+Math.imul(y,fe)|0)|0)+((8191&(a=(a=a+Math.imul(y,me)|0)+Math.imul(v,fe)|0))<<13)|0;l=((i=i+Math.imul(v,me)|0)+(a>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(N,J),a=(a=Math.imul(N,Q))+Math.imul(q,J)|0,i=Math.imul(q,Q),n=n+Math.imul(F,Z)|0,a=(a=a+Math.imul(F,ee)|0)+Math.imul(B,Z)|0,i=i+Math.imul(B,ee)|0,n=n+Math.imul(M,re)|0,a=(a=a+Math.imul(M,ne)|0)+Math.imul(I,re)|0,i=i+Math.imul(I,ne)|0,n=n+Math.imul(D,ie)|0,a=(a=a+Math.imul(D,oe)|0)+Math.imul(T,ie)|0,i=i+Math.imul(T,oe)|0,n=n+Math.imul(A,ce)|0,a=(a=a+Math.imul(A,le)|0)+Math.imul(P,ce)|0,i=i+Math.imul(P,le)|0,n=n+Math.imul(k,de)|0,a=(a=a+Math.imul(k,he)|0)+Math.imul(S,de)|0,i=i+Math.imul(S,he)|0;var Ce=(l+(n=n+Math.imul(_,fe)|0)|0)+((8191&(a=(a=a+Math.imul(_,me)|0)+Math.imul(w,fe)|0))<<13)|0;l=((i=i+Math.imul(w,me)|0)+(a>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(N,Z),a=(a=Math.imul(N,ee))+Math.imul(q,Z)|0,i=Math.imul(q,ee),n=n+Math.imul(F,re)|0,a=(a=a+Math.imul(F,ne)|0)+Math.imul(B,re)|0,i=i+Math.imul(B,ne)|0,n=n+Math.imul(M,ie)|0,a=(a=a+Math.imul(M,oe)|0)+Math.imul(I,ie)|0,i=i+Math.imul(I,oe)|0,n=n+Math.imul(D,ce)|0,a=(a=a+Math.imul(D,le)|0)+Math.imul(T,ce)|0,i=i+Math.imul(T,le)|0,n=n+Math.imul(A,de)|0,a=(a=a+Math.imul(A,he)|0)+Math.imul(P,de)|0,i=i+Math.imul(P,he)|0;var De=(l+(n=n+Math.imul(k,fe)|0)|0)+((8191&(a=(a=a+Math.imul(k,me)|0)+Math.imul(S,fe)|0))<<13)|0;l=((i=i+Math.imul(S,me)|0)+(a>>>13)|0)+(De>>>26)|0,De&=67108863,n=Math.imul(N,re),a=(a=Math.imul(N,ne))+Math.imul(q,re)|0,i=Math.imul(q,ne),n=n+Math.imul(F,ie)|0,a=(a=a+Math.imul(F,oe)|0)+Math.imul(B,ie)|0,i=i+Math.imul(B,oe)|0,n=n+Math.imul(M,ce)|0,a=(a=a+Math.imul(M,le)|0)+Math.imul(I,ce)|0,i=i+Math.imul(I,le)|0,n=n+Math.imul(D,de)|0,a=(a=a+Math.imul(D,he)|0)+Math.imul(T,de)|0,i=i+Math.imul(T,he)|0;var Te=(l+(n=n+Math.imul(A,fe)|0)|0)+((8191&(a=(a=a+Math.imul(A,me)|0)+Math.imul(P,fe)|0))<<13)|0;l=((i=i+Math.imul(P,me)|0)+(a>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(N,ie),a=(a=Math.imul(N,oe))+Math.imul(q,ie)|0,i=Math.imul(q,oe),n=n+Math.imul(F,ce)|0,a=(a=a+Math.imul(F,le)|0)+Math.imul(B,ce)|0,i=i+Math.imul(B,le)|0,n=n+Math.imul(M,de)|0,a=(a=a+Math.imul(M,he)|0)+Math.imul(I,de)|0,i=i+Math.imul(I,he)|0;var Oe=(l+(n=n+Math.imul(D,fe)|0)|0)+((8191&(a=(a=a+Math.imul(D,me)|0)+Math.imul(T,fe)|0))<<13)|0;l=((i=i+Math.imul(T,me)|0)+(a>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(N,ce),a=(a=Math.imul(N,le))+Math.imul(q,ce)|0,i=Math.imul(q,le),n=n+Math.imul(F,de)|0,a=(a=a+Math.imul(F,he)|0)+Math.imul(B,de)|0,i=i+Math.imul(B,he)|0;var Me=(l+(n=n+Math.imul(M,fe)|0)|0)+((8191&(a=(a=a+Math.imul(M,me)|0)+Math.imul(I,fe)|0))<<13)|0;l=((i=i+Math.imul(I,me)|0)+(a>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul(N,de),a=(a=Math.imul(N,he))+Math.imul(q,de)|0,i=Math.imul(q,he);var Ie=(l+(n=n+Math.imul(F,fe)|0)|0)+((8191&(a=(a=a+Math.imul(F,me)|0)+Math.imul(B,fe)|0))<<13)|0;l=((i=i+Math.imul(B,me)|0)+(a>>>13)|0)+(Ie>>>26)|0,Ie&=67108863;var Re=(l+(n=Math.imul(N,fe))|0)+((8191&(a=(a=Math.imul(N,me))+Math.imul(q,fe)|0))<<13)|0;return l=((i=Math.imul(q,me))+(a>>>13)|0)+(Re>>>26)|0,Re&=67108863,c[0]=ge,c[1]=ye,c[2]=ve,c[3]=be,c[4]=_e,c[5]=we,c[6]=xe,c[7]=ke,c[8]=Se,c[9]=Ee,c[10]=Ae,c[11]=Pe,c[12]=Ce,c[13]=De,c[14]=Te,c[15]=Oe,c[16]=Me,c[17]=Ie,c[18]=Re,0!==l&&(c[19]=l,r.length++),r};function y(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,a=0,i=0;i<r.length-1;i++){var o=a;a=0;for(var s=67108863&n,c=Math.min(i,t.length-1),l=Math.max(0,i-e.length+1);l<=c;l++){var u=i-l,d=(0|e.words[u])*(0|t.words[l]),h=67108863&d;s=67108863&(h=h+s|0),a+=(o=(o=o+(d/67108864|0)|0)+(h>>>26)|0)>>>26,o&=67108863}r.words[i]=s,n=o,o=a}return 0!==n?r.words[i]=n:r.length--,r._strip()}function v(e,t,r){return y(e,t,r)}function b(e,t){this.x=e,this.y=t}Math.imul||(g=m),i.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?g(this,e,t):r<63?m(this,e,t):r<1024?y(this,e,t):v(this,e,t)},b.prototype.makeRBT=function(e){for(var t=new Array(e),r=i.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},b.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,a=0;a<t;a++)n|=(1&e)<<t-a-1,e>>=1;return n},b.prototype.permute=function(e,t,r,n,a,i){for(var o=0;o<i;o++)n[o]=t[e[o]],a[o]=r[e[o]]},b.prototype.transform=function(e,t,r,n,a,i){this.permute(i,e,t,r,n,a);for(var o=1;o<a;o<<=1)for(var s=o<<1,c=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),u=0;u<a;u+=s)for(var d=c,h=l,p=0;p<o;p++){var f=r[u+p],m=n[u+p],g=r[u+p+o],y=n[u+p+o],v=d*g-h*y;y=d*y+h*g,g=v,r[u+p]=f+g,n[u+p]=m+y,r[u+p+o]=f-g,n[u+p+o]=m-y,p!==s&&(v=c*d-l*h,h=c*h+l*d,d=v)}},b.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,a=0;for(r=r/2|0;r;r>>>=1)a++;return 1<<a+1+n},b.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var a=e[n];e[n]=e[r-n-1],e[r-n-1]=a,a=t[n],t[n]=-t[r-n-1],t[r-n-1]=-a}},b.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var a=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&a,r=a<67108864?0:a/67108864|0}return e},b.prototype.convert13b=function(e,t,r,a){for(var i=0,o=0;o<t;o++)i+=0|e[o],r[2*o]=8191&i,i>>>=13,r[2*o+1]=8191&i,i>>>=13;for(o=2*t;o<a;++o)r[o]=0;n(0===i),n(0==(-8192&i))},b.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},b.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),a=this.makeRBT(n),i=this.stub(n),o=new Array(n),s=new Array(n),c=new Array(n),l=new Array(n),u=new Array(n),d=new Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,o,n),this.convert13b(t.words,t.length,l,n),this.transform(o,i,s,c,n,a),this.transform(l,i,u,d,n,a);for(var p=0;p<n;p++){var f=s[p]*u[p]-c[p]*d[p];c[p]=s[p]*d[p]+c[p]*u[p],s[p]=f}return this.conjugate(s,c,n),this.transform(s,c,h,i,n,a),this.conjugate(h,i,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),v(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){var t=e<0;t&&(e=-e),n("number"==typeof e),n(e<67108864);for(var r=0,a=0;a<this.length;a++){var i=(0|this.words[a])*e,o=(67108863&i)+(67108863&r);r>>=26,r+=i/67108864|0,r+=o>>>26,this.words[a]=67108863&o}return 0!==r&&(this.words[a]=r,this.length++),t?this.ineg():this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,a=r%26;t[r]=e.words[n]>>>a&1}return t}(e);if(0===t.length)return new i(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var a=r.sqr();n<t.length;n++,a=a.sqr())0!==t[n]&&(r=r.mul(a));return r},i.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,a=(e-r)/26,i=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(t=0;t<this.length;t++){var s=this.words[t]&i,c=(0|this.words[t])-s<<r;this.words[t]=c|o,o=s>>>26-r}o&&(this.words[t]=o,this.length++)}if(0!==a){for(t=this.length-1;t>=0;t--)this.words[t+a]=this.words[t];for(t=0;t<a;t++)this.words[t]=0;this.length+=a}return this._strip()},i.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,r){var a;n("number"==typeof e&&e>=0),a=t?(t-t%26)/26:0;var i=e%26,o=Math.min((e-i)/26,this.length),s=67108863^67108863>>>i<<i,c=r;if(a-=o,a=Math.max(0,a),c){for(var l=0;l<o;l++)c.words[l]=this.words[l];c.length=o}if(0===o);else if(this.length>o)for(this.length-=o,l=0;l<this.length;l++)this.words[l]=this.words[l+o];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=a);l--){var d=0|this.words[l];this.words[l]=u<<26-i|d>>>i,u=d&s}return c&&0!==u&&(c.words[c.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,a=1<<t;return!(this.length<=r)&&!!(this.words[r]&a)},i.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var a=67108863^67108863>>>t<<t;this.words[this.length-1]&=a}return this._strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,r){var a,i,o=e.length+r;this._expand(o);var s=0;for(a=0;a<e.length;a++){i=(0|this.words[a+r])+s;var c=(0|e.words[a])*t;s=((i-=67108863&c)>>26)-(c/67108864|0),this.words[a+r]=67108863&i}for(;a<this.length-r;a++)s=(i=(0|this.words[a+r])+s)>>26,this.words[a+r]=67108863&i;if(0===s)return this._strip();for(n(-1===s),s=0,a=0;a<this.length;a++)s=(i=-(0|this.words[a])+s)>>26,this.words[a]=67108863&i;return this.negative=1,this._strip()},i.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),a=e,o=0|a.words[a.length-1];0!==(r=26-this._countBits(o))&&(a=a.ushln(r),n.iushln(r),o=0|a.words[a.length-1]);var s,c=n.length-a.length;if("mod"!==t){(s=new i(null)).length=c+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var u=n.clone()._ishlnsubmul(a,1,c);0===u.negative&&(n=u,s&&(s.words[c]=1));for(var d=c-1;d>=0;d--){var h=67108864*(0|n.words[a.length+d])+(0|n.words[a.length+d-1]);for(h=Math.min(h/o|0,67108863),n._ishlnsubmul(a,h,d);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(a,1,d),n.isZero()||(n.negative^=1);s&&(s.words[d]=h)}return s&&s._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},i.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(a=s.div.neg()),"div"!==t&&(o=s.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:a,mod:o}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(a=s.div.neg()),{div:a,mod:s.mod}):0!=(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(o=s.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:s.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modrn(e.words[0]))}:this._wordDiv(e,t);var a,o,s},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),a=e.andln(1),i=r.cmp(n);return i<0||1===a&&0===i?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modrn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=(1<<26)%e,a=0,i=this.length-1;i>=0;i--)a=(r*a+(0|this.words[i]))%e;return t?-a:a},i.prototype.modn=function(e){return this.modrn(e)},i.prototype.idivn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=0,a=this.length-1;a>=0;a--){var i=(0|this.words[a])+67108864*r;this.words[a]=i/e|0,r=i%e}return this._strip(),t?this.ineg():this},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a=new i(1),o=new i(0),s=new i(0),c=new i(1),l=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++l;for(var u=r.clone(),d=t.clone();!t.isZero();){for(var h=0,p=1;0==(t.words[0]&p)&&h<26;++h,p<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(a.isOdd()||o.isOdd())&&(a.iadd(u),o.isub(d)),a.iushrn(1),o.iushrn(1);for(var f=0,m=1;0==(r.words[0]&m)&&f<26;++f,m<<=1);if(f>0)for(r.iushrn(f);f-- >0;)(s.isOdd()||c.isOdd())&&(s.iadd(u),c.isub(d)),s.iushrn(1),c.iushrn(1);t.cmp(r)>=0?(t.isub(r),a.isub(s),o.isub(c)):(r.isub(t),s.isub(a),c.isub(o))}return{a:s,b:c,gcd:r.iushln(l)}},i.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a,o=new i(1),s=new i(0),c=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var l=0,u=1;0==(t.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(t.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);for(var d=0,h=1;0==(r.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(r.iushrn(d);d-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);t.cmp(r)>=0?(t.isub(r),o.isub(s)):(r.isub(t),s.isub(o))}return(a=0===t.cmpn(1)?o:s).cmpn(0)<0&&a.iadd(e),a},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var a=t.cmp(r);if(a<0){var i=t;t=r,r=i}else if(0===a||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,a=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=a,this;for(var i=a,o=r;0!==i&&o<this.length;o++){var s=0|this.words[o];i=(s+=i)>>>26,s&=67108863,this.words[o]=s}return 0!==i&&(this.words[o]=i,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var a=0|this.words[0];t=a===e?0:a<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],a=0|e.words[r];if(n!==a){n<a?t=-1:n>a&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new A(e)},i.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var _={k256:null,p224:null,p192:null,p25519:null};function w(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function x(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function k(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function A(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function P(e){A.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},w.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},w.prototype.split=function(e,t){e.iushrn(this.n,0,t)},w.prototype.imulK=function(e){return e.imul(this.k)},a(x,w),x.prototype.split=function(e,t){for(var r=Math.min(e.length,9),n=0;n<r;n++)t.words[n]=e.words[n];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=4194303&a,n=10;n<e.length;n++){var i=0|e.words[n];e.words[n-10]=(4194303&i)<<4|a>>>22,a=i}a>>>=22,e.words[n-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},x.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},a(k,w),a(S,w),a(E,w),E.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,a=67108863&n;n>>>=26,e.words[r]=a,t=n}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(_[e])return _[e];var t;if("k256"===e)t=new x;else if("p224"===e)t=new k;else if("p192"===e)t=new S;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new E}return _[e]=t,t},A.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},A.prototype._verify2=function(e,t){n(0==(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},A.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(u(e,e.umod(this.m)._forceRed(this)),e)},A.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},A.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},A.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},A.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},A.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},A.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},A.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},A.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},A.prototype.isqr=function(e){return this.imul(e,e.clone())},A.prototype.sqr=function(e){return this.mul(e,e)},A.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new i(1)).iushrn(2);return this.pow(e,r)}for(var a=this.m.subn(1),o=0;!a.isZero()&&0===a.andln(1);)o++,a.iushrn(1);n(!a.isZero());var s=new i(1).toRed(this),c=s.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new i(2*u*u).toRed(this);0!==this.pow(u,l).cmp(c);)u.redIAdd(c);for(var d=this.pow(u,a),h=this.pow(e,a.addn(1).iushrn(1)),p=this.pow(e,a),f=o;0!==p.cmp(s);){for(var m=p,g=0;0!==m.cmp(s);g++)m=m.redSqr();n(g<f);var y=this.pow(d,new i(1).iushln(f-g-1));h=h.redMul(y),d=y.redSqr(),p=p.redMul(d),f=g}return h},A.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},A.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new i(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var a=r[0],o=0,s=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var l=t.words[n],u=c-1;u>=0;u--){var d=l>>u&1;a!==r[0]&&(a=this.sqr(a)),0!==d||0!==o?(o<<=1,o|=d,(4===++s||0===n&&0===u)&&(a=this.mul(a,r[o]),s=0,o=0)):s=0}c=26}return a},A.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},A.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new P(e)},a(P,A),P.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},P.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},P.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=r.isub(n).iushrn(this.shift),i=a;return a.cmp(this.m)>=0?i=a.isub(this.m):a.cmpn(0)<0&&(i=a.iadd(this.m)),i._forceRed(this)},P.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=r.isub(n).iushrn(this.shift),o=a;return a.cmp(this.m)>=0?o=a.isub(this.m):a.cmpn(0)<0&&(o=a.iadd(this.m)),o._forceRed(this)},P.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,r(66)(e))},function(e,t,r){"use strict";const n=t;n.bignum=r(16),n.define=r(854).define,n.base=r(857),n.constants=r(858),n.decoders=r(397),n.encoders=r(395)},function(e,t,r){"use strict";const n=t;n.der=r(396),n.pem=r(855)},function(e,t,r){"use strict";const n=r(1),a=r(187).Buffer,i=r(188),o=r(190);function s(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new c,this.tree._init(e.body)}function c(e){i.call(this,"der",e)}function l(e){return e<10?"0"+e:e}e.exports=s,s.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},n(c,i),c.prototype._encodeComposite=function(e,t,r,n){const i=function(e,t,r,n){let a;"seqof"===e?e="seq":"setof"===e&&(e="set");if(o.tagByName.hasOwnProperty(e))a=o.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return n.error("Unknown tag: "+e);a=e}if(a>=31)return n.error("Multi-octet tag encoding unsupported");t||(a|=32);return a|=o.tagClassByName[r||"universal"]<<6,a}(e,t,r,this.reporter);if(n.length<128){const e=a.alloc(2);return e[0]=i,e[1]=n.length,this._createEncoderBuffer([e,n])}let s=1;for(let e=n.length;e>=256;e>>=8)s++;const c=a.alloc(2+s);c[0]=i,c[1]=128|s;for(let e=1+s,t=n.length;t>0;e--,t>>=8)c[e]=255&t;return this._createEncoderBuffer([c,n])},c.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){const t=a.alloc(2*e.length);for(let r=0;r<e.length;r++)t.writeUInt16BE(e.charCodeAt(r),2*r);return this._createEncoderBuffer(t)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)||"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},c.prototype._encodeObjid=function(e,t,r){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s.]+/g);for(let t=0;t<e.length;t++)e[t]|=0}else if(Array.isArray(e)){e=e.slice();for(let t=0;t<e.length;t++)e[t]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!r){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}let n=0;for(let t=0;t<e.length;t++){let r=e[t];for(n++;r>=128;r>>=7)n++}const i=a.alloc(n);let o=i.length-1;for(let t=e.length-1;t>=0;t--){let r=e[t];for(i[o--]=127&r;(r>>=7)>0;)i[o--]=128|127&r}return this._createEncoderBuffer(i)},c.prototype._encodeTime=function(e,t){let r;const n=new Date(e);return"gentime"===t?r=[l(n.getUTCFullYear()),l(n.getUTCMonth()+1),l(n.getUTCDate()),l(n.getUTCHours()),l(n.getUTCMinutes()),l(n.getUTCSeconds()),"Z"].join(""):"utctime"===t?r=[l(n.getUTCFullYear()%100),l(n.getUTCMonth()+1),l(n.getUTCDate()),l(n.getUTCHours()),l(n.getUTCMinutes()),l(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(r,"octstr")},c.prototype._encodeNull=function(){return this._createEncoderBuffer("")},c.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&!a.isBuffer(e)){const t=e.toArray();!e.sign&&128&t[0]&&t.unshift(0),e=a.from(t)}if(a.isBuffer(e)){let t=e.length;0===e.length&&t++;const r=a.alloc(t);return e.copy(r),0===e.length&&(r[0]=0),this._createEncoderBuffer(r)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let r=1;for(let t=e;t>=256;t>>=8)r++;const n=new Array(r);for(let t=n.length-1;t>=0;t--)n[t]=255&e,e>>=8;return 128&n[0]&&n.unshift(0),this._createEncoderBuffer(a.from(n))},c.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},c.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},c.prototype._skipDefault=function(e,t,r){const n=this._baseState;let a;if(null===n.default)return!1;const i=e.join();if(void 0===n.defaultBuffer&&(n.defaultBuffer=this._encodeValue(n.default,t,r).join()),i.length!==n.defaultBuffer.length)return!1;for(a=0;a<i.length;a++)if(i[a]!==n.defaultBuffer[a])return!1;return!0}},function(e,t,r){"use strict";const n=t;n.der=r(398),n.pem=r(856)},function(e,t,r){"use strict";const n=r(1),a=r(16),i=r(91).DecoderBuffer,o=r(188),s=r(190);function c(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new l,this.tree._init(e.body)}function l(e){o.call(this,"der",e)}function u(e,t){let r=e.readUInt8(t);if(e.isError(r))return r;const n=s.tagClass[r>>6],a=0==(32&r);if(31==(31&r)){let n=r;for(r=0;128==(128&n);){if(n=e.readUInt8(t),e.isError(n))return n;r<<=7,r|=127&n}}else r&=31;return{cls:n,primitive:a,tag:r,tagStr:s.tag[r]}}function d(e,t,r){let n=e.readUInt8(r);if(e.isError(n))return n;if(!t&&128===n)return null;if(0==(128&n))return n;const a=127&n;if(a>4)return e.error("length octect is too long");n=0;for(let t=0;t<a;t++){n<<=8;const t=e.readUInt8(r);if(e.isError(t))return t;n|=t}return n}e.exports=c,c.prototype.decode=function(e,t){return i.isDecoderBuffer(e)||(e=new i(e,t)),this.tree._decode(e,t)},n(l,o),l.prototype._peekTag=function(e,t,r){if(e.isEmpty())return!1;const n=e.save(),a=u(e,'Failed to peek tag: "'+t+'"');return e.isError(a)?a:(e.restore(n),a.tag===t||a.tagStr===t||a.tagStr+"of"===t||r)},l.prototype._decodeTag=function(e,t,r){const n=u(e,'Failed to decode tag of "'+t+'"');if(e.isError(n))return n;let a=d(e,n.primitive,'Failed to get length of "'+t+'"');if(e.isError(a))return a;if(!r&&n.tag!==t&&n.tagStr!==t&&n.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(n.primitive||null!==a)return e.skip(a,'Failed to match body of: "'+t+'"');const i=e.save(),o=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(o)?o:(a=e.offset-i.offset,e.restore(i),e.skip(a,'Failed to match body of: "'+t+'"'))},l.prototype._skipUntilEnd=function(e,t){for(;;){const r=u(e,t);if(e.isError(r))return r;const n=d(e,r.primitive,t);if(e.isError(n))return n;let a;if(a=r.primitive||null!==n?e.skip(n):this._skipUntilEnd(e,t),e.isError(a))return a;if("end"===r.tagStr)break}},l.prototype._decodeList=function(e,t,r,n){const a=[];for(;!e.isEmpty();){const t=this._peekTag(e,"end");if(e.isError(t))return t;const i=r.decode(e,"der",n);if(e.isError(i)&&t)break;a.push(i)}return a},l.prototype._decodeStr=function(e,t){if("bitstr"===t){const t=e.readUInt8();return e.isError(t)?t:{unused:t,data:e.raw()}}if("bmpstr"===t){const t=e.raw();if(t.length%2==1)return e.error("Decoding of string type: bmpstr length mismatch");let r="";for(let e=0;e<t.length/2;e++)r+=String.fromCharCode(t.readUInt16BE(2*e));return r}if("numstr"===t){const t=e.raw().toString("ascii");return this._isNumstr(t)?t:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){const t=e.raw().toString("ascii");return this._isPrintstr(t)?t:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},l.prototype._decodeObjid=function(e,t,r){let n;const a=[];let i=0,o=0;for(;!e.isEmpty();)o=e.readUInt8(),i<<=7,i|=127&o,0==(128&o)&&(a.push(i),i=0);128&o&&a.push(i);const s=a[0]/40|0,c=a[0]%40;if(n=r?a:[s,c].concat(a.slice(1)),t){let e=t[n.join(" ")];void 0===e&&(e=t[n.join(".")]),void 0!==e&&(n=e)}return n},l.prototype._decodeTime=function(e,t){const r=e.raw().toString();let n,a,i,o,s,c;if("gentime"===t)n=0|r.slice(0,4),a=0|r.slice(4,6),i=0|r.slice(6,8),o=0|r.slice(8,10),s=0|r.slice(10,12),c=0|r.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");n=0|r.slice(0,2),a=0|r.slice(2,4),i=0|r.slice(4,6),o=0|r.slice(6,8),s=0|r.slice(8,10),c=0|r.slice(10,12),n=n<70?2e3+n:1900+n}return Date.UTC(n,a-1,i,o,s,c,0)},l.prototype._decodeNull=function(){return null},l.prototype._decodeBool=function(e){const t=e.readUInt8();return e.isError(t)?t:0!==t},l.prototype._decodeInt=function(e,t){const r=e.raw();let n=new a(r);return t&&(n=t[n.toString(10)]||n),n},l.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree}},function(e){e.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},function(e,t,r){var n=r(75),a=r(2).Buffer;function i(e){var t=a.allocUnsafe(4);return t.writeUInt32BE(e,0),t}e.exports=function(e,t){for(var r,o=a.alloc(0),s=0;o.length<t;)r=i(s++),o=a.concat([o,n("sha1").update(e).update(r).digest()]);return o.slice(0,t)}},function(e,t){e.exports=function(e,t){for(var r=e.length,n=-1;++n<r;)e[n]^=t[n];return e}},function(e,t,r){var n=r(16),a=r(2).Buffer;e.exports=function(e,t){return a.from(e.toRed(n.mont(t.modulus)).redPow(new n(t.publicExponent)).fromRed().toArray())}},function(e){e.exports=JSON.parse('{"COMPRESSED_TYPE_INVALID":"compressed should be a boolean","EC_PRIVATE_KEY_TYPE_INVALID":"private key should be a Buffer","EC_PRIVATE_KEY_LENGTH_INVALID":"private key length is invalid","EC_PRIVATE_KEY_RANGE_INVALID":"private key range is invalid","EC_PRIVATE_KEY_TWEAK_ADD_FAIL":"tweak out of range or resulting private key is invalid","EC_PRIVATE_KEY_TWEAK_MUL_FAIL":"tweak out of range","EC_PRIVATE_KEY_EXPORT_DER_FAIL":"couldn\'t export to DER format","EC_PRIVATE_KEY_IMPORT_DER_FAIL":"couldn\'t import from DER format","EC_PUBLIC_KEYS_TYPE_INVALID":"public keys should be an Array","EC_PUBLIC_KEYS_LENGTH_INVALID":"public keys Array should have at least 1 element","EC_PUBLIC_KEY_TYPE_INVALID":"public key should be a Buffer","EC_PUBLIC_KEY_LENGTH_INVALID":"public key length is invalid","EC_PUBLIC_KEY_PARSE_FAIL":"the public key could not be parsed or is invalid","EC_PUBLIC_KEY_CREATE_FAIL":"private was invalid, try again","EC_PUBLIC_KEY_TWEAK_ADD_FAIL":"tweak out of range or resulting public key is invalid","EC_PUBLIC_KEY_TWEAK_MUL_FAIL":"tweak out of range","EC_PUBLIC_KEY_COMBINE_FAIL":"the sum of the public keys is not valid","ECDH_FAIL":"scalar was invalid (zero or overflow)","ECDSA_SIGNATURE_TYPE_INVALID":"signature should be a Buffer","ECDSA_SIGNATURE_LENGTH_INVALID":"signature length is invalid","ECDSA_SIGNATURE_PARSE_FAIL":"couldn\'t parse signature","ECDSA_SIGNATURE_PARSE_DER_FAIL":"couldn\'t parse DER signature","ECDSA_SIGNATURE_SERIALIZE_DER_FAIL":"couldn\'t serialize signature to DER format","ECDSA_SIGN_FAIL":"nonce generation function failed or private key is invalid","ECDSA_RECOVER_FAIL":"couldn\'t recover public key from signature","MSG32_TYPE_INVALID":"message should be a Buffer","MSG32_LENGTH_INVALID":"message length is invalid","OPTIONS_TYPE_INVALID":"options should be an Object","OPTIONS_DATA_TYPE_INVALID":"options.data should be a Buffer","OPTIONS_DATA_LENGTH_INVALID":"options.data length is invalid","OPTIONS_NONCEFN_TYPE_INVALID":"options.noncefn should be a Function","RECOVERY_ID_TYPE_INVALID":"recovery should be a Number","RECOVERY_ID_VALUE_INVALID":"recovery should have value between -1 and 4","TWEAK_TYPE_INVALID":"tweak should be a Buffer","TWEAK_LENGTH_INVALID":"tweak length is invalid"}')},function(e,t,r){"use strict";const n=r(893),a={null:null,true:!0,false:!1};e.exports=function(e){if("?"!==e.substr(0,1))throw new Error("A valid query string passed to parseQuery should begin with '?'");if(!(e=e.substr(1)))return{};if("{"===e.substr(0,1)&&"}"===e.substr(-1))return n.parse(e);const t=e.split(/[,&]/g),r={};return t.forEach(e=>{const t=e.indexOf("=");if(t>=0){let n=e.substr(0,t),i=decodeURIComponent(e.substr(t+1));a.hasOwnProperty(i)&&(i=a[i]),"[]"===n.substr(-2)?(n=decodeURIComponent(n.substr(0,n.length-2)),Array.isArray(r[n])||(r[n]=[]),r[n].push(i)):(n=decodeURIComponent(n),r[n]=i)}else"-"===e.substr(0,1)?r[decodeURIComponent(e.substr(1))]=!1:"+"===e.substr(0,1)?r[decodeURIComponent(e.substr(1))]=!0:r[decodeURIComponent(e)]=!0}),r}},function(e,t,r){"use strict";const n={26:"abcdefghijklmnopqrstuvwxyz",32:"123456789abcdefghjkmnpqrstuvwxyz",36:"0123456789abcdefghijklmnopqrstuvwxyz",49:"abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",52:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",58:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",62:"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",64:"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"};let a=void 0;e.exports=function(e,t,i,o){let s;t=t||"md4",o=o||9999;try{s=r(116).createHash(t)}catch(e){if("ERR_OSSL_EVP_UNSUPPORTED"===e.code&&"md4"===t&&(void 0===a&&(a=r(900)),s=a()),!s)throw e}return s.update(e),"base26"===i||"base32"===i||"base36"===i||"base49"===i||"base52"===i||"base58"===i||"base62"===i||"base64"===i?function(e,t){const a=n[t];if(!a)throw new Error("Unknown encoding base"+t);const i=e.length,o=r(24);o.RM=o.DP=0;let s=new o(0);for(let t=i-1;t>=0;t--)s=s.times(256).plus(e[t]);let c="";for(;s.gt(0);)c=a[s.mod(t)]+c,s=s.div(t);return o.DP=20,o.RM=1,c}(s.digest(),i.substr(4)).substr(0,o):s.digest(i||"hex").substr(0,o)}},function(e,t,r){"use strict";var n=r(80);e.exports=function(e){n.copy(e,this)}},function(e,t,r){"use strict";e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,n="boolean"==typeof t.cycles&&t.cycles,a=t.cmp&&(r=t.cmp,function(e){return function(t,n){var a={key:t,value:e[t]},i={key:n,value:e[n]};return r(a,i)}}),i=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var r,o;if(Array.isArray(t)){for(o="[",r=0;r<t.length;r++)r&&(o+=","),o+=e(t[r])||"null";return o+"]"}if(null===t)return"null";if(-1!==i.indexOf(t)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=i.push(t)-1,c=Object.keys(t).sort(a&&a(t));for(o="",r=0;r<c.length;r++){var l=c[r],u=e(t[l]);u&&(o&&(o+=","),o+=JSON.stringify(l)+":"+u)}return i.splice(s,1),"{"+o+"}"}}(e)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n="",a=!0===e.schema.$async,i=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),o=e.self._getId(e.schema);if(e.opts.strictKeywords){var s=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(s){var c="unknown keyword: "+s;if("log"!==e.opts.strictKeywords)throw new Error(c);e.logger.warn(c)}}if(e.isTop&&(n+=" var validate = ",a&&(e.async=!0,n+="async "),n+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",o&&(e.opts.sourceCode||e.opts.processCode)&&(n+=" /*# sourceURL="+o+" */ ")),"boolean"==typeof e.schema||!i&&!e.schema.$ref){var l=e.level,u=e.dataLevel,d=e.schema["false schema"],h=e.schemaPath+e.util.getProperty("false schema"),p=e.errSchemaPath+"/false schema",f=!e.opts.allErrors,m="data"+(u||""),g="valid"+l;if(!1===e.schema){e.isTop?f=!0:n+=" var "+g+" = false; ",(J=J||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'boolean schema is false' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";var y=n;n=J.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?n+=a?" return data; ":" validate.errors = null; return true; ":n+=" var "+g+" = true; ";return e.isTop&&(n+=" }; return validate; "),n}if(e.isTop){var v=e.isTop;l=e.level=0,u=e.dataLevel=0,m="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var b="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}n+=" var vErrors = null; ",n+=" var errors = 0;     ",n+=" if (rootData === undefined) rootData = data; "}else{l=e.level,m="data"+((u=e.dataLevel)||"");if(o&&(e.baseId=e.resolve.url(e.baseId,o)),a&&!e.async)throw new Error("async schema in sync schema");n+=" var errs_"+l+" = errors;"}g="valid"+l,f=!e.opts.allErrors;var _="",w="",x=e.schema.type,k=Array.isArray(x);if(x&&e.opts.nullable&&!0===e.schema.nullable&&(k?-1==x.indexOf("null")&&(x=x.concat("null")):"null"!=x&&(x=[x,"null"],k=!0)),k&&1==x.length&&(x=x[0],k=!1),e.schema.$ref&&i){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(i=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(n+=" "+e.RULES.all.$comment.code(e,"$comment")),x){if(e.opts.coerceTypes)var S=e.util.coerceToTypes(e.opts.coerceTypes,x);var E=e.RULES.types[x];if(S||k||!0===E||E&&!Q(E)){h=e.schemaPath+".type",p=e.errSchemaPath+"/type",h=e.schemaPath+".type",p=e.errSchemaPath+"/type";var A=k?"checkDataTypes":"checkDataType";if(n+=" if ("+e.util[A](x,m,e.opts.strictNumbers,!0)+") { ",S){var P="dataType"+l,C="coerced"+l;n+=" var "+P+" = typeof "+m+"; var "+C+" = undefined; ","array"==e.opts.coerceTypes&&(n+=" if ("+P+" == 'object' && Array.isArray("+m+") && "+m+".length == 1) { "+m+" = "+m+"[0]; "+P+" = typeof "+m+"; if ("+e.util.checkDataType(e.schema.type,m,e.opts.strictNumbers)+") "+C+" = "+m+"; } "),n+=" if ("+C+" !== undefined) ; ";var D=S;if(D)for(var T,O=-1,M=D.length-1;O<M;)"string"==(T=D[O+=1])?n+=" else if ("+P+" == 'number' || "+P+" == 'boolean') "+C+" = '' + "+m+"; else if ("+m+" === null) "+C+" = ''; ":"number"==T||"integer"==T?(n+=" else if ("+P+" == 'boolean' || "+m+" === null || ("+P+" == 'string' && "+m+" && "+m+" == +"+m+" ","integer"==T&&(n+=" && !("+m+" % 1)"),n+=")) "+C+" = +"+m+"; "):"boolean"==T?n+=" else if ("+m+" === 'false' || "+m+" === 0 || "+m+" === null) "+C+" = false; else if ("+m+" === 'true' || "+m+" === 1) "+C+" = true; ":"null"==T?n+=" else if ("+m+" === '' || "+m+" === 0 || "+m+" === false) "+C+" = null; ":"array"==e.opts.coerceTypes&&"array"==T&&(n+=" else if ("+P+" == 'string' || "+P+" == 'number' || "+P+" == 'boolean' || "+m+" == null) "+C+" = ["+m+"]; ");n+=" else {   ",(J=J||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",n+=k?""+x.join(","):""+x,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=k?""+x.join(","):""+x,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";y=n;n=J.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } if ("+C+" !== undefined) {  ";var I=u?"data"+(u-1||""):"parentData";n+=" "+m+" = "+C+"; ",u||(n+="if ("+I+" !== undefined)"),n+=" "+I+"["+(u?e.dataPathArr[u]:"parentDataProperty")+"] = "+C+"; } "}else{(J=J||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",n+=k?""+x.join(","):""+x,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=k?""+x.join(","):""+x,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";y=n;n=J.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}n+=" } "}}if(e.schema.$ref&&!i)n+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",f&&(n+=" } if (errors === ",n+=v?"0":"errs_"+l,n+=") { ",w+="}");else{var R=e.RULES;if(R)for(var F=-1,B=R.length-1;F<B;)if(Q(E=R[F+=1])){if(E.type&&(n+=" if ("+e.util.checkDataType(E.type,m,e.opts.strictNumbers)+") { "),e.opts.useDefaults)if("object"==E.type&&e.schema.properties){d=e.schema.properties;var j=Object.keys(d);if(j)for(var N,q=-1,L=j.length-1;q<L;){if(void 0!==(H=d[N=j[q+=1]]).default){var U=m+e.util.getProperty(N);if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+U;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else n+=" if ("+U+" === undefined ","empty"==e.opts.useDefaults&&(n+=" || "+U+" === null || "+U+" === '' "),n+=" ) "+U+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault(H.default)+" ":n+=" "+JSON.stringify(H.default)+" ",n+="; "}}}else if("array"==E.type&&Array.isArray(e.schema.items)){var z=e.schema.items;if(z){O=-1;for(var H,$=z.length-1;O<$;)if(void 0!==(H=z[O+=1]).default){U=m+"["+O+"]";if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+U;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else n+=" if ("+U+" === undefined ","empty"==e.opts.useDefaults&&(n+=" || "+U+" === null || "+U+" === '' "),n+=" ) "+U+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault(H.default)+" ":n+=" "+JSON.stringify(H.default)+" ",n+="; "}}}var G=E.rules;if(G)for(var K,V=-1,W=G.length-1;V<W;)if(X(K=G[V+=1])){var Y=K.code(e,K.keyword,E.type);Y&&(n+=" "+Y+" ",f&&(_+="}"))}if(f&&(n+=" "+_+" ",_=""),E.type&&(n+=" } ",x&&x===E.type&&!S)){n+=" else { ";var J;h=e.schemaPath+".type",p=e.errSchemaPath+"/type";(J=J||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",n+=k?""+x.join(","):""+x,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=k?""+x.join(","):""+x,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";y=n;n=J.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } "}f&&(n+=" if (errors === ",n+=v?"0":"errs_"+l,n+=") { ",w+="}")}}function Q(e){for(var t=e.rules,r=0;r<t.length;r++)if(X(t[r]))return!0}function X(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,n=0;n<r.length;n++)if(void 0!==e.schema[r[n]])return!0}(t)}return f&&(n+=" "+w+" "),v?(a?(n+=" if (errors === 0) return data;           ",n+=" else throw new ValidationError(vErrors); "):(n+=" validate.errors = vErrors; ",n+=" return errors === 0;       "),n+=" }; return validate;"):n+=" var "+g+" = errors === errs_"+l+";",n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,a=" ",i=e.level,o=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),h=e.opts.$data&&s&&s.$data;h?(a+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",n="schema"+i):n=s;var p="maximum"==t,f=p?"exclusiveMaximum":"exclusiveMinimum",m=e.schema[f],g=e.opts.$data&&m&&m.$data,y=p?"<":">",v=p?">":"<",b=void 0;if(!h&&"number"!=typeof s&&void 0!==s)throw new Error(t+" must be number");if(!g&&void 0!==m&&"number"!=typeof m&&"boolean"!=typeof m)throw new Error(f+" must be number or boolean");if(g){var _=e.util.getData(m.$data,o,e.dataPathArr),w="exclusive"+i,x="exclType"+i,k="exclIsNumber"+i,S="' + "+(P="op"+i)+" + '";a+=" var schemaExcl"+i+" = "+_+"; ",a+=" var "+w+"; var "+x+" = typeof "+(_="schemaExcl"+i)+"; if ("+x+" != 'boolean' && "+x+" != 'undefined' && "+x+" != 'number') { ";var E;b=f;(E=E||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(b||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: '"+f+" should be boolean' "),e.opts.verbose&&(a+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var A=a;a=E.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+A+"]); ":a+=" validate.errors = ["+A+"]; return false; ":a+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else if ( ",h&&(a+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),a+=" "+x+" == 'number' ? ( ("+w+" = "+n+" === undefined || "+_+" "+y+"= "+n+") ? "+d+" "+v+"= "+_+" : "+d+" "+v+" "+n+" ) : ( ("+w+" = "+_+" === true) ? "+d+" "+v+"= "+n+" : "+d+" "+v+" "+n+" ) || "+d+" !== "+d+") { var op"+i+" = "+w+" ? '"+y+"' : '"+y+"='; ",void 0===s&&(b=f,l=e.errSchemaPath+"/"+f,n=_,h=g)}else{S=y;if((k="number"==typeof m)&&h){var P="'"+S+"'";a+=" if ( ",h&&(a+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),a+=" ( "+n+" === undefined || "+m+" "+y+"= "+n+" ? "+d+" "+v+"= "+m+" : "+d+" "+v+" "+n+" ) || "+d+" !== "+d+") { "}else{k&&void 0===s?(w=!0,b=f,l=e.errSchemaPath+"/"+f,n=m,v+="="):(k&&(n=Math[p?"min":"max"](m,s)),m===(!k||n)?(w=!0,b=f,l=e.errSchemaPath+"/"+f,v+="="):(w=!1,S+="="));P="'"+S+"'";a+=" if ( ",h&&(a+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),a+=" "+d+" "+v+" "+n+" || "+d+" !== "+d+") { "}}b=b||t,(E=E||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(b||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { comparison: "+P+", limit: "+n+", exclusive: "+w+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be "+S+" ",a+=h?"' + "+n:n+"'"),e.opts.verbose&&(a+=" , schema:  ",a+=h?"validate.schema"+c:""+s,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";A=a;return a=E.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+A+"]); ":a+=" validate.errors = ["+A+"]; return false; ":a+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",u&&(a+=" else { "),a}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,a=" ",i=e.level,o=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),h=e.opts.$data&&s&&s.$data;if(h?(a+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",n="schema"+i):n=s,!h&&"number"!=typeof s)throw new Error(t+" must be number");a+="if ( ",h&&(a+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),a+=" "+d+".length "+("maxItems"==t?">":"<")+" "+n+") { ";var p=t,f=f||[];f.push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(p||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have ",a+="maxItems"==t?"more":"fewer",a+=" than ",a+=h?"' + "+n+" + '":""+s,a+=" items' "),e.opts.verbose&&(a+=" , schema:  ",a+=h?"validate.schema"+c:""+s,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var m=a;return a=f.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+m+"]); ":a+=" validate.errors = ["+m+"]; return false; ":a+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",u&&(a+=" else { "),a}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,a=" ",i=e.level,o=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),h=e.opts.$data&&s&&s.$data;if(h?(a+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",n="schema"+i):n=s,!h&&"number"!=typeof s)throw new Error(t+" must be number");var p="maxLength"==t?">":"<";a+="if ( ",h&&(a+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),!1===e.opts.unicode?a+=" "+d+".length ":a+=" ucs2length("+d+") ",a+=" "+p+" "+n+") { ";var f=t,m=m||[];m.push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(f||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT be ",a+="maxLength"==t?"longer":"shorter",a+=" than ",a+=h?"' + "+n+" + '":""+s,a+=" characters' "),e.opts.verbose&&(a+=" , schema:  ",a+=h?"validate.schema"+c:""+s,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var g=a;return a=m.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+g+"]); ":a+=" validate.errors = ["+g+"]; return false; ":a+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",u&&(a+=" else { "),a}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,a=" ",i=e.level,o=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),h=e.opts.$data&&s&&s.$data;if(h?(a+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",n="schema"+i):n=s,!h&&"number"!=typeof s)throw new Error(t+" must be number");a+="if ( ",h&&(a+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),a+=" Object.keys("+d+").length "+("maxProperties"==t?">":"<")+" "+n+") { ";var p=t,f=f||[];f.push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(p||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have ",a+="maxProperties"==t?"more":"fewer",a+=" than ",a+=h?"' + "+n+" + '":""+s,a+=" properties' "),e.opts.verbose&&(a+=" , schema:  ",a+=h?"validate.schema"+c:""+s,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var m=a;return a=f.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+m+"]); ":a+=" validate.errors = ["+m+"]; return false; ":a+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",u&&(a+=" else { "),a}},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},function(e,t,r){"use strict";var n=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i,a=/t|\s/i,i={date:s,time:c,"date-time":function(e,t){if(!e||!t)return;e=e.split(a),t=t.split(a);var r=s(e[0],t[0]);if(void 0===r)return;return r||c(e[1],t[1])}},o={type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1};function s(e,t){if(e&&t)return e>t?1:e<t?-1:e===t?0:void 0}function c(e,t){if(e&&t&&(e=e.match(n),t=t.match(n),e&&t))return(e=e[1]+e[2]+e[3]+(e[4]||""))>(t=t[1]+t[2]+t[3]+(t[4]||""))?1:e<t?-1:e===t?0:void 0}e.exports=function(e){var t="format"+e;return function n(a){return n.definition={type:"string",inline:r(959),statements:!0,errors:"full",dependencies:["format"],metaSchema:{anyOf:[{type:"string"},o]}},a.addKeyword(t,n.definition),a.addKeyword("formatExclusive"+e,{dependencies:["format"+e],metaSchema:{anyOf:[{type:"boolean"},o]}}),function(e){var t=e._formats;for(var r in i){var n=t[r];("object"!=typeof n||n instanceof RegExp||!n.validate)&&(n=t[r]={validate:n}),n.compare||(n.compare=i[r])}}(a),a}}},function(e,t){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,a=e.indexOf("["),i=e.indexOf("]");-1!=a&&-1!=i&&(e=e.substring(0,a)+e.substring(a,i).replace(/:/g,";")+e.substring(i,e.length));for(var o=r.exec(e||""),s={},c=14;c--;)s[n[c]]=o[c]||"";return-1!=a&&-1!=i&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=function(e,t){var r=t.replace(/\/{2,9}/g,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||r.splice(0,1);"/"==t.substr(t.length-1,1)&&r.splice(r.length-1,1);return r}(0,s.path),s.queryKey=function(e,t){var r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){t&&(r[t]=n)})),r}(0,s.query),s}},function(e,t){var r=1e3,n=6e4,a=60*n,i=24*a;function o(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(e,t){t=t||{};var s,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var o=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"days":case"day":case"d":return o*i;case"hours":case"hour":case"hrs":case"hr":case"h":return o*a;case"minutes":case"minute":case"mins":case"min":case"m":return o*n;case"seconds":case"second":case"secs":case"sec":case"s":return o*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?o(s=e,i,"day")||o(s,a,"hour")||o(s,n,"minute")||o(s,r,"second")||s+" ms":function(e){if(e>=i)return Math.round(e/i)+"d";if(e>=a)return Math.round(e/a)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){(function(t){e.exports=function(e){return r&&t.isBuffer(e)||n&&(e instanceof ArrayBuffer||function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))};var r="function"==typeof t&&"function"==typeof t.isBuffer,n="function"==typeof ArrayBuffer}).call(this,r(4).Buffer)},function(e,t,r){var n=r(982),a=r(425),i=r(68),o=r(196),s=r(426),c=r(427),l=r(92)("socket.io-client:manager"),u=r(424),d=r(998),h=Object.prototype.hasOwnProperty;function p(e,t){if(!(this instanceof p))return new p(e,t);e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var r=t.parser||o;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}e.exports=p,p.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)h.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},p.prototype.updateSocketIds=function(){for(var e in this.nsps)h.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},p.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},i(p.prototype),p.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},p.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},p.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},p.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},p.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},p.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},p.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},p.prototype.open=p.prototype.connect=function(e,t){if(l("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=n(this.uri,this.opts);var r=this.engine,a=this;this.readyState="opening",this.skipReconnect=!1;var i=s(r,"open",(function(){a.onopen(),e&&e()})),o=s(r,"error",(function(t){if(l("connect_error"),a.cleanup(),a.readyState="closed",a.emitAll("connect_error",t),e){var r=new Error("Connection error");r.data=t,e(r)}else a.maybeReconnectOnOpen()}));if(!1!==this._timeout){var c=this._timeout;l("connect attempt will timeout after %d",c),0===c&&i.destroy();var u=setTimeout((function(){l("connect attempt timed out after %d",c),i.destroy(),r.close(),r.emit("error","timeout"),a.emitAll("connect_timeout",c)}),c);this.subs.push({destroy:function(){clearTimeout(u)}})}return this.subs.push(i),this.subs.push(o),this},p.prototype.onopen=function(){l("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(s(e,"data",c(this,"ondata"))),this.subs.push(s(e,"ping",c(this,"onping"))),this.subs.push(s(e,"pong",c(this,"onpong"))),this.subs.push(s(e,"error",c(this,"onerror"))),this.subs.push(s(e,"close",c(this,"onclose"))),this.subs.push(s(this.decoder,"decoded",c(this,"ondecoded")))},p.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},p.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},p.prototype.ondata=function(e){this.decoder.add(e)},p.prototype.ondecoded=function(e){this.emit("packet",e)},p.prototype.onerror=function(e){l("error",e),this.emitAll("error",e)},p.prototype.socket=function(e,t){var r=this.nsps[e];if(!r){r=new a(this,e,t),this.nsps[e]=r;var n=this;r.on("connecting",i),r.on("connect",(function(){r.id=n.generateId(e)})),this.autoConnect&&i()}function i(){~u(n.connecting,r)||n.connecting.push(r)}return r},p.prototype.destroy=function(e){var t=u(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},p.prototype.packet=function(e){l("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(r){for(var n=0;n<r.length;n++)t.engine.write(r[n],e.options);t.encoding=!1,t.processPacketQueue()})))},p.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},p.prototype.cleanup=function(){l("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},p.prototype.close=p.prototype.disconnect=function(){l("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},p.prototype.onclose=function(e){l("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},p.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();l("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var r=setTimeout((function(){e.skipReconnect||(l("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open((function(t){t?(l("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(l("reconnect success"),e.onreconnect())})))}),t);this.subs.push({destroy:function(){clearTimeout(r)}})}},p.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,r){var n=r(197),a=r(985),i=r(994),o=r(995);t.polling=function(e){var t=!1,r=!1,o=!1!==e.jsonp;if("undefined"!=typeof location){var s="https:"===location.protocol,c=location.port;c||(c=s?443:80),t=e.hostname!==location.hostname||c!==e.port,r=e.secure!==s}if(e.xdomain=t,e.xscheme=r,"open"in new n(e)&&!e.forceJSONP)return new a(e);if(!o)throw new Error("JSONP disabled");return new i(e)},t.websocket=o},function(e,t,r){var n=r(199),a=r(126),i=r(81),o=r(127),s=r(423),c=r(128)("engine.io-client:polling");e.exports=u;var l=null!=new(r(197))({xdomain:!1}).responseType;function u(e){var t=e&&e.forceBase64;l&&!t||(this.supportsBinary=!1),n.call(this,e)}o(u,n),u.prototype.name="polling",u.prototype.doOpen=function(){this.poll()},u.prototype.pause=function(e){var t=this;function r(){c("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(c("we are currently polling - waiting to pause"),n++,this.once("pollComplete",(function(){c("pre-pause polling complete"),--n||r()}))),this.writable||(c("we are currently writing - waiting to pause"),n++,this.once("drain",(function(){c("pre-pause writing complete"),--n||r()})))}else r()},u.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},u.prototype.onData=function(e){var t=this;c("polling got data %s",e);i.decodePayload(e,this.socket.binaryType,(function(e,r,n){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},u.prototype.doClose=function(){var e=this;function t(){c("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(c("transport open - closing"),t()):(c("transport not open - deferring close"),this.once("open",t))},u.prototype.write=function(e){var t=this;this.writable=!1;var r=function(){t.writable=!0,t.emit("drain")};i.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,r)}))},u.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",r="";return!1!==this.timestampRequests&&(e[this.timestampParam]=s()),this.supportsBinary||e.sid||(e.b64=1),e=a.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(r=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+r+this.path+e}},function(e,t,r){(function(t){var n=r(987),a=Object.prototype.toString,i="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===a.call(Blob),o="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===a.call(File);e.exports=function e(r){if(!r||"object"!=typeof r)return!1;if(n(r)){for(var a=0,s=r.length;a<s;a++)if(e(r[a]))return!0;return!1}if("function"==typeof t&&t.isBuffer&&t.isBuffer(r)||"function"==typeof ArrayBuffer&&r instanceof ArrayBuffer||i&&r instanceof Blob||o&&r instanceof File)return!0;if(r.toJSON&&"function"==typeof r.toJSON&&1===arguments.length)return e(r.toJSON(),!0);for(var c in r)if(Object.prototype.hasOwnProperty.call(r,c)&&e(r[c]))return!0;return!1}}).call(this,r(4).Buffer)},function(e,t,r){"use strict";var n,a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i={},o=0,s=0;function c(e){var t="";do{t=a[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function l(){var e=c(+new Date);return e!==n?(o=0,n=e):e+"."+c(o++)}for(;s<64;s++)i[a[s]]=s;l.encode=c,l.decode=function(e){var t=0;for(s=0;s<e.length;s++)t=64*t+i[e.charAt(s)];return t},e.exports=l},function(e,t){var r=[].indexOf;e.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},function(e,t,r){var n=r(196),a=r(68),i=r(997),o=r(426),s=r(427),c=r(92)("socket.io-client:socket"),l=r(126),u=r(422);e.exports=p;var d={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},h=a.prototype.emit;function p(e,t,r){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},r&&r.query&&(this.query=r.query),this.io.autoConnect&&this.open()}a(p.prototype),p.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[o(e,"open",s(this,"onopen")),o(e,"packet",s(this,"onpacket")),o(e,"close",s(this,"onclose"))]}},p.prototype.open=p.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},p.prototype.send=function(){var e=i(arguments);return e.unshift("message"),this.emit.apply(this,e),this},p.prototype.emit=function(e){if(d.hasOwnProperty(e))return h.apply(this,arguments),this;var t=i(arguments),r={type:(void 0!==this.flags.binary?this.flags.binary:u(t))?n.BINARY_EVENT:n.EVENT,data:t,options:{}};return r.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),this.flags={},this},p.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},p.prototype.onopen=function(){if(c("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"==typeof this.query?l.encode(this.query):this.query;c("sending connect packet with query %s",e),this.packet({type:n.CONNECT,query:e})}else this.packet({type:n.CONNECT})},p.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},p.prototype.onpacket=function(e){var t=e.nsp===this.nsp,r=e.type===n.ERROR&&"/"===e.nsp;if(t||r)switch(e.type){case n.CONNECT:this.onconnect();break;case n.EVENT:case n.BINARY_EVENT:this.onevent(e);break;case n.ACK:case n.BINARY_ACK:this.onack(e);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit("error",e.data)}},p.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?h.apply(this,t):this.receiveBuffer.push(t)},p.prototype.ack=function(e){var t=this,r=!1;return function(){if(!r){r=!0;var a=i(arguments);c("sending ack %j",a),t.packet({type:u(a)?n.BINARY_ACK:n.ACK,id:e,data:a})}}},p.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(c("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):c("bad ack %s",e.id)},p.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},p.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)h.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},p.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},p.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},p.prototype.close=p.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:n.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},p.prototype.compress=function(e){return this.flags.compress=e,this},p.prototype.binary=function(e){return this.flags.binary=e,this}},function(e,t){e.exports=function(e,t,r){return e.on(t,r),{destroy:function(){e.removeListener(t,r)}}}},function(e,t){var r=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}},function(e,t,r){"use strict";function n(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(a,i){var o=e.apply(t,r);function s(e){n(o,a,i,s,c,"next",e)}function c(e){n(o,a,i,s,c,"throw",e)}s(void 0)}))}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r(5);var s=r(1e3),c=(r(24),function(){function e(t,r){i(this,e),this.app=t||{},this.active_tab=1}var t,r,n,c,l,u,d,h,p,f,m,g;return t=e,(r=[{key:"initialize",value:(g=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadOptions();case 2:return this.saveOptions(),e.abrupt("return");case 4:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"loadOptions",value:(m=a(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e){t.next=19;break}if("null"==(r=localStorage.getItem("options"))||null==r){t.next=6;break}this.app.options=JSON.parse(r),t.next=19;break;case 6:return t.prev=6,t.next=9,fetch("/options");case 9:return n=t.sent,t.next=12,n.json();case 12:this.app.options=t.sent,this.saveOptions(),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(6),console.error(t.t0);case 19:case"end":return t.stop()}}),t,this,[[6,16]])}))),function(){return m.apply(this,arguments)})},{key:"resetOptions",value:(f=a(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/options");case 3:return t=e.sent,e.next=6,t.json();case 6:this.app.options=e.sent,this.saveOptions(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(){return f.apply(this,arguments)})},{key:"saveOptions",value:function(){if(1!=this.app.BROWSER||0!=this.active_tab)try{void 0!==e&&localStorage.setItem("options",JSON.stringify(this.app.options))}catch(e){console.log(e)}}},{key:"getModuleOptionsByName",value:function(e){for(var t=0;t<this.app.options.modules.length;t++)if(this.app.options.modules[t].name===e)return this.app.options.modules[t];return null}},{key:"deleteBlockFromDisk",value:function(e){return s.unlinkSync(e)}},{key:"loadBlockById",value:function(e){}},{key:"loadBlockByHash",value:function(e){}},{key:"loadBlockFromDisk",value:function(e){}},{key:"loadBlockByFilename",value:function(e){}},{key:"loadBlocksFromDisk",value:(p=a(regeneratorRuntime.mark((function e(){var t=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.length>0&&void 0!==t[0]&&t[0];case 1:case"end":return e.stop()}}),e)}))),function(){return p.apply(this,arguments)})},{key:"returnFileSystem",value:function(){return null}},{key:"saveBlock",value:(h=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","");case 1:case"end":return e.stop()}}),e)}))),function(e){return h.apply(this,arguments)})},{key:"saveClientOptions",value:function(){}},{key:"returnDatabaseByName",value:(d=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)}))),function(e){return d.apply(this,arguments)})},{key:"returnBlockFilenameByHash",value:(u=a(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,t){return u.apply(this,arguments)})},{key:"returnBlockFilenameByHashPromise",value:function(e){}},{key:"queryDatabase",value:(l=a(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,t,r){return l.apply(this,arguments)})},{key:"executeDatabase",value:(c=a(regeneratorRuntime.mark((function e(t,r,n){var a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.length>3&&void 0!==a[3]&&a[3];case 1:case"end":return e.stop()}}),e)}))),function(e,t,r){return c.apply(this,arguments)})}])&&o(t.prototype,r),n&&o(t,n),e}());e.exports=c},function(e,t,r){"use strict";const n=r(25).fromCallback,a=r(17),i=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","lchmod","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>"function"==typeof a[e]);Object.keys(a).forEach(e=>{"promises"!==e&&(t[e]=a[e])}),i.forEach(e=>{t[e]=n(a[e])}),t.exists=function(e,t){return"function"==typeof t?a.exists(e,t):new Promise(t=>a.exists(e,t))},t.read=function(e,t,r,n,i,o){return"function"==typeof o?a.read(e,t,r,n,i,o):new Promise((o,s)=>{a.read(e,t,r,n,i,(e,t,r)=>{if(e)return s(e);o({bytesRead:t,buffer:r})})})},t.write=function(e,t,...r){return"function"==typeof r[r.length-1]?a.write(e,t,...r):new Promise((n,i)=>{a.write(e,t,...r,(e,t,r)=>{if(e)return i(e);n({bytesWritten:t,buffer:r})})})},"function"==typeof a.realpath.native&&(t.realpath.native=n(a.realpath.native))},function(e,t,r){(function(e){var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},a=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(s(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,o=String(e).replace(a,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),c=n[r];r<i;c=n[++r])m(c)||!_(c)?o+=" "+c:o+=" "+s(c);return o},t.deprecate=function(r,n){if(void 0!==e&&!0===e.noDeprecation)return r;if(void 0===e)return function(){return t.deprecate(r,n).apply(this,arguments)};var a=!1;return function(){if(!a){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation?console.trace(n):console.error(n),a=!0}return r.apply(this,arguments)}};var i,o={};function s(e,r){var n={seen:[],stylize:l};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),f(r)?n.showHidden=r:r&&t._extend(n,r),v(n.showHidden)&&(n.showHidden=!1),v(n.depth)&&(n.depth=2),v(n.colors)&&(n.colors=!1),v(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),u(n,e,n.depth)}function c(e,t){var r=s.styles[t];return r?"["+s.colors[r][0]+"m"+e+"["+s.colors[r][1]+"m":e}function l(e,t){return e}function u(e,r,n){if(e.customInspect&&r&&k(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var a=r.inspect(n,e);return y(a)||(a=u(e,a,n)),a}var i=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(y(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(g(t))return e.stylize(""+t,"number");if(f(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(e,r);if(i)return i;var o=Object.keys(r),s=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(r)),x(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return d(r);if(0===o.length){if(k(r)){var c=r.name?": "+r.name:"";return e.stylize("[Function"+c+"]","special")}if(b(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(w(r))return e.stylize(Date.prototype.toString.call(r),"date");if(x(r))return d(r)}var l,_="",S=!1,E=["{","}"];(p(r)&&(S=!0,E=["[","]"]),k(r))&&(_=" [Function"+(r.name?": "+r.name:"")+"]");return b(r)&&(_=" "+RegExp.prototype.toString.call(r)),w(r)&&(_=" "+Date.prototype.toUTCString.call(r)),x(r)&&(_=" "+d(r)),0!==o.length||S&&0!=r.length?n<0?b(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),l=S?function(e,t,r,n,a){for(var i=[],o=0,s=t.length;o<s;++o)C(t,String(o))?i.push(h(e,t,r,n,String(o),!0)):i.push("");return a.forEach((function(a){a.match(/^\d+$/)||i.push(h(e,t,r,n,a,!0))})),i}(e,r,n,s,o):o.map((function(t){return h(e,r,n,s,t,S)})),e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(l,_,E)):E[0]+_+E[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,r,n,a,i){var o,s,c;if((c=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),C(n,a)||(o="["+a+"]"),s||(e.seen.indexOf(c.value)<0?(s=m(r)?u(e,c.value,null):u(e,c.value,r-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),v(o)){if(i&&a.match(/^\d+$/))return s;(o=JSON.stringify(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function p(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function m(e){return null===e}function g(e){return"number"==typeof e}function y(e){return"string"==typeof e}function v(e){return void 0===e}function b(e){return _(e)&&"[object RegExp]"===S(e)}function _(e){return"object"==typeof e&&null!==e}function w(e){return _(e)&&"[object Date]"===S(e)}function x(e){return _(e)&&("[object Error]"===S(e)||e instanceof Error)}function k(e){return"function"==typeof e}function S(e){return Object.prototype.toString.call(e)}function E(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(r){if(v(i)&&(i=e.env.NODE_DEBUG||""),r=r.toUpperCase(),!o[r])if(new RegExp("\\b"+r+"\\b","i").test(i)){var n=e.pid;o[r]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",r,n,e)}}else o[r]=function(){};return o[r]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=f,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=y,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=b,t.isObject=_,t.isDate=w,t.isError=x,t.isFunction=k,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(1005);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(){var e=new Date,t=[E(e.getHours()),E(e.getMinutes()),E(e.getSeconds())].join(":");return[e.getDate(),A[e.getMonth()],t].join(" ")}function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",P(),t.format.apply(t,arguments))},t.inherits=r(1006),t._extend=function(e,t){if(!t||!_(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var D="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function T(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(D&&e[D]){var t;if("function"!=typeof(t=e[D]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,D,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),a=[],i=0;i<arguments.length;i++)a.push(arguments[i]);a.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,a)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),D&&Object.defineProperty(t,D,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},t.promisify.custom=D,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var a=r.pop();if("function"!=typeof a)throw new TypeError("The last argument must be of type Function");var i=this,o=function(){return a.apply(i,arguments)};t.apply(this,r).then((function(t){e.nextTick(o,null,t)}),(function(t){e.nextTick(T,t,o)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,n(t)),r}}).call(this,r(9))},function(e,t,r){"use strict";(function(t){var n=r(1007);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function a(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,a=0,i=Math.min(r,n);a<i;++a)if(e[a]!==t[a]){r=e[a],n=t[a];break}return r<n?-1:n<r?1:0}function i(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var o=r(430),s=Object.prototype.hasOwnProperty,c=Array.prototype.slice,l="foo"===function(){}.name;function u(e){return Object.prototype.toString.call(e)}function d(e){return!i(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var h=e.exports=v,p=/\s*function\s+([^\(\s]*)\s*/;function f(e){if(o.isFunction(e)){if(l)return e.name;var t=e.toString().match(p);return t&&t[1]}}function m(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function g(e){if(l||!o.isFunction(e))return o.inspect(e);var t=f(e);return"[Function"+(t?": "+t:"")+"]"}function y(e,t,r,n,a){throw new h.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:a})}function v(e,t){e||y(e,!0,t,"==",h.ok)}function b(e,t,r,n){if(e===t)return!0;if(i(e)&&i(t))return 0===a(e,t);if(o.isDate(e)&&o.isDate(t))return e.getTime()===t.getTime();if(o.isRegExp(e)&&o.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(d(e)&&d(t)&&u(e)===u(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===a(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;var s=(n=n||{actual:[],expected:[]}).actual.indexOf(e);return-1!==s&&s===n.expected.indexOf(t)||(n.actual.push(e),n.expected.push(t),function(e,t,r,n){if(null==e||null==t)return!1;if(o.isPrimitive(e)||o.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var a=_(e),i=_(t);if(a&&!i||!a&&i)return!1;if(a)return e=c.call(e),t=c.call(t),b(e,t,r);var s,l,u=k(e),d=k(t);if(u.length!==d.length)return!1;for(u.sort(),d.sort(),l=u.length-1;l>=0;l--)if(u[l]!==d[l])return!1;for(l=u.length-1;l>=0;l--)if(s=u[l],!b(e[s],t[s],r,n))return!1;return!0}(e,t,r,n))}return r?e===t:e==t}function _(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function w(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function x(e,t,r,n){var a;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),a=function(e){var t;try{e()}catch(e){t=e}return t}(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!a&&y(a,r,"Missing expected exception"+n);var i="string"==typeof n,s=!e&&a&&!r;if((!e&&o.isError(a)&&i&&w(a,r)||s)&&y(a,r,"Got unwanted exception"+n),e&&a&&r&&!w(a,r)||!e&&a)throw a}h.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return m(g(e.actual),128)+" "+e.operator+" "+m(g(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,a=f(t),i=n.indexOf("\n"+a);if(i>=0){var o=n.indexOf("\n",i+1);n=n.substring(o+1)}this.stack=n}}},o.inherits(h.AssertionError,Error),h.fail=y,h.ok=v,h.equal=function(e,t,r){e!=t&&y(e,t,r,"==",h.equal)},h.notEqual=function(e,t,r){e==t&&y(e,t,r,"!=",h.notEqual)},h.deepEqual=function(e,t,r){b(e,t,!1)||y(e,t,r,"deepEqual",h.deepEqual)},h.deepStrictEqual=function(e,t,r){b(e,t,!0)||y(e,t,r,"deepStrictEqual",h.deepStrictEqual)},h.notDeepEqual=function(e,t,r){b(e,t,!1)&&y(e,t,r,"notDeepEqual",h.notDeepEqual)},h.notDeepStrictEqual=function e(t,r,n){b(t,r,!0)&&y(t,r,n,"notDeepStrictEqual",e)},h.strictEqual=function(e,t,r){e!==t&&y(e,t,r,"===",h.strictEqual)},h.notStrictEqual=function(e,t,r){e===t&&y(e,t,r,"!==",h.notStrictEqual)},h.throws=function(e,t,r){x(!0,e,t,r)},h.doesNotThrow=function(e,t,r){x(!1,e,t,r)},h.ifError=function(e){if(e)throw e},h.strict=n((function e(t,r){t||y(t,!0,r,"==",e)}),h,{equal:h.strictEqual,deepEqual:h.deepStrictEqual,notEqual:h.notStrictEqual,notDeepEqual:h.notDeepStrictEqual}),h.strict.strict=h.strict;var k=Object.keys||function(e){var t=[];for(var r in e)s.call(e,r)&&t.push(r);return t}}).call(this,r(18))},function(e,t,r){"use strict";e.exports={copySync:r(1008)}},function(e,t,r){"use strict";const n=r(10);function a(e){return(e=n.normalize(n.resolve(e)).split(n.sep)).length>0?e[0]:null}const i=/[<>:"|?*]/;e.exports={getRootPath:a,invalidWin32Path:function(e){const t=a(e);return e=e.replace(t,""),i.test(e)}}},function(e,t,r){"use strict";const n=r(17),a=r(1011),i=r(10);e.exports={hasMillisRes:function(e){let t=i.join("millis-test"+Date.now().toString()+Math.random().toString().slice(2));t=i.join(a.tmpdir(),t);const r=new Date(1435410243862);n.writeFile(t,"https://github.com/jprichardson/node-fs-extra/pull/141",a=>{if(a)return e(a);n.open(t,"r+",(a,i)=>{if(a)return e(a);n.futimes(i,r,r,r=>{if(r)return e(r);n.close(i,r=>{if(r)return e(r);n.stat(t,(t,r)=>{if(t)return e(t);e(null,r.mtime>1435410243e3)})})})})})},hasMillisResSync:function(){let e=i.join("millis-test-sync"+Date.now().toString()+Math.random().toString().slice(2));e=i.join(a.tmpdir(),e);const t=new Date(1435410243862);n.writeFileSync(e,"https://github.com/jprichardson/node-fs-extra/pull/141");const r=n.openSync(e,"r+");return n.futimesSync(r,t,t),n.closeSync(r),n.statSync(e).mtime>1435410243e3},timeRemoveMillis:function(e){if("number"==typeof e)return 1e3*Math.floor(e/1e3);if(e instanceof Date)return new Date(1e3*Math.floor(e.getTime()/1e3));throw new Error("fs-extra: timeRemoveMillis() unknown parameter type")},utimesMillis:function(e,t,r,a){n.open(e,"r+",(e,i)=>{if(e)return a(e);n.futimes(i,t,r,e=>{n.close(i,t=>{a&&a(e||t)})})})},utimesMillisSync:function(e,t,r){const a=n.openSync(e,"r+");return n.futimesSync(a,t,r),n.closeSync(a)}}},function(e,t,r){"use strict";const n=r(25).fromCallback;e.exports={copy:n(r(1013))}},function(e,t,r){(function(t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){a(o,n,i,s,c,"next",e)}function c(e){a(o,n,i,s,c,"throw",e)}s(void 0)}))}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var a=d(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=r(5),p=r(46),f=r(19),m=r(201),g=r(215),y=r(94),v=(r(218),r(93));r(219);fetch=r(125);var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(D,e);var n,a,u,f,b,_,w,x,k,S,E,A,P,C=l(D);function D(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,D),(t=C.call(this,e)).name="Arcade",t.description="Interface for creating and joining games coded for the Saito Open Source Game Engine.",t.categories="Games Entertainment",t.events=["chat-render-request"],t.mods=[],t.affix_callbacks_to=[],t.games=[],t.observer=[],t.old_game_removal_delay=2e6,t.is_initializing=!1,t.initialization_timer=null,t.viewing_arcade_initialization_page=0,t.icon_fa="fas fa-gamepad",t.accepted=[],t.description="A place to find, play and manage games!",t.categories="Games Utilities",t.header=null,t.overlay=null,t}return n=D,(a=[{key:"receiveEvent",value:function(e,t){"chat-render-request"==e&&this.browser_active&&(g.render(this.app,this),g.attachEvents(this.app,this))}},{key:"handleUrlParams",value:function(e){if("watch"==e.get("i")){var t=e.get("msg");this.observeGame(t,0)}}},{key:"renderArcadeMain",value:function(e,t){1==this.browser_active&&0==this.viewing_arcade_initialization_page&&(m.render(this.app,this),m.attachEvents(this.app,this))}},{key:"returnServices",value:function(){var e=[];return e.push({service:"arcade",domain:"saito"}),e}},{key:"respondTo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"header-dropdown"==e?{name:this.appname?this.appname:this.name,icon_fa:this.icon_fa,browser_active:this.browser_active,slug:this.returnSlug()}:null}},{key:"initialize",value:function(e){var t=this;s(d(D.prototype),"initialize",this).call(this,e),null!=this.app.options.games&&this.addGamesToOpenList(this.app.options.games.map((function(e){return t.createGameTXFromOptionsGame(e)}))),this.app.modules.respondTo("arcade-games").forEach((function(e){t.affix_callbacks_to.push(e.name)}))}},{key:"initializeHTML",value:function(e){this.header=new y(e,this),e.modules.getRespondTos("private_sale_overlay").forEach((function(e,t){e.initializePrivateSaleOverlay()}))}},{key:"onPeerHandshakeComplete",value:function(e,t){var r=this;if(0!=this.browser_active){var n=(new Date).getTime()-this.old_game_removal_delay;this.sendPeerDatabaseRequestWithFilter("Arcade",'SELECT * FROM games WHERE status = "open" AND created_at > '.concat(n),(function(e){e.rows&&r.addGamesToOpenList(e.rows.map((function(e){return new h.transaction(JSON.parse(e.tx))})))})),(new Date).getTime(),this.sendPeerDatabaseRequestWithFilter("Arcade","SELECT DISTINCT id, count(id) as count, last_move, game_id, module, player, players_array FROM gamestate WHERE 1 = 1 AND last_move > 10 GROUP BY game_id ORDER BY count DESC, last_move DESC LIMIT 8",(function(e){e.rows&&e.rows.forEach((function(e){var t=e.game_id,n=e.module,a=e.players_array,i=e.player;r.addGameToObserverList({game_id:t,module:n,players_array:a,player:i})}))}))}}},{key:"render",value:(P=i(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.getElementById("arcade-container")||t.browser.addElementToDom(v()),null==this.header&&(this.header=new y(t,this)),null==this.overlay&&(this.overlay=new p(t,this)),this.header.render(t,this),this.header.attachEvents(t,this),this.overlay.render(t,this),this.overlay.attachEvents(t,this),g.render(t,this),g.attachEvents(t,this),this.renderArcadeMain(this.app,this);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return P.apply(this,arguments)})},{key:"isMyGame",value:function(e,t){for(var r=0;r<e.msg.players.length;r++)if(e.msg.players[r]==t.wallet.returnPublicKey())return!0;return!1}},{key:"purgeBadGames",value:function(e){if(e.options&&e.options.games)for(var t=e.options.games.length-1;t>=0;t--)""===e.options.games[t].module&&e.options.games[t].id.length<25&&e.options.games.splice(t,1)}},{key:"notifyPeers",value:function(e,t){for(var r=0;r<e.network.peers.length;r++)if("lite"==e.network.peers[r].peer.synctype){var n={request:"arcade spv update",data:{}};n.data.tx=t,e.network.peers[r].sendRequest(n.request,n.data)}}},{key:"joinGame",value:function(e,t){for(var r=t.returnMessage(),n=(r.game_id,0);n<this.games;n++)if(this.games[n].transaction&&this.games[n].transaction.msg&&r.game_id==this.games[n].transaction.msg.game_id){for(var a=0;a<this.games[n].transaction.msg.players.length;a++)for(var i=0;i<t.transaction.to.length;i++)this.games[n].transaction.msg.players[a]==t.transaction.to[i].add&&(a=this.games[n].transaction.msg.players.length+1);this.games[n].transaction.msg.players.length}if(this.joinGameOnOpenList(t),this.receiveJoinRequest(null,t,0,e),t.transaction){if(!t.transaction.sig)return;if(1==t.msg.over)return;for(var o=0;o<this.games.length;o++)if(this.games[o].transaction.sig==r.game_id&&this.games[o].msg.players.length>=this.games[o].msg.players_needed&&this.games[o].msg.players[0]==this.app.wallet.returnPublicKey()){this.games[o].msg.players.splice(0,1),this.games[o].msg.players_sigs.splice(0,1);var s=this.createAcceptTransaction(this.games[o]);this.app.network.propagateTransaction(s)}}}},{key:"onConfirmation",value:(A=i(regeneratorRuntime.mark((function e(t,r,n,a){var i,o,s,c,l,u,d,h,p,f,m,g,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.returnMessage(),0!=n){e.next=44;break}if(this.purgeBadGames(a),(0==a.BROWSER&&"open"==i.request||"join"==i.request||"accept"==i.request||"close"==i.request)&&this.notifyPeers(a,r),"Arcade"===i.module&&"open"==i.request&&(this.addGameToOpenList(r),this.receiveOpenRequest(t,r,n,a)),"ArcadeInvite"===i.module&&"open"==i.request&&r.isTo(a.wallet.returnPublicKey())&&this.addGameToOpenList(r),"join"==i.request&&this.joinGame(a,r),"Arcade"==i.module&&"close"==i.request&&(this.receiveCloseRequest(t,r,n,a),this.receiveGameoverRequest(t,r,n,a)),null!=i.game_state&&""!=i.game_id&&this.saveGameState(t,r,n,a),"sorry"===i.request&&r.isTo(a.wallet.returnPublicKey())&&a.modules.returnModule("Arcade").receiveSorryAcceptedTransaction(t,r,n,a),"accept"!==i.request){e.next=44;break}return o={$game_id:r.msg.game_id},e.next=15,this.app.storage.executeDatabase('UPDATE games SET status = "active" WHERE game_id = $game_id',o,"arcade");case 15:if(r.isTo(a.wallet.returnPublicKey())){e.next=17;break}return e.abrupt("return");case 17:if(this.app.options&&(this.app.options.games||(this.app.options.games=[]),this.app.options.games)){for(s=!1,c=0;c<this.app.options.games.length;c++)this.app.options.games[c].id==i.game_id&&(s=!0);if(0==s){if(!r.isTo(a.wallet.returnPublicKey())&&this.games.length>0)for(l=0;l<this.games.length;l++)(u=Object.assign({sig:""},this.games[l].transaction)).sig==i.game_id&&(u.msg=Object.assign({players_needed:0,players:[]},this.games[l].msg),parseInt(u.msg.players_needed)>=u.msg.players.length+1&&this.removeGameFromOpenList(i.game_id));r.isTo(a.wallet.returnPublicKey())&&(d=this.app.modules.returnModule(r.msg.game))&&d.loadGame(r.msg.game_id)}}if(1!=this.app.BROWSER){e.next=34;break}if(null==this.app.options){e.next=32;break}if(null==this.app.options.games){e.next=32;break}h=0;case 22:if(!(h<this.app.options.games.length)){e.next=32;break}if(this.app.options.games[h].id!=i.game_id){e.next=29;break}if(0!=this.app.options.games[h].initializing){e.next=29;break}if(!((p=(new Date).getTime())-this.app.options.games[h].ts>5e3)){e.next=29;break}return console.log("".concat(p," ------- ").concat(this.app.options.games[h].ts)),e.abrupt("return");case 29:h++,e.next=22;break;case 32:if(!r.isTo(a.wallet.returnPublicKey())&&this.games.length>0)for(f=0;f<this.games.length;f++)(m=Object.assign({sig:""},this.games[f].transaction)).sig==i.game_id&&(m.msg=Object.assign({players_needed:0,players:[]},this.games[f].msg),parseInt(m.msg.players_needed)==m.msg.players.length+1&&this.removeGameFromOpenList(i.game_id));for(g=0;g<this.games.length;g++)(y=Object.assign({sig:""},this.games[g].transaction)).sig===r.msg.game_id&&y.options&&y.options.players_needed<=y.players.length+1&&(console.info("ACCEPT MESSAGE SENT ON GAME WAITING FOR ONE PLAYER! -- deleting"),this.games.splice(g,1),console.info("RE-RENDER"),this.renderArcadeMain(this.app,this));case 34:return e.next=36,this.receiveAcceptRequest(t,r,n,a);case 36:if(0==this.browser_active&&"Arcade"===i.module&&r.isTo(a.wallet.returnPublicKey())&&this.showAlert(),!r.isTo(a.wallet.returnPublicKey())){e.next=44;break}if(console.info("THIS GAMEIS FOR ME: "+r.isTo(a.wallet.returnPublicKey())),console.info("OUR GAMES: ",this.app.options.games),!r.msg.over){e.next=43;break}if(1!=r.msg.over){e.next=43;break}return e.abrupt("return");case 43:this.launchGame(i.game_id);case 44:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return A.apply(this,arguments)})},{key:"handlePeerRequest",value:(E=i(regeneratorRuntime.mark((function e(t,r,n){var a,i,o,c,l,u,p,f,m,g,y,v,b=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=b.length>3&&void 0!==b[3]?b[3]:null,"arcade spv update"===r.request){if(i=new h.transaction(r.data.tx.transaction),o=i.returnMessage(),c=0,l=null,console.log("arcade spv update: "+JSON.stringify(o)),"Arcade"===o.module&&"open"==o.request&&(siteMessage(o.game+" invite created.",3e3),this.addGameToOpenList(i),this.receiveOpenRequest(l,i,c,t)),"ArcadeInvite"===o.module&&"open"==o.request&&i.isTo(t.wallet.returnPublicKey())&&(siteMessage("Private "+o.game+" invite created.",3e3),this.addGameToOpenList(i)),"join"==o.request&&(console.log("joining game on open list..."),this.joinGameOnOpenList(i),console.log("and processing join request"),this.receiveJoinRequest(l,i,c,t)),"accept"==o.request&&(this.removeGameFromOpenList(o.game_id),o.players.includes(t.wallet.returnPublicKey())&&(siteMessage(o.module+" invite accepted.",2e4),t.browser.sendNotification("Game Accepted",o.module+" invite accepted.","game-acceptance-notification"))),"Arcade"==o.module&&"close"==o.request){if(i.isFrom(this.app.wallet.returnPublicKey()))this.removeGameFromOpenList(i.returnMessage().sig);else if(this.app.options&&this.app.options.games)for(u=0;u<this.app.options.games.length;u++)this.app.options.games[u].id===i.returnMessage().sig&&(console.log("%%%%%%%%%%%%%%%%"),console.log("%%%%%%%%%%%%%%%%"),console.log("%%%% DELETED %%%"),console.log("%%%%%%%%%%%%%%%%"),console.log("%%%%%%%%%%%%%%%%"),t.options.games[u].players.includes(i.transaction.from[0].add)&&(this.app.options.games[u].status="Opponent Resigned",this.app.options.games[u].over=1,this.app.storage.saveOptions(),(p=this.app.modules.returnModule(this.app.options.games[u].module))&&(p.loadGame(i.returnMessage().sig),p.updateStatus("Opponent Resigned"),p.updateLog("Opponent Resigned"))));this.removeGameFromOpenList(o.sig)}this.receiveCloseRequest(l,i,c,t)}if("rawSQL"!=r.request||0!=t.BROWSER||"Arcade"!=r.data.module){e.next=29;break}if(!(r.data.sql.indexOf("is_game_already_accepted")>-1)){e.next=29;break}if(f=r.data.game_id,(m={}).rows=[],!(this.accepted[f]>0)){e.next=25;break}if(!(this.accepted[f]>2)){e.next=21;break}return g="SELECT status FROM games WHERE game_id = $game_id",y={$game_id:f},e.next=13,this.app.storage.queryDatabase(g,y,"arcade");case 13:if(!(v=e.sent)){e.next=21;break}if(!(v.length>0)){e.next=21;break}if("open"!==v[0].status){e.next=21;break}return this.accepted[f]=0,m.rows.push({game_still_open:1}),a(m),e.abrupt("return");case 21:this.accepted[f]++,m.rows.push({game_still_open:0}),e.next=27;break;case 25:this.accepted[f]=1,m.rows.push({game_still_open:1});case 27:return a(m),e.abrupt("return");case 29:s(d(D.prototype),"handlePeerRequest",this).call(this,t,r,n,a);case 30:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return E.apply(this,arguments)})},{key:"doesGameExistLocally",value:function(e){if(this.app.options&&this.app.options.games)for(var t=0;t<this.app.options.games.length;t++)if(this.app.options.games[t].id===e)return 1;return 0}},{key:"receiveGameoverRequest",value:(S=i(regeneratorRuntime.mark((function e(t,r,n,a){var i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.returnMessage(),o={$status:"over",$game_id:i.game_id,$winner:i.winner},e.next=5,this.app.storage.executeDatabase("UPDATE games SET status = $status, winner = $winner WHERE game_id = $game_id",o,"arcade");case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return S.apply(this,arguments)})},{key:"receiveOpenRequest",value:(k=i(regeneratorRuntime.mark((function e(t,r,n,a){var i,o,s,c,l,u,d,h,p,f,m,g,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.returnMessage(),o=r.transaction.sig,s=2,parseInt(i.players_needed)>2&&(s=parseInt(i.players_needed)),c=i.game,l={},null!=i.options&&(l=i.options),u=r.transaction.from[0].add,d=u,h=1,null!=t&&(h=t.block.id),p=parseInt(r.transaction.ts),f=p+6e4*parseInt(60),m="",i.players_sigs.length>0&&(m=i.players_sigs[0]),g={$game_id:o,$players_needed:parseInt(s),$players_array:d,$module:c,$status:"open",$options:l,$tx:JSON.stringify(r.transaction),$start_bid:h,$created_at:p,$expires_at:f},e.next=21,a.storage.executeDatabase("INSERT INTO games (\n                game_id ,\n                players_needed ,\n                players_array ,\n                module ,\n                status ,\n                options ,\n                tx ,\n                start_bid ,\n                created_at ,\n                expires_at\n              ) VALUES (\n                $game_id ,\n                $players_needed ,\n                $players_array ,\n                $module ,\n                $status ,\n                $options ,\n                $tx,\n                $start_bid ,\n                $created_at ,\n                $expires_at\n              )",g,"arcade");case 21:return y={$game_id:o,$player:u,$acceptance_sig:m,$module:c,$created_at:p,$expires_at:f},e.next=25,a.storage.executeDatabase("INSERT INTO invites (\n                game_id ,\n                player ,\n                acceptance_sig ,\n                module ,\n                created_at ,\n                expires_at\n              ) VALUES (\n                $game_id ,\n                $player ,\n                $acceptance_sig ,\n                $module ,\n                $created_at ,\n                $expires_at\n              )",y,"arcade");case 25:return e.abrupt("return");case 26:case"end":return e.stop()}}),e)}))),function(e,t,r,n){return k.apply(this,arguments)})},{key:"receiveJoinRequest",value:(x=i(regeneratorRuntime.mark((function e(t,r,n,a){var i,o,s,c,l,u,d,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.returnMessage(),o=r.msg.game_id,parseInt(i.players_needed)>2&&parseInt(i.players_needed),s=i.game,null!=i.options&&i.options,c=r.transaction.from[0].add,null!=t&&t.block.id,l=parseInt(r.transaction.ts),u=l+6e4*parseInt(60),d="",""!=i.invite_sig&&(d=i.invite_sig),h={$game_id:o,$player:c,$acceptance_sig:d,$module:s,$created_at:l,$expires_at:u},e.next=21,a.storage.executeDatabase("INSERT INTO invites (\n                game_id ,\n                player ,\n                acceptance_sig ,\n                module ,\n                created_at ,\n                expires_at\n              ) VALUES (\n                $game_id ,\n                $player ,\n                $acceptance_sig ,\n                $module ,\n                $created_at ,\n                $expires_at\n              )",h,"arcade");case 21:return e.abrupt("return");case 22:case"end":return e.stop()}}),e)}))),function(e,t,r,n){return x.apply(this,arguments)})},{key:"createOpenTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=this.app.wallet.returnPublicKey(),n="Arcade";""!=t&&(r=t,n="ArcadeInvite");var a=e.ts,i=e.name,o=e.options,s=e.options_html,c=e.players_needed,l=this.app.crypto.signMessage("invite_game_".concat(a),this.app.wallet.returnPrivateKey()),u=this.app.wallet.createUnsignedTransactionWithDefaultFee();return u.transaction.to.push(new h.slip(r,0)),u.msg={ts:a,module:n,request:"open",game:i,options:o,options_html:s||"",players_needed:parseInt(c),players:[this.app.wallet.returnPublicKey()],players_sigs:[l]},u=this.app.wallet.signTransaction(u)}},{key:"receiveCloseRequest",value:(w=i(regeneratorRuntime.mark((function e(t,r,n,a){var i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.returnMessage(),o={$status:"close",$game_id:i.sig},e.next=5,a.storage.executeDatabase("UPDATE games SET status = $status WHERE game_id = $game_id",o,"arcade");case 5:e.sent;case 6:case"end":return e.stop()}}),e)}))),function(e,t,r,n){return w.apply(this,arguments)})},{key:"createInviteTransaction",value:function(e,t,r){var n=r.returnMessage(),a=e.wallet.createUnsignedTransactionWithDefaultFee();return a.transaction.to.push(new h.slip(r.transaction.from[0].add,0)),a.transaction.to.push(new h.slip(e.wallet.returnPublicKey(),0)),a.msg.ts="",a.msg.module=n.game,a.msg.request="invite",a.msg.game_id=r.transaction.sig,a.msg.players_needed=parseInt(n.players_needed),a.msg.options=n.options,a.msg.accept_sig="",""!=r.msg.accept_sig&&(a.msg.accept_sig=r.msg.accept_sig),""!=r.msg.ts&&(a.msg.ts=r.msg.ts),a.msg.invite_sig=e.crypto.signMessage("invite_game_"+a.msg.ts,e.wallet.returnPrivateKey()),a=this.app.wallet.signTransaction(a)}},{key:"createJoinTransaction",value:function(e){var t=e.returnMessage(),r=this.app.wallet.createUnsignedTransactionWithDefaultFee();return r.transaction.to.push(new h.slip(e.transaction.from[0].add,0)),r.transaction.to.push(new h.slip(this.app.wallet.returnPublicKey(),0)),r.msg.ts="",r.msg.module=t.game,r.msg.request="join",r.msg.game_id=e.transaction.sig,r.msg.players_needed=parseInt(t.players_needed),r.msg.options=t.options,r.msg.invite_sig=this.app.crypto.signMessage("invite_game_"+e.msg.ts,this.app.wallet.returnPrivateKey()),""!=e.msg.ts&&(r.msg.ts=e.msg.ts),r=this.app.wallet.signTransaction(r)}},{key:"launchSinglePlayerGame",value:function(e,t){window.location="/"+t.slug}},{key:"createAcceptTransaction",value:function(e){var t=e.returnMessage(),r=this.app.crypto.signMessage("invite_game_"+t.ts,this.app.wallet.returnPrivateKey());t.players.push(this.app.wallet.returnPublicKey()),t.players_sigs.push(r),t.request="accept";for(var n=this.app.wallet.createUnsignedTransactionWithDefaultFee(),a=0;a<t.players.length;a++)n.transaction.to.push(new h.slip(t.players[a],0));return n.transaction.to.push(new h.slip(this.app.wallet.returnPublicKey(),0)),n.msg=t,n.msg.game_id=e.transaction.sig,n.msg.request="accept",n.msg.module=t.game,n=this.app.wallet.signTransaction(n)}},{key:"receiveSorryAcceptedTransaction",value:function(e,t,r,n){var a=t.returnMessage();try{if(n.options.games)for(var i=n.options.games.length-1;i>=0;i--)n.options.games[i].id==a.game_id&&(n.options.games[i].players.length!=parseInt(n.options.games[i].players_needed)||n.options.games[i].players.includes(t.transaction.from[0].add)||(1==this.browser_active&&salert("Opponent has responded claiming game already accepted :( -- returning to Arcade"),n.options.games.splice(i,1),n.storage.saveOptions()));if(1==this.browser_active)return salert("Sorry! Your opponent has replied that has already accepted that game!"),void(window.location="/arcade")}catch(e){}}},{key:"receiveAcceptRequest",value:(_=i(regeneratorRuntime.mark((function e(t,r,n,a){var i,o,s,c,l,u,d,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=this.browser_active){e.next=19;break}if(!r.isTo(a.wallet.returnPublicKey())){e.next=17;break}if(r.returnMessage().game_id,!a.options.games){e.next=12;break}i=0;case 6:if(!(i<a.options.games.length)){e.next=12;break}if(a.options.games[i].id!=r.transaction.sig){e.next=9;break}return e.abrupt("return");case 9:i++,e.next=6;break;case 12:GameLoader.render(a,this),GameLoader.attachEvents(a,this),this.viewing_arcade_initialization_page=1,e.next=19;break;case 17:if(0!=this.game.player){e.next=19;break}return e.abrupt("return");case 19:for(o=r.returnMessage(),s=[],c=0;c<r.transaction.to.length;c++)s.includes(r.transaction.to[c].add)||s.push(r.transaction.to[c].add);return(l=s).sort(),u=l.join("_"),d="UPDATE games SET players_array = $players_array WHERE status = $status AND game_id = $game_id",h={$players_array:u,$status:"open",$game_id:o.game_id},e.prev=27,e.next=30,this.app.storage.executeDatabase(d,h,"arcade");case 30:e.sent,e.next=35;break;case 33:e.prev=33,e.t0=e.catch(27);case 35:return d="UPDATE games SET status = 'active' WHERE game_id = $game_id",h={$game_id:o.game_id},e.prev=37,e.next=40,this.app.storage.executeDatabase(d,h,"arcade");case 40:e.sent,e.next=46;break;case 43:e.prev=43,e.t1=e.catch(37),console.log(e.t1);case 46:case"end":return e.stop()}}),e,this,[[27,33],[37,43]])}))),function(e,t,r,n){return _.apply(this,arguments)})},{key:"launchGame",value:function(e){var t=this;if(0!=this.browser_active){var r=this;r.is_initializing=!0,r.initialization_timer=setInterval((function(){console.log("setInterval");var n=-1;if(null!=r.app.options.games)for(var a=0;a<r.app.options.games.length;a++)r.app.options.games[a].id==e&&(n=a);if(-1!=n&&0==r.app.options.games[n].initializing){var i=1;if(r.app.wallet.wallet.pending.length>0)for(var o=0;o<r.app.wallet.wallet.pending.length;o++){var s=new h.transaction(JSON.parse(r.app.wallet.wallet.pending[o])).returnMessage();s.module==r.app.options.games[n].module&&s.game_id==r.app.options.games[n].id&&(i=0)}if(0==i)return void console.log("transaction for this game still in pending...");clearInterval(r.initialization_timer),GameLoader.render(t.app,t,e),GameLoader.attachEvents(t.app,t),t.viewing_arcade_initialization_page=1}}),1e3)}}},{key:"webServer",value:function(e,n,a){s(d(D.prototype),"webServer",this).call(this,e,n,a);var o=e.storage.returnFileSystem(),c=r(10);null!=o&&(n.get("/arcade/observer_multi/:game_id/:bid/:tid/:last_move",function(){var t=i(regeneratorRuntime.mark((function t(r,n){var a,i,o,s,c,l,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=0,i=0,o=0,s=0;try{r.params.last_move&&(a=r.params.last_move),r.params.bid&&(i=r.params.bid),r.params.tid&&(o=r.params.tid),r.params.game_id&&(s=r.params.game_id),"undefined"===i&&(i=0),"undefined"===o&&(o=0)}catch(e){}return c="SELECT * FROM gamestate WHERE game_id = $game_id AND last_move > $last_move ORDER BY last_move ASC LIMIT 10",l={$game_id:s,$last_move:a},0!=o&&(c="SELECT * FROM gamestate WHERE game_id = $game_id AND (last_move > $last_move OR tid > $last_tid) ORDER BY last_move ASC LIMIT 10",l={$game_id:s,$last_move:a,$last_tid:o}),t.next=10,e.storage.queryDatabase(c,l,"arcade");case 10:if(!((u=t.sent).length>0)){t.next=19;break}return n.setHeader("Content-type","text/html"),n.charset="UTF-8",n.write(JSON.stringify(u)),n.end(),t.abrupt("return");case 19:return n.setHeader("Content-type","text/html"),n.charset="UTF-8",n.write("{}"),n.end(),t.abrupt("return");case 24:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),n.get("/arcade/observer_prev/:game_id/:current_move",function(){var t=i(regeneratorRuntime.mark((function t(r,n){var a,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="SELECT * FROM gamestate WHERE game_id = $game_id AND last_move < $last_move ORDER BY last_move DESC LIMIT 2",i={$game_id:r.params.game_id,$last_move:r.params.current_move},0!=r.params.current_move&&"undefined"!==r.params.current_move||(a="SELECT * FROM gamestate WHERE game_id = $game_id ORDER BY last_move ASC LIMIT 1",i={$game_id:r.params.game_id}),t.next=5,e.storage.queryDatabase(a,i,"arcade");case 5:if(!((o=t.sent).length>0)){t.next=14;break}return n.setHeader("Content-type","text/html"),n.charset="UTF-8",n.write(JSON.stringify(o)),n.end(),t.abrupt("return");case 14:return n.setHeader("Content-type","text/html"),n.charset="UTF-8",n.write("{}"),n.end(),t.abrupt("return");case 19:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),n.get("/arcade/observer/:game_id",function(){var t=i(regeneratorRuntime.mark((function t(r,n){var a,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={$game_id:r.params.game_id},t.next=4,e.storage.queryDatabase("SELECT bid, tid, last_move, game_state FROM gamestate WHERE game_id = $game_id ORDER BY id DESC LIMIT 1",a,"arcade");case 4:if(!((i=t.sent).length>0)){t.next=12;break}return o=i[0],n.setHeader("Content-type","text/html"),n.charset="UTF-8",n.write(JSON.stringify(o)),n.end(),t.abrupt("return");case 12:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),n.get("/arcade/keystate/:game_id/:player_pkey",function(){var t=i(regeneratorRuntime.mark((function t(r,n){var a,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={$game_id:r.params.game_id,$playerpkey:r.params.player_pkey},t.next=4,e.storage.queryDatabase("SELECT * FROM gamestate WHERE game_id = $game_id AND player = $playerpkey ORDER BY id DESC LIMIT 1",a,"arcade");case 4:if(!((i=t.sent).length>0)){t.next=12;break}return o=i[0],n.setHeader("Content-type","text/html"),n.charset="UTF-8",n.write(o.game_state.toString()),n.end(),t.abrupt("return");case 12:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),n.get("/arcade/restore/:game_id/:player_pkey",function(){var t=i(regeneratorRuntime.mark((function t(r,n){var a,i,o,s,c,l,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={$game_id:r.params.game_id},t.next=4,e.storage.queryDatabase("SELECT * FROM gamestate WHERE game_id = $game_id ORDER BY id DESC LIMIT 10",a,"arcade");case 4:i=t.sent,o=0,s=[],c="";try{null!=r.params.player_pkey&&(c=r.params.pkayer_pkey)}catch(e){}if(!(i.length>0)){t.next=16;break}for(l=0;l<i.length;l++)(u=i[l]).player_pkey==c?o=1:s.push(u.state),""!=c&&1!=o||(l=i.length+1);return n.setHeader("Content-type","text/html"),n.charset="UTF-8",n.write(JSON.stringify(s)),n.end(),t.abrupt("return");case 16:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),n.get("/arcade/invite/:gameinvite",function(){var e=i(regeneratorRuntime.mark((function e(r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setHeader("Content-type","text/html"),n.sendFile(c.resolve(t+"/web/invite.html"));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()))}},{key:"createGameTXFromOptionsGame",value:function(e){var t=new h.transaction;if(!(e.over&&e.last_block>0)){e.players?(t.transaction.to=e.players.map((function(e){return new h.slip(e)})),t.transaction.from=e.players.map((function(e){return new h.slip(e)}))):(t.transaction.from.push(new h.slip(this.app.wallet.returnPublicKey())),t.transaction.to.push(new h.slip(this.app.wallet.returnPublicKey())));var r={request:"loaded",game:e.module,game_id:e.id,options:e.options,players:e.players,players_needed:e.players_needed,over:e.over,last_block:e.last_block};return"Opponent Resigned"===e.status&&(r.options_html="Opponent Resigned"),t.transaction.sig=e.id,t.msg=r,t=this.app.wallet.signTransaction(t)}}},{key:"removeOldGames",value:function(){for(var e=0,t=0;t<this.games.length;t++){var r=parseInt(this.games[t].transaction.ts);(new Date).getTime()-r>this.old_game_removal_delay&&(this.games.splice(t,1),e=1,t--)}return e}},{key:"removeGameFromOpenList",value:function(e){this.games=this.games.filter((function(t){return!t.transaction||t.transaction.sig!=e})),this.renderArcadeMain(this.app,this)}},{key:"isForUs",value:function(e){var t=this;if(!e)return!1;var r=!0,n=e.returnMessage();return!!n&&(n.options.players_invited&&(r=!1,e.transaction.from[0].add==this.app.wallet.returnPublicKey()?r=!0:e.returnMessage().options.players_invited.forEach((function(e){e!=t.app.wallet.returnPublicKey()&&e!=t.app.keys.returnIdentifierByPublicKey(t.app.wallet.returnPublicKey())||(r=!0)}))),r)}},{key:"validateGame",value:function(e){if(!e)return!1;if(!e.transaction)return!1;if(!e.transaction.sig)return!1;if(1==e.msg.over)return!1;for(var t=0;t<this.games.length;t++){var r=Object.assign({sig:""},this.games[t].transaction);if(e.transaction.sig==r.sig)return!1;if(""!=e.returnMessage().game_id&&e.returnMessage().game_id==r.sig)return!1;if(e.returnMessage().game_id===this.games[t].transaction.sig)return console.log("ERROR 480394: not re-adding existing game to list"),!1}return!0}},{key:"joinGameOnOpenList",value:function(e){if(e.transaction&&e.transaction.sig&&1!=e.msg.over){for(var t=e.returnMessage(),r=0;r<this.games.length;r++)this.games[r].transaction.sig==t.game_id&&(this.games[r].msg.players.includes(e.transaction.from[0].add)||""!=t.invite_sig&&(this.games[r].msg.players.push(e.transaction.from[0].add),this.games[r].msg.players_sigs||(this.games[r].msg.players_sigs=[]),this.games[r].msg.players_sigs.push(t.invite_sig)));try{1==this.browser_active&&this.render(this.app)}catch(e){console.log("Non-fatal error rendering open game list")}}}},{key:"addGameToOpenList",value:function(e){if(console.log("addGameToOpenList"),this.validateGame(e)){var t=this.isForUs(e);t&&this.games.unshift(e);var r=this.removeOldGames();(t||r)&&this.renderArcadeMain(this.app,this)}}},{key:"addGamesToOpenList",value:function(e){var t=this,r=!1;e.forEach((function(e,n){if(t.validateGame(e)){var a=t.isForUs(e);a&&t.games.unshift(e),r=r||a}}));var n=this.removeOldGames();(r||n)&&this.renderArcadeMain(this.app,this)}},{key:"addGameToObserverList",value:function(e){for(var t=0;t<this.observer.length;t++)if(e.game_id==this.observer[t].game_id)return;this.observer.push(e),this.renderArcadeMain(this.app,this)}},{key:"saveGameState",value:(b=i(regeneratorRuntime.mark((function e(t,r,n,a){var i,o,s,c,l,u,d,h,p,f,m,g,y,v,b,_,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=r.returnMessage(),o="",""!=i.game_state&&(o=i.game_state),s='INSERT INTO gamestate (\n                game_id ,\n                player ,\n                players_array ,\n                module ,\n                bid ,\n                tid ,\n                lc ,\n                sharekey ,\n                game_state ,\n                tx ,\n                last_move\n       ) VALUES (\n                $game_id,\n                $player,\n                $players_array,\n                $module,\n                $bid,\n                $tid,\n                $lc,\n                "",\n                $game_state,\n                $tx ,\n                $last_move\n        )',c=[],l=r.transaction.to,u=0;u<l.length;u++)c.includes(l[u].add)||c.push(l[u].add);if(o.last_turn=i.turn,1!=c.length){e.next=10;break}return e.abrupt("return");case 10:return d=c.join("_"),h={$game_id:i.game_id,$player:r.transaction.from[0].add,$players_array:d,$module:i.module,$bid:t.block.id,$tid:r.transaction.id,$lc:1,$game_state:JSON.stringify(o),$tx:JSON.stringify(r.transaction),$last_move:(new Date).getTime()},e.next=14,a.storage.executeDatabase(s,h,"arcade");case 14:if(!(Math.random()<.005)){e.next=43;break}return p=(new Date).getTime(),f={$last_move:p-64e7},e.next=21,a.storage.queryDatabase("SELECT game_id FROM gamestate WHERE last_move < $last_move GROUP BY game_id ORDER BY last_move ASC",f,"arcade");case 21:if(!(m=e.sent)){e.next=34;break}if(!(m.length>0)){e.next=34;break}g=0;case 25:if(!(g<m.length)){e.next=34;break}return y=m[g].game_id,v={$game_id:y},e.next=31,a.storage.executeDatabase("DELETE FROM gamestate WHERE game_id = $game_id",v,"arcade");case 31:g++,e.next=25;break;case 34:return b=(new Date).getTime()-12e5,_={$adjusted_ts:b},e.next=39,this.app.storage.executeDatabase("DELETE FROM games WHERE status = 'open' AND created_at < $adjusted_ts",_,"arcade");case 39:return w={$adjusted_ts:b},e.next=43,this.app.storage.executeDatabase("DELETE FROM invites WHERE created_at < $adjusted_timestamp",w,"arcade");case 43:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return b.apply(this,arguments)})},{key:"observeGame",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this,n=JSON.parse(this.app.crypto.base64ToString(e)),a=n.player,i=n.game_id,o=n.tid,s=n.bid,c=n.last_move;if(void 0!==o&&""!=o||(o=1),void 0!==s&&""!=s||(o=1),void 0!==c&&""!=c||(o=1),this.app.options.games)for(var l=this.app.options.games,u=0;u<l.length;u++)if(l[u].id===i){l[u].observer_mode=1,l[u].observer_mode_active=0;for(var d=0;d<l[u].players.length;d++)l[u].players[d]==a&&(l[u].observer_mode_player=d+1);l[u].observer_mode_player||(l[u].observer_mode_player=1),""==a&&(a=l[u].players[0]),l[u].ts=(new Date).getTime(),r.app.keys.addWatchedPublicKey(a),r.app.options.games=l,r.app.storage.saveOptions();var h=r.app.modules.returnModule(n.module).returnSlug();return void(window.location="/"+h)}r.app.keys.addWatchedPublicKey(a);var p=r.app.options.games;null==p&&(p=[]);for(var f=0;f<p.length;f++)p[f].id==i&&p.splice(f,1);console.log("ABOUT TO KICK INTO OBSERVER MODE!"),r.app.options.games=p,r.initializeObserverMode(i,t),console.log("AND CONTINUING")}},{key:"observerDownloadNextMoves",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this,n=0;n<e.game.future.length;n++){var a=new h.transaction(JSON.parse(e.game.future[n])),i=a.returnMessage();i.step.game<=e.game.step.game&&i.step.game<=e.game.step.players[a.transaction.from[0].add]&&(e.game.future.splice(n,1),n--)}console.log(" NEXT MOVES: /arcade/observer_multi/".concat(e.game.id,"/").concat(e.game.step.bid,"/").concat(e.game.step.tid,"/").concat(e.game.step.ts)),fetch("/arcade/observer_multi/".concat(e.game.id,"/").concat(e.game.step.bid,"/").concat(e.game.step.tid,"/").concat(e.game.step.ts)).then((function(n){n.json().then((function(n){console.log("data length: "+n.length);for(var a=0;a<n.length;a++){console.log("i: "+a+" --- tx id: "+n[a].id);var i=new h.transaction(JSON.parse(n[a].tx));i.msg=i.returnMessage(),i.msg.game_state={},i.msg.last_move=n[a].last_move,i.msg.last_tid=n[a].tid,i.msg.last_bid=n[a].bid,i=r.app.wallet.signTransaction(i);for(var o=0,s=0;s<e.game.future.length;s++)new h.transaction(JSON.parse(e.game.future[s])),console.log("steps comparison: "+i.msg.step.game+" -- vs -- "+e.game.step.game),i.msg.step.game<=e.game.step.game&&i.msg.step.game<=e.game.step.players[i.transaction.from[0].add]&&(o=1);0==o&&e.game.future.push(JSON.stringify(i.transaction))}e.saveGame(e.game.id),e.saveFutureMoves(e.game.id),null!=t&&t(e)}))})).catch((function(e){return console.info("ERROR 354322: error downloading next moves",e)}))}},{key:"initializeObserverModePreviousStep",value:(f=i(regeneratorRuntime.mark((function e(t,r){var n,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=(n=this).app.options.games,i=null,console.log("FETCHING: /arcade/observer_prev/".concat(t,"/").concat(r)),fetch("/arcade/observer_prev/".concat(t,"/").concat(r)).then((function(e){e.json().then((function(e){i=JSON.parse(e[0].game_state),console.log("UPDATED GAME TS to: "+JSON.stringify(i.step)),console.log("UPDATED GAME QUEUE to: "+JSON.stringify(i.queue));var t=new h.transaction(JSON.parse(e[0].tx));t.msg=t.returnMessage(),t.msg.game_state={},t.msg.last_move=e[0].last_move,t.msg.last_tid=e[0].tid,t.msg.last_bid=e[0].bid,t=n.app.wallet.signTransaction(t),null!=i.future&&"undefined"!=i.future&&null!=i.future||(i.future=[]),i.future.push(JSON.stringify(t.transaction));var r=i;r.turn=[],console.log("reset to step: "+r.step.game),console.log("queue at this step: "+r.queue),r.observer_mode=1,r.observer_mode_active=0,r.player=0,r.step.ts=0;for(var o=-1,s=0;s<a.length;s++)a[s].id===i.id&&(o=s);-1==o?a.push(r):a[o]=r,n.app.options.games=a,n.app.storage.saveOptions(),n.app.modules.returnModule(r.module);var c=n.app.modules.returnModule(i.module).returnSlug();window.location="/"+c}))}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)})},{key:"initializeObserverMode",value:function(e,t){var r=this,n=r.app.options.games,a=null,i=0;console.log("initializing observer mode here!"),console.log("FETCHED: /arcade/observer_multi/".concat(e,"/0/0/").concat(t)),fetch("/arcade/observer_multi/".concat(e,"/0/0/").concat(t)).then((function(e){e.json().then((function(e){console.log("RECEIVED THE RESPONSE!");for(var t=0;t<e.length;t++)if(0==i){console.log("AA2"),a=JSON.parse(e[t].game_state),i=1,console.log("AA3");var o=new h.transaction(JSON.parse(e[t].tx));o.msg=o.returnMessage(),o.msg.game_state={},o.msg.last_move=e[t].last_move,o.msg.last_tid=e[t].last_tid,o.msg.last_bid=e[t].bid,o=r.app.wallet.signTransaction(o),null!=a.future&&"undefined"!=a.future&&null!=a.future||(a.future=[]),a.future.push(JSON.stringify(o.transaction)),console.log("AAA")}else{console.log("BB1");var s=new h.transaction(JSON.parse(e[t].tx));s.msg=s.returnMessage(),s.msg.game_state={},s.msg.last_move=e[t].last_move,s.msg.last_tid=e[t].tid,s.msg.last_bid=e[t].bid,s=r.app.wallet.signTransaction(s),null!=a.future&&"undefined"!=a.future&&null!=a.future||(a.future=[]),a.future.push(JSON.stringify(s.transaction)),console.log("BB2")}var c=a;c.observer_mode=1,c.observer_mode_active=0,c.player=0;for(var l=-1,u=0;u<n.length;u++)n[u].id===a.id&&(l=u);-1==l?n.push(c):n[l]=c,r.app.options.games=n,r.app.storage.saveOptions();var d=r.app.modules.returnModule(a.module).returnSlug();window.location="/"+d}))})).catch((function(e){return console.info("ERROR 351232: error fetching queued games for observer mode",e)}))}},{key:"shouldAffixCallbackToModule",value:function(e){if("ArcadeInvite"==e)return 1;if("Arcade"==e)return 1;for(var t=0;t<this.affix_callbacks_to.length;t++)if(this.affix_callbacks_to[t]==e)return 1;return 0}},{key:"updateIdentifier",value:function(){}},{key:"onResetWallet",value:function(){this.app.options&&(this.app.options.games=[])}}])&&o(n.prototype,a),u&&o(n,u),D}(f);e.exports=b}).call(this,"/")},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r(1048),o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t}var t,r,o;return t=e,(r=[{key:"render",value:function(e,t){document.querySelector(".game-overlay-backdrop")||e.browser.addElementToDom(i())}},{key:"attachEvents",value:function(e,t){}},{key:"showOverlay",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.render(e,t);var a=this,i=document.querySelector(".game-overlay"),o=document.querySelector(".game-overlay-backdrop");i.innerHTML=r,i.style.display="block",o.style.display="block",o.onclick=function(e){a.hideOverlay(n)}}},{key:"blockClose",value:function(){document.querySelector(".game-overlay-backdrop").onclick=function(e){}}},{key:"hideOverlay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=document.querySelector(".game-overlay"),r=document.querySelector(".game-overlay-backdrop");t.style.display="none",r.style.display="none",null!=e&&e()}},{key:"showCardSelectionOverlay",value:function(e,t,r){var a=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o="",s="";i.backgroundImage&&(s+="background-image: url(".concat(i.backgroundImage,"); background-size: cover;")),i.padding&&(s+="padding:".concat(i.padding,";")),i.textAlign&&(s+="text-align:".concat(i.textAlign,";")),o+='<div style="'.concat(s,'">');var c=1,l=1,u=0,d=1,h="80vh",p="80vw",f=[];for(var m in i.onContinue||(i.onContinue=function(){},c=0),i.onClose||(i.onClose=function(){},l=0),i.onCardSelect||(i.onCardSelect=function(){},d=0),(c||l)&&(u=1),i.rowGap&&i.rowGap,i.columnGap&&i.columnGap,i.title&&(o+='<div class="game-overlay-cardlist-title">'.concat(i.title,"</div>")),i.subtitle&&(o+='<div class="game-overlay-cardlist-subtitle">'.concat(i.subtitle,"</div>")),i.cardlistHeight&&(h=i.cardlistHeight),i.cardlistWidth&&(p=i.cardlistWidth),i.unselectableCards&&(f=i.unselectableCards),o+='<div class="game-overlay-cardlist-container">',r){var g='<div class="game-overlay-cardlist-card">';if(null!=r[m]){var y=0;"object"!==n(r[m])||Array.isArray(r[m])||null==r[m]||"undefined"!=r[m].returnCardImage&&null!=r[m].returnCardImage&&(g+=r[m].returnCardImage(),y=1),0==y&&(Array.isArray(r)?g+=t.returnCardImage(r[m]):g+=t.returnCardImage(m))}else g+=t.returnCardImage(m);g+="</div>";for(var v=0;v<f.length;v++)JSON.stringify(f[v])===JSON.stringify(r[m])&&(g=g.replace(/game-overlay-cardlist-card/g,"game-overlay-cardlist-card game-overlay-cardlist-unselectable"));o+=g}if(o+="</div>",u&&(o+='<div class="game-overlay-button-container">',c&&(o+='<div class="game-overlay-button-continue button game-overlay-cardlist-button">continue</div>'),l&&(o+='<div class="game-overlay-button-close button super game-overlay-cardlist-button">close</div>'),o+="</div>"),o+="</div>",this.showOverlay(e,t,o,(function(){i.onClose()})),document.querySelectorAll(".game-overlay-cardlist-card").forEach((function(e){e.children&&(e.style.height=a.calculateElementHeight(e.children[0]))})),document.querySelector(".game-overlay-cardlist-container").style.width=p,document.querySelector(".game-overlay-cardlist-container").style.height="auto",document.querySelector(".game-overlay-cardlist-container").style.maxWidth=p,document.querySelector(".game-overlay-cardlist-container").style.maxHeight=h,2==r.length){var b=document.querySelector(".game-overlay-cardlist-container");if(b){var _=b.children[0];if(_){var w=_.children[0];w&&(w.style.float="right")}}}if(1==r.length){var x=document.querySelector(".game-overlay-cardlist-card");x.style.marginRight="auto",x.style.marginLeft="auto"}if(c&&(document.querySelector(".game-overlay-button-continue").onclick=function(e){i.onContinue()}),l&&(document.querySelector(".game-overlay-button-close").onclick=function(e){i.onClose()}),d&&(document.querySelectorAll(".game-overlay-cardlist-card").forEach((function(e){e.onclick=function(t){var r=e.getAttribute("id");null==r&&e.children&&(r=e.children[0].getAttribute("id")),i.onCardSelect(r)}})),document.querySelectorAll(".game-overlay-cardlist-unselectable").forEach((function(e){e.onclick=function(e){}}))),i.columns>0){for(var k="1fr ",S=1;S<i.columns;S++)k+="1fr ";document.querySelector(".game-overlay-cardlist-container").style.gridTemplateColumns=k}else document.querySelector(".game-overlay-cardlist-container").style.gridTemplateColumns="1fr 1fr 1fr 1fr"}},{key:"calculateElementHeight",value:function(e){return document.all?(elmHeight=e.currentStyle.height,elmMargin=parseInt(e.currentStyle.marginTop,10)+parseInt(e.currentStyle.marginBottom,10)):(elmHeight=document.defaultView.getComputedStyle(e,"").getPropertyValue("height"),elmMargin=parseInt(document.defaultView.getComputedStyle(e,"").getPropertyValue("margin-top"))+parseInt(document.defaultView.getComputedStyle(e,"").getPropertyValue("margin-bottom"))),parseInt(elmHeight)+parseInt(elmMargin)+"px"}}])&&a(t.prototype,r),o&&a(t,o),e}();e.exports=o},function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r(1049),o=r(46),s=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};n(this,e),this.app=t,this.callback=r}var t,r,s;return t=e,(r=[{key:"render",value:function(e,t){t.modal_overlay=new o(e),t.modal_overlay.render(e,t),t.modal_overlay.attachEvents(e,t),document.querySelector(".add-user")||t.modal_overlay.showOverlay(e,t,i())}},{key:"attachEvents",value:function(e,t){var r=this;document.querySelector(".username-registry-input").select(),document.querySelector(".username-registry-input").setAttribute("placeholder",""),document.querySelector(".tutorial-skip").onclick=function(){e.options.wallet.anonymous=1,e.storage.saveOptions(),t.modal_overlay.hideOverlay(),r.callback()},document.querySelector("#registry-modal-button").onclick=function(){var n=document.querySelector("#registry-input").value;""==document.querySelector("#name").value&&e.modules.returnActiveModule().sendPeerDatabaseRequestWithFilter("Registry",'SELECT * FROM records WHERE identifier = "'.concat(n,'@saito"'),(function(a){if(a.rows){if(a.rows.length>0)return void salert("Identifier already in use. Please select another");e.modules.returnModule("Registry")&&(e.modules.returnModule("Registry").tryRegisterIdentifier(n)?(salert("Registering "+n+"@saito"),t.modal_overlay.hideOverlay(),r.callback()):salert("Error 411413: Error Registering Username"))}}))}}}])&&a(t.prototype,r),s&&a(t,s),e}();e.exports=s},function(e,t){e.exports=AracadeGameCarouselLeafTemplate=function(e,t){return'\n         <div class="leaf" style="background: url('.concat(t.background,');background-size:cover">\n           <div class="big">').concat(t.title,"</div>\n         </div>\n  ")}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){a(o,n,i,s,c,"next",e)}function c(e){a(o,n,i,s,c,"throw",e)}s(void 0)}))}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var a=u(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(g,e);var t,r,n,a,l,u,d,h,p,f,m=c(g);function g(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),(t=m.call(this,e)).name="Archive",t.description="Supports the saving and serving of network transactions",t.categories="Utilities Core",t.events=[],t.description="A tool for storing transactions for asynchronous retreival.",t.categories="Utilities",t}return t=g,(r=[{key:"onConfirmation",value:function(e,t,r,n){t.returnMessage(),0==r&&""!=t.msg.module&&this.saveTransaction(t)}},{key:"handlePeerRequest",value:(f=i(regeneratorRuntime.mark((function e(t,r,n,a){var i,o,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=r.request){e.next=2;break}return e.abrupt("return");case 2:if(null!=r.data){e.next=4;break}return e.abrupt("return");case 4:if(o={},"archive"!==r.request){e.next=32;break}if("delete"===r.data.request&&this.deleteTransaction(r.data.tx,r.data.publickey,r.data.sig),"save"===r.data.request&&this.saveTransaction(r.data.tx,r.data.type),"save_key"!==r.data.request){e.next=12;break}if(r.data.key){e.next=11;break}return e.abrupt("return");case 11:this.saveTransactionByKey(r.data.key,r.data.tx,r.data.type);case 12:if("load"!==r.data.request){e.next=23;break}return s="",c=50,""!=r.data.num&&(c=r.data.num),""!=r.data.type&&(s=r.data.type),e.next=19,this.loadTransactions(r.data.publickey,r.data.sig,s,c);case 19:i=e.sent,o.err="",o.txs=i,a(o);case 23:if("load_keys"!==r.data.request){e.next=32;break}if(r.data.keys){e.next=26;break}return e.abrupt("return");case 26:return e.next=28,this.loadTransactionsByKeys(r.data);case 28:i=e.sent,o.err="",o.txs=i,a(o);case 32:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return f.apply(this,arguments)})},{key:"saveTransaction",value:(p=i(regeneratorRuntime.mark((function e(){var t,r,n,a,i,o,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:null,r=s.length>1&&void 0!==s[1]?s[1]:"",null!=t){e.next=4;break}return e.abrupt("return");case 4:n="",a={},i=0;case 7:if(!(i<t.transaction.to.length)){e.next=15;break}return n="INSERT OR IGNORE INTO txs (sig, publickey, tx, ts, type) VALUES ($sig, $publickey, $tx, $ts, $type)",a={$sig:t.transaction.sig,$publickey:t.transaction.to[i].add,$tx:JSON.stringify(t.transaction),$ts:t.transaction.ts,$type:r},e.next=12,this.app.storage.executeDatabase(n,a,"archive");case 12:i++,e.next=7;break;case 15:o=0;case 16:if(!(o<t.transaction.from.length)){e.next=24;break}return n="INSERT OR IGNORE INTO txs (sig, publickey, tx, ts, type) VALUES ($sig, $publickey, $tx, $ts, $type)",a={$sig:t.transaction.sig,$publickey:t.transaction.from[o].add,$tx:JSON.stringify(t.transaction),$ts:t.transaction.ts,$type:r},e.next=21,this.app.storage.executeDatabase(n,a,"archive");case 21:o++,e.next=16;break;case 24:Math.random()<1e-4&&this.pruneOldTransactions();case 25:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"pruneOldTransactions",value:(h=i(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(new Date).getTime()-1e8,r={$ts:t,$type:"Chat"},this.app.storage.executeDatabase("DELETE FROM txs WHERE ts < $ts AND type = $type",r,"archive");case 4:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"saveTransactionByKey",value:(d=i(regeneratorRuntime.mark((function e(){var t,r,n,a,i,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:"",r=o.length>1&&void 0!==o[1]?o[1]:null,n=o.length>2&&void 0!==o[2]?o[2]:"",null!=r){e.next=5;break}return e.abrupt("return");case 5:return a="INSERT OR IGNORE INTO txs (sig, publickey, tx, ts, type) VALUES ($sig, $publickey, $tx, $ts, $type)",i={$sig:r.transaction.sig,$publickey:t,$tx:JSON.stringify(r.transaction),$ts:r.transaction.ts,$type:n},e.next=9,this.app.storage.executeDatabase(a,i,"archive");case 9:Math.random()<1e-4&&this.pruneOldData();case 10:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"deleteTransaction",value:(u=i(regeneratorRuntime.mark((function e(){var t,r,n,a,i,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:null,r=o.length>1&&void 0!==o[1]?o[1]:"",n=o.length>2&&void 0!==o[2]?o[2]:"",null!=t){e.next=5;break}return e.abrupt("return");case 5:if(!this.app.crypto.verifyMessage("delete_"+t.transaction.sig,n,r)){e.next=10;break}return a="DELETE FROM txs WHERE publickey = $publickey AND sig = $sig",i={$sig:t.transaction.sig,$publickey:r},e.next=10,this.app.storage.executeDatabase(a,i,"archive");case 10:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"loadTransactions",value:(l=i(regeneratorRuntime.mark((function e(t,r,n,a){var i,o,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="",o={},"all"===n?(i="SELECT * FROM txs WHERE publickey = $publickey ORDER BY id DESC LIMIT $num",o={$publickey:t,$num:a}):(i="SELECT * FROM txs WHERE publickey = $publickey AND type = $type ORDER BY id DESC LIMIT $num",o={$publickey:t,$type:n,$num:a}),e.next=5,this.app.storage.queryDatabase(i,o,"archive");case 5:return s=e.sent,c=[],null!=s&&s.length>0&&(c=s.map((function(e){return e.tx}))),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return l.apply(this,arguments)})},{key:"loadTransactionsByKeys",value:(a=i(regeneratorRuntime.mark((function e(t){var r,n,a,i,o,s,c,l,u,d,h,p,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.keys,n=void 0===r?[]:r,a=t.type,i=void 0===a?"all":a,o=t.num,s=void 0===o?50:o,c="",l={},u=0,d="",h=[];try{n.forEach((function(e){d="$key".concat(u),h.push(d),l[d]=e,u++})),"all"===i?(c="SELECT * FROM txs WHERE publickey IN ( ".concat(h.join(",")," ) ORDER BY id DESC LIMIT $num"),l=Object.assign(l,{$num:s})):(c="SELECT * FROM txs WHERE publickey IN ( ".concat(h.join(",")," ) AND type = $type ORDER BY id DESC LIMIT $num"),l=Object.assign(l,{$type:i,$num:s}))}catch(e){console.log(e)}return e.prev=7,e.next=10,this.app.storage.queryDatabase(c,l,"archive");case 10:return p=e.sent,f=[],null!=p&&p.length>0&&(f=p.map((function(e){return e.tx}))),e.abrupt("return",f);case 16:e.prev=16,e.t0=e.catch(7),console.log(e.t0);case 19:case"end":return e.stop()}}),e,this,[[7,16]])}))),function(e){return a.apply(this,arguments)})}])&&o(t.prototype,r),n&&o(t,n),g}(r(19));e.exports=d},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var a=u(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=r(82),h=(r(5),function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(h,e);var t,r,n,d=s(h);function h(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=d.call(this,e)).app=e,t.name="Blackjack",t.description="This game is a playable demo under active development!",t.categories="Games Arcade Entertainment",t.type="Classic Cardgame",t.status="Alpha",t.card_img_dir="/blackjack/img/cards",t.useHUD=0,t.minPlayers=2,t.maxPlayers=6,t.interface=1,t.boardgameWidth=5100,t.settlement=[],t.updateHTML="",c(t,l(t))}return t=h,(r=[{key:"respondTo",value:function(e){if(null!=i(u(h.prototype),"respondTo",this).call(this,e))return i(u(h.prototype),"respondTo",this).call(this,e);if("arcade-carousel"==e){var t={background:"/blackjack/img/arcade/arcade-banner-background.png",title:"Blackjack"};return t}return null}},{key:"toggleIntro",value:function(){this.overlay.showOverlay(this.app,this,'<div class="intro">\n    <h1>Homestyle Blackjack</h1>\n    <p><strong>Homestyle Blackjack is quite different than Casino Blackjack. </strong></p>\n    <p>The game is played with a single deck (shuffled between each round) and <strong>each player takes turns as dealer</strong>, acting as the house against the other players. This means the dealer stakes the bets of all the other players. <strong>Each player is dealt a single card and given the chance to place a bet.</strong> After all the players (excluding the dealer) have placed their bets, one more card is dealt face up and gameplay begins.</p>\n    <p>Beginning to the left of the dealer, each player takes a turn, at which time all other players may view their full hand. Players may hit (take another card) or stand (end their turn). Players may hit as many times as they like, but they lose if they exceed 21 points (bust).\n    Cards are scored as usual per the number value and with J, Q, and K counting as 10. Aces count as either 1 or 11. If the player busts, the dealer immediately collects their bet and the player loses. The dealer is the last to play and may use their discretion, i.e. no mandatory casino rule of hitting below 17. If the dealer busts, remaining players win automatically. Any player with a higher score than the dealer wins their bet. <strong>The dealer wins all ties.</strong></p>\n    <p>Blackjacks--21 points with two cards--<strong>pay 2:1!</strong></p>\n    </div>')}},{key:"initializeHTML",value:function(e){var t=this;i(u(h.prototype),"initializeHTML",this).call(this,e),this.app.modules.respondTo("chat-manager").forEach((function(r){r.respondTo("chat-manager").render(e,t),r.respondTo("chat-manager").attachEvents(e,t)})),this.menu.addMenuOption({text:"Game",id:"game-game",class:"game-game",callback:function(e,t){t.menu.showSubMenu("game-game")}}),this.menu.addSubMenuOption("game-game",{text:"Log",id:"game-log",class:"game-log",callback:function(e,t){t.menu.hideSubMenus(),t.log.toggleLog()}}),this.menu.addSubMenuOption("game-game",{text:"Help",id:"game-intro",class:"game-intro",callback:function(e,t){t.menu.hideSubMenus(),t.toggleIntro()}}),this.menu.addSubMenuOption("game-game",{text:"Exit",id:"game-exit",class:"game-exit",callback:function(e,t){window.location.href="/arcade"}}),this.menu.addMenuIcon({text:'<i class="fa fa-window-maximize" aria-hidden="true"></i>',id:"game-menu-fullscreen",callback:function(e,t){t.menu.hideSubMenus(),e.browser.requestFullscreen()}});for(var r=0,n=0,a=0;a<this.app.modules.mods.length;a++)if("chat"===this.app.modules.mods[a].slug)for(var o=0;o<this.game.players.length;o++)this.game.players[o]!=this.app.wallet.returnPublicKey()&&function(){0==r&&(t.menu.addMenuOption({text:"Chat",id:"game-chat",class:"game-chat",callback:function(e,t){t.menu.showSubMenu("game-chat")}}),r=1),0==n&&(t.menu.addSubMenuOption("game-chat",{text:"Community",id:"game-chat-community",class:"game-chat-community",callback:function(e,t){t.menu.hideSubMenus(),c.mute_community_chat=0,c.sendEvent("chat-render-request",{}),c.openChatBox()}}),n=1);var e=[t.game.players[o],t.app.wallet.returnPublicKey()].sort(),i=t.app.crypto.hash(e.join("_")),s="Player "+(o+1),c=t.app.modules.mods[a];t.menu.addSubMenuOption("game-chat",{text:s,id:"game-chat-"+(o+1),class:"game-chat-"+(o+1),callback:function(t,r){r.menu.hideSubMenus(),c.createChatGroup(e,s),c.openChatBox(i),c.sendEvent("chat-render-request",{}),c.saveChat()}})}();this.menu.render(e,this),this.menu.attachEvents(e,this),this.log.render(e,this),this.log.attachEvents(e,this),this.playerbox.render(e,this),this.playerbox.addClassAll("p",!0),this.playerbox.addGraphicClass("hand"),this.playerbox.addGraphicClass("tinyhand")}},{key:"initializeGame",value:function(e){""!=this.game.status&&this.updateStatus(this.game.status),""==this.game.dice&&this.initializeDice(),0==this.game.deck.length&&(this.game.state=this.returnInitialState(this.game.players.length),this.updateStatus("Generating the Game"),this.game.queue=[],this.game.queue.push("start"),this.game.queue.push("READY")),this.game.options?(this.game.options.stake?this.game.options.stake=parseFloat(this.game.options.stake):this.game.options.stake=1e3,this.game.options.crypto=this.game.options.crypto?this.game.options.crypto:"SAITO"):this.game.options={stake:1e3,crypto:"SAITO"},this.browser_active&&this.displayBoard()}},{key:"returnInitialState",value:function(e){var t={round:0,turn:0,dealer:0};t.player=Array(e);for(var r=0;r<e;r++)t.player[r]={credit:parseFloat(this.game.options.stake),name:this.app.keys.returnIdentifierByPublicKey(this.game.players[r],1)},t.player[r].name.indexOf("@")>0&&(t.player[r].name=t.player[r].name.substring(0,t.player[r].name.indexOf("@"))),t.player[r].name===this.game.players[r]&&(t.player[r].name=this.game.players[r].substring(0,10)+"...");return t}},{key:"initializeQueue",value:function(){for(var e=0;e<this.game.state.player.length;e++)this.game.state.player[e].wager=0,this.game.state.player[e].payout=1,this.game.state.player[e].hand=[],this.game.state.player[e].total=0,this.game.state.player[e].winner=null;this.game.queue=[],this.game.queue.push("takebets");for(var t=this.game.players.length;t>0;t--)this.game.queue.push("DEAL\t1\t".concat(t,"\t1"));for(var r=this.game.players.length;r>0;r--)this.game.queue.push("DECKENCRYPT\t1\t".concat(r));for(var n=this.game.players.length;n>0;n--)this.game.queue.push("DECKXOR\t1\t".concat(n));this.game.queue.push("DECK\t1\t"+JSON.stringify(this.returnDeck()))}},{key:"newRound",value:function(){if(1==this.countActivePlayers())return console.log("No more players"),this.game.queue.push("winner\t".concat(this.firstActivePlayer())),1;if(this.game.state.player.length>2){for(var e=!1,t=0;t<this.game.state.player.length;t++)this.game.state.player[t].credit<=0&&(console.log(this.game.players,this.game.state),e=!0,this.game.state.player.splice(t,1),this.removePlayer(this.game.players[t]),t--);e&&console.log(this.game.players,this.game.state)}for(var r=0;r<this.game.players.length;r++)this.game.players[r]===this.app.wallet.returnPublicKey()&&(this.game.player=r+1);this.game.state.turn=0,this.game.state.blackjack=0,this.game.state.round++,this.game.state.dealer=this.game.state.dealer%this.game.players.length+1,this.updateLog("Round: ".concat(this.game.state.round,", Dealer: P").concat(this.game.state.dealer," (").concat(this.game.state.player[this.game.state.dealer-1].name,")")),document.querySelectorAll(".plog").forEach((function(e){e.innerHTML=""})),this.initializeQueue()}},{key:"handleGameLoop",value:function(){if(this.game.queue.length>0){var e=this.game.queue.length-1,t=this.game.queue[e].split("\t");if(this.displayBoard(),"start"===t[0]||"newround"===t[0])return this.game.queue.splice(e,1),this.newRound(),1;if("play"===t[0])return this.game.queue.splice(e,1),parseInt(t[1])==this.game.player?this.playerTurn():this.updateStatus("Waiting for "+this.game.state.player[t[1]-1].name),0;if("hit"===t[0]){var r=parseInt(t[1]),n=r==this.game.state.dealer?"Dealer":"Player ".concat(r);return this.updateLog("".concat(n," hits")),this.game.queue.splice(e,1),this.game.queue.push("play\t"+r),this.game.queue.push("revealhand\t"+r+"\t1"),this.game.queue.push("DEAL\t1\t"+r+"\t1"),1}if("selectwager"===t[0]){var a=this,i=parseInt(t[1]);if(this.game.queue.splice(e,1),this.game.player!=i)this.game.player==this.game.state.dealer?this.updateStatus('<div class="status-info">You are the dealer. Waiting for players to set their wager</div>'):this.updateStatus('<div class="status-info">Player '+i+" is picking wager</div>");else{var o=parseFloat(this.game.options.stake),s=[.01,.05,.1,.25],c=this.game.state.player[i-1].credit,l='<div class="status-info">How much would you like to wager? (Available credit: '.concat(c,")</div>");l+="<ul>";for(var u=0;u<s.length;u++)s[u]*o<c&&(l+='<li class="menu_option" id="'.concat(s[u]*o,'">').concat(s[u]*o,"</li>"));s.slice(-1)*o>=c&&(l+='<li class="menu_option" id="'.concat(c,'">All In!</li>')),l+="</ul>",this.updateStatus(l,1),this.lockInterface();try{$(".menu_option").off(),$(".menu_option").on("click",(function(){$(".menu_option").off(),a.unlockInterface(),a.updateStatus("dealing cards");var e=$(this).attr("id");return a.addMove("setwager\t"+a.game.player+"\t"+e),a.endTurn(),0}))}catch(e){console.log("selectwager error",e)}}return 0}if("setwager"===t[0]){this.game.queue.splice(e,1);var d=parseInt(t[1]),h=parseInt(t[2]);return this.game.state.player[d-1].wager=h,this.updateLog("Player ".concat(d," is betting ").concat(h)),1}if("blackjack"===t[0]){this.game.queue.splice(e,1);var p=parseInt(t[1]),f=p==this.game.state.dealer?"Dealer":"Player ".concat(t[1]);return this.game.state.player[p-1].payout=2,this.updateLog("".concat(f," has a blackjack!")),1}if("stand"===t[0]){this.game.queue.splice(e,1);var m=t[1]==this.game.state.dealer?"Dealer":"Player ".concat(t[1]);return this.updateLog("".concat(m," stands")),1}if("bust"===t[0]){this.game.queue.splice(e,1);var g=t[1];if(g!=this.game.state.dealer){var y=this.game.state.player[g-1].wager;this.updateLog("Player ".concat(g," busts, loses ").concat(y," to dealer")),this.game.state.player[g-1].credit-=y,this.game.state.player[this.game.state.dealer-1].wager+=y,this.game.state.player[g-1].wager=0,g==this.game.player&&this.updateStatus("<div>You lose your bet of ".concat(y,"</div>"))}else this.updateLog("Dealer busts");return 1}if("takebets"===t[0]){this.game.queue.splice(e,1),this.game.queue.push("startplay");for(var v=this.game.players.length;v>0;v--)this.game.queue.push("revealhand\t".concat(v));for(var b=this.game.players.length;b>0;b--)this.game.queue.push("DEAL\t1\t".concat(b,"\t1"));for(var _=0;_<this.game.players.length-1;_++){var w=(this.game.state.dealer+_)%this.game.players.length+1;this.game.queue.push("selectwager\t"+w)}return console.log("Bet order:",this.game.queue),1}if("dealer"===t[0])return this.game.queue.splice(e,1),this.game.state.dealer==this.game.player?(21==this.scoreArrayOfCards(this.myCards())&&(this.addMove("announceblackjack"),this.addMove("revealhand\t".concat(this.game.state.dealer,"\t1"))),this.endTurn()):this.updateStatus("Waiting for dealer"),0;if("announceblackjack"===t[0]){this.game.state.blackjack=1,this.updateLog("Dealer has a blackjack! All players lose!"),this.game.queue=[],this.game.queue.push("pickwinner");for(var x=1;x<=this.game.players.length;x++)this.game.queue.push("revealhand\t".concat(x,"\t1"));return 1}if("startplay"===t[0]){this.game.queue.splice(e,1),this.game.queue.push("pickwinner"),this.game.queue.push("play\t"+this.game.state.dealer),this.game.queue.push("revealhand\t".concat(this.game.state.dealer,"\t1")),this.game.queue.push("STATUS\tThe dealer is taking their turn");for(var k=0;k<this.game.players.length-1;k++){var S=(this.game.state.dealer+k)%this.game.players.length+1;this.game.queue.push("play\t"+S),this.game.queue.push("revealhand\t".concat(S,"\t1"))}return this.game.queue.push("dealer"),1}if("revealhand"===t[0]){this.game.queue.splice(e,1);var E="1"==t[2];if(this.game.player==parseInt(t[1])){if(E)this.addMove("hand\t"+this.game.player+"\t"+JSON.stringify(this.game.deck[0].hand));else{var A=[this.game.deck[0].hand[0]];this.addMove("hand\t"+this.game.player+"\t"+JSON.stringify(A))}this.endTurn()}return 0}if("hand"===t[0]){var P=parseInt(t[1]),C=JSON.parse(t[2]);this.game.state.player[P-1].hand=C,this.game.queue.splice(e,1);var D=this.scoreArrayOfCards(this.myCards(C)),T=P==this.game.state.dealer?"Dealer":"Player ".concat(t[1]);if(D>0){var O;if(1==C.length&&P==this.game.state.dealer)O="Dealer has ".concat(D," showing");else{if(!(C.length>1))return 1;O="".concat(T," has ").concat(D)}this.updateLog(O)}return 1}if("pickwinner"===t[0])return this.game.queue.push("newround"),this.game.queue.splice(e,1),this.pickWinner(),1;if("winner"===t[0]){var M=parseInt(t[1]),I=this.game.state.player[M].name+" wins!";this.updateLog("Game Over: "+I);var R="<h2>Game Over: </h2><p>";return R+=M+1==this.game.player?"You win!":I,R+="</p>",this.updateStatus(R),this.game.winner=this.game.players[M],0}}return 1}},{key:"areThereAnyBets",value:function(){for(var e=0;e<this.game.state.player.length;e++)if(e+1!=this.game.state.dealer&&this.game.state.player[e].wager>0&&2!=this.game.state.player[e].payout)return!0;return!1}},{key:"countActivePlayers",value:function(){for(var e=0,t=0;t<this.game.state.player.length;t++)this.game.state.player[t].credit>0&&e++;return e}},{key:"firstActivePlayer",value:function(){for(var e=0;e<this.game.state.player.length;e++)if(this.game.state.player[e].credit>0)return e}},{key:"myCards",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e||(e=this.game.deck[0].hand);for(var t=[],r=0;r<e.length;r++){var n=this.game.deck[0].cards[e[r]].name,a=n.split(".");t.push(a[0])}return t}},{key:"canSplit",value:function(){if(this.game.player==this.game.state.dealer)return!1;var e=this.myCards();if(2!=e.length)return!1;var t=this.game.state.player[this.game.player-1];return!(t.credit<2*t.wager)&&2==e[0].length&&2==e[1].length&&e[0][1]==e[1][1]}},{key:"playerTurn",value:function(){var e,t=this;my_total=this.scoreArrayOfCards(this.myCards()),my_total<0?(e="",e+='<div class="menu-player">You have gone bust</div>',e+="<ul>",e+='<li class="menu_option" id="bust">confirm</li>',e+="</ul>"):t.areThereAnyBets()?(e=t.game.player==t.game.state.dealer?'<div class="menu-player">Dealer, your move:</div><ul>':'<div class="menu-player">Your move:</div><ul>',e+='<li class="menu_option" id="hit">hit</li><li class="menu_option" id="stand">stand</li></ul>'):(e='<div class="menu-player">All the players have gone bust</div><div>You win by default</div>\n                    <ul><li class="menu_option" id="win">confirm</li></ul>',this.updateStatus(e,1)),21==my_total&&2==this.game.deck[0].hand.length&&(e='<div class="menu-player">You got a blackjack</div>\n              <ul><li class="menu_option" id="blackjack">confirm</li></ul>'),this.updateStatus(e,1),this.lockInterface(),$(".menu_option").off(),$(".menu_option").on("click",(function(){$(".menu_option").off(),t.unlockInterface();var e=$(this).attr("id");return"hit"===e?(t.addMove("hit\t"+t.game.player),t.endTurn(),0):"bust"===e?(t.addMove("bust\t"+t.game.player),t.endTurn(),0):"stand"===e||"win"===e?(t.addMove("stand\t"+t.game.player+"\t"+my_total),t.endTurn(),0):"blackjack"===e?(t.addMove("blackjack\t"+t.game.player),t.endTurn(),0):void 0}))}},{key:"displayBoard",value:function(){0!=this.browser_active&&(this.displayPlayers(),this.displayHand())}},{key:"returnCardFromDeck",value:function(e){var t=this.returnDeck()[e];return t.name.substring(0,t.name.indexOf("."))}},{key:"returnDeck",value:function(){for(var e={},t=["S","C","H","D"],r=1,n=0;n<4;n++)for(var a=1;a<=13;a++){var i="".concat(t[n]).concat(a,".png");e[r.toString()]={name:i},r++}return e}},{key:"displayPlayers",value:function(){if(0!=this.browser_active)for(var e=0;e<this.game.players.length;e++){var t="",r=0;if(this.game.state.player.length>0&&(this.playerbox.refreshName(e+1),t='<div class="chips">'.concat(this.game.state.player[e].credit," ").concat(this.game.options.crypto,"</div>"),this.game.state.dealer==e+1?t+='<div class="player-notice dealer">DEALER</div>':t+='<div class="player-notice">Player '.concat(e+1,"</div>"),this.playerbox.refreshInfo(t,e),t="",this.game.state.player[e].hand)){if(r=1,0==this.game.state.player[e].hand.length)t+='<img class="card" src="'.concat(this.card_img_dir,'/red_back.png">'),t+='<img class="card" src="'.concat(this.card_img_dir,'/red_back.png">');else{1==this.game.state.player[e].hand.length&&(t+='<img class="card" src="'.concat(this.card_img_dir,'/red_back.png">'));for(var n=0;n<this.game.state.player[e].hand.length;n++){var a=this.game.deck[0].cards[this.game.state.player[e].hand[n]];t+='<img class="card" src="'.concat(this.card_img_dir,"/").concat(a.name,'">')}}t+="</div>",this.playerbox.refreshGraphic(t,e)}if(0==r){console.log("player ".concat(e," hand not shown")),t='\n          <div class="player-info-hand hand tinyhand" id="player-info-hand-'.concat(e+1,'">\n            <img class="card" src="').concat(this.card_img_dir,'/red_back.png">\n            <img class="card" src="').concat(this.card_img_dir,'/red_back.png">\n          </div>\n          <div class="player-info-name" id="player-info-name-').concat(e+1,'">').concat(this.game.state.player[e].name,'</div>\n          <div class="player-info-chips" id="player-info-chips-').concat(e+1,'">Chis: ').concat(this.game.state.player[e].credit," ").concat(this.game.options.crypto,"</div> \n        ");var i='\n\t    <img class="card" src="'.concat(this.card_img_dir,'/red_back.png">\n\t    <img class="card" src="').concat(this.card_img_dir,'/red_back.png">\n\t  ');this.cardfan.render(this.app,this,i),this.cardfan.attachEvents(this.app,this)}}}},{key:"displayHand",value:function(){this.cardfan.render(this.app,this),1==this.game.deck[0].hand.length&&this.cardfan.prependCard(this.app,this,'<img class="card" src="'.concat(this.card_img_dir,'/red_back.png">')),this.cardfan.attachEvents(this.app,this)}},{key:"addMove",value:function(e){this.moves.push(e)}},{key:"endTurn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;$(".menu_option").off();var t={};t.target=this.returnNextPlayer(this.game.player),0!=e&&(t.target=e),this.game.turn=this.moves,this.moves=[],this.sendMessage("game",t)}},{key:"scoreArrayOfCards",value:function(e){for(var t=0,r=0,n=0;n<e.length;n++){var a=e[n];if("1"===a[1]&&2==a.length)t+=parseInt(1),r++;else{var i=parseInt(a.substring(1));if(i+t==11&&1==r)return 21;i>10&&(i=10),t+=parseInt(i)}}for(var o=0;o<r;o++)t+10<=21&&(t+=10);return t>21?-1:t}},{key:"pickWinner",value:function(){for(var e=0,t=0;t<this.game.state.player.length;t++){var r=[];if(null!=this.game.state.player[t].hand)for(var n=0;n<this.game.state.player[t].hand.length;n++){var a=this.game.deck[0].cards[this.game.state.player[t].hand[n]].name.split(".");r.push(a[0])}this.game.state.player[t].total=this.scoreArrayOfCards(r),console.log("Player ",t," total:",this.game.state.player[t].total),t+1==this.game.state.dealer?e=this.game.state.player[t].total:21==this.game.state.player[t].total&&2==this.game.state.player[t].hand.length&&(this.game.state.player[t].payout=2)}for(var i=0;i<this.game.state.player.length;i++)this.game.state.player[i].winner=(this.game.state.player[i].total>e||2===this.game.state.player[i].payout)&&0==this.game.state.blackjack;var o,s=0;if(1==this.game.state.blackjack)for(var c=0;c<this.game.state.player.length;c++)c!=this.game.state.dealer-1&&(2==this.game.state.player[c].payout?(s=this.game.state.player[c].wager,o="Congrats on your blackjack, but you still lose your wager of ".concat(s,".")):(s=2*this.game.state.player[c].wager,o="You have to pay the dealer double your wager for a total of ".concat(s,".")),this.game.state.player[this.game.state.dealer-1].wager+=Math.min(s,this.game.state.player[c].credit),this.game.state.player[c].credit-=s,this.game.state.player[c].credit<0&&(o+=" That bankrupts you!"),c+1==this.game.player&&this.game.queue.push("ACKNOWLEDGE\t"+o),this.updateLog("Player ".concat(c+1," loses ").concat(s)));else for(var l=0;l<this.game.state.player.length;l++)if(l!=this.game.state.dealer-1&&this.game.state.player[l].wager>0)if(s=this.game.state.player[l].wager*this.game.state.player[l].payout,this.game.state.player[l].winner){if(this.updateLog("Player ".concat(l+1," wins ").concat(s)),this.game.state.player[this.game.state.dealer-1].wager-=s,this.game.state.player[l].credit+=Math.min(s,this.game.state.player[this.game.state.dealer-1].credit),l+1==this.game.player){var u=1==this.game.state.player[l].payout?"You Win Your Bet of ".concat(s):"Blackjack! You win double your bet, total winnings: ".concat(s);this.game.queue.push("ACKNOWLEDGE\t"+u)}}else this.game.state.player[this.game.state.dealer-1].wager+=Math.min(s,this.game.state.player[l].credit),this.game.state.player[l].credit-=s,this.updateLog("Player ".concat(l+1," loses ").concat(s)),l+1==this.game.player&&(this.game.state.player[l].credit<=0?this.game.queue.push("ACKNOWLEDGE\tYou Lose Your Bet of ".concat(s," and are out of money! Better luck next time")):this.game.queue.push("ACKNOWLEDGE\tYou Lose Your Bet of ".concat(s)));var d=this.game.state.player[this.game.state.dealer-1].wager;this.game.state.player[this.game.state.dealer-1].credit+=d;var h="";d>0?(h="You win ".concat(d),this.updateLog("Dealer collects ".concat(d," total"))):d<0?(h="You lose ".concat(-d),this.updateLog("Dealer pays out ".concat(-d," total"))):(h="It's a wash!",this.updateLog("Dealer has no change in credits")),this.game.player==this.game.state.dealer&&(this.game.state.player[this.game.player-1].credit<=0&&(h+=" You are out of money! Better luck next time"),this.game.queue.push("ACKNOWLEDGE\t"+h));for(var p=0;p<this.game.state.player.length;p++)this.game.state.player[p].credit<=0&&this.updateLog("Player ".concat(p+1," goes bankrupt!"));return 1}},{key:"returnGameOptionsHTML",value:function(){for(var e='\n      <label for="stake">Initial Stake:</label>\n      <select name="stake">\n              <option value="0.001">0.001</option>\n              <option value="0.01" >0.01</option>\n              <option value="0.1" >0.1</option>\n              <option value="1" >1.0</option>\n              <option value="5" >5.0</option>\n              <option value="10" >10</option>\n              <option value="100" selected="selected">100</option>\n              <option value="500" >500</option>\n              <option value="1000" >1000</option>\n              <option value="5000" >5000</option>\n              <option value="10000">10000</option>\n      </select>\n\n      <label for="crypto">Crypto to stake:</label>\n      <select name="crypto">\n          <option value="" selected>none</option>\n          <option value="SAITO">SAITO</option>\n    ',t=0;t<this.app.modules.mods.length;t++)""!=this.app.modules.mods[t].ticker&&null!=this.app.modules.mods[t].ticker&&(e+='<option value="'.concat(this.app.modules.mods[t].ticker,'">').concat(this.app.modules.mods[t].ticker,"</option>"));return e+='\n            </select>\n      <div id="game-wizard-advanced-return-btn" class="game-wizard-advanced-return-btn button" style="margin-top:20px;padding:30px;text-align:center">accept</div>\n\n\n    '}},{key:"returnFormattedGameOptions",value:function(e){var t={};for(var r in e)"stake"==r&&(t[r]=e[r]),"crypto"==r&&(t[r]=e[r]);return t}},{key:"updateStatus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;try{if(0==t?this.playerbox.showInfo():this.playerbox.hideInfo(),1==this.lock_interface)return;if(this.game.status=e,1==this.browser_active){var r=document.querySelector(".status");this.game.players.includes(this.app.wallet.returnPublicKey())&&(r.innerHTML=e)}}catch(e){console.log("ERR: "+e)}}}])&&a(t.prototype,r),n&&a(t,n),h}(d));e.exports=h},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){a(o,n,i,s,c,"next",e)}function c(e){a(o,n,i,s,c,"throw",e)}s(void 0)}))}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var a=d(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=r(5),p=r(19),f=r(221),m=r(243),g=r(99),y=r(94),v=r(229),b=r(230),_=r(242),w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(x,e);var t,r,n,a,u,p,w=l(x);function x(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,x),(t=w.call(this,e)).name="Chat",t.description="Saito instant-messaging client and application platform",t.events=["encrypt-key-exchange-confirm"],t.groups=[],t.timeerror_tolerance=18e5,t.header=null,t.renderMode="none",t.relay_moves_onchain_if_possible=1,t.mute_community_chat=0,t.max_msg_size=307200,t.icon_fa="far fa-comments",t.inTransitImageMsgSig=null,t}return t=x,(r=[{key:"receiveEvent",value:function(e,t){if("encrypt-key-exchange-confirm"===e){if(void 0===t.members)return;this.createChatGroup(t.members),this.sendEvent("chat-render-request",{}),this.saveChat(),this.render(this.app)}}},{key:"respondTo",value:function(e){switch(e){case"email-chat":return{render:this.renderEmailChat,attachEvents:this.attachEventsEmailChat};case"header-dropdown":return{name:this.appname?this.appname:this.name,icon_fa:this.icon_fa,browser_active:this.browser_active,slug:this.returnSlug()};default:return null}}},{key:"renderEmailChat",value:function(e,t){var r=e.modules.returnModule("Chat");f.render(e,r),f.attachEvents(e,r)}},{key:"attachEventsEmailChat",value:function(e,t){e.modules.returnModule("Chat")}},{key:"render",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(""!=t&&(this.renderMode=t),"chatroom"==this.renderMode)return g.render(e,this),void g.attachEvents(e,this);"main"==this.renderMode&&(m.render(e,this),m.attachEvents(e,this)),"email"==this.renderMode&&(f.render(e,this),f.attachEvents(e,this))}},{key:"initializeHTML",value:function(e){1==this.browser_active&&"other"!=this.renderMode&&(this.renderMode="main"),"main"==this.renderMode&&(null==this.header&&(this.header=new y(e,this)),this.header.render(e,this),this.header.attachEvents(e,this),m.render(e,this),m.attachEvents(e,this))}},{key:"initialize",value:function(e){s(d(x.prototype),"initialize",this).call(this,e);for(var t=this.app.keys.returnKeys(),r=0;r<t.length;r++){if(""==t[r].aes_publickey)return;this.createChatGroup([t[r].publickey,this.app.wallet.returnPublicKey()],t[r].name)}for(var n=this.app.keys.returnGroups(),a=0;a<n.length;a++)this.createChatGroup(n[a].members,n[a].name);this.sendEvent("chat-render-request",{})}},{key:"onPeerHandshakeComplete",value:(p=i(regeneratorRuntime.mark((function e(t,r){var n,a,i,o,s,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0,!r.isMainPeer()){e.next=5;break}this.createChatGroup([r.peer.publickey],"Saito Community Chat"),e.next=7;break;case 5:if(1!=n){e.next=7;break}return e.abrupt("return");case 7:return a=this.groups.map((function(e){return e.id})),i=new Promise((function(e,r){t.storage.loadTransactionsByKeys(a,"Chat",25,(function(t){e(t)}))})),e.next=11,i;case 11:for(i=e.sent,o=0;o<i.length;o++)for(n=1,i[o].decryptMessage(t),s=i[o].returnMessage(),c=0;c<this.groups.length;c++)this.groups[c].id===s.group_id&&t.blockchain.binaryInsert(this.groups[c].txs,i[o],(function(e,t){return e.transaction.ts-t.transaction.ts}));for(l=0;l<this.groups.length;l++)"email"==this.renderMode&&(this.groups[l].txs.length>0?this.updateLastMessage(this.groups[l].id,this.groups[l].txs[this.groups[l].txs.length-1].returnMessage().message,this.groups[l].txs[this.groups[l].txs.length-1].transaction.ts):this.updateLastMessage(this.groups[l].id,"new chat")),"main"==this.renderMode&&this.groups[l].txs.length>0&&this.updateLastMessage(this.groups[l].id,this.groups[l].txs[this.groups[l].txs.length-1].returnMessage().message,this.groups[l].txs[this.groups[l].txs.length-1].transaction.ts);this.sendEvent("chat-render-request",{}),this.sendEvent("chat-render-box-request",{}),this.render(this.app);case 17:case"end":return e.stop()}}),e,this)}))),function(e,t){return p.apply(this,arguments)})},{key:"updateLastMessage",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=(new Date).getTime();null!=r&&(n=r);for(var a=this.app.browser.formatDate(n),i=0;i<this.groups.length;i++)if(this.groups[i].id===e){var o="chat-last-message-"+e;try{document.getElementById(o).innerHTML=t}catch(e){}o="chat-last-message-timestamp-"+e;try{document.getElementById(o).innerHTML="".concat(a.hours,"-").concat(a.minutes)}catch(e){}}}},{key:"onConfirmation",value:function(e,t,r,n){t.decryptMessage(n);var a=t.returnMessage();if(0==r&&"chat message"==a.request){var i=JSON.parse(JSON.stringify(t.transaction)),o=new h.transaction(i);if(o.transaction.ts=(new Date).getTime(),n.storage.saveTransactionByKey(a.group_id,o),t.transaction.from[0].add==n.wallet.returnPublicKey())return;this.receiveMessage(n,t)}}},{key:"handlePeerRequest",value:(u=i(regeneratorRuntime.mark((function e(t,r,n,a){var i,o,s,c,l,u,d,p,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=r.request){e.next=2;break}return e.abrupt("return");case 2:if(null!=r.data){e.next=4;break}return e.abrupt("return");case 4:i=r.data,e.prev=5,e.t0=r.request,e.next="chat message"===e.t0?9:"chat broadcast message"===e.t0?19:32;break;case 9:return o=JSON.parse(JSON.stringify(i.transaction)),(s=new h.transaction(o)).transaction.ts=(new Date).getTime(),(c=new h.transaction(i.transaction)).decryptMessage(t),this.receiveMessage(t,c),this.app.storage.saveTransaction(s),a&&a({payload:"success",error:{}}),e.abrupt("break",32);case 19:return(l=new h.transaction(i.transaction)).decryptMessage(this.app),u=l.returnMessage(),l.transaction.ts=(new Date).getTime(),l.isTo(t.wallet.returnPublicKey())&&this.receiveMessage(t,l),d=JSON.parse(JSON.stringify(l.transaction)),(p=new h.transaction(d)).transaction.ts=(new Date).getTime(),(f=this.app.modules.returnModule("Archive"))&&f.saveTransactionByKey(u.group_id,p),this.app.network.peers.forEach((function(e){e.peer.publickey!==n.peer.publickey&&e.sendRequest("chat message",i)})),a&&a({payload:"success",error:{}}),e.abrupt("break",32);case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(5),console.log(e.t1);case 37:case"end":return e.stop()}}),e,this,[[5,34]])}))),function(e,t,r,n){return u.apply(this,arguments)})},{key:"sendMessage",value:function(e,t){if("<img"==t.msg.message.substring(0,4)){if(null!=this.inTransitImageMsgSig)return void salert("Image already being sent");this.inTransitImageMsgSig=t.transaction.sig}if(e.network.peers.length>0){var r=e.network.peers[0].peer.publickey,n=e.modules.returnModule("Relay");t=this.app.wallet.signAndEncryptTransaction(t),1==this.relay_moves_onchain_if_possible&&this.app.network.propagateTransaction(t),n.sendRelayMessage(r,"chat broadcast message",t)}else salert("Connection to chat server lost")}},{key:"createMessage",value:function(e,t){for(var r=[],n=0;n<this.groups.length;n++)if(e===this.groups[n].id)for(var a=0;a<this.groups[n].members.length;a++)r.includes(this.groups[n].members[a])||r.push(this.groups[n].members[a]);r[0]===this.app.wallet.returnPublicKey()&&(r.splice(0,1),r.push(this.app.wallet.returnPublicKey()));var i=this.app.wallet.createUnsignedTransaction(r[0],0,0);if(null!=i){for(var o=1;o<r.length;o++)i.transaction.to.push(this.app.wallet.createSlip(r[o]));return i.msg={module:"Chat",request:"chat message",group_id:e,message:t,type:"myself",timestamp:(new Date).getTime()},i.msg.sig=this.app.wallet.signMessage(JSON.stringify(i.msg)),i=this.app.wallet.signTransaction(i)}}},{key:"createMessageBlocks",value:function(e){for(var t=0,r=[],n=[],a=e.txs,i="";t<a.length;)0==r.length?(""==i||a[t].isFrom(i)?n.push(a[t]):(r.push(n),(n=[]).push(a[t])),i=a[t].transaction.from[0].add):a[t].isFrom(i)?n.push(a[t]):(r.push(n),(n=[]).push(a[t]),i=a[t].transaction.from[0].add),t++;return r.push(n),r}},{key:"formatMessage",value:function(e){return e=_(e,{target:{url:"_self"}}),e=v(e),e=b(e,{allowedTags:["h1","h2","h3","h4","h5","h6","blockquote","p","a","ul","ol","nl","li","b","i","strong","em","strike","code","hr","br","div","table","thead","caption","tbody","tr","th","td","pre","img","marquee","pre"],allowedAttributes:{div:["class","id"],a:["href","name","target","class","id"],img:["src","class"]},selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","cite"],allowProtocolRelative:!0,transformTags:{a:b.simpleTransform("a",{target:"_blank"})}})}},{key:"receiveMessage",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.inTransitImageMsgSig==t.transaction.sig&&(this.inTransitImageMsgSig=null);var a=t.returnMessage();if(t.transaction.from[0].add==e.wallet.returnPublicKey()&&e.keys.hasSharedSecret(t.transaction.to[0].add)&&(t.decryptMessage(e),a=t.returnMessage()),1==e.BROWSER){var i=e.modules.returnActiveModule();i.events.includes("chat-render-request")||this.showAlert()}if(t.isTo(e.wallet.returnPublicKey())){for(var o=1,s=[],c=0;c<t.transaction.to.length;c++)s.includes(t.transaction.to[c].add)||s.push(t.transaction.to[c].add);s.sort();for(var l=this.app.crypto.hash(s.join("_")),u=0;u<this.groups.length;u++)this.groups[u].id==l&&(o=0);1==o?(this.createChatGroup(s),a.group_id=l):l&&(a.group_id=l)}var d=1;try{var h="#chat-box-"+a.group_id;document.querySelector(h)||(d=0)}catch(e){}var p=a.message;if(this.groups.forEach((function(n){try{if(n.id==a.group_id)if(t.isFrom(r.app.wallet.returnPublicKey())){var i=e.keys.returnIdentifierByPublicKey(r.app.wallet.returnPublicKey()),o=i||r.app.wallet.returnPublicKey();n.txs.push(t),e.browser.sendNotification(o,p,"chat-message-notification")}else{var s=e.keys.returnIdentifierByPublicKey(t.transaction.from[0].add),c=s||t.transaction.from[0].add;n.txs.push(t),e.browser.sendNotification(c,p,"chat-message-notification")}}catch(e){console.log("ERROR 113234: chat error receiving message: "+e)}})),0==d){if(!t.isFrom(this.app.wallet.returnPublicKey())){this.openChatBox(a.group_id);try{0==this.isOtherInputActive()&&(document.getElementById("chat-box-new-message-input-".concat(a.group_id)).focus(),""===document.getElementById("chat-box-new-message-input-".concat(a.group_id)).val&&document.getElementById("chat-box-new-message-input-".concat(a.group_id)).select())}catch(e){}}}else try{0==this.isOtherInputActive()&&(document.getElementById("chat-box-new-message-input-".concat(a.group_id)).focus(),""===document.getElementById("chat-box-new-message-input-".concat(a.group_id)).val&&document.getElementById("chat-box-new-message-input-".concat(a.group_id)).select())}catch(e){}this.updateLastMessage(a.group_id,p),this.sendEvent("chat_receive_message",p),this.render(this.app,n);var f=e.keys.returnIdentifierByPublicKey(t.transaction.from[0].add);f!==t.transaction.from[0].add&&""!=f||e.browser.addIdentifiersToDom([t.transaction.from[0].add])}},{key:"saveChat",value:function(){this.app.options.chat=Object.assign({},this.app.options.chat),this.app.options.chat.groups=this.groups.map((function(e){return{id:e.id,name:e.name,members:e.members,is_encrypted:e.is_encrypted}})),this.app.storage.saveOptions()}},{key:"openChatBox",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if("email"==this.renderMode||"none"==this.renderMode)if(null!=e){var t=this.returnCommunityChat();if(t.id!=e||1!=this.mute_community_chat)if(document.getElementById("chat-box-".concat(e))){var r=document.getElementById("chat-box-new-message-input-".concat(e));0==this.isOtherInputActive()&&r.focus();var n=document.getElementById("chat-box-".concat(e));n.classList.remove("chat-box-hide")}else{for(var a=0;a<this.groups.length;a++)this.groups[a].id==e&&f.showChatBox(this.app,this,this.groups[a]);this.render(this.app);try{0==this.isOtherInputActive()&&(document.getElementById("chat-box-new-message-input-".concat(e)).focus(),""===document.getElementById("chat-box-new-message-input-".concat(e)).val&&document.getElementById("chat-box-new-message-input-".concat(e)).select())}catch(e){}}}else{var i=this.returnCommunityChat();if(null==i||null==i)return;if(null==i.id||null==i.id)return;this.openChatBox(i.id)}}},{key:"createChatGroup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=e){if(e.sort(),null==t||""==t||null==t){for(var r=0;r<e.length;r++)e[r]!=this.app.wallet.returnPublicKey()&&(t=e[r]);null==t&&(t="me")}for(var n=this.app.crypto.hash("".concat(e.join("_"))),a=0;a<this.groups.length;a++)if(this.groups[a].id==n)return null;this.groups.push({id:n,members:e,name:t,txs:[]})}}},{key:"returnCommunityChat",value:function(){for(var e=0;e<this.groups.length;e++)if(this.app.options.peers.length>0&&"Community Chat"===this.groups[e].name)return this.groups[e];return this.groups[0]}},{key:"returnDefaultChat",value:function(){for(var e=0;e<this.groups.length;e++){if(this.app.options.peers.length>0&&this.groups[e].members[0]===this.app.options.peers[0].publickey)return this.groups[e];if(this.app.network.peers.length>0&&this.groups[e].members[0]===this.app.network.peers[0].peer.publickey)return this.groups[e]}return this.groups[0]}},{key:"isOtherInputActive",value:function(){try{var e=document.activeElement;if(document.getElementById("saito-overlay-backdrop")&&"block"==document.getElementById("saito-overlay-backdrop").style.display)return 1;if(document.getElementById("game-overlay-backdrop")&&"block"==document.getElementById("game-overlay-backdrop").style.display)return 1;if(!e)return 0;if("INPUT"==e.tagName)return 1;if("TEXTAREA"==e.tagName)return 1;if("input"==e.tagName)return 1;if("textarea"==e.tagName)return 1}catch(e){}return 0}},{key:"chatLoadMessages",value:function(e,t){}},{key:"chatRequestMessages",value:(a=i(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,t){return a.apply(this,arguments)})}])&&o(t.prototype,r),n&&o(t,n),x}(p);e.exports=w},function(e,t,r){function n(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r(1082),o=r(1083),s=r(46),c=(r(1084),r(1086),r(1087)),l=r(1088);var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t}var t,r,u;return t=e,(r=[{key:"render",value:function(e,t){t.modal_overlay=new s(e),t.modal_overlay.render(e,t),t.modal_overlay.attachEvents(e,t),document.querySelector(".add-user")||t.modal_overlay.showOverlay(e,t,i())}},{key:"attachEvents",value:function(e,t){var r=function(){var r,a=(r=regeneratorRuntime.mark((function r(n){var a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(console.log("pkey: "+n),a=function(r){try{e.modules.returnModule("Encrypt").initiate_key_exchange(r),console.log("done initiate key exchange"),t.modal_overlay.showOverlay(e,t,o()),document.querySelector("#confirm-box").onclick=function(){t.modal_overlay.hideOverlay()}}catch(e){console.log(JSON.stringify(e)),salert("Address is not a valid Saito Address")}},e.crypto.isPublicKey(n)){r.next=8;break}return r.next=5,e.keys.fetchPublicKey(n,a);case 5:n=r.sent,r.next=9;break;case 8:a(n);case 9:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(a,i){var o=r.apply(e,t);function s(e){n(o,a,i,s,c,"next",e)}function c(e){n(o,a,i,s,c,"throw",e)}s(void 0)}))});return function(e){return a.apply(this,arguments)}}();document.querySelector(".tutorial-skip").onclick=function(){var e;(e=document.querySelector("video"))&&e.srcObject.getTracks().forEach((function(e){return e.stop()})),t.modal_overlay.hideOverlay()},document.querySelector(".generate-link-box").onclick=function(){document.querySelector(".welcome-modal-left").innerHTML=c(e),document.querySelector(".link-space").addEventListener("click",(function(e){document.querySelector(".share-link").select(),document.execCommand("copy")}))},document.querySelector(".scanqr-link-box").onclick=function(){var t=e.modules.returnModule("QRScanner");t&&t.startScanner()},document.querySelector(".address-link-box").onclick=function(){document.querySelector(".welcome-modal-left").innerHTML=l(e),document.getElementById("add-contact-btn").onclick=function(){var e=document.getElementById("add-contact-input").value;console.log("VALUE: "+e),r(e)}}}}])&&a(t.prototype,r),u&&a(t,u),e}();e.exports=u},function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(this,r(18))},function(e,t,r){var n=r(96),a=r(446);e.exports=function(e){if(!a(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t){var r=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,r){var n=r(445),a=r(449);e.exports=function(e){return null!=e&&a(e.length)&&!n(e)}},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t){var r=Array.isArray;e.exports=r},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;var a=n(r(452)),i=new Set(["input","option","optgroup","select","button","datalist","textarea"]),o=new Set(["p"]),s={tr:new Set(["tr","th","td"]),th:new Set(["th"]),td:new Set(["thead","th","td"]),body:new Set(["head","link","script"]),li:new Set(["li"]),p:o,h1:o,h2:o,h3:o,h4:o,h5:o,h6:o,select:i,input:i,output:i,button:i,datalist:i,textarea:i,option:new Set(["option"]),optgroup:new Set(["optgroup","option"]),dd:new Set(["dt","dd"]),dt:new Set(["dt","dd"]),address:o,article:o,aside:o,blockquote:o,details:o,div:o,dl:o,fieldset:o,figcaption:o,figure:o,footer:o,form:o,header:o,hr:o,main:o,nav:o,ol:o,pre:o,section:o,table:o,ul:o,rt:new Set(["rt","rp"]),rp:new Set(["rt","rp"]),tbody:new Set(["thead","tbody"]),tfoot:new Set(["thead","tbody"])},c=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),l=new Set(["math","svg"]),u=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),d=/\s|\//,h=function(){function e(e,t){var r,n,i,o,s;void 0===t&&(t={}),this.startIndex=0,this.endIndex=null,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.options=t,this.cbs=null!=e?e:{},this.lowerCaseTagNames=null!==(r=t.lowerCaseTags)&&void 0!==r?r:!t.xmlMode,this.lowerCaseAttributeNames=null!==(n=t.lowerCaseAttributeNames)&&void 0!==n?n:!t.xmlMode,this.tokenizer=new(null!==(i=t.Tokenizer)&&void 0!==i?i:a.default)(this.options,this),null===(s=(o=this.cbs).onparserinit)||void 0===s||s.call(o,this)}return e.prototype.updatePosition=function(e){null===this.endIndex?this.tokenizer.sectionStart<=e?this.startIndex=0:this.startIndex=this.tokenizer.sectionStart-e:this.startIndex=this.endIndex+1,this.endIndex=this.tokenizer.getAbsoluteIndex()},e.prototype.ontext=function(e){var t,r;this.updatePosition(1),this.endIndex--,null===(r=(t=this.cbs).ontext)||void 0===r||r.call(t,e)},e.prototype.onopentagname=function(e){var t,r;if(this.lowerCaseTagNames&&(e=e.toLowerCase()),this.tagname=e,!this.options.xmlMode&&Object.prototype.hasOwnProperty.call(s,e))for(var n=void 0;this.stack.length>0&&s[e].has(n=this.stack[this.stack.length-1]);)this.onclosetag(n);!this.options.xmlMode&&c.has(e)||(this.stack.push(e),l.has(e)?this.foreignContext.push(!0):u.has(e)&&this.foreignContext.push(!1)),null===(r=(t=this.cbs).onopentagname)||void 0===r||r.call(t,e),this.cbs.onopentag&&(this.attribs={})},e.prototype.onopentagend=function(){var e,t;this.updatePosition(1),this.attribs&&(null===(t=(e=this.cbs).onopentag)||void 0===t||t.call(e,this.tagname,this.attribs),this.attribs=null),!this.options.xmlMode&&this.cbs.onclosetag&&c.has(this.tagname)&&this.cbs.onclosetag(this.tagname),this.tagname=""},e.prototype.onclosetag=function(e){if(this.updatePosition(1),this.lowerCaseTagNames&&(e=e.toLowerCase()),(l.has(e)||u.has(e))&&this.foreignContext.pop(),!this.stack.length||!this.options.xmlMode&&c.has(e))this.options.xmlMode||"br"!==e&&"p"!==e||(this.onopentagname(e),this.closeCurrentTag());else{var t=this.stack.lastIndexOf(e);if(-1!==t)if(this.cbs.onclosetag)for(t=this.stack.length-t;t--;)this.cbs.onclosetag(this.stack.pop());else this.stack.length=t;else"p"!==e||this.options.xmlMode||(this.onopentagname(e),this.closeCurrentTag())}},e.prototype.onselfclosingtag=function(){this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?this.closeCurrentTag():this.onopentagend()},e.prototype.closeCurrentTag=function(){var e,t,r=this.tagname;this.onopentagend(),this.stack[this.stack.length-1]===r&&(null===(t=(e=this.cbs).onclosetag)||void 0===t||t.call(e,r),this.stack.pop())},e.prototype.onattribname=function(e){this.lowerCaseAttributeNames&&(e=e.toLowerCase()),this.attribname=e},e.prototype.onattribdata=function(e){this.attribvalue+=e},e.prototype.onattribend=function(e){var t,r;null===(r=(t=this.cbs).onattribute)||void 0===r||r.call(t,this.attribname,this.attribvalue,e),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribname="",this.attribvalue=""},e.prototype.getInstructionName=function(e){var t=e.search(d),r=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(r=r.toLowerCase()),r},e.prototype.ondeclaration=function(e){if(this.cbs.onprocessinginstruction){var t=this.getInstructionName(e);this.cbs.onprocessinginstruction("!"+t,"!"+e)}},e.prototype.onprocessinginstruction=function(e){if(this.cbs.onprocessinginstruction){var t=this.getInstructionName(e);this.cbs.onprocessinginstruction("?"+t,"?"+e)}},e.prototype.oncomment=function(e){var t,r,n,a;this.updatePosition(4),null===(r=(t=this.cbs).oncomment)||void 0===r||r.call(t,e),null===(a=(n=this.cbs).oncommentend)||void 0===a||a.call(n)},e.prototype.oncdata=function(e){var t,r,n,a,i,o;this.updatePosition(1),this.options.xmlMode||this.options.recognizeCDATA?(null===(r=(t=this.cbs).oncdatastart)||void 0===r||r.call(t),null===(a=(n=this.cbs).ontext)||void 0===a||a.call(n,e),null===(o=(i=this.cbs).oncdataend)||void 0===o||o.call(i)):this.oncomment("[CDATA["+e+"]]")},e.prototype.onerror=function(e){var t,r;null===(r=(t=this.cbs).onerror)||void 0===r||r.call(t,e)},e.prototype.onend=function(){var e,t;if(this.cbs.onclosetag)for(var r=this.stack.length;r>0;this.cbs.onclosetag(this.stack[--r]));null===(t=(e=this.cbs).onend)||void 0===t||t.call(e)},e.prototype.reset=function(){var e,t,r,n;null===(t=(e=this.cbs).onreset)||void 0===t||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack=[],null===(n=(r=this.cbs).onparserinit)||void 0===n||n.call(r,this)},e.prototype.parseComplete=function(e){this.reset(),this.end(e)},e.prototype.write=function(e){this.tokenizer.write(e)},e.prototype.end=function(e){this.tokenizer.end(e)},e.prototype.pause=function(){this.tokenizer.pause()},e.prototype.resume=function(){this.tokenizer.resume()},e.prototype.parseChunk=function(e){this.write(e)},e.prototype.done=function(e){this.end(e)},e}();t.Parser=h},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(r(453)),i=n(r(231)),o=n(r(454)),s=n(r(232));function c(e){return" "===e||"\n"===e||"\t"===e||"\f"===e||"\r"===e}function l(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}function u(e,t,r){var n=e.toLowerCase();return e===n?function(e,a){a===n?e._state=t:(e._state=r,e._index--)}:function(a,i){i===n||i===e?a._state=t:(a._state=r,a._index--)}}function d(e,t){var r=e.toLowerCase();return function(n,a){a===r||a===e?n._state=t:(n._state=3,n._index--)}}var h=u("C",24,16),p=u("D",25,16),f=u("A",26,16),m=u("T",27,16),g=u("A",28,16),y=d("R",35),v=d("I",36),b=d("P",37),_=d("T",38),w=u("R",40,1),x=u("I",41,1),k=u("P",42,1),S=u("T",43,1),E=d("Y",45),A=d("L",46),P=d("E",47),C=u("Y",49,1),D=u("L",50,1),T=u("E",51,1),O=d("I",54),M=d("T",55),I=d("L",56),R=d("E",57),F=u("I",58,1),B=u("T",59,1),j=u("L",60,1),N=u("E",61,1),q=u("#",63,64),L=u("X",66,65),U=function(){function e(e,t){var r;this._state=1,this.buffer="",this.sectionStart=0,this._index=0,this.bufferOffset=0,this.baseState=1,this.special=1,this.running=!0,this.ended=!1,this.cbs=t,this.xmlMode=!!(null==e?void 0:e.xmlMode),this.decodeEntities=null===(r=null==e?void 0:e.decodeEntities)||void 0===r||r}return e.prototype.reset=function(){this._state=1,this.buffer="",this.sectionStart=0,this._index=0,this.bufferOffset=0,this.baseState=1,this.special=1,this.running=!0,this.ended=!1},e.prototype.write=function(e){this.ended&&this.cbs.onerror(Error(".write() after done!")),this.buffer+=e,this.parse()},e.prototype.end=function(e){this.ended&&this.cbs.onerror(Error(".end() after done!")),e&&this.write(e),this.ended=!0,this.running&&this.finish()},e.prototype.pause=function(){this.running=!1},e.prototype.resume=function(){this.running=!0,this._index<this.buffer.length&&this.parse(),this.ended&&this.finish()},e.prototype.getAbsoluteIndex=function(){return this.bufferOffset+this._index},e.prototype.stateText=function(e){"<"===e?(this._index>this.sectionStart&&this.cbs.ontext(this.getSection()),this._state=2,this.sectionStart=this._index):!this.decodeEntities||"&"!==e||1!==this.special&&4!==this.special||(this._index>this.sectionStart&&this.cbs.ontext(this.getSection()),this.baseState=1,this._state=62,this.sectionStart=this._index)},e.prototype.isTagStartChar=function(e){return l(e)||this.xmlMode&&!c(e)&&"/"!==e&&">"!==e},e.prototype.stateBeforeTagName=function(e){"/"===e?this._state=5:"<"===e?(this.cbs.ontext(this.getSection()),this.sectionStart=this._index):">"===e||1!==this.special||c(e)?this._state=1:"!"===e?(this._state=15,this.sectionStart=this._index+1):"?"===e?(this._state=17,this.sectionStart=this._index+1):this.isTagStartChar(e)?(this._state=this.xmlMode||"s"!==e&&"S"!==e?this.xmlMode||"t"!==e&&"T"!==e?3:52:32,this.sectionStart=this._index):this._state=1},e.prototype.stateInTagName=function(e){("/"===e||">"===e||c(e))&&(this.emitToken("onopentagname"),this._state=8,this._index--)},e.prototype.stateBeforeClosingTagName=function(e){c(e)||(">"===e?this._state=1:1!==this.special?4===this.special||"s"!==e&&"S"!==e?4!==this.special||"t"!==e&&"T"!==e?(this._state=1,this._index--):this._state=53:this._state=33:this.isTagStartChar(e)?(this._state=6,this.sectionStart=this._index):(this._state=20,this.sectionStart=this._index))},e.prototype.stateInClosingTagName=function(e){(">"===e||c(e))&&(this.emitToken("onclosetag"),this._state=7,this._index--)},e.prototype.stateAfterClosingTagName=function(e){">"===e&&(this._state=1,this.sectionStart=this._index+1)},e.prototype.stateBeforeAttributeName=function(e){">"===e?(this.cbs.onopentagend(),this._state=1,this.sectionStart=this._index+1):"/"===e?this._state=4:c(e)||(this._state=9,this.sectionStart=this._index)},e.prototype.stateInSelfClosingTag=function(e){">"===e?(this.cbs.onselfclosingtag(),this._state=1,this.sectionStart=this._index+1,this.special=1):c(e)||(this._state=8,this._index--)},e.prototype.stateInAttributeName=function(e){("="===e||"/"===e||">"===e||c(e))&&(this.cbs.onattribname(this.getSection()),this.sectionStart=-1,this._state=10,this._index--)},e.prototype.stateAfterAttributeName=function(e){"="===e?this._state=11:"/"===e||">"===e?(this.cbs.onattribend(void 0),this._state=8,this._index--):c(e)||(this.cbs.onattribend(void 0),this._state=9,this.sectionStart=this._index)},e.prototype.stateBeforeAttributeValue=function(e){'"'===e?(this._state=12,this.sectionStart=this._index+1):"'"===e?(this._state=13,this.sectionStart=this._index+1):c(e)||(this._state=14,this.sectionStart=this._index,this._index--)},e.prototype.handleInAttributeValue=function(e,t){e===t?(this.emitToken("onattribdata"),this.cbs.onattribend(t),this._state=8):this.decodeEntities&&"&"===e&&(this.emitToken("onattribdata"),this.baseState=this._state,this._state=62,this.sectionStart=this._index)},e.prototype.stateInAttributeValueDoubleQuotes=function(e){this.handleInAttributeValue(e,'"')},e.prototype.stateInAttributeValueSingleQuotes=function(e){this.handleInAttributeValue(e,"'")},e.prototype.stateInAttributeValueNoQuotes=function(e){c(e)||">"===e?(this.emitToken("onattribdata"),this.cbs.onattribend(null),this._state=8,this._index--):this.decodeEntities&&"&"===e&&(this.emitToken("onattribdata"),this.baseState=this._state,this._state=62,this.sectionStart=this._index)},e.prototype.stateBeforeDeclaration=function(e){this._state="["===e?23:"-"===e?18:16},e.prototype.stateInDeclaration=function(e){">"===e&&(this.cbs.ondeclaration(this.getSection()),this._state=1,this.sectionStart=this._index+1)},e.prototype.stateInProcessingInstruction=function(e){">"===e&&(this.cbs.onprocessinginstruction(this.getSection()),this._state=1,this.sectionStart=this._index+1)},e.prototype.stateBeforeComment=function(e){"-"===e?(this._state=19,this.sectionStart=this._index+1):this._state=16},e.prototype.stateInComment=function(e){"-"===e&&(this._state=21)},e.prototype.stateInSpecialComment=function(e){">"===e&&(this.cbs.oncomment(this.buffer.substring(this.sectionStart,this._index)),this._state=1,this.sectionStart=this._index+1)},e.prototype.stateAfterComment1=function(e){this._state="-"===e?22:19},e.prototype.stateAfterComment2=function(e){">"===e?(this.cbs.oncomment(this.buffer.substring(this.sectionStart,this._index-2)),this._state=1,this.sectionStart=this._index+1):"-"!==e&&(this._state=19)},e.prototype.stateBeforeCdata6=function(e){"["===e?(this._state=29,this.sectionStart=this._index+1):(this._state=16,this._index--)},e.prototype.stateInCdata=function(e){"]"===e&&(this._state=30)},e.prototype.stateAfterCdata1=function(e){this._state="]"===e?31:29},e.prototype.stateAfterCdata2=function(e){">"===e?(this.cbs.oncdata(this.buffer.substring(this.sectionStart,this._index-2)),this._state=1,this.sectionStart=this._index+1):"]"!==e&&(this._state=29)},e.prototype.stateBeforeSpecialS=function(e){"c"===e||"C"===e?this._state=34:"t"===e||"T"===e?this._state=44:(this._state=3,this._index--)},e.prototype.stateBeforeSpecialSEnd=function(e){2!==this.special||"c"!==e&&"C"!==e?3!==this.special||"t"!==e&&"T"!==e?this._state=1:this._state=48:this._state=39},e.prototype.stateBeforeSpecialLast=function(e,t){("/"===e||">"===e||c(e))&&(this.special=t),this._state=3,this._index--},e.prototype.stateAfterSpecialLast=function(e,t){">"===e||c(e)?(this.special=1,this._state=6,this.sectionStart=this._index-t,this._index--):this._state=1},e.prototype.parseFixedEntity=function(e){if(void 0===e&&(e=this.xmlMode?s.default:i.default),this.sectionStart+1<this._index){var t=this.buffer.substring(this.sectionStart+1,this._index);Object.prototype.hasOwnProperty.call(e,t)&&(this.emitPartial(e[t]),this.sectionStart=this._index+1)}},e.prototype.parseLegacyEntity=function(){for(var e=this.sectionStart+1,t=Math.min(this._index-e,6);t>=2;){var r=this.buffer.substr(e,t);if(Object.prototype.hasOwnProperty.call(o.default,r))return this.emitPartial(o.default[r]),void(this.sectionStart+=t+1);t--}},e.prototype.stateInNamedEntity=function(e){";"===e?(this.parseFixedEntity(),1===this.baseState&&this.sectionStart+1<this._index&&!this.xmlMode&&this.parseLegacyEntity(),this._state=this.baseState):(e<"0"||e>"9")&&!l(e)&&(this.xmlMode||this.sectionStart+1===this._index||(1!==this.baseState?"="!==e&&this.parseFixedEntity(o.default):this.parseLegacyEntity()),this._state=this.baseState,this._index--)},e.prototype.decodeNumericEntity=function(e,t,r){var n=this.sectionStart+e;if(n!==this._index){var i=this.buffer.substring(n,this._index),o=parseInt(i,t);this.emitPartial(a.default(o)),this.sectionStart=r?this._index+1:this._index}this._state=this.baseState},e.prototype.stateInNumericEntity=function(e){";"===e?this.decodeNumericEntity(2,10,!0):(e<"0"||e>"9")&&(this.xmlMode?this._state=this.baseState:this.decodeNumericEntity(2,10,!1),this._index--)},e.prototype.stateInHexEntity=function(e){";"===e?this.decodeNumericEntity(3,16,!0):(e<"a"||e>"f")&&(e<"A"||e>"F")&&(e<"0"||e>"9")&&(this.xmlMode?this._state=this.baseState:this.decodeNumericEntity(3,16,!1),this._index--)},e.prototype.cleanup=function(){this.sectionStart<0?(this.buffer="",this.bufferOffset+=this._index,this._index=0):this.running&&(1===this._state?(this.sectionStart!==this._index&&this.cbs.ontext(this.buffer.substr(this.sectionStart)),this.buffer="",this.bufferOffset+=this._index,this._index=0):this.sectionStart===this._index?(this.buffer="",this.bufferOffset+=this._index,this._index=0):(this.buffer=this.buffer.substr(this.sectionStart),this._index-=this.sectionStart,this.bufferOffset+=this.sectionStart),this.sectionStart=0)},e.prototype.parse=function(){for(;this._index<this.buffer.length&&this.running;){var e=this.buffer.charAt(this._index);1===this._state?this.stateText(e):12===this._state?this.stateInAttributeValueDoubleQuotes(e):9===this._state?this.stateInAttributeName(e):19===this._state?this.stateInComment(e):20===this._state?this.stateInSpecialComment(e):8===this._state?this.stateBeforeAttributeName(e):3===this._state?this.stateInTagName(e):6===this._state?this.stateInClosingTagName(e):2===this._state?this.stateBeforeTagName(e):10===this._state?this.stateAfterAttributeName(e):13===this._state?this.stateInAttributeValueSingleQuotes(e):11===this._state?this.stateBeforeAttributeValue(e):5===this._state?this.stateBeforeClosingTagName(e):7===this._state?this.stateAfterClosingTagName(e):32===this._state?this.stateBeforeSpecialS(e):21===this._state?this.stateAfterComment1(e):14===this._state?this.stateInAttributeValueNoQuotes(e):4===this._state?this.stateInSelfClosingTag(e):16===this._state?this.stateInDeclaration(e):15===this._state?this.stateBeforeDeclaration(e):22===this._state?this.stateAfterComment2(e):18===this._state?this.stateBeforeComment(e):33===this._state?this.stateBeforeSpecialSEnd(e):53===this._state?F(this,e):39===this._state?w(this,e):40===this._state?x(this,e):41===this._state?k(this,e):34===this._state?y(this,e):35===this._state?v(this,e):36===this._state?b(this,e):37===this._state?_(this,e):38===this._state?this.stateBeforeSpecialLast(e,2):42===this._state?S(this,e):43===this._state?this.stateAfterSpecialLast(e,6):44===this._state?E(this,e):29===this._state?this.stateInCdata(e):45===this._state?A(this,e):46===this._state?P(this,e):47===this._state?this.stateBeforeSpecialLast(e,3):48===this._state?C(this,e):49===this._state?D(this,e):50===this._state?T(this,e):51===this._state?this.stateAfterSpecialLast(e,5):52===this._state?O(this,e):54===this._state?M(this,e):55===this._state?I(this,e):56===this._state?R(this,e):57===this._state?this.stateBeforeSpecialLast(e,4):58===this._state?B(this,e):59===this._state?j(this,e):60===this._state?N(this,e):61===this._state?this.stateAfterSpecialLast(e,5):17===this._state?this.stateInProcessingInstruction(e):64===this._state?this.stateInNamedEntity(e):23===this._state?h(this,e):62===this._state?q(this,e):24===this._state?p(this,e):25===this._state?f(this,e):30===this._state?this.stateAfterCdata1(e):31===this._state?this.stateAfterCdata2(e):26===this._state?m(this,e):27===this._state?g(this,e):28===this._state?this.stateBeforeCdata6(e):66===this._state?this.stateInHexEntity(e):65===this._state?this.stateInNumericEntity(e):63===this._state?L(this,e):this.cbs.onerror(Error("unknown _state"),this._state),this._index++}this.cleanup()},e.prototype.finish=function(){this.sectionStart<this._index&&this.handleTrailingData(),this.cbs.onend()},e.prototype.handleTrailingData=function(){var e=this.buffer.substr(this.sectionStart);29===this._state||30===this._state||31===this._state?this.cbs.oncdata(e):19===this._state||21===this._state||22===this._state?this.cbs.oncomment(e):64!==this._state||this.xmlMode?65!==this._state||this.xmlMode?66!==this._state||this.xmlMode?3!==this._state&&8!==this._state&&11!==this._state&&10!==this._state&&9!==this._state&&13!==this._state&&12!==this._state&&14!==this._state&&6!==this._state&&this.cbs.ontext(e):(this.decodeNumericEntity(3,16,!1),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData())):(this.decodeNumericEntity(2,10,!1),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData())):(this.parseLegacyEntity(),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData()))},e.prototype.getSection=function(){return this.buffer.substring(this.sectionStart,this._index)},e.prototype.emitToken=function(e){this.cbs[e](this.getSection()),this.sectionStart=-1},e.prototype.emitPartial=function(e){1!==this.baseState?this.cbs.onattribdata(e):this.cbs.ontext(e)},e}();t.default=U},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(r(1134)),i=String.fromCodePoint||function(e){var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e)};t.default=function(e){return e>=55296&&e<=57343||e>1114111?"�":(e in a.default&&(e=a.default[e]),i(e))}},function(e){e.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Acirc":"Â","acirc":"â","acute":"´","AElig":"Æ","aelig":"æ","Agrave":"À","agrave":"à","amp":"&","AMP":"&","Aring":"Å","aring":"å","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","brvbar":"¦","Ccedil":"Ç","ccedil":"ç","cedil":"¸","cent":"¢","copy":"©","COPY":"©","curren":"¤","deg":"°","divide":"÷","Eacute":"É","eacute":"é","Ecirc":"Ê","ecirc":"ê","Egrave":"È","egrave":"è","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","frac12":"½","frac14":"¼","frac34":"¾","gt":">","GT":">","Iacute":"Í","iacute":"í","Icirc":"Î","icirc":"î","iexcl":"¡","Igrave":"Ì","igrave":"ì","iquest":"¿","Iuml":"Ï","iuml":"ï","laquo":"«","lt":"<","LT":"<","macr":"¯","micro":"µ","middot":"·","nbsp":" ","not":"¬","Ntilde":"Ñ","ntilde":"ñ","Oacute":"Ó","oacute":"ó","Ocirc":"Ô","ocirc":"ô","Ograve":"Ò","ograve":"ò","ordf":"ª","ordm":"º","Oslash":"Ø","oslash":"ø","Otilde":"Õ","otilde":"õ","Ouml":"Ö","ouml":"ö","para":"¶","plusmn":"±","pound":"£","quot":"\\"","QUOT":"\\"","raquo":"»","reg":"®","REG":"®","sect":"§","shy":"­","sup1":"¹","sup2":"²","sup3":"³","szlig":"ß","THORN":"Þ","thorn":"þ","times":"×","Uacute":"Ú","uacute":"ú","Ucirc":"Û","ucirc":"û","Ugrave":"Ù","ugrave":"ù","uml":"¨","Uuml":"Ü","uuml":"ü","Yacute":"Ý","yacute":"ý","yen":"¥","yuml":"ÿ"}')},function(e,t,r){"use strict";var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.cloneNode=t.hasChildren=t.isDocument=t.isDirective=t.isComment=t.isText=t.isCDATA=t.isTag=t.Element=t.Document=t.NodeWithChildren=t.ProcessingInstruction=t.Comment=t.Text=t.DataNode=t.Node=void 0;var o=r(97),s=new Map([[o.ElementType.Tag,1],[o.ElementType.Script,1],[o.ElementType.Style,1],[o.ElementType.Directive,1],[o.ElementType.Text,3],[o.ElementType.CDATA,4],[o.ElementType.Comment,8],[o.ElementType.Root,9]]),c=function(){function e(e){this.type=e,this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"nodeType",{get:function(){var e;return null!==(e=s.get(this.type))&&void 0!==e?e:1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(e){return void 0===e&&(e=!1),x(this,e)},e}();t.Node=c;var l=function(e){function t(t,r){var n=e.call(this,t)||this;return n.data=r,n}return a(t,e),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!1,configurable:!0}),t}(c);t.DataNode=l;var u=function(e){function t(t){return e.call(this,o.ElementType.Text,t)||this}return a(t,e),t}(l);t.Text=u;var d=function(e){function t(t){return e.call(this,o.ElementType.Comment,t)||this}return a(t,e),t}(l);t.Comment=d;var h=function(e){function t(t,r){var n=e.call(this,o.ElementType.Directive,r)||this;return n.name=t,n}return a(t,e),t}(l);t.ProcessingInstruction=h;var p=function(e){function t(t,r){var n=e.call(this,t)||this;return n.children=r,n}return a(t,e),Object.defineProperty(t.prototype,"firstChild",{get:function(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(e){this.children=e},enumerable:!1,configurable:!0}),t}(c);t.NodeWithChildren=p;var f=function(e){function t(t){return e.call(this,o.ElementType.Root,t)||this}return a(t,e),t}(p);t.Document=f;var m=function(e){function t(t,r,n,a){void 0===n&&(n=[]),void 0===a&&(a="script"===t?o.ElementType.Script:"style"===t?o.ElementType.Style:o.ElementType.Tag);var i=e.call(this,a,n)||this;return i.name=t,i.attribs=r,i}return a(t,e),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(e){this.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var e=this;return Object.keys(this.attribs).map((function(t){var r,n;return{name:t,value:e.attribs[t],namespace:null===(r=e["x-attribsNamespace"])||void 0===r?void 0:r[t],prefix:null===(n=e["x-attribsPrefix"])||void 0===n?void 0:n[t]}}))},enumerable:!1,configurable:!0}),t}(p);function g(e){return(0,o.isTag)(e)}function y(e){return e.type===o.ElementType.CDATA}function v(e){return e.type===o.ElementType.Text}function b(e){return e.type===o.ElementType.Comment}function _(e){return e.type===o.ElementType.Directive}function w(e){return e.type===o.ElementType.Root}function x(e,t){var r;if(void 0===t&&(t=!1),v(e))r=new u(e.data);else if(b(e))r=new d(e.data);else if(g(e)){var n=t?k(e.children):[],a=new m(e.name,i({},e.attribs),n);n.forEach((function(e){return e.parent=a})),e["x-attribsNamespace"]&&(a["x-attribsNamespace"]=i({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(a["x-attribsPrefix"]=i({},e["x-attribsPrefix"])),r=a}else if(y(e)){n=t?k(e.children):[];var s=new p(o.ElementType.CDATA,n);n.forEach((function(e){return e.parent=s})),r=s}else if(w(e)){n=t?k(e.children):[];var c=new f(n);n.forEach((function(e){return e.parent=c})),e["x-mode"]&&(c["x-mode"]=e["x-mode"]),r=c}else{if(!_(e))throw new Error("Not implemented yet: "+e.type);var l=new h(e.name,e.data);null!=e["x-name"]&&(l["x-name"]=e["x-name"],l["x-publicId"]=e["x-publicId"],l["x-systemId"]=e["x-systemId"]),r=l}return r.startIndex=e.startIndex,r.endIndex=e.endIndex,r}function k(e){for(var t=e.map((function(e){return x(e,!0)})),r=1;r<t.length;r++)t[r].prev=t[r-1],t[r-1].next=t[r];return t}t.Element=m,t.isTag=g,t.isCDATA=y,t.isText=v,t.isComment=b,t.isDirective=_,t.isDocument=w,t.hasChildren=function(e){return Object.prototype.hasOwnProperty.call(e,"children")},t.cloneNode=x},function(e,t,r){"use strict";var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseFeed=t.FeedHandler=void 0;var l,u,d=c(r(53)),h=s(r(457)),p=r(451);!function(e){e[e.image=0]="image",e[e.audio=1]="audio",e[e.video=2]="video",e[e.document=3]="document",e[e.executable=4]="executable"}(l||(l={})),function(e){e[e.sample=0]="sample",e[e.full=1]="full",e[e.nonstop=2]="nonstop"}(u||(u={}));var f=function(e){function t(t,r){return"object"==typeof t&&(r=t=void 0),e.call(this,t,r)||this}return a(t,e),t.prototype.onend=function(){var e,t,r=y(w,this.dom);if(r){var n={};if("feed"===r.name){var a=r.children;n.type="atom",_(n,"id","id",a),_(n,"title","title",a);var i=b("href",y("link",a));i&&(n.link=i),_(n,"description","subtitle",a),(o=v("updated",a))&&(n.updated=new Date(o)),_(n,"author","email",a,!0),n.items=g("entry",a).map((function(e){var t={},r=e.children;_(t,"id","id",r),_(t,"title","title",r);var n=b("href",y("link",r));n&&(t.link=n);var a=v("summary",r)||v("content",r);a&&(t.description=a);var i=v("updated",r);return i&&(t.pubDate=new Date(i)),t.media=m(r),t}))}else{var o;a=null!==(t=null===(e=y("channel",r.children))||void 0===e?void 0:e.children)&&void 0!==t?t:[];n.type=r.name.substr(0,3),n.id="",_(n,"title","title",a),_(n,"link","link",a),_(n,"description","description",a),(o=v("lastBuildDate",a))&&(n.updated=new Date(o)),_(n,"author","managingEditor",a,!0),n.items=g("item",r.children).map((function(e){var t={},r=e.children;_(t,"id","guid",r),_(t,"title","title",r),_(t,"link","link",r),_(t,"description","description",r);var n=v("pubDate",r);return n&&(t.pubDate=new Date(n)),t.media=m(r),t}))}this.feed=n,this.handleCallback(null)}else this.handleCallback(new Error("couldn't find root of feed"))},t}(d.default);function m(e){return g("media:content",e).map((function(e){var t={medium:e.attribs.medium,isDefault:!!e.attribs.isDefault};return e.attribs.url&&(t.url=e.attribs.url),e.attribs.fileSize&&(t.fileSize=parseInt(e.attribs.fileSize,10)),e.attribs.type&&(t.type=e.attribs.type),e.attribs.expression&&(t.expression=e.attribs.expression),e.attribs.bitrate&&(t.bitrate=parseInt(e.attribs.bitrate,10)),e.attribs.framerate&&(t.framerate=parseInt(e.attribs.framerate,10)),e.attribs.samplingrate&&(t.samplingrate=parseInt(e.attribs.samplingrate,10)),e.attribs.channels&&(t.channels=parseInt(e.attribs.channels,10)),e.attribs.duration&&(t.duration=parseInt(e.attribs.duration,10)),e.attribs.height&&(t.height=parseInt(e.attribs.height,10)),e.attribs.width&&(t.width=parseInt(e.attribs.width,10)),e.attribs.lang&&(t.lang=e.attribs.lang),t}))}function g(e,t){return h.getElementsByTagName(e,t,!0)}function y(e,t){return h.getElementsByTagName(e,t,!0,1)[0]}function v(e,t,r){return void 0===r&&(r=!1),h.getText(h.getElementsByTagName(e,t,r,1)).trim()}function b(e,t){return t?t.attribs[e]:null}function _(e,t,r,n,a){void 0===a&&(a=!1);var i=v(r,n,a);i&&(e[t]=i)}function w(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}t.FeedHandler=f,t.parseFeed=function(e,t){void 0===t&&(t={xmlMode:!0});var r=new f(t);return new p.Parser(r,t).end(e),r.feed}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.hasChildren=t.isDocument=t.isComment=t.isText=t.isCDATA=t.isTag=void 0,a(r(458),t),a(r(1138),t),a(r(1139),t),a(r(461),t),a(r(462),t),a(r(1140),t),a(r(1141),t);var i=r(53);Object.defineProperty(t,"isTag",{enumerable:!0,get:function(){return i.isTag}}),Object.defineProperty(t,"isCDATA",{enumerable:!0,get:function(){return i.isCDATA}}),Object.defineProperty(t,"isText",{enumerable:!0,get:function(){return i.isText}}),Object.defineProperty(t,"isComment",{enumerable:!0,get:function(){return i.isComment}}),Object.defineProperty(t,"isDocument",{enumerable:!0,get:function(){return i.isDocument}}),Object.defineProperty(t,"hasChildren",{enumerable:!0,get:function(){return i.hasChildren}})},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.innerText=t.textContent=t.getText=t.getInnerHTML=t.getOuterHTML=void 0;var a=r(53),i=n(r(1135)),o=r(97);function s(e,t){return(0,i.default)(e,t)}t.getOuterHTML=s,t.getInnerHTML=function(e,t){return(0,a.hasChildren)(e)?e.children.map((function(e){return s(e,t)})).join(""):""},t.getText=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,a.isTag)(t)?"br"===t.name?"\n":e(t.children):(0,a.isCDATA)(t)?e(t.children):(0,a.isText)(t)?t.data:""},t.textContent=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,a.hasChildren)(t)&&!(0,a.isComment)(t)?e(t.children):(0,a.isText)(t)?t.data:""},t.innerText=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,a.hasChildren)(t)&&(t.type===o.ElementType.Tag||(0,a.isCDATA)(t))?e(t.children):(0,a.isText)(t)?t.data:""}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeHTML=t.decodeHTMLStrict=t.decodeXML=void 0;var a=n(r(231)),i=n(r(454)),o=n(r(232)),s=n(r(453)),c=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;function l(e){var t=d(e);return function(e){return String(e).replace(c,t)}}t.decodeXML=l(o.default),t.decodeHTMLStrict=l(a.default);var u=function(e,t){return e<t?1:-1};function d(e){return function(t){if("#"===t.charAt(1)){var r=t.charAt(2);return"X"===r||"x"===r?s.default(parseInt(t.substr(3),16)):s.default(parseInt(t.substr(2),10))}return e[t.slice(1,-1)]||t}}t.decodeHTML=function(){for(var e=Object.keys(i.default).sort(u),t=Object.keys(a.default).sort(u),r=0,n=0;r<t.length;r++)e[n]===t[r]?(t[r]+=";?",n++):t[r]+=";";var o=new RegExp("&(?:"+t.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),s=d(a.default);function c(e){return";"!==e.substr(-1)&&(e+=";"),s(e)}return function(e){return String(e).replace(o,c)}}()},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.escapeUTF8=t.escape=t.encodeNonAsciiHTML=t.encodeHTML=t.encodeXML=void 0;var a=u(n(r(232)).default),i=d(a);t.encodeXML=g(a);var o,s,c=u(n(r(231)).default),l=d(c);function u(e){return Object.keys(e).sort().reduce((function(t,r){return t[e[r]]="&"+r+";",t}),{})}function d(e){for(var t=[],r=[],n=0,a=Object.keys(e);n<a.length;n++){var i=a[n];1===i.length?t.push("\\"+i):r.push(i)}t.sort();for(var o=0;o<t.length-1;o++){for(var s=o;s<t.length-1&&t[s].charCodeAt(1)+1===t[s+1].charCodeAt(1);)s+=1;var c=1+s-o;c<3||t.splice(o,c,t[o]+"-"+t[s])}return r.unshift("["+t.join("")+"]"),new RegExp(r.join("|"),"g")}t.encodeHTML=(o=c,s=l,function(e){return e.replace(s,(function(e){return o[e]})).replace(h,f)}),t.encodeNonAsciiHTML=g(c);var h=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,p=null!=String.prototype.codePointAt?function(e){return e.codePointAt(0)}:function(e){return 1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536};function f(e){return"&#x"+(e.length>1?p(e):e.charCodeAt(0)).toString(16).toUpperCase()+";"}var m=new RegExp(i.source+"|"+h.source,"g");function g(e){return function(t){return t.replace(m,(function(t){return e[t]||f(t)}))}}t.escape=function(e){return e.replace(m,f)},t.escapeUTF8=function(e){return e.replace(i,f)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findAll=t.existsOne=t.findOne=t.findOneChild=t.find=t.filter=void 0;var n=r(53);function a(e,t,r,i){for(var o=[],s=0,c=t;s<c.length;s++){var l=c[s];if(e(l)&&(o.push(l),--i<=0))break;if(r&&(0,n.hasChildren)(l)&&l.children.length>0){var u=a(e,l.children,r,i);if(o.push.apply(o,u),(i-=u.length)<=0)break}}return o}t.filter=function(e,t,r,n){return void 0===r&&(r=!0),void 0===n&&(n=1/0),Array.isArray(t)||(t=[t]),a(e,t,r,n)},t.find=a,t.findOneChild=function(e,t){return t.find(e)},t.findOne=function e(t,r,a){void 0===a&&(a=!0);for(var i=null,o=0;o<r.length&&!i;o++){var s=r[o];(0,n.isTag)(s)&&(t(s)?i=s:a&&s.children.length>0&&(i=e(t,s.children)))}return i},t.existsOne=function e(t,r){return r.some((function(r){return(0,n.isTag)(r)&&(t(r)||r.children.length>0&&e(t,r.children))}))},t.findAll=function(e,t){for(var r,a,i=[],o=t.filter(n.isTag);a=o.shift();){var s=null===(r=a.children)||void 0===r?void 0:r.filter(n.isTag);s&&s.length>0&&o.unshift.apply(o,s),e(a)&&i.push(a)}return i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getElementsByTagType=t.getElementsByTagName=t.getElementById=t.getElements=t.testElement=void 0;var n=r(53),a=r(461),i={tag_name:function(e){return"function"==typeof e?function(t){return(0,n.isTag)(t)&&e(t.name)}:"*"===e?n.isTag:function(t){return(0,n.isTag)(t)&&t.name===e}},tag_type:function(e){return"function"==typeof e?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(e){return"function"==typeof e?function(t){return(0,n.isText)(t)&&e(t.data)}:function(t){return(0,n.isText)(t)&&t.data===e}}};function o(e,t){return"function"==typeof t?function(r){return(0,n.isTag)(r)&&t(r.attribs[e])}:function(r){return(0,n.isTag)(r)&&r.attribs[e]===t}}function s(e,t){return function(r){return e(r)||t(r)}}function c(e){var t=Object.keys(e).map((function(t){var r=e[t];return Object.prototype.hasOwnProperty.call(i,t)?i[t](r):o(t,r)}));return 0===t.length?null:t.reduce(s)}t.testElement=function(e,t){var r=c(e);return!r||r(t)},t.getElements=function(e,t,r,n){void 0===n&&(n=1/0);var i=c(e);return i?(0,a.filter)(i,t,r,n):[]},t.getElementById=function(e,t,r){return void 0===r&&(r=!0),Array.isArray(t)||(t=[t]),(0,a.findOne)(o("id",e),t,r)},t.getElementsByTagName=function(e,t,r,n){return void 0===r&&(r=!0),void 0===n&&(n=1/0),(0,a.filter)(i.tag_name(e),t,r,n)},t.getElementsByTagType=function(e,t,r,n){return void 0===r&&(r=!0),void 0===n&&(n=1/0),(0,a.filter)(i.tag_type(e),t,r,n)}},function(e,t){},function(e,t,r){"use strict";const n={colon:": ",indent:"    ",beforeDecl:"\n",beforeRule:"\n",beforeOpen:" ",beforeClose:"\n",beforeComment:"\n",after:"\n",emptyBody:"",commentLeft:" ",commentRight:" ",semicolon:!1};e.exports=class{constructor(e){this.builder=e}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}document(e){this.body(e)}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}comment(e){let t=this.raw(e,"left","commentLeft"),r=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+r+"*/",e)}decl(e,t){let r=this.raw(e,"between","colon"),n=e.prop+r+this.rawValue(e,"value");e.important&&(n+=e.raws.important||" !important"),t&&(n+=";"),this.builder(n,e)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}atrule(e,t){let r="@"+e.name,n=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?r+=e.raws.afterName:n&&(r+=" "),e.nodes)this.block(e,r+n);else{let a=(e.raws.between||"")+(t?";":"");this.builder(r+n+a,e)}}body(e){let t=e.nodes.length-1;for(;t>0&&"comment"===e.nodes[t].type;)t-=1;let r=this.raw(e,"semicolon");for(let n=0;n<e.nodes.length;n++){let a=e.nodes[n],i=this.raw(a,"before");i&&this.builder(i),this.stringify(a,t!==n||r)}}block(e,t){let r,n=this.raw(e,"between","beforeOpen");this.builder(t+n+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),r=this.raw(e,"after")):r=this.raw(e,"after","emptyBody"),r&&this.builder(r),this.builder("}",e,"end")}raw(e,t,r){let a;if(r||(r=t),t&&(a=e.raws[t],void 0!==a))return a;let i=e.parent;if("before"===r){if(!i||"root"===i.type&&i.first===e)return"";if(i&&"document"===i.type)return""}if(!i)return n[r];let o=e.root();if(o.rawCache||(o.rawCache={}),void 0!==o.rawCache[r])return o.rawCache[r];if("before"===r||"after"===r)return this.beforeAfter(e,r);{let n="raw"+((s=r)[0].toUpperCase()+s.slice(1));this[n]?a=this[n](o,e):o.walk(e=>{if(a=e.raws[t],void 0!==a)return!1})}var s;return void 0===a&&(a=n[r]),o.rawCache[r]=a,a}rawSemicolon(e){let t;return e.walk(e=>{if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&(t=e.raws.semicolon,void 0!==t))return!1}),t}rawEmptyBody(e){let t;return e.walk(e=>{if(e.nodes&&0===e.nodes.length&&(t=e.raws.after,void 0!==t))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(r=>{let n=r.parent;if(n&&n!==e&&n.parent&&n.parent===e&&void 0!==r.raws.before){let e=r.raws.before.split("\n");return t=e[e.length-1],t=t.replace(/\S/g,""),!1}}),t}rawBeforeComment(e,t){let r;return e.walkComments(e=>{if(void 0!==e.raws.before)return r=e.raws.before,r.includes("\n")&&(r=r.replace(/[^\n]+$/,"")),!1}),void 0===r?r=this.raw(t,null,"beforeDecl"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeDecl(e,t){let r;return e.walkDecls(e=>{if(void 0!==e.raws.before)return r=e.raws.before,r.includes("\n")&&(r=r.replace(/[^\n]+$/,"")),!1}),void 0===r?r=this.raw(t,null,"beforeRule"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeRule(e){let t;return e.walk(r=>{if(r.nodes&&(r.parent!==e||e.first!==r)&&void 0!==r.raws.before)return t=r.raws.before,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeClose(e){let t;return e.walk(e=>{if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return t=e.raws.after,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeOpen(e){let t;return e.walk(e=>{if("decl"!==e.type&&(t=e.raws.between,void 0!==t))return!1}),t}rawColon(e){let t;return e.walkDecls(e=>{if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1}),t}beforeAfter(e,t){let r;r="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");let n=e.parent,a=0;for(;n&&"root"!==n.type;)a+=1,n=n.parent;if(r.includes("\n")){let t=this.raw(e,null,"indent");if(t.length)for(let e=0;e<a;e++)r+=t}return r}rawValue(e,t){let r=e[t],n=e.raws[t];return n&&n.value===r?n.raw:r}}},function(e,t,r){"use strict";let{isClean:n,my:a}=r(234),i=r(1149),o=r(235),s=r(69),c=r(238),l=(r(1150),r(467)),u=r(469),d=r(98);const h={document:"Document",root:"Root",atrule:"AtRule",rule:"Rule",decl:"Declaration",comment:"Comment"},p={postcssPlugin:!0,prepare:!0,Once:!0,Document:!0,Root:!0,Declaration:!0,Rule:!0,AtRule:!0,Comment:!0,DeclarationExit:!0,RuleExit:!0,AtRuleExit:!0,CommentExit:!0,RootExit:!0,DocumentExit:!0,OnceExit:!0},f={postcssPlugin:!0,prepare:!0,Once:!0};function m(e){return"object"==typeof e&&"function"==typeof e.then}function g(e){let t=!1,r=h[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[r,r+"-"+t,0,r+"Exit",r+"Exit-"+t]:t?[r,r+"-"+t,r+"Exit",r+"Exit-"+t]:e.append?[r,0,r+"Exit"]:[r,r+"Exit"]}function y(e){let t;return t="document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:g(e),{node:e,events:t,eventIndex:0,visitors:[],visitorIndex:0,iterator:0}}function v(e){return e[n]=!1,e.nodes&&e.nodes.forEach(e=>v(e)),e}let b={};class _{constructor(e,t,r){let n;if(this.stringified=!1,this.processed=!1,"object"!=typeof t||null===t||"root"!==t.type&&"document"!==t.type)if(t instanceof _||t instanceof l)n=v(t.root),t.map&&(void 0===r.map&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=t.map);else{let e=u;r.syntax&&(e=r.syntax.parse),r.parser&&(e=r.parser),e.parse&&(e=e.parse);try{n=e(t,r)}catch(e){this.processed=!0,this.error=e}n&&!n[a]&&s.rebuild(n)}else n=v(t);this.result=new l(e,n,r),this.helpers={...b,result:this.result,postcss:b},this.plugins=this.processor.plugins.map(e=>"object"==typeof e&&e.prepare?{...e,...e.prepare(this.result)}:e)}get[Symbol.toStringTag](){return"LazyResult"}get processor(){return this.result.processor}get opts(){return this.result.opts}get css(){return this.stringify().css}get content(){return this.stringify().content}get map(){return this.stringify().map}get root(){return this.sync().root}get messages(){return this.sync().messages}warnings(){return this.sync().warnings()}toString(){return this.css}then(e,t){return this.async().then(e,t)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){if(m(this.runOnRoot(e)))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[n];)e[n]=!0,this.walkSync(e);if(this.listeners.OnceExit)if("document"===e.type)for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=o;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let r=new i(t,this.result.root,this.result.opts).generate();return this.result.css=r[0],this.result.map=r[1],this.result}walkSync(e){e[n]=!0;let t=g(e);for(let r of t)if(0===r)e.nodes&&e.each(e=>{e[n]||this.walkSync(e)});else{let t=this.listeners[r];if(t&&this.visitSync(t,e.toProxy()))return}}visitSync(e,t){for(let[r,n]of e){let e;this.result.lastPlugin=r;try{e=n(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(m(e))throw this.getAsyncError()}}runOnRoot(e){this.result.lastPlugin=e;try{if("object"==typeof e&&e.Once){if("document"===this.result.root.type){let t=this.result.root.nodes.map(t=>e.Once(t,this.helpers));return m(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let r=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin?r.postcssVersion:(e.plugin=r.postcssPlugin,e.setMessage())}catch(e){console&&console.error&&console.error(e)}return e}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],r=this.runOnRoot(t);if(m(r))try{await r}catch(e){throw this.handleError(e)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[n];){e[n]=!0;let t=[y(e)];for(;t.length>0;){let e=this.visitTick(t);if(m(e))try{await e}catch(e){let r=t[t.length-1].node;throw this.handleError(e,r)}}}if(this.listeners.OnceExit)for(let[t,r]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if("document"===e.type){let t=e.nodes.map(e=>r(e,this.helpers));await Promise.all(t)}else await r(e,this.helpers)}catch(e){throw this.handleError(e)}}}return this.processed=!0,this.stringify()}prepareVisitors(){this.listeners={};let e=(e,t,r)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([e,r])};for(let t of this.plugins)if("object"==typeof t)for(let r in t){if(!p[r]&&/^[A-Z]/.test(r))throw new Error(`Unknown event ${r} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!f[r])if("object"==typeof t[r])for(let n in t[r])e(t,"*"===n?r:r+"-"+n.toLowerCase(),t[r][n]);else"function"==typeof t[r]&&e(t,r,t[r])}this.hasListener=Object.keys(this.listeners).length>0}visitTick(e){let t=e[e.length-1],{node:r,visitors:a}=t;if("root"!==r.type&&"document"!==r.type&&!r.parent)return void e.pop();if(a.length>0&&t.visitorIndex<a.length){let[e,n]=a[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===a.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return n(r.toProxy(),this.helpers)}catch(e){throw this.handleError(e,r)}}if(0!==t.iterator){let a,i=t.iterator;for(;a=r.nodes[r.indexes[i]];)if(r.indexes[i]+=1,!a[n])return a[n]=!0,void e.push(y(a));t.iterator=0,delete r.indexes[i]}let i=t.events;for(;t.eventIndex<i.length;){let e=i[t.eventIndex];if(t.eventIndex+=1,0===e)return void(r.nodes&&r.nodes.length&&(r[n]=!0,t.iterator=r.getIterator()));if(this.listeners[e])return void(t.visitors=this.listeners[e])}e.pop()}}_.registerPostcss=e=>{b=e},e.exports=_,_.default=_,d.registerLazyResult(_),c.registerLazyResult(_)},function(e,t){},function(e,t,r){"use strict";let n=r(468);class a{constructor(e,t,r){this.processor=e,this.messages=[],this.root=t,this.opts=r,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let r=new n(e,t);return this.messages.push(r),r}warnings(){return this.messages.filter(e=>"warning"===e.type)}get content(){return this.css}}e.exports=a,a.default=a},function(e,t,r){"use strict";class n{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let e=t.node.positionBy(t);this.line=e.line,this.column=e.column}for(let e in t)this[e]=t[e]}toString(){return this.node?this.node.error(this.text,{plugin:this.plugin,index:this.index,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}e.exports=n,n.default=n},function(e,t,r){"use strict";let n=r(69),a=r(1151),i=r(241);function o(e,t){let r=new i(e,t),n=new a(r);try{n.parse()}catch(e){throw e}return n.root}e.exports=o,o.default=o,n.registerParse(o)},function(e,t,r){"use strict";let n={split(e,t,r){let n=[],a="",i=!1,o=0,s=!1,c=!1;for(let r of e)c?c=!1:"\\"===r?c=!0:s?r===s&&(s=!1):'"'===r||"'"===r?s=r:"("===r?o+=1:")"===r?o>0&&(o-=1):0===o&&t.includes(r)&&(i=!0),i?(""!==a&&n.push(a.trim()),a="",i=!1):a+=r;return(r||""!==a)&&n.push(a.trim()),n},space:e=>n.split(e,[" ","\n","\t"]),comma:e=>n.split(e,[","],!0)};e.exports=n,n.default=n},function(e,t,r){"use strict";(function(t){let{SourceMapConsumer:n,SourceMapGenerator:a}=r(236),{existsSync:i,readFileSync:o}=r(1154),{dirname:s,join:c}=r(237);class l{constructor(e,t){if(!1===t.map)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let r=t.map?t.map.prev:void 0,n=this.loadMap(t.from,r);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=s(this.mapFile)),n&&(this.text=n)}consumer(){return this.consumerCache||(this.consumerCache=new n(this.text)),this.consumerCache}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}startWith(e,t){return!!e&&e.substr(0,t.length)===t}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let r=e.lastIndexOf(t.pop()),n=e.indexOf("*/",r);r>-1&&n>-1&&(this.annotation=this.getAnnotationURL(e.substring(r,n)))}decodeInline(e){if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return r=e.substr(RegExp.lastMatch.length),t?t.from(r,"base64").toString():window.atob(r);var r;let n=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+n)}loadFile(e){if(this.root=s(e),i(e))return this.mapFile=e,o(e,"utf-8").toString().trim()}loadMap(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(t instanceof n)return a.fromSourceMap(t).toString();if(t instanceof a)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}{let r=t(e);if(r){let e=this.loadFile(r);if(!e)throw new Error("Unable to load previous source map: "+r.toString());return e}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let t=this.annotation;return e&&(t=c(s(e),t)),this.loadFile(t)}}}isMap(e){return"object"==typeof e&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}}e.exports=l,l.default=l}).call(this,r(4).Buffer)},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var a=d(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=r(82),p=null,f=null,m=null,g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(b,e);var t,n,h,g,y,v=c(b);function b(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),(t=v.call(this,e)).name="Chess",t.description="Chess is a two-player strategy board game played on a checkered board with 64 squares arranged in an 8×8 grid.",t.board=null,t.engine=null,p=u(t),t.publickey=e.wallet.returnPublicKey(),t.useHUD=0,t.useClock=1,t.minPlayers=2,t.maxPlayers=2,t.type="Classic Boardgame",t.description="An implementation of Chess for the Saito Blockchain",t.categories="Boardgame Game",l(t,u(t))}return t=b,(n=[{key:"respondTo",value:function(e){if(null!=o(d(b.prototype),"respondTo",this).call(this,e))return o(d(b.prototype),"respondTo",this).call(this,e);if("arcade-carousel"==e){var t={background:"/chess/img/arcade/arcade-banner-background.png",title:"Chess"};return t}return null}},{key:"initializeHTML",value:function(e){o(d(b.prototype),"initializeHTML",this).call(this,e),this.app.modules.respondTo("chat-manager").forEach((function(e){e.respondTo("chat-manager").render(p.app,p)}))}},{key:"initializeGame",value:(g=regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("######################################################"),console.log("######################################################"),console.log("######################         #######################"),console.log("######################  CHESS  #######################"),console.log("######################         #######################"),console.log("######################################################"),console.log("######################################################"),1==this.browser_active&&(f=r(249),m=r(250),this.board=new m("board",{pieceTheme:"img/pieces/{piece}.png"}),this.engine=new f.Chess),this.loadGame(t),1==this.game.initializing&&this.game.queue.push("READY"),1==this.browser_active&&(null!=this.game.position?this.engine.load(this.game.position):this.game.position=this.engine.fen(),this.game.target==this.game.player?(this.setBoard(this.engine.fen()),this.useClock&&this.startClock()):this.lockBoard(this.engine.fen()),n=this.game.opponents[0],this.app.crypto.isPublicKey(n)&&this.app.keys.returnIdentifierByPublicKey(n).length>=6&&(n=this.app.keys.returnIdentifierByPublicKey(n)),(a=document.getElementById("opponent_id"))&&(a.innerHTML=n),this.updateStatusMessage(),this.attachEvents());case 11:case"end":return e.stop()}}),e,this)})),y=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=g.apply(e,t);function o(e){a(i,r,n,o,s,"next",e)}function s(e){a(i,r,n,o,s,"throw",e)}o(void 0)}))},function(e){return y.apply(this,arguments)})},{key:"handleGameLoop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(console.log("QUEUE IN CHESS: "+JSON.stringify(this.game.queue)),console.log(JSON.stringify(e)),"OBSERVER_CHECKPOINT"!=this.game.queue[this.game.queue.length-1])if(e={},this.game.queue.length>0?e.extra=JSON.parse(this.app.crypto.base64ToString(this.game.queue[this.game.queue.length-1])):e.extra={},this.game.queue.splice(this.game.queue.length-1,1),null!=e.extra){if(null!=e.extra.data){var t=JSON.parse(e.extra.data);return this.game.position=t.position,this.game.target=e.extra.target,e.extra.target==this.game.player?1==this.browser_active&&(this.setBoard(this.game.position),this.useClock&&this.startClock(),this.updateLog(t.move,999),this.updateStatusMessage(),!0===this.engine.in_checkmate()&&this.resignGame()):1==this.browser_active&&this.lockBoard(this.game.position),0==this.game.player?(this.game.queue.push("OBSERVER_CHECKPOINT"),1):(this.saveGame(this.game.id),0)}console.log("NO MESSAGE RECEIVED!")}else console.log("NO MESSAGE DEFINED!")}},{key:"endTurn",value:function(e){var t={};t.target=this.returnNextPlayer(this.game.player),t.data=JSON.stringify(e);var r=this.app.crypto.stringToBase64(JSON.stringify(t));this.game.turn=[r],this.moves=[],this.sendMessage("game",t),this.updateLog(e.move,999),this.updateStatusMessage()}},{key:"attachEvents",value:function(){var e=this,t=document.getElementById("chat_icon"),r=document.getElementById("resign_icon"),n=document.getElementById("move_accept"),a=document.getElementById("move_reject");if(n){var i=this.app.modules.returnModule("Chat");i||(t.style.display="none"),r.onclick=function(){if(confirm("Do you really want to resign?"))return e.resignGame(e.game.id),alert("You have resigned the game..."),void(window.location.href="/arcade")},i&&(t.onclick=function(){i&&i.openChatBox()}),n.onclick=function(){console.log("send move transaction and wait for reply.");var t={};t.white=e.game.white,t.black=e.game.black,t.id=e.game.id,t.position=e.engine.fen(),t.move=e.game.move,e.endTurn(t),n.disabled=!0,n.classList.remove("green"),a.disabled=!0,a.classList.remove("red")},a.onclick=function(){e.setBoard(e.game.position),n.disabled=!0,n.classList.remove("green"),a.disabled=!0,a.classList.remove("red")},window.onresize=function(){return e.board.resize()},this.app.modules.respondTo("chat-manager").forEach((function(e){e.respondTo("chat-manager").attachEvents(p.app,p)}))}}},{key:"updateStatusMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(1==this.browser_active){var t=document.getElementById("status");if(""==e){var r="",n="White";"b"===this.engine.turn()&&(n="Black"),!0===this.engine.in_checkmate()?(r="Game over, "+n+" is in checkmate.",this.game.over=1,1==this.game.player&&"Black"===n&&(this.game.winner=1),2==this.game.player&&"White"===n&&(this.game.winner=1)):!0===this.engine.in_draw()?(r="Game over, drawn position",this.game.over=1):(r=n+" to move",!0===this.engine.in_check()&&(r+=", "+n+" is in check")),t.innerHTML=r,console.log(this.game.position),console.log(this.engine.fen()),console.log(this.returnCaptured(this.engine.fen())),console.log(this.returnCapturedHTML(this.returnCaptured(this.engine.fen()))),document.getElementById("captured").innerHTML=this.returnCapturedHTML(this.returnCaptured(this.engine.fen()))}else t.innerHTML=e}}},{key:"setBoard",value:function(e){this.game.moveStartPosition=e,null!=this.board&&null!=this.board.destroy&&this.board.destroy();var t={draggable:!0,position:e,pieceTheme:"img/pieces/{piece}.png",onDragStart:this.onDragStart,onDrop:this.onDrop,onMouseoutSquare:this.onMouseoutSquare,onMouseoverSquare:this.onMouseoverSquare,onSnapEnd:this.onSnapEnd,onMoveEnd:this.onMoveEnd,onChange:this.onChange};1==this.browser_active&&(this.board=new m("board",t)),this.engine.load(e),2==this.game.player&&1==this.browser_active&&this.board.orientation("black")}},{key:"lockBoard",value:function(e){null!=this.board&&null!=this.board.destroy&&this.board.destroy();var t={pieceTheme:"img/pieces/{piece}.png",moveSpeed:0,position:e};this.board=new m("board",t),this.engine.load(e),2==this.game.player&&this.board.orientation("black")}},{key:"onDragStart",value:function(e,t,r,n){if(!0===p.engine.game_over()||"w"===p.engine.turn()&&-1!==t.search(/^b/)||"b"===p.engine.turn()&&-1!==t.search(/^w/))return!1}},{key:"onDrop",value:function(e,t,r,n,a,i,o){if(p.removeGreySquares(),p.game.move=p.engine.fen().split(" ").slice(-1)[0]+" "+p.colours(p.engine.fen().split(" ")[1])+": ",7==e.charAt(1)&&8==t.charAt(1)&&"wP"==r||2==e.charAt(1)&&1==t.charAt(1)&&"bP"==r)p.checkPromotion(e,t,r.charAt(0));else{var s=p.engine.move({from:e,to:t,promotion:"q"});if(null===s)return"snapback";p.game.move+=p.pieces(s.piece)+" ",p.game.move+=" - "+s.san}}},{key:"promoteAfterDrop",value:function(e,t,r){var n=p.engine.move({from:e,to:t,promotion:r});document.getElementById("promotion").style.display="none",document.getElementById("buttons").style.display="grid",p.updateStatusMessage("Confirm Move to Send!"),p.game.move+="".concat(p.pieces(n.piece)," - ").concat(n.san),p.updateStatusMessage("Pawn promoted to "+p.pieces(r)+".")}},{key:"checkPromotion",value:function(e,t,r){var n=this,a=document.getElementById("promotion"),i=document.getElementById("promotion-choices"),o=document.getElementById("buttons");o.style.display="none";var s=["q","r","b","n"].map((function(e){return n.piecehtml(e,r)})).join("");i.innerHTML=s,i.childNodes.forEach((function(r){r.onclick=function(){a.style.display="none",o.style.display="grid",p.promoteAfterDrop(e,t,r.alt)}})),this.updateStatusMessage("Chose promotion piece"),a.style.display="block"}},{key:"onMouseoverSquare",value:function(e,t){var r=p.engine.moves({square:e,verbose:!0});if(0!==r.length){p.greySquare(e);for(var n=0;n<r.length;n++)p.greySquare(r[n].to)}}},{key:"onMouseoutSquare",value:function(e,t){p.removeGreySquares()}},{key:"onSnapEnd",value:function(){p.board.position(p.engine.fen())}},{key:"removeGreySquares",value:function(){var e=document.querySelectorAll("#board .square-55d63");Array.from(e).forEach((function(e){return e.style.background=""}))}},{key:"greySquare",value:function(e){var t=document.querySelector("#board .square-".concat(e)),r="#a9a9a9";!0===t.classList.contains("black-3c85d")&&(r="#696969"),t.style.background=r}},{key:"onChange",value:function(e,t){p.lockBoard(p.engine.fen(t));var r=document.getElementById("move_accept"),n=document.getElementById("move_reject");r.disabled=!1,r.classList.add("green"),n.disabled=!1,n.classList.add("red")}},{key:"colours",value:function(e){switch(e){case"w":return"White";case"b":return"Black"}}},{key:"pieces",value:function(e){switch(e){case"p":return"Pawn";case"r":return"Rook";case"n":return"Knight";case"b":return"Bishop";case"q":return"Queen";case"k":return"King"}}},{key:"returnCaptured",value:function(e){e=e.split(" ")[0];for(var t=["Q","R","R","B","B","N","N","P","P","P","P","P","P","P","P"],r=["q","r","r","b","b","n","n","p","p","p","p","p","p","p","p"],n=0;n<e.length;n++)t.indexOf(e[n])>=0&&t.splice(t.indexOf(e[n]),1),r.indexOf(e[n])>=0&&r.splice(r.indexOf(e[n]),1);return[t,r]}},{key:"returnCapturedHTML",value:function(e){for(var t="",r=0;r<e[0].length;r++)t+=this.piecehtml(e[0][r],"w");for(t+="<br />",r=0;r<e[1].length;r++)t+=this.piecehtml(e[1][r],"b");return t}},{key:"piecehtml",value:function(e,t){return'<img class="captured" alt="'.concat(e,'" src = "img/pieces/').concat(t).concat(e.toUpperCase(),'.png">')}},{key:"returnGameOptionsHTML",value:function(){return'\n\n      <div style="padding:40px;width:100vw;height:100vh;overflow-y:scroll;display:grid;grid-template-columns: 200px auto">\n\n        <div style="top:0;left:0;margin-right: 20px;">\n\n          <label for="color">Pick Your Color:</label>\n          <select name="color">\n            <option value="black" default>Black</option>\n            <option value="white">White</option>\n          </select>\n\n          <label for="clock">Time Limit:</label>\n          <select name="clock">\n            <option value="0" default>no limit</option>\n            <option value="2">2 minutes</option>\n            <option value="10">10 minutes</option>\n            <option value="30">30 minutes</option>\n            <option value="60">60 minutes</option>\n            <option value="90">90 minutes</option>\n          </select>\n\n          <label for="observer_mode">Observer Mode:</label>\n          <select name="observer">\n            <option value="enable" selected>enable</option>\n            <option value="disable">disable</option>\n          </select>\n\n        </div>\n        <div>\n\n          <div id="game-wizard-advanced-return-btn" class="game-wizard-advanced-return-btn button">accept</div>\n\n        </div>\n      </div>\n    '}}])&&i(t.prototype,n),h&&i(t,h),b}(h);e.exports=g},function(e,t,r){var n;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/* @license
 * Copyright (c) 2018, Jeff Hlywa (jhlywa@gmail.com)
 * Released under the BSD license
 * https://github.com/jhlywa/chess.js/blob/master/LICENSE
 */var i=function(e){function t(e){void 0===e&&(e=!1),ne=new Array(128),ae={w:R,b:R},ie=I,oe={w:0,b:0},se=R,ce=0,le=1,ue=[],e||(de={}),c(o())}function r(){n(z)}function n(e,r){void 0===r&&(r=!1);var n=e.split(/\s+/),a=n[0],s=0;if(!i(e).valid)return!1;t(r);for(var l=0;l<a.length;l++){var d=a.charAt(l);if("/"===d)s+=8;else if(D(d))s+=parseInt(d,10);else{var h="a">d?I:M;u({type:d.toLowerCase(),color:h},P(s)),s++}}return ie=n[1],n[2].indexOf("K")>-1&&(oe.w|=J.KSIDE_CASTLE),n[2].indexOf("Q")>-1&&(oe.w|=J.QSIDE_CASTLE),n[2].indexOf("k")>-1&&(oe.b|=J.KSIDE_CASTLE),n[2].indexOf("q")>-1&&(oe.b|=J.QSIDE_CASTLE),se="-"===n[3]?R:te[n[3]],ce=parseInt(n[4],10),le=parseInt(n[5],10),c(o()),!0}function i(e){var t="No errors.",r="FEN string must contain six space-delimited fields.",n="6th field (move number) must be a positive integer.",a="5th field (half move counter) must be a non-negative integer.",i="4th field (en-passant square) is invalid.",o="3rd field (castling availability) is invalid.",s="2nd field (side to move) is invalid.",c="1st field (piece positions) does not contain 8 '/'-delimited rows.",l="1st field (piece positions) is invalid [consecutive numbers].",u="1st field (piece positions) is invalid [invalid piece].",d="1st field (piece positions) is invalid [row too large].",h="Illegal en-passant square",p=e.split(/\s+/);if(6!==p.length)return{valid:!1,error_number:1,error:r};if(isNaN(p[5])||parseInt(p[5],10)<=0)return{valid:!1,error_number:2,error:n};if(isNaN(p[4])||parseInt(p[4],10)<0)return{valid:!1,error_number:3,error:a};if(!/^(-|[abcdefgh][36])$/.test(p[3]))return{valid:!1,error_number:4,error:i};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(p[2]))return{valid:!1,error_number:5,error:o};if(!/^(w|b)$/.test(p[1]))return{valid:!1,error_number:6,error:s};var f=p[0].split("/");if(8!==f.length)return{valid:!1,error_number:7,error:c};for(var m=0;m<f.length;m++){for(var g=0,y=!1,v=0;v<f[m].length;v++)if(isNaN(f[m][v])){if(!/^[prnbqkPRNBQK]$/.test(f[m][v]))return{valid:!1,error_number:9,error:u};g+=1,y=!1}else{if(y)return{valid:!1,error_number:8,error:l};g+=parseInt(f[m][v],10),y=!0}if(8!==g)return{valid:!1,error_number:10,error:d}}return"3"==p[3][1]&&"w"==p[1]||"6"==p[3][1]&&"b"==p[1]?{valid:!1,error_number:11,error:h}:{valid:!0,error_number:0,error:t}}function o(){for(var e=0,t="",r=te.a8;r<=te.h1;r++){if(null==ne[r])e++;else{e>0&&(t+=e,e=0);var n=ne[r].color,a=ne[r].type;t+=n===I?a.toUpperCase():a.toLowerCase()}r+1&136&&(e>0&&(t+=e),r!==te.h1&&(t+="/"),e=0,r+=8)}var i="";oe[I]&J.KSIDE_CASTLE&&(i+="K"),oe[I]&J.QSIDE_CASTLE&&(i+="Q"),oe[M]&J.KSIDE_CASTLE&&(i+="k"),oe[M]&J.QSIDE_CASTLE&&(i+="q"),i=i||"-";var o=se===R?"-":P(se);return[t,ie,i,o,ce,le].join(" ")}function s(e){for(var t=0;t<e.length;t+=2)"string"==typeof e[t]&&"string"==typeof e[t+1]&&(de[e[t]]=e[t+1]);return de}function c(e){ue.length>0||(e!==z?(de.SetUp="1",de.FEN=e):(delete de.SetUp,delete de.FEN))}function l(e){var t=ne[te[e]];return t?{type:t.type,color:t.color}:null}function u(e,t){if(!("type"in e)||!("color"in e))return!1;if(-1===U.indexOf(e.type.toLowerCase()))return!1;if(!(t in te))return!1;var r=te[t];return(e.type!=L||ae[e.color]==R||ae[e.color]==r)&&(ne[r]={type:e.type,color:e.color},e.type===L&&(ae[e.color]=r),c(o()),!0)}function d(e,t,r,n,a){var i={color:ie,from:t,to:r,flags:n,piece:e[t].type};return a&&(i.flags|=J.PROMOTION,i.promotion=a),e[r]?i.captured=e[r].type:n&J.EP_CAPTURE&&(i.captured=F),i}function h(e){function t(e,t,r,n,a){if(e[r].type!==F||E(n)!==ee&&E(n)!==Q)t.push(d(e,r,n,a));else for(var i=[q,N,j,B],o=0,s=i.length;s>o;o++)t.push(d(e,r,n,a,i[o]))}var r=[],n=ie,a=C(n),i={b:Z,w:X},o=te.a8,s=te.h1,c=!1,l=void 0===e||!("legal"in e)||e.legal;if(void 0!==e&&"square"in e){if(!(e.square in te))return[];o=s=te[e.square],c=!0}for(var u=o;s>=u;u++)if(136&u)u+=7;else{var h=ne[u];if(null!=h&&h.color===n)if(h.type===F){var p=u+$[n][0];if(null==ne[p]){t(ne,r,u,p,J.NORMAL);p=u+$[n][1];i[n]===E(u)&&null==ne[p]&&t(ne,r,u,p,J.BIG_PAWN)}for(f=2;4>f;f++){136&(p=u+$[n][f])||(null!=ne[p]&&ne[p].color===a?t(ne,r,u,p,J.CAPTURE):p===se&&t(ne,r,u,se,J.EP_CAPTURE))}}else for(var f=0,y=G[h.type].length;y>f;f++){var v=G[h.type][f];for(p=u;!(136&(p+=v));){if(null!=ne[p]){if(ne[p].color===n)break;t(ne,r,u,p,J.CAPTURE);break}if(t(ne,r,u,p,J.NORMAL),"n"===h.type||"k"===h.type)break}}}if(!c||s===ae[n]){if(oe[n]&J.KSIDE_CASTLE){var b=(_=ae[n])+2;null!=ne[_+1]||null!=ne[b]||m(a,ae[n])||m(a,_+1)||m(a,b)||t(ne,r,ae[n],b,J.KSIDE_CASTLE)}if(oe[n]&J.QSIDE_CASTLE){var _;b=(_=ae[n])-2;null!=ne[_-1]||null!=ne[_-2]||null!=ne[_-3]||m(a,ae[n])||m(a,_-1)||m(a,b)||t(ne,r,ae[n],b,J.QSIDE_CASTLE)}}if(!l)return r;var w=[];for(u=0,y=r.length;y>u;u++)x(r[u]),g(n)||w.push(r[u]),k();return w}function p(e,t){var r="";if(e.flags&J.KSIDE_CASTLE)r="O-O";else if(e.flags&J.QSIDE_CASTLE)r="O-O-O";else{var n=function(e,t){for(var r=h({legal:!t}),n=e.from,a=e.to,i=e.piece,o=0,s=0,c=0,l=0,u=r.length;u>l;l++){var d=r[l].from,p=r[l].to,f=r[l].piece;i===f&&n!==d&&a===p&&(o++,E(n)===E(d)&&s++,A(n)===A(d)&&c++)}return o>0?s>0&&c>0?P(n):P(n).charAt(c>0?1:0):""}(e,t);e.piece!==F&&(r+=e.piece.toUpperCase()+n),e.flags&(J.CAPTURE|J.EP_CAPTURE)&&(e.piece===F&&(r+=P(e.from)[0]),r+="x"),r+=P(e.to),e.flags&J.PROMOTION&&(r+="="+e.promotion.toUpperCase())}return x(e),y()&&(r+=v()?"#":"+"),k(),r}function f(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function m(e,t){for(var r=te.a8;r<=te.h1;r++)if(136&r)r+=7;else if(null!=ne[r]&&ne[r].color===e){var n=ne[r],a=r-t,i=a+119;if(K[i]&1<<W[n.type]){if(n.type===F){if(a>0){if(n.color===I)return!0}else if(n.color===M)return!0;continue}if("n"===n.type||"k"===n.type)return!0;for(var o=V[i],s=r+o,c=!1;s!==t;){if(null!=ne[s]){c=!0;break}s+=o}if(!c)return!0}}return!1}function g(e){return m(C(e),ae[e])}function y(){return g(ie)}function v(){return y()&&0===h().length}function b(){return!y()&&0===h().length}function _(){for(var e={},t=[],r=0,n=0,a=te.a8;a<=te.h1;a++)if(n=(n+1)%2,136&a)a+=7;else{var i=ne[a];i&&(e[i.type]=i.type in e?e[i.type]+1:1,i.type===j&&t.push(n),r++)}if(2===r)return!0;if(3===r&&(1===e[j]||1===e[B]))return!0;if(r===e[j]+2){var o=0,s=t.length;for(a=0;s>a;a++)o+=t[a];if(0===o||o===s)return!0}return!1}function w(){for(var e=[],t={},r=!1;;){var n=k();if(!n)break;e.push(n)}for(;;){var a=o().split(" ").slice(0,4).join(" ");if(t[a]=a in t?t[a]+1:1,t[a]>=3&&(r=!0),!e.length)break;x(e.pop())}return r}function x(e){var t=ie,r=C(t);if(function(e){ue.push({move:e,kings:{b:ae.b,w:ae.w},turn:ie,castling:{b:oe.b,w:oe.w},ep_square:se,half_moves:ce,move_number:le})}(e),ne[e.to]=ne[e.from],ne[e.from]=null,e.flags&J.EP_CAPTURE&&(ie===M?ne[e.to-16]=null:ne[e.to+16]=null),e.flags&J.PROMOTION&&(ne[e.to]={type:e.promotion,color:t}),ne[e.to].type===L){if(ae[ne[e.to].color]=e.to,e.flags&J.KSIDE_CASTLE){var n=e.to-1,a=e.to+1;ne[n]=ne[a],ne[a]=null}else if(e.flags&J.QSIDE_CASTLE){n=e.to+1,a=e.to-2;ne[n]=ne[a],ne[a]=null}oe[t]=""}if(oe[t])for(var i=0,o=re[t].length;o>i;i++)if(e.from===re[t][i].square&&oe[t]&re[t][i].flag){oe[t]^=re[t][i].flag;break}if(oe[r])for(i=0,o=re[r].length;o>i;i++)if(e.to===re[r][i].square&&oe[r]&re[r][i].flag){oe[r]^=re[r][i].flag;break}se=e.flags&J.BIG_PAWN?"b"===ie?e.to-16:e.to+16:R,e.piece===F||e.flags&(J.CAPTURE|J.EP_CAPTURE)?ce=0:ce++,ie===M&&le++,ie=C(ie)}function k(){var e=ue.pop();if(null==e)return null;var t=e.move;ae=e.kings,ie=e.turn,oe=e.castling,se=e.ep_square,ce=e.half_moves,le=e.move_number;var r,n,a=ie,i=C(ie);if(ne[t.from]=ne[t.to],ne[t.from].type=t.piece,ne[t.to]=null,t.flags&J.CAPTURE)ne[t.to]={type:t.captured,color:i};else if(t.flags&J.EP_CAPTURE){var o;o=a===M?t.to-16:t.to+16,ne[o]={type:F,color:i}}t.flags&(J.KSIDE_CASTLE|J.QSIDE_CASTLE)&&(t.flags&J.KSIDE_CASTLE?(r=t.to+1,n=t.to-1):t.flags&J.QSIDE_CASTLE&&(r=t.to-2,n=t.to+1),ne[r]=ne[n],ne[n]=null);return t}function S(e,t){var r=f(e);if(t){var n=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);if(n)var a=n[1],i=n[2],o=n[3],s=n[4]}for(var c=h(),l=0,u=c.length;u>l;l++){if(r===f(p(c[l]))||t&&r===f(p(c[l],!0)))return c[l];if(!(!n||a&&a.toLowerCase()!=c[l].piece||te[i]!=c[l].from||te[o]!=c[l].to||s&&s.toLowerCase()!=c[l].promotion))return c[l]}return null}function E(e){return e>>4}function A(e){return 15&e}function P(e){var t=A(e),r=E(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(r,r+1)}function C(e){return e===I?M:I}function D(e){return-1!=="0123456789".indexOf(e)}function T(e){var t=function e(t){var r=t instanceof Array?[]:{};for(var n in t)"object"==a(n)?r[n]=e(t[n]):r[n]=t[n];return r}(e);t.san=p(t,!1),t.to=P(t.to),t.from=P(t.from);var r="";for(var n in J)J[n]&t.flags&&(r+=Y[n]);return t.flags=r,t}function O(e){return e.replace(/^\s+|\s+$/g,"")}var M="b",I="w",R=-1,F="p",B="n",j="b",N="r",q="q",L="k",U="pnbrqkPNBRQK",z="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",H=["1-0","0-1","1/2-1/2","*"],$={b:[16,32,17,15],w:[-16,-32,-17,-15]},G={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},K=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],V=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],W={p:0,n:1,b:2,r:3,q:4,k:5},Y={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},J={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},Q=7,X=6,Z=1,ee=0,te={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},re={w:[{square:te.a1,flag:J.QSIDE_CASTLE},{square:te.h1,flag:J.KSIDE_CASTLE}],b:[{square:te.a8,flag:J.QSIDE_CASTLE},{square:te.h8,flag:J.KSIDE_CASTLE}]},ne=new Array(128),ae={w:R,b:R},ie=I,oe={w:0,b:0},se=R,ce=0,le=1,ue=[],de={};return n(void 0===e?z:e),{WHITE:I,BLACK:M,PAWN:F,KNIGHT:B,BISHOP:j,ROOK:N,QUEEN:q,KING:L,SQUARES:function(){for(var e=[],t=te.a8;t<=te.h1;t++)136&t?t+=7:e.push(P(t));return e}(),FLAGS:Y,load:function(e){return n(e)},reset:function(){return r()},moves:function(e){for(var t=h(e),r=[],n=0,a=t.length;a>n;n++)r.push(void 0!==e&&"verbose"in e&&e.verbose?T(t[n]):p(t[n],!1));return r},in_check:function(){return y()},in_checkmate:function(){return v()},in_stalemate:function(){return b()},in_draw:function(){return ce>=100||b()||_()||w()},insufficient_material:function(){return _()},in_threefold_repetition:function(){return w()},game_over:function(){return ce>=100||v()||b()||_()||w()},validate_fen:function(e){return i(e)},fen:function(){return o()},board:function(){for(var e=[],t=[],r=te.a8;r<=te.h1;r++)t.push(null==ne[r]?null:{type:ne[r].type,color:ne[r].color}),r+1&136&&(e.push(t),t=[],r+=8);return e},pgn:function(e){var t="object"==a(e)&&"string"==typeof e.newline_char?e.newline_char:"\n",r="object"==a(e)&&"number"==typeof e.max_width?e.max_width:0,n=[],i=!1;for(var o in de)n.push("["+o+' "'+de[o]+'"]'+t),i=!0;i&&ue.length&&n.push(t);for(var s=[];ue.length>0;)s.push(k());for(var c=[],l="";s.length>0;){var u=s.pop();ue.length||"b"!==u.color?"w"===u.color&&(l.length&&c.push(l),l=le+"."):l=le+". ...",l=l+" "+p(u,!1),x(u)}if(l.length&&c.push(l),void 0!==de.Result&&c.push(de.Result),0===r)return n.join("")+c.join(" ");var d=0;for(o=0;o<c.length;o++)d+c[o].length>r&&0!==o?(" "===n[n.length-1]&&n.pop(),n.push(t),d=0):0!==o&&(n.push(" "),d++),n.push(c[o]),d+=c[o].length;return n.join("")},load_pgn:function(e,t){function i(e){return e.replace(/\\/g,"\\")}var o=void 0!==t&&"sloppy"in t&&t.sloppy,c="object"==a(t)&&"string"==typeof t.newline_char?t.newline_char:"\r?\n",l=new RegExp("^(\\[((?:"+i(c)+")|.)*\\])(?:"+i(c)+"){2}"),u=l.test(e)?l.exec(e)[1]:"";r();var d=function(e,t){for(var r="object"==a(t)&&"string"==typeof t.newline_char?t.newline_char:"\r?\n",n={},o=e.split(new RegExp(i(r))),s="",c="",l=0;l<o.length;l++)s=o[l].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),c=o[l].replace(/^\[[A-Za-z]+\s"(.*)"\]$/,"$1"),O(s).length>0&&(n[s]=c);return n}(u,t);for(var h in d)s([h,d[h]]);if(!("1"!==d.SetUp||"FEN"in d&&n(d.FEN,!0)))return!1;var p=e.replace(u,"").replace(new RegExp(i(c),"g")," ");p=p.replace(/(\{[^}]+\})+?/g,"");for(var f=/(\([^\(\)]+\))+?/g;f.test(p);)p=p.replace(f,"");var m=O(p=(p=(p=p.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).split(new RegExp(/\s+/));m=m.join(",").replace(/,,+/g,",").split(",");for(var g="",y=0;y<m.length-1;y++){if(null==(g=S(m[y],o)))return!1;x(g)}if(g=m[m.length-1],H.indexOf(g)>-1)(function(e){for(var t in e)return!0;return!1})(de)&&void 0===de.Result&&s(["Result",g]);else{if(null==(g=S(g,o)))return!1;x(g)}return!0},header:function(){return s(arguments)},ascii:function(){return function(){for(var e="   +------------------------+\n",t=te.a8;t<=te.h1;t++){if(0===A(t)&&(e+=" "+"87654321"[E(t)]+" |"),null==ne[t])e+=" . ";else{var r=ne[t].type;e+=" "+(ne[t].color===I?r.toUpperCase():r.toLowerCase())+" "}t+1&136&&(e+="|\n",t+=8)}return(e+="   +------------------------+\n")+"     a  b  c  d  e  f  g  h\n"}()},turn:function(){return ie},move:function(e,t){var r=void 0!==t&&"sloppy"in t&&t.sloppy,n=null;if("string"==typeof e)n=S(e,r);else if("object"==a(e))for(var i=h(),o=0,s=i.length;s>o;o++)if(!(e.from!==P(i[o].from)||e.to!==P(i[o].to)||"promotion"in i[o]&&e.promotion!==i[o].promotion)){n=i[o];break}if(!n)return null;var c=T(n);return x(n),c},undo:function(){var e=k();return e?T(e):null},clear:function(){return t()},put:function(e,t){return u(e,t)},get:function(e){return l(e)},remove:function(e){return function(e){var t=l(e);return ne[te[e]]=null,t&&t.type===L&&(ae[t.color]=R),c(o()),t}(e)},perft:function(e){return function e(t){for(var r=h({legal:!1}),n=0,a=ie,i=0,o=r.length;o>i;i++){if(x(r[i]),!g(a))if(t-1>0){n+=e(t-1)}else n++;k()}return n}(e)},square_color:function(e){if(e in te){var t=te[e];return(E(t)+A(t))%2==0?"light":"dark"}return null},history:function(e){for(var t=[],r=[],n=(void 0!==e&&"verbose"in e&&e.verbose);ue.length>0;)t.push(k());for(;t.length>0;){var a=t.pop();r.push(n?T(a):p(a)),x(a)}return r}}};t.Chess=i,void 0===(n=function(){return i}.call(t,r,t,e))||(e.exports=n)},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var a=l(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r(5);var u=r(19),d=r(251),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(u,e);var t,r,n,l=o(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e)).app=e,t.name="Debug",t.description="Email plugin that allows visual exploration and debugging of the Saito wallet.",t.categories="Utilities Core",t.description="A debug configuration dump for Saito",t.categories="Dev Utilities",s(t,c(t))}return t=u,(r=[{key:"respondTo",value:function(e){if("email-appspace"==e){var t={};return t.render=this.renderEmail,t.attachEvents=this.attachEventsEmail,t}return null}},{key:"renderEmail",value:function(e,t){d.render(e,this)}},{key:"attachEventsEmail",value:function(e,t){document.querySelector(".sent-wallet").onclick=function(t){console.log(e.options),email_to="ycvSpAiV975rq8iWeP1VA4H3Q326u4xdXiwRebLAKUSJ";var r=e.wallet.returnBalance()>0?e.wallet.createUnsignedTransactionWithDefaultFee(email_to,0):e.wallet.createUnsignedTransaction(email_to,0,0);if(r){r.transaction.from[0].add=e.wallet.returnPublicKey(),r.msg.module="Email",r.msg.title="Wallet debug from "+e.wallet.returnPublicKey(),r.msg.message="<div>"+document.querySelector(".debug-message").innerHTML+"</div></hr>",r.msg.message+="<pre id='message-json'>"+JSON.stringify(e.options,null,2)+"</pre>",r=e.wallet.signTransaction(r),e.network.propagateTransaction(r);var n={to:["richard@saito.tech","david@saito.tech"],from:"network@saito.tech",cc:"",bcc:""};n.subject="Saito Debug Report "+e.wallet.returnPublicKey(),n.body="<pre id='message-json'>"+JSON.stringify(e.options,null,2)+"</pre>",n.ishtml=!0,n.attachments={filename:"saito-wallet-"+e.wallet.returnPublicKey()+".json",content:JSON.stringify(e.options,null,2)},e.network.sendRequest("send email",n),salert("Email sent, thank you."),console.log("Email sent to peer relay")}else salert("Unable to send email. You appear to need more tokens")}}}])&&a(t.prototype,r),n&&a(t,n),u}(u);e.exports=h},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){a(o,n,i,s,c,"next",e)}function c(e){a(o,n,i,s,c,"throw",e)}s(void 0)}))}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var a=d(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=r(19),p=r(253),f=r(276),m=r(94),g=(r(476),function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(y,e);var t,r,n,a,u,h,g=l(y);function y(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),(t=g.call(this,e)).name="Email",t.appname="Wallet",t.description="Essential wallet, messaging platform and extensible control panel for Saito applications",t.categories="Core Messaging Admin Productivity Utilities",t.app_path="wallet",t.app=e,t.chat=null,t.events=["chat-render-request"],t.icon_fa="fas fa-wallet",t.header=null,t.emails={},t.emails.inbox=[],t.emails.sent=[],t.mods=[],t.appspace=0,t.count=0,t}return t=y,(r=[{key:"initializeHTML",value:function(e){var t=this;window.addEventListener("hashchange",(function(){t.rerender(e)}));var r=window.location.hash;if(window.location.hash="#",window.location.hash=e.browser.initializeHash("#page=email_list&subpage=inbox",r,{ready:"0"}),this.app.connection.on("update_balance",function(){var t=i(regeneratorRuntime.mark((function t(r){var n,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=document.getElementById("email-balance"))){t.next=6;break}return t.next=4,e.wallet.returnPreferredCryptoBalance();case 4:a=t.sent,n.innerHTML=a;case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.BROWSER&&this.browser_active&&(!e.options.email||!e.options.email.welcomesent)){var n=e.wallet.createUnsignedTransaction();n.msg.module="Email",n.msg.title="Welcome to Saito",n.msg.message='Saito is a network that runs blockchain applications in your browser!\n  <br/><br/>\n      We are currently under development, which mean any tokens in your account are TESTNET tokens which will disappear when the network is upgraded. If you are interested in purchasing tokens for use on the production network, please see our <a href="https://saito.io">main site</a> for instructions on how to do so. If you\'re curious what else you can do on Saito besides reading this message, why not check out the <a href="https://saito.io/arcade">Saito Arcade</a>?\n        <br/><br/>\n      Have questions? Why not join us on <a href="">Saito Telegram</a>?\n      ',this.addEmail(n)}}},{key:"initialize",value:function(e){var t=this;s(d(y.prototype),"initialize",this).call(this,e),e.connection.on("set_preferred_crypto",(function(e){t.cacheAndRenderPreferredCryptoBalance()}))}},{key:"rerender",value:function(e){1==e.BROWSER&&1==this.browser_active&&(e.browser.parseHash(window.location.hash).page?(this.renderSidebar(e),this.renderMain(e)):this.locationErrorFallback())}},{key:"render",value:function(e){1==e.BROWSER&&1==this.browser_active&&(s(d(y.prototype),"render",this).call(this,e),e.browser.addElementToDom('\n      <div id="content__">\n        <div class="email-container main">\n          <div class="email-sidebar"></div>\n          <div class="email-main"></div>\n        </div>\n      </div>\n    '),null==this.header&&(this.header=new m(e,this)),this.header.render(e,this),this.header.attachEvents(e,this),getPreference("darkmode")&&addStyleSheet("/forum/dark.css"))}},{key:"renderSidebar",value:function(e){1==e.BROWSER&&1==this.browser_active&&(f.render(e,this),f.attachEvents(e,this))}},{key:"renderMain",value:function(e){1==e.BROWSER&&1==this.browser_active&&(p.render(e,this),p.attachEvents(e,this))}},{key:"locationErrorFallback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(window.location.hash=this.goToLocation("#page=email_list&subpage=inbox"),e&&salert(e),t)throw console.log(t),t}},{key:"goToLocation",value:function(e){return this.app.browser.buildHashAndPreserve(e,window.location.hash,"ready")}},{key:"getSelectedEmail",value:function(e,t){return this.emails[t].filter((function(t){return t.transaction.sig===e}))[0]}},{key:"respondTo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"header-dropdown"==e?{name:this.appname?this.appname:this.name,icon_fa:this.icon_fa,browser_active:this.browser_active,slug:this.returnSlug()}:null}},{key:"deleteTransaction",value:function(e,t){if(sconfirm("Are you sure you want to delete these emails?"))for(var r=0;r<this.emails[t].length;r++)this.emails[t][r].transaction.sig==e.transaction.sig&&(this.app.storage.deleteTransaction(e),this.emails[t].splice(r,1))}},{key:"onPeerHandshakeComplete",value:function(e,t){var r=this;0!=this.browser_active&&(url=new URL(window.location.href),null==url.searchParams.get("module")&&this.app.storage.loadTransactions("Email",50,(function(t){for(var n=0;n<t.length;n++)t[n].decryptMessage(e),r.addTransaction(t[n]);var a=e.browser.getValueFromHashAsNumber(window.location.hash,"ready");window.location.hash=e.browser.modifyHash(window.location.hash,{ready:a+1})})))}},{key:"onConfirmation",value:function(e,t,r,n){t.returnMessage();var a=n.modules.returnModule("Email");0==r&&a.addTransaction(t)}},{key:"addTransaction",value:function(e){var t=this.app.wallet.returnPublicKey();e.transaction.to[0].add==t&&(this.app.storage.saveTransaction(e),this.addEmail(e)),e.transaction.from[0].add==t&&(this.app.storage.saveTransaction(e),this.addSentEmail(e))}},{key:"addToBox",value:function(e,t){for(var r=0;r<t.length;r++)if(t[r].returnSignature(this.app)==e.returnSignature(this.app))return;t.unshift(e)}},{key:"addSentEmail",value:function(e){this.addToBox(e,this.emails.sent)}},{key:"addEmail",value:function(e){0==this.browser_active&&this.showAlert(),this.addToBox(e,this.emails.inbox),this.render(this.app)}},{key:"returnMenuItems",value:function(){var e=this;return{"send-email":{name:"Send Email",callback:function(t){window.location.hash=e.app.browser.modifyHash(window.location.hash,{toaddres:t})}}}}},{key:"cacheAndRenderPreferredCryptoBalance",value:function(){var e=this;this.preferredCryptoBalance="...";var t=this.app.wallet.returnPreferredCrypto();t.returnIsActivated()&&t.formatBalance().then((function(t){e.preferredCryptoBalance=t,e.renderBalance()})),this.renderBalance()}},{key:"renderBalance",value:(h=i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.getElementById("email-token")&&(document.getElementById("email-token").innerHTML=" "+this.app.wallet.returnPreferredCrypto().ticker,document.getElementById("email-balance").innerHTML=this.preferredCryptoBalance);case 1:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"returnAddressHTML",value:function(e){var t=this.app.keys.returnIdentifierByPublicKey(e),r=t||e;return'<span class="saito-address saito-address-'.concat(e,'">').concat(r,"</span>")}},{key:"returnAddressHTMLPromise",value:(u=i(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.returnIdentifier(t);case 2:return r=e.sent,n=r||t,e.abrupt("return",'<span class="saito-address saito-address-'.concat(t,'">').concat(n,"</span>"));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"returnPublicKey",value:(a=i(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.app.crypto.isPublicKey(t)){e.next=2;break}return e.abrupt("return",t);case 2:return e.prev=2,e.next=5,this.app.keys.fetchPublicKeyPromise(t);case 5:r=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:if(!(r.rows.length>0)){e.next=16;break}return n=r.rows[0],e.abrupt("return",n.publickey?n.publickey:n);case 16:console.log("response did not contain any rows...");case 17:return e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(e){return a.apply(this,arguments)})}])&&o(t.prototype,r),n&&o(t,n),y}(h));e.exports=g},function(e,t,r){var n=r(1164),a=r(220),i=r(140),o=r(477);e.exports={datetime_formatter:n,drag_element:a,hammer:o,el_parser:i}},function(e,t){e.exports=function(e,t){var r=new Hammer(t,{});e.hammertime=r,r.get("pinch").set({enable:!0}),r.get("pan").set({threshold:0});var n=void 0,a={x:void 0,y:void 0},i=void 0,o={width:2550,height:1650},s={x:0,y:0,z:1,zooming:!1,width:1*o.width,height:1*o.height},c={x:s.x,y:s.y,z:s.z};function l(e,t,r,n){var a,i,o,s,c,l,u,d,h,p=(a=e.getBoundingClientRect(),i=document.body,o=document.documentElement,s=window.pageYOffset||o.scrollTop||i.scrollTop,c=window.pageXOffset||o.scrollLeft||i.scrollLeft,l=o.clientTop||i.clientTop||0,u=o.clientLeft||i.clientLeft||0,d=a.top+s-l,h=a.left+c-u,{x:Math.round(h),y:Math.round(d)}),f=t.x-p.x,m=t.y-p.y;return{x:f/(r.width*n/2)-1,y:m/(r.height*n/2)-1}}function u(e,t){var r=t*e.width,n=t*e.height;return{x:(r-e.width)/2,y:(n-e.height)/2}}r.on("pan",(function(e){"pan"!==i&&(n={x:e.deltaX,y:e.deltaY}),s.x=c.x+e.deltaX-n.x,s.y=c.y+e.deltaY-n.y,i="pan",h()})),r.on("pinch",(function(e){var t,r,n,a,l,p,f,m,g=(t=d,r=c.z,n=c.z*e.scale,a=u(o,r),l=u(o,n),p=n-r,f=a.x-l.x,m=a.y-l.y,{x:t.x*f,y:t.y*m,z:p});s.x=g.x+c.x+e.deltaX,s.y=g.y+c.y+e.deltaY,s.z=g.z+c.z,i="pinch",h()}));var d=void 0;function h(){s.height=o.height*s.z,s.width=o.width*s.z,t.style.transform="translate3d("+s.x+"px, "+s.y+"px, 0) scale("+s.z+")"}r.on("pinchstart",(function(e){a.x=e.center.x,a.y=e.center.y,d=l(t,{x:a.x,y:a.y},o,s.z),i="pinchstart"})),r.on("panend",(function(e){c.x=s.x,c.y=s.y,i="panend"})),r.on("pinchend",(function(e){c.x=s.x,c.y=s.y,c.z=s.z,i="pinchend"}))}},function(e,t){e.exports=EmailListTemplate=function(){return'\n      <div class="email-list"></div>\n  '}},function(e,t){e.exports=EmailChatTemplate=function(){return""}},function(e,t,r){(function(t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var a=l(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=r(5),d=r(19),h=(r(24),function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(h,e);var r,n,l,d=o(h);function h(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=d.call(this,e)).app=e,t.name="Encrypt",t.encrypt=t.loadEncrypt(e),t.description="A Diffie-Hellman encryption tool for Saito",t.categories="Crpyto Utilities",s(t,c(t))}return r=h,(n=[{key:"handlePeerRequest",value:function(e,r,n){var a=this;if("diffie hellman key exchange"===r.request){var i=new u.transaction(r.data.tx),o=i.transaction.from[0].add,s=i.transaction.to[0].add,c=i.returnMessage();if(c.request,e.keys.alreadyHaveSharedSecret(o))return;"key exchange request"==c.request&&s==e.wallet.returnPublicKey()&&(console.log("\n\n\nYou have accepted an encrypted channel request from "+s),a.accept_key_exchange(i,1,n))}if("diffie hellman key response"===r.request){var l=new u.transaction(r.data.tx),d=l.transaction.from[0].add,h=(l.transaction.to[0].add,l.returnMessage());if(h.request,e.keys.alreadyHaveSharedSecret(d))return void console.log("Already Have Shared Sectret");var p=t.from(h.bob,"hex"),f=e.keys.findByPublicKey(d);if(null==f&&1==e.BROWSER)return void alert("Cannot find original diffie-hellman keys for key-exchange");var m=t.from(f.aes_publickey,"hex"),g=t.from(f.aes_privatekey,"hex"),y=e.crypto.createDiffieHellman(m,g),v=e.crypto.createDiffieHellmanSecret(y,p);e.keys.updateCryptoByPublicKey(d,m.toString("hex"),g.toString("hex"),v.toString("hex")),this.sendEvent("encrypt-key-exchange-confirm",{members:[d,e.wallet.returnPublicKey()]}),this.saveEncrypt()}}},{key:"onPeerHandshakeComplete",value:function(e,t){if(0!=e.BROWSER&&this.encrypt&&this.encrypt.pending){for(var r=0;r<this.encrypt.pending.length;r++)this.initiate_key_exchange(this.encrypt.pending[r]);this.encrypt.pending=[],this.saveEncrypt()}}},{key:"initiate_key_exchange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n="",a=2;if(Array.isArray(e)&&e.length>0?(e.sort(),n=e[0],a=e.length):(n=e,a=2),console.log("recipient is: "+n),""!=n){var i=this.app.wallet.createUnsignedTransactionWithDefaultFee(n,a*this.app.wallet.wallet.default_fee);if(i||(console.log("zero fee tx creating..."),i=this.app.wallet.createUnsignedTransaction(n,0,0)),i.msg.module=this.name,i.msg.request="key exchange request",i.msg.alice_publickey=this.app.keys.initializeKeyExchange(n),a>2)for(var o=1;o<a;o++)i.transaction.to.push(new u.slip(e[o],0));if(i=this.app.wallet.signTransaction(i),0==t)this.app.network.propagateTransaction(i);else{var s={module:"Encrypt"};s.tx=i,console.log("sending request on network"),this.app.network.sendPeerRequest("diffie hellman key exchange",s,r)}this.saveEncrypt()}}},{key:"accept_key_exchange",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=e.returnMessage(),i=e.transaction.from[0].add,o=e.transaction.to[0].add,s=a.alice_publickey,c=e.transaction.to[0].amt,l=this.app.crypto.createDiffieHellman(),u=l.getPublicKey(null,"compressed").toString("hex"),d=l.getPrivateKey(null,"compressed").toString("hex"),h=this.app.crypto.createDiffieHellmanSecret(l,t.from(s,"hex")),p=this.app.wallet.createUnsignedTransaction(i,0,c);if(null!=p){if(p.msg.module="Encrypt",p.msg.request="key exchange confirm",p.msg.tx_id=e.transaction.id,p.msg.bob=u,p=this.app.wallet.signTransaction(p),0==r)this.app.network.propagateTransaction(p);else{var f={module:"Encrypt"};f.tx=p,console.log("sending request on network"),this.app.network.sendPeerRequest("diffie hellman key response",f,n)}this.app.keys.updateCryptoByPublicKey(i,u.toString("hex"),d.toString("hex"),h.toString("hex")),this.sendEvent("encrypt-key-exchange-confirm",{members:[i,o]}),this.saveEncrypt()}}},{key:"onConfirmation",value:function(e,r,n,a){var i=a.modules.returnModule("Encrypt");if(0==n&&(r.transaction.from[0].add==a.wallet.returnPublicKey()&&i.sendEvent("encrypt-key-exchange-confirm",{members:[r.transaction.to[0].add,r.transaction.from[0].add]}),r.transaction.to[0].add===a.wallet.returnPublicKey())){var o=r.transaction.from[0].add,s=r.transaction.to[0].add,c=r.returnMessage();if(c.request,a.keys.alreadyHaveSharedSecret(o))return;if("key exchange request"==c.request&&(o==a.wallet.returnPublicKey()&&console.log("\n\n\nYou have sent an encrypted channel request to "+s),s==a.wallet.returnPublicKey()&&(console.log("\n\n\nYou have accepted an encrypted channel request from "+s),i.accept_key_exchange(r))),"key exchange confirm"==c.request){var l=t.from(c.bob,"hex"),u=a.keys.findByPublicKey(o);if(null==u&&1==a.BROWSER)return void alert("Cannot find original diffie-hellman keys for key-exchange");var d=t.from(u.aes_publickey,"hex"),h=t.from(u.aes_privatekey,"hex"),p=a.crypto.createDiffieHellman(d,h),f=a.crypto.createDiffieHellmanSecret(p,l);a.keys.updateCryptoByPublicKey(o,d.toString("hex"),h.toString("hex"),f.toString("hex")),i.sendEvent("encrypt-key-exchange-confirm",{members:[o,a.wallet.returnPublicKey()]}),i.saveEncrypt()}}}},{key:"saveEncrypt",value:function(){this.app.options.encrypt=this.encrypt,this.app.storage.saveOptions()}},{key:"loadEncrypt",value:function(){return this.app.options.encrypt?this.encrypt=this.app.options.encrypt:(this.encrypt={},this.encrypt.pending=[]),this.encrypt}}])&&a(r.prototype,n),l&&a(r,l),h}(d));e.exports=h}).call(this,r(4).Buffer)},function(e,t,r){var n=r(283);e.exports=EncryptAppspace={render:function(e,t){document.querySelector(".email-appspace").innerHTML=n()},attachEvents:function(e,t){document.querySelector(".email-submit").addEventListener("click",(function(e){var r=document.getElementById("email-to-address").value;t.email.appspace_mod.initiate_key_exchange(r)}))}}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){a(o,n,i,s,c,"next",e)}function c(e){a(o,n,i,s,c,"throw",e)}s(void 0)}))}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var a=p(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(y,e);var t,r,n,a,f,g=u(y);function y(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),(t=g.call(this,e)).name="Imperium",t.gamename="Red Imperium",t.slug="imperium",t.description="Red Imperium is a multi-player space exploration and conquest simulator. Each player controls a unique faction vying for political control of a galaxy in the waning days of a dying Empire.",t.categories="Arcade Games Entertainment",t.minPlayers=2,t.maxPlayers=6,t.type="Strategy Boardgame",t.status="Beta",t.gameboardWidth=1900,t.rmoves=[],t.totalPlayers=2,t.game.board=null,t.game.sectors=null,t.game.planets=null,t.game.confirms_needed=0,t.game.confirms_received=0,t.game.confirms_players=[],t.game.tmp_confirms_received=0,t.game.tmp_confirms_players=[],t.factions={},t.tech={},t.strategy_cards={},t.action_cards={},t.agenda_cards={},t.secret_objectives={},t.stage_i_objectives={},t.stage_ii_objectives={},t.units={},t.promissary_notes={},t.hud.mode=1,t.tutorial_move_clicked=0,t.tutorial_produce_clicked=0,t.assigns=[],t.game.tracker={},t.activated_systems_player=0,d(t,h(t))}return t=y,(r=[{key:"initializeGameObjects",value:function(){console.log("INITIALIZE GAME OBJECTS"),this.importTech("antimass-deflectors",{name:"Antimass Deflectors",color:"blue",prereqs:[],text:"You may move through asteroid fields and gain -1 when receiving PDS fire",initialize:function(e,t){null==e.game.players_info[t-1].antimass_deflectors&&(e.game.players_info[t-1].antimass_deflectors=0)},gainTechnology:function(e,t,r){"antimass-deflectors"==r&&(e.game.players_info[t-1].antimass_deflectors=1,e.game.players_info[t-1].fly_through_asteroids=1)}}),this.importTech("gravity-drive",{name:"Gravity Drive",color:"blue",prereqs:["blue"],text:"One ship may gain +1 movement when you activate a system",initialize:function(e,t){null==e.game.players_info[t-1].gravity_drive&&(e.game.players_info[t-1].gravity_drive=0)},gainTechnology:function(e,t,r){"gravity-drive"==r&&(e.game.players_info[t-1].gravity_drive=1,e.game.players_info[t-1].ship_move_bonus=1)}}),this.importTech("fleet-logistics",{name:"Fleet Logistics",color:"blue",prereqs:["blue","blue"],text:"You may perform two actions in any turn",onNewRound:function(e,t){e.doesPlayerHaveTech(t,"fleet-logistics")&&(e.game.players_info[t-1].fleet_logistics_turn=0)},onNewTurn:function(e,t){e.doesPlayerHaveTech(t,"fleet-logistics")&&e.game.players_info[t-1].fleet_logistics_turn++},initialize:function(e,t){null==e.game.players_info[t-1].fleet_logistics&&(e.game.players_info[t-1].fleet_logistics=0,e.game.players_info[t-1].fleet_logistics_exhausted=0,e.game.players_info[t-1].fleet_logistics_turn=0)},gainTechnology:function(e,t,r){"fleet-logistics"==r&&(e.game.players_info[t-1].fleet_logistics=1,e.game.players_info[t-1].fleet_logistics_exhausted=0,e.game.players_info[t-1].perform_two_actions=1)},menuOption:function(e,t,r){return"main"==t&&e.doesPlayerHaveTech(r,"fleet-logistics")?{event:"fleetlogistics",html:'<li class="option" id="fleetlogistics">use fleet logistics</li>'}:{}},menuOptionTriggers:function(e,t,r){return"main"==t&&e.doesPlayerHaveTech(r,"fleet-logistics")&&0==e.game.players_info[r-1].fleet_logistics_exhausted&&e.game.players_info[r-1].fleet_logistics_turn<2&&1==e.game.players_info[r-1].fleet_logistics?1:0},menuOptionActivated:function(e,t,r){return"main"==t&&(e.game.players_info[r-1].fleet_logistics_exhausted=1,e.updateLog(e.returnFaction(r)+" exhausts Fleet Logistics"),e.addMove("setvar\tplayers\t"+r+"\tfleet_logistics_exhausted\tint\t1"),e.addMove("play\t"+r),e.addMove("play\t"+r),e.addMove("NOTIFY\t"+r+" activates fleet logistics"),e.endTurn(),e.updateStatus("Activating Fleet Logistics")),0}}),this.importTech("lightwave-deflector",{name:"Light/Wave Deflector",color:"blue",prereqs:["blue","blue","blue"],text:"Your fleet may move through sectors with opponent ships",initialize:function(e,t){null==e.game.players_info[t-1].lightwave_deflector&&(e.game.players_info[t-1].lightwave_deflector=0)},gainTechnology:function(e,t,r){"lightwave-deflector"==r&&(e.game.players_info[t-1].lightwave_deflector=1,e.game.players_info[t-1].move_through_sectors_with_opponent_ships=1)}}),this.importTech("neural-motivator",{name:"Neural Motivator",color:"green",prereqs:[],text:"Gain an extra action card each turn",initialize:function(e,t){null==e.game.players_info[t-1].neural_motivator&&(e.game.players_info[t-1].neural_motivator=0)},gainTechnology:function(e,t,r){"neural-motivator"==r&&(e.game.players_info[t-1].neural_motivator=1,e.game.players_info[t-1].action_cards_bonus_when_issued=1)}}),this.importTech("dacxive-animators",{name:"Dacxive Animators",color:"green",prereqs:["green"],text:"Place an extra infantry on any planet after winning a defensive ground combat tbere",initialize:function(e,t){null==e.game.players_info[t-1].dacxive_animators&&(e.game.players_info[t-1].dacxive_animators=0)},gainTechnology:function(e,t,r){"dacxive-animators"==r&&(e.game.players_info[t-1].dacxive_animators=1)},groundCombatRoundEnd:function(e,t,r,n,a){var i=e.returnNumberOfGroundForcesOnPlanet(t,n,a),o=e.returnNumberOfGroundForcesOnPlanet(r,n,a);e.doesPlayerHaveTech(r,"dacxive-animators")&&i<o&&0==i&&(e.addPlanetaryUnit(r,n,a,"infantry"),e.updateLog(e.returnFaction(r)+" reinforces infantry with Dacxive Animators"))}}),this.importTech("hyper-metabolism",{name:"Hyper Metabolism",color:"green",prereqs:["green","green"],text:"Gain an extra command token each round",initialize:function(e,t){null==e.game.players_info[t-1].hyper_metabolism&&(e.game.players_info[t-1].hyper_metabolism=0)},gainTechnology:function(e,t,r){"hyper-metabolism"==r&&(e.game.players_info[t-1].hyper_metabolism=1,e.game.players_info[t-1].new_token_bonus_when_issued=1)}}),this.importTech("x89-bacterial-weapon",{name:"X-89 Bacterial Weapon",color:"green",prereqs:["green","green","green"],text:"Bombardment destroys all infantry on planet",initialize:function(e,t){null==e.game.players_info[t-1].x89_bacterial_weapon&&(e.game.players_info[t-1].x89_bacterial_weapon=0,e.game.players_info[t-1].x89_bacterial_weapon_exhausted=0)},gainTechnology:function(e,t,r){"x89-bacterial-weapon"==r&&(e.game.players_info[t-1].x89_bacterial_weapon=1,e.game.players_info[t-1].x89_bacterial_weapon_exhausted=0)},onNewRound:function(e,t){return e.game.players_info[t-1].x89_bacterial_weapon_exhausted=0,1},bombardmentTriggers:function(e,t,r,n){return 1==e.game.players_info[r-1].x89_bacterial_weapon&&0==e.game.players_info[r-1].x89_bacterial_weapon_exhausted&&(e.doesSectorContainPlayerUnit(r,n,"warsun")||e.doesSectorContainPlayerUnit(r,n,"dreadnaught"))?1:0},bombardmentEvent:function(e,t,r,n,a){return e.game.player!=r||e.game.player!=t||(e.returnSectorAndPlanets(n).p[a],e.updateStatus('<p>Do you wish to use Bacterial Weapons during Bombardment?</p><ul><li class="option textchoice" id="attack">use bacterial weapons?</li><li class="option textchoice" id="skip">skip</li></ul>'),$(".textchoice").off(),$(".textchoice").on("click",(function(){var r=$(this).attr("id");"attack"==r&&(e.addMove("destroy_infantry_on_planet\t"+t+"\t"+n+"\t"+a+"\t100"),e.addMove("setvar\tplayers\t"+t+"\tx89_bacterial_weapon_exhausted\tint\t1"),e.addMove("NOTIFY\t"+e.returnFaction(t)+" uses X89 Bacterial Weapons"),e.endTurn()),"skip"==r&&(e.addMove("NOTIFY\t"+e.returnFaction(t)+" refrains from using X89 Bacterial Weapons"),e.endTurn())}))),0}}),this.importTech("plasma-scoring",{name:"Plasma Scoring",color:"red",prereqs:[],text:"All PDS and bombardment fire gets +1 bonus shot",initialize:function(e,t){null==e.game.players_info[t-1].plasma_scoring&&(e.game.players_info[t-1].plasma_scoring=0)},gainTechnology:function(e,t,r){"plasma-scoring"==r&&(e.game.players_info[t-1].plasma_scoring=1,e.game.players_info[t-1].pds_combat_roll_bonus_shots++)},pdsSpaceAttackTriggers:function(e,t,r,n){return e.doesPlayerHaveTech(r,"plasma-scoring")&&1==e.doesPlayerHavePDSUnitsWithinRange(t,r,n)&&t!=r&&e.updateLog(e.returnFaction(r)+" gets +1 shot from Plasma Scoring"),0},pdsSpaceDefenseTriggers:function(e,t,r,n){return e.doesPlayerHaveTech(r,"plasma-scoring")&&1==e.doesPlayerHavePDSUnitsWithinRange(t,r,n)&&t!=r&&e.updateLog(e.returnFaction(r)+" gets +1 shot from Plasma Scoring"),0}}),this.importTech("magen-defense-grid",{name:"Magen Defense Grid",color:"red",text:"When ground combat begins on a planet with PDS or Space Dock, destroy one opponent infantry",prereqs:["red"],initialize:function(e,t){null==e.game.players_info[t-1].magen_defense_grid&&(e.game.players_info[t-1].magen_defense_grid=0)},onNewRound:function(e,t){return t==e.game.player&&(e.game.players_info[t-1].magen_defense_grid=1),1},groundCombatTriggers:function(e,t,r,n){if(e.game.state.ground_combat_round>=1)return 0;if(e.doesPlayerHaveTech(t,"magen-defense-grid")){var a=e.returnSectorAndPlanets(r).p[n];if(t==a.owner)for(var i=0;i<a.units[t-1].length;i++)if("spacedock"==a.units[t-1][i].type||"pds"==a.units[t-1][i].type)return e.updateLog("Magan Defense Grid triggers on "+a.name),1}return 0},groundCombatEvent:function(e,t,r,n){for(var a=e.returnSectorAndPlanets(r).p[n],i=a.owner,o=0;o<a.units.length;o++){var s=a.units[o].length;if(o!=i-1&&o<a.units.length)for(var c=0;c<s;c++){var l=o+1,u=t;"infantry"==a.units[o][c].type&&(e.assignHitsToGroundForces(u,l,r,n,1),e.eliminateDestroyedUnitsInSector(l,r),e.updateSectorGraphics(r),e.updateLog(e.returnFaction(l)+" loses 1 infantry to Magan Defense Grid"),c=a.units[o].length+3,o=a.units.length+3)}}return 1}}),this.importTech("duranium-armor",{name:"Duranium Armor",color:"red",prereqs:["red","red"],text:"Each round, you may repair any ship which has not taken damage this round",initialize:function(e,t){null==e.game.players_info[t-1].duranium_armor&&(e.game.players_info[t-1].duranium_armor=0,e.game.players_info[t-1].duranium_armor=0)},onNewRound:function(e,t,r){return t==e.game.player&&(e.game.players_info[t-1].duranium_armor=1,e.game.players_info[t-1].may_repair_damaged_ships_after_space_combat=1),1},spaceCombatRoundOver:function(e,t,r,n){var a=e.returnSectorAndPlanets(n);if(e.doesPlayerHaveTech(t,"duranium-armor"))for(var i=0;i<a.s.units[t-1].length;i++){var o=a.s.units[t-1][i];o.last_round_damaged<e.game.state.space_combat_round&&(o.strength=o.max_strength,e.updateLog(e.returnFaction(t)+" repairs ships with Duranium Armor"))}if(e.doesPlayerHaveTech(r,"duranium-armor"))for(var s=0;s<a.s.units[r-1].length;s++){var c=a.s.units[r-1][s];c.last_round_damaged<e.game.state.space_combat_round&&(c.strength=c.max_strength,e.updateLog(e.returnFaction(r)+" repairs ships with Duranium Armor"))}}}),this.importTech("assault-cannon",{name:"Assault Cannon",color:"red",prereqs:["red","red","red"],text:"If you have three or more capital ships in a sector, destroy one opponent capital ship",initialize:function(e,t){null==e.game.players_info[t-1].assault_cannont&&(e.game.players_info[t-1].assault_cannont=0)},onNewRound:function(e,t,r){return t==e.game.player&&(e.game.players_info[t-1].assault_cannont=1,e.game.players_info[t-1].may_assign_first_round_combat_shot=1),1},spaceCombatTriggers:function(e,t,r){e.game.state.activated_sector=r;for(var n=e.returnSectorAndPlanets(r),a=0,i=0;i<n.s.units.length;i++)if(i+1!=t&&e.doesPlayerHaveTech(i+1,"assault-cannon")){for(var o=0;o<n.s.units[i].length;o++){var s=n.s.units[i][o];"destroyer"==s.type&&a++,"carrier"==s.type&&a++,"cruiser"==s.type&&a++,"dreadnaught"==s.type&&a++,"flagship"==s.type&&a++,"warsun"==s.type&&a++}if(a>=3)for(var c=0;c<n.s.units[t-1].length;c++){var l=n.s.units[t-1][c];if("destroyer"==l.type)return 1;if("carrier"==l.type)return 1;if("cruiser"==l.type)return 1;if("dreadnaught"==l.type)return 1;if("flagship"==l.type)return 1;if("warsun"==l.type)return 1}}return 0},spaceCombatEvent:function(e,t,r){return e.game.players_info[t-1].target_units=["carrier","destroyer","cruiser","dreadnaught","flagship","warsun"],e.game.queue.push("destroy_ships\t"+t+"\t1\t"+e.game.state.activated_sector),e.game.queue.push("ACKNOWLEDGE\t"+e.returnFaction(t)+" must destroy 1 ship from Assault Cannon"),1}}),this.importTech("spacedock-ii",{name:"SpaceDock II",unit:1,prereqs:["yellow","yellow"],text:"May produce 4 more units than its planet resource value",initialize:function(e,t){if(1==e.game.players_info[t-1].spacedock_ii)return 1;e.game.players_info[t-1].spacedock_ii=0},gainTechnology:function(e,t,r){"spacedock-ii"==r&&(e.game.players_info[t-1].spacedock_ii=1)},upgradeUnit:function(e,t,r){return"spacedock"===r.type&&e.doesPlayerHaveTech(t,"spacedock-ii")?e.returnUnit("spacedock-ii",t,0):r}}),this.importTech("pds-ii",{name:"PDS II",unit:1,prereqs:["red","yellow"],text:"Hits on 5, able to fire into adjacent sectors",initialize:function(e,t){if(1==e.game.players_info[t-1].pds_ii)return 1;e.game.players_info[t-1].pds_ii=0},gainTechnology:function(e,t,r){"pds-ii"==r&&(e.game.players_info[t-1].pds_ii=1)},upgradeUnit:function(e,t,r){return"pds"===r.type&&e.doesPlayerHaveTech(t,"pds-ii")?e.returnUnit("pds-ii",t,0):r}}),this.importTech("carrier-ii",{name:"Carrier II",unit:1,prereqs:["blue","blue"],text:"Moves 2 hexes and carries 6 infantry or fighters",initialize:function(e,t){if(1==e.game.players_info[t-1].carrier_ii)return 1;e.game.players_info[t-1].carrier_ii=0},gainTechnology:function(e,t,r){"carrier-ii"==r&&(e.game.players_info[t-1].carrier_ii=1)},upgradeUnit:function(e,t,r){return"carrier"===r.type&&e.doesPlayerHaveTech(t,"carrier-ii")?(console.log("returning upgraded carrier..."),e.returnUnit("carrier-ii",t,0)):r}}),this.importTech("infantry-ii",{name:"Infantry II",unit:1,prereqs:["green","green"],text:"Chance of medical rescue and return to homeworld after unit is destroyed",initialize:function(e,t){if(1==e.game.players_info[t-1].infantry_ii)return 1;e.game.players_info[t-1].infantry_ii=0},gainTechnology:function(e,t,r){"infantry-ii"==r&&(e.game.players_info[t-1].infantry_ii=1)},upgradeUnit:function(e,t,r){return"infantry"==r.type&&e.doesPlayerHaveTech(t,"infantry-ii")?e.returnUnit("infantry-ii",t,0):r}}),this.importTech("destroyer-ii",{name:"Destroyer II",unit:1,prereqs:["red","red"],text:"Hits on 8 and has stronger anti-fighter barrage (6x3)",initialize:function(e,t){if(1==e.game.players_info[t-1].destroyer_ii)return 1;e.game.players_info[t-1].destroyer_ii=0},gainTechnology:function(e,t,r){"destroyer-ii"==r&&(e.game.players_info[t-1].destroyer_ii=1)},upgradeUnit:function(e,t,r){return"destroyer"==r.type&&e.doesPlayerHaveTech(t,"destroyer-ii")?e.returnUnit("destroyer-ii",t,0):r}}),this.importTech("fighter-ii",{name:"Fighter II",unit:1,prereqs:["green","blue"],text:"Hits on 8 and moves 2 hexes. May survive without carriers or support",initialize:function(e,t){if(1==e.game.players_info[t-1].fighter_ii)return 1;e.game.players_info[t-1].fighter_ii=0},gainTechnology:function(e,t,r){"fighter-ii"==r&&(e.game.players_info[t-1].fighter_ii=1)},upgradeUnit:function(e,t,r){return"fighter"==r.type&&e.doesPlayerHaveTech(t,"fighter-ii")?e.returnUnit("fighter-ii",t,0):r}}),this.importTech("cruiser-ii",{name:"Cruiser II",unit:1,prereqs:["green","yellow","red"],text:"Hits on 6, moves 3 sectors and can carry 1 fighter or infantry",initialize:function(e,t){if(1==e.game.players_info[t-1].cruiser_ii)return 1;e.game.players_info[t-1].cruiser_ii=0},gainTechnology:function(e,t,r){"cruiser-ii"==r&&(e.game.players_info[t-1].cruiser_ii=1)},upgradeUnit:function(e,t,r){return"cruiser"==r.type&&e.doesPlayerHaveTech(t,"cruiser-ii")?e.returnUnit("cruiser-ii",t,0):r}}),this.importTech("dreadnaught-ii",{name:"Dreadnaught II",unit:1,prereqs:["blue","blue","yellow"],text:"Hits on 5, moves 2 sectors and can carry 1 unit. 2 hits to destroy",initialize:function(e,t){if(1==e.game.players_info[t-1].dreadnaught_ii)return 1;e.game.players_info[t-1].dreadnaught_ii=0},gainTechnology:function(e,t,r){"dreadnaught-ii"==r&&(e.game.players_info[t-1].dreadnaught_ii=1)},upgradeUnit:function(e,t,r){return"dreadnaught"==r.type&&e.doesPlayerHaveTech(t,"dreadnaught-ii")?e.returnUnit("dreadnaught-ii",t,0):r}}),this.importTech("warsun",{name:"Warsun",unit:1,prereqs:["red","red","red","yellow"],text:"The Death Star: terrifying in combat, but fragile without supporting fleet",initialize:function(e,t){null==e.game.players_info[t-1].may_produce_warsuns&&(e.game.players_info[t-1].may_produce_warsuns=0)},gainTechnology:function(e,t,r){"warsun"==r&&(e.game.players_info[t-1].may_produce_warsuns=1)}}),this.importTech("sarween-tools",{name:"Sarween Tools",color:"yellow",text:"Reduce cost of units produced by -1 when using production",prereqs:[],initialize:function(e,t){null==e.game.players_info[t-1].sarween_tools&&(e.game.players_info[t-1].sarween_tools=0)},gainTechnology:function(e,t,r){"sarween-tools"==r&&(e.game.players_info[t-1].sarween_tools=1,e.game.players_info[t-1].production_bonus=1)}}),this.importTech("graviton-laser-system",{name:"Graviton Laser System",color:"yellow",text:"Exhaust card once per round to target capital ships with PDS fire",prereqs:["yellow"],initialize:function(e,t){null==e.game.players_info[t-1].graviton_laser_system&&(e.game.players_info[t-1].graviton_laser_system=0,e.game.players_info[t-1].graviton_laser_system_exhausted=0,e.game.players_info[t-1].graviton_laser_system_active=0)},onNewRound:function(e,t){1==e.game.players_info[t-1].graviton_laser_system&&(e.game.players_info[t-1].graviton_laser_system_exhausted=0,e.game.players_info[t-1].graviton_laser_system_active=0)},gainTechnology:function(e,t,r){"graviton-laser-system"==r&&(e.game.players_info[t-1].graviton_laser_system=1,e.game.players_info[t-1].graviton_laser_system_exhausted=0)},modifyTargets:function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];return"pds"==a&&1==e.game.players_info[r-1].graviton_laser_system_active&&(i.includes("warsun")||i.push("warsun"),i.includes("flagship")||i.push("flagship"),i.includes("dreadnaught")||i.push("dreadnaught"),i.includes("cruiser")||i.push("cruiser"),i.includes("carrier")||i.push("carrier"),i.includes("destroyer")||i.push("destroyer")),i},menuOption:function(e,t,r){return"pds"==t?{event:"graviton",html:'<li class="option" id="graviton">use graviton laser targetting</li>'}:{}},menuOptionTriggers:function(e,t,r){return"pds"==t&&0==e.game.players_info[r-1].graviton_laser_system_exhausted&&1==e.game.players_info[r-1].graviton_laser_system?1:0},menuOptionActivated:function(e,t,r){return"pds"==t&&(e.updateLog(e.returnFaction(r)+" exhausts Graviton Laser System"),e.game.players_info[r-1].graviton_laser_system_exhausted=1,e.game.players_info[r-1].graviton_laser_system_active=1,e.addMove("setvar\tplayers\t"+r+"\tgraviton_laser_system_exhausted\tint\t1"),e.addMove("setvar\tplayers\t"+r+"\tgraviton_laser_system_active\tint\t1"),e.addMove("NOTIFY\t"+e.returnFactionNickname(r)+" activates Graviton Laser System")),0}}),this.importTech("transit-diodes",{name:"Transit Diodes",color:"yellow",prereqs:["yellow","yellow"],text:"Exhaust to reallocate 4 infantry between planets your control",initialize:function(e,t){null==e.game.players_info[t-1].transit_diodes&&(e.game.players_info[t-1].transit_diodes=0,e.game.players_info[t-1].transit_diodes_exhausted=0)},gainTechnology:function(e,t,r){"transit-diodes"==r&&(e.game.players_info[t-1].transit_diodes=1,e.game.players_info[t-1].transit_diodes_exhausted=0)},menuOption:function(e,t,r){return"main"==t?{event:"transitdiodes",html:'<li class="option" id="transitdiodes">use transit diodes</li>'}:{}},menuOptionTriggers:function(e,t,r){return"main"==t&&e.doesPlayerHaveTech(r,"transit-diodes")?1:0},menuOptionActivated:function(e,t,r){return"main"==t&&e.playerRemoveInfantryFromPlanets(r,4,(function(t){e.playerAddInfantryToPlanets(r,t,(function(){e.addMove("setvar\tplayers\t"+r+"\ttransit_diodes_exhausted\tint\t1"),e.addMove("NOTIFY\t"+r+" activates transit diodes"),e.addMove("NOTIFY\t"+e.returnFaction(r)+" has moved infantry"),e.endTurn()}))})),0}}),this.importTech("integrated-economy",{name:"Integrated Economy",color:"yellow",prereqs:["yellow","yellow","yellow"],text:"You may produce on a planet after capturing it, up to cost (resource) limit of planet.",initialize:function(e,t){null==e.game.players_info[t-1].integrated_economy&&(e.game.players_info[t-1].integrated_economy=0,e.game.players_info[t-1].integrated_economy_planet_invaded=0,e.game.players_info[t-1].integrated_economy_planet_invaded_resources=0)},gainTechnology:function(e,t,r){"integrated-economy"==r&&(e.game.players_info[t-1].integrated_economy=1,e.game.players_info[t-1].integrated_economy_planet_invaded=0,e.game.players_info[t-1].integrated_economy_planet_invaded_resources=0)},gainPlanet:function(e,t,r){e.doesPlayerHaveTech(t,"integrated-economy")&&(e.game.players_info[t-1].may_player_produce_without_spacedock=1,e.game.players_info[t-1].may_player_produce_without_spacedock_production_limit=0,console.log("P: "+r),e.game.players_info[t-1].may_player_produce_without_spacedock_cost_limit+=e.game.planets[r].resources)}}),this.importUnit("infantry",{name:"Infantry",type:"infantry",cost:.5,combat:8,strength:1,space:0,ground:1,can_be_stored:1,capacity_required:1,description:"Infantry invade planets, but cannot move between sectors without being carried on carriers or other ships with capacity."}),this.importUnit("fighter",{name:"Fighter",type:"fighter",cost:.5,move:1,combat:9,strength:1,can_be_stored:1,capacity_required:1,description:"Fighters are disposable ships deployed to protect capital ships. They must be transported on carriers or other ships with capacity."}),this.importUnit("pds",{name:"PDS",type:"pds",range:0,cost:5,combat:6,description:"PDS units fire on other ships that invade their sectors. They can also fire on foreign infantry that invade a planet."}),this.importUnit("spacedock",{name:"Spacedock",type:"spacedock",capacity:3,production:2,combat:0,range:0,description:"Spacedocks are used to produce infantry and other ships. They cannot produce ships in space if an opponent fighter is in the sector"}),this.importUnit("carrier",{name:"Carrier",type:"carrier",cost:3,move:1,combat:9,capacity:4,strength:1,description:"The Carrier is a troop and fighter transport ship. Load it with infantry and fighters and use it to conquer other sectors."}),this.importUnit("destroyer",{name:"Destroyer",type:"destroyer",cost:1,move:2,combat:9,strength:1,anti_fighter_barrage:2,anti_fighter_barrage_combat:9,description:"The Destroyer is an inexpensive but mobile ship designed to counter fighter swarms - its ANTI-FIGHTER BARRAGE (2 rolls hitting on 9 or higher) happens at the very start of space-combat"}),this.importUnit("cruiser",{name:"Cruiser",type:"cruiser",cost:2,move:2,combat:7,strength:1,description:"The Cruiser is a more powerful ship with a reasonable chance of landing hits in battle."}),this.importUnit("dreadnaught",{name:"Dreadnaught",type:"dreadnaught",cost:4,move:1,capacity:1,combat:6,strength:2,bombardment_rolls:1,bombardment_combat:5,description:"The Dreadnaught is a powerful combat ship able to SUSTAIN DAMAGE once before being destroyed in combat"}),this.importUnit("flagship",{name:"Flagship",type:"flagship",cost:8,move:1,capacity:1,combat:7,strength:2,description:"The Flagship is the pride of the fleet -- each faction's flagship confers specific abilities. See your factino sheet for more details"}),this.importUnit("warsun",{name:"War Sun",type:"warsun",cost:12,shots:3,move:1,capacity:3,combat:3,strength:2,bombardment_rolls:3,bombardment_combat:3,description:"The War Sun is death packaged in a mass of planet-destroying turbinium. Rumours of their lethality abound, as few have fought one and lived to tell the tale."}),this.importUnit("infantry-ii",{name:"Infantry II",type:"infantry",cost:.5,combat:7,strength:1,space:0,ground:1,can_be_stored:1,capacity_required:1,extension:1,description:"Infantry II are stronger and more resilient but cannot typically be moved between sectors without moving on carriers or other ships with capacity."}),this.importUnit("fighter-ii",{name:"Fighter II",type:"fighter",cost:.5,move:2,combat:8,strength:1,can_be_stored:1,capacity_required:1,extension:1,description:"Fighter II can move without being transported by other ships. Any ships inexcess of your carrying capacity could against your fleet supply."}),this.importUnit("spacedock-ii",{name:"Spacedock II",type:"spacedock",capacity:3,production:4,extension:1,description:"Spacedock II can produce more units whenever they produce."}),this.importUnit("pds-ii",{name:"PDS II",type:"pds",cost:5,combat:5,range:1,extension:1,description:"PDS II has a slightly more accurate targeting mechanism and can fire into adjacent sectors."}),this.importUnit("carrier-ii",{name:"Carrier II",type:"carrier",cost:3,move:2,combat:9,capacity:6,strength:1,extension:1,description:"Carrier II has upgraded ship capacity and is slightly more robust in combat"}),this.importUnit("destroyer-ii",{name:"Destroyer II",type:"destroyer",cost:1,move:2,combat:8,strength:1,extension:1,anti_fighter_barrage:3,anti_fighter_barrage_combat:6,description:"Destroyer II has improved ANTI-FIGHTER-BARRAGE (3x6) and is slightly more effective in general combat"}),this.importUnit("cruiser-ii",{name:"Cruiser II",type:"cruiser",cost:2,move:3,combat:6,strength:1,extension:1,description:"Cruiser II has extended range and the ability to support a small phalanx of ground troops"}),this.importUnit("dreadnaught-ii",{name:"Dreadnaught II",type:"dreadnaught",cost:4,move:2,capacity:1,combat:5,strength:2,extension:1,description:"Dreadnaught II has improved movement, can support a small ground team and is slightly more effective in space combat"}),this.importPromissary("ceasefire",{name:"Ceasefire Promissary",faction:-1,text:"When the owner activates a sector that contains one of your units, you may trigger this to prevent them moving in units.",activateSystemTriggers:function(e,t,r,n){var a=e.game.players_info[t-1].faction+"-ceasefire";return e.doesPlayerHavePromissary(r,a)&&t!=r&&e.doesPlayerHaveUnitsInSector(r,n)?1:0},activateSystemEvent:function(e,t,r,n){if(e.game.player!=r)return e.updateStatus(e.returnFaction(r)+" is deciding whether to use Ceasefire"),0;var a='<div clss="sf-readable">Permit '+e.returnFaction(t)+" to activate sector or use ceasefire? </div><ul>";a+='<li class="option" id="activate">use ceasefire</li>',a+='<li class="option" id="nothing">do nothing</li>',a+="</ul>",e.updateStatus(a),$(".option").off(),$(".option").on("click",(function(){var n=$(this).attr("id");return"nothing"===n?(e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" does not use Ceasefire"),e.endTurn(),0):"activate"===n?(e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" uses Ceasefire to end "+e.returnFaction(t)+" turn"),e.addMove("ceasefire\t"+t+"\t"+r),e.endTurn(),0):0}))},handleGameLoop:function(e,t,r){if("ceasefire"==r[0]){var n=parseInt(r[1]);r[2],e.game.queue.splice(t,1);for(var a=0,i=e.game.queue.length-1;i>=0;i--)0!=e.game.queue[i].indexOf("play")&&0==a?e.game.queue.splice(i,1):0==a&&(a=1,e.game.queue.push("resolve\tplay"),e.game.queue.push("setvar\tstate\t0\tactive_player_moved\tint\t0"),e.game.queue.push("player_end_turn\t"+n));return 1}return 1}}),this.importPromissary("trade",{name:"Trade Promissary",faction:-1,text:"When the owner replenishes commodities, this promissary triggers and you gain their commodities as trade goods",gainCommodities:function(e,t,r){for(var n=e.game.players_info[t-1].faction+"-trade",a=e.returnPromissaryPlayer(n),i=0;i<e.game.players_info.length;i++)if(i+1!=t&&e.doesPlayerHavePromissary(i+1,n))return e.game.players_info[i].goods+=r,e.givePromissary(t,i+1,n),e.updateLog(e.returnFaction(i+1)+" redeems their Trade Promissary from "+e.returnFaction(a)),0;return r}}),this.importPromissary("political",{name:"Political Promissary",faction:-1,text:"The owner of this card cannot participate in resolving this agenda",menuOption:function(e,t,r){var n={};return"pre_agenda"==t&&(n.event="political-promissary",n.html='<li class="option" id="political-promissary">Political Promissary</li>'),n},menuOptionTriggers:function(e,t,r){if("pre_agenda"!=t)return 0;for(var n=e.returnPlayablePromissaryArray(r,"political"),a=0;a<n.length;a++)if(e.game.players_info[e.game.player-1].promissary_notes.includes(n[a]))return 1;return 0},menuOptionActivated:function(e,t,r){if(e.game.player==r){for(var n='<div class="sf-readable">Select a Specific Promissary: </div><ul>',a=e.returnPlayablePromissaryArray(r,"political"),i=0;i<a.length;i++){var o=a[i].split("-"),s=e.returnPromissaryPlayer(a[i]);n+='<li class="option" id="'.concat(i,'">').concat(e.returnFactionName(s)," - ").concat(e.promissary_notes[o[1]].name,"</li>")}n+="</ul>",e.updateStatus(n),$(".option").off(),$(".option").on("click",(function(){var t=$(this).attr("id"),r=a[parseInt(t)],n=e.returnPromissaryPlayer(a[parseInt(t)]);return e.addMove("rider\t"+n+"\tpolitical-promissary\t-1"),e.addMove("give\t"+e.game.player+"\t"+r+"\tpromissary\t"+r),e.endTurn(),0}))}return 0}}),this.importPromissary("throne",{name:"Support for the Throne",faction:-1,text:"Gain 1 VP when you receive this card. Lose this card and 1 VP if the owner of this card is eliminated or you activate a system containing any of their units.",gainPromissary:function(e,t,r){r.indexOf("throne")>-1&&e.returnPromissaryPlayer(r)!=t&&(e.game.players_info[t-1][r]=1,e.game.players_info[t-1].vp++,e.updateLog(e.returnFaction(t)+" gains 1 VP from Support for the Throne"),e.updateLeaderboard())},losePromissary:function(e,t,r){r.indexOf("throne")>-1&&e.returnPromissaryPlayer(r)!=t&&(e.game.players_info[t-1][r]=1,e.game.players_info[t-1].vp--,e.updateLog(e.returnFaction(t)+" loses 1 VP from Support for the Throne"),e.updateLeaderboard())},activateSystemTriggers:function(e,t,r,n){e.returnSectorAndPlanets(n);for(var a=0;a<e.game.players_info.length;a++)if(a+1!=t&&e.doesPlayerHaveUnitsInSector(a+1,n)){var i=e.game.players_info[r-1].id+"-throne";e.doesPlayerHavePromissary(t,i)&&(e.game.players_info[t-1][i]=0,e.updateLog(e.returnFaction(t)+" loses 1 VP from Support for the Throne"),e.game.players_info[t-1].vp--,e.givePromissary(t,a+1,details))}return 0}}),this.importFaction("faction2",{id:"faction2",name:"Universities of Jol Nar",nickname:"Jol Nar",homeworld:"sector50",space_units:["carrier","carrier","dreadnaught","fighter"],ground_units:["infantry","infantry","pds","spacedock"],tech:["sarween-tools","neural-motivator","plasma-scoring","antimass-deflectors","faction2-analytic","faction2-brilliant","faction2-fragile","faction2-flagship"],background:"faction2.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the Universities of Jol Nar, a physically weak faction which excells at science and technology. Survive long enough to amass enough protective technology and you can be a contender for the Imperial Throne. Good luck!</div>'}),this.importTech("faction2-flagship",{name:"XXCha Flagship",faction:"faction2",type:"ability",text:"Extra hit on every roll of 9 or 10 before modifications",modifyUnitHits:function(e,t,r,n,a,i,o,s){return e.doesPlayerHaveTech(n,"faction2-flagship")&&i.owner==n&&"flagship"==i.type&&o>8?(e.updateLog("Jol Nar flagship scores an additional hit through flagshup ability"),++s):s}}),this.importTech("faction2-analytic",{name:"Analytic",faction:"faction2",type:"ability",text:"Ignore 1 tech prerequisite on non-unit upgrades",onNewRound:function(e,t){e.doesPlayerHaveTech(t,"faction2-analytic")&&(e.game.players_info[t-1].permanent_ignore_number_of_tech_prerequisites_on_nonunit_upgrade=1)}}),this.importTech("faction2-fragile",{name:"Fragile",faction:"faction2",type:"ability",text:"-1 on all combat rolls",onNewRound:function(e,t){e.doesPlayerHaveTech(t,"faction2-fragile")&&(e.game.players_info[t-1].permanent_ignore_number_of_tech_prerequisites_on_nonunit_upgrade=1)},modifyCombatRoll:function(e,t,r,n,a,i){return"space"!=a&&"ground"!=a||e.doesPlayerHaveTech(t,"faction2-fragile")&&(e.updateLog("Jol Nar combat rolls -1 due to fragility"),(i-=1)<1&&(i=1)),i}}),this.importTech("faction2-brilliant",{name:"Brilliant",faction:"faction2",type:"ability",text:"Tech primary is played when token spent to execute secondary",initialize:function(e,t){null==e.faction2_brilliant_swapped&&(e.faction2_brilliant_swapped=1,e.brilliant_original_event=e.strategy_cards.technology.strategySecondaryEvent,e.strategy_cards.technology.strategySecondaryEvent=function(e,t,r){e.doesPlayerHaveTech(t,"faction2-brilliant")&&t!=r&&e.game.player==t?(e.game.players_info[t-1].cost_of_technology_secondary=6,e.playerAcknowledgeNotice("The Tech strategy card has been played. You may expend a strategy token to research a technology. You can then purchase a second for 6 resources:",(function(){e.updateStatus('<p>Technology has been played. Do you wish to spend a strategy token to research a technology? </p><ul><li class="option" id="yes">Yes</li><li class="option" id="no">No</li></ul>'),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){if(e.unlockInterface(),"no"===$(this).attr("id"))return e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0;e.playerResearchTechnology((function(r){e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.addMove("purchase\t"+t+"\ttechnology\t"+r),e.game.players_info[e.game.player-1].tech.push(r);var n=6,a="<p>Do you wish to spend 6 resources to research a second technology? </p><ul>";1!=e.game.players_info[t-1].permanent_research_technology_card_must_not_spend_resources&&1!=e.game.players_info[t-1].temporary_research_technology_card_must_not_spend_resources||(a="<p>Do you wish to research a second technology for free?",n=0),e.returnAvailableResources(e.game.player)>=n&&(a+='<li class="option" id="yes">Yes</li>'),a+='<li class="option" id="no">No</li>',a+="</ul>",e.updateStatus(a),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var r=$(this).attr("id");return"yes"===r&&(e.game.players_info[t-1].temporary_research_technology_card_must_not_spend_resources=0,e.playerSelectResources(n,(function(r){if(1!=r)return e.endTurn(),0;e.playerResearchTechnology((function(r){e.addMove("purchase\t"+t+"\ttechnology\t"+r),e.endTurn()}))}))),"no"===r?(e.endTurn(),0):void 0}salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}))}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}))):e.brilliant_original_event(e,t,r)})}}),this.importTech("faction2-eres-siphons",{name:"E-Res Siphons",faction:"faction2",type:"special",color:"yellow",prereqs:["yellow","yellow"],text:"Gain 4 trade goods whenever a system is activated containing your ships",initialize:function(e,t){null==e.game.players_info[t-1].eres_siphons&&(e.game.players_info[t-1].eres_siphons=0)},gainTechnology:function(e,t,r){"faction2-eres-siphons"==r&&(e.game.players_info[t-1].eres_siphons=1)},activateSystemTriggers:function(e,t,r,n){return 1==e.game.players_info[r-1].eres_siphons&&t!=r&&1==e.doesSectorContainPlayerShips(r,n)?1:0},postSystemActivation:function(e,t,r,n){e.game.players_info[r-1].goods+=4}}),this.importTech("faction2-deep-space-conduits",{name:"Deep Space Conduits",faction:"faction2",type:"special",color:"blue",prereqs:["blue","blue"],text:"Activate card to make activated system 1 hop away from all other systems with Jol Nar ships",initialize:function(e,t){null==e.game.players_info[t-1].deep_space_conduits&&(e.game.players_info[t-1].deep_space_conduits=0,e.game.players_info[t-1].deep_space_conduits_exhausted=0)},onNewRound:function(e,t){1==e.game.players_info[t-1].deep_space_conduits&&(e.game.players_info[t-1].deep_space_conduits_exhausted=0)},gainTechnology:function(e,t,r){"faction2-deep-space-conduits"==r&&(e.game.players_info[t-1].deep_space_conduits=1,e.game.players_info[t-1].deep_space_conduits_exhausted=0)},activateSystemTriggers:function(e,t,r,n){return r==e.game.player&&t==r&&1==e.game.players_info[t-1].deep_space_conduits&&0==e.game.players_info[t-1].deep_space_conduits_exhausted&&e.doesSectorContainPlayerUnits(t,n)?1:0},activateSystemEvent:function(e,t,r,n){e.updateStatus('Do you wish to activate Deep Space Conduits: <ul><li class="textchoice" id="yes">activate</li><li class="textchoice" id="no">skip</li></ul>'),$(".textchoice").off(),$(".textchoice").on("click",(function(){var a=$(this).attr("id");if("yes"==a){var i=e.returnSectorsWithPlayerUnits(t);e.game.players_info[t-1].deep_space_conduits_exhausted=1,e.addMove("setvar\tplayers\t"+r+"\tdeep_space_conduits_exhausted\tint\t1");for(var o=0;o<i.length;o++)e.addMove("adjacency\ttemporary\t"+i[o]+"\t"+n);e.endTurn()}"no"==a&&(e.updateStatus(),e.endTurn())}))}}),this.importFaction("faction7",{id:"faction7",name:"Embers of Muaat",nickname:"Muaat",homeworld:"sector76",space_units:["warsun","fighter","fighter"],ground_units:["infantry","infantry","infantry","infantry","spacedock"],tech:["plasma-scoring","faction7-star-forge","faction7-gashlai-physiology","faction7-advanced-warsun-i","faction7-flagship"],background:"faction7.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the Embers of Muaat, a faction which forges its instruments of war in the heat of lava-powered furnaces and whose technical research expands to conquering the heat of the very starts themselves. Goodl luck!</div>'}),this.importTech("faction7-star-forge",{name:"Star Forge",faction:"faction7",type:"ability",text:"Spend 1 strategy token to place 2 fighters or a destroy in sector with your warsun",initialize:function(e,t){null==e.game.players_info[t-1].star_forge&&(e.game.players_info[t-1].star_forge=0)},gainTechnology:function(e,t,r){"faction7-star-forge"==r&&(e.game.players_info[t-1].star_forge=1)},menuOption:function(e,t,r){var n={};return"main"===t&&(n.event="starforge",n.html='<li class="option" id="starforge">star forge</li>'),n},menuOptionTriggers:function(e,t,r){return e.doesPlayerHaveTech(r,"faction7-star-forge")&&"main"===t&&e.game.players_info[r-1].strategy_tokens>0?1:0},menuOptionActivated:function(e,t,r){return e.game.player==r?(e.playerSelectSectorWithFilter("Star Forge spends 1 strategy token to drop 2 fighters or 1 destroyer in a sector containing your War Sun: ",(function(t){return e.doesSectorContainPlayerUnit(e.game.player,t,"warsun")}),(function(t){return e.addMove("produce\t"+e.game.player+"\t1\t-1\tdestroyer\t"+t),e.addMove("NOTIFY\tStar Forge adds destroyer to "+t),e.addMove("expend\t"+e.game.player+"\tstrategy\t1"),e.endTurn(),0}),(function(){e.playerTurn()})),0):0}}),this.importTech("faction7-gashlai-physiology",{name:"Gashlai Physiology",faction:"faction7",type:"ability",text:"Player may move through supernovas",initialize:function(e,t){null==e.game.players_info[t-1].gashlai_physiology&&(e.game.players_info[t-1].gashlai_physiology=0)},gainTechnology:function(e,t,r){"faction7-gashlai-physiology"==r&&(e.game.players_info[t-1].gashlai_physiology=1,e.game.players_info[t-1].fly_through_supernovas=1)}}),this.importTech("faction7-magmus-reactor",{name:"Magmus Reactor",faction:"faction7",type:"special",text:"Player may move into supernovas. Gain 1 trade good producing with Warsun or adjacent to Supernova",initialize:function(e,t){null==e.game.players_info[t-1].magmus_reactor&&(e.game.players_info[t-1].magmus_reactor=0)},gainTechnology:function(e,t,r){"faction7-magmus-reactor"==r&&(e.game.players_info[t-1].magmus_reactor=1,e.game.players_info[t-1].move_into_supernovas=1)},postProduction:function(e,t,r,n){if(1==e.game.players_info[t-1].magmus_reactor){var a=e.returnAdjacentSectors(r),i=0;if(e.doesSectorContainPlayerUnit(t,r,"warsun")&&(i=1),0==i)for(var o=0;o<a.length;o++)4==e.returnSectorAndPlanets(a[o]).s.type&&(i=1);1==i&&(e.updateLog("Muatt gains 1 trade good from Magmus Reactor - producing in a sector with a Warsun or adjacent to a Supernova"),e.game.players_info[t-1].goods+=1,e.updateTokenDisplay(),e.displayFactionDashboard())}}}),this.importTech("faction7-flagship",{name:"Muaat Flagship",faction:"faction7",type:"ability",text:"May spend 1 strategy token to place a cruiser in your flagship system"}),this.importTech("faction7-advanced-warsun-i",{name:"Advanced Warsun I",faction:"faction7",replaces:"warsun",unit:1,type:"special",text:"A more dangerous and mobile warsun",prereqs:[],initialize:function(e,t){null==e.game.players_info[t-1].faction7_advanced_warsun_i&&(e.game.players_info[t-1].faction7_advanced_warsun_i=0)},gainTechnology:function(e,t,r){e.game.players_info[t-1].faction7_advanced_warsun_i=1,e.game.players_info[t-1].may_produce_warsuns=1},upgradeUnit:function(e,t,r){return 1==e.game.players_info[r.owner-1].faction7_advanced_warsun_i&&"warsun"==r.type&&(r.cost=12,r.combat=3,r.move=1,r.capacity=6,r.bombardment_rolls=3,r.bombardment_combat=3),r}}),this.importTech("faction7-advanced-warsun-ii",{name:"Advanced Warsun II",faction:"faction7",replaces:"warsun",unit:1,type:"special",text:"A more dangerous and mobile warsun",prereqs:["red","red","red","yellow"],initialize:function(e,t){null==e.game.players_info[t-1].faction7_advanced_warsun_ii&&(e.game.players_info[t-1].faction7_advanced_warsun_ii=0)},gainTechnology:function(e,t,r){e.game.players_info[t-1].faction7_advanced_warsun_ii=1},upgradeUnit:function(e,t,r){return 1==e.game.players_info[r.owner-1].faction7_advanced_warsun_ii&&"warsun"==r.type&&(r.cost=10,r.combat=3,r.move=3,r.capacity=6,r.bombardment_rolls=3,r.bombardment_combat=3),r}}),this.importFaction("faction4",{id:"faction4",name:"Sardakk N'Orr",nickname:"Sardakk",homeworld:"sector53",space_units:["carrier","carrier","cruiser"],ground_units:["infantry","infantry","infantry","infantry","infantry","spacedock"],tech:["faction4-unrelenting","faction4-exotrireme-i","faction4-flagship"],background:"faction4.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the Sardaak N\'Orr, an overpowered faction known for its raw strength in combat. Your brutal power makes you an intimidating faction on the board. Good luck!</div>'}),this.importTech("faction4-unrelenting",{name:"Unrelenting",faction:"faction4",type:"ability",text:"+1 on all combat rolls",onNewRound:function(e,t){e.doesPlayerHaveTech(t,"faction4-unrelenting")&&(e.game.players_info[t-1].faction4_unrelenting=1)},modifyCombatRoll:function(e,t,r,n,a,i){return"space"!=a&&"ground"!=a||e.doesPlayerHaveTech(t,"faction4-unrelenting")&&(e.updateLog("Sardakk combat rolls +1 due to Sardakk"),(i+=1)>10&&(i=10)),i}}),this.importTech("faction4-flagship",{name:"Sardakk Flagship",faction:"faction4",type:"ability",text:"+1 on all combat rolls for ships in same sector",modifyCombatRoll:function(e,t,r,n,a,i){return"space"==a&&e.doesSectorContainPlayerUnit(t,e.game.state.activated_sector,"flagship")&&(e.updateLog("Sardakk Flagship adds +1 to dice roll"),(i+=1)>10&&(i=10)),i}}),this.importTech("faction4-exotrireme-i",{name:"Exotrireme I",faction:"faction4",replaces:"dreadnaught",unit:1,type:"special",text:"A more powerful dreadnaught",prereqs:[],initialize:function(e,t){null==e.game.players_info[t-1].faction4_advanced_dreadnaught_i&&(e.game.players_info[t-1].faction4_advanced_dreadnaught_i=0)},gainTechnology:function(e,t,r){e.game.players_info[t-1].faction4_advanced_dreadnaught_i=1},upgradeUnit:function(e,t,r){return 1==e.game.players_info[r.owner-1].faction4_advanced_dreadnaught_i&&"dreadnaught"==r.type&&(r.cost=4,r.combat=5,r.move=1,r.capacity=1,r.strength=2,r.bombardment_rolls=2,r.bombardment_combat=4,r.description="The Exotrireme I is a more powerful dreadnaught not vulnerable to Direct Hit cards"),r}}),this.importTech("faction4-exotrireme-ii",{name:"Exotrireme II",faction:"faction4",replaces:"dreadnaught",unit:1,type:"special",prereqs:["blue","blue","yellow"],text:"A much more powerful dreadnaught",initialize:function(e,t){null==e.game.players_info[t-1].faction4_advanced_dreadnaught_ii&&(e.game.players_info[t-1].faction4_advanced_dreadnaught_ii=0)},gainTechnology:function(e,t,r){e.game.players_info[t-1].faction4_advanced_dreadnaught_ii=1,e.game.players_info[t-1].faction4_advanced_dreadnaught_i=0},upgradeUnit:function(e,t,r){return 1==e.game.players_info[r.owner-1].faction4_advanced_dreadnaught_ii&&"dreadnaught"==r.type&&(r.cost=4,r.combat=5,r.move=2,r.capacity=1,r.strength=2,r.bombardment_rolls=2,r.bombardment_combat=4,r.description="The Exotrireme II is a more powerful dreadnaught not vulnerable to Direct Hit cards. It may be destroyed after a round of space combat to destroy up to two opponent ships."),r},spaceCombatRoundEnd:function(e,t,r,n){return e.doesPlayerHaveTech(t,"faction4-exotrireme-ii")&&e.doesSectorContainPlayerUnit(t,n,"dreadnaught")&&e.addMove("faction4_exotrireme_ii_sacrifice\t"+t+"\t"+n),e.doesPlayerHaveTech(r,"faction4-exotrireme-ii")&&e.doesSectorContainPlayerUnit(r,n,"dreadnaught")&&e.addMove("faction4_exotrireme_ii_sacrifice\t"+r+"\t"+n),1},handleGameLoop:function(e,t,r){if("faction4_exotrireme_ii_sacrifice"==r[0]){var n=parseInt(r[1]),a=e.returnSectorAndPlanets(r[2]),i=e.returnOpponentInSector(n,r[2]);if(n==e.game.player){if(-1==i)return e.addMove("resolve\tfaction4_exotrireme_ii_sacrifice"),e.addMove("NOTIFY\tNo target ships for Sardakk Exotrireme II faction ability"),e.endTurn(),0;for(var o=0,s=0;s<a.s.units[i-1].length;s++)a.s.units[i-1][s].strength>0&&(o=1);if(0==o)return e.addMove("resolve\tfaction4_exotrireme_ii_sacrifice"),e.addMove("NOTIFY\tNo target ships for Sardakk Exotrireme II action ability"),e.endTurn(),0;html='<div class="sf-readable">Do you wish to sacrifice a Dreadnaught to destroy up to 2 opponent ships?</div><ul>';for(var c=0;c<a.s.units[e.game.player-1].length;c++)"dreadnaught"==a.s.units[e.game.player-1][c].type&&(html+='<li class="option" id="'.concat(c,'">sacrifice ').concat(e.returnShipInformation(a.s.units[e.game.player-1][c]),"</li>"));html+='<li class="option" id="no">do not sacrifice</li>',html+="</ul>",e.updateStatus(html),$(".option").on("click",(function(){var t=$(this).attr("id");return"no"===t?(e.addMove("resolve\tfaction4_exotrireme_ii_sacrifice"),e.endTurn(),0):(e.addMove("resolve\tfaction4_exotrireme_ii_sacrifice"),e.addMove("faction4_exotrireme_ii_picktwo\t"+e.game.player+"\t"+r[2]),e.addMove("NOTIFY\tSardakk sacrifies Exotritreme II to destroy opponent ships"),e.addMove("destroy_unit\t"+e.game.player+"\t"+e.game.player+"\tspace\t"+r[2]+"\t0\t"+t+"\t1"),e.endTurn(),0)}))}return 0}if("faction4_exotrireme_ii_picktwo"==r[0]){var l=parseInt(r[1]);return e.returnSectorAndPlanets(r[2]),l==e.game.player?(e.addMove("resolve\tfaction4_exotrireme_ii_picktwo"),e.playerDestroyOpponentShips(l,2,r[2])):e.updateStatus("Exotrireme II engaging in suicide assault"),0}}}),this.importTech("faction4-particle-weave",{name:"Particle Weave",faction:"faction4",type:"special",prereqs:["red","red"],text:"Infantry vaporize 1 opponent for each hit received",initialize:function(e,t){null==e.game.players_info[t-1].faction4_particle_weave&&(e.game.players_info[t-1].faction4_particle_weave=0,e.game.players_info[t-1].faction4_particle_weave_opponent=0,e.game.players_info[t-1].faction4_particle_weave_my_forces=0)},gainTechnology:function(e,t,r){"faction4-particle-weave"==r&&(e.game.players_info[t-1].faction4_particle_weave=1)},groundCombatTriggers:function(e,t,r,n){if(e.doesPlayerHaveTech(t,"faction4-particle-weave")){var a=e.returnSectorAndPlanets(r).p[n];e.game.players_info[t-1].faction4_particle_weave_my_forces=a.units[t-1].length}return 0},groundCombatRoundEnd:function(e,t,r,n,a){if(e.doesPlayerHaveTech(t,"faction4-particle-weave")){var i=e.returnSectorAndPlanets(n),o=i.p[a];if(o.units[t-1].length<e.game.players_info[t-1].faction4_particle_weave_my_forces){e.updateLog("Sardakk Particle Weave vaporizes 1 opponent infantry...");for(var s=0;s<o.units[r-1].length;s++)"infantry"==o.units[r-1][s].type&&(o.units[r-1].splice(s,1),s=o.units[r-1].length+1)}e.saveSystemAndPlanets(i)}if(e.doesPlayerHaveTech(r,"faction4-particle-weave")){var c=e.returnSectorAndPlanets(n),l=c.p[a];if(l.units[r-1].length<e.game.players_info[r-1].faction4_particle_weave_my_forces){e.updateLog("Sardakk Particle Weave vaporizes 1 opponent infantry...");for(var u=0;u<l.units[t-1].length;u++)"infantry"==l.units[t-1][u].type&&(l.units[t-1].splice(u,1),u=l.units[t-1].length+1)}e.saveSystemAndPlanets(c)}return 1}}),this.importFaction("faction1",{id:"faction1",name:"Federation of Sol",nickname:"Sol",homeworld:"sector52",space_units:["carrier","carrier","destroyer","fighter","fighter","fighter"],ground_units:["infantry","infantry","infantry","infantry","infantry","spacedock"],tech:["neural-motivator","antimass-deflectors","faction1-orbital-drop","faction1-versatile","faction1-flagship"],background:"faction1.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the Sol Federation. a Terran faction under cellular military government. Your reinforced infantry and tactical flexibility will be important in your fight for the Imperial Throne. Good luck!</div>'}),this.importTech("faction1-flagship",{name:"Sol Flagship",faction:"faction1",text:"Flagship gains 1 infantry when player selects a strategy card",type:"ability",playersChooseStrategyCardsBeforeTriggers:function(e,t){return e.doesPlayerHaveTech(t,"faction1-flagship")&&e.returnPlayerFleet(t).flagship>0?1:0},playersChooseStrategyCardsBeforeEvent:function(e,t){for(var r in e.game.sectors)if(e.doesSectorContainPlayerUnit(t,r,"flagship"))for(var n=e.game.sectors[r],a=0;a<n.units[t-1].length;a++)if("flagship"==n.units[t-1][a].type)return e.loadUnitOntoShip(t,r,a,"infantry"),e.updateLog("Faction Ability: infantry added to Sol Flagship..."),1;return 1}}),this.importTech("faction1-orbital-drop",{name:"Orbital Drop",faction:"faction1",type:"ability",text:"Drop two infantry onto any controlled planet",initialize:function(e,t){null==e.game.players_info[t-1].orbital_drop&&(e.game.players_info[t-1].orbital_drop=0)},gainTechnology:function(e,t,r){"faction1-orbital-drop"==r&&(e.game.players_info[t-1].orbital_drop=1)},menuOption:function(e,t,r){var n={};return"main"===t&&(n.event="orbitaldrop",n.html='<li class="option" id="orbitaldrop">orbital drop</li>'),n},menuOptionTriggers:function(e,t,r){return e.doesPlayerHaveTech(r,"faction1-orbital-drop")&&"main"===t&&e.game.players_info[r-1].strategy_tokens>0&&0==e.game.state.active_player_moved?1:0},menuOptionActivated:function(e,t,r){if(e.game.player==r)return e.playerSelectPlanetWithFilter("Use Orbital Drop to reinforce which planet with two infantry: ",(function(t){return e.game.planets[t].owner==e.game.player?1:0}),(function(t){return t=e.game.planets[t],e.addMove("resolve\tplay"),e.addMove("setvar\tstate\t0\tactive_player_moved\tint\t0"),e.addMove("player_end_turn\t"+e.game.player),e.addMove("produce\t"+e.game.player+"\t1\t"+t.idx+"\tinfantry\t"+t.sector),e.addMove("produce\t"+e.game.player+"\t1\t"+t.idx+"\tinfantry\t"+t.sector),e.addMove("expend\t"+e.game.player+"\tstrategy\t1"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" orbital drops 2 infantry onto "+t.name),e.endTurn(),0}),null),0}}),this.importTech("faction1-versatile",{name:"Versatile",faction:"faction1",type:"ability",text:"Gain an extra command token each round",onNewRound:function(e,t){e.doesPlayerHaveTech(t,"faction1-versatile")&&(e.game.players_info[t-1].new_tokens_per_round=3)}}),this.importTech("faction1-advanced-carrier-ii",{name:"Advanced Carrier II",faction:"faction1",replaces:"carrier-ii",unit:1,type:"special",text:"A more sophisticated carrier",prereqs:["blue","blue"],initialize:function(e,t){null==e.game.players_info[t-1].faction1_advanced_carrier_ii&&(e.game.players_info[t-1].faction1_advanced_carrier_ii=0)},gainTechnology:function(e,t,r){e.game.players_info[t-1].faction1_advanced_carrier_ii=1},upgradeUnit:function(e,t,r){return 1==e.game.players_info[r.owner-1].faction1_advanced_carrier_ii&&"carrier"==r.type&&(r.cost=3,r.combat=9,r.move=2,r.capacity=8),r}}),this.importTech("faction1-advanced-infantry-ii",{name:"Special Ops II",faction:"faction1",replaces:"infantry-ii",unit:1,type:"special",text:"Battle-hardened infantry",prereqs:["green","green"],initialize:function(e,t){e.game.players_info[t-1].faction1_advanced_infantry_ii=0},gainTechnology:function(e,t,r){e.game.players_info[t-1].faction1_advanced_infantry_ii=1},upgradeUnit:function(e,t,r){return 1==e.game.players_info[r.owner-1].faction1_advanced_infantry_ii&&"infantry"==r.type&&(r.cost=.5,r.combat=6),r}}),this.importFaction("faction3",{id:"faction3",name:"XXCha Kingdom",nickname:"XXCha",homeworld:"sector51",space_units:["carrier","cruiser","cruiser","fighter","fighter","fighter"],ground_units:["infantry","infantry","infantry","infantry","pds","spacedock"],tech:["graviton-laser-system","faction3-peace-accords","faction3-quash","faction3-flagship"],background:"faction3.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the XXCha Kingdom, a faction which excels in diplomacy and defensive weaponry. With the proper alliances and political maneuvers your faction you can be a contender for the Imperial Throne. Good luck!</div>'}),this.importTech("faction3-flagship",{name:"XXCha Flagship",faction:"faction3",type:"ability",text:"3 space cannons which target adjacent systems attached to flagship",returnPDSUnitsWithinRange:function(e,t,r,n,a,i){if(!e.doesPlayerHaveTech(t,"faction3-flagship"))return i;if(e.returnPlayerFleet(t).flagship>0)for(var o=e.returnAdjacentSectors(a),s=0;s<o.length;s++)if(e.doesSectorContainPlayerUnit(t,o[s],"flagship")){var c={name:"XXCha Flagship #1"};c.unit=JSON.parse(JSON.stringify(e.returnUnit("pds",t))),c.unit.name="Flagship",c.range=1,c.combat=6,c.owner=t,c.sector=a;var l={name:"XXCha Flagship #2"};l.unit=JSON.parse(JSON.stringify(e.returnUnit("pds",t))),l.unit.name="Flagship",l.range=1,l.combat=6,l.owner=t,l.sector=a;var u={name:"XXCha Flagship #3"};return u.unit=JSON.parse(JSON.stringify(e.returnUnit("pds",t))),u.unit.name="Flagship",u.range=1,u.combat=6,u.owner=t,u.sector=a,i.push(c),i.push(l),i.push(u),i}return i}}),this.importTech("faction3-peace-accords",{name:"Peace Accords",faction:"faction3",type:"ability",text:"Colonize adjacent unprotected planet when diplomacy secondary is played",initialize:function(e,t){null==e.game.players_info[t-1].peace_accords&&(e.game.players_info[t-1].peace_accords=0)},gainTechnology:function(e,t,r){"faction3-peace-accords"==r&&(e.game.players_info[t-1].peace_accords=1)},strategyCardAfterTriggers:function(e,t,r,n){return 1==e.game.players_info[t-1].peace_accords?1:0},strategyCardAfterEvent:function(e,t,r,n){if("diplomacy"==n){for(var a=e.returnPlayerPlanetCards(t),i=[],o=[],s=[],c=0;c<a.length;c++)i.includes(e.game.planets[a[c]].sector)||(i.push(e.game.planets[a[c]].sector),o.push(e.game.planets[a[c]].sector));for(var l=0;l<i.length;l++)for(var u=e.returnAdjacentSectors(i[l]),d=0;d<u.length;d++)o.includes(u[d])||o.push(u[d]);for(var h=0;h<o.length;h++){var p=e.returnSectorAndPlanets(o[h]);if(p.p)for(var f=0;f<p.p.length;f++)p.p[f].owner!=t&&(e.doesPlanetHaveInfantry(p.p[f])||s.push(p.p[f].planet))}return s.length<0?(e.updateLog("XXCha cannot annex any unguarded planets via Peace Accords"),1):1==e.game.players_info[t-1].peace_accords?(e.updateStatus("XXCha selecting planet to annex with Peace Accords"),e.game.player==t&&e.playerSelectPlanetWithFilter("Select a planet to annex via Peace Accords: ",(function(e){return s.includes(e)?1:0}),(function(t){return e.addMove("annex\t"+e.game.player+"\t"+e.game.planets[t].sector+"\t"+e.game.planets[t].idx),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" annexes "+e.game.planets[t].name+" via Peace Accords"),e.endTurn(),0}),(function(){return e.endTurn(),0})),0):1}return 1}}),this.importTech("faction3-quash",{name:"Quash",faction:"faction3",type:"ability",text:"Spend strategy token to quash upcoming agenda",initialize:function(e,t){null==e.game.players_info[t-1].quash&&(e.game.players_info[t-1].quash=0)},gainTechnology:function(e,t,r){"faction3-quash"==r&&(e.game.players_info[t-1].quash=1)},menuOption:function(e,t,r){var n={};return"main"===t&&(n.event="quash",n.html='<li class="option" id="quash">quash agenda</li>'),n},menuOptionTriggers:function(e,t,r){return e.doesPlayerHaveTech(r,"faction3-quash")&&"main"==t&&e.game.players_info[r-1].strategy_tokens>0&&0==e.game.state.active_player_moved?1:0},menuOptionActivated:function(e,t,r){if(e.game.player==r){var n="";for(n+="Select one agenda to quash in the Galactic Senate.<ul>",i=0;i<e.game.state.agendas.length;i++)""!=e.game.state.agendas[i]&&(n+='<li class="option" id="'+e.game.state.agendas[i]+'">'+e.agenda_cards[e.game.state.agendas[i]].name+"</li>");n+="</ul>",e.updateStatus(n),$(".option").off(),$(".option").on("mouseenter",(function(){var t=$(this).attr("id");e.showAgendaCard(t)})),$(".option").on("mouseleave",(function(){var t=$(this).attr("id");e.hideAgendaCard(t)})),$(".option").on("click",(function(){var t=$(this).attr("id");e.updateStatus("Quashing Agenda"),e.addMove("expend\t"+e.game.player+"\tstrategy\t1"),e.addMove("quash\t"+t+"\t1"),e.endTurn()}))}}}),this.importTech("faction3-instinct-training",{name:"Instinct Training",faction:"faction3",prereqs:["green"],color:"green",type:"special",text:"Expend strategy token to cancel opponent action card",initialize:function(e,t){null==e.game.players_info[t-1].instinct_training&&(e.game.players_info[t-1].instinct_training=0)},gainTechnology:function(e,t,r){"faction3-instinct-training"==r&&(e.game.players_info[t-1].instinct_training=1)},playActionCardTriggers:function(e,t,r,n){return 1==e.game.players_info[t-1].instinct_training&&e.game.players_info[t-1].strategy_tokens>0?1:0},playActionCardEvent:function(e,t,r,n){return e.game.player==t&&(e.updateStatus('<div class=\'sf-readable\'>Do you wish to spend a strategy token to cancel opponent action card with Instinct Training?</div><ul><li class="textchoice" id="yes">yes</li><li class="textchoice" id="no">no</li></ul>'),$(".textchoice").off(),$(".textchoice").on("click",(function(){"no"===$(this).attr("id")||(e.addMove("resolve\taction_card"),e.addMove("resolve\taction_card_post"),e.addMove("expend\t"+e.game.player+"strategy1")),e.endTurn()}))),0}}),this.importTech("faction3-field-nullification",{name:"Nullification Fields",faction:"faction3",type:"special",color:"yellow",prereqs:["yellow","yellow"],text:"Terminate the turn of active player who activates a system containing your ship",initialize:function(e,t){null==e.game.players_info[t-1].field_nullification&&(e.game.players_info[t-1].field_nullification=0,e.game.players_info[t-1].field_nullification_exhausted=0)},onNewRound:function(e,t){e.doesPlayerHaveTech(t,"faction3-field-nullification")&&(e.game.players_info[t-1].field_nullification_exhausted=0)},gainTechnology:function(e,t,r){"faction3-field-nullification"==r&&(e.game.players_info[t-1].field_nullification=1,e.game.players_info[t-1].field_nullification_exhausted=0)},activateSystemTriggers:function(e,t,r,n){return e.doesPlayerHaveTech(r,"faction3-field-nullification")&&e.doesSectorContainPlayerShips(r,n)&&t!=r?1:0},activateSystemEvent:function(e,t,r,n){return e.doesPlayerHaveTech(r,"faction3-field-nullification")?1==e.game.players_info[r-1].field_nullification_exhausted?1:e.game.player!=r?(e.updateStatus(e.returnFaction(r)+" is deciding whether to use Nullification Fields"),0):(e.updateStatus('Do you wish to use Field Nullification to terminate this player\'s turn? <ul><li class="textchoice" id="yes">activate nullification field</li><li class="textchoice" id="no">do not activate</li></ul>'),$(".textchoice").off(),$(".textchoice").on("click",(function(){var a=$(this).attr("id");"yes"==a&&(e.addMove("resolve\tplay"),e.addMove("setvar\tstate\t0\tactive_player_moved\tint\t0"),e.addMove("player_end_turn\t"+e.game.player),e.addMove("field_nullification\t"+r+"\t"+t+"\t"+n),e.endTurn()),"no"==a&&e.endTurn()})),0):1},handleGameLoop:function(e,t,r){if("field_nullification"==r[0]){var n=parseInt(r[1]),a=parseInt(r[2]);return r[3],e.game.queue.splice(t,1),e.updateLog(e.returnFactionNickname(n)+" uses Nullification Fields to end "+e.returnFactionNickname(a)+" turn"),1}return 1}}),this.importFaction("faction5",{id:"faction5",name:"Yin Brotherhood",nickname:"Yin",homeworld:"sector74",space_units:["carrier","carrier","destroyer","fighter","fighter","fighter","fighter"],ground_units:["infantry","infantry","infantry","infantry","spacedock"],tech:["sarween-tools","faction5-indoctrination","faction5-devotion","faction5-flagship"],background:"faction5.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the Yin Brotherhood, a monastic order of religious zealots whose eagerness to sacrifice their lives for the collective good makes them terrifying in one-on-one combat. Direct their self-destructive passion and you can win the Imperial Throne. Good luck!</div>'}),this.importTech("faction5-indoctrination",{name:"Indoctrination",faction:"faction5",type:"ability",text:"Spend 2 influence to convert 1 enemy infantry at combat start",groundCombatTriggers:function(e,t,r,n){return e.doesPlayerHaveTech(t,"faction5-indoctrination")&&e.returnSectorAndPlanets(r).p[n].units[t-1].length>0&&e.returnAvailableInfluence(t)>=2&&e.game.state.ground_combat_round<2?1:0},groundCombatEvent:function(e,t,r,n){if(e.game.player==t)return e.returnSectorAndPlanets(r).p[n].units[t-1].length>0?e.playIndoctrination(e,t,r,n,(function(e){e.endTurn()})):e.endTurn(),0}}),this.importTech("faction5-devotion",{name:"Devotion",faction:"faction5",type:"ability",text:"Sacrifice destroyer or cruiser to assign 1 enemy hit at combat end",spaceCombatTriggers:function(e,t,r){return e.doesPlayerHaveTech(t,"faction5-devotion")&&e.doesPlayerHaveShipsInSector(t,r)&&e.game.state.space_combat_round>0?1:0},spaceCombatEvent:function(e,t,r){return e.game.player==t&&e.playDevotion(e,t,r,(function(){e.endTurn()})),0}}),this.importTech("faction5-impulse-core",{name:"Impulse Core",faction:"faction5",prereqs:["yellow","yellow"],color:"yellow",type:"special",text:"Sacrifice destroyer or cruiser at combat start, opponent takes hit on capital ship",spaceCombatTriggers:function(e,t,r){return e.doesPlayerHaveTech(t,"faction5-impulse-core")&&e.doesPlayerHaveShipsInSector(t,r)&&0==e.game.state.space_combat_round?1:0},spaceCombatEvent:function(e,t,r){return e.game.player==t&&e.playDevotion(e,t,r,(function(){e.endTurn()}),1),0}}),this.importTech("faction5-yin-spinner",{name:"Yin Spinner",faction:"faction5",prereqs:["green","green"],color:"green",type:"special",text:"Place additional infantry on planet after producing in sector",initialize:function(e,t){null==e.game.players_info[t-1].faction5_yin_spinner&&(e.game.players_info[t-1].faction5_yin_spinner=0)},gainTechnology:function(e,t,r){"faction5-yin-spinner"==r&&(e.game.players_info[t-1].faction5_yin_spinner=1)},playerEndTurnTriggers:function(e,t){return 1==e.game.players_info[t-1].faction5_yin_spinner&&e.game.player==t&&1==e.game.state.active_player_has_produced?1:0},playerEndTurnEvent:function(e,t){if(e.game.player!=t)return 0;e.playerSelectPlanetWithFilter("Yin Spinner Tech: place additional infantry on which planet?",(function(t){return(t=e.game.planets[t]).owner==e.game.player?1:0}),(function(t){return t=e.game.planets[t],e.addMove("produce\t"+e.game.player+"\t1\t"+t.idx+"\tinfantry\t"+t.sectors),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" spins extra infantry on "+t.name),e.endTurn(),0}),(function(){e.playerTurn()}))}}),this.importTech("faction5-flagship",{name:"Yin Flagship",faction:"faction5",type:"ability",text:"Wipes out all ships in sector when destroyed",unitDestroyed:function(e,t,r){if("flagship"==r.type&&e.doesPlayerHaveTech(r.owner,"faction5-flagship")){var n=e.game.state.activated_sector;""===n&&(n=e.game.state.space_combat_sector);var a=e.returnSectorAndPlanets(n);if(a){for(var i=0;i<a.s.units.length;i++)a.s.units[i]=[];for(var o=0;o<a.p.length;o++)for(var s=0;s<a.p[o].units.length;s++)a.p[o].units[s]=[];e.saveSystemAndPlanets(n),e.updateSectorGraphics(n),e.updateLog("The destruction of the Yin Flagship has caused a terrible calamity...")}}return r}}),this.playIndoctrination=function(e,t,r,n,a){if(this.game.player==t&&this.game.player==t){var i=e.returnSectorAndPlanets(r),o=i.p[n],s=e.returnOpponentOnPlanet(t,o);e.returnNonPlayerInfantryOnPlanet(t,o)<=0||-1==s||i.p[n].units[s-1].length<=0?a(e):(this.updateStatus('<div class=\'sf-readable\'>Do you wish to spend 2 influence to convert 1 enemy infantry to your side?</div><ul><li class="textchoice" id="yes">yes</li><li class="textchoice" id="no">no</li></ul>'),$(".textchoice").off(),$(".textchoice").on("click",(function(){var i=$(this).attr("id");"no"!==i?"yes"===i&&e.playerSelectInfluence(2,(function(i){1==i?(e.addMove("destroy_infantry_on_planet\t"+t+"\t"+r+"\t"+n+"\t1"),e.addMove("add_infantry_to_planet\t"+t+"\t"+o.planet+"\t1"),e.addMove("NOTIFY\tYin Indoctrination converts opposing infantry"),e.endTurn()):a(e)})):a(e)})))}},this.playDevotion=function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(e.game.player!=t)return 0;var i=e.returnSectorAndPlanets(r),o=e.returnOpponentInSector(t,r),s=e.doesSectorContainPlayerUnit(t,r,"destroyer"),c=e.doesSectorContainPlayerUnit(t,r,"cruiser");if(1==s||1==c){if(-1!=o){var l="<div class='sf-readable'>Do you wish to sacrifice a Destroyer or Cruiser to assign 1 hit to an enemy ship?</div><ul>";return s&&(l+='<li class="textchoice" id="destroyer">sacrifice destroyer</li>'),c&&(l+='<li class="textchoice" id="cruiser">sacrifice cruiser</li>'),l+='<li class="textchoice" id="no">no</li>',l+="</ul>",e.updateStatus(l),$(".textchoice").off(),$(".textchoice").on("click",(function(){var o=$(this).attr("id");if("no"!==o){if("destroyer"===o){for(var s=0,c=0;c<i.s.units[t-1].length;c++)"destroyer"==i.s.units[t-1][c].type&&(s=c);return e.addMove("destroy_unit\t"+t+"\t"+t+"\tspace\t"+r+"\t0\t"+s+"\t1"),void e.playDevotionAssignHit(e,t,r,n,a)}if("cruiser"===o){for(var l=0,u=0;u<i.s.units[t-1].length;u++)"cruiser"==i.s.units[t-1][u].type&&(l=u);return e.addMove("destroy_unit\t"+t+"\t"+t+"\tspace\t"+r+"\t0\t"+l+"\t1"),void e.playDevotionAssignHit(e,t,r,n,a)}}else n(e)})),0}n(e)}else n(e)},this.playDevotionAssignHit=function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=e.returnSectorAndPlanets(r),o=e.returnOpponentInSector(t,r);if(1==a)return this.addMove("assign_hits_capital_ship\t"+o+"\t"+r+"\t1"),void n();for(var s="<div class='sf-readable'>Assign 1 hit to which opponent ship?</div><ul>",c=0;c<i.s.units[o-1].length;c++){var l=i.s.units[o-1][c];if(s+='<li class="textchoice" id="'+c+'">'+l.name,l.capacity>=1){for(var u="",d=0,h=0,p=0;p<l.storage.length;p++)"infantry"==l.storage[p].type&&h++,"fighter"==i.s.units[e.game.player-1][c].storage[p].type&&d++;(h>0||d>0)&&(u+=" ",h>0&&(u+=h+"i"),d>0&&(h>0&&(u+=", "),u+=d+"f"),u+=" "),s+=u}s+="</li>"}s+="</ul>",e.updateStatus(s),$(".textchoice").off(),$(".textchoice").on("click",(function(){$(".textchoice").off();var a=$(this).attr("id");e.addMove("assign_hit\t"+t+"\t"+o+"\t"+t+"\tship\t"+r+"\t"+a+"\t1"),n(e)}))},this.importFaction("faction6",{id:"faction6",name:"Yssaril Tribes",nickname:"Yssaril",homeworld:"sector75",space_units:["carrier","carrier","cruiser","fighter","fighter"],ground_units:["infantry","infantry","infantry","infantry","infantry","pds","spacedock"],tech:["neural-motivator","faction6-stall-tactics","faction6-scheming","faction6-crafty","faction6-flagship"],background:"faction6.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the Yssaril Tribe, a primitive race of swamp-dwelling creatures whose fast instincts and almost unerring ability to change tactics on-the-fly lead many to suspect more is at work than their primitive appearance belies. Good luck!</div>'}),this.importTech("faction6-stall-tactics",{name:"Stall Tactics",faction:"faction6",type:"ability",text:"Discard an Action Card to stall one turn",initialize:function(e,t){null==e.game.players_info[t-1].stall_tactics&&(e.game.players_info[t-1].stall_tactics=0)},gainTechnology:function(e,t,r){"faction6-stall-tactics"==r&&(e.game.players_info[t-1].stall_tactics=1)},menuOption:function(e,t,r){var n={};return"main"===t&&(n.event="stalltactics",n.html='<li class="option" id="stalltactics">discard action card (stall)</li>'),n},menuOptionTriggers:function(e,t,r){return e.doesPlayerHaveTech(r,"faction6-stall-tactics")&&"main"===t&&e.returnPlayerActionCards(r).length>0?1:0},menuOptionActivated:function(e,t,r){return e.game.player==r&&e.playerDiscardActionCards(1,(function(){return e.addMove("resolve\tplay"),e.addMove("setvar\tstate\t0\tactive_player_moved\tint\t0"),e.addMove("player_end_turn\t"+e.game.player),e.addMove("NOTIFY\t"+e.returnFactionNickname(e.game.player)+" stalls by discarding an action card"),e.endTurn(),0})),0}}),this.importTech("faction6-crafty",{name:"Crafty",faction:"faction6",type:"ability",text:"Unlimited action cards. Game effects cannot change.",onNewRound:function(e,t){e.doesPlayerHaveTech(t,"faction6-crafty")&&(e.game.players_info[t-1].action_card_limit=1e3)}}),this.importTech("faction6-scheming",{name:"Scheming",faction:"faction6",type:"ability",text:"Receive bonus card when gaining action cards, then discard one",initialize:function(e,t){null==e.game.players_info[t-1].faction6_scheming&&(e.game.players_info[t-1].faction6_scheming=0)},gainTechnology:function(e,t,r){"faction6-scheming"==r&&(e.game.players_info[t-1].faction6_scheming=1)},gainActionCards:function(e,t,r){return e.doesPlayerHaveTech(t,"faction6-scheming")&&(e.game.queue.push("yssaril_action_card_discard\t"+t+"\t1"),e.game.queue.push("gain\t"+t+"\taction_cards\t1\t0"),e.game.queue.push("DEAL\t2\t"+t+"\t1"),e.game.queue.push("NOTIFY\t"+e.returnFaction(t)+" gains bonus action card and must discard one")),1},handleGameLoop:function(e,t,r){if("yssaril_action_card_discard"==r[0]){var n=parseInt(r[1]),a=parseInt(r[2]);return e.game.queue.splice(t,1),e.game.player===n&&e.playerDiscardActionCards(a,(function(){e.endTurn()})),0}return 1}}),this.importTech("faction6-transparasteel-plating",{name:"Transparasteel Plating",faction:"faction6",prereqs:["green"],color:"green",type:"special",text:"Selectively terminate action cards from players who have passed on your turn",initialize:function(e,t){null==e.game.players_info[t-1].transparasteel_plating&&(e.game.players_info[t-1].transparasteel_plating=0)},gainTechnology:function(e,t,r){"faction6-transparasteel-plating"==r&&(e.game.players_info[t-1].transparasteel_plating=1)},playActionCardTriggers:function(e,t,r,n){return 1==e.game.players_info[t-1].transparasteel_plating&&e.game.player==t&&r!=t&&1==e.game.players_info[r-1].passed?1:0},playActionCardEvent:function(e,t,r,n){return e.game.player==t&&(e.addMove("resolve\taction_card"),e.addMove("resolve\taction_card_post"),e.addMove("expend\t"+e.game.player+"strategy1"),e.endTurn()),0}}),this.importTech("faction6-mageon-implants",{name:"Mageon Implants",faction:"faction6",prereqs:["green","green","green"],color:"green",type:"special",text:"Exhaust to look at other players action cards and take one.",initialize:function(e,t){null==e.game.players_info[t-1].mageon_implants&&(e.game.players_info[t-1].mageon_implants=0,e.game.players_info[t-1].mageon_implants_exhausted=0)},onNewRound:function(e,t){1==e.game.players_info[t-1].mageon_implants&&(e.game.players_info[t-1].mageon_implants=1,e.game.players_info[t-1].mageon_implants_exhausted=0)},gainTechnology:function(e,t,r){"faction6-mageon-implants"==r&&(e.game.players_info[t-1].mageon_implants=1,e.game.players_info[t-1].mageon_implants_exhausted=0)},menuOption:function(e,t,r){return"main"==t?{event:"mageonimplants",html:'<li class="option" id="mageonimplants">exhaust mageon implants</li>'}:{}},menuOptionTriggers:function(e,t,r){return"main"==t&&0==e.game.players_info[r-1].mageon_implants_exhausted&&1==e.game.players_info[r-1].mageon_implants?1:0},menuOptionActivated:function(e,t,r){return e.playerSelectPlayerWithFilter("Select a player from which to take an action card (if possible): ",(function(t){return t!=e.game.player?1:0}),(function(t){return e.addMove("faction6_choose_card_triggered\t"+e.game.player+"\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" pulls a random action card from "+e.returnFaction(t)),e.endTurn(),0}),(function(){e.playerTurn()})),0},handleGameLoop:function(e,t,r){if("faction6_choose_card_triggered"==r[0]){var n=parseInt(r[1]),a=parseInt(r[2]);if(e.game.queue.splice(t,1),e.game.player===a){var i=e.returnPlayerActionCards();e.addMove("faction6_choose_card_return\t"+n+"\t"+a+"\t"+JSON.stringify(i)),e.endTurn()}return 0}if("faction6_choose_card_return"==r[0]){var o=parseInt(r[1]),s=parseInt(r[2]),c=JSON.parse(r[3]);if(e.game.queue.splice(t,1),e.game.player===o){for(var l='<div class="" style="margin-bottom:10px">Select '+e.returnFactionNickname(s)+" action card:</div><ul>",u=0;u<c.length;u++)l+='<li class="option" id="'.concat(u,'">').concat(e.action_cards[c[u]].name,"</li>");l+='<li class="option" id="cancel">skip</li>',e.updateStatus(l),$(".option").off(),$(".option").on("click",(function(){$(".option").off();var t=$(this).attr("id");return"skip"===t?(e.playerTurn(),0):(e.addMove("setvar\tplayers\t"+e.game.player+"\tmageon_implants_exhausted\tint\t1"),e.addMove("pull\t"+e.game.player+"\t"+s+"\taction\t"+c[t]),e.endTurn(),0)}))}return 0}return 1}}),this.importTech("faction6-flagship",{name:"Yssaril Flagship",faction:"faction6",type:"ability",text:"May move through sectors containing other ships",upgradeUnit:function(e,t,r){return e.doesPlayerHaveTech(r.owner,"faction6-flagship")&&"flagship"==r.type&&(r.may_fly_through_sectors_containing_other_ships=1,r.move=3),r}}),this.importStrategyCard("construction",{name:"Construction",rank:4,img:"/strategy/BUILD.png",text:"<b>Player</b> builds Space Dock and PDS or two PDS units.<hr /><b>Others</b> may spend strategy token and activate sector to build PDS or Space Dock.",strategyPrimaryEvent:function(e,t,r){e.game.player==r&&t==r&&(e.addMove("resolve\tstrategy"),e.addMove("strategy\tconstruction\t"+r+"\t2"),e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.playerAcknowledgeNotice("You have played Construction. First you will have the option of producing a PDS or Space Dock. Then you will have the option of producing an additional PDS if you so choose.",(function(){e.playerBuildInfrastructure((function(t){e.playerBuildInfrastructure((function(t){e.updateSectorGraphics(t),e.endTurn()}),2)}),1)})))},strategySecondaryEvent:function(e,t,r){if(e.game.player!=r&&e.game.player==t){var n="<p>Construction has been played. Do you wish to spend 1 strategy token to build a PDS or Space Dock? This will activate the sector (if unactivated): </p><ul>";1==e.game.state.round&&(n='<p class="doublespace">'.concat(e.returnFaction(r)," has played the Construction strategy card. You may spend 1 strategy token to build a PDS or Space Dock on a planet you control (this will activate the sector). You have ").concat(e.game.players_info[t-1].strategy_tokens," strategy tokens. Use this ability? </p><ul>")),e.game.players_info[t-1].strategy_tokens>0&&(n+='<li class="option" id="yes">Yes</li>'),n+='<li class="option" id="no">No</li>',n+="</ul>",e.updateStatus(n),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var t=$(this).attr("id");return"yes"==t&&(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.addMove("expend\t"+e.game.player+"\tstrategy\t1"),e.playerBuildInfrastructure((function(t){e.addMove("activate\t"+e.game.player+"\t"+t),e.updateSectorGraphics(t),e.endTurn()}),1)),"no"==t?(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0):void 0}salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}}}),this.importStrategyCard("diplomacy",{name:"Diplomacy",rank:2,img:"/strategy/DIPLOMACY.png",text:"<b>Player</b> activates non-Byzantium sector for others, refreshes two planets.<hr /><b>Others</b> may spend strategy token to refresh two planets.",strategyPrimaryEvent:function(e,t,r){return e.game.player==r&&t==r&&(e.updateStatus("Select sector to quagmire in diplomatic negotiations, and refresh any planets in that system: "),e.playerSelectSector((function(t){t.indexOf("_")>-1&&(t=e.game.board[t].tile),e.addMove("resolve\tstrategy"),e.addMove("strategy\tdiplomacy\t"+r+"\t2"),e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" uses Diplomacy to activate "+e.game.sectors[t].name);for(var n=0;n<e.game.players_info.length;n++)e.addMove("activate\t"+(n+1)+"\t"+t);var a=e.returnSectorAndPlanets(t);if(a.p)for(var i=0;i<a.p.length;i++)if(a.p[i].owner==e.game.player)for(var o in e.game.planets)a.p[i]==e.game.planets[o]&&e.addMove("unexhaust\t"+e.game.player+"\tplanet\t"+o);e.saveSystemAndPlanets(a),e.endTurn()}))),0},strategySecondaryEvent:function(e,t,r){if(e.game.player!=r&&e.game.player==t){var n="<p>Do you wish to spend 1 strategy token to unexhaust two planet cards? </p><ul>";1==e.game.state.round&&(n='<p class="doublespace">'.concat(e.returnFaction(r)," has just played the Diplomacy strategy card. This lets you to spend 1 strategy token to unexhaust two planet cards. You have ").concat(e.game.players_info[t-1].strategy_tokens," strategy tokens. Use this ability? </p><ul>")),e.game.players_info[t-1].strategy_tokens>0&&(n+='<li class="option" id="yes">Yes</li>'),n+='<li class="option" id="no">No</li>',n+="</ul>",e.updateStatus(n),$(".option").off(),$(".option").on("click",(function(){var t=$(this).attr("id");if("yes"==t){for(var r=e.returnPlayerExhaustedPlanetCards(e.game.player),n=0,a=0,i="<p>Select planets to unexhaust: </p><ul>",o=".cardchoice",s=0;s<r.length;s++)a++,i+='<li class="cardchoice" id="cardchoice_'+r[s]+'">'+e.returnPlanetCard(r[s])+"</li>";0==a&&(i+='<li class="textchoice" id="cancel">cancel (no options)</li>',o=".textchoice"),i+="</ul>",a>=2&&(a=2),e.updateStatus(i),e.lockInterface(),$(o).off(),$(o).on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var t=$(this).attr("id");if("cancel"===t)return e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),void e.endTurn();for(var i=t.split("_"),o="#"+t,s=i[1],c=0,l=0;l<r.length;l++)r[l]===s&&(c=l);n++,e.addMove("unexhaust\t"+e.game.player+"\tplanet\t"+r[c]),$(o).off(),$(o).css("opacity","0.2"),n>=a&&(e.prependMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn())}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}if("no"==t)return e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0}))}}}),this.importStrategyCard("imperial",{name:"Imperial",rank:8,img:"/strategy/EMPIRE.png",text:"<b>Player</b> may score a public objective, gains 1 VP for controlling New Byzantium or secret objective if not.<hr /><b>Others</b> may spend strategy token to purchase secret objective",strategyPrimaryEvent:function(e,t,r){return e.game.player==r&&t==r&&(e.game.planets["new-byzantium"].owner==r?e.playerAcknowledgeNotice("You are granted an additional Victory Point for controlling New Byzantium during Imperial Scoring",(function(){e.playerAcknowledgeNotice("You will first be asked to score your public objective. The game will then allow other players to purchase secret objectives.",(function(){e.addMove("resolve\tstrategy"),e.addMove("strategy\timperial\t"+r+"\t2"),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.playerScoreVictoryPoints(e,(function(e,r,n){r>0&&(null!=e.stage_i_objectives[n]||null!=e.stage_ii_objectives[n])?null!=e.stage_i_objectives[n]?e.stage_i_objectives[n].scoreObjective(e,t,(function(){e.addMove("score\t"+e.game.player+"\t1\tnew-byzantium"),e.addMove("score\t"+t+"\t"+r+"\t"+n),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(n),e.updateStatus("scoring completed"),e.endTurn()})):e.stage_ii_objectives[n].scoreObjective(e,t,(function(){e.addMove("score\t"+e.game.player+"\t1\tnew-byzantium"),e.addMove("score\t"+t+"\t"+r+"\t"+n),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(n),e.updateStatus("scoring completed"),e.endTurn()})):(e.addMove("score\t"+e.game.player+"\t1\tnew-byzantium"),e.updateStatus("scoring completed"),e.endTurn())}),1)}))})):e.playerAcknowledgeNotice("As you do not control New Byzantium during Imperial Scoring, you will be issued an additional Secret Objective",(function(){e.playerAcknowledgeNotice("You will next be asked to score a public objective. The game will then allow other players to purchase secret objectives.",(function(){e.addMove("resolve\tstrategy"),e.addMove("strategy\timperial\t"+r+"\t2"),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.playerScoreVictoryPoints(e,(function(e,n,a){n>0&&(null!=e.stage_i_objectives[a]||null!=e.stage_ii_objectives[a])?null!=e.stage_i_objectives[a]?e.stage_i_objectives[a].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+n+"\t"+a),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(a),e.updateStatus("scoring completed"),e.addMove("gain\t"+r+"\tsecret_objective\t1"),e.addMove("DEAL\t6\t"+r+"\t1"),e.endTurn()})):e.stage_ii_objectives[a].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+n+"\t"+a),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(a),e.updateStatus("scoring completed"),e.addMove("gain\t"+r+"\tsecret_objective\t1"),e.addMove("DEAL\t6\t"+r+"\t1"),e.endTurn()})):(e.addMove("gain\t"+r+"\tsecret_objective\t1"),e.addMove("DEAL\t6\t"+r+"\t1"),e.endTurn())}),1)}))}))),0},strategySecondaryEvent:function(e,t,r){return e.game.state.playing_strategy_card_secondary=1,e.game.player==t&&(e.game.player!=r&&e.game.players_info[t-1].strategy_tokens>0?e.playerBuySecretObjective(2):(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn())),0},strategyTertiaryEvent:function(e,t,r){if(e.game.state.playing_strategy_card_secondary=1,e.game.state.round_scoring=1,t==e.game.player){var n="",a="";return e.game.state.round_scoring=2,e.playerScoreSecretObjective(e,(function(r,i,o){a=i,n=o,e.playerScoreVictoryPoints(e,(function(r,i,o){if(e.updateStatus("scoring completed"),e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),a>0)return null!=e.secret_objectives[n]&&e.secret_objectives[n].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+a+"\t"+n),i>0?(null!=e.stage_i_objectives[o]&&e.stage_i_objectives[o].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+i+"\t"+o),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(n),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(o),e.endTurn()})),null!=e.stage_ii_objectives[o]&&e.stage_ii_objectives[o].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+i+"\t"+o),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(n),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(o),e.endTurn()}))):(e.game.players_info[e.game.player-1].objectives_scored_this_round.push(n),e.endTurn())})),0;i>0?(null!=e.stage_i_objectives[o]&&e.stage_i_objectives[o].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+i+"\t"+o),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(o),e.endTurn()})),null!=e.stage_ii_objectives[o]&&e.stage_ii_objectives[o].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+i+"\t"+o),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(o),e.endTurn()}))):e.endTurn()}),2)})),0}}}),this.importStrategyCard("leadership",{name:"Leadership",rank:1,img:"/strategy/INITIATIVE.png",text:"<b>Player</b> gains three tokens.<hr /><b>All players</b> may purchase tokens for three influence each.",strategyPrimaryEvent:function(e,t,r){return e.game.player==r&&t==r&&(e.addMove("resolve\tstrategy"),e.addMove("strategy\tleadership\t"+r+"\t2"),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.playerAllocateNewTokens(e.game.player,3,0,1,1)),0},strategySecondaryEvent:function(e,t,r){return t==e.game.player?(e.game.player,e.playerBuyTokens(2),0):1}}),this.importStrategyCard("politics",{name:"Politics",rank:3,img:"/strategy/POLITICS.png",text:"<b>Player</b> picks new Speaker and gains 2 action cards.<hr /><b>Others</b> may spend strategy token for two action cards.",strategyPrimaryEvent:function(e,t,r){if(e.game.player===r&&t==r){e.addMove("resolve\tstrategy"),e.addMove("gain\t"+e.game.player+"\taction_cards\t2"),e.addMove("DEAL\t2\t"+e.game.player+"\t2"),e.addMove("NOTIFY\t"+e.returnFaction(t)+" gains action cards"),e.addMove("strategy\tpolitics\t"+r+"\t2"),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length);for(var n=e.returnFactions(),a="Make which player the speaker? <ul>",i=0;i<e.game.players_info.length;i++)a+='<li class="option" id="'+i+'">'+n[e.game.players_info[i].faction].name+"</li>";a+="</ul>",e.updateStatus(a),e.game.player,$(".option").off(),$(".option").on("click",(function(){var t=parseInt($(this).attr("id"))+1;return e.returnAgendaCards(),e.playerAcknowledgeNotice("You will receive two action cards once other players have decided whether to purchase action cards.",(function(){e.addMove("change_speaker\t"+t),e.endTurn()})),0}))}},strategySecondaryEvent:function(e,t,r){e.game.player==t&&(e.game.player!=r&&e.game.players_info[t-1].strategy_tokens>0?e.playerBuyActionCards(2):(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn()))},strategyTertiaryEvent:function(e,t,r){var n=[],a=e.returnAgendaCards(),o=0;if(e.game.player==t){e.game.state.votes_available=[],e.game.state.votes_cast=[],e.game.state.how_voted_on_agenda=[],e.game.state.voted_on_agenda=[],e.game.state.voting_on_agenda=0;for(var s=0;s<e.game.players_info.length;s++){e.game.state.votes_available.push(e.returnAvailableVotes(s+1)),e.game.state.votes_cast.push(0),e.game.state.how_voted_on_agenda[s]="abstain",e.game.state.voted_on_agenda[s]=[],console.log("AP2: "+e.game.state.agendas_per_round);for(var c=0;c<e.game.state.agendas_per_round+2;c++)e.game.state.voted_on_agenda[s].push(0)}}if(console.log("----------------------"),console.log("---"+JSON.stringify(e.game.state.voted_on_agenda)+"---"),console.log("----------------------"),e.game.player===e.game.state.speaker){var l="";for(1==e.game.state.agendas_per_round&&(l+="Select one agenda to advance for consideration in the Galactic Senate.<ul>"),2==e.game.state.agendas_per_round&&(l+="Select two agendas to advance for consideration in the Galactic Senate.<ul>"),3==e.game.state.agendas_per_round&&(l+="Select three agendas to advance for consideration in the Galactic Senate.<ul>"),i=0;i<3&&i<e.game.state.agendas.length;i++)l+='<li class="option" id="'+e.game.state.agendas[i]+'">'+a[e.game.state.agendas[i]].name+"</li>";l+="</ul>",e.updateStatus(l),$(".option").off(),$(".option").on("mouseenter",(function(){var t=$(this).attr("id");e.showAgendaCard(t)})),$(".option").on("mouseleave",(function(){var t=$(this).attr("id");e.hideAgendaCard(t)})),$(".option").on("click",(function(){if(o++,n.push($(this).attr("id")),$(this).hide(),e.hideAgendaCard(n[n.length-1]),o>=e.game.state.agendas_per_round){for(i=1;i>=0;i--)"simultaneous"===e.game.state.agenda_voting_order?(e.addMove("resolve_agenda\t"+n[i]),e.addMove("post_agenda_stage_post\t"+n[i]),e.addMove("post_agenda_stage\t"+n[i]),e.addMove("simultaneous_agenda\t"+n[i]+"\t"+i),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.addMove("pre_agenda_stage_post\t"+n[i]),e.addMove("pre_agenda_stage\t"+n[i]),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length)):(e.addMove("resolve_agenda\t"+n[i]),e.addMove("post_agenda_stage_post\t"+n[i]),e.addMove("post_agenda_stage\t"+n[i]),e.addMove("agenda\t"+n[i]+"\t"+i),e.addMove("pre_agenda_stage_post\t"+n[i]),e.addMove("pre_agenda_stage\t"+n[i]),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length));e.endTurn()}}))}else e.updateStatus("The Speaker is selecting two Agendas for consideration by the Senate")}}),this.importStrategyCard("technology",{name:"Technology",rank:7,img:"/strategy/TECH.png",text:"<b>Player</b> may Research a technology and spend 6 resources to research another.<hr /><b>Others</b> may spend strategy token and 4 resources to research a technology",strategyPrimaryEvent:function(e,t,r){console.log("STRAT PRIM: "+t+" -- "+r),e.game.player==r&&t==r&&e.playerAcknowledgeNotice("You will first have the option of researching a free-technology, and then invited to purchase an additional tech for 6 resources:",(function(){e.playerResearchTechnology((function(n){e.game.players_info[e.game.player-1].tech.push(n),e.addMove("resolve\tstrategy"),e.addMove("strategy\ttechnology\t"+r+"\t2"),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.addMove("purchase\t"+t+"\ttechnology\t"+n),e.endTurn()}))}))},strategySecondaryEvent:function(e,t,r){var n="",a=0;return console.log("STRAT SEC: "+t+" -- "+r),e.game.player==t&&e.game.player!=r?(a=e.game.players_info[e.game.player-1].cost_of_technology_secondary,n="<p>Technology has been played. Do you wish to spend 4 resources and a strategy token to research a technology? </p><ul>",1==e.game.state.round&&(n='<p class="doublespace">'.concat(e.returnFaction(r)," has played the Technology strategy card. You may spend 4 resources and a strategy token to gain a permanent new unit or ability. You have ").concat(e.game.players_info[t-1].strategy_tokens," strategy tokens. Use this ability?</p><ul>")),1!=e.game.players_info[t-1].permanent_research_technology_card_must_not_spend_resources&&1!=e.game.players_info[t-1].temporary_research_technology_card_must_not_spend_resources||(n="<p>Technology has been played. Do you wish to spend a strategy token to research a technology? </p><ul>",a=0),e.returnAvailableResources(e.game.player)>=a&&e.game.players_info[t-1].strategy_tokens>0&&(n+='<li class="option" id="yes">Yes</li>'),n+='<li class="option" id="no">No</li>',n+="</ul>",e.updateStatus(n),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var r=$(this).attr("id");return"yes"===r&&(e.game.players_info[t-1].temporary_research_technology_card_must_not_spend_resources=0,e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.playerSelectResources(a,(function(r){1==r?e.playerResearchTechnology((function(r){e.addMove("purchase\t"+t+"\ttechnology\t"+r),e.addMove("expend\t"+e.game.player+"\tstrategy\t1"),e.endTurn()})):e.endTurn()}))),"no"===r?(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0):void 0}salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")})),0):(e.game.player!=r||(n="<p>Do you wish to spend "+(a=e.game.players_info[e.game.player-1].cost_of_technology_primary)+" resources to research an additional technology? </p><ul>",1!=e.game.players_info[e.game.player-1].permanent_research_technology_card_must_not_spend_resources&&1!=e.game.players_info[e.game.player-1].temporary_research_technology_card_must_not_spend_resources||(n="<p>Do you wish to research an additional technology? </p><ul>",a=0),e.returnAvailableResources(e.game.player)>=a&&(n+='<li class="option" id="yes">Yes</li>'),n+='<li class="option" id="no">No</li>',n+="</ul>",e.updateStatus(n),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var t=$(this).attr("id");return"yes"==t&&(e.game.players_info[e.game.player-1].temporary_research_technology_card_must_not_spend_resources,e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.playerSelectResources(a,(function(t){1==t&&e.playerResearchTechnology((function(t){e.addMove("purchase\t"+e.game.player+"\ttechnology\t"+t),e.endTurn()}))}))),"no"==t?(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0):void 0}salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))),0)}}),this.importAgendaCard("minister-of-technology",{name:"Minister of Technology",type:"Law",text:"Elect a player. They do not need to spend resources to research technology when the technology card is played",initialize:function(e){if(!e.game.state.ministery_of_technology){e.game.state.minster_of_technology=null,e.game.state.minster_of_technology_player=null;for(var t=0;t<e.game.players_info.length;t++)e.game.players_info[t].temporary_research_technology_card_must_not_spend_resources||(e.game.players_info[t].temporary_research_technology_card_must_not_spend_resources=0,e.game.players_info[t].permanent_research_technology_card_must_not_spend_resources=0)}},returnAgendaOptions:function(e){for(var t=[],r=0;r<e.game.players_info.length;r++)t.push(e.returnFaction(r+1));return t},onPass:function(e,t){for(var r=0,n=0;n<e.game.players_info.length;n++)e.returnFaction(n+1)==t&&(r=n);e.game.state.minister_of_technology=1,e.game.state.minister_of_technology_player=r+1,e.game.players_info[r].permanent_research_technology_card_must_not_spend_resources=1,e.game.state.laws.push({agenda:"minister-of-technology",option:t})}}),this.importActionCard("unexpected-breakthrough",{name:"Unexpected Breakthrough",type:"action",text:"Do not spend resources to research technology the next time the Technology card is played",playActionCard:function(e,t,r,n){return e.game.players_info[r-1].temporary_research_technology_card_must_not_spend_resources=1,1}}),this.importStrategyCard("trade",{name:"Trade",rank:5,img:"/strategy/TRADE.png",text:"<b>Player</b> gains 3 trade goods, may refresh any player's commodities.<hr /><b>Others</b> may spend strategy token to refresh their commodities.",strategyPrimaryEvent:function(e,t,r){if(e.game.player==r&&t==r){e.addMove("resolve\tstrategy"),e.addMove("strategy\ttrade\t"+r+"\t2"),e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.addMove("purchase\t"+e.game.player+"\tgoods\t3"),e.addMove("purchase\t"+e.game.player+"\tcommodities\t"+e.game.players_info[e.game.player-1].commodity_limit);for(var n=e.returnFactions(),a="<p>You will receive 3 trade goods and "+e.game.players_info[e.game.player-1].commodity_limit+" commodities. You may choose to replenish the commodities of any other players: </p><ul>",i=0;i<e.game.players_info.length;i++)i!=e.game.player-1&&(a+='<li class="option" id="'+i+'">'+n[e.game.players_info[i].faction].name+"</li>");a+='<li class="option" id="finish">done</li>',e.updateStatus(a),$(".option").off(),$(".option").on("click",(function(){var t=$(this).attr("id");"finish"!=t?(e.addMove("purchase\t"+(parseInt(t)+1)+"\tcommodities\t"+e.game.players_info[t].commodity_limit),$(this).hide()):e.endTurn()}))}},strategySecondaryEvent:function(e,t,r){if(e.game.player==t&&e.game.player!=r){if(e.game.players_info[t-1].commodities==e.game.players_info[t-1].commodity_limit)return e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.updateLog(e.returnFaction(t)+" skips the Trade secondary as they have already refreshed commodities"),e.endTurn(),1;var n="<p>Trade has been played. Do you wish to spend 1 strategy token to refresh your commodities? </p><ul>";if(1==e.game.state.round&&(n='<p class="doublespace">'.concat(e.returnFaction(r)," has played the Trade strategy card. You may spend 1 strategy token to refresh your faction commodities, which may be exchanged with your neighbours on the board for trade goods. You have ").concat(e.game.players_info[t-1].strategy_tokens," strategy tokens. Use this ability? </p><ul>")),e.game.players_info[t-1].strategy_tokens>0&&(n+='<li class="option" id="yes">Yes</li>'),n+='<li class="option" id="no">No</li>',n+="</ul>",e.game.players_info[e.game.player-1].commodities==e.game.players_info[e.game.player-1].commodity_limit)return e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" already has commodities and skips trade secondary"),e.endTurn(),0;e.updateStatus(n),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface(),$(".option").off();var t=$(this).attr("id");return"yes"==t&&(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.addMove("purchase\t"+e.game.player+"\tcommodities\t"+e.game.players_info[e.game.player-1].commodity_limit),e.addMove("expend\t"+e.game.player+"\tstrategy\t1"),e.endTurn()),"no"==t?(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0):void 0}salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}}}),this.importStrategyCard("warfare",{name:"Warfare",rank:6,img:"/strategy/MILITARY.png",text:"<b>Player</b> may de-activate any sector and gain 1 token.<hr /><b>Others</b> may spend strategy token to produce in home system",strategyPrimaryEvent:function(e,t,r){e.game.player==r&&t==r&&(e.updateStatus("Select sector to de-activate."),e.playerSelectSector((function(t){var n=e.returnSectorAndPlanets(t);e.addMove("resolve\tstrategy"),e.addMove("strategy\twarfare\t"+r+"\t2"),e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.addMove("deactivate\t"+r+"\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(r)+" deactivates "+n.s.name),e.playerAllocateNewTokens(e.game.player,1,0,3,0)})))},strategySecondaryEvent:function(e,t,r){if(e.game.player==t&&e.game.player!=r){var n="<p>Do you wish to spend 1 strategy token to produce in your home sector? </p><ul>";1==e.game.state.round&&(n='<p class="doublespace">'.concat(e.returnFaction(r)," has played the Warfare strategy card. You may spend 1 strategy token to produce in your Homeworld without activating the sector. You have ").concat(e.game.players_info[t-1].strategy_tokens," strategy tokens. Use this ability? </p><ul>")),e.game.players_info[t-1].strategy_tokens>0&&(n+='<li class="option" id="yes">Yes</li>'),n+='<li class="option" id="no">No</li>',n+="</ul>",e.updateStatus(n),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var t=$(this).attr("id");return"yes"==t&&e.playerProduceUnits(e.game.players_info[e.game.player-1].homeworld,0,0,2,1),"no"==t?(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0):void 0}salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}}}),this.importSecretObjective("military-catastrophe",{name:"Military Catastrophe",text:"Destroy the flagship of another player",type:"secret",phase:"action",onNewTurn:function(e,t,r){return e.game.state.secret_objective_military_catastrophe=0,0},spaceCombatRoundEnd:function(e,t,r,n){return e.game.players_info[e.game.player-1].units_i_destroyed_this_combat_round.includes("flagship")&&(e.game.state.secret_objective_military_catastrophe=1),0},groundCombatRoundEnd:function(e,t,r,n,a){return 0},canPlayerScoreVictoryPoints:function(e,t){return 1==e.game.state.secret_objective_military_catastrophe?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("flagship-dominance",{name:"Blood Christening",text:"Achieve victory in a space combat in a system containing your flagship. Your flagship must survive this combat",type:"secret",phase:"action",onNewTurn:function(e,t,r){return e.game.state.secret_objective_flagship_dominance=0,0},spaceCombatRoundEnd:function(e,t,r,n){if(e.doesSectorContainPlayerUnit(e.game.player,n,"flagship")){var a=e.returnSectorAndPlanets(n);0==a.s.units[r-1].length&&t==e.game.player&&a.s.units[t-1].length>0&&(e.game.state.secret_objective_flagship_dominance=1),0==a.s.units[t-1].length&&r==e.game.player&&a.s.units[r-1].length>0&&(e.game.state.secret_objective_flagship_dominance=1)}return 0},canPlayerScoreVictoryPoints:function(e,t){return 1==e.game.state.secret_objective_flagship_dominance?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("nuke-them-from-orbit",{name:"Nuke them from Orbit",text:"Destroy the last of a player's ground forces using bombardment",type:"secret",phase:"action",onNewTurn:function(e,t,r){return e.game.state.secret_objective_nuke_from_orbit=0,e.game.state.secret_objective_nuke_from_orbit_how_many_got_nuked=0,0},bombardmentTriggers:function(e,t,r,n,a){e.game.state.secret_objective_nuke_from_orbit_how_many_got_nuked=0;for(var i=e.returnSectorAndPlanets(n).p[a],o=e.returnInfantryOnPlanet(i),s=0;s<i.units.length;s++)i.units[s].length>0&&s+1!=r&&(defender=s+1,e.game.state.secret_objective_nuke_from_orbit_how_many_got_nuked=o);return 0},planetaryDefenseTriggers:function(e,t,r,n){if(e.game.state.secret_objective_nuke_from_orbit_how_many_got_nuked>0){var a=e.returnSectorAndPlanets(r).p[n];0==e.returnInfantryOnPlanet(a)&&(e.game.state.secret_objective_nuke_from_orbit_how_many_got_nuked=1)}return 0},canPlayerScoreVictoryPoints:function(e,t){return 1==e.game.state.secret_objective_nuke_from_orbit?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("anti-imperialism",{name:"Anti-Imperialism",text:"Achieve victory in combat with a player with the most VP",type:"secret",phase:"action",onNewTurn:function(e,t,r){return e.game.state.secret_objective_anti_imperialism=0,0},spaceCombatRoundEnd:function(e,t,r,n){e.game.state.secret_objective_anti_imperialism=0;var a=e.returnSectorAndPlanets(n),i=e.returnPlayersWithHighestVP();return e.game.player==t&&0==a.s.units[r-1].length&&a.s.units[t-1].length>0&&0==e.hasUnresolvedSpaceCombat(t,n)&&i.includes(r)&&(e.game.state.secret_objective_anti_imperialism=1),e.game.player==r&&0==a.s.units[t-1].length&&a.s.units[r-1].length>0&&0==e.hasUnresolvedSpaceCombat(r,n)&&i.includes(t)&&(e.game.state.secret_objective_anti_imperialism=1),0},groundCombatRoundEnd:function(e,t,r,n,a){var i=e.returnSectorAndPlanets(n).p[a],o=e.returnPlayersWithHighestVP();return e.game.player==t&&i.units[t-1].length>0&&0==i.units[r-1].length&&o.includes(r)&&(e.game.state.secret_objective_anti_imperialism=1),e.game.player==r&&i.units[r-1].length>0&&0==i.units[t-1].length&&o.includes(t)&&(e.game.state.secret_objective_anti_imperialism=1),0},canPlayerScoreVictoryPoints:function(e,t){return 1==e.game.state.secret_objective_anti_imperialism?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("end-their-suffering",{name:"End Their Suffering",text:"Eliminate a player with the lowest VP from the board in Space or Ground Combat",type:"secret",phase:"action",onNewTurn:function(e,t,r){return e.game.state.secret_objective_end_their_suffering=0,0},spaceCombatRoundEnd:function(e,t,r,n){var a=e.returnSectorAndPlanets(n),i=e.returnPlayersWithLowestVP();if(e.game.player==t&&0==a.s.units[r-1].length&&i.includes(r)){for(var o in e.game.sectors)if(e.game.sectors[o].units[r-1].length>0)return;for(var s in e.game.planets)if(e.game.planets[s].units[r-1].length>0)return;e.game.state.secret_objective_end_their_suffering=1}if(e.game.player==r&&0==a.s.units[t-1].length&&i.includes(t)){for(var c in e.game.sectors)if(e.game.sectors[c].units[t-1].length>0)return;for(var l in e.game.planets)if(e.game.planets[l].units[t-1].length>0)return;e.game.state.secret_objective_end_their_suffering=1}return 0},groundCombatRoundEnd:function(e,t,r,n,a){var i=e.returnSectorAndPlanets(n).p[a],o=e.returnPlayersWithLowestVP();if(e.game.player==t&&0==i.units[r-1].length&&o.includes(r)){for(var s in e.game.sectors)if(e.game.sectors[s].units[r-1].length>0)return;for(var c in e.game.planets)if(e.game.planets[c].units[r-1].length>0)return;e.game.state.secret_objective_end_their_suffering=1}if(e.game.player==r&&0==i.units[t-1].length&&o.includes(t)){for(var l in e.game.sectors)if(e.game.sectors[l].units[t-1].length>0)return;for(var u in e.game.planets)if(e.game.planets[u].units[t-1].length>0)return;e.game.state.secret_objective_end_their_suffering=1}return 0},canPlayerScoreVictoryPoints:function(e,t){return 1==e.game.state.secret_objective_end_their_suffering?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("establish-a-blockade",{name:"Establish a Blockade",text:"Have at least 1 ship in the same sector as an opponent's spacedock",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var r in e.game.sectors)if(e.game.sectors[r].units[t-1].length>0)for(var n=e.returnSectorAndPlanets(r),a=0;a<n.p.length;a++)for(var i=0;i<n.p[a].units.length;i++)if(i+1!=t)for(var o=0;o<n.p[a].units[i].length;o++)if("spacedock"===n.p[a].units[i][o].type)return 1;return 0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("close-the-trap",{name:"Close the Trap",text:"Destroy another player's last ship in a system using a PDS",type:"secret",phase:"action",onNewTurn:function(e,t,r){return e.game.state.secret_objective_close_the_trap=0,e.game.state.secret_objective_close_the_trap_pds_fired=0,0},modifyPDSRoll:function(e,t,r,n){t==e.game.player&&(e.game.state.secret_objective_close_the_trap_pds_fired=1),r==e.game.player&&(e.game.state.secret_objective_close_the_trap_pds_fired=1)},modifySpaceCombatRoll:function(e,t,r,n){e.game.state.secret_objective_close_the_trap_pds_fired=0},spaceCombatRoundEnd:function(e,t,r,n){var a=e.returnSectorAndPlanets(n);return e.game.player==t&&a.s.units[t-1].length>0&&0==e.hasUnresolvedSpaceCombat(t,n)&&1==e.game.state.secret_objective_close_the_trap_pds_fired&&(e.game.state.secret_objective_close_the_trap=1,e.game.state.secret_objective_close_the_trap_pds_fired=1),e.game.player==r&&a.s.units[r-1].length>0&&0==e.hasUnresolvedSpaceCombat(r,n)&&1==e.game.state.secret_objective_close_the_trap_pds_fired&&(e.game.state.secret_objective_close_the_trap=1,e.game.state.secret_objective_close_the_trap_pds_fired=1),0},canPlayerScoreVictoryPoints:function(e,t){return 1==e.game.state.secret_objective_close_the_trap?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("galactic-observer",{name:"Galactic Observer",text:"Have at least 1 ship in 6 different sectors",type:"secret",canPlayerScoreVictoryPoints:function(e,t){var r=0;for(var n in e.game.board){var a=e.game.board[n].tile;e.doesSectorContainPlayerShip(t,a)&&r++}return r>5?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("master-of-the-ion-cannon",{name:"Master Cannoneer",text:"Have at least 4 PDS units in play",type:"secret",canPlayerScoreVictoryPoints:function(e,t){var r=0;for(var n in e.game.planets)for(var a=e.game.planets[n],i=0;i<a.units[t-1].length;i++)"pds"==a.units[t-1][i].type&&r++;return r>3?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("war-engine",{name:"War Engine",text:"Have three spacedocks in play",type:"secret",canPlayerScoreVictoryPoints:function(e,t){var r=0;for(var n in e.game.planets)for(var a=e.game.planets[n],i=0;i<a.units[t-1].length;i++)"spacedock"==a.units[t-1][i].type&&r++;return r>2?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("wormhole-administrator",{name:"Wormhole Administrator",text:"Have at least 1 ship in systems containing alpha and beta wormholes respectively",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var r=e.returnSectorsWithPlayerShips(t),n=0,a=0,i=0;i<r.length;i++)1==e.game.sectors[r[i]].wormhole&&(n=1),2==e.game.sectors[r[i]].wormhole&&(a=1);return 1==n&&1==a?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("fleet-of-terror",{name:"Fleet of Terror",text:"Have five dreadnaughts in play",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var r=0,n=e.returnSectorsWithPlayerShips(t),a=0;a<n.length;a++)for(var i=0;i<e.game.sectors[n[a]].units[t-1].length;i++)"dreadnaught"===e.game.sectors[n[a]].units[t-1][i].type&&r++;return r>=5?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("cultural-diplomacy",{name:"Cultural Diplomacy",text:"Control at least 4 cultural planets",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var r=0,n=e.returnPlayerPlanetCards(t),a=0;a<n.length;a++)"cultural"===e.game.planets[n[a]].type&&r++;return r>=4?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("act-of-espionage",{name:"Act of Espionage",text:"Discard five action cards from your hard",type:"secret",canPlayerScoreVictoryPoints:function(e,t){return e.returnPlayerActionCards(t).length>=5?1:0},scoreObjective:function(e,t,r){e.game.player==t?e.playerDiscardActionCards(5,(function(){r(1)})):r(0)}}),this.importSecretObjective("space-to-breathe",{name:"Space to Breathe",text:"Have at least 1 ship in 3 systems with no planets",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var r=e.returnSectorsWithPlayerShips(t),n=0,a=0;a<r.length;a++)0==e.game.sectors[r[a]].planets.length&&n++;return n>=3?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("ascendant-technocracy",{name:"Ascendant Technocracy",text:"Research 4 tech upgrades on the same color path",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var r=e.game.players_info[t-1].tech,n=0,a=0,i=0,o=0,s=0;s<r.length;s++)"blue"==e.tech[r[s]].color&&a++,"red"==e.tech[r[s]].color&&i++,"yellow"==e.tech[r[s]].color&&o++,"green"==e.tech[r[s]].color&&n++;return a>=4||o>=4||i>=4||n>=4?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("penal-colonies",{name:"Penal Colonies",text:"Control four planets with hazardous conditions",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var r=0,n=e.returnPlayerPlanetCards(t),a=0;a<n.length;a++)"hazardous"===e.game.planets[n[a]].type&&r++;return r>=4?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("master-of-production",{name:"Master of Production",text:"Control four planets with industrial civilizations",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var r=0,n=e.returnPlayerPlanetCards(t),a=0;a<n.length;a++)"industrial"===e.game.planets[n[a]].type&&r++;return r>=4?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("faction-technologies",{name:"Faction Technologies",text:"Research 2 faction technologies",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var r=e.game.players_info[t-1].tech,n=0,a=0;a<r.length;a++)"special"==e.tech[r[a]].type&&0==r[a].indexOf("faction")&&n++;return n>=2?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("occupy-new-byzantium",{name:"Occupy New Byzantium",text:"Control New Byzantium and have at least 3 ships protecting the sector",type:"secret",canPlayerScoreVictoryPoints:function(e,t){return e.game.planets["new-byzantium"].owner==t&&e.game.sectors["new-byzantium"].units[t-1].length>=3?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("cast-a-long-shadow",{name:"Cast a Long Shadow",text:"Have at least 1 ship in a system adjacent to an opponent homeworld",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var r=e.returnHomeworldSectors(e.game.players_info.length),n=[],a=0;a<r.length;a++)e.game.board[r[a]].tile!=e.game.board[e.game.players_info[t-1].homeworld].tile&&n.push(e.game.board[r[a]].tile);for(var i=0;i<n.length;i++)if(e.isPlayerAdjacentToSector(t,n[i]))return 1;return 0},scoreObjective:function(e,t,r){r(1)}}),this.importStageIPublicObjective("planetary-unity",{name:"Planetary Unity",img:"/imperium/img/objective_card_1_template.png",text:"Control four planets of the same planet type",canPlayerScoreVictoryPoints:function(e,t){for(var r=0,n=0,a=0,i=e.returnPlayerPlanetCards(t),o=0;o<i.length;o++)e.game.planets[i[o]],"hazardous"===e.game.planets[i[o]].type&&r++,"industrial"===e.game.planets[i[o]].type&&a++,"cultural"===e.game.planets[i[o]].type&&n++;return r>=4||n>=4||a>=4?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importStageIPublicObjective("forge-of-war",{name:"Forge of War",img:"/imperium/img/objective_card_1_template.png",text:"Research 2 unit upgrade technologies",canPlayerScoreVictoryPoints:function(e,t){for(var r=e.game.players_info[t-1].tech,n=0,a=0;a<r.length;a++)1==e.tech[r[a]].unit&&n++;return n>=2?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importStageIPublicObjective("diversified-research",{name:"Diversified Research",img:"/imperium/img/objective_card_1_template.png",text:"Research 2 technologies in two different color paths",canPlayerScoreVictoryPoints:function(e,t){for(var r=e.game.players_info[t-1].tech,n=0,a=0,i=0,o=0,s=0;s<r.length;s++)"blue"==e.tech[r[s]].color&&a++,"red"==e.tech[r[s]].color&&i++,"yellow"==e.tech[r[s]].color&&o++,"green"==e.tech[r[s]].color&&n++;var c=0;return a>=2&&c++,o>=2&&c++,i>=2&&c++,n>=2&&c++,c>=2?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importStageIPublicObjective("mining-conglomerate",{name:"Mining Conglomerate",img:"/imperium/img/objective_card_1_template.png",text:"Spend eight resources when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.returnAvailableResources(t)>=8?1:0},scoreObjective:function(e,t,r){e.game.player==t?e.playerSelectResources(8,(function(e){r(e)})):r(0)}}),this.importStageIPublicObjective("conquest-of-science",{name:"Conquest of Science",minPlayers:4,img:"/imperium/img/objective_card_1_template.png",text:"Control 3 planets with tech specialities",canPlayerScoreVictoryPoints:function(e,t){for(var r=0,n=e.returnPlayerPlanetCards(t),a=0;a<n.length;a++)"red"==n[a].bonus&&r++,"blue"==n[a].bonus&&r++,"green"==n[a].bonus&&r++,"yellow"==n[a].bonus&&r++;return r>=3?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importStageIPublicObjective("colonization",{name:"Colonization",img:"/imperium/img/objective_card_1_template.png",text:"Control six planets outside your home system",canPlayerScoreVictoryPoints:function(e,t){for(var r=0,n=0,a=0,i=0,o=e.returnPlayerPlanetCards(t),s=0;s<o.length;s++)"hazardous"===e.game.planets[o[s]].type&&r++,"industrial"===e.game.planets[o[s]].type&&a++,"cultural"===e.game.planets[o[s]].type&&n++,"diplomatic"===e.game.planets[o[s]].type&&i++;return n+r+a+i>=6?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importStageIPublicObjective("grand-gesture",{name:"A Grand Gesture",img:"/imperium/img/objective_card_1_template.png",text:"Spend 3 command or strategy tokens when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.game.players_info[t-1].strategy_tokens+e.game.players_info[t-1].command_tokens>=3?1:0},scoreObjective:function(e,t,r){e.game.player==t?e.playerSelectStrategyAndCommandTokens(3,(function(e){r(e)})):r(0)}}),this.importStageIPublicObjective("establish-trade-outposts",{name:"Establish Trade Outposts",img:"/imperium/img/objective_card_1_template.png",text:"Spend 5 trade goods when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.returnAvailableTradeGoods(t)>=5?1:0},scoreObjective:function(e,t,r){e.game.players_info[t-1].goods-=5,e.displayFactionDashboard(),r(1)}}),this.importStageIPublicObjective("pecuniary-diplomacy",{name:"Pecuniary Diplomacy",img:"/imperium/img/objective_card_1_template.png",text:"Spend 8 influence when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.returnAvailableInfluence(t)>=8?1:0},scoreObjective:function(e,t,r){e.game.player==t?e.playerSelectInfluence(8,(function(e){r(e)})):r(0)}}),this.importStageIIPublicObjective("master-of-commerce",{name:"Master of Commerce",img:"/imperium/img/objective_card_2_template.png",text:"Spend 10 trade goods when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.returnAvailableTradeGoods(t)>=10?1:0},scoreObjective:function(e,t,r){e.game.players_info[t-1].goods-=10,e.displayFactionDashboard(),r(1)}}),this.importStageIIPublicObjective("display-of-dominance",{name:"Display of Dominance",img:"/imperium/img/objective_card_2_template.png",text:"Control at least 1 planet in another player's home sector",canPlayerScoreVictoryPoints:function(e,t){for(var r=[],n=0;n<e.game.players_info.length;n++)for(var a=e.game.board[e.game.players_info[t-1].homeworld].tile,i=e.returnSectorAndPlanets(a),o=0;o<i.p.length;o++)r.push(i.p[o].name);for(var s=e.returnPlayerPlanetCards(t),c=0;c<s.length;c++)if(r.includes(s[c].name))return 1;return 0},scoreObjective:function(e,t,r){r(1)}}),this.importStageIIPublicObjective("technological-empire",{name:"Technological Empire",minPlayers:4,img:"/imperium/img/objective_card_2_template.png",text:"Control 5 planets with tech bonuses",canPlayerScoreVictoryPoints:function(e,t){for(var r=0,n=e.returnPlayerPlanetCards(t),a=0;a<n.length;a++)"red"==n[a].bonus&&r++,"blue"==n[a].bonus&&r++,"green"==n[a].bonus&&r++,"yellow"==n[a].bonus&&r++;return r>=3?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importStageIIPublicObjective("establish-galactic-currency",{name:"Establish Galactic Currency",img:"/imperium/img/objective_card_2_template.png",text:"Spend 16 resources when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.returnAvailableResources(t)>=16?1:0},scoreObjective:function(e,t,r){e.game.player==t?e.playerSelectResources(16,(function(e){r(e)})):r(0)}}),this.importStageIIPublicObjective("master-of-science",{name:"Master of Science",img:"/imperium/img/objective_card_2_template.png",text:"Own 2 tech upgrades in each of 4 tech color paths",canPlayerScoreVictoryPoints:function(e,t){for(var r=e.game.players_info[t-1].tech,n=0,a=0,i=0,o=0,s=0;s<r.length;s++)"blue"==e.tech[r[s]].color&&a++,"red"==e.tech[r[s]].color&&i++,"yellow"==e.tech[r[s]].color&&o++,"green"==e.tech[r[s]].color&&n++;var c=0;return a>=2&&c++,o>=2&&c++,i>=2&&c++,n>=2&&c++,c>=4?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importStageIIPublicObjective("imperial-unity",{name:"Imperial Unity",img:"/imperium/img/objective_card_2_template.png",text:"Control 6 planets of the same planet type",canPlayerScoreVictoryPoints:function(e,t){for(var r=0,n=0,a=0,i=0,o=e.returnPlayerPlanetCards(t),s=0;s<o.length;s++)"hazardous"===e.game.planets[o[s]].type&&r++,"industrial"===e.game.planets[o[s]].type&&a++,"cultural"===e.game.planets[o[s]].type&&n++,"diplomatic"===e.game.planets[o[s]].type&&i++;return r>=6||n>=6||a>=6||i>=6?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importStageIIPublicObjective("advanced-technologies",{name:"Advanced Technologies",img:"/imperium/img/objective_card_2_template.png",text:"Research 3 unit upgrade technologies",canPlayerScoreVictoryPoints:function(e,t){for(var r=e.game.players_info[t-1].tech,n=0,a=0;a<r.length;a++)1==e.tech[r[a]].unit&&n++;return n>=3?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importStageIIPublicObjective("colonial-dominance",{name:"Colonial Dominance",img:"/imperium/img/objective_card_2_template.png",text:"Control 11 planets outside your home system",canPlayerScoreVictoryPoints:function(e,t){for(var r=0,n=0,a=0,i=0,o=e.returnPlayerPlanetCards(t),s=0;s<o.length;s++)"hazardous"===e.game.planets[o[s]].type&&r++,"industrial"===e.game.planets[o[s]].type&&a++,"cultural"===e.game.planets[o[s]].type&&n++,"diplomatic"===e.game.planets[o[s]].type&&i++;return n+r+a+i>=11?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importStageIIPublicObjective("power-broker",{name:"Power Broker",img:"/imperium/img/objective_card_2_template.png",text:"Spend 16 influence when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.returnAvailableInfluence(t)>=16?1:0},scoreObjective:function(e,t,r){e.game.player==t?e.playerSelectInfluence(16,(function(e){r(e)})):r(0)}}),this.importStageIIPublicObjective("cultural-revolution",{name:"Cultural Revolution",img:"/imperium/img/objective_card_2_template.png",text:"Spend 6 command or strategy tokens when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.game.players_info[t-1].strategy_tokens+e.game.players_info[t-1].command_tokens>=6?1:0},scoreObjective:function(e,t,r){e.game.player==t?e.playerSelectStrategyAndCommandTokens(6,(function(e){r(e)})):r(0)}}),this.importAgendaCard("sequential-voting",{name:"Sequential Voting",type:"Law",text:"Players must vote on Agendas in Initiative Order, not Simultaneously",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){e.game.state.agenda_voting_order="for"===t?"initiative":"simultaneous"}}),this.importAgendaCard("shard-of-the-throne",{name:"Shard of the Throne",type:"Law",elect:"player",text:"Elect a Player to earn 1 VP. When this player loses a space combat to another player, they transfer the VP to that player",returnAgendaOptions:function(e){for(var t=[],r=0;r<e.game.players_info.length;r++)t.push(e.returnFaction(r+1));return t},onPass:function(e,t){e.game.state.shard_of_the_throne=1;for(var r=0;r<e.game.players_info.length;r++)t===e.returnFaction(r+1)&&(e.game.state.shard_of_the_throne_player=r+1);var n={agenda:"shard-of-the-throne"};n.option=t,e.game.state.laws.push(n),e.game.players_info[e.game.state.shard_of_the_throne_player-1].vp+=1,e.updateLeaderboard(),e.updateLog(e.returnFaction(e.game.state.shard_of_the_throne_player)+" gains the Shard of the Throne (1VP)")},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"shard-of-the-throne"===e.game.state.laws[t].agenda&&(e.game.state.laws.splice(t,1),t--);return e.game.state.shard_of_the_throne_player=-2,1},spaceCombatRoundEnd:function(e,t,r,n){r==e.game.state.shard_of_the_throne_player&&(e.doesPlayerHaveShipsInSector(r,n)||(e.game.state.shard_of_the_throne_player=t,e.updateLog(e.returnFaction(e.game.state.shard_of_the_throne_player)+" gains the Shard of the Throne (1VP)"),e.game.players_info[t-1].vp+=1,e.game.players_info[r-1].vp-=1,e.updateLeaderboard()))},groundCombatRoundEnd:function(e,t,r,n,a){r==e.game.state.shard_of_the_throne_player&&(e.doesPlayerHaveInfantryOnPlanet(r,n,a)||(e.game.state.shard_of_the_throne_player=t,e.updateLog(e.returnFaction(e.game.state.shard_of_the_throne_player)+" gains the Shard of the Throne (1VP)"),e.game.players_info[t-1].vp+=1,e.game.players_info[r-1].vp-=1,e.updateLeaderboard()))}}),this.importAgendaCard("homeland-defense-act",{name:"Homeland Defense Act",type:"Law",text:"FOR: there is no limit to the number of PDS units on a planet. AGAINST: each player must destroy one PDS unit",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){e.game.state.homeland_defense_act=1;var r={agenda:"homeland-defense-act"};if(r.option=t,e.game.state.laws.push(r),"for"===t&&(e.game.state.pds_limit_per_planet=100),"against"===t)for(var n=0;n<e.game.players_info.length;n++)e.doesPlayerHaveUnitOnBoard(n+1,"pds")&&e.game.queue.push("destroy_a_pds\t"+(n+1));e.game.state.laws.push({agenda:"homeland-defense-act",option:t})},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"homeland-defense-act"===e.game.state.laws[t].agenda&&(e.game.state.laws.splice(t,1),t--);return e.game.state.homeland_defense_act=0,e.game.state.pds_limit_per_planet=2,1},handleGameLoop:function(e,t,r){if("destroy_a_pds"==r[0]){var n=parseInt(r[1]);return e.game.queue.splice(t,1),e.game.player==n&&e.playerSelectUnitWithFilter("Select a PDS unit to destroy: ",(function(e){return null==e?0:"pds"==e.type?1:0}),(function(t){var r=t.sector,n=t.planet_idx,a=t.unit_idx,i=t.unit,o=e.returnSectorAndPlanets(r);if(null==i)return e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" has no PDS units to destroy"),e.endTurn(),0;e.addMove("destroy_unit\t"+e.game.player+"\t"+e.game.player+"\tground\t"+r+"\t"+n+"\t"+a+"\t1"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" destroys a "+i.name+" in "+o.s.name),e.endTurn()})),0}return 1}}),this.importAgendaCard("holy-planet-of-ixth",{name:"Holy Planet of Ixth",type:"Law",elect:"planet",text:"Elect a cultural planet. The planet's controller gains 1 VP. Units cannot be landed, produced or placed on this planet",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return"cultural"===e.type?1:0}))},onPass:function(e,t){e.game.state.holy_planet_of_ixth=1,e.game.state.holy_planet_of_ixth_planet=t;var r={agenda:"holy-planet-of-ixth"};r.option=t,e.game.state.laws.push(r),e.game.planets[t].locked=1;var n=e.game.planets[t].owner;-1!=n&&(e.game.players_info[n-1].vp+=1,e.updateLeaderboard(),e.updateLog(e.returnFaction(n)+" gains 1 VP from Holy Planet of Ixth"))},repealAgenda:function(e){for(var t=null,r=0;r<e.game.state.laws.length;r++)"holy-planet-of-ixth"===e.game.state.laws[r].agenda&&(t=e.game.state.laws[r].option,e.game.state.laws.splice(r,1),r--);return null!=t&&(e.game.state.holy_planet_of_ixth=0,e.game.state.holy_planet_of_ixth_planet=-1,e.game.planets[t].locked=0),1}}),this.importAgendaCard("research-team-biotic",{name:"Research Team: Biotic",type:"Law",elect:"planet",text:"Elect an industrial planet. The owner may exhaust this planet to ignore 1 green technology prerequisite the next time they research a technology",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return"industrial"===e.type?1:0}))},repealAgenda:function(e){for(var t=null,r=0;r<e.game.state.laws.length;r++)"research-team-biotic"===e.game.state.laws[r].agenda&&(t=e.game.state.laws[r].option,e.game.state.laws.splice(r,1),r--);return null!=t&&(e.game.state.research_team_biotic=0,e.game.state.research_team_biotic_planet=-1),1},onPass:function(e,t){e.game.state.research_team_biotic=1,e.game.state.research_team_biotic_planet=t;var r={agenda:"research-team-biotic"};r.option=t,e.game.state.laws.push(r)},menuOption:function(e,t,r){return"main"==t&&e.game.planets[e.game.state.research_team_biotic_planet].owner==r?{event:"research_team_biotic",html:'<li class="option" id="research_team_biotic">use biotic (green) tech-skip</li>'}:{}},menuOptionTriggers:function(e,t,r){return"main"==t&&e.game.planets[e.game.state.research_team_biotic_planet].owner==r&&0==e.game.planets[e.game.state.research_team_biotic_planet].exhausted?1:0},menuOptionActivated:function(e,t,r){return"main"==t&&(e.game.players_info[r-1].temporary_green_tech_prerequisite++,e.game.planets[e.game.state.research_team_biotic_planet].exhausted=1),0}}),this.importAgendaCard("research-team-cybernetic",{name:"Research Team: Cybernetic",type:"Law",elect:"planet",text:"Elect an industrial planet. The owner may exhaust this planet to ignore 1 yellow technology prerequisite the next time they research a technology",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return"industrial"===e.type?1:0}))},onPass:function(e,t){e.game.state.research_team_cybernetic=1,e.game.state.research_team_cybernetic_planet=t;var r={agenda:"research-team-cybernetic"};r.option=t,e.game.state.laws.push(r)},repealAgenda:function(e){for(var t=null,r=0;r<e.game.state.laws.length;r++)"research-team-cybernetic"===e.game.state.laws[r].agenda&&(t=e.game.state.laws[r].option,e.game.state.laws.splice(r,1),r--);return null!=t&&(e.game.state.research_team_cybernetic=0,e.game.state.research_team_cybernetic_planet=-1),1},menuOption:function(e,t,r){return"main"==t&&e.game.planets[e.game.state.research_team_cybernetic_planet].owner==r?{event:"research_team_cybernetic",html:'<li class="option" id="research_team_cybernetic">use cybernetic (yellow) tech-skip</li>'}:{}},menuOptionTriggers:function(e,t,r){return"main"==t&&e.game.planets[e.game.state.research_team_cybernetic_planet].owner==r&&0==e.game.planets[e.game.state.research_team_cybernetic_planet].exhausted?1:0},menuOptionActivated:function(e,t,r){return"main"==t&&(e.game.players_info[r-1].temporary_yellow_tech_prerequisite++,e.game.planets[e.game.state.research_team_cybernetic_planet].exhausted=1),0}}),this.importAgendaCard("research-team-propulsion",{name:"Research Team: Propulsion",type:"Law",elect:"planet",text:"Elect an industrial planet. The owner may exhaust this planet to ignore 1 blue technology prerequisite the next time they research a technology",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return"industrial"===e.type?1:0}))},repealAgenda:function(e){for(var t=null,r=0;r<e.game.state.laws.length;r++)"research-team-propulsion"===e.game.state.laws[r].agenda&&(t=e.game.state.laws[r].option,e.game.state.laws.splice(r,1),r--);return null!=t&&(e.game.state.research_team_propulsion=0,e.game.state.research_team_propulsion_planet=-1),1},onPass:function(e,t){e.game.state.research_team_propulsion=1,e.game.state.research_team_propulsion_planet=t;var r={agenda:"research-team-propulsion"};r.option=t,e.game.state.laws.push(r)},menuOption:function(e,t,r){return"main"==t&&e.game.planets[e.game.state.research_team_propulsion_planet].owner==r?{event:"research_team_propulsion",html:'<li class="option" id="research_team_propulsion">use propulsion (blue) tech-skip</li>'}:{}},menuOptionTriggers:function(e,t,r){return"main"==t&&e.game.planets[e.game.state.research_team_propulsion_planet].owner==r&&0==e.game.planets[e.game.state.research_team_propulsion_planet].exhausted?1:0},menuOptionActivated:function(e,t,r){return"main"==t&&(e.game.players_info[r-1].temporary_blue_tech_prerequisite++,e.game.planets[e.game.state.research_team_propulsion_planet].exhausted=1),0}}),this.importAgendaCard("research-team-warfare",{name:"Research Team: Warfare",type:"Law",elect:"planet",text:"Elect an hazardous planet. The owner may exhaust this planet to ignore 1 red technology prerequisite the next time they research a technology",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return"industrial"===e.type?1:0}))},repealAgenda:function(e){for(var t=null,r=0;r<e.game.state.laws.length;r++)"research-team-warfare"===e.game.state.laws[r].agenda&&(t=e.game.state.laws[r].option,e.game.state.laws.splice(r,1),r--);return null!=t&&(e.game.state.research_team_warfare=0,e.game.state.research_team_warfare_planet=-1),1},onPass:function(e,t){e.game.state.research_team_warfare=1,e.game.state.research_team_warfare_planet=t;var r={agenda:"research-team-warfare"};r.option=t,e.game.state.laws.push(r)},menuOption:function(e,t,r){return"main"==t&&e.game.planets[e.game.state.research_team_warfare_planet].owner==r?{event:"research_team_warfare",html:'<li class="option" id="research_team_warfare">use warfare (red) tech-skip</li>'}:{}},menuOptionTriggers:function(e,t,r){return"main"==t&&e.game.planets[e.game.state.research_team_warfare_planet].owner==r&&0==e.game.planets[e.game.state.research_team_warfare_planet].exhausted?1:0},menuOptionActivated:function(e,t,r){return"main"==t&&(e.game.players_info[r-1].temporary_red_tech_prerequisite++,e.game.planets[e.game.state.research_team_warfare_planet].exhausted=1),0}}),this.importAgendaCard("demilitarized-zone",{name:"Demilitarized Zone",type:"Law",elect:"planet",text:"Elect a cultural planet. All units are destroyed and cannot be landed, produced or placed on this planet",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return"cultural"===e.type?1:0}))},onPass:function(e,t){e.game.state.demilitarized_zone=1,e.game.state.demilitarized_zone_planet=t;var r={agenda:"demilitarized-zone"};r.option=t,e.game.state.laws.push(r),e.game.planets[t].units=[];for(var n=0;n<e.game.players_info.length;n++)e.game.planets[t].units.push([]);e.game.planets[t].locked=1},repealAgenda:function(e){for(var t=null,r=0;r<e.game.state.laws.length;r++)"demilitarized-zone"===e.game.state.laws[r].agenda&&(t=e.game.state.laws[r].option,e.game.state.laws.splice(r,1),r--);return null!=t&&(e.game.state.demilitarized_zone=0,e.game.state.demilitarized_zone_planet=-1,e.game.planets[t].locked=0),1}}),this.importAgendaCard("core-mining",{name:"Core Mining",type:"Law",elect:"planet",text:"Elect a hazardous planet. Destroy half the infantry on that planet and increase its resource value by +2",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return"hazardous"===e.type?1:0}))},repealAgenda:function(e){for(var t=null,r=0;r<e.game.state.laws.length;r++)"core-mining"===e.game.state.laws[r].agenda&&(t=e.game.state.laws[r].option,e.game.state.laws.splice(r,1),r--);return null!=t&&(e.game.state.core_mining=0,e.game.state.core_mining_planet=-1,e.game.planets[t].locked=0,e.game.planets[t].resources-=2),1},onPass:function(e,t){e.game.state.core_mining=1,e.game.state.core_mining_planet=t;var r={agenda:"core-mining"};r.option=t,e.game.state.laws.push(r),e.returnPlanetsOnBoard((function(e){return"hazardous"===e.type?1:0}));for(var n=t,a=0;a<e.game.planets[n].units.length;a++)for(var i=1,o=0;o<e.game.planets[n].units[a].length;o++)"infantry"==e.game.planets[n].units[a][o].type&&(1==i?(e.game.planets[n].units[a].splice(o,1),o--,i=0):i=1);e.game.planets[t].resources+=2}}),this.importAgendaCard("anti-intellectual-revolution",{name:"Anti-Intellectual Revolution",type:"Law",text:"FOR: players must destroy a capital ship in order to play the Technology card. AGAINST: at the start of the next round, each player exhausts one planet for each technology they have.",returnAgendaOptions:function(e){return["for","against"]},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"anti-intellectual-revolution"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);var r=e.strategy_cards.technology;return r.strategyPrimaryEventBackup&&(r.strategyPrimaryEvent=r.strategyPrimaryEventBackup),r.strategySecondaryEventBackup&&(r.strategySecondaryEvent=r.strategySecondaryEventBackup),1},initialize:function(e,t){if("for"===t){var r=e.strategy_cards.technology,n=r.strategySecondaryEvent;r.strategySecondaryEventBackup=n,r.strategySecondaryEvent=function(e,t,r){e.game.player==t&&e.game.player!=r&&e.playerAcknowledgeNotice("Anti-Intellectual Revolution is in play. Do you wish to destroy a capital ship to research technology?",(function(){e.playerSelectUnitWithFilter("Select a capital ship to destroy: ",(function(e){return"destroyer"==e.type||"cruiser"==e.type||"carrier"==e.type||"dreadnaught"==e.type||"flagship"==e.type||"warsun"==e.type?1:0}),(function(a){var i=a.sector,o=a.planet_idx,s=a.unit_idx,c=a.unit,l=e.returnSectorAndPlanets(i);-1==o?e.addMove("destroy_unit\t"+e.game.player+"\t"+e.game.player+"\tspace\t"+i+"\t"+o+"\t"+s+"\t1"):e.addMove("destroy_unit\t"+e.game.player+"\t"+e.game.player+"\tground\t"+i+"\t"+o+"\t"+s+"\t1"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" destroys a "+c.name+" in "+l.s.name),n(e,t,r)}))}))};var a=r.strategyPrimaryEvent;r.strategyPrimaryEventBackup=a,r.strategyPrimaryEvent=function(e,t,r){e.game.player==r&&t==r&&e.playerAcknowledgeNotice("Anti-Intellectual Revolution is in play. Do you wish to destroy a capital ship to research technology?",(function(){e.playerSelectUnitWithFilter("Select a capital ship to destroy: ",(function(e){return"destroyer"==e.type||"cruiser"==e.type||"carrier"==e.type||"dreadnaught"==e.type||"flagship"==e.type||"warsun"==e.type?1:0}),(function(n){var i=n.sector,o=n.planet_idx,s=n.unit_idx,c=n.unit,l=e.returnSectorAndPlanets(i);-1==o?e.addMove("destroy_unit\t"+e.game.player+"\t"+e.game.player+"\tspace\t"+i+"\t"+o+"\t"+s+"\t1"):e.addMove("destroy_unit\t"+e.game.player+"\t"+e.game.player+"\tground\t"+i+"\t"+o+"\t"+s+"\t1"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" destroys a "+c.name+" in "+l.s.name),a(e,t,r)}))}))}}if("against"===t)for(var i=0;i<e.game.players_info.length;i++)e.game.players_info[i].must_exhaust_at_round_start.push("planet","planet")},onPass:function(e,t){e.game.state.anti_intellectual_revolution=1;var r={agenda:"anti-intellectual-revolution"};r.option=t,e.game.state.laws.push(r),this.initialize(e,t)}}),this.importAgendaCard("unconventional-measures",{name:"Unconventional Measures",type:"Directive",text:"FOR: each player that votes 'for' draws 2 action cards. AGAINST: each player that votes 'for' discards their action cards.",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){if("for"===t)for(var r=0;r<e.game.players_info.length;r++)e.game.state.choices[e.game.state.how_voted_on_agenda[r]]==t&&(e.game.queue.push("gain\t2\t"+(r+2)+"\taction_cards\t2"),e.game.queue.push("DEAL\t2\t"+(r+1)+"\t2"),e.game.queue.push("NOTIFY\tdealing two action cards to player "+(r+1)));if("against"===t)for(var n=0;n<e.game.players_info.length;n++)console.log("uncon plyr: "+n),console.log(" how voted: "+e.game.state.choices[e.game.state.how_voted_on_agenda[n]]),"for"==e.game.state.choices[e.game.state.how_voted_on_agenda[n]]&&(e.game.player==n+1?(alert("clearing out my action cards!"),e.game.players_info[n].action_cards_in_hand=0,e.game.deck[1].hand=[]):(alert("clearing out my action cards!"),e.game.players_info[n].action_cards_in_hand=0))}}),this.importAgendaCard("seeds-of-an-empire",{name:"Seeds of an Empire",type:"Directive",text:"FOR: the player(s) with the most VP gain a VP. AGAINST: the players with the least VP gain a VP",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){var r=e.returnInitiativeOrder();if(console.log("seeds of the empire: "+t),"for"===t){for(var n=0,a=0;a<r.length;a++)n<e.game.players_info[r[a]-1].vp&&(n=e.game.players_info[r[a]-1].vp),e.game.state.seeds_of_an_empire=r[a];for(var i=0;i<r.length;i++)if(n==e.game.players_info[r[i]-1].vp&&(e.game.players_info[r[i]-1].vp+=1,e.game.queue.push("NOTIFY\t"+e.returnFaction(r[i])+" gains 1 VP from Seeds of an Empire"),e.game.state.seeds_of_an_empire=r[i],e.checkForVictory()))return 0}if("against"===t){for(var o=1e4,s=0;s<r.length;s++)o>e.game.players_info[r[s]-1].vp&&(o=e.game.players_info[r[s]-1].vp);for(var c=0;c<r.length;c++)if(o==e.game.players_info[r[c]-1].vp&&(e.game.players_info[r[c]-1].vp+=1,e.game.queue.push("NOTIFY\t"+e.returnFaction(r[c]+1)+" gains 1 VP from Seeds of an Empire"),e.game.state.seeds_of_an_empire=r[c],e.checkForVictory()))return 0}return e.updateLeaderboard(),1}}),this.importAgendaCard("space-cadet",{name:"Space Cadet",type:"Law",text:"Any player more than 3 VP behind the lead must henceforth be referred to as an Irrelevant Loser",returnAgendaOptions:function(e){return["for","against"]},initialize:function(e,t){null==e.space_cadet_initialized&&(e.space_cadet_initialized=1,1==e.game.state.space_cadet&&(e.returnFactionNamePreSpaceCadet=e.returnFactionName,e.returnFactionName=function(e,t){for(var r=0,n=0;n<e.game.players_info.length;n++)r<e.game.players_info[n].vp&&(r=e.game.players_info[n].vp);return e.game.players_info[t-1].vp<=r-3?"Irrelevant Loser":e.returnFactionNamePreSpaceCadet(e,t)},e.returnFactionNameNicknamePreSpaceCadet=e.returnFactionNameNickname,e.returnFactionNameNickname=function(e,t){for(var r=0,n=0;n<e.game.players_info.length;n++)r<e.game.players_info[n].vp&&(r=e.game.players_info[n].vp);return e.game.players_info[t-1].vp<=r-3?"Loser":e.returnFactionNameNicknamePreSpaceCadet(e,t)}))},onPass:function(e,t){if("for"==t){e.game.state.space_cadet=1;var r={agenda:"space-cadet"};r.option=t,e.game.state.laws.push(r),this.initialize(e)}},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"space-cadet"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);return e.game.state.space_cadet=0,e.returnFactionName=e.returnFactionNamePreSpaceCadet,1}}),this.importAgendaCard("galactic-threat",{name:"Galactic Threat",type:"Law",text:"Elect a player. They must henceforth be referred to as the Galatic Threat",returnAgendaOptions:function(e){for(var t=[],r=0;r<e.game.players_info.length;r++)t.push(e.returnFaction(r+1));return t},initialize:function(e,t){null==e.galactic_threat_initialized&&(e.galactic_threat_initialized=1,1==e.game.state.galactic_threat&&(e.returnFactionNamePreGalacticThreat=e.returnFactionName,e.returnFactionName=function(e,t){return e.game.state.galactic_threat_player==t?"The Galactic Threat":e.returnFactionNamePreGalacticThreat(e,t)},e.returnFactionNameNicknamePreGalacticThreat=e.returnFactionNameNickname,e.returnFactionNameNickname=function(e,t){return e.game.state.galactic_threat_player==t?"Threat":e.returnFactionNameNicknamePreGalacticThreat(e,t)}))},onPass:function(e,t){e.game.state.galactic_threat=1;for(var r=0;r<e.game.players_info.length;r++)t===e.returnFaction(r+1)&&(e.game.state.galactic_threat_player=r+1);var n={agenda:"galactic-threat"};n.option=t,e.game.state.laws.push(n),this.initialize(e)},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"galactic-threat"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);return e.game.state.galactic_threat=0,e.game.state.galactic_threat_initialized=0,e.returnFactionNamePreGalacticThreat&&(e.returnFactionName=e.returnFactionNamePreGalacticThreat),1}}),this.importAgendaCard("committee-formation",{name:"Committee Formation",type:"Law",elect:"player",text:"Elect a player. They may form a committee to vote on which player is elected in a future agenda",returnAgendaOptions:function(e){for(var t=[],r=0;r<e.game.players_info.length;r++)t.push(e.returnFaction(r+1));return t},preAgendaStageTriggers:function(e,t,r){return 1==e.game.state.committee_formation&&e.game.state.committee_formation_player==t&&"player"==e.agenda_cards[r].elect?1:0},preAgendaStageEvent:function(e,t,r){if(t!=e.game.player){var n=e.returnFaction(e.game.player)+" is deciding whether to Form a Committee";return e.updateStatus(n),0}return e.updateStatus('Do you wish to use Committee Formation to select the winner yourself? <ul><li class="textchoice" id="yes">assemble the committee</li><li class="textchoice" id="no">not this time</li></ul>'),$(".textchoice").off(),$(".textchoice").on("click",(function(){"no"==$(this).attr("id")&&e.endTurn();for(var r=0;r<e.game.players_info.length;r++)r!=e.game.player-1&&e.addMove("rider\t"+t+"\tassassinate-representative\t-1");e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" forms a committee..."),e.endTurn()})),0},onPass:function(e,t){e.game.state.committee_formation=1;for(var r=0;r<e.game.players_info.length;r++)t===e.returnFaction(r+1)&&(e.game.state.committee_formation_player=r+1);var n={agenda:"committee-formation"};n.option=t,console.log("pushing onto law: "+JSON.stringify(n)),e.game.state.laws.push(n)},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"committee_formation"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);return e.game.state.committee_formation=0,e.game.state.committee_formation_player=-1,1}}),this.importAgendaCard("minister-of-policy",{name:"Minister of Policy",type:"Law",elect:"player",text:"Elect a player. They draw an extra action card at the start of each round",returnAgendaOptions:function(e){for(var t=[],r=0;r<e.game.players_info.length;r++)t.push(e.returnFaction(r+1));return t},onPass:function(e,t){e.game.state.minister_of_policy=1,e.game.state.minister_of_policy_player=t;for(var r=0;r<e.game.players_info.length;r++)t===e.returnFaction(r+1)&&(e.game.state.minister_of_policy_player=r+1);e.game.players_info[e.game.state.minister_of_policy_player-1].action_cards_bonus_when_issued++;var n={agenda:"minister-of-policy"};n.option=t,e.game.state.laws.push(n)},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"minister-of-policy"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);return e.game.state.minister_of_policy=0,e.game.players_info[e.game.state.minister_of_policy_player-1].action_cards_bonus_when_issued--,e.game.state.minister_of_policy_player=-1,1}}),this.importAgendaCard("executive-sanctions",{name:"Executive Sanctions",type:"Law",text:"Players may have a maximum of 3 action cards in their hands at all times",returnAgendaOptions:function(e){return["support","oppose"]},onPass:function(e,t){if("support"==this.returnAgendaOptions(e)[t])for(var r=0;r<e.game.players_info.length;r++)e.game.players_info[r].action_card_limit=3;var n={agenda:"executive-sanctions"};return n.option=t,e.game.state.laws.push(n),1},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"executive-sanctions"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);for(var r=0;r<e.game.players_info.length;r++)3==e.game.players_info[r].action_card_limit&&(e.game.players_info[r].action_card_limit=7);return 1}}),this.importAgendaCard("fleet-limitations",{name:"Fleet Limitations",type:"Law",text:"Players may have a maximum of four tokens in their fleet supply.",img:"/imperium/img/agenda_card_template.png",returnAgendaOptions:function(e){return["support","oppose"]},onPass:function(e,t){if("support"==this.returnAgendaOptions(e)[t])for(var r=0;r<e.game.players_info.length;r++)e.game.players_info[r].fleet_supply_limit=4,e.game.players_info[r].fleet_supply>=4&&(e.game.players_info[r].fleet_supply=4);return 1},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"fleet-limitations"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);for(var r=0;r<e.game.players_info.length;r++)e.game.players_info[r].fleet_supply_limit=16;return 1}}),this.importAgendaCard("restricted-conscription",{name:"Restricted Conscription",type:"Law",text:"Production cost for infantry and fighters is 1 rather than 0.5 resources",img:"/imperium/img/agenda_card_template.png",returnAgendaOptions:function(e){return["support","oppose"]},onPass:function(e,t){"support"==this.returnAgendaOptions(e)[t]&&(e.units.infantry.cost=1,e.units.fighter.cost=1);var r={agenda:"restricted-conscription"};return r.option=t,e.game.state.laws.push(r),1},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"restricted-conscription"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);return e.units.infantry.cost=.5,e.units.fighter.cost=.5,1}}),this.importAgendaCard("wormhole-travel-ban",{name:"Wormhole Travel Ban",type:"Law",text:"All wormholes are closed.",img:"/imperium/img/agenda_card_template.png",returnAgendaOptions:function(e){return["support","oppose"]},onPass:function(e,t){"support"==this.returnAgendaOptions(e)[t]&&(e.game.state.wormholes_open=0);var r={agenda:"wormhole-travel-ban"};return r.option=t,e.game.state.laws.push(r),1},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"wormhole-travel-ban"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);return e.game.state.wormholes_open=1,1}}),this.importAgendaCard("archived-secret",{name:"Archived Secret",type:"Directive",text:"Elected Player draws one secret objective",returnAgendaOptions:function(e){for(var t=[],r=0;r<e.game.players_info.length;r++)t.push(e.returnFaction(r+1));return t},onPass:function(e,t){e.game.state.archived_secret=1;for(var r=0;r<e.game.players_info.length;r++)t===e.returnFaction(r+1)&&(e.game.state.archived_secret_player=r+1);return e.game.queue.push("gain\t"+e.game.state.archived_secret_player+"\tsecret_objectives\t1"),e.game.queue.push("DEAL\t6\t"+e.game.state.archived_secret_player+"\t1"),1}}),this.importAgendaCard("economic-equality",{name:"Economic Equality",type:"Directive",text:"FOR: all players discard all trade goods, AGAINST: players lose all trade goods and then gain 5 trade goods. ",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){if(e.game.state.economic_equality=1,"for"===t){for(var r=0;r<e.game.players_info.length;r++)e.game.players_info[r].goods=0;e.updateLog("All players have 0 trade goods")}if("against"===t){for(var n=0;n<e.game.players_info.length;n++)e.game.players_info[n].goods=5;e.updateLog("All players have 5 trade goods")}return e.displayFactionDashboard(),1}}),this.importAgendaCard("mutiny",{name:"Mutiny",type:"Directive",text:"FOR: all who vote FOR gain 1 VP, AGAINST: all players who vote FOR lose 1 VP",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){if(e.game.state.mutiny=1,"for"===t)for(var r=0;r<e.game.players_info.length;r++)"for"==e.game.state.choices[e.game.state.how_voted_on_agenda[r]]&&(e.game.players_info[r].vp++,e.updateLog(e.returnFaction(r+1)+" gains 1 VP from Mutiny"));if("against"===t)for(var n=0;n<e.game.players_info.length;n++)"for"===e.game.state.choices[e.game.state.how_voted_on_agenda[n]]&&(e.game.players_info[n].vp--,e.updateLog(e.returnFaction(n+1)+" loses 1 VP from Mutiny"));return e.updateLeaderboard(),1}}),this.importAgendaCard("conventions-of-war",{name:"Conventions of War",type:"Law",text:"FOR: cultural planets are exempt from bombardment, AGAINST: players who vote against discard all action cards",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){if(e.game.state.conventions_of_war=1,"for"===t)for(var r=0;r<e.game.players_info.length;r++)"against"==e.game.state.choices[e.game.state.how_voted_on_agenda[r]]&&(e.game.players_info[r].action_cards_in_hand=0,e.game.player==r+1&&(e.game.deck[1].hand=[]));"against"===t&&(e.game.state.bombardment_against_cultural_planets=0);var n={agenda:"conventions-of-war"};return n.option=t,e.game.state.laws.push(n),1},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"conventions-of-war"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);return e.game.state.bombardment_against_cultural_planets=1,1}}),this.importAgendaCard("swords-to-ploughshares",{name:"Swords to Ploughshares",type:"Directive",text:"FOR: everyone destroys half their infantry (round up) on every planet, AGAINST: everyone gains 1 infantry each planet",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){if(e.game.state.swords_to_ploughshares=1,"against"===t)for(var r in e.game.planets)-1!=e.game.planets[r].owner&&e.game.planets[r].units[e.game.planets[r].owner-1].push(e.returnUnit("infantry",e.game.planets[r].owner));if("for"===t)for(var n=0;n<e.game.players_info.length;n++){var a=0;for(var i in e.game.planets)if(e.game.planets[i].owner==n+1){for(var o=0,s=0;s<e.game.planets[i].units[n].length;s++)"infantry"==e.game.planets[i].units[n][s].type&&(1==o?(o=0,a++):o=1);for(var c=0,l=0;l<a&&c<e.game.planets[i].units[n].length;c++)"infantry"==e.game.planets[i].units[n][c].type&&(e.game.planets[i].units[n].splice(c,1),c--,l++)}1==a?e.updateLog(e.returnFaction(n+1)+" gains "+a+" trade good"):e.updateLog(e.returnFaction(n+1)+" gains "+a+" trade goods")}return 1}}),this.importAgendaCard("wormhole-research",{name:"Wormhole Research",type:"Directive",text:"FOR: all ships in sectors with alpha and beta wormholes are destroyed, their owners research 1 technology, AGAINST: everyone who voted against loses a command token",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){e.game.state.wormhole_research=1;var r=[];if("for"===t){for(var n in e.game.sectors)if(0!=e.game.sectors[n].wormhole)for(var a=0;a<e.game.sectors[n].units.length;a++)e.game.sectors[n].units[a].length>0&&(e.game.sectors[n].units[a]=[],r.includes(a+1)||r.push(a+1));r.sort();for(var i=0;i<r.length;i++)e.game.queue.push("research\t"+r[i])}if("against"===t){for(var o=0;o<e.game.players_info.length;o++)"against"==e.game.state.choices[e.game.state.how_voted_on_agenda[o]]&&(e.game.players_info[o].command_tokens--,e.game.players_info[o].command_tokens<=0&&(e.game.players_info[o].command_tokens=0));e.updateTokenDisplay()}return 1}}),this.importAgendaCard("new-constitution",{name:"New Constitution",type:"Directive",text:"FOR: remove all laws in play and exhaust all homeworld at the start of the next round",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){e.game.state.new_constitution=1;for(var r=e.game.state.laws.length-1;r>0;r--){var n=e.game.state.laws[r].agenda;e.agenda_cards[n].repealAgenda(e)}if("for"===t){e.game.state.laws=[];for(var a=0;a<e.game.players_info.length;a++)e.game.players_info[a].must_exhaust_at_round_start.push("homeworld")}return 1}}),this.importAgendaCard("shared-research",{name:"Shared Research",type:"Directive",text:"FOR: each player activates their home system, AGAINST: units can move through nebulas",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){if(e.game.state.shared_research=1,"for"===t)for(var r=0;r<e.game.players_info.length;r++)e.game.queue.push("activate\t"+(r+1)+"\t"+e.returnPlayerHomeworld(r+1));return"against"===t&&(e.game.players_info[i].fly_through_nebulas=1),1}}),this.importAgendaCard("wormhole-reconstruction",{name:"Wormhole Reconstruction",type:"Directive",text:"FOR: alpha and beta wormholes connect to each other, AGAINST:  each player activates all systems with alpha and beta wormholes",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){if(e.game.state.wormhole_reconstruction=1,"for"===t&&(e.game.state.wormholes_adjacent=1),"against"===t)for(var r in e.game.sectors)if(1==e.game.sectors[r].wormhole||2==e.game.sectors[r].wormhole){for(var n=0;n<e.game.players_info.length;n++)e.game.sectors[r].activated[n]=1;e.returnSectorAndPlanets(r).s&&e.updateSectorGraphics(r)}return 1}}),this.importAgendaCard("crown-of-emphidia",{name:"Crown of Emphidia",type:"Law",elect:"player",text:"Elect a Player to earn 1 VP. When this player loses a homeworld to another player, they lose 1 VP and their opponent gains 1 VP",returnAgendaOptions:function(e){for(var t=[],r=0;r<e.game.players_info.length;r++)t.push(e.returnFaction(r+1));return t},onPass:function(e,t){e.game.state.crown_of_emphidia=1;for(var r=0;r<e.game.players_info.length;r++)t===e.returnFaction(r+1)&&(e.game.state.crown_of_emphidia_player=r+1);var n={agenda:"crown-of-emphidia"};n.option=t,e.game.state.laws.push(n),e.game.players_info[e.game.state.crown_of_emphidia_player-1].vp+=1,e.updateLeaderboard(),e.updateLog(e.returnFaction(e.game.state.crown_of_emphidia_player)+" gains 1 VP from Crown of Emphidia")},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"crown-of-emphidia"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);return e.game.state.crown_of_emphidia=-1,e.game.state.crown_of_emphidia_player=-1,1},groundCombatRoundEnd:function(e,t,r,n,a){return r==e.game.state.crown_of_emphidia_player&&(e.doesPlayerHaveInfantryOnPlanet(r,n,a)||e.doesPlayerHaveInfantryOnPlanet(t,n,a)&&(e.updateLog(e.returnFaction(e.game.state.crown_of_emphidia_player)+" loses the Crown of Emphidia (-1VP)"),e.game.state.crown_of_emphidia_player=t,e.updateLog(e.returnFaction(e.game.state.crown_of_emphidia_player)+" gains the Crown of Emphidia (+1VP)"),e.game.players_info[t-1].vp+=1,e.game.players_info[r-1].vp-=1,e.updateLeaderboard())),1}}),this.importAgendaCard("terraforming-initiative",{name:"Terraforming Initiative",type:"Law",elect:"planet",text:"Elect a hazardous planet. The resource and influence values of this planet are increased by 1 point each",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return"hazardous"===e.type?1:0}))},onPass:function(e,t){e.game.state.terraforming_initiative=1,e.game.state.terraforming_initiative_planet=t;var r={agenda:"terraforming-initiative"};return r.option=t,e.game.state.laws.push(r),e.game.planets[t].resources++,e.game.planets[t].influence++,e.updateLog(e.game.planets[t].name+" increases resource and influence through terraforming"),1},repealAgenda:function(e){for(var t=null,r=0;r<e.game.state.laws.length;r++)"terraforming-initiative"===e.game.state.laws[r].agenda&&(t=e.game.state.laws[r].option,e.game.state.laws.splice(r,1),r--);return e.game.state.terraforming_initiative=-1,t&&e.game.planets[t]&&(e.game.planets[t].resources--,e.game.planets[t].influence--),e.game.state.terraforming_initiative_planet=-1,1}}),this.importAgendaCard("senate-sanctuary",{name:"Senate Sanctuary",type:"Law",elect:"planet",text:"Elect a cultural planet. The influence value of this planet is increased by 2 points",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return"cultural"===e.type?1:0}))},repealAgenda:function(e){for(var t=null,r=0;r<e.game.state.laws.length;r++)"senate-sanctuary"===e.game.state.laws[r].agenda&&(t=e.game.state.laws[r].option,e.game.state.laws.splice(r,1),r--);return t&&e.game.planets[t]&&(e.game.planets[t].influence-=2),e.game.state.senate_sanctuary=0,e.game.state.senate_sanctuary_planet=-1,1},onPass:function(e,t){e.game.state.senate_sanctuary=1,e.game.state.senate_sanctuary_planet=t;var r={agenda:"senate-sanctuary"};return r.option=t,e.game.state.laws.push(r),e.game.planets[t].influence+=2,e.updateLog(e.game.planets[t].name+" increases influence value by 2"),1}}),this.importAgendaCard("publicize-weapons-schematics",{name:"Publicize Weapons Schematics",type:"Directive",text:"FOR: all players now have War Suns technology, AGAINST: all players with War Suns technology discard all action cards",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){if(e.game.state.publicize_weapons_schematics=1,"for"===t)for(var r=0;r<e.game.players_info.length;r++)e.doesPlayerHaveTech(r+1,"warsun")||e.game.queue.push("purchase\t"+(r+1)+"\ttech\twarsun");if("against"===t)for(var n=0;n<e.game.players_info.length;n++)e.doesPlayerHaveTech(n+1,"warsun")&&(e.game.players_info[n].action_cards_in_hand=0,e.game.player==n+1&&(e.game.deck[1].hand=[]),e.updateLog(e.returnFaction(n+1)+" discards all Action Cards"));return 1}}),this.importAgendaCard("incentive-program",{name:"Incentive Program",type:"Directive",text:"FOR: reveal a 1 VP public objective, AGAINST: reveal a 2 VP public objective",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){if(e.game.state.incentive_program=1,"for"===t){e.game.queue.push("revealobjectives");for(var r=1;r<=e.game.players_info.length;r++)e.game.queue.push("FLIPCARD\t4\t1\t2\t"+r)}if("against"===t){e.game.queue.push("revealobjectives");for(var n=1;n<=e.game.players_info.length;n++)e.game.queue.push("FLIPCARD\t5\t1\t3\t"+n)}return 1}}),this.importAgendaCard("colonial-redistribution",{name:"Colonial Redistribution",type:"Directive",elect:"planet",text:"Elect a cultural, industrial or hazardous planet. Destroy all units on the planet. Planet owner chooses a player with the fewest VP to gain control of the planet and gain 1 infantry on it. If no-one controls that planet, the Speaker chooses the recipient.",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return"cultural"===e.type||"industrial"===e.type||"hazardous"===e.type?1:0}))},onPass:function(e,t){return e.game.state.colonial_redistribution=1,e.game.state.colonial_redistribution_planet=t,e.game.queue.push("colonial_redistribution\t"+t),e.game.state.laws.push({agenda:"colonial-redistribution",option:t}),0},handleGameLoop:function(e,t,r){if("colonial_redistribution"==r[0]){var n=r[1];e.game.queue.splice(t,1);var a=e.game.planets[n].owner,i=e.game.planets[n].idx,o=e.game.planets[n].sector;return-1==a&&(a=e.game.state.speaker),e.game.planets[n].units[a]=[],e.game.player==a&&e.playerSelectPlayerWithFilter("Select a player to receive 1 infantry and this planet",(function(t){for(var r=0,n=t.vp,a=0;a<e.game.players_info.length;a++)e.game.players_info[a]<n&&(r=1);return 1==r?0:1}),(function(t){return e.updateStatus(""),e.addMove("produce\t"+t+"\t1\t"+i+"\tinfantry\t"+o),e.addMove("annex\t"+t+"\t"+o+"\t"+i),e.addMove("NOTIFY\t"+e.returnFaction(t)+" gains the contested planet"),e.endTurn(),0})),0}return 1}}),this.importAgendaCard("compensated-disarmament",{name:"Compensated Disarmament",type:"Directive",elect:"planet",text:"Destroy all ground forces on planet. For each infantry destroyed planet owner gains 1 trade good",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return 1}))},onPass:function(e,t){e.game.state.compensated_disarmament=1,e.game.state.compensated_disarmament_planet=t,console.log("planet is: "+t);var r=e.game.planets[t],n=parseInt(r.owner),a=0;if(-1==n)return 1;for(var i=r.units[n-1].length,o=0;o<i;o++)"infantry"==r.units[n-1][o].type&&(a++,r.units[n-1].splice(o,1),o--,i=r.units[n-1].length);return a>0&&e.game.queue.push("purchase\t"+n+"\tgoods\t"+a),e.updateSectorGraphics(r.sector),1}}),this.importAgendaCard("judicial-abolishment",{name:"Judicial Abolishment",type:"Directive",elect:"law",text:"Discard a law if one is in play",returnAgendaOptions:function(e){for(var t=[],r=0;r<e.game.state.laws.length;r++)t.push(e.agenda_cards[e.game.state.laws[r].agenda].name);return t},onPass:function(e,t){e.game.state.judicial_abolishment=1,e.game.state.judicial_abolishment_law=t;for(var r=null,n=0;n<e.game.state.laws.length;n++)t===e.agenda_cards[e.game.state.laws[n].agenda].name&&(e.agenda_cards[e.game.state.laws[n].agenda].repealAgenda(e),r=e.game.state.laws[n].agenda,n=e.game.state.laws.length+2);return r&&e.updateLog(e.agenda_cards[r].name+" abolished"),1}}),this.importAgendaCard("public-execution",{name:"Public Execution",type:"Directive",elect:"player",text:"Elect a player. They discard all their action cards, lose the speaker token to the next player in initiative order (if they have it) and lose all of their votes.",returnAgendaOptions:function(e){for(var t=[],r=0;r<e.game.players_info.length;r++)t.push(e.returnFaction(r+1));return t},onPass:function(e,t){var r=e.returnInitiativeOrder();e.game.state.public_execution=1;for(var n=0;n<e.game.players_info.length;n++)t===e.returnFaction(n+1)&&(e.game.state.public_execution_player=n+1);if(e.game.players_info[e.game.state.public_execution_player-1].action_cards_in_hand=0,e.game.player==e.game.state.public_execution_player&&(e.game.deck[1].hand=[]),e.game.state.public_execution_player==e.game.state.speaker){e.game.state.speaker=r[0];for(var a=0;a<r.length-1;a++)r[a]==e.game.state.public_execution_player&&(e.game.state.speaker=r[a+1])}return e.game.state.votes_available[e.game.state.public_execution_player-1]=0,e.updateLog(e.returnFaction(e.game.state.public_execution_player)+" representative publicly executed"),e.displayFactionDashboard(),1}}),this.importAgendaCard("ixthian-artifact",{name:"Ixthian Artifact",type:"Directive",text:"FOR: roll a die. On rolls of 5 and under destroy all units on New Byzantium and 3 units in each adjacent system. On all other rolls each player researches 2 technologies",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){if("for"==t){var r=e.rollDice(10);if(e.updateLog("Ixthian Artifact rolls "+r),r<=5){for(var n=0;n<e.game.players_info.length;n++)e.game.planets["new-byzantium"].units[n]=[],e.game.sectors["new-byzantium"].units[n]=[];for(var a=e.returnAdjacentSectors("new-byzantium"),i=0;i<a.length;i++)for(var o=0;o<e.game.players_info.length;o++)e.doesSectorContainPlayerUnits(o+1,a[i])&&e.game.queue.push("destroy_units\t"+(o+1)+"\t3\t"+a[i]+"\t0")}if(r>=6){for(var s=0;s<e.game.players_info.length;s++)e.game.queue.push("research\t"+(s+1)),e.game.queue.push("research\t"+(s+1));e.game.queue.push("ACKNOWLEDGE\tThe Ixthian Artifact did not explode. All players may now research two technologies...")}}return 1}}),this.importActionCard("infiltrate",{name:"Infiltrate",type:"instant",text:"The next time you invade a planet, you may takeover any existing PDS units or Space Docks",playActionCard:function(e,t,r,n){return e.game.players_info[r-1].temporary_infiltrate_infrastructure_on_invasion=1,1}}),this.importActionCard("reparations",{name:"Reparations",type:"action",text:"If you have lost a planet this round, refresh one of your planets",playActionCard:function(e,t,r,n){if(-1!=e.game.players_info[r-1].lost_planet_this_round&&r==e.game.player){var a=e.returnPlayerExhaustedPlanetCards(e.game.player);return e.playerSelectPlanetWithFilter("Select an exhausted planet to refresh: ",(function(e){return a.includes(e)?1:0}),(function(t){return e.addMove("unexhaust\tplanet\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(r)+" refreshes "+e.game.planets[t].name),e.endTurn(),0}),null),0}return 1}}),this.importActionCard("political-stability",{name:"Political Stability",type:"instant",text:"Pick a strategy card you have already played this round. You may keep this for next round",playActionCard:function(e,t,r,n){if(e.game.player==r){for(var a='<div class="sf-readable">Pick a Strategy Card to keep for next round: </div><ul>',i=0;i<e.game.players_info[r-1].strategy_cards_played.length;i++){var o=e.game.players_info[r-1].strategy_cards_played[i];a+='<li class="option" id="'+o+'">'+e.strategy_cards[o].name+"</li>"}for(var s=0;s<e.game.players_info[r-1].strategy.length;s++)if(!e.game.players_info[e.game.player-1].strategy_cards_played.includes(e.game.players_info[r-1].strategy[s])){var c=e.game.players_info[r-1].strategy[s];a+='<li class="option" id="'+c+'">'+e.strategy_cards[c].name+"</li>"}a+="</ul>",e.updateStatus(a),$(".option").off(),$(".option").on("click",(function(){var t=$(this).attr("id");return e.addMove("strategy_card_retained\t"+e.game.player+"\t"+t),e.endTurn(),0}))}return 0},handleGameLoop:function(e,t,r){if("strategy_card_retained"==r[0]){var n=parseInt(r[1]),a=r[2];return e.game.queue.splice(t,1),e.game.players_info[n-1].strategy_cards_retained.push(a),1}return 1}}),this.importActionCard("lost-star-chart",{name:"Lost Star Chart",type:"instant",text:"During this turn, all wormholes are adjacent to each other",playActionCard:function(e,t,r,n){return e.game.state.temporary_wormholes_adjacent=1,1}}),this.importActionCard("plague",{name:"Plague",type:"action",text:"ACTION: Select a planet. Roll a dice for each infantry on planet and destroy number of rolls 6 or higher.",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectPlanetWithFilter("Select a planet to cripple with the plague:",(function(t){return e.doesPlanetHaveInfantry(t)}),(function(t){return e.addMove("plague\t"+e.game.player+"\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" unleashes a plague on "+e.game.planets[t].name),e.endTurn(),0}),null),0},handleGameLoop:function(e,t,r){if("plague"==r[0]){for(var n=parseInt(r[1]),a=r[2],i=e.game.planets[a].sector,o=e.game.planets[a].idx,s=e.returnSectorAndPlanets(i),c=e.returnEventObjects(),l=s.p[o].owner,u=0,d=0;d<s.p[o].units.length;d++)for(var h=0;h<s.p[o].units[d].length;h++){var p=s.p[o].units[d][h];if("infantry"==p.type&&e.rollDice(10)>6){for(z_index in p.destroyed=1,c)p=c[z_index].unitDestroyed(this,n,p);u++}}return e.updateLog("The plague destroys "+u+" infantry"),e.eliminateDestroyedUnitsInSector(l,i),e.saveSystemAndPlanets(s),e.updateSectorGraphics(i),e.game.queue.splice(t,1),1}return 1}}),this.importActionCard("repeal-law",{name:"Repeal Law",type:"action",text:"ACTION: Repeal one law that is in effect.",playActionCard:function(e,t,r,n){if(e.game.player==r){for(var a='<div class="sf-readable">Pick a Law to Repeal: </div><ul>',i=0;i<e.game.state.laws.length;i++){var o=e.game.state.laws[i],s=e.agenda_cards[o];a+='<li class="option" id="'+s+'">'+s.name+"</li>"}a+='<li class="option" id="cancel">cancel</li>',a+="</ul>",e.updateStatus(a),$(".option").off(),$(".option").on("click",(function(){var t=$(this).attr("id");return"cancel"===t?(e.endTurn(),0):(e.addMove("repeal_law\t"+t),e.endTurn(),0)}))}return 0},handleGameLoop:function(e,t,r){if("repeal_law"==r[0]){var n=r[2];e.game.queue.splice(t,1);for(var a=0;a<e.game.state.laws.length;a++)if(e.game.state.laws[a]==n)return e.agenda_cards[n].repealAgenda(e),1;return 1}return 1}}),this.importActionCard("veto",{name:"Veto",type:"action",text:"ACTION: Select one agenda to remove from consideration and draw a replacement",playActionCard:function(e,t,r,n){if(e.game.player==r){var a="";for(a+="Select one agenda to quash in the Galactic Senate.<ul>",i=0;i<3;i++)a+='<li class="option" id="'+e.game.state.agendas[i]+'">'+e.agenda_cards[e.game.state.agendas[i]].name+"</li>";a+="</ul>",e.updateStatus(a),$(".option").off(),$(".option").on("mouseenter",(function(){var t=$(this).attr("id");e.showAgendaCard(t)})),$(".option").on("mouseleave",(function(){var t=$(this).attr("id");e.hideAgendaCard(t)})),$(".option").on("click",(function(){var t=$(this).attr("id");e.hideAgendaCard(t),e.updateStatus("Quashing Agenda"),e.addMove("quash\t"+t+"\t1"),e.endTurn()}))}return 0}}),this.importActionCard("flank-speed1",{name:"Flank Speed",type:"instant",text:"Gain +1 movement on all ships moved this turn",playActionCard:function(e,t,r,n){return e.game.players_info[r-1].temporary_fleet_move_bonus=1,1}}),this.importActionCard("flank-speed2",{name:"Flank Speed",type:"instant",text:"Gain +1 movement on all ships moved this turn",playActionCard:function(e,t,r,n){return e.game.players_info[r-1].temporary_fleet_move_bonus=1,1}}),this.importActionCard("flank-speed3",{name:"Flank Speed",type:"instant",text:"Gain +1 movement on all ships moved this turn",playActionCard:function(e,t,r,n){return e.game.players_info[r-1].temporary_fleet_move_bonus=1,1}}),this.importActionCard("flank-speed4",{name:"Flank Speed",type:"instant",text:"Gain +1 movement on all ships moved this turn",playActionCard:function(e,t,r,n){return e.game.players_info[r-1].temporary_fleet_move_bonus=1,1}}),this.importActionCard("propulsion-research",{name:"Propulsion Research",type:"instant",text:"Gain +1 movement on a single ship moved this turn",playActionCard:function(e,t,r,n){return e.game.players_info[r-1].temporary_ship_move_bonus=1,1}}),this.importActionCard("military-drills",{name:"Military Drills",type:"action",text:"ACTION: Gain two new command tokens",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerAllocateNewTokens(r,2),0}}),this.importActionCard("cripple-defenses",{name:"Cripple Defenses",type:"action",text:"ACTION: Select a planet and destroy all PDS units on that planet",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectPlanetWithFilter("Select a planet to destroy all PDS units on that planet: ",(function(t){return e.doesPlanetHavePDS(t)}),(function(t){for(var r=(t=e.game.planets[t]).sector,n=(t.tile,t.idx),a=e.returnSectorAndPlanets(r),i=0;i<a.p[n].units.length;i++)for(var o=0;o<a.p[n].units[i].length;o++)"pds"==a.p[n].units[i][o].type&&e.addMove("destroy_unit\t"+e.game.player+"\t"+(i+1)+"\tground\t"+r+"\t"+n+"\t"+o+"\t1");return e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" destroys all PDS units destroyed on "+a.p[n].name),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("reactor-meltdown",{name:"Reactor Meltdown",type:"action",text:"ACTION: Select a non-homeworld planet and destroy one Space Dock on that planet",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectPlanetWithFilter("Select a non-homeworld planet and destroy one Space Dock on that planet: ",(function(t){if(0==(t=e.game.planets[t]).hw&&e.doesPlanetHaveSpaceDock(t))return 1}),(function(t){for(var r=(t=e.game.planets[t]).sector,n=(t.tile,t.idx),a=e.returnSectorAndPlanets(r),i=0;i<a.p[n].units.length;i++)for(var o=0;o<a.p[n].units[i].length;o++)"spacedock"==a.p[n].units[i][o].type&&e.addMove("destroy_unit\t"+e.game.player+"\t"+(i+1)+"\tground\t"+r+"\t"+n+"\t"+o+"\t1");return e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" destroys all Space Docks on "+a.p[n].name),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("lost-mission",{name:"Lost Mission",type:"action",text:"ACTION: Place 1 Destroyer in a system with no existing ships",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectSectorWithFilter("Select a sector with no existing ships in which to place a Destroyer: ",(function(t){return!e.doesSectorContainShips(t)}),(function(t){return e.addMove("produce\t"+e.game.player+"\t1\t-1\tdestroyer\t"+t),e.addMove("NOTIFY\tAdding destroyer to gamebaord"),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("accidental-colonization",{name:"Accidental Colonization",type:"action",text:"ACTION: Gain control of one planet not controlled by any player",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectPlanetWithFilter("Select a planet not controlled by another player: ",(function(t){return-1==(t=e.game.planets[t]).owner?1:0}),(function(t){var r=(t=e.game.planets[t]).sector;return e.addMove("gain_planet\t"+e.game.player+"\t"+r+"\t"+t.idx),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" gains planet "+t.name),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("uprising",{name:"Uprising",type:"action",text:"ACTION: Exhaust a non-home planet card held by another player. Gain trade goods equal to resource value.",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectPlanetWithFilter("Exhaust a non-homeworld planet card held by another player. Gain trade goods equal to resource value.",(function(t){return-1!=(t=e.game.planets[t]).owner&&t.owner!=e.game.player&&0==t.exhausted&&0==t.hw?1:0}),(function(t){var r=(t=e.game.planets[t]).resources;return e.addMove("purchase\t"+e.game.player+"\tgoods\t"+r),e.addMove("expend\t"+e.game.player+"\tplanet\t"+t.planet),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" exhausting "+t.name+" and gaining "+r+" trade goods"),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("diaspora-conflict",{name:"Diaspora Conflict",type:"action",text:"ACTION: Exhaust a non-home planet card held by another player. Gain trade goods equal to resource value.",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectPlanetWithFilter("Exhaust a planet card held by another player. Gain trade goods equal to resource value.",(function(t){return-1!=(t=e.game.planets[t]).owner&&t.owner!=e.game.player&&0==t.exhausted&&0==t.hw?1:0}),(function(t){var r=t,n=(t=e.game.planets[t]).resources;return e.addMove("purchase\t"+e.game.player+"\tgoods\t"+n),e.addMove("expend\t"+e.game.player+"\tplanet\t"+r),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" exhausting "+t.name+" and gaining "+n+" trade goods"),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("economic-initiative",{name:"Economic Initiative",type:"action",text:"ACTION: Ready each cultural planet in your control",playActionCard:function(e,t,r,n){for(var a in e.game.planets)e.game.planets[a].owner==r&&"cultural"==e.game.planets[a].type&&(e.game.planets[a].exhausted=0);return 1}}),this.importActionCard("focused-research",{name:"Focused Research",type:"action",text:"ACTION: Spend 4 Trade Goods to Research 1 Technology",playActionCard:function(e,t,r,n){return e.game.players_info[e.game.player-1].goods<4?(e.updateLog("Player does not have enough trade goods to research a technology"),1):(e.game.player==r&&e.playerResearchTechnology((function(t){e.addMove("purchase\t"+e.game.player+"\ttech\t"+t),e.addMove("expend\t"+e.game.player+"\tgoods\t4"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" researches "+e.tech[t].name),e.endTurn()})),0)}}),this.importActionCard("frontline-deployment",{name:"Frontline Deployment",type:"action",text:"ACTION: Deploy three infantry on one planet you control",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectPlanetWithFilter("Deploy three infantry to a planet you control: ",(function(t){return e.game.planets[t].owner==e.game.player?1:0}),(function(t){return t=e.game.planets[t],e.addMove("produce\t"+e.game.player+"\t1\t"+t.idx+"\tinfantry\t"+t.sector),e.addMove("produce\t"+e.game.player+"\t1\t"+t.idx+"\tinfantry\t"+t.sector),e.addMove("produce\t"+e.game.player+"\t1\t"+t.idx+"\tinfantry\t"+t.sector),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" deploys three infantry to "+t.name),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("ghost-ship",{name:"Ghost Ship",type:"action",text:"ACTION: Place a destroyer in a sector with a wormhole and no enemy ships",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectSectorWithFilter("Place a destroyer in a sector with a wormhole and no enemy ships: ",(function(t){return 0==e.doesSectorContainShips(t)&&0!=e.game.sectors[t].wormhole?1:0}),(function(t){return e.addMove("produce\t"+e.game.player+"\t1\t-1\tdestroyer\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" deploys a Destroyer to "+e.game.sectors[t].name),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("war-effort",{name:"War Effort",type:"action",text:"ACTION: Place a cruiser in a sector with one of your ships",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectSectorWithFilter("Place a cruiser in a sector with one of your ships: ",(function(r){return 1==e.doesSectorContainPlayerShips(t,r)?1:0}),(function(t){return e.addMove("produce\t"+e.game.player+"\t1\t-1\tcruiser\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" deploys a Cruiser to "+e.game.sectors[t].name),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("industrial-initiative",{name:"Industrial Initiative",type:"action",text:"ACTION: Gain a trade good for each industrial planet you control",playActionCard:function(e,t,r,n){var a=0;for(var i in e.game.planets)e.game.planets[i].owner==r&&"industrial"==e.game.planets[i].type&&a++;return a>0&&e.game.queue.push("purchase\t"+e.game.player+"\tgoods\t"+a),1}}),this.importActionCard("Insubordination",{name:"Insubordination",type:"action",text:"ACTION: Select a player and remove 1 token from their command pool",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectPlayerWithFilter("Select a player and remove one token from their command pool: ",(function(t){return t!=e.game.player?1:0}),(function(t){return e.addMove("expend\t"+t+"\tcommand\t1"),e.addMove("NOTIFY\t"+e.returnFactionNickname(t)+" loses one comand token"),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("Lucky Shot",{name:"Lucky Shot",type:"action",text:"ACTION: Destroy a destroyer, cruiser or dreadnaught in a sector with a planet you control",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectSectorWithFilter("Destroy a destroyer, cruiser or dreadnaught in a sector containing a planet you control: ",(function(t){return e.doesSectorContainPlanetOwnedByPlayer(t,e.game.player)&&(e.doesSectorContainUnit(t,"destroyer")||e.doesSectorContainUnit(t,"cruiser")||e.doesSectorContainUnit(t,"dreadnaught"))?1:0}),(function(t){e.playerSelectOpponentUnitInSectorWithFilter("Select opponent ship in this sector to destroy: ",t,(function(e){return"destroyer"==e.type||"cruiser"==e.type||"dreadnaught"==e.type?1:0}),(function(t){var r=t.sector,n=(parseInt(t.unit.owner),t.unit_idx),a=e.returnSectorAndPlanets(r),i=t.unit;return e.addMove("destroy_unit\t"+e.game.player+"\t"+i.owner+"\tspace\t"+r+"\t-1\t"+n+"\t1"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" destroys a "+i.name+" in "+a.name),e.endTurn(),0}),null)}),(function(){e.playerTurn()})),0}}),this.importActionCard("mining-initiative-ac",{name:"Mining Initiative",type:"action",text:"ACTION: Gain trade goods equal to the highest resource value planet you control",playActionCard:function(e,t,r,n){if(e.game.player==r){var a=0;for(var i in e.game.planets)e.game.planets[i].owner==r&&e.game.planets[i].resources>a&&(a=e.game.planets[i].resources);return e.addMove("purchase\t"+e.game.player+"\tgoods\t"+a),e.endTurn(),0}return 0}}),this.importActionCard("rise-of-a-messiah",{name:"Rise of a Messiah",type:"action",text:"ACTION: Add one infantry to each planet player controls",playActionCard:function(e,t,r,n){for(var a in e.game.planets)e.game.planets[a].owner==r&&(e.updateLog(e.returnFaction(r)+" adds 1 infantry to "+e.game.planets[a].name),e.addPlanetaryUnit(r,e.game.planets[a].sector,e.game.planets[a].idx,"infantry"));return 1}}),this.importActionCard("unstable-planet",{name:"Unstable Planet",type:"action",text:"ACTION: Choose a hazardous planet and exhaust it. Destroy 3 infantry on that planet if they exist",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectPlanetWithFilter("Select a hazardous planet and exhaust it. Destroy 3 infantry on that planet if they exist",(function(t){return"hazardous"==(t=e.game.planets[t]).type?1:0}),(function(n){e.addMove("expend\t"+t+"\tplanet\t"+n);var a=e.game.planets[n],i=parseInt(a.owner),o=(parseInt(a.resources),0);if(i>=0)for(var s=a.units[i-1].length-1;s>=0;s--)o<3&&"infantry"==a.units[i-1][s].type&&(e.addMove("destroy_unit\t"+r+"\t"+i+"\tground\t"+a.sector+"\t"+a.idx+"\t"+s+"\t1"),o++);return e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("covert-operation",{name:"Covert Operation",type:"action",text:"ACTION: Choose a player. They give you one of their action cards, if possible",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectPlayerWithFilter("Select a player. They give you one of their action cards: ",(function(t){return t!=e.game.player?1:0}),(function(t){return e.addMove("pull\t"+e.game.player+"\t"+t+"\taction\trandom"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" pulls a random action card from "+e.returnFaction(t)),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("tactical-bombardment",{name:"Tactical Bombardment",type:"action",text:"ACTION: Choose a sector in which you have ships with bombardment. Exhaust all planets in that sector",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectSectorWithFilter("Select a sector in which you have ships with bombardment. Exhaust all planets in that sector",(function(r){return 1==e.doesSectorContainPlayerUnit(t,r,"dreadnaught")||1==e.doesSectorContainPlayerUnit(t,r,"warsun")?1:0}),(function(r){for(var n=e.game.sectors[r].planets,a=0;a<n.length;a++)e.addMove("expend\t"+t+"\tplanet\t"+n[a]),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" exhausts "+e.game.planets[n[a]].name);return e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("signal-jamming",{name:"Signal Jamming",type:"action",text:"ACTION: Choose a player. They must activate a system in or next to a system in which you have a ship",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectSectorWithFilter("Select a sector in which you have a ship or one adjacent to one: ",(function(t){return e.isPlayerShipAdjacentToSector(r,t)?1:0}),(function(t){e.playerSelectPlayerWithFilter("Select a player to signal jam in that sector: ",(function(t){return t!=e.game.player?1:0}),(function(r){return e.addMove("activate\t"+r+"\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(r)+" suffers signal jamming in "+e.game.sectors[t].name),e.endTurn(),0}),null)}),(function(){e.playerTurn()})),0}}),this.importActionCard("unexpected-action",{name:"Unexpected Action",type:"action",text:"ACTION: Deactivate a stystem you have activated. Gain one command or strategy token: ",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectSectorWithFilter("Select a sector that you have activated and deactivate it: ",(function(t){if(1==e.game.sectors[t].activated[r-1])return 1}),(function(t){return e.updateStatus('<div class="sf-readable">Gain command or strategy token?</div><ul><li class="option" id="command">command token</li><li class="option" id="strategy">strategy token</li></ul>'),$(".option").off(),$(".option").on("click",(function(){var n=$(this).attr("id");e.addMove("purchase\t"+r+"\t"+n+"\t1"),e.addMove("deactivate\t"+r+"\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(r)+" deactivates "+e.game.sectors[t].name),e.endTurn()})),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("in-the-silence-of-space",{name:"In the Silence of Space",type:"instant",text:"Your ships may move through sectors with other player ships this turn: ",playActionCard:function(e,t,r,n){return e.game.players_info[r-1].temporary_move_through_sectors_with_opponent_ships=1,1}}),this.importActionCard("upgrade",{name:"Upgrade",type:"activate",text:"After you activate a system containing one of your ships, place a Dreadnaught from your reinforcements in that sector",playActionCard:function(e,t,r,n){var a=e.game.state.activated_sector;return e.doesSectorContainPlayerShips(r,a)&&e.addSpaceUnit(r,a,"dreadnaught"),1}}),this.importActionCard("disable",{name:"Disable",type:"activate",text:"Your fleet cannot be hit by PDS fire or Planetary Defense during this invasion",playActionCard:function(e,t,r,n){return e.game.players_info[r-1].temporary_immune_to_pds_fire=1,e.game.players_info[r-1].temporary_immune_to_planetary_defense=1,1}}),this.importActionCard("bunker",{name:"Bunker",type:"bombardment_defender",text:"During this bombardment, attacker gets -4 applied to each bombardment roll.",playActionCard:function(e,t,r,n){for(var a=0;a<e.game.players_info.length;a++)e.game.players_info[a].temporary_bombardment_combat_roll_modifier=-4;return 1}}),this.importActionCard("thunder-from-the-heavens",{name:"Thunder from the Heavens",type:"bombardment_attacker",text:"During this bombardment, attacker gets +2 applied to each bombardment roll.",playActionCard:function(e,t,r,n){for(var a=0;a<e.game.players_info.length;a++)e.game.players_info[a].temporary_bombardment_combat_roll_modifier=2;return 1}}),this.importActionCard("sabotage1",{name:"Sabotage",type:"counter",text:"When another player plays an action card, you may cancel that action card",playActionCard:function(e,t,r,n){console.log("QUEUE: "+JSON.stringify(e.game.queue));for(var a=e.game.queue.length-1;a>=0;a--)if(e.game.queue[a].indexOf("action_card_")>=0){var i=0;if(0==e.game.queue[a].indexOf("action_card_post")&&(i=1),console.log("removing: "+JSON.stringify(e.game.queue[a])),e.game.queue[a].indexOf("sabotage")>0&&(i=0),0!=e.game.queue[a].indexOf("resolve")&&e.game.queue.splice(a,1),1==i)return e.removeConfirmsNeeded(),e.updateLog(e.returnFaction(r)+" plays Sabotage!"),1}return 1}}),this.importActionCard("sabotage2",{name:"Sabotage",type:"counter",text:"When another player plays an action card, you may cancel that action card",playActionCard:function(e,t,r,n){console.log("QUEUE: "+JSON.stringify(e.game.queue));for(var a=e.game.queue.length-1;a>=0;a--)if(e.game.queue[a].indexOf("action_card_")>=0){var i=0;if(0==e.game.queue[a].indexOf("action_card_post")&&(i=1),console.log("removing: "+JSON.stringify(e.game.queue[a])),e.game.queue[a].indexOf("sabotage")>0&&(i=0),0!=e.game.queue[a].indexOf("resolve")&&e.game.queue.splice(a,1),1==i)return e.removeConfirmsNeeded(),e.updateLog(e.returnFaction(r)+" plays Sabotage!"),1}return 1}}),this.importActionCard("sabotage3",{name:"Sabotage",type:"counter",text:"When another player plays an action card, you may cancel that action card",playActionCard:function(e,t,r,n){console.log("QUEUE: "+JSON.stringify(e.game.queue));for(var a=e.game.queue.length-1;a>=0;a--)if(e.game.queue[a].indexOf("action_card_")>=0){var i=0;if(0==e.game.queue[a].indexOf("action_card_post")&&(i=1),console.log("removing: "+JSON.stringify(e.game.queue[a])),e.game.queue[a].indexOf("sabotage")>0&&(i=0),0!=e.game.queue[a].indexOf("resolve")&&e.game.queue.splice(a,1),1==i)return e.removeConfirmsNeeded(),e.updateLog(e.returnFaction(r)+" plays Sabotage!"),1}return 1}}),this.importActionCard("sabotage4",{name:"Sabotage",type:"counter",text:"When another player plays an action card, you may cancel that action card",playActionCard:function(e,t,r,n){for(var a=e.game.queue.length-1;a>=0;a--)if(e.game.queue[a].indexOf("action_card_")>=0){var i=0;if(0==e.game.queue[a].indexOf("action_card_post")&&(i=1),e.game.queue[a].indexOf("sabotage")>0&&(i=0),0!=e.game.queue[a].indexOf("resolve")&&e.game.queue.splice(a,1),1==i)return e.removeConfirmsNeeded(),e.updateLog(e.returnFaction(r)+" plays Sabotage!"),1}return 1}}),this.importActionCard("fire-team",{name:"Fire Team",type:"ground_combat",text:"Reroll up to 15 dice during this round of ground combat",playActionCard:function(e,t,r,n){return e.game.players_info[r-1].combat_dice_reroll=15,1}}),this.importActionCard("parley",{name:"Parley",type:"ground_combat",text:"Return invading infantry to space if player ships exist in the sector",playActionCard:function(e,t,r,n){if(t==r){var a=e.game.state.ground_combat_sector,i=e.game.state.ground_combat_planet_idx,o=e.game.state.ground_combat_attacker,s=e.returnSectorAndPlanets(a),c=s.p[i].units[o-1];s.p[i].units[o-1]=[];for(var l=0;l<s.s.units[o-1].length;l++)for(;e.returnRemainingCapacity(s.s.units[o-1][l])>0&&c.length>0;)e.loadUnitByJSONOntoShip(o,a,l,JSON.stringify(c[0])),c.splice(0,1)}return e.updateSectorGraphics(sector),1}}),this.importActionCard("distinguished-councillor",{name:"Distinguished Coucillor",type:"post_agenda",text:"After the speaker has cast his votes, cast an additional 5 votes",playActionCard:function(e,t,r,n){return e.game.state.votes_cast[r-1]+=5,e.updateLog(e.returnFaction(r)+" casts an additional 5 votes with Distinguished Councillor"),1}}),this.importActionCard("bribery",{name:"Bribery",type:"post_agenda",text:"After the speaker has cast his vote, spend any number of trade goods to purchase additional votes",playActionCard:function(e,t,r,n){if(e.game.player==r){var a='<div class="sf-readable">Spend any number of trade goods to purchase additional votes: </div><ul>';if(e.game.players_info[r-1].goods>0){a+='<li class="textchoice" id="0">0 votes</li>';for(var i=1;i<=e.game.players_info[r-1].goods+1;i++)a+=1==i?'<li class="textchoice" id="1">'+i+" vote</li>":'<li class="textchoice" id="'+i+'">'+i+" votes</li>"}else a+='<li class="textchoice" id="0">0 votes</li>';a+="</ul>",e.updateStatus(a),$(".textchoice").off(),$(".textchoice").on("click",(function(){var t=$(this).attr("id");e.addMove("bribery\t"+r+"\t"+t),e.endTurn()}))}return 0},handleGameLoop:function(e,t,r){if("bribery"==r[0]){var n=parseInt(r[1]),a=parseInt(r[2]);return e.game.queue.splice(t,1),e.game.state.votes_cast[n-1].votes+=a,e.game.players_info[n-1].goods-=a,1==a?e.updateLog(e.returnFaction(n)+" bribes the Council for "+a+" additional vote"):e.updateLog(e.returnFaction(n)+" bribes the Council for "+a+" additional votes"),1}return 1}}),this.importActionCard("assassinate-representative",{name:"Assassinate Representative",type:"pre_agenda",text:"Choose a player. That player cannot vote on the Agenda",playActionCard:function(e,t,r,n){return r==e.game.player&&e.playerSelectPlayerWithFilter("Select a player who will not be able to vote on this Agenda: ",(function(t){return t!=e.game.player?1:0}),(function(t){return e.addMove("rider\t"+t+"\tassassinate-representative\t-1"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" assassinates the "+e.returnFactionNickname(t)+" delegate"),e.endTurn(),0}),null),0}}),this.importActionCard("diplomatic-scandal",{name:"Diplomatic Scandal",type:"pre_agenda",text:"Choose a player. That player loses a maximum of four votes on this agenda",playActionCard:function(e,t,r,n){return r==e.game.player&&e.playerSelectPlayerWithFilter("Select a player to lose 4 votes: ",(function(t){return t!=e.game.player?1:0}),(function(t){return e.addMove("diplomatic_scandal\t"+e.game.player+"\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" unearths scandal concerning the voting representative of "+e.returnFaction(t)),e.endTurn(),0}),null),0},handleGameLoop:function(e,t,r){if("diplomatic_scandal"==r[0]){parseInt(r[1]);var n=parseInt(r[2]);return e.game.queue.splice(t,1),e.game.state.votes_available[n-1]-=4,e.game.state.votes_available[n-1]<0&&(e.game.state.votes_available[n-1]=0),1}return 1}}),this.importActionCard("leadership-rider",{name:"Leadership Rider",type:"rider",text:"Bet on agenda outcome to gain two strategy tokens and 1 command token",playActionCard:function(e,t,r,n){if(e.game.player==r){var a=e.returnActiveAgenda(),i=e.agenda_cards[a].returnAgendaOptions(e),o=e.agenda_cards[a].elect;e.playerSelectChoice("On which choice do you wish to place your Leadership rider?",i,o,(function(t){e.addMove("rider\t"+e.game.player+"\tdiplomacy-rider\t"+i[t]),e.addMove("NOTIFY\t"+e.returnFactionNickname(e.game.player)+" has placed a Leadership Rider on "+i[t]),e.endTurn()}))}return 0},playActionCardEvent:function(e,t,r,n){return e.game.players_info[r-1].strategy_tokens+=2,e.game.players_info[r-1].command_tokens+=1,e.updateLog(e.returnFaction(r)+" gains 2 strategy tokens and 1 command token"),1}}),this.importActionCard("diplomacy-rider",{name:"Diplomacy Rider",type:"rider",text:"Bet on agenda outcome to have others activate system with planet you control",playActionCard:function(e,t,r,n){if(e.game.player==r){var a=e.returnActiveAgenda(),i=e.agenda_cards[a].returnAgendaOptions(e),o=e.agenda_cards[a].elect;e.playerSelectChoice("On which choice do you wish to place your Diplomacy rider?",i,o,(function(t){e.addMove("rider\t"+e.game.player+"\tdiplomacy-rider\t"+i[t]),e.addMove("NOTIFY\t"+e.returnFactionNickname(e.game.player)+" has placed a Diplomacy Rider on "+i[t]),e.endTurn()}))}return 0},playActionCardEvent:function(e,t,r,n){return r==e.game.player&&e.playerSelectSectorWithFilter("Select a sector with a planet you control to mire in diplomatic conflict: ",(function(t){for(var r=0;r<e.game.sectors[t].planets.length;r++)return e.game.planets[e.game.sectors[t].planets[r]].owner==e.game.player?1:0}),(function(t){for(var n=0;n<e.game.players_info.length;n++)e.addMove("activate\t"+(n+1)+"\t"+t);return e.addMove("NOTIFY\t"+e.returnFactionNickname(r)+" uses Diplomacy Rider to protect "+t),e.endTurn(),0}),null),0}}),this.importActionCard("politics-rider",{name:"Politics Rider",type:"rider",text:"Bet on agenda outcome to gain three action cards and the speaker token",playActionCard:function(e,t,r,n){if(e.game.player==r){var a=e.returnActiveAgenda(),i=e.agenda_cards[a].returnAgendaOptions(e),o=e.agenda_cards[a].elect;e.playerSelectChoice("On which choice do you wish to place your Politics rider?",i,o,(function(t){e.addMove("rider\t"+e.game.player+"\tpolitics-rider\t"+i[t]),e.addMove("NOTIFY\t"+e.returnFactionNickname(e.game.player)+" has placed a Politics Rider on "+i[t]),e.endTurn()}))}return 0},playActionCardEvent:function(e,t,r,n){if(console.log(JSON.stringify(e.agenda_cards[active_agenda])),e.game.player==r){e.addMove("gain\t"+e.game.player+"\taction_cards\t3"),e.addMove("DEAL\t2\t"+e.game.player+"\t3"),e.addMove("NOTIFY\tdealing two action cards to "+e.returnFactionNickname(e.game.player));for(var a="Make which player the speaker? <ul>",i=0;i<e.game.players_info.length;i++)a+='<li class="textchoice" id="'+i+'">'+factions[e.game.players_info[i].faction].name+"</li>";a+="</ul>",e.updateStatus(a),e.game.player,$(".textchoice").off(),$(".textchoice").on("click",(function(){var t=parseInt($(this).attr("id"))+1;e.addMove("change_speaker\t"+t),e.endTurn()}))}return 0}}),this.importActionCard("construction-rider",{name:"Construction Rider",type:"rider",text:"Bet on agenda outcome to place a space dock on a planet you control",playActionCard:function(e,t,r,n){if(r==e.game.player){var a=e.returnActiveAgenda(),i=e.agenda_cards[a].returnAgendaOptions(e),o=e.agenda_cards[a].elect;e.playerSelectChoice("On which choice do you wish to place the Construction rider?",i,o,(function(t){e.addMove("rider\t"+e.game.player+"\tconstruction-rider\t"+i[t]),e.addMove("NOTIFY\t"+e.returnFactionNickname(e.game.player)+" has placed a Construction Rider on "+i[t]),e.endTurn()}))}return 0},playActionCardEvent:function(e,t,r,n){return r==e.game.player&&e.playerSelectPlanetWithFilter("Select a planet you control without a Space Dock: ",(function(t){return e.game.planets[t].owner==e.game.player&&0==e.doesPlanetHaveSpaceDock(t)?1:0}),(function(t){return e.addMove("produce\t"+e.game.player+"\t1\t"+e.game.planets[t].idx+"\tspacedock\t"+e.game.planets[t].sector),e.addMove("NOTIFY\t"+e.returnFaction(r)+" builds a Space Dock in "+e.game.sectors[e.game.planets[t].sector].name),e.endTurn(),0}),null),0}}),this.importActionCard("trade-rider",{name:"Trade Rider",type:"rider",text:"Bet on agenda outcome to receive 5 trade goods",playActionCard:function(e,t,r,n){if(e.game.player==r){var a=e.returnActiveAgenda(),i=e.agenda_cards[a].returnAgendaOptions(e),o=e.agenda_cards[a].elect;e.playerSelectChoice("On which choice do you wish to place your Trade rider?",i,o,(function(t){e.addMove("rider\t"+e.game.player+"\ttrade-rider\t"+i[t]),e.addMove("NOTIFY\t"+e.returnFactionNickname(e.game.player)+" has placed a Trade Rider on "+i[t]),e.endTurn()}))}return 0},playActionCardEvent:function(e,t,r,n){return e.game.queue.push("purchase\t"+r+"\tgoods\t5"),e.game.queue.push("NOTIFY\t"+e.returnFaction(r)+" gains 5 Trade Goods through their Trade Rider"),1}}),this.importActionCard("warfare-rider",{name:"Warfare Rider",type:"rider",text:"Bet on agenda outcome to place a dreadnaught in a system with one of your ships: ",playActionCard:function(e,t,r,n){if(e.game.player==r){var a=e.returnActiveAgenda(),i=e.agenda_cards[a].returnAgendaOptions(e),o=e.agenda_cards[a].elect;e.playerSelectChoice("On which choice do you wish to place your Warfare Rider?",i,o,(function(t){e.addMove("rider\t"+e.game.player+"\twarfare-rider\t"+i[t]),e.addMove("NOTIFY\t"+e.returnFactionNickname(e.game.player)+" has placed a Warfare Rider on "+i[t]),e.endTurn()}))}return 0},playActionCardEvent:function(e,t,r,n){return e.game.player==r&&e.playerSelectSectorWithFilter("Select a sector which contains at least one of your ships: ",(function(t){return e.doesSectorContainPlayerShips(r,t)}),(function(t){return e.addMove("produce\t"+e.game.player+"\t1\t-1\tdreadnaught\t"+t),e.addMove("NOTIFY\tAdding dreadnaught to board"),e.endTurn(),0}),null),0}}),this.importActionCard("technology-rider",{name:"Technology Rider",type:"rider",text:"Bet on agenda outcome to research a technology for free",playActionCard:function(e,t,r,n){if(e.game.player==r){var a=e.returnActiveAgenda();console.log("Active Agenda: "+a);var i=e.agenda_cards[a].returnAgendaOptions(e),o=e.agenda_cards[a].elect;e.playerSelectChoice("On which choice do you wish to place your Technology rider?",i,o,(function(t){e.addMove("rider\t"+e.game.player+"\ttechnology-rider\t"+i[t]),e.addMove("NOTIFY\t"+e.returnFactionNickname(e.game.player)+" has placed a Technology Rider on "+i[t]),e.endTurn()}))}return 0},playActionCardEvent:function(e,t,r,n){return e.game.player==r&&e.playerResearchTechnology((function(t){e.endTurn()})),0}}),this.importActionCard("imperial-rider",{name:"Imperial Rider",type:"rider",text:"Player gains 1 VP",playActionCard:function(e,t,r,n){if(e.game.player==r){var a=e.returnActiveAgenda(),i=e.agenda_cards[a].returnAgendaOptions(e),o=e.agenda_cards[a].elect;e.playerSelectChoice("On which choice do you wish to place the Imperial rider?",i,o,(function(t){e.addMove("rider\t"+e.game.player+"\timperial-rider\t"+i[t]),e.addMove("NOTIFY\t"+e.returnFactionNickname(e.game.player)+" has placed an Imperial Rider on "+i[t]),e.endTurn()}))}},playActionCardEvent:function(e,t,r,n){return e.game.players_info[r-1].vp+=1,e.game.players_info[r-1].objectives_scored.push("imperial-rider"),1}}),this.importActionCard("intercept",{name:"Intercept",type:"retreat",text:"After your opponent declares a retreat in space combat, they cannot retreat",playActionCard:function(e,t,r,n){return e.game.players[r-1].temporary_opponent_cannot_retreat=1,1}}),this.importActionCard("courageous-to-the-end",{name:"Courageous to the End",type:"space_combat_after",text:"For one ship lost in last round of space combat, fire twice. With each hit your opponent must destroy a ship of their chosing",playActionCard:function(e,t,r,n){if(e.game.players_info[r-1].my_units_destroyed_last_combat_round.length>0){for(var a=10,i=0;i<e.game.players_info[r-1].my_units_destroyed_last_combat_round[i];i++){var o=e.game.players_info[r-1].my_units_destroyed_last_combat_round[i],s=e.returnUnit(o,t);s.combat<a&&(a=s.combat)}var c=e.rollDice(10),l=e.rollDice(10),u=e.game.state.space_combat_attacker;u==t&&(u=e.game.state.space_combat_defender);var d=0;return c>=a&&d++,l>=a&&d++,e.game.player==r&&(e.addMove("player_destroy_unit\t"+t+"\t"+u+"\t"+d+"\tspace\t"+e.game.state.space_combat_sector+"\t0"),e.endTurn()),0}return 1}}),this.importActionCard("salvage",{name:"Salvage",type:"space_combat_victory",text:"If you win a space combat, opponent gives you all their commodities",playActionCard:function(e,t,r,n){if(t==r){var a=e.game.players_info[e.game.state.space_combat_attacker],i=e.game.players_info[e.game.state.space_combat_defender];return i.commodities>0&&(a.goods+=i.commodities,e.updateLog(e.returnFaction(e.game.state.space_combat_attacker)+" takes "+i.commodities+" in trade goods from commodities lost in combat"),i.commodities=0),1}}}),this.importActionCard("shields-holding1",{name:"Shields Holding",type:"assign_hits",text:"Cancel 2 hits in Space Combat",playActionCard:function(e,t,r,n){return e.game.state.assign_hits_to_cancel+=2,1}}),this.importActionCard("shields-holding2",{name:"Shields Holding",type:"assign_hits",text:"Cancel 2 hits in Space Combat",playActionCard:function(e,t,r,n){return e.game.state.assign_hits_to_cancel+=2,1}}),this.importActionCard("shields-holding3",{name:"Shields Holding",type:"assign_hits",text:"Cancel 2 hits in Space Combat",playActionCard:function(e,t,r,n){return e.game.state.assign_hits_to_cancel+=2,1}}),this.importActionCard("shields-holding4",{name:"Shields Holding",type:"assign_hits",text:"Cancel 2 hits in Space Combat",playActionCard:function(e,t,r,n){return e.game.state.assign_hits_to_cancel+=2,1}}),this.importActionCard("maneuvering-jets1",{name:"Maneuvering Jets",type:"post_pds",text:"Cancel 1 hit from a PDS firing upon your ships",playActionCard:function(e,t,r,n){return e.game.state.assign_hits_to_cancel++,1}}),this.importActionCard("maneuvering-jets2",{name:"Maneuvering Jets",type:"post_pds",text:"Cancel 1 hit from a PDS firing upon your ships",playActionCard:function(e,t,r,n){return e.game.state.assign_hits_to_cancel++,1}}),this.importActionCard("maneuvering-jets3",{name:"Maneuvering Jets",type:"post_pds",text:"Cancel 1 hit from a PDS firing upon your ships",playActionCard:function(e,t,r,n){return e.game.state.assign_hits_to_cancel++,1}}),this.importActionCard("maneuvering-jets4",{name:"Maneuvering Jets",type:"post_pds",text:"Cancel 1 hit from a PDS firing upon your ships",playActionCard:function(e,t,r,n){return e.game.state.assign_hits_to_cancel++,1}}),this.importActionCard("emergency-repairs",{name:"Emergency Repairs",type:"assign_hits",text:"Repair all damaged ships not at full strength",playActionCard:function(e,t,r,n){for(var a=e.returnSectorAndPlanets(e.game.state.space_combat_sector),i=0;i<a.s.units[r-1].length;i++)a.s.units[r-1][i].strength<a.s.units[r-1][i].max_strength&&(a.s.units[r-1][i].strength=a.s.units[r-1][i].max_strength);return 1}}),this.importActionCard("experimental-fighter-prototype",{name:"Experimental Fighter Prototype",type:"space_combat",text:"Your fighters get +2 on their combat rolls for a single round of space combat",playActionCard:function(e,t,r,n){for(var a=e.returnSectorAndPlanets(e.game.state.space_combat_sector),i=0;i<a.s.units[r-1].length;i++){var o=a.s.units[r-1][i];"fighter"==o.type&&(o.temporary_combat_modifier+=2)}return 1}}),this.importActionCard("moral-boost",{name:"Moral Boost",type:"combat",text:"Apply +1 to each of your units' combat rolls during this round of combat",playActionCard:function(e,t,r,n){if(e.game.state.space_combat_sector)for(var a=e.returnSectorAndPlanets(e.game.state.space_combat_sector),o=0;o<a.s.units[r-1].length;o++)a.s.units[r-1][o].temporary_combat_modifier+=1;if(e.game.state.ground_combat_sector&&e.game.state.ground_combat_planet_idx)for(var s=e.returnSectorAndPlanets(e.game.state.space_combat_sector),c=0;i<s.p.length;c++)for(var l=0;l<s.p[c].units[r-1].length;l++)s.p[c].units[r-1][l].temporary_combat_modifier+=1;return 1}}),this.importActionCard("experimental-battlestation",{name:"Experimental Battlestation",type:"pre_pds",text:"After a player moves ships into a sector, a space dock in that or an adjacent sector can fire 3 PDS shots",playActionCard:function(e,t,r,n){e.updateLog("Experimental Battlestation");var a=e.game.state.activated_sector,i=e.returnAdjacentSectors(a);i.push(a);for(var o=0;o<i.length;o++)for(var s=e.returnSectorAndPlanets(i[o]),c=0;c<s.p.length;c++)if(s.p[c].owner==e.game.player&&e.doesPlayerHaveSpaceDock(s.p[c]))return e.game.players_info[r-1].experimental_battlestation=a,1;return 1}}),this.importActionCard("direct-hit1",{name:"Direct Hit",type:"space_combat_after",text:"Destroy a ship that is damaged or not at full strength",playActionCard:function(e,t,r,n){for(var a=e.returnEventObjects(),i=e.returnSectorAndPlanets(e.game.state.space_combat_sector),o=0;o<i.s.units.length;o++)if(o!=r-1)for(var s=0;s<i.s.units[o].length;s++)if(i.s.units[o][s].strength<i.s.units[r-1][s].max_strength){for(var c in i.s.units[o][s].strength=0,i.s.units[o][s].strength=0,a)a[c].unitDestroyed(e,attacker,i.p.units[o][s]);e.eliminateDestroyedUnitsInSector(o+1,sector),e.saveSystemAndPlanets(i),e.updateSectorGraphics(sector),s=i.s.units[o].length+2}return 1}}),this.importActionCard("direct-hit2",{name:"Direct Hit",type:"space_combat_after",text:"Destroy a ship that is damaged or not at full strength",playActionCard:function(e,t,r,n){for(var a=e.returnEventObjects(),i=e.returnSectorAndPlanets(e.game.state.space_combat_sector),o=0;o<i.s.units.length;o++)if(o!=r-1)for(var s=0;s<i.s.units[o].length;s++)if(i.s.units[o][s].strength<i.s.units[r-1][s].max_strength){for(var c in i.s.units[o][s].strength=0,i.s.units[o][s].strength=0,a)a[c].unitDestroyed(e,attacker,i.p.units[o][s]);e.eliminateDestroyedUnitsInSector(o+1,sector),e.saveSystemAndPlanets(i),e.updateSectorGraphics(sector),s=i.s.units[o].length+2}return 1}}),this.importActionCard("direct-hit3",{name:"Direct Hit",type:"space_combat_after",text:"Destroy a ship that is damaged or not at full strength",playActionCard:function(e,t,r,n){for(var a=e.returnEventObjects(),i=e.returnSectorAndPlanets(e.game.state.space_combat_sector),o=0;o<i.s.units.length;o++)if(o!=r-1)for(var s=0;s<i.s.units[o].length;s++)if(i.s.units[o][s].strength<i.s.units[r-1][s].max_strength){for(var c in i.s.units[o][s].strength=0,i.s.units[o][s].strength=0,a)a[c].unitDestroyed(e,attacker,i.p.units[o][s]);e.eliminateDestroyedUnitsInSector(o+1,sector),e.saveSystemAndPlanets(i),e.updateSectorGraphics(sector),s=i.s.units[o].length+2}return 1}}),this.importActionCard("direct-hit4",{name:"Direct Hit",type:"space_combat_after",text:"Destroy a ship that is damaged or not at full strength",playActionCard:function(e,t,r,n){for(var a=e.returnEventObjects(),i=e.returnSectorAndPlanets(e.game.state.space_combat_sector),o=0;o<i.s.units.length;o++)if(o!=r-1)for(var s=0;s<i.s.units[o].length;s++)if(i.s.units[o][s].strength<i.s.units[r-1][s].max_strength){for(var c in i.s.units[o][s].strength=0,i.s.units[o][s].strength=0,a)a[c].unitDestroyed(e,attacker,i.p.units[o][s]);e.eliminateDestroyedUnitsInSector(o+1,sector),e.saveSystemAndPlanets(i),e.updateSectorGraphics(sector),s=i.s.units[o].length+2}return 1}}),this.importActionCard("skilled-retreat1",{name:"Skilled Retreat",type:"space_combat",text:"Retreat into an adjacent system without enemy ships. Space Battle ends tied",playActionCard:function(e,t,r,n){if(e.game.player==r){var a=e.game.state.space_combat_sector;e.returnAdjacentSectors(a),e.playerSelectSectorWithFilter("Select an adjacent sector without opponent ships into which to retreat: ",(function(t){return e.areSectorsAdjacent(a,t)&&t!=a&&!e.doesSectorContainNonPlayerShips(t)?1:0}),(function(t){e.addMove("skilled_retreat\t"+r+"\t"+t+"\t"+e.game.state.space_combat_sector),e.addMove("NOTIFY\t"+e.returnFaction(r)+" makes skilled retreat into "+e.game.sectors[t].name),e.addMove("activate\t"+r+"\t"+t),e.addMove("activate\t"+r+"\t"+e.game.state.space_combat_sector),e.endTurn()}),(function(){e.addMove("NOTIFY\tno suitable sectors available for skilled retreat"),e.endTurn()}))}return 0},handleGameLoop:function(e,t,r){if("skilled_retreat"==r[0]){var n=parseInt(r[1]),a=r[2],i=r[3];e.game.queue.splice(t,1);for(var o=e.returnSectorAndPlanets(a),s=e.returnSectorAndPlanets(i),c=0;c<s.s.units[n-1].length;c++)o.s.units[n-1].push(s.s.units[n-1][c]);s.s.units[n-1]=[],e.saveSystemAndPlanets(o),e.saveSystemAndPlanets(s);for(var l=e.game.queue.length-1;l>=0;l--)"continue"!==e.game.queue[l].split("\t")[0]?e.game.queue.splice(l,1):l=-1;return e.updateSectorGraphics(s.s.sector),e.updateSectorGraphics(o.s.sector),e.handleFleetSupply(n,a)}return 1}}),this.importActionCard("skilled-retreat2",{name:"Skilled Retreat",type:"space_combat",text:"Retreat into an adjacent system without enemy ships. Space Battle ends tied",playActionCard:function(e,t,r,n){if(e.game.player==r){var a=e.game.state.space_combat_sector;e.returnAdjacentSectors(a),e.playerSelectSectorWithFilter("Select an adjacent sector without opponent ships into which to retreat: ",(function(t){return e.areSectorsAdjacent(a,t)&&t!=a&&!e.doesSectorContainNonPlayerShips(t)?1:0}),(function(t){e.addMove("skilled_retreat\t"+r+"\t"+t+"\t"+e.game.state.space_combat_sector),e.addMove("NOTIFY\t"+e.returnFaction(r)+" makes skilled retreat into "+e.game.sectors[t].name),e.addMove("activate\t"+r+"\t"+t),e.addMove("activate\t"+r+"\t"+e.game.state.space_combat_sector),e.endTurn()}),(function(){e.addMove("NOTIFY\tno suitable sectors available for skilled retreat"),e.endTurn()}))}return 0}}),this.importActionCard("skilled-retreat3",{name:"Skilled Retreat",type:"space_combat",text:"Retreat into an adjacent system without enemy ships. Space Battle ends tied",playActionCard:function(e,t,r,n){if(e.game.player==r){var a=e.game.state.space_combat_sector;e.returnAdjacentSectors(a),e.playerSelectSectorWithFilter("Select an adjacent sector without opponent ships into which to retreat: ",(function(t){return e.areSectorsAdjacent(a,t)&&t!=a&&!e.doesSectorContainNonPlayerShips(t)?1:0}),(function(t){e.addMove("skilled_retreat\t"+r+"\t"+t+"\t"+e.game.state.space_combat_sector),e.addMove("NOTIFY\t"+e.returnFaction(r)+" makes skilled retreat into "+e.game.sectors[t].name),e.addMove("activate\t"+r+"\t"+t),e.addMove("activate\t"+r+"\t"+e.game.state.space_combat_sector),e.endTurn()}),(function(){e.addMove("NOTIFY\tno suitable sectors available for skilled retreat"),e.endTurn()}))}return 0}}),this.importActionCard("skilled-retreat4",{name:"Skilled Retreat",type:"space_combat",text:"Retreat into an adjacent system without enemy ships. Space Battle ends tied",playActionCard:function(e,t,r,n){if(e.game.player==r){var a=e.game.state.space_combat_sector;e.returnAdjacentSectors(a),e.playerSelectSectorWithFilter("Select an adjacent sector without opponent ships into which to retreat: ",(function(t){return e.areSectorsAdjacent(a,t)&&t!=a&&!e.doesSectorContainNonPlayerShips(t)?1:0}),(function(t){e.addMove("skilled_retreat\t"+r+"\t"+t+"\t"+e.game.state.space_combat_sector),e.addMove("NOTIFY\t"+e.returnFaction(r)+" makes skilled retreat into "+e.game.sectors[t].name),e.addMove("activate\t"+r+"\t"+t),e.addMove("activate\t"+r+"\t"+e.game.state.space_combat_sector),e.endTurn()}),(function(){e.addMove("NOTIFY\tno suitable sectors available for skilled retreat"),e.endTurn()}))}return 0}}),this.importActionCard("public-disgrace",{name:"Public Disgrace",type:"activate",text:"Force a player who has already picked a strategy card to select another. They select before you do",playActionCard:function(e,t,r,n){return 0},handleGameLoop:function(e,t,r){if("public_disgrace"==r[0]){var n=parseInt(r[1]),a=parseInt(r[2]),i=r[3];e.game.queue.splice(t,1);for(var o=0;o<e.game.players_info[a-1].strategy.length;o++)e.game.players_info[a-1].strategy[o]==i&&e.game.players_info[a-1].strategy.splice(o,1);return e.game.queue.push("pickstrategy\t"+n),e.game.queue.push("reinsert_strategy_card\t"+i),e.game.queue.push("pickstrategy\t"+a),1}if("reinsert_strategy_card"==r[0]){var s=r[1];return e.game.state.strategy_cards.push(s),e.game.state.strategy_cards_bonus.push(0),1}return 1}})}},{key:"initializeHTML",value:function(e){var t=this,r=this;c(p(y.prototype),"initializeHTML",this).call(this,e);try{this.app.modules.respondTo("chat-manager").forEach((function(r){r.respondTo("chat-manager").render(e,t),r.respondTo("chat-manager").attachEvents(e,t)})),$(".content").css("visibility","visible"),$(".hud_menu_game-status").css("display","none"),this.menu.addMenuOption({text:"Game",id:"game-game",class:"game-game",callback:function(e,t){t.menu.showSubMenu("game-game")}}),this.menu.addSubMenuOption("game-game",{text:"Log",id:"game-log",class:"game-log",callback:function(e,t){t.menu.hideSubMenus(),t.log.toggleLog()}}),this.menu.addSubMenuOption("game-game",{text:"Exit",id:"game-exit",class:"game-exit",callback:function(e,t){window.location.href="/arcade"}}),this.menu.addMenuOption({text:"Rules",id:"game-howto",class:"game-howto",callback:function(e,t){t.menu.showSubMenu("game-howto")}}),this.menu.addSubMenuOption("game-howto",{text:"Basic",id:"game-rules",class:"game-basic-rules",callback:function(e,t){t.menu.hideSubMenus(),t.handleHowToPlayMenuItem()}}),this.menu.addSubMenuOption("game-howto",{text:"Units",id:"game-unit-rules",class:"game-unit-rules",callback:function(e,t){t.menu.hideSubMenus(),t.overlay.showOverlay(t.app,t,t.returnUnitsOverlay())}}),this.menu.addSubMenuOption("game-howto",{text:"Production",id:"game-production-rules",class:"game-production-rules",callback:function(e,t){t.menu.hideSubMenus(),t.overlay.showOverlay(t.app,t,'<div style="margin-left:auto;margin-right:auto;width:1200px;height:auto"><img src="/imperium/img/tutorials/production.png" style="width:100%; height:auto;" /></div>')}}),this.menu.addSubMenuOption("game-howto",{text:"Movement",id:"game-basic-rules",class:"game-basic-rules",callback:function(e,t){t.menu.hideSubMenus(),t.handleMovementMenuItem()}}),this.menu.addSubMenuOption("game-howto",{text:"Combat",id:"game-combat",class:"game-combat",callback:function(e,t){t.menu.hideSubMenus(),t.handleCombatMenuItem()}}),this.menu.addSubMenuOption("game-howto",{text:"Factions",id:"game-factions",class:"game-factions",callback:function(e,t){t.menu.hideSubMenus(),t.handleFactionMenuItem()}}),this.menu.addMenuOption({text:"Info",id:"game-cards",class:"game-cards",callback:function(e,t){t.menu.showSubMenu("game-cards")}}),this.menu.addSubMenuOption("game-cards",{text:"Strategy Cards",id:"game-strategy",class:"game-strategy",callback:function(e,t){t.menu.hideSubMenus(),t.handleStrategyMenuItem()}}),this.menu.addSubMenuOption("game-cards",{text:"Tech Tree",id:"game-tech",class:"game-tech",callback:function(e,t){t.menu.hideSubMenus(),t.handleTechMenuItem()}}),this.menu.addSubMenuOption("game-cards",{text:"Agendas",id:"game-agendas",class:"game-agendas",callback:function(e,t){t.menu.hideSubMenus(),t.handleAgendasMenuItem()}}),this.menu.addSubMenuOption("game-cards",{text:"Laws",id:"game-laws",class:"game-laws",callback:function(e,t){t.menu.hideSubMenus(),t.handleLawsMenuItem()}}),this.menu.addSubMenuOption("game-cards",{text:"Objectives",id:"game-vp",class:"game-vp",callback:function(e,t){t.menu.hideSubMenus(),t.handleObjectivesMenuItem()}}),this.menu.addMenuOption({text:"Cards",id:"game-cardlist",class:"game-cardlist",callback:function(e,t){t.menu.showSubMenu("game-cardlist")}}),this.menu.addSubMenuOption("game-cardlist",{text:"Strategy",id:"game-strategy-cardlist",class:"game-strategy-cardlist",callback:function(e,t){t.menu.hideSubMenus(),t.overlay.showCardSelectionOverlay(t.app,t,t.returnStrategyCards(),{title:"Strategy Cards",columns:4,backgroundImage:"/imperium/img/starscape_background3.jpg"},(function(){alert("cardlist close strategy init menu")}))}}),this.menu.addSubMenuOption("game-cardlist",{text:"Action",id:"game-action-cardlist",class:"game-action-cardlist",callback:function(e,t){t.menu.hideSubMenus(),t.overlay.showCardSelectionOverlay(t.app,t,t.returnActionCards(),{},(function(){alert("cardlist close strategy init menu")}))}}),this.menu.addSubMenuOption("game-cardlist",{text:"Tech",id:"game-tech-cardlist",class:"game-tech-cardlist",callback:function(e,t){t.menu.hideSubMenus();var r=t.returnTechnology(),n=[];for(var a in r)"normal"==r[a].type&&1!=r[a].unit&&n.push(r[a]);t.overlay.showCardSelectionOverlay(t.app,t,n,{backgroundImage:"/imperium/img/starscape-background4.jpg",padding:"50px"},(function(){alert("cardlist close strategy init menu")}))}}),this.menu.addSubMenuOption("game-cardlist",{text:"Units",id:"game-units-cardlist",class:"game-units-cardlist",callback:function(e,t){t.menu.hideSubMenus(),t.overlay.showOverlay(t.app,t,t.returnUnitsOverlay())}}),this.menu.addSubMenuOption("game-cardlist",{text:"Upgrades",id:"game-unit-cardlist",class:"game-unit-cardlist",callback:function(e,t){t.menu.hideSubMenus();var r=t.returnTechnology(),n=[];for(var a in r)"normal"==r[a].type&&1==r[a].unit&&n.push(r[a]);t.overlay.showCardSelectionOverlay(t.app,t,n,{backgroundImage:"/imperium/img/starscape-background4.jpg",padding:"50px"},(function(){alert("cardlist close strategy init menu")}))}}),this.menu.addSubMenuOption("game-cardlist",{text:"Agendas",id:"game-agenda-cardlist",class:"game-agenda-cardlist",callback:function(e,t){t.menu.hideSubMenus(),t.overlay.showCardSelectionOverlay(t.app,t,t.agenda_cards,{cardlistWidth:"90vw",cardlistHeight:"90vh"},(function(){alert("cardlist close strategy init menu")}))}}),this.menu.addSubMenuOption("game-cardlist",{text:"Objectives I",id:"game-objectives-i-cardlist",class:"game-objectives-i-cardlist",callback:function(e,t){t.menu.hideSubMenus(),t.overlay.showCardSelectionOverlay(t.app,t,t.stage_i_objectives,{cardlistHeight:"90vh",cardlistWidth:"90vw"},(function(){alert("cardlist close strategy init menu")}))}}),this.menu.addSubMenuOption("game-cardlist",{text:"Objectives II",id:"game-objectives-ii-cardlist",class:"game-objectives-ii-cardlist",callback:function(e,t){t.menu.hideSubMenus(),t.overlay.showCardSelectionOverlay(t.app,t,t.stage_ii_objectives,{cardlistHeight:"90vh",cardlistWidth:"90vw"},(function(){alert("cardlist close strategy init menu")}))}}),this.menu.addSubMenuOption("game-cardlist",{text:"Secrets",id:"game-secret-objectives-cardlist",class:"game-secret-objectives-cardlist",callback:function(e,t){t.menu.hideSubMenus(),t.overlay.showCardSelectionOverlay(t.app,t,t.secret_objectives,{cardlistHeight:"90vh",cardlistWidth:"90vw"},(function(){alert("cardlist close strategy init menu")}))}});try{for(var n=0,a=0,i=0;i<this.app.modules.mods.length;i++)if("Chat"===this.app.modules.mods[i].name)for(var o=0;o<this.game.players.length;o++)this.game.players[o]!=this.app.wallet.returnPublicKey()&&function(){var e=[t.game.players[o],t.app.wallet.returnPublicKey()].sort(),s=t.app.crypto.hash(e.join("_")),c=r.returnFaction(o+1),l=r.returnFactionNickname(o+1),u=t.app.modules.mods[i];0==n&&(t.menu.addMenuOption({text:"Chat",id:"game-chat",class:"game-chat",callback:function(e,t){t.menu.showSubMenu("game-chat")}}),n=1),0==a&&(t.menu.addSubMenuOption("game-chat",{text:"Group",id:"game-chat-community",class:"game-chat-community",callback:function(e,t){t.menu.hideSubMenus(),u.sendEvent("chat-render-request",{}),u.mute_community_chat=0,u.openChatBox()}}),a=1),t.menu.addSubMenuOption("game-chat",{text:l,id:"game-chat-"+(o+1),class:"game-chat-"+(o+1),callback:function(t,r){r.menu.hideSubMenus(),u.createChatGroup(e,c),u.openChatBox(s),u.sendEvent("chat-render-request",{}),u.saveChat()}})}()}catch(e){console.log("error initing chat: "+e)}if(0==this.browser_active)return;this.menu.addMenuIcon({text:'<i class="fa fa-window-maximize" aria-hidden="true"></i>',id:"game-menu-fullscreen",callback:function(e,t){e.browser.requestFullscreen()}}),this.menu.render(e,this),this.menu.attachEvents(e,this),this.hud.render(e,this),this.hud.attachEvents(e,this),this.log.render(e,this),this.log.attachEvents(e,this),this.cardbox.render(e,this),this.cardbox.attachEvents(e,this),this.hud.render(e,this),this.hud.attachEvents(e,this);try{e.browser.isMobileBrowser(navigator.userAgent)?(this.hammer.render(this.app,this),this.hammer.attachEvents(this.app,this,"#hexGrid")):(this.sizer.render(this.app,this),this.sizer.attachEvents(this.app,this,"#hexGrid"))}catch(e){}this.hud.addCardType("textchoice","",null)}catch(e){}}},{key:"initializeGame",value:(f=o(regeneratorRuntime.mark((function e(t){var r,n,a,i,o,s,c,l,u,d,h,p,f,m,g,y,v,b,_,w,x,k,S,E,A,P,C,D,T,O,M,I,R,F,B,j,N,q,L,U,z,H,G,K,V,W,Y,J;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.preloadImages(),this.updateStatus("loading game...: "+t),this.loadGame(t),""!=this.game.status&&this.updateStatus(this.game.status),""!=this.game.log&&this.game.log.length>0)for(r=this.game.log.length-1;r>=0;r--)this.updateLog(this.game.log[r]);if(this.totalPlayers=this.game.players.length,this.initializeGameObjects(),n=this.returnHomeworldSectors(this.totalPlayers),a=0,null==this.game.board){for(a=1,this.initializeDice(),this.game.players_info=this.returnPlayers(this.totalPlayers),this.game.state=this.returnState(),this.game.sectors=this.returnSectors(),this.game.planets=this.returnPlanets(),this.game.board={},i=1,o=4;i<=7;i++){for(s=1;s<=o;s++)c=i+"_"+s,this.game.board[c]={tile:""};i<4&&o++,i>=4&&o--}for(l in this.game.strategy_cards=[],this.strategy_cards)this.game.strategy_cards.push(l),this.game.state.strategy_cards_bonus.push(0);if(2==this.totalPlayers){try{$("#1_3").attr("id",""),$("#1_4").attr("id",""),$("#2_4").attr("id",""),$("#2_4").attr("id",""),$("#2_5").attr("id",""),$("#3_1").attr("id",""),$("#4_1").attr("id",""),$("#4_2").attr("id",""),$("#5_1").attr("id",""),$("#5_2").attr("id",""),$("#6_1").attr("id",""),$("#6_2").attr("id",""),$("#6_3").attr("id",""),$("#6_4").attr("id",""),$("#6_5").attr("id",""),$("#7_1").attr("id",""),$("#7_2").attr("id",""),$("#7_3").attr("id",""),$("#7_4").attr("id","")}catch(e){}delete this.game.board["1_3"],delete this.game.board["1_4"],delete this.game.board["2_4"],delete this.game.board["2_5"],delete this.game.board["3_1"],delete this.game.board["4_1"],delete this.game.board["4_2"],delete this.game.board["5_1"],delete this.game.board["5_2"],delete this.game.board["6_1"],delete this.game.board["6_2"],delete this.game.board["6_3"],delete this.game.board["6_4"],delete this.game.board["6_5"],delete this.game.board["7_1"],delete this.game.board["7_2"],delete this.game.board["7_3"],delete this.game.board["7_4"]}if(3==this.totalPlayers){try{$("#1_3").attr("id",""),$("#1_4").attr("id",""),$("#2_4").attr("id",""),$("#2_5").attr("id",""),$("#3_1").attr("id",""),$("#4_1").attr("id",""),$("#4_2").attr("id",""),$("#5_1").attr("id",""),$("#6_4").attr("id",""),$("#6_5").attr("id",""),$("#7_3").attr("id",""),$("#7_4").attr("id","")}catch(e){}delete this.game.board["1_3"],delete this.game.board["1_4"],delete this.game.board["2_4"],delete this.game.board["2_5"],delete this.game.board["3_1"],delete this.game.board["4_1"],delete this.game.board["4_2"],delete this.game.board["5_1"],delete this.game.board["6_4"],delete this.game.board["6_5"],delete this.game.board["7_3"],delete this.game.board["7_4"]}for(h in u=JSON.parse(JSON.stringify(this.returnSectors())),d=[],this.game.board["4_4"].tile="new-byzantium",this.game.board)if("4_4"!=h&&!n.includes(h))for(p=0,f=Object.keys(u);0==p;)m=f[this.rollDice(f.length)-1],1!=this.game.sectors[m].hw&&1!=d.includes(m)&&1!=this.game.sectors[m].mr&&(d.push(m),delete u[m],this.game.board[h].tile=m,p=1);for(g=0;g<this.game.players_info.length;g++)this.game.players_info[g].homeworld=n[g],this.game.board[n[g]].tile=this.factions[this.game.players_info[g].faction].homeworld;for(y=0;y<this.totalPlayers;y++){for(v=this.returnSectorAndPlanets(n[y]),b=0,_=0,R=0;R<v.p.length;R++)v.p[R].owner=y+1,v.p[R].resources>_&&(b=R,_=v.p[R].resources);for(w=0;w<this.factions[this.game.players_info[y].faction].space_units.length;w++)this.addSpaceUnit(y+1,n[y],this.factions[this.game.players_info[y].faction].space_units[w]);for(x=0;x<this.factions[this.game.players_info[y].faction].ground_units.length;x++)this.loadUnitOntoPlanet(y+1,n[y],b,this.factions[this.game.players_info[y].faction].ground_units[x]);for(this.returnTechnology(),k=0;k<this.factions[this.game.players_info[y].faction].tech.length;k++)S=this.factions[this.game.players_info[y].faction].tech[k],this.game.players_info[y].tech.push(S);for(E=0;E<this.factions[this.game.players_info[y].faction].promissary_notes.length;E++)A=this.factions[this.game.players_info[y].faction].id+"-"+this.factions[this.game.players_info[y].faction].promissary_notes[E],this.game.players_info[y].promissary_notes.push(A);this.saveSystemAndPlanets(v)}if(0==this.game.queue.length){for(T in P=this.returnStageIPublicObjectives(),C=this.returnStageIIPublicObjectives(),D=this.returnSecretObjectives(),P)P[T].minPlayers>this.game.players.length&&delete P[T];for(O in C)C[O].minPlayers>this.game.players.length&&delete C[O];for(M in D)D[M].minPlayers>this.game.players.length&&delete D[M];for(this.game.queue.push("turn"),this.game.queue.push("newround"),I=0;I<this.game.players_info.length;I++)this.game.queue.push("gain\t"+(I+1)+"\tsecret_objectives\t1"),this.game.queue.push("DEAL\t6\t"+(I+1)+"\t1");this.game.queue.push("SHUFFLE\t1"),this.game.queue.push("SHUFFLE\t2"),this.game.queue.push("SHUFFLE\t3"),this.game.queue.push("SHUFFLE\t4"),this.game.queue.push("SHUFFLE\t5"),this.game.queue.push("SHUFFLE\t6"),this.game.queue.push("POOL\t3"),this.game.queue.push("POOL\t2"),this.game.queue.push("POOL\t1"),this.game.queue.push("DECK\t1\t"+JSON.stringify(this.returnStrategyCards())),this.game.queue.push("DECK\t2\t"+JSON.stringify(this.returnActionCards())),this.game.queue.push("DECK\t3\t"+JSON.stringify(this.returnAgendaCards())),this.game.queue.push("DECK\t4\t"+JSON.stringify(P)),this.game.queue.push("DECK\t5\t"+JSON.stringify(C)),this.game.queue.push("DECK\t6\t"+JSON.stringify(D))}}for(R=this.returnEventObjects(),F=0;F<R.length;F++)for(B=0;B<this.game.players_info.length;B++)R[F].initialize(this,B+1);if(1==a){for(j=0;j<R.length;j++)for(N=0;N<this.game.players_info.length;N++)for(q=0;q<this.game.players_info[N].tech.length;q++)R[j].gainTechnology(this,N+1,this.game.players_info[N].tech[q]);for(L=0;L<this.game.players_info.length;L++)this.upgradePlayerUnitsOnBoard(L+1)}for(U in this.game.board){if(z=this.game.board[U].tile,(H=this.returnSectorAndPlanets(z)).s.sector=z,H.s.tile=U,null!=H.p)for(G=0;G<H.p.length;G++)H.p[G].sector=z,H.p[G].tile=U,H.p[G].idx=G,H.p[G].hw=H.s.hw,H.p[G].planet=H.s.planets[G],1==H.s.hw&&(H.p[G].hw=1);this.saveSystemAndPlanets(H)}for(this.returnSectorAndPlanets("2_1"),K=0;K<this.game.state.laws.length;K++)(V=this.game.state.laws[K]).agenda,W=V.option,this.agenda_cards[V.agenda]&&this.agenda_cards[V.agenda].initialize(this,W);try{$(".hud-body > .log").remove(),$(".status").css("display","block")}catch(e){}for(Y in this.game.board){J="#"+Y;try{$(J).html('           <div class="hexIn" id="hexIn_'+Y+'">             <div class="hexLink" id="hexLink_'+Y+'">             <div class="hexInfo" id="hex_info_'+Y+'"></div>               <div class="hex_bg" id="hex_bg_'+Y+'">                 <img class="hex_img sector_graphics_background '+this.game.board[Y].tile+'" id="hex_img_'+Y+'" src="" />                 <img src="/imperium/img/frame/border_full_white.png" id="hex_img_faction_border_'+Y+'" class="faction_border" />                 <img src="/imperium/img/frame/border_full_yellow.png" id="hex_img_hazard_border_'+Y+'" class="hazard_border" />                 <div class="hex_activated" id="hex_activated_'+Y+'">               </div>                 <div class="hex_space" id="hex_space_'+Y+'">               </div>                 <div class="hex_ground" id="hex_ground_'+Y+'">               </div>               </div>             </div>           </div>         '),$("#hex_img_"+Y).attr("src",this.game.sectors[this.game.board[Y].tile].img),this.updateSectorGraphics(Y)}catch(e){}}this.updateLeaderboard(),this.game.state.playing_strategy_card_secondary=0,this.addEventsToBoard(),this.addUIEvents();case 22:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"preloadImages",value:(a=o(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=["img/starscape_background1.jpg","img/ships/carrier_100x200.png","img/ships/destroyer_100x200.png","img/ships/dreadnaught_100x200.png","img/ships/fighter_100x200.png","img/ships/pds_100x200.png","img/ships/spacedock_100x200.png","img/ships/cruiser_100x200.png","img/strategy/BUILD.png","img/strategy/DIPLOMACY.png","img/strategy/EMPIRE.png","img/strategy/INITIATIVE.png","img/strategy/MILITARY.png","img/strategy/POLITICS.png","img/strategy/TECH.png","img/strategy/TRADE.png","img/influence/5.png","img/influence/8.png","img/influence/2.png","img/influence/1.png","img/influence/7.png","img/influence/0.png","img/influence/9.png","img/influence/4.png","img/influence/3.png","img/influence/6.png","img/agenda_card_template.png","img/card_template.jpg","img/secret_objective_ii_back.png","img/units/fighter.png","img/units/flagship.png","img/units/spacedock.png","img/units/warsun.png","img/units/dreadnaught.png","img/units/cruiser.png","img/units/infantry.png","img/units/pds.png","img/units/carrier.png","img/units/destroyer.png","img/action_card_back.jpg","img/arcade/arcade-banner-background.png","img/secret_objective2.jpg","img/objective_card_1_template.png","img/techicons/Cyber D.png","img/techicons/Warfare D.png","img/techicons/Warfare L.png","img/techicons/Biotic D.png","img/techicons/Propultion Dark.png","img/techicons/Biotic L.png","img/techicons/Cybernetic D.png","img/techicons/Propultion Light.png","img/techicons/Cybernetic L.png","img/secret_objective_back.png","img/planet_card_template.png","img/secret_objective.jpg","img/arcade_release.jpg","img/tech_card_template.jpg","img/blank_influence_hex.png","img/spaceb2.jpg","img/frame/white_space_frame_1_5.png","img/frame/white_space_frame_4_1.png","img/frame/white_planet_center_1_9.png","img/frame/white_planet_center_3_1.png","img/frame/white_space_frame_full.png","img/frame/white_space_frame_4_9.png","img/frame/white_space_frame_6_3.png","img/frame/white_space_frame_2_4.png","img/frame/white_space_frame_3_2.png","img/frame/white_space_frame_2_2.png","img/frame/white_space_frame_2_3.png","img/frame/white_space_frame_2_6.png","img/frame/white_space_frame_7_4.png","img/frame/white_planet_center_2_5.png","img/frame/white_space_frame_5_8.png","img/frame/white_space_frame_1_4.png","img/frame/white_space_frame_4_4.png","img/frame/white_space_frame_4_7.png","img/frame/white_space_frame_2_1.png","img/frame/white_planet_center_2_1.png","img/frame/white_planet_center_2_9.png","img/frame/white_space_frame_4_3.png","img/frame/border_full_yellow.png","img/frame/white_planet_center.png","img/frame/white_space_frame_3_6.png","img/frame/white_space_frame_7_8.png","img/frame/white_planet_center_3_7.png","img/frame/border_corner_red.png","img/frame/white_space_frame_2_7.png","img/frame/white_space_frame_3_3.png","img/frame/white_space_frame_7_7.png","img/frame/white_planet_center_3_5.png","img/frame/white_planet_right_bottom.png","img/frame/white_space_frame_6_2.png","img/frame/white_planet_left_top.png","img/frame/white_space_frame_5_7.png","img/frame/white_space_frame_2_5.png","img/frame/white_space_frame_1_3.png","img/frame/white_space_frame_4_2.png","img/frame/white_space_frame_3_8.png","img/frame/white_space_frame_2_8.png","img/frame/white_planet_center_1_8.png","img/frame/white_space_frame_3_9.png","img/frame/white_space_frame_3_5.png","img/frame/white_space_frame_4_5.png","img/frame/white_space_frame_5_3.png","img/frame/white_planet_center_2_4.png","img/frame/white_planet_center_2_3.png","img/frame/white_space_frame_1_1.png","img/frame/white_space_frame_1_7.png","img/frame/white_space_frame_7_1.png","img/frame/white_space_frame_7_9.png","img/frame/white_space_frame_5_9.png","img/frame/white_planet_center_2_7.png","img/frame/white_space_frame_6_8.png","img/frame/white_planet_center_3_4.png","img/frame/white_space_frame_3_7.png","img/frame/white_space_frame_6_7.png","img/frame/white_space_frame_6_4.png","img/frame/white_planet_center_2_6.png","img/frame/white_space_warsun.png","img/frame/border_corner_yellow.png","img/frame/white_planet_center_3_9.png","img/frame/white_planet_center_3_3.png","img/frame/white_space_frame_5_6.png","img/frame/white_space_frame_5_2.png","img/frame/border_full_white.png","img/frame/white_planet_center_3_6.png","img/frame/white_space_carrier.png","img/frame/border_full_red.png","img/frame/white_space_flagship.png","img/frame/white_space_destroyer.png","img/frame/white_space_frame_4_6.png","img/frame/white_planet_center_2_2.png","img/frame/white_space_frame_4_8.png","img/frame/white_space_cruiser.png","img/frame/white_space_frame_3_4.png","img/frame/white_planet_center_1_6.png","img/frame/white_planet_center_1_1.png","img/frame/white_space_frame_5_4.png","img/frame/white_space_frame_6_9.png","img/frame/white_space_frame_7_5.png","img/frame/white_planet_center_1_7.png","img/frame/white_space_frame_1_8.png","img/frame/white_space_frame_7_6.png","img/frame/white_planet_center_3_2.png","img/frame/white_planet_center_1_4.png","img/frame/white_space_frame_7_2.png","img/frame/white_space_frame_5_1.png","img/frame/white_space_frame_7_3.png","img/frame/white_space_frame_6_6.png","img/frame/white_space_frame_1_6.png","img/frame/white_planet_center_3_8.png","img/frame/white_space_frame.png","img/frame/white_space_frame_1_9.png","img/frame/white_space_frame_6_5.png","img/frame/white_planet_center_1_2.png","img/frame/white_planet_center_2_8.png","img/frame/white_space_frame_5_5.png","img/frame/white_space_frame_2_9.png","img/frame/white_space_frame_3_1.png","img/frame/white_space_frame_6_1.png","img/frame/white_space_dreadnaught.png","img/frame/white_planet_center_1_3.png","img/frame/white_space_frame_1_2.png","img/frame/white_space_fighter.png","img/frame/white_planet_center_1_5.png","img/sectors/sector13.png","img/sectors/sector71.png","img/sectors/sector6.png","img/sectors/sector35.png","img/sectors/sector66.png","img/sectors/sector9.png","img/sectors/sector20.png","img/sectors/sector25.png","img/sectors/sector39.png","img/sectors/sector23.png","img/sectors/sector11.png","img/sectors/sector69.png","img/sectors/sector4.png","img/sectors/sector53.png","img/sectors/sector60.png","img/sectors/sector10.png","img/sectors/sector28.png","img/sectors/sector2.png","img/sectors/sector43.png","img/sectors/sector27.png","img/sectors/sector72.png","img/sectors/sector55.png","img/sectors/sector49.png","img/sectors/sector50.png","img/sectors/sector65.png","img/sectors/sector58.png","img/sectors/sector29.png","img/sectors/sector44.png","img/sectors/sector41.png","img/sectors/sector19.png","img/sectors/sector1.png","img/sectors/sector73.png","img/sectors/sector40.png","img/sectors/sector52.png","img/sectors/sector42.png","img/sectors/sector59.png","img/sectors/sector57.png","img/sectors/sector3.png","img/sectors/sector18.png","img/sectors/sector32.png","img/sectors/sector22.png","img/sectors/sector63.png","img/sectors/sector38.png","img/sectors/sector70.png","img/sectors/sector16.png","img/sectors/sector14.png","img/sectors/sector54.png","img/sectors/sector62.png","img/sectors/sector8.png","img/sectors/sector36.png","img/sectors/sector48.png","img/sectors/sector17.png","img/sectors/sector33.png","img/sectors/sector26.png","img/sectors/sector56.png","img/sectors/sector61.png","img/sectors/sector15.png","img/sectors/sector34.png","img/sectors/sector51.png","img/sectors/sector12.png","img/sectors/sector7.png","img/sectors/sector5.png","img/sectors/sector21.png","img/sectors/sector30.png","img/sectors/sector31.png","img/sectors/sector24.png","img/sectors/sector47.png","img/sectors/sector68.png","img/sectors/sector67.png","img/sectors/sector64.png","img/sectors/sector45.png","img/sectors/sector46.png","img/blank_resources_hex.png","img/factions/faction2.jpg","img/factions/faction1.jpg","img/factions/faction3.jpg","img/spacebg.png","img/resources/5.png","img/resources/8.png","img/resources/2.png","img/resources/1.png","img/resources/7.png","img/resources/0.png","img/resources/9.png","img/resources/4.png","img/resources/3.png","img/resources/6.png","img/planets/HARKON-CALEDONIA.png","img/planets/KLENCORY.png","img/planets/STARTIDE.png","img/planets/UNSULLA.png","img/planets/GRAVITYS-EDGE.png","img/planets/OLYMPIA.png","img/planets/OTHO.png","img/planets/ARCHION-REX.png","img/planets/KROEBER.png","img/planets/COTILLARD.png","img/planets/INCARTH.png","img/planets/XERXES-IV.png","img/planets/HEARTHSLOUGH.png","img/planets/QUARTIL.png","img/planets/SOUNDRA-IV.png","img/planets/INDUSTRYL.png","img/planets/VIGOR.png","img/planets/CALTHREX.png","img/planets/VESPAR.png","img/planets/HIRAETH.png","img/planets/LAZAKS-CURSE.png","img/planets/CRYSTALIS.png","img/planets/SINGHARTA.png","img/planets/JOL.png","img/planets/NOVA-KLONDIKE.png","img/planets/QUANDAM.png","img/planets/OLD-MOLTOUR.png","img/planets/FIREHOLE.png","img/planets/CONTOURI-I.png","img/planets/CONTOURI-II.png","img/planets/SIRENS-END.png","img/planets/FJORDRA.png","img/planets/LORSTRUCK.png","img/planets/SHRIVA.png","img/planets/EARTH.png","img/planets/HOTH.png","img/planets/KROMER.png","img/planets/VOLUNTRA.png","img/planets/EBERBACH.png","img/planets/NEW-BYZANTIUM.png","img/planets/TROTH.png","img/planets/ARTIZZ.png","img/planets/NEW-JYLANX.png","img/planets/XIAO-ZUOR.png","img/planets/NAR.png","img/planets/GIANTS-DRINK.png","img/planets/GRANTON-MEX.png","img/planets/MIRANDA.png","img/planets/HOPES-LURE.png","img/planets/OUTERANT.png","img/planets/BELVEDYR.png","img/planets/YODERUX.png","img/planets/YSSARI-II.png","img/planets/QUAMDAM.png","img/planets/ZONDOR.png","img/planets/SIGURD.png","img/planets/MECHANEX.png","img/planets/RIFTVIEW.png","img/planets/POPULAX.png","img/planets/GROX-TOWERS.png","img/planets/BREST.png","img/planets/TERRA-CORE.png","img/planets/QUANDOR.png","img/planets/DOMINIC.png","img/planets/LONDRAK.png","img/planets/PESTULON.png","img/planets/NEW-ILLIA.png","img/planets/LEGUIN.png","img/planets/UDON-I.png","img/planets/CITADEL.png","img/planets/UDON-II.png","img/planets/PERTINAX.png","img/planets/ARCHION-TAO.png","img/planets/CRAW-POPULI.png","img/planets/RIFVIEW.png","img/planets/BROUGHTON.png","img/planets/AANDOR.png","img/tech_tree.png","img/action_card_template.png","img/objective_card_2_template.png"],this.preloadImageArray(t,0);case 2:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"preloadImageArray",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[e.length];e&&e.length>r&&(n[r]=new Image,n[r].onload=function(){t.preloadImageArray(e,r+1)},n[r].src="/imperium/"+e[r])}},{key:"respondTo",value:function(e){if(null!=c(p(y.prototype),"respondTo",this).call(this,e))return c(p(y.prototype),"respondTo",this).call(this,e);if("arcade-carousel"==e){var t={background:"/imperium/img/arcade/arcade-banner-background.png",title:"Red Imperium"};return t}return null}},{key:"hideOverlays",value:function(){document.querySelectorAll(".overlay").forEach((function(e){e.classList.add("hidden")}))}},{key:"handleMovementMenuItem",value:function(){this.overlay.showOverlay(this.app,this,this.returnMovementOverlay())}},{key:"handleCombatMenuItem",value:function(){this.overlay.showOverlay(this.app,this,this.returnCombatOverlay())}},{key:"handleFactionMenuItem",value:function(){this.overlay.showOverlay(this.app,this,this.returnFactionOverlay())}},{key:"handleHowToPlayMenuItem",value:function(){this.overlay.showOverlay(this.app,this,this.returnHowToPlayOverlay())}},{key:"handleTechMenuItem",value:function(){this.overlay.showOverlay(this.app,this,this.returnTechOverlay())}},{key:"handleAgendasMenuItem",value:function(){this.overlay.showOverlay(this.app,this,this.returnAgendasOverlay())}},{key:"handleLawsMenuItem",value:function(){this.overlay.showOverlay(this.app,this,this.returnLawsOverlay())}},{key:"handleUnitsMenuItem",value:function(){this.overlay.showOverlay(this.app,this,this.returnUnitsOverlay());var e=this;$("#close-units-btn").on("click",(function(){e.overlay.hideOverlay()}))}},{key:"handleStrategyMenuItem",value:function(){this.overlay.showOverlay(this.app,this,this.returnStrategyOverlay())}},{key:"handleObjectivesMenuItem",value:function(){this.overlay.showOverlay(this.app,this,this.returnObjectivesOverlay())}},{key:"handleInfoMenuItem",value:function(){if(document.querySelector(".gameboard").classList.contains("bi"))for(var e in this.game.sectors)this.removeSectorHighlight(e),document.querySelector(".gameboard").classList.remove("bi");else for(var t in this.game.sectors)this.addSectorHighlight(t),document.querySelector(".gameboard").classList.add("bi")}},{key:"handleSystemsMenuItem",value:function(){var e=this.returnFactions();for(var t in this.activated_systems_player++,this.activated_systems_player>this.game.players_info.length&&(this.activated_systems_player=1),salert("Showing Systems Activated by ".concat(e[this.game.players_info[this.activated_systems_player-1].faction].name)),$(".hex_activated").css("background-color","transparent"),$(".hex_activated").css("opacity","0.3"),this.game.board)if(1==this.game.sectors[this.game.board[t].tile].activated[this.activated_systems_player-1]){var r="#hex_activated_"+t;$(r).css("background-color","var(--p"+this.activated_systems_player+")"),$(r).css("opacity","0.3")}}},{key:"returnTechnology",value:function(){return this.tech}},{key:"importTech",value:function(e,t){null==t.name&&(t.name="Unknown Technology"),null==t.img&&(t.img="/imperium/img/tech_card_template.jpg"),null==t.faction&&(t.faction="all"),null==t.prereqs&&(t.prereqs=[]),null==t.color&&(t.color=""),null==t.type&&(t.type="normal"),null==t.text&&(t.text=""),null==t.unit&&(t.unit=0),null==t.key&&(t.key=e),null==t.returnCardImage&&(t.returnCardImage=function(){for(var e="",r=0;r<t.prereqs.length;r++)"yellow"==t.prereqs[r]&&(e+='<span class="yellow">♦</span>'),"blue"==t.prereqs[r]&&(e+='<span class="blue">♦</span>'),"green"==t.prereqs[r]&&(e+='<span class="green">♦</span>'),"red"==t.prereqs[r]&&(e+='<span class="red">♦</span>');return'<div id="'.concat(t.key,'" class="tech_').concat(t.color,' tech_card card_nonopaque">\n        <div class="tech_card_name">').concat(t.name,'</div>\n        <div class="tech_card_content">').concat(t.text,'</div>\n        <div class="tech_card_level">').concat(e,"</div>\n      </div>")}),t=this.addEvents(t),this.tech[e]=t}},{key:"doesPlayerHaveTech",value:function(e,t){for(var r=0;r<this.game.players_info[e-1].tech.length;r++)if(this.game.players_info[e-1].tech[r]==t)return 1;return 0}},{key:"returnUnits",value:function(){return this.units}},{key:"importUnit",value:function(e,t){null==t.name&&(t.name="Unknown Unit"),null==t.owner&&(t.owner=-1),null==t.type&&(t.type=""),null==t.storage&&(t.storage=[]),null==t.shots&&(t.shots=1),null==t.space&&(t.space=1),null==t.ground&&(t.ground=0),null==t.cost&&(t.cost=1),null==t.capacity&&(t.capacity=0),null==t.capacity_required&&(t.capacity_required=0),null==t.can_be_stored&&(t.can_be_stored=0),null==t.strength&&(t.strength=0),null==t.max_strength&&(t.max_strength=t.strength),null==t.combat&&(t.combat=0),null==t.destroyed&&(t.destroyed=0),null==t.move&&(t.move=0),null==t.range&&(t.range=0),null==t.last_round_damaged&&(t.last_round_damaged=0),null==t.production&&(t.production=0),null==t.extension&&(t.extension=0),null==t.may_fly_through_sectors_containing_other_ships&&(t.may_fly_through_sectors_containing_other_ships=0),null==t.description&&(t.description=""),null==t.anti_fighter_barrage&&(t.anti_fighter_barrage=0),null==t.anti_fighter_barrage_combat&&(t.anti_fighter_barrage_combat=0),null==t.temporary_combat_modifier&&(t.temporary_combat_modifier=0),null==t.bombardment_rolls&&(t.bombardment_rolls=0),null==t.bombardment_combat&&(t.bombardment_combat=-1),t=this.addEvents(t),this.units[e]=t}},{key:"resetTemporaryModifiers",value:function(e){e.temporary_combat_modifier=0}},{key:"returnUnitsInStorage",value:function(e){for(var t=[],r=0;r<e.storage.length;r++)t.push(e.storage[r]);return t}},{key:"addPlanetaryUnit",value:function(e,t,r,n){return this.loadUnitOntoPlanet(e,t,r,n)}},{key:"addPlanetaryUnitByJSON",value:function(e,t,r,n){return this.loadUnitByJSONOntoPlanet(e,t,r,unitname)}},{key:"addSpaceUnit",value:function(e,t,r){var n=this.returnSectorAndPlanets(t),a=this.returnUnit(r,e);return n.s.units[e-1].push(a),this.saveSystemAndPlanets(n),JSON.stringify(a)}},{key:"addSpaceUnitByJSON",value:function(e,t,r){var n=this.returnSectorAndPlanets(t);return n.s.units[e-1].push(JSON.parse(r)),this.saveSystemAndPlanets(n),r}},{key:"removeSpaceUnit",value:function(e,t,r){for(var n=this.returnSectorAndPlanets(t),a=0;a<n.s.units[e-1].length;a++)if(n.s.units[e-1][a].type===r){var i=n.s.units[e-1].splice(a,1);return this.saveSystemAndPlanets(n),JSON.stringify(i[0])}}},{key:"removeSpaceUnitByJSON",value:function(e,t,r){for(var n=this.returnSectorAndPlanets(t),a=0;a<n.s.units[e-1].length;a++){var i=n.s.units[e-1][a],o=JSON.parse(JSON.stringify(i)),s=JSON.stringify(i),c=JSON.stringify(o);if(1==i.already_moved&&(delete o.already_moved,c=JSON.stringify(o)),s===r||c===r)return n.s.units[e-1].splice(a,1),this.saveSystemAndPlanets(n),r}return""}},{key:"loadUnitOntoPlanet",value:function(e,t,r,n){var a=this.returnSectorAndPlanets(t),i=this.returnUnit(n,e);return a.p[r].units[e-1].push(i),this.saveSystemAndPlanets(a),JSON.stringify(i)}},{key:"loadUnitByJSONOntoPlanet",value:function(e,t,r,n){var a=this.returnSectorAndPlanets(t);return a.p[r].units[e-1].push(JSON.parse(n)),this.saveSystemAndPlanets(a),n}},{key:"loadUnitOntoShip",value:function(e,t,r,n){var a=this.returnSectorAndPlanets(t),i=this.returnUnit(n,e);return a.s.units[e-1][r].storage.push(i),this.saveSystemAndPlanets(a),JSON.stringify(i)}},{key:"loadUnitByJSONOntoShip",value:function(e,t,r,n){var a=this.returnSectorAndPlanets(t);return a.s.units[e-1][r].storage.push(JSON.parse(n)),this.saveSystemAndPlanets(a),n}},{key:"loadUnitOntoShipByJSON",value:function(e,t,r,n){for(var a=this.returnSectorAndPlanets(t),i=0;i<a.s.units[e-1].length;i++)if(JSON.stringify(a.s.units[e-1][i])===r){var o=this.returnUnit(n,e);return a.s.units[e-1][i].storage.push(o),this.saveSystemAndPlanets(a),JSON.stringify(o)}return""}},{key:"loadUnitByJSONOntoShipByJSON",value:function(e,t,r,n){for(var a=this.returnSectorAndPlanets(t),i=0;i<a.s.units[e-1].length;i++)if(JSON.stringify(a.s.units[e-1][i])===r)return a.s.units[e-1][i].storage.push(JSON.parse(n)),this.saveSystemAndPlanets(a),n;return""}},{key:"loadUnitFromShip",value:function(e,t,r,n){for(var a=this.returnSectorAndPlanets(t),i=0;i<a.s.units[e-1][r].storage.length;i++)if(a.s.units[e-1][r].storage[i].type===n){var o=a.s.units[e-1][r].storage[i];return a.s.units[e-1][r].storage.splice(i,1),this.saveSystemAndPlanets(a),JSON.stringify(o)}return""}},{key:"unloadUnitFromPlanet",value:function(e,t,r,n){var a=this.returnSectorAndPlanets(t);if(a.p.length>r)for(var i=0;i<a.p[r].units[e-1].length;i++)if(a.p[r].units[e-1][i].type===n){var o=a.p[r].units[e-1][i];return a.p[r].units[e-1].splice(i,1),this.saveSystemAndPlanets(a),JSON.stringify(o)}return""}},{key:"unloadUnitByJSONFromPlanet",value:function(e,t,r,n){for(var a=this.returnSectorAndPlanets(t),i=0;i<a.p[r].units[e-1].length;i++)if(JSON.stringify(a.p[r].units[e-1][i])===n){var o=a.p[r].units[e-1][i];return a.p[r].units[e-1].splice(i,1),this.saveSystemAndPlanets(a),JSON.stringify(o)}return""}},{key:"unloadUnitFromShip",value:function(e,t,r,n){for(var a=this.returnSectorAndPlanets(t),i=0;i<a.s.units[e-1][r].storage.length;i++)if(a.s.units[e-1][r].storage[i].type===n){var o=JSON.stringify(a.s.units[e-1][r].storage[i]);return a.s.units[e-1][r].storage.splice(i,1),this.saveSystemAndPlanets(a),o}return""}},{key:"unloadUnitByJSONFromShip",value:function(e,t,r,n){for(var a=this.returnSectorAndPlanets(t),i=0;i<a.s.units[e-1][r].storage.length;i++)if(JSON.stringify(a.s.units[e-1][r].storage[i])===n)return a.s.units[e-1][r].storage.splice(i,1),this.saveSystemAndPlanets(a),n;return""}},{key:"unloadUnitFromShipByJSON",value:function(e,t,r,n){for(var a=this.returnSectorAndPlanets(t),i=0;i<a.s.units[e-1].length;i++)if(JSON.stringify(a.s.units[e-1][i])===r)for(var o=0;o<a.s.units[e-1][i].storage.length;o++)if(a.s.units[e-1][i].storage[o].type===n)return a.s.units[e-1][i].storage.splice(o,1),this.saveSystemAndPlanets(a),unitjson;return""}},{key:"unloadUnitByJSONFromShipByJSON",value:function(e,t,r,n){for(var a=this.returnSectorAndPlanets(t),i=0;i<a.s.units[e-1].length;i++)if(JSON.stringify(a.s.units[e-1][i])===r)for(var o=0;o<a.s.units[e-1][i].storage.length;o++)if(JSON.stringify(a.s.units[e-1][i].storage[o])===n)return a.s.units[e-1][i].storage.splice(o,1),this.saveSystemAndPlanets(a),n;return""}},{key:"unloadStoredShipsIntoSector",value:function(e,t){for(var r=this.returnSectorAndPlanets(t),n=0;n<r.s.units[e-1].length;n++)if("{}"!=JSON.stringify(r.s.units[e-1][n]))for(var a=0;a<r.s.units[e-1][n].storage.length;a++){var i=r.s.units[e-1][n].storage[a];JSON.stringify(i),"fighter"===i.type&&(r.s.units[e-1].push(i),r.s.units[e-1][n].storage.splice(a,1),a--)}else r.s.units[e-1].splice(n,1),n--;this.updateSectorGraphics(t),this.saveSystemAndPlanets(r)}},{key:"returnRemainingCapacity",value:function(e){for(var t=e.capacity,r=0;r<e.storage.length;r++)0!=e.storage[r].can_be_stored&&(t-=e.storage[r].capacity_required);return t<=0?0:t}},{key:"returnPDSWithinRange",value:function(e,t,r,n){this.returnEventObjects();for(var a=[],i=0;i<r.length;i++){for(var o=this.returnSectorAndPlanets(r[i]),s=0;s<this.game.players_info.length;s++)if(this.game.players_info[s].experimental_battlestation===r[i]){var c={};c.range=this.returnUnit("pds",s+1).range,c.combat=this.returnUnit("pds",s+1).combat,c.owner=s+1,c.sector=r[i],c.unit=this.returnUnit("pds",s+1),a.push(c)}if(null!=o)for(var l=0;l<o.p.length;l++)for(var u=0;u<o.p[l].units.length;u++)if(u!=e-1)for(var d=0;d<o.p[l].units[u].length;d++)if("pds"==o.p[l].units[u][d].type&&o.p[l].units[u][d].range>=n[i]){var h={};h.range=o.p[l].units[u][d].range,h.combat=o.p[l].units[u][d].combat,h.owner=u+1,h.sector=r[i],h.unit=o.p[l].units[u][d],a.push(h)}}return a}},{key:"returnShipsMovableToDestinationFromSectors",value:function(e,t,r,n,a){for(var i=[],o=0;o<t.length;o++){var s=this.returnSectorAndPlanets(t[o]);if(null!=s){var c={ships:[],ship_idxs:[],sector:null};if(c.distance=r[o],c.adjusted_distance=[],c.hazards=[],0==s.s.activated[this.game.player-1]){for(var l=0;l<s.s.units[this.game.player-1].length;l++){var u=s.s.units[this.game.player-1][l];u.move>=r[o]&&(-1==a[o]&&1!=u.may_fly_through_sectors_containing_other_ships||(c.adjusted_distance.push(r[o]),c.ships.push(u),c.hazards.push(n[o]),c.ship_idxs.push(l),c.sector=t[o]))}if(null!=c.sector){if("rift"===n[o])for(var d=0;d<t.length;d++)o!=d&&t[o]==t[d]&&r[d]<=r[o]&&"rift"!==n[d]&&(c.hazards[d]=n[d]);for(var h=1,p=0;p<i.length;p++)if(i[p].sector==c.sector){h=0;for(var f=0;f<c.ship_idxs.length;f++){for(var m=1,g=0;g<i[p].ship_idxs.length;g++)i[p].ship_idxs[g]==c.ship_idxs[f]&&(m=0,""===c.hazards[f]&&(i[p].hazards[g]=""));1==m&&(i[p].adjusted_distance.push(c.adjusted_distance[f]),i[p].ships.push(c.ships[f]),i[p].hazards.push(c.hazards[f]),i[p].ship_idxs.push(c.ship_idxs[f]))}}1==h&&i.push(c)}}}}return i}},{key:"returnNumberOfSpaceFleetInSector",value:function(e,t){for(var r=this.returnSectorAndPlanets(t),n=0,a=0;a<r.s.units[e-1].length;a++)r.s.units[e-1][a].strength>0&&0==r.s.units[e-1][a].destroyed&&n++;return n}},{key:"returnNumberOfGroundForcesOnPlanet",value:function(e,t,r){if(-1==e)return 0;for(var n=this.returnSectorAndPlanets(t),a=0,i=0;i<n.p[r].units[e-1].length;i++)n.p[r].units[e-1][i].strength>0&&0==n.p[r].units[e-1][i].destroyed&&"infantry"===n.p[r].units[e-1][i].type&&0==n.p[r].units[e-1][i].destroyed&&a++;return a}},{key:"returnUnitCost",value:function(e,t){var r=this.returnUnit(e,t);return r.cost>0?r.cost:1}},{key:"repairUnits",value:function(){for(var e in this.game.board)if(null!=this.game.board[e]){var t=this.returnSectorAndPlanets(e);if(t.s)for(var r=0;r<t.s.units.length;r++)for(var n=0;n<t.s.units[r].length;n++)t.s.units[r][n].max_strenth>t.s.units[r][n].strength&&(t.s.units[r][n].strength=t.s.units[r][n].max_strength);if(t.p)for(var a=0;a<t.p.length;a++)for(var i=0;i<t.p[a].units;i++)for(var o=0;o<t.p[a].units[i].length;o++)t.p[a].units[i][o].max_strenth>t.p[a].units[i][o].strength&&(t.p[a].units[i][o].strength=t.p[a].units[i][o].max_strength);this.saveSystemAndPlanets(t)}}},{key:"returnUnit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=JSON.parse(JSON.stringify(this.units[e]));return n.owner=t,1==r&&(n=this.upgradeUnit(n,t)),n}},{key:"upgradePlayerUnitsOnBoard",value:function(e){for(var t in this.game.sectors)for(var r=0;r<this.game.sectors[t].units[e-1].length;r++)this.game.sectors[t].units[e-1][r]=this.upgradeUnit(this.game.sectors[t].units[e-1][r],e);for(var t in this.game.planets)for(var n=0;n<this.game.planets[t].units[e-1].length;n++)this.game.planets[t].units[e-1][n]=this.upgradeUnit(this.game.planets[t].units[e-1][n],e)}},{key:"upgradeUnit",value:function(e,t){var r=this.returnEventObjects(),n=e.storage;for(var a in r)e=r[a].upgradeUnit(this,t,e);return e.storage=n,e}},{key:"doesSectorContainPlayerShips",value:function(e,t){var r=this.returnSectorAndPlanets(t);return r&&r.s.units[e-1].length>0?1:0}},{key:"doesSectorContainPlayerUnits",value:function(e,t){var r=this.returnSectorAndPlanets(t);if(!r)return 0;if(r.s.units[e-1].length>0)return 1;for(var n=0;n<r.p.length;n++)if(r.p[n].units[e-1].length>0)return 1;return 0}},{key:"returnSecretObjectives",value:function(){return this.secret_objectives}},{key:"importSecretObjective",value:function(e,t){null==t.name&&(t.name="Unknown Objective"),null==t.text&&(t.type="Unclear Objective"),null==t.minPlayers&&(t.minPlayers=2),null==t.type&&(t.type="normal"),null==t.phase&&(t.type="imperial"),null==t.img&&(t.img="/imperium/img/secret_objective.jpg"),null==t.vp&&(t.vp=1),null==t.returnCardImage&&(t.returnCardImage=function(){return'\n\t  <div class="objectives_overlay_objectives_card" style="background-image: url('.concat(t.img,')">\n            <div class="objectives_card_name">').concat(t.name,'</div>\n              <div class="objectives_card_content">\n                ').concat(t.text,'\n              <div class="objectives_secret_notice">secret</div>\n            </div>\n\t  </div>\n\t')}),t=this.addEvents(t),this.secret_objectives[e]=t}},{key:"returnStageIPublicObjectives",value:function(){return this.stage_i_objectives}},{key:"importStageIPublicObjective",value:function(e,t){null==t.name&&(t.name="Unknown Objective"),null==t.text&&(t.type="Unclear Objective"),null==t.type&&(t.type="normal"),null==t.img&&(t.img="/imperium/img/objective_card_1_template.png"),null==t.vp&&(t.vp=1),null==t.returnCardImage&&(t.returnCardImage=function(){return'\n          <div class="objectives_overlay_objectives_card" style="background-image: url('.concat(t.img,')">\n            <div class="objectives_card_name">').concat(t.name,'</div>\n            <div class="objectives_card_content">').concat(t.text,"</div>\n          </div>\n        ")}),t=this.addEvents(t),this.stage_i_objectives[e]=t}},{key:"returnStageIIPublicObjectives",value:function(){return this.stage_ii_objectives}},{key:"importStageIIPublicObjective",value:function(e,t){null==t.name&&(t.name="Unknown Objective"),null==t.text&&(t.type="Unclear Objective"),null==t.type&&(t.type="normal"),null==t.img&&(t.img="/imperium/img/objective_card_1_template.png"),null==t.vp&&(t.vp=2),null==t.returnCardImage&&(t.returnCardImage=function(){return'\n          <div class="objectives_overlay_objectives_card" style="background-image: url('.concat(t.img,')">\n            <div class="objectives_card_name">').concat(t.name,'</div>\n            <div class="objectives_card_content">').concat(t.text,"</div>\n          </div>\n        ")}),t=this.addEvents(t),this.stage_ii_objectives[e]=t}},{key:"returnPromissaryNotes",value:function(){return this.promissary_notes}},{key:"importPromissary",value:function(e,t){null==t.name&&(t.name="Unknown Promissary"),null==t.text&&(t.text="Unknown Promissary"),t=this.addEvents(t),this.promissary_notes[e]=t}},{key:"returnPromissaryPlayer",value:function(e){for(var t=e.split("-"),r=0;r<this.game.players_info.length;r++)if(this.game.players_info[r].faction===t[0])return r+1;return-1}},{key:"returnFactions",value:function(){return this.factions}},{key:"importFaction",value:function(e,t){null==t.id&&(t.id="faction"),null==t.name&&(t.name="Unknown Faction"),null==t.nickname&&(t.nickname=t.name),null==t.homeworld&&(t.homeworld="sector32"),null==t.space_units&&(t.space_units=[]),null==t.ground_units&&(t.ground_units=[]),null==t.tech&&(t.tech=[]),null==t.intro&&(t.intro='\n        <div style="font-weight:bold">The Republic has fallen!</div>\n        <div style="margin-top:10px">\n\tAs the Galactic Senate collapses into factional squabbling, the ascendant powers on the outer rim plot to seize New Byzantium...</div>\n        <div style="margin-top:10px">\n\tTake the lead by moving your fleet to capture New Byzantium, or establish a power-base to displace the leader and impose your will on your peers.\n \t</div>\n    '),t=this.addEvents(t),this.factions[e]=t}},{key:"returnAgendaCards",value:function(){return this.agenda_cards}},{key:"importAgendaCard",value:function(e,t){null==t.name&&(t.name="Unknown Agenda"),null==t.type&&(t.type="Law"),null==t.text&&(t.text="Unknown Document"),null==t.img&&(t.img="/imperium/img/agenda_card_template.png"),null==t.elect&&(t.elect="other"),null==t.returnCardImage&&(t.returnCardImage=function(){return'\n  \t  <div style="background-image: url(\'/imperium/img/agenda_card_template.png\');" class="overlay_agendacard card option" id="'.concat(e,'">\n\t    <div class="overlay_agendatitle">').concat(t.name,'</div>\n\t    <div class="overlay_agendacontent">').concat(t.text,"</div>\n\t  </div>\n        ")}),t=this.addEvents(t),this.agenda_cards[e]=t}},{key:"returnActionCards",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0==e.length)return this.action_cards;var t={};for(var r in this.action_cards)e.includes(this.action_cards[r].type)&&(t[r]=this.action_cards[r]);return t}},{key:"importActionCard",value:function(e,t){null==t.name&&(t.name="Action Card"),null==t.type&&(t.type="instant"),null==t.text&&(t.text="Unknown Action"),null==t.img&&(t.img="/imperium/img/action_card_template.png"),null==t.returnCardImage&&(t.returnCardImage=function(){return'\n          <div class="action_card" id="'.concat(e,'" style="background-image: url(').concat(t.img,');background-size:cover;">\n            <div class="action_card_title">').concat(t.name,'</div>\n            <div class="action_card_text">').concat(t.text,"</div>\n          </div>\n        ")}),t=this.addEvents(t),this.action_cards[e]=t}},{key:"handleGameLoop",value:function(){var e=this,t=this,r=t.returnEventObjects();if(this.game.queue.length>0){t.saveGame(t.game.id);var n=this.game.queue.length-1,a=this.game.queue[n].split("\t"),o=1;if("gameover"===a[0])return 1==t.browser_active&&salert("Game Over"),t.game.over=1,void t.saveGame(t.game.id);if("exhaust_at_round_start"===a[0])return a[1],this.game.queue.splice(n,1),0;if("setvar"===a[0]){var s=a[1],c=parseInt(a[2]),l=a[3],u=a[4],d=a[5];return"int"==u&&(d=parseInt(d)),"state"==s&&(t.game.state[l]=d),"players"==s&&(t.game.players_info[c-1][l]=d),this.game.queue.splice(n,1),1}if("resolve"===a[0]){var h=this.game.queue.length-2,p=[];if(h>=0&&(p=this.game.queue[h].split("\t")),"play"===a[1]&&"resolve"===p[0]&&"play"===p[1])return this.game.queue.splice(n,1),1;if(null!=p[1]&&"tokenallocation"===p[1]&&null!=p[2]&&p[2]===this.app.wallet.returnPublicKey()&&(this.playing_token_allocation=0),"strategy"===a[1]&&a[3]&&a[3]===this.app.wallet.returnPublicKey()&&(this.game.state.playing_strategy_card_secondary=0),0==this.game.state.playing_strategy_card_secondary&&0==this.playing_token_allocation&&this.updateStatus("Waiting for Opponent Move..."),a[1]==p[0]){if(null!=a[2]){if(null==this.game.confirms_received||null==this.game.confirms_received){if(-1==a[2])return this.resetConfirmsNeeded(0),this.game.queue.splice(this.game.queue.length-1),this.game.queue.splice(this.game.queue.length-1),1;this.resetConfirmsNeeded(this.game.players_info.length)}for(var f=0;f<this.game.players.length;f++)this.game.players[f]===a[3]&&(this.setPlayerInactive(f+1),this.game.confirms_players.includes(a[3])||(this.game.confirms_received+=parseInt(a[2]),this.game.confirms_players.push(a[3])));for(var m=[],g=0;g<this.game.players.length;g++)m.push(this.game.players[g]);for(var y=0;y<this.game.confirms_players.length;y++)for(var v=0;v<m.length;v++)m[v]===this.game.confirms_players[y]&&m.splice(v,1);for(var b="Players still to move: <ul>",_=0,w=0;w<m.length;w++)for(var x=0;x<this.game.players.length;x++)this.game.players[x]===m[w]&&(this.game.players[x]===this.app.wallet.returnPublicKey()&&(_=1),b+='<li class="option">'+this.returnFaction(x+1)+"</li>");if(b+="</ul>",0==_&&this.updateStatus(b),this.game.confirms_needed<=this.game.confirms_received)return this.resetConfirmsNeeded(0),this.game.queue.splice(n-1,2),1;if(this.game.queue.splice(n,1),null!=a[3]){if(!this.game.confirms_players.includes(this.app.wallet.returnPublicKey()))return 1;if("agenda"==a[1])return 1}return this.game.confirms_needed<this.game.confirms_received?1:0}return this.game.queue.splice(n-1,2),1}this.game.queue.splice(n,1);for(var k=h,S=1;k>=0&&1==S;k--){var E=this.game.queue[k].split("\t");E.length>0&&E[0]===a[1]&&(this.game.queue.splice(k),S=0)}}if("rider"===a[0]){var A={};return A.player=a[1],A.rider=a[2],A.choice=a[3],this.game.state.riders.push(A),this.game.queue.splice(n,1),1}if("research"===a[0]){var P=parseInt(a[1]);return this.game.queue.splice(n,1),this.setPlayerActiveOnly(P),t.game.player==P?t.playerResearchTechnology((function(e){t.addMove("purchase\t"+t.game.player+"\ttech\t"+e),t.addMove("NOTIFY\t"+t.returnFaction(t.game.player)+" researches "+t.tech[e].name),t.endTurn()})):t.updateStatus(t.returnFaction(P)+" is researching technology..."),0}if("preloader"===a[0]){try{this.app.browser.addElementToDom('\n\t\t  <div class="background_loader" style="display:none">\n\t\t    <img src="/imperium/img/starscape_background1.jpg" style="width:10px;height:10px" />\n\t\t    <img src="/imperium/img/ships/carrier_100x200.png" style="width:10px;height:10px" />\n\t\t    <img src="/imperium/img/ships/destroyer_100x200.png" style="width:10px;height:10px" />\n\t\t    <img src="/imperium/img/ships/dreadnaught_100x200.png" style="width:10px;height:10px" />\n\t\t    <img src="/imperium/img/ships/fighter_100x200.png" style="width:10px;height:10px" />\n\t\t    <img src="/imperium/img/ships/infantry_100x200.png" style="width:10px;height:10px" />\n\t\t    <img src="/imperium/img/strategy/BUILD.png" style="width:10px;height:10px" />\n\t\t    <img src="/imperium/img/strategy/DIPLOMACY.png" style="width:10px;height:10px" />\n\t\t    <img src="/imperium/img/strategy/EMPIRE.png" style="width:10px;height:10px" />\n\t\t    <img src="/imperium/img/strategy/INITIATIVE.png" style="width:10px;height:10px" />\n\t\t    <img src="/imperium/img/strategy/MILITARY.png" style="width:10px;height:10px" />\n\t\t    <img src="/imperium/img/strategy/POLITICS.png" style="width:10px;height:10px" />\n\t\t    <img src="/imperium/img/strategy/TECH.png" style="width:10px;height:10px" />\n\t\t    <img src="/imperium/img/strategy/TRADE.png" style="width:10px;height:10px" />\n\t\t  </div>\n\t  ')}catch(e){}return this.preloadImages(),this.game.queue.splice(n,1),1}if("announce_retreat"===a[0]){var C=parseInt(a[1]),D=parseInt(a[2]),T=a[3],O=a[4];this.game.queue.splice(n,1);for(var M=this.game.queue.length-1;M>=0;M--){var I=this.game.queue[M].split("\t")[0];"space_combat_end"===I&&this.game.queue.splice(M+1,0,"retreat\t"+C+"\t"+D+"\t"+T+"\t"+O)}return this.updateStatus(this.returnFactionNickname(C)+" announces a retreat"),this.game.player===D?this.playerRespondToRetreat(C,D,T,O):this.updateStatus(this.returnFaction(D)+" responding to "+this.returnFaction(C)+" retreat"),0}if("retreat"===a[0]){var R=parseInt(a[1]),F=parseInt(a[2]),B=a[3],j=a[4];if(this.game.queue.splice(n,1),1==this.game.state.retreat_cancelled||1==this.game.players_info[F-1].temporary_opponent_cannot_retreat||1==this.game.players_info[F-1].permanent_opponent_cannot_retreat)return this.updateLog("With retreat impossible, the fleets turns to battle..."),1;for(var N=this.returnSectorAndPlanets(B),q=this.returnSectorAndPlanets(j),L=0;L<N.s.units[R-1].length;L++)q.s.units[R-1].push(N.s.units[R-1][L]);return N.s.units[R-1]=[],q.s.activated[R-1]=1,this.saveSystemAndPlanets(q),this.saveSystemAndPlanets(N),this.updateSectorGraphics(B),this.updateSectorGraphics(j),t.updateLog(this.returnFactionNickname(R)+" retreats to "+q.s.name),1}if("repair"===a[0]){var U=parseInt(a[1]),z=a[2],H=a[3],G=parseInt(a[4]),K=parseInt(a[5]),V=this.returnSectorAndPlanets(H);return"space"==z?V.s.units[U-1][K].strength=V.s.units[U-1][K].max_strength:V.p[G].units[U-1][K].strength=V.p[G].units[U-1][K].max_strength,this.game.queue.splice(n,1),1}if("check_fleet_supply"===a[0]){var W=parseInt(a[1]),Y=a[2];return this.game.queue.splice(n,1),this.handleFleetSupply(W,Y)}if("continue"===a[0]){var J=a[1],Q=a[2];return 0==this.handleFleetSupply(J,Q)||(this.setPlayerActiveOnly(J),this.game.queue.splice(n,1),this.updateSectorGraphics(Q),this.game.player==J?this.playerContinueTurn(J,Q):this.updateStatus(this.returnFaction(J)+" has moved into "+this.game.sectors[this.game.board[Q].tile].name)),0}if("post_production"===a[0]){console.log("----------------------------"),console.log("---------- X X X -----------"),console.log("----------------------------");var X=a[1],Z=a[2],ee=a[3],te=this.returnEventObjects();this.game.queue.splice(n,1);for(var re=this.returnSpeakerOrder(),ne=0;ne<re.length;ne++)for(var ae=0;ae<te.length;ae++)te[ae].postProduction(t,X,Z,ee);return 1}if("produce"===a[0]){var ie=a[1],oe=(parseInt(a[2]),parseInt(a[3])),se=a[4],ce=a[5],le=this.returnSectorAndPlanets(ce);-1!=oe?(this.addPlanetaryUnit(ie,ce,oe,se),this.updateLog(this.returnFactionNickname(ie)+" produces "+this.returnUnit(se,ie).name+" on "+le.p[oe].name,120,1)):(this.addSpaceUnit(ie,ce,se),this.updateLog(this.returnFactionNickname(ie)+" produces "+this.returnUnit(se,ie).name+" in "+le.s.name,120,1)),this.saveSystemAndPlanets(le),this.updateSectorGraphics(ce),this.game.queue.splice(n,1);for(var ue=1,de=0;de<this.game.queue.length;de++){var he=this.game.queue[de],pe=he.split("\t");"produce"==pe[0]&&parseInt(pe[1])==ie&&(ue=0)}return 1==ue?this.handleFleetSupply(ie,ce):1}if("play"===a[0]){this.updateTokenDisplay(),this.updateLeaderboard();var fe=a[1],me=0;this.game.state.active_player_turn==fe?me=1:this.game.state.active_player_has_produced=0,1==parseInt(a[2])&&(me=1),this.game.state.active_player_turn=fe,this.setPlayerActiveOnly(fe);try{document.documentElement.style.setProperty("--playing-color","var(--p".concat(fe,")"))}catch(e){}if(fe==this.game.player){0==me&&(this.game.tracker=this.returnPlayerTurnTracker(),this.resetTurnVariables(fe));var ge=this.returnPlayerActionCards(this.game.player),ye=ge.length-this.game.players_info[this.game.player-1].action_card_limit;if(ye>0)return this.playerDiscardActionCards(ye),0;this.playerTurn()}else this.addEventsToBoard(),this.updateStatus('<div><div class="player_color_box player_color_'+fe+'"></div>'+this.returnFaction(parseInt(fe))+" is taking their turn.</div>");return 0}if("strategy"===a[0]){this.updateLeaderboard(),this.updateTokenDisplay();var ve=a[1],be=parseInt(a[2]),_e=parseInt(a[3]);if(1==this.game.state.playing_strategy_card_secondary){if(this.game.confirms_players.includes(this.app.wallet.returnPublicKey())||this.game.tmp_confirms_players.includes(this.app.wallet.returnPublicKey()))return 0;if(1==this.lock_interface)return 0}return-1!=be?t.game.players_info[be-1].strategy_cards_played.includes(ve)||t.game.players_info[be-1].strategy_cards_played.push(ve):t.game.players_info[t.game.player-1].strategy_cards_played.includes(ve)||t.game.players_info[t.game.player-1].strategy_cards_played.push(ve),1==_e?(this.updateLog(this.returnFactionNickname(be)+" plays "+this.strategy_cards[ve].name),this.updateStatus(this.returnFaction(be)+" is playing "+this.strategy_cards[ve].name),this.playStrategyCardPrimary(be,ve),0):2==_e?(this.updateStatus("All factions have the opportunity to play "+this.strategy_cards[ve].name),this.game.state.playing_strategy_card_secondary=1,this.playStrategyCardSecondary(be,ve),0):3==_e?(this.updateStatus("All factions have the opportunity to play "+this.strategy_cards[ve].name),this.game.state.playing_strategy_card_secondary=1,this.playStrategyCardTertiary(be,ve),0):0}if("strategy_card_before"===a[0]){var we=a[1],xe=parseInt(a[2]),ke=this.returnEventObjects();this.game.queue.splice(n,1);for(var Se=this.returnSpeakerOrder(),Ee=0;Ee<Se.length;Ee++)for(var Ae=0;Ae<ke.length;Ae++)1==ke[Ae].strategyCardBeforeTriggers(this,Ee+1,xe,we)&&this.game.queue.push("strategy_card_before_event\t"+we+"\t"+Se[Ee]+"\t"+xe+"\t"+Ae);return 1}if("strategy_card_before_event"===a[0]){var Pe=a[1],Ce=parseInt(a[2]),De=parseInt(a[3]),Te=parseInt(a[4]),Oe=this.returnEventObjects();return this.game.queue.splice(n,1),Oe[Te].strategyCardBeforeEvent(this,Ce,De,Pe)}if("strategy_card_after"===a[0]){var Me=a[1],Ie=parseInt(a[2]),Re=this.returnEventObjects();this.game.queue.splice(n,1);for(var Fe=this.returnSpeakerOrder(),Be=0;Be<Fe.length;Be++)for(var je=0;je<Re.length;je++)1==Re[je].strategyCardAfterTriggers(this,Fe[Be],Ie,Me)&&this.game.queue.push("strategy_card_after_event\t"+Me+"\t"+Fe[Be]+"\t"+Ie+"\t"+je);return 1}if("strategy_card_after_event"===a[0]){var Ne=a[1],qe=parseInt(a[2]),Le=parseInt(a[3]),Ue=parseInt(a[4]),ze=this.returnEventObjects();return this.game.queue.splice(n,1),ze[Ue].strategyCardAfterEvent(this,qe,Le,Ne)}if("playerschoosestrategycards_before"===a[0]){var He=a[1],$e=(parseInt(a[2]),parseInt(a[3]),this.returnEventObjects());this.game.queue.splice(n,1);for(var Ge=this.returnSpeakerFirstOrder(),Ke=0;Ke<Ge.length;Ke++)for(var Ve=0;Ve<$e.length;Ve++)1==$e[Ve].playersChooseStrategyCardsBeforeTriggers(this,Ke+1,Ge[Ke],He)&&this.game.queue.push("playerschoosestrategycards_before_event\t"+Ge[Ke]+"\t"+Ve);return 1}if("playerschoosestrategycards_before_event"===a[0]){var We=parseInt(a[1]),Ye=parseInt(a[2]),Je=this.returnEventObjects();return this.game.queue.splice(n,1),Je[Ye].playersChooseStrategyCardsBeforeEvent(this,We)}if("playerschoosestrategycards_after"===a[0]){var Qe=a[1],Xe=(parseInt(a[2]),parseInt(a[3]),this.returnEventObjects());this.game.queue.splice(n,1);for(var Ze=this.returnSpeakerOrder(),et=0;et<Ze.length;et++)for(var tt=0;tt<Xe.length;tt++)1==Xe[tt].playersChooseStrategyCardsAfterTriggers(this,et+1,Ze[et],Qe)&&this.game.queue.push("playerschoosestrategycards_after_event\t"+Ze[et]+"\t"+tt);return 1}if("strategy_card_after_event"===a[0]){var rt=parseInt(a[1]),nt=parseInt(a[2]),at=this.returnEventObjects();return at[nt].playersChooseStrategyCardsAfterEvent(this,rt)}if("turn"===a[0]){this.game.state.turn++,this.game.state.active_player_moved=0,this.game.state.active_player_turn=-1;for(var it=1,ot=0;ot<this.game.players_info.length;ot++)0==this.game.players_info[ot].passed&&(it=0);return 1==it?(this.game.queue.push("newround"),this.game.queue.push("setinitiativeorder")):this.game.queue.push("setinitiativeorder"),this.updateLeaderboard(),1}if("discard"===a[0]){a[1];var st=a[2],ct=a[3];if(this.game.queue.splice(n,1),"agenda"==st)for(var lt=0;lt<this.game.state.agendas.length;lt++)this.game.state.agendas[lt]==ct&&(this.game.state.agendas.splice(lt,1),lt--);return 1}if("quash"===a[0]){var ut=parseInt(a[1]),dt=parseInt(a[2]);if(this.game.queue.splice(n,1),this.game.state.agendas.splice(ut,1),1==dt){this.game.queue.push("revealagendas\t1");for(var ht=1;ht<=this.game.players_info.length;ht++)this.game.queue.push("FLIPCARD\t3\t1\t1\t"+ht)}return 1}if("resolve_agenda"===a[0]){this.returnAgendaCards();var pt=a[1],ft="",mt=[];this.game.queue.splice(n,1);for(var gt=0;gt<this.game.state.choices.length;gt++)mt.push(0);for(var yt=0;yt<this.game.players.length;yt++)mt[this.game.state.how_voted_on_agenda[yt]]+=this.game.state.votes_cast[yt];if("speaker"===a[2])for(var vt=a[3],bt=0;bt<this.game.state.choices.length;bt++)this.game.state.choices[bt]===vt&&(mt[bt]+=1);for(var _t=-1,wt=0;wt<mt.length;wt++)if(mt[wt]>_t&&(_t=mt[wt]),mt[wt]>0){var xt=0,kt=0,St=0;"planet"==this.agenda_cards[pt].elect&&(xt=1,this.updateLog("Agenda Outcome: "+this.game.planets[this.game.state.choices[wt]].name+" receives "+mt[wt]+" votes")),"player"==this.agenda_cards[pt].elect&&(kt=1,"Unknown"!==this.returnFactionNickname(this.game.state.choices[wt])?this.updateLog("Agenda Outcome: "+this.returnFactionNickname(this.game.state.choices[wt])+" receives "+mt[wt]+" votes"):this.updateLog("Agenda Outcome: "+this.game.state.choices[wt]+" receives "+mt[wt]+" votes")),"sector"==this.agenda_cards[pt].elect&&(St=1,this.updateLog("Agenda Outcome: "+this.game.sectors[this.game.state.choices[wt]].name+" receives "+mt[wt]+" votes")),0==St&&0==kt&&0==xt&&this.updateLog("Agenda Outcome: "+this.game.state.choices[wt]+" receives "+mt[wt]+" votes")}for(var Et=0,At=[],Pt=0;Pt<mt.length;Pt++)mt[Pt]==_t&&(Et++,At.push(this.game.state.choices[Pt]));if(Et>1)return this.game.player==this.game.state.speaker&&t.playerResolveDeadlockedAgenda(pt,At),0;if(1==At.length&&(ft=At[0]),1==Et){console.log("WINNING CHOICE IS: "+ft),t.agenda_cards[pt].onPass(t,ft);for(var Ct=0;Ct<this.game.state.riders.length;Ct++){var Dt=this.game.state.riders[Ct];Dt.choice!==ft&&Dt.choice!==this.game.state.choices[ft]||this.game.queue.push("execute_rider\t"+Dt.player+"\t"+Dt.rider)}}this.game.queue.push("ACKNOWLEDGE\tThe Galactic Senate has settled on '"+this.returnNameFromIndex(ft)+"'");var Tt=this.game.queue[n-1].split("\t");return"strategy"===Tt[0]&&this.game.queue.splice(n-1,1),1}if("execute_rider"==a[0]){var Ot=parseInt(a[1]),Mt=a[2];return this.game.queue.splice(n,1),this.action_cards[Mt].playActionCardEvent(this,this.game.player,Ot,Mt)}if("vote"==a[0]){var It=this.returnAgendaCards(),Rt=a[1],Ft=parseInt(a[2]),Bt=a[3],jt=parseInt(a[4]);if(this.game.state.votes_cast[Ft-1]=jt,this.game.state.votes_available[Ft-1]-=jt,this.game.state.voted_on_agenda[Ft-1][this.game.state.voting_on_agenda]=1,console.log("HOW VOTED ON AGENDA? "+Ft+" -- "+Bt),this.game.state.how_voted_on_agenda[Ft-1]=Bt,"abstain"==Bt)this.updateLog(this.returnFactionNickname(Ft)+" abstains");else{var Nt=0,qt=0,Lt=0,Ut=this.game.state.choices[parseInt(Bt)];"player"===It[Rt].elect&&(Nt=1),"planet"===It[Rt].elect&&(qt=1),"sector"===It[Rt].elect&&(Lt=1),0!=Ut.indexOf("planet")&&0!=Ut.indexOf("new-byzantium")||(qt=1),0==Ut.indexOf("sector")&&(Lt=1),1==qt&&this.updateLog(this.returnFactionNickname(Ft)+" votes "+jt+" on "+this.game.planets[this.game.state.choices[Bt]].name),1==Lt&&this.updateLog(this.returnFactionNickname(Ft)+" votes "+jt+" on "+this.game.sectors[this.game.state.choices[Bt]].name),1==Nt&&this.updateLog(this.returnFactionNickname(Ft)+" votes "+jt+" on "+this.game.state.choices[Bt]),0==qt&&0==Lt&&0==Nt&&this.updateLog(this.returnFactionNickname(Ft)+" votes "+jt+" on "+this.game.state.choices[Bt])}for(var zt=0,Ht=0;Ht<this.game.players.length;Ht++)0!=this.game.state.voted_on_agenda[Ht][this.game.state.voted_on_agenda.length-1]&&zt++;if(zt==this.game.players.length){for(var $t=[],Gt=0;Gt<this.game.state.choices.length;Gt++)$t.push(0);for(var Kt=0;Kt<this.game.players.length;Kt++)$t[this.game.state.how_voted_on_agenda[Kt]]+=this.game.state.votes_cast[Kt];for(var Vt=-1,Wt=0;Wt<$t.length;Wt++)$t[Wt]>Vt&&(Vt=$t[Wt]),$t[Wt]>0&&this.updateLog(this.game.state.choices[Wt]+" receives "+$t[Wt]+" votes");for(var Yt=0;Yt<$t.length;Yt++)$t[Yt]}return this.game.queue.splice(n,1),1}if("agenda"==a[0]){t.returnAgendaCards();var Jt=a[1],Qt=parseInt(a[2]);this.agenda_cards[Jt].name,this.game.state.voting_on_agenda=Qt,this.displayFactionDashboard(1);for(var Xt=0,Zt=this.returnSpeakerOrder(),er=0;er<Zt.length;er++)0==this.game.state.voted_on_agenda[Zt[er]-1][Qt]&&(Xt=Zt[er],er=this.game.players_info.length);if(this.setPlayerActiveOnly(Xt),this.game.player!=Xt){var tr='<div class="agenda_instructions">The following agenda has advanced for consideration in the Galactic Senate:</div>';tr+='<div class="agenda_name">'+t.agenda_cards[Jt].name+"</div>",tr+='<div class="agenda_text">',tr+=t.agenda_cards[Jt].text,tr+="</div>",tr+='<div class="agenda_status">'+this.returnFaction(Xt)+" is now voting.</div>",this.updateStatus(tr)}else{if(t.doesPlayerHaveRider(this.game.player))return t.addMove("resolve\tagenda\t1\t"+t.app.wallet.returnPublicKey()),t.addMove("vote\t"+Jt+"\t"+t.game.player+"\tabstain\t0"),t.endTurn(),0;var rr=0,nr='<div class="agenda_instructions">The following agenda has advanced for consideration in the Galactic Senate:</div>';nr+='<div class="agenda_name">'+t.agenda_cards[Jt].name+"</div>",nr+='<div class="agenda_text">',nr+=t.agenda_cards[Jt].text,nr+="</div><ul>";for(var ar=0;ar<this.game.state.choices.length&&this.game.state.votes_available[t.game.player-1]>0;ar++){var ir=this.game.state.choices[ar];0==ir.indexOf("planet")&&(ir=this.game.planets[ir].name),0==ir.indexOf("sector")&&(ir=this.game.sectors[ir].sector),0==ir.indexOf("new-byzantium")&&(ir="New Byzantium"),nr+='<li class="option" id="'+ar+'">'+ir+"</li>"}nr+='<li class="option" id="abstain">abstain</li></ul></p>',t.updateStatus(nr),$(".option").off(),$(".option").on("mouseenter",(function(){var e=$(this).attr("id");"abstain"!==e&&(0==t.game.state.choices[e].indexOf("planet")&&(rr=1),0!=t.game.state.choices[e].indexOf("sector")&&t.game.state.choices[e].indexOf("new-byzantium"),1==rr&&(t.showPlanetCard(t.game.planets[t.game.state.choices[e]].tile,t.game.planets[t.game.state.choices[e]].idx),t.showSectorHighlight(t.game.planets[t.game.state.choices[e]].tile)))})),$(".option").on("mouseleave",(function(){var e=$(this).attr("id");"abstain"!==e&&(0==t.game.state.choices[e].indexOf("planet")&&(rr=1),0!=t.game.state.choices[e].indexOf("sector")&&t.game.state.choices[e].indexOf("new-byzantium"),1==rr&&(t.hidePlanetCard(t.game.planets[t.game.state.choices[e]].tile,t.game.planets[t.game.state.choices[e]].idx),t.hideSectorHighlight(t.game.planets[t.game.state.choices[e]].tile)))})),$(".option").on("click",(function(){var e=$(this).attr("id"),r=0;if(1==rr&&"abstain"!=e&&(t.hidePlanetCard(t.game.planets[t.game.state.choices[e]].tile,t.game.planets[t.game.state.choices[e]].idx),t.hideSectorHighlight(t.game.planets[t.game.state.choices[e]].tile)),"abstain"==e)return t.addMove("resolve\tagenda\t1\t"+t.app.wallet.returnPublicKey()),t.addMove("vote\t"+Jt+"\t"+t.game.player+"\t"+e+"\t"+r),t.endTurn(),0;for(var n='<p style="margin-bottom:15px">Your voting strength is determined by your influence. Conquer more influence-rich planets to increase it. How many votes do you wish to cast in the Galactic Senate:</p>',a=1;a<=t.game.state.votes_available[t.game.player-1];a++)n+=1==a?'<li class="option textchoice" id="'+a+'">'+a+" vote</li>":'<li class="option textchoice" id="'+a+'">'+a+" votes</li>";t.updateStatus(n),$(".option").off(),$(".option").on("click",(function(){return r=$(this).attr("id"),t.addMove("resolve\tagenda\t1\t"+t.app.wallet.returnPublicKey()),t.addMove("vote\t"+Jt+"\t"+t.game.player+"\t"+e+"\t"+r),t.endTurn(),0}))}))}return 0}if("simultaneous_agenda"==a[0]){t.returnAgendaCards();var or=a[1],sr=parseInt(a[2]);this.agenda_cards[or].name,this.game.state.voting_on_agenda=sr,this.displayFactionDashboard(1),console.log("Aenda Num: "+sr);for(var cr=1,lr=0;lr<this.game.players_info.length;lr++)console.log("has player: "+lr+" voted? "+JSON.stringify(this.game.state.voted_on_agenda)),0==this.game.state.voted_on_agenda[lr][sr]&&(cr=0);if(1==cr)return console.log("EVERYONE HAS VOTED"),this.game.queue.splice(n,1),1;if(1==this.game.state.voted_on_agenda[this.game.player-1][sr]){var ur='<div class="agenda_instructions">Waiting for Voting Results:</div>';ur+='<div class="agenda_name">'+t.agenda_cards[or].name+"</div>",ur+='<div class="agenda_text">',ur+=t.agenda_cards[or].text,ur+="</div>",this.updateStatus(ur)}else{if(console.log("TRYING"),t.doesPlayerHaveRider(this.game.player))return t.addMove("resolve\tagenda\t1\t"+t.app.wallet.returnPublicKey()),t.addMove("vote\t"+or+"\t"+t.game.player+"\tabstain\t0"),t.endTurn(),0;var dr=0,hr='<div class="agenda_instructions">The following agenda has advanced for consideration in the Galactic Senate:</div>';hr+='<div class="agenda_name">'+t.agenda_cards[or].name+"</div>",hr+='<div class="agenda_text">',hr+=t.agenda_cards[or].text,hr+="</div><ul>";for(var pr=0;pr<this.game.state.choices.length&&this.game.state.votes_available[t.game.player-1]>0;pr++){var fr=this.game.state.choices[pr];0==fr.indexOf("planet")&&(fr=this.game.planets[fr].name),0==fr.indexOf("sector")&&(fr=this.game.sectors[fr].sector),0==fr.indexOf("new-byzantium")&&(fr="New Byzantium"),hr+='<li class="option" id="'+pr+'">'+fr+"</li>"}hr+='<li class="option" id="abstain">abstain</li></ul></p>',t.updateStatus(hr),$(".option").off(),$(".option").on("mouseenter",(function(){var e=$(this).attr("id");"abstain"!==e&&(0==t.game.state.choices[e].indexOf("planet")&&(dr=1),0!=t.game.state.choices[e].indexOf("sector")&&t.game.state.choices[e].indexOf("new-byzantium"),1==dr&&(t.showPlanetCard(t.game.planets[t.game.state.choices[e]].tile,t.game.planets[t.game.state.choices[e]].idx),t.showSectorHighlight(t.game.planets[t.game.state.choices[e]].tile)))})),$(".option").on("mouseleave",(function(){var e=$(this).attr("id");"abstain"!==e&&(0==t.game.state.choices[e].indexOf("planet")&&(dr=1),0!=t.game.state.choices[e].indexOf("sector")&&t.game.state.choices[e].indexOf("new-byzantium"),1==dr&&(t.hidePlanetCard(t.game.planets[t.game.state.choices[e]].tile,t.game.planets[t.game.state.choices[e]].idx),t.hideSectorHighlight(t.game.planets[t.game.state.choices[e]].tile)))})),$(".option").on("click",(function(){var e=$(this).attr("id"),r=0;if(1==dr&&"abstain"!=e&&(t.hidePlanetCard(t.game.planets[t.game.state.choices[e]].tile,t.game.planets[t.game.state.choices[e]].idx),t.hideSectorHighlight(t.game.planets[t.game.state.choices[e]].tile)),"abstain"==e)return t.addMove("resolve\tagenda\t1\t"+t.app.wallet.returnPublicKey()),t.addMove("vote\t"+or+"\t"+t.game.player+"\t"+e+"\t"+r),t.endTurn(),0;for(var n='<p style="margin-bottom:15px">Your voting strength is determined by your influence. Conquer more influence-rich planets to increase it. How many votes do you wish to cast in the Galactic Senate:</p>',a=1;a<=t.game.state.votes_available[t.game.player-1];a++)n+=1==a?'<li class="option textchoice" id="'+a+'">'+a+" vote</li>":'<li class="option textchoice" id="'+a+'">'+a+" votes</li>";t.updateStatus(n),$(".option").off(),$(".option").on("click",(function(){return r=$(this).attr("id"),t.addMove("resolve\tagenda\t1\t"+t.app.wallet.returnPublicKey()),t.addMove("vote\t"+or+"\t"+t.game.player+"\t"+e+"\t"+r),t.endTurn(),0}))}))}return 0}if("change_speaker"==a[0])return this.game.state.speaker=parseInt(a[1]),this.displayFactionDashboard(),this.game.queue.splice(n,1),1;if("setinitiativeorder"==a[0]){var mr=this.returnInitiativeOrder();this.game.queue.push("resolve\tsetinitiativeorder");for(var gr=mr.length-1;gr>=0;gr--)0==this.game.players_info[mr[gr]-1].passed&&this.game.queue.push("play\t"+mr[gr]);return 1}if("resetconfirmsneeded"==a[0]){var yr=1;return parseInt(a[1])>1&&(yr=parseInt(a[1])),this.resetConfirmsNeeded(yr),this.game.queue.splice(n,1),1}if("tokenallocation"==a[0]){if(1==this.playing_token_allocation)return;return this.playing_token_allocation=1,parseInt(a[2])?this.playerAllocateNewTokens(parseInt(a[1]),parseInt(a[2]),1,3):this.playerAllocateNewTokens(this.game.player,this.game.players_info[this.game.player-1].new_tokens_per_round+this.game.players_info[this.game.player-1].new_token_bonus_when_issued,1,3),0}if("newround"===a[0]){if(this.game.state.turn=0,this.game.state.end_round_scoring=1,this.game.state.round>=1&&0==this.game.state.round_scoring)return-1!=this.game.planets["new-byzantium"].owner&&(this.game.queue.push("strategy\tpolitics\t"+this.game.state.speaker+"\t3\t1"),this.game.queue.push("ACKNOWLEDGE\tThe Galactic Senate has been re-established on New Byzantium, voting commences on the recent round of proposals")),this.game.queue.push("strategy\timperial\t-1\t3\t1"),this.game.state.playing_strategy_card_secondary=0,this.game.queue.push("resetconfirmsneeded\t"+t.game.players_info.length),this.game.queue.push("ACKNOWLEDGE\tAs the Imperial card was not played in the previous round, all players now have an opportunity to score Victory Points (in initiative order)"),this.game.state.round_scoring=0,1;this.game.state.round_scoring=0,this.game.state.playing_strategy_card_secondary=0,this.game.state.end_round_scoring=0;for(var vr=this.returnInitiativeOrder(),br=0;br<vr.length;br++)if(this.game.players_info[br].vp>=this.game.state.vp_target)return this.updateStatus("Game Over: "+this.returnFaction(br)+" has reached "+this.game.state.vp_target+" VP"),this.updateLog("Game Over: "+this.returnFactionNickname(br)+" has reached "+this.game.state.vp_target+" VP"),0;var _r=this.returnEventObjects();for(var wr in _r)for(var xr=0;xr<this.game.players_info.length;xr++)_r[wr].onNewRound(this,xr+1);this.game.queue.push("resolve\tnewround"),this.game.state.round++,this.updateLog("ROUND: "+this.game.state.round),this.updateStatus("Moving into Round "+this.game.state.round);for(var kr=0;kr<this.game.players_info.length;kr++)if(this.game.players_info[kr].must_exhaust_at_round_start.length>0)for(var Sr=0;Sr<this.game.players_info[kr].must_exhaust_at_round_start.length;Sr++)this.game.queue.push("must_exhaust_at_round_start\t"+(kr+1)+"\t"+this.game.players_info[kr].must_exhaust_at_round_start[Sr]);for(var Er=0;Er<this.game.players_info.length;Er++)for(var Ar in this.game.planets)this.game.planets[Ar].exhausted=0;for(var Pr=0;Pr<this.game.players_info.length;Pr++)this.game.players_info[Pr].passed=0,this.game.players_info[Pr].strategy_cards_played=[],this.game.players_info[Pr].strategy=[],this.game.players_info[Pr].must_exhaust_at_round_start=[],this.game.players_info[Pr].objectives_scored_this_round=[];if(this.repairUnits(),this.game.queue.push("setinitiativeorder"),this.game.queue.push("playerschoosestrategycards_after"),this.game.queue.push("playerschoosestrategycards"),this.game.queue.push("playerschoosestrategycards_before"),1==this.game.state.round?this.game.queue.push("ACKNOWLEDGE\tNEXT: all players must select a strategy card. If you are new to Red Imperium, consider taking Leadership, Politics, or Technology. They are simple but valuable cards!"):this.game.queue.push("ACKNOWLEDGE\tNEXT: all players select their strategy card(s) for Round ".concat(this.game.state.round,".")),1==this.game.state.round){var Cr=this.game.players_info[this.game.player-1].faction;this.game.queue.push("shownewobjectives"),this.game.queue.push("ACKNOWLEDGE\t"+this.factions[Cr].intro)}else this.game.queue.push("shownewobjectives");if(1==this.game.initializing?this.game.queue.push("READY"):(this.game.queue.push("tokenallocation\t"+this.game.players_info.length),this.playing_token_allocation=0,this.game.queue.push("resetconfirmsneeded\t"+this.game.players_info.length)),this.game.state.round>1)for(var Dr=1;Dr<=this.game.players_info.length;Dr++)this.game.queue.push("gain\t"+Dr+"\taction_cards\t"+(this.game.players_info[Dr-1].action_cards_per_round+this.game.players_info[Dr-1].action_cards_bonus_when_issued)),this.game.queue.push("DEAL\t2\t"+Dr+"\t"+(this.game.players_info[Dr-1].action_cards_per_round+this.game.players_info[Dr-1].action_cards_bonus_when_issued));this.game.queue.push("revealagendas");for(var Tr=1;Tr<=this.game.players_info.length;Tr++)this.game.queue.push("FLIPCARD\t3\t3\t1\t"+Tr);if(this.deactivateSectors(),this.unhighlightSectors(),1==this.game.state.round){this.game.queue.push("revealobjectives");for(var Or=1;Or<=this.game.players_info.length;Or++)this.game.queue.push("FLIPCARD\t4\t1\t2\t"+Or)}else{if(this.game.state.round<4){this.game.queue.push("revealobjectives");for(var Mr=1;Mr<=this.game.players_info.length;Mr++)this.game.queue.push("FLIPCARD\t4\t1\t2\t"+Mr)}if(this.game.state.round>=4){this.game.queue.push("revealobjectives");for(var Ir=1;Ir<=this.game.players_info.length;Ir++)this.game.queue.push("FLIPCARD\t5\t1\t3\t"+Ir)}}return 1}if("revealagendas"===a[0]){var Rr=a[1];for(Rr||(this.game.state.agendas=[],this.game.state.agendas_voting_information=[]),i=0;i<this.game.pool[0].hand.length;i++)this.game.state.agendas.push(this.game.pool[0].hand[i]),this.game.state.agendas_voting_information.push({});return this.game.pool=[],this.updateLeaderboard(),this.game.queue.splice(n,1),1}if("shownewobjectives"===a[0]){for(var Fr=this,Br="Your Objectives",jr="check objectives, strategy cards and more in the CARDS menu...",Nr=[],qr=0;qr<this.game.state.new_objectives.length;qr++)"secret"==this.game.state.new_objectives[qr].type&&Nr.push(this.secret_objectives[this.game.state.new_objectives[qr].card]),"stage1"==this.game.state.new_objectives[qr].type&&Nr.push(this.stage_i_objectives[this.game.state.new_objectives[qr].card]),"stage2"==this.game.state.new_objectives[qr].type&&Nr.push(this.stage_ii_objectives[this.game.state.new_objectives[qr].card]);return this.game.state.round>1&&(Br="New Objectives",jr="view all public and secret objectives in the CARDS menu..."),this.overlay.showCardSelectionOverlay(this.app,this,Nr,{title:Br,subtitle:jr,columns:Nr.length,backgroundImage:"/imperium/img/starscape_background1.jpg",padding:"20px",textAlign:"center",onContinue:function(){if(Fr.overlay.hideOverlay(),-1!=Fr.game.planets["new-byzantium"].owner){for(var e=[],t=Fr.returnAgendaCards(),r=0;r<Fr.game.state.agendas.length;r++)e.push(t[Fr.game.state.agendas[r]]);Fr.overlay.showCardSelectionOverlay(Fr.app,Fr,e,{title:"New Agendas",subtitle:"check all agendas, objectives and more in the CARDS menu",columns:Nr.length,backgroundImage:"/imperium/img/starscape_background1.jpg",padding:"20px",textAlign:"center",onClose:function(){Fr.overlay.hideOverlay()}},(function(){Fr.overlay.hideOverlay()}))}}},(function(){})),this.game.queue.splice(n,1),1}if("revealobjectives"===a[0]){if(this.game.state.new_objectives=[],this.game.deck.length>5)for(i=0;i<this.game.deck[5].hand.length;i++)this.game.state.secret_objectives.includes(this.game.deck[5].hand[i])||(this.game.state.secret_objectives.push(this.game.deck[5].hand[i]),this.game.state.new_objectives.push({type:"secret",card:this.game.deck[5].hand[i]}));if(this.game.pool.length>1)for(i=0;i<this.game.pool[1].hand.length;i++)this.game.state.stage_i_objectives.includes(this.game.pool[1].hand[i])||(this.game.state.stage_i_objectives.push(this.game.pool[1].hand[i]),this.game.state.new_objectives.push({type:"stage1",card:this.game.pool[1].hand[i]}));if(this.game.pool.length>2)for(i=0;i<this.game.pool[2].hand.length;i++)this.game.state.stage_ii_objectives.includes(this.game.pool[2].hand[i])||(this.game.state.stage_ii_objectives.push(this.game.pool[2].hand[i]),this.game.state.new_objectives.push({type:"stage2",card:this.game.pool[2].hand[i]}));return this.game.queue.splice(n,1),1}if("score"===a[0]){var Lr=parseInt(a[1]),Ur=parseInt(a[2]),zr=a[3],Hr=zr,$r="";return null!=this.secret_objectives[zr]&&(Hr=this.secret_objectives[zr].name,$r=this.secret_objectives[zr].text),null!=this.stage_i_objectives[zr]&&(Hr=this.stage_i_objectives[zr].name,$r=this.stage_i_objectives[zr].text),null!=this.stage_ii_objectives[zr]&&(Hr=this.stage_ii_objectives[zr].name,$r=this.stage_ii_objectives[zr].text),""==$r?this.updateLog(this.returnFactionNickname(Lr)+" scores "+Hr+" ("+Ur+" VP)"):this.updateLog(this.returnFactionNickname(Lr)+" scores "+Hr+"<p></p><div style='width:80%;font-size:1.0em;margin-left:auto;margin-right:auto;margin-top:15px;margin-bottom:15px'>"+$r+"</div>"),this.game.players_info[Lr-1].vp+=Ur,this.game.players_info[Lr-1].objectives_scored.push(zr),1!=this.game.state.end_round_scoring&&1==this.checkForVictory()?(this.updateStatus("Game Over: "+this.returnFaction(Lr-1)+" has reached "+this.game.state.vp_target+" VP"),0):(this.game.queue.splice(n,1),this.game.player,1)}if("playerschoosestrategycards"===a[0]){this.updateStatus("Players selecting strategy cards, starting from "+this.returnSpeaker());for(var Gr=[],Kr=0;Kr<this.game.players_info.length;Kr++){if(Gr[Kr]=0,this.game.players_info[Kr].strategy_cards_retained.length>=1)for(var Vr=0;Vr<this.game.players_info[Kr].strategy_cards_retained.length;Vr++)this.game.players_info[Kr].strategy.push(this.game.players_info[Kr].strategy_cards_retained[Vr]),Gr[Kr]++;this.game.players_info[Kr].strategy_cards_retained=[]}var Wr=this.returnStrategyCards();for(var Yr in Wr)if(!this.game.state.strategy_cards.includes(Yr)){for(var Jr=1,Qr=0;Qr<this.game.players_info.length;Qr++)this.game.players_info[Qr].strategy.includes(Yr)&&(Jr=0);1==Jr&&(this.game.state.strategy_cards_bonus[this.game.state.strategy_cards.length]=0,this.game.state.strategy_cards.push(Yr))}if(this.game.player==this.game.state.speaker){this.addMove("resolve\tplayerschoosestrategycards"),this.addMove("addbonustounselectedstrategycards");var Xr=1;2==this.game.players_info.length&&(Xr=3),3==this.game.players_info.length&&(Xr=2),4==this.game.players_info.length&&(Xr=2),this.game.players_info.length>=5&&(Xr=1),1==this.game.state.round&&(Xr=1);for(var Zr=0;Zr<Xr;Zr++)for(var en=0;en<this.game.players_info.length;en++){var tn=this.game.state.speaker+en;tn>this.game.players_info.length&&(tn-=this.game.players_info.length),Zr+Gr[tn-1]<Xr&&this.rmoves.push("pickstrategy\t"+tn+"\t"+(Zr+1))}this.endTurn()}return 0}if("addbonustounselectedstrategycards"===a[0]){for(var rn=0;rn<this.game.state.strategy_cards.length;rn++)this.game.state.strategy_cards_bonus[rn]+=1;return this.game.queue.splice(n,1),1}if("must_exhaust_at_round_start"===a[0]){parseInt(a[1]);var nn=a[2];a[2]&&a[2],this.game.queue.splice(n,1);var an=0;if("cultural"==nn)for(var on in this.game.planets)"cultural"==this.game.planets[on].type&&(this.game.planets[on].exhausted=1,an=1,this.updateSectorGraphics(on));if("industrial"==nn)for(var sn in this.game.planets)"industrial"==this.game.planets[sn].type&&(this.game.planets[sn].exhausted=1,an=1,this.updateSectorGraphics(sn));if("hazardous"==nn)for(var cn in this.game.planets)"hazardous"==this.game.planets[cn].type&&(this.game.planets[cn].exhausted=1,an=1,this.updateSectorGraphics(cn));if("homeworld"==nn)for(var ln in this.game.planets)"homeworld"==this.game.planets[ln].type&&(this.game.planets[ln].exhausted=1,an=1,this.updateSectorGraphics(ln));return 0==an&&(this.game.planets[nn]=an,this.updateSectorGraphics(i)),1}if("pickstrategy"===a[0]){var un=parseInt(a[1]),dn=parseInt(a[2]);if(this.setPlayerActiveOnly(un),this.game.player==un)return this.playerSelectStrategyCards((function(e){t.addMove("resolve\tpickstrategy"),t.addMove("purchase\t"+t.game.player+"\tstrategycard\t"+e),t.endTurn()}),dn),0;var hn="";hn+=this.returnFaction(un)+" is picking a strategy card: <ul>";var pn=[];for(var fn in this.strategy_cards)pn.push("");for(var mn=0;mn<this.game.state.strategy_cards.length;mn++){for(var gn=parseInt(this.strategy_cards[this.game.state.strategy_cards[mn]].rank);""!=pn[gn-1];)gn++;pn[gn-1]='<li class="textchoice" style="opacity:0.5" id="'+this.game.state.strategy_cards[mn]+'">'+this.strategy_cards[this.game.state.strategy_cards[mn]].name+"</li>"}for(var yn=0;yn<pn.length;yn++)""!=pn[yn]&&(hn+=pn[yn]);return hn+="</ul>",this.updateStatus(hn),$(".textchoice").on("mouseenter",(function(){var e=$(this).attr("id");t.showStrategyCard(e)})),$(".textchoice").on("mouseleave",(function(){var e=$(this).attr("id");t.hideStrategyCard(e)})),0}if("land"===a[0]){var vn=a[1],bn=a[2],_n=a[3],wn=a[4],xn=a[5],kn=a[6],Sn=a[7],En=this.returnSectorAndPlanets(_n);if(this.game.player==vn&&1!=bn||("planet"==wn?(this.unloadUnitByJSONFromPlanet(vn,_n,xn,Sn),this.loadUnitByJSONOntoPlanet(vn,_n,kn,Sn)):"ship"==wn?(this.unloadUnitByJSONFromShip(vn,_n,xn,Sn),this.loadUnitByJSONOntoPlanet(vn,_n,kn,Sn)):this.loadUnitByJSONOntoPlanet(vn,_n,kn,Sn)),this.game.queue.length>1)if(0!=this.game.queue[this.game.queue.length-2].indexOf("land")){var An=this.returnNumberOfGroundForcesOnPlanet(vn,_n,kn);this.updateLog(this.returnFactionNickname(vn)+" lands "+An+" infantry on "+En.p[parseInt(kn)].name)}else{var Pn=this.game.queue[this.game.queue.length-2].split("\t"),Cn=Pn[6];if(Cn!=kn){var Dn=this.returnNumberOfGroundForcesOnPlanet(vn,_n,kn);this.updateLog(this.returnFactionNickname(vn)+" lands "+Dn+" infantry on "+En.p[parseInt(kn)].name)}}return this.saveSystemAndPlanets(En),this.updateSectorGraphics(_n),this.game.queue.splice(n,1),1}if("unload_infantry"===a[0]){var Tn=a[1],On=(a[2],a[3]),Mn=a[4],In=a[5];return"planet"===Mn?this.unloadUnitFromPlanet(Tn,On,In,"infantry"):this.unloadUnitFromShip(Tn,On,In,"infantry"),this.game.queue.splice(n,1),1}if("load_infantry"===a[0]){var Rn=a[1],Fn=(a[2],a[3]),Bn=a[4],jn=a[5];return"planet"===Bn&&this.loadUnitOntoPlanet(Rn,Fn,jn,"infantry"),"ship"===Bn&&this.loadUnitOntoShip(Rn,Fn,jn,"infantry"),this.game.queue.splice(n,1),1}if("load"===a[0]){var Nn=a[1],qn=a[2],Ln=a[3],Un=a[4],zn=a[5],Hn=a[6],$n=a[7];return this.game.player==Nn&&1!=qn||("planet"==Un?(this.unloadUnitByJSONFromPlanet(Nn,Ln,zn,Hn),this.loadUnitByJSONOntoShipByJSON(Nn,Ln,$n,Hn)):"ship"==Un?""!=zn?(this.unloadUnitByJSONFromShip(Nn,Ln,zn,Hn),this.loadUnitByJSONOntoShipByJSON(Nn,Ln,$n,Hn)):(this.removeSpaceUnitByJSON(Nn,Ln,Hn),this.loadUnitByJSONOntoShipByJSON(Nn,Ln,$n,Hn)):this.loadUnitByJSONOntoShipByJSON(Nn,Ln,$n,Hn)),this.updateSectorGraphics(Ln),this.game.queue.splice(n,1),1}if("annex"===a[0]){var Gn=parseInt(a[1]),Kn=a[2],Vn=parseInt(a[3]);this.game.queue.splice(n,1),this.displayFactionDashboard();var Wn=this.returnSectorAndPlanets(Kn),Yn=Wn.p[Vn];return Yn&&(Yn.units[Yn.owner-1]=[],Yn.owner>-1&&(this.game.players_info[Yn.owner-1].lost_planet_this_round=Gn),this.updateLog(Yn.name+" is annexed by "+t.returnFaction(t.game.player)),this.updatePlanetOwner(Kn,Vn,Gn)),this.updateSectorGraphics(Kn),1}if("give"===a[0]){var Jn=parseInt(a[1]),Qn=parseInt(a[2]),Xn=a[3],Zn=a[4];if(this.game.queue.splice(n,1),"action"==Xn){if(this.game.player==Qn){this.game.deck[1].hand.push(Zn);var ea=this.returnPlayerActionCards(this.game.player),ta=ea.length-this.game.players_info[this.game.player-1].action_card_limit;if(ta>0)return this.playerDiscardActionCards(ta),0;this.endTurn()}else if(this.game.player==Jn)for(var ra=0;ra<this.game.deck[1].hand.length;ra++)this.game.deck[1].hand[ra]==Zn&&this.game.deck[1].hand.splice(ra,1);return 0}if("promissary"==Xn){this.givePromissary(Jn,Qn,Zn);for(var na=this.returnEventObjects(),aa=0;aa<na.length;na++)na[aa].gainPromissary(this,receipient,Zn),na[aa].losePromissary(this,sender,Zn)}return 1}if("adjacency"===a[0]){a[1];var ia=a[2],oa=a[3];return this.game.queue.splice(n,1),this.game.state.temporary_adjacency.push([ia,oa]),1}if("pull"===a[0]){var sa=parseInt(a[1]),ca=parseInt(a[2]),la=a[3],ua=a[4];if(this.game.queue.splice(n,1),"action"==la)if("random"===ua)if(this.game.player==ca){for(var da=[],ha=0;ha<this.game.deck[1].hand.length;ha++)this.game.players_info[ca-1].action_cards_played.includes(this.game.deck[1].hand[ha])||da.push(this.game.deck[1].hand[ha]);for(var pa=this.rollDice(da.length),fa=da[pa-1],ma=0;ma<this.game.deck[1].hand.length;ma++)this.game.deck[1].hand[ma]===fa&&this.game.deck[1].hand.splice(pa-1,1);this.addMove("give\t"+ca+"\t"+sa+"\taction\t"+fa),this.addMove("NOTIFY\t"+this.returnFaction(sa)+" pulls "+this.action_cards[fa].name),this.endTurn()}else this.rollDice();else if(this.game.player==ca){for(var ga=0;ga<this.game.deck[1].hand.length;ga++)this.game.deck[1].hand[ga]===ua&&this.game.deck[1].hand.splice(ga,1);this.addMove("give\t"+ca+"\t"+sa+"\taction\t"+ua),this.addMove("NOTIFY\t"+this.returnFaction(sa)+" pulls "+this.action_cards[ua].name),this.endTurn()}return 0}if("expend"===a[0]){var ya=parseInt(a[1]),va=a[2],ba=a[3];return"command"==va&&(this.game.players_info[ya-1].command_tokens-=parseInt(ba)),"strategy"==va&&(this.game.players_info[ya-1].strategy_tokens-=parseInt(ba)),"goods"==va&&(this.game.players_info[ya-1].goods-=parseInt(ba)),"trade"==va&&(this.game.players_info[ya-1].goods-=parseInt(ba)),"planet"==va&&(this.game.planets[ba].exhausted=1),this.updateTokenDisplay(),this.updateLeaderboard(),this.displayFactionDashboard(),this.game.queue.splice(n,1),1}if("unexhaust"===a[0]){parseInt(a[1]);var _a=a[2],wa=a[3];return"planet"==_a&&this.unexhaustPlanet(wa),this.displayFactionDashboard(),this.game.queue.splice(n,1),1}if("offer"===a[0]){var xa=parseInt(a[1]),ka=parseInt(a[2]),Sa=JSON.parse(a[3]),Ea=JSON.parse(a[4]);this.game.queue.splice(n,1);var Aa="";if(this.returnFaction(xa),this.returnFaction(ka),Sa.goods>0&&(Aa+=Sa.goods+" ",Sa.goods>1?Aa+="trade goods":Aa+="trade good"),Sa.promissaries.length>0){Sa.goods>=1&&(Aa+=" and ");for(var Pa=0;Pa<Sa.promissaries.length;Pa++){var Ca=Sa.promissaries[Pa].promissary,Da=Ca.split("-"),Ta=t.factions[Da[0]].name;Aa+=this.promissary_notes[Da[1]].name,Aa+=" ",Aa+="("+Ta+")"}}(0==Sa.goods&&0==Sa.promissaries_length||""===Aa)&&(Aa+="nothing"),Aa+=" in exchange for ";var Oa="nothing";if(Ea.goods>0&&(Oa="",Aa+=Ea.goods+" ",Ea.goods>1?Aa+="trade goods or commodities":Aa+="trade good or commodity"),Ea.promissaries.length>0){Oa="",Ea.goods>1&&(Aa+=" and ");for(var Ma=0;Ma<Ea.promissaries.length;Ma++){Oa="";var Ia=Ea.promissaries[Ma].promissary,Ra=Ia.split("-"),Fa=t.factions[Ra[0]].name;Aa+=this.promissary_notes[Ra[1]].name,Aa+=" ",Aa+="("+Fa+")"}}return(0==Ea.goods&&0==Ea.promissaries_length||"nothing"===Oa)&&(Aa+="nothing"),Aa=this.returnFactionNickname(xa)+" offers "+this.returnFactionNickname(ka)+" "+Aa,this.updateLog(Aa),this.game.player==ka&&this.playerHandleTradeOffer(xa,Sa,Ea,Aa),0}if("refuse_offer"===a[0]){var Ba=parseInt(a[1]),ja=parseInt(a[2]);return this.game.queue.splice(n,1),this.game.players_info[Ba-1].traded_this_turn=1,this.game.players_info[ja-1].traded_this_turn=1,ja==this.game.player?(this.updateLog(this.returnFactionNickname(Ba)+" spurns trade offer"),this.game.queue.push("ACKNOWLEDGE\tYour trade offer has been spurned by "+this.returnFactionNickname(Ba)),1):(this.updateLog(this.returnFactionNickname(Ba)+" spurns trade offer"),this.displayFactionDashboard(),1)}if("trade"===a[0]){var Na=parseInt(a[1]),qa=parseInt(a[2]),La=JSON.parse(a[3]),Ua=JSON.parse(a[4]);if(this.game.queue.splice(n,1),console.log("OFFER: "+JSON.stringify(La)),console.log("PRE TRADE PROCESSING: "+JSON.stringify(this.game.players_info)),Na==this.game.player&&this.game.queue.push("ACKNOWLEDGE\tYour trade offer has been accepted by "+this.returnFaction(qa)),this.updateLog(this.returnFactionNickname(qa)+" accepts trade offer"),this.game.players_info[Na-1].traded_this_turn=1,this.game.players_info[qa-1].traded_this_turn=1,this.game.players_info[Na-1].commodities-=parseInt(La.goods),this.game.players_info[qa-1].commodities-=parseInt(Ua.goods),La.promissaries)for(var za=0;za<La.promissaries.length;za++)this.givePromissary(Na,qa,La.promissaries[za].promissary);if(Ua.promissaries)for(var Ha=0;Ha<Ua.promissaries.length;Ha++)this.givePromissary(qa,Na,Ua.promissaries[Ha].promissary);return this.game.players_info[Na-1].goods+=parseInt(Ua.goods),this.game.players_info[qa-1].goods+=parseInt(La.goods),this.game.players_info[Na-1].commodities<0&&(this.game.players_info[Na-1].goods+=parseInt(this.game.players_info[Na-1].commodities),this.game.players_info[Na-1].commodities=0),this.game.players_info[qa-1].commodities<0&&(this.game.players_info[qa-1].goods+=parseInt(this.game.players_info[qa-1].commodities),this.game.players_info[qa-1].commodities=0),console.log("POST TRADE PROCESSING: "+JSON.stringify(this.game.players_info)),this.displayFactionDashboard(),1}if("activate"===a[0]){this.returnEventObjects();var $a=parseInt(a[1]),Ga=a[2];return this.game.state.activated_sector=Ga,sys=this.returnSectorAndPlanets(Ga),sys.s.activated[$a-1]=1,this.saveSystemAndPlanets(sys),this.updateSectorGraphics(Ga),this.game.queue.splice(n,1),1}if("deactivate"===a[0]){var Ka=parseInt(a[1]),Va=a[2];return sys=this.returnSectorAndPlanets(Va),sys.s.activated[Ka-1]=0,this.saveSystemAndPlanets(sys),this.updateSectorGraphics(Va),this.game.queue.splice(n,1),1}if("lose"===a[0]){var Wa=parseInt(a[1]),Ya=a[2],Ja=parseInt(a[3]);return this.returnEventObjects(),"action_cards"==Ya&&(this.game.players_info[Wa-1].action_cards_in_hand-=Ja,this.game.players_info[Wa-1].action_cards_in_hand>0&&(this.game.players_info[Wa-1].action_cards_in_hand=0)),"secret_objectives"==Ya&&(this.game.players_info[Wa-1].secret_objectives_in_hand-=Ja,this.game.players_info[Wa-1].secret_objectives_in_hand>0&&(this.game.players_info[Wa-1].secret_objectives_in_hand=0)),this.game.queue.splice(n,1),1}if("gain"===a[0]){var Qa=parseInt(a[1]),Xa=a[2],Za=parseInt(a[3]),ei=1;"0"===a[4]&&(ei=0);var ti=this.returnEventObjects();if("action_cards"==Xa){if(this.game.player==Qa&&1==this.browser_active){var ri=0;document.querySelectorAll(".overlay_action_card").forEach((function(e){ri++})),this.overlay.showOverlay(this.app,this,this.returnNewActionCardsOverlay(this.game.deck[1].hand.slice(this.game.deck[1].hand.length-(Za+ri),this.game.deck[1].hand.length))),document.getElementById("close-action-cards-btn").onclick=function(t){e.overlay.hideOverlay(),e.game.state.showing_action_cards_amounts=0}}if(this.game.players_info[Qa-1].action_cards_in_hand+=Za,1==ei)for(var ni in ti=this.returnEventObjects())ti[ni].gainActionCards(t,Qa,Za)}"secret_objectives"!==Xa&&"secret_objective"!==Xa||(this.game.player==Qa&&1==this.browser_active&&this.overlay.showOverlay(this.app,this,this.returnNewSecretObjectiveOverlay(this.game.deck[5].hand.slice(this.game.deck[5].hand.length-Za,this.game.deck[5].hand.length))),this.game.players_info[Qa-1].secret_objectives_in_hand+=Za);try{var ai=this.returnTokenDisplay();document.querySelector(".hud-header").innerHTML=ai}catch(e){console.log("error updating hud-header: "+e)}return this.updateTokenDisplay(),this.updateLeaderboard(),this.displayFactionDashboard(),this.game.queue.splice(n,1),this.handleActionCardLimit(Qa)}if("purchase"===a[0]){var ii=parseInt(a[1]),oi=a[2],si=parseInt(a[3]),ci=this.returnEventObjects();if("strategycard"===oi){this.updateLog(this.returnFactionNickname(ii)+" takes "+this.strategy_cards[a[3]].name);var li=a[3];for(var ui in ci)li=ci[ui].gainStrategyCard(t,ii,li);this.game.players_info[ii-1].strategy.push(a[3]);for(var di=0;di<this.game.state.strategy_cards.length;di++)this.game.state.strategy_cards[di]===a[3]&&(this.game.players_info[ii-1].goods+=this.game.state.strategy_cards_bonus[di],this.game.state.strategy_cards.splice(di,1),this.game.state.strategy_cards_bonus.splice(di,1),di=this.game.state.strategy_cards.length+2)}if("tech"===oi||"technology"===oi){for(var hi in this.updateLog(this.returnFactionNickname(ii)+" gains "+this.tech[a[3]].name),this.game.players_info[ii-1].tech.includes(a[3])||this.game.players_info[ii-1].tech.push(a[3]),ci=this.returnEventObjects())ci[hi].gainTechnology(t,ii,a[3]);this.upgradePlayerUnitsOnBoard(ii)}if("goods"===oi){for(var pi in this.updateLog(this.returnFactionNickname(ii)+" gains "+si+" trade goods"),ci)si=ci[pi].gainTradeGoods(t,ii,si);this.game.players_info[ii-1].goods+=si,1!=this.game.state.use_tutorials||this.game.state.seen_goods_tutorial||(this.game.state.seen_goods_tutorial=1,this.overlay.showOverlay(t.app,t,'<div style="margin-left:auto;margin-right:auto;height:90vh;width:auto"><img src="/imperium/img/tutorials/trade_goods.png" style="width:auto;height:100%" /></div>'))}if("commodities"===oi){for(var fi in 1!=this.game.state.use_tutorials||this.game.state.seen_commodities_tutorial||(this.game.state.seen_commodities_tutorial=1,this.overlay.showOverlay(t.app,t,'<div style="margin-left:auto;margin-right:auto;height:90vh;width:auto"><img src="/imperium/img/tutorials/commodities.png" style="width:auto;height:100%" /></div>')),this.updateLog(this.returnFactionNickname(ii)+" gains "+a[3]+" commodities"),ci)si=ci[fi].gainCommodities(t,ii,si);this.game.players_info[ii-1].commodities+=si,this.game.players_info[ii-1].commodities>this.game.players_info[ii-1].commodity_limit&&(this.updateLog(this.returnFactionNickname(ii)+" capped at "+this.game.players_info[ii-1].commodity_limit),this.game.players_info[ii-1].commodities=this.game.players_info[ii-1].commodity_limit)}if("command"===oi&&parseInt(a[3])>0){for(var mi in this.updateLog(this.returnFactionNickname(ii)+" gains "+a[3]+" command tokens"),ci)si=ci[mi].gainCommandTokens(t,ii,si);this.game.players_info[ii-1].command_tokens+=si}if("strategy"===oi&&parseInt(a[3])>0){for(var gi in this.updateLog(this.returnFactionNickname(ii)+" gains "+a[3]+" strategy tokens"),ci)si=ci[gi].gainStrategyTokens(t,ii,si);this.game.players_info[ii-1].strategy_tokens+=si}if("fleetsupply"===oi&&parseInt(a[3])>0){for(var yi in ci)si=ci[yi].gainFleetSupply(t,ii,si);this.game.players_info[ii-1].fleet_supply+=si,this.updateLog(this.returnFactionNickname(ii)+" increases fleet supply to "+this.game.players_info[ii-1].fleet_supply)}return this.updateTokenDisplay(),this.updateLeaderboard(),this.displayFactionDashboard(),this.game.queue.splice(n,1),1}if("pass"===a[0]){var vi=parseInt(a[1]);return this.game.players_info[vi-1].passed=1,this.updateLog(this.returnFactionNickname(vi)+" has passed"),this.game.queue.splice(n,1),1}if("add_infantry_to_planet"===a[0]){var bi=a[1],_i=a[2],wi=parseInt(a[3]);return 0==wi&&this.game.player==bi||this.game.planets[_i].units[bi-1].push(this.returnUnit("infantry",bi)),this.game.queue.splice(n,1),1}if("remove_infantry_from_planet"===a[0]){var xi=a[1],ki=a[2],Si=parseInt(a[3]);if(0==Si&&this.game.player==xi);else for(var Ei=this.game.planets[ki],Ai=Ei.units[xi-1].length,Pi=0;Pi<Ai;Pi++){var Ci=Ei.units[xi-1][Pi];"infantry"==Ci.type&&(Ei.units[xi-1].splice(Pi,1),Pi=Ai+2)}return this.game.queue.splice(n,1),1}if("move"===a[0]){var Di=a[1],Ti=parseInt(a[2]),Oi=a[3],Mi=a[4],Ii=a[5],Ri=a[6],Fi=JSON.parse(Ii);if(Fi.already_moved&&(delete Fi.already_moved,Ii=JSON.stringify(Fi)),"rift"===Ri){var Bi=JSON.parse(Ii),ji=this.rollDice(10);if(ji<=3)return this.removeSpaceUnitByJSON(Di,Oi,Ii),this.updateLog("The Gravity Rift destroys "+this.returnFactionNickname(Di)+" "+Bi.name+" (roll: "+ji+")"),this.game.queue.splice(n,1),this.updateSectorGraphics(Mi),this.updateSectorGraphics(Oi),1;this.updateLog("The Gravity Risk accelerates "+this.returnFactionNickname(Di)+" "+Bi.name+" (roll: "+ji+")")}if(this.game.player!=Di||1==Ti){this.returnSectorAndPlanets(Oi);var Ni=this.returnSectorAndPlanets(Mi);JSON.parse(Ii),this.removeSpaceUnitByJSON(Di,Oi,Ii),this.addSpaceUnitByJSON(Di,Mi,Ii);var qi=this.game.queue[n-1].split("\t")[0];"move"!=qi&&this.updateLog(this.returnFactionNickname(Di)+" moves "+this.returnPlayerFleetInSector(Di,Mi)+" into "+Ni.s.name)}this.updateSectorGraphics(Mi),this.updateSectorGraphics(Oi),this.game.queue.splice(n,1);for(var Li=1,Ui=0;Ui<this.game.queue.length;Ui++){var zi=this.game.queue[Ui],Hi=zi.split("\t");"move"==Hi[0]&&parseInt(Hi[3])==Oi&&(Li=0)}return 1==Li?this.handleFleetSupply(Di,Oi):1}if("player_end_turn"===a[0]){var $i=parseInt(a[1]),Gi=this.returnEventObjects();this.setPlayerInactive($i),this.game.state.active_player_moved=0,this.game.state.active_player_turn=-1,this.game.queue.splice(n,1);for(var Ki=this.returnSpeakerOrder(),Vi=0;Vi<Ki.length;Vi++)for(var Wi=0;Wi<Gi.length;Wi++)1==Gi[Vi].playerEndTurnTriggers(this,Ki[Vi])&&this.game.queue.push("player_end_turn_event\t"+Ki[Vi]+"\t"+Wi);return 1}if("player_end_turn_event"===a[0]){var Yi=parseInt(a[1]),Ji=parseInt(a[2]),Qi=this.returnEventObjects();return this.game.queue.splice(n,1),Qi[Ji].playerEndTurnEvent(this,Yi)}if("activate_system"===a[0]){var Xi=parseInt(a[1]),Zi=a[2],eo=(a[3],this.returnEventObjects());sys=this.returnSectorAndPlanets(Zi),sys.s.activated[Xi-1]=1,this.game.state.activated_sector=Zi,this.saveSystemAndPlanets(sys),this.updateSectorGraphics(Zi),this.updateLog(this.returnFactionNickname(Xi)+" activates "+this.returnSectorName(Zi)),this.updateStatus(this.returnFaction(Xi)+" activates "+this.returnSectorName(Zi)),this.game.queue.splice(n,1);for(var to=this.returnSpeakerOrder(),ro=0;ro<to.length;ro++)for(var no=0;no<eo.length;no++)1==eo[no].activateSystemTriggers(this,Xi,to[ro],Zi)&&this.game.queue.push("activate_system_event\t"+Xi+"\t"+to[ro]+"\t"+Zi+"\t"+no);return 1}if("activate_system_event"===a[0]){var ao=this.returnEventObjects(),io=parseInt(a[1]),oo=parseInt(a[2]),so=a[3],co=parseInt(a[4]);return this.game.queue.splice(n,1),ao[co].activateSystemEvent(this,io,oo,so)}if("activate_system_post"===a[0]){var lo=parseInt(a[1]),uo=a[2];return this.game.queue.splice(n,1),this.updateSectorGraphics(uo),this.game.player==lo&&this.playerPostActivateSystem(uo),0}if("pre_agenda_stage"===a[0]){var ho=this.returnEventObjects(),po=a[1];this.game.queue.splice(n,1),this.updateLog("Agenda: "+this.agenda_cards[po].name+"<p></p><div style='width:80%;font-size:1.0em;margin-left:auto;margin-right:auto;margin-top:15px;margin-bottom:15px'>"+this.agenda_cards[po].text+"</div>"),this.game.state.riders=[],this.game.state.choices=[];for(var fo=this.returnSpeakerOrder(),mo=0;mo<fo.length;mo++)for(var go=0;go<ho.length;go++)1==ho[go].preAgendaStageTriggers(this,fo[mo],po)&&this.game.queue.push("pre_agenda_stage_event\t"+fo[mo]+"\t"+po+"\t"+go);return 1}if("pre_agenda_stage_event"===a[0]){var yo=this.returnEventObjects(),vo=parseInt(a[1]),bo=(a[2],parseInt(a[3]));return this.game.queue.splice(n,1),yo[bo].preAgendaStageEvent(this,vo)}if("pre_agenda_stage_post"===a[0]){var _o=a[1],wo=this;this.game.queue.splice(n,1),this.game.state.choices=this.agenda_cards[_o].returnAgendaOptions(wo);for(var xo=this.returnSpeakerOrder(),ko=0;ko<xo.length;ko++)this.game.queue.push("pre_agenda_stage_player_menu\t"+xo[ko]+"\t"+_o);return 1}if("pre_agenda_stage_player_menu"===a[0]){var So=parseInt(a[1]),Eo=a[2];return this.game.queue.splice(n,1),this.game.player==So&&this.playerPlayPreAgendaStage(So,Eo),0}if("post_agenda_stage"===a[0]){var Ao=this.returnEventObjects(),Po=a[1];this.game.queue.splice(n,1);for(var Co=this.returnSpeakerOrder(),Do=0;Do<Co.length;Do++)for(var To=0;To<Ao.length;To++)1==Ao[To].postAgendaStageTriggers(this,Co[Do],Po)&&this.game.queue.push("post_agenda_stage_event\t"+Co[Do]+"\t"+Po+"\t"+To);return 1}if("post_agenda_stage_event"===a[0]){var Oo=this.returnEventObjects(),Mo=parseInt(a[1]),Io=(a[2],parseInt(a[3]));return this.game.queue.splice(n,1),Oo[Io].postAgendaStageEvent(this,Mo)}if("post_agenda_stage_post"===a[0]){var Ro=a[1];this.game.queue.splice(n,1);for(var Fo=this.returnSpeakerOrder(),Bo=0;Bo<Fo.length;Bo++)this.game.queue.push("post_agenda_stage_player_menu\t"+Fo[Bo]+"\t"+Ro);return 1}if("post_agenda_stage_player_menu"===a[0]){var jo=parseInt(a[1]),No=a[2];if(this.game.queue.splice(n,1),this.game.player==jo){for(var qo=[],Lo=0;Lo<this.game.state.choices.length;Lo++)qo.push(0);for(var Uo=0;Uo<this.game.players.length;Uo++)qo[this.game.state.how_voted_on_agenda[Uo]]+=this.game.state.votes_cast[Uo];for(var zo=-1,Ho=0;Ho<qo.length;Ho++)qo[Ho]>zo&&(zo=qo[Ho]);for(var $o=[],Go=0;Go<qo.length;Go++)qo[Go]==zo&&$o.push(this.game.state.choices[Go]);this.playerPlayPostAgendaStage(jo,No,$o)}return 0}if("pds_space_attack"===a[0]){var Ko=a[1],Vo=a[2],Wo=this.returnEventObjects();this.game.queue.splice(n,1);var Yo=this.returnSpeakerOrder();this.resetTargetUnits();for(var Jo=0;Jo<Yo.length;Jo++)for(var Qo=0;Qo<Wo.length;Qo++)1==Wo[Qo].pdsSpaceAttackTriggers(this,Ko,Yo[Jo],Vo)&&this.returnOpponentInSector(Ko,Vo)>-1&&this.game.queue.push("pds_space_attack_event\t"+Yo[Jo]+"\t"+Ko+"\t"+Vo+"\t"+Qo);return 1}if("pds_space_attack_event"===a[0]){var Xo=this.returnEventObjects(),Zo=parseInt(a[1]),es=parseInt(a[2]),ts=a[3],rs=parseInt(a[4]);return this.game.queue.splice(n,1),Xo[rs].pdsSpaceAttackEvent(this,es,Zo,ts)}if("pds_space_attack_post"===a[0]){var ns=parseInt(a[1]),as=a[2];this.game.queue.splice(n,1),this.updateSectorGraphics(as);var is=this.returnOpponentInSector(ns,as);return-1==is||(console.log("checking if player has PDS units in range..."),1==this.doesPlayerHavePDSUnitsWithinRange(is,ns,as)&&this.game.queue.push("pds_space_attack_player_menu\t"+ns+"\t"+ns+"\t"+as)),1}if("pds_space_attack_player_menu"===a[0]){var os=parseInt(a[1]),ss=parseInt(a[2]),cs=a[3];this.game.queue.splice(n,1),this.updateSectorGraphics(cs);for(var ls=-1,us=t.returnSectorAndPlanets(cs),ds=0;ds<us.s.units.length;ds++)ds+1!=ss&&us.s.units[ds].length>0&&(ls=ds+1);return-1==ls?1:(this.game.player==os&&this.playerPlayPDSAttack(os,ss,cs),0)}if("pds_space_defense"===a[0]){var hs=a[1],ps=a[2],fs=this.returnEventObjects();this.game.queue.splice(n,1);var ms=this.returnSpeakerOrder();this.resetTargetUnits();for(var gs=0;gs<ms.length;gs++)for(var ys=0;ys<fs.length;ys++)1==fs[ys].pdsSpaceDefenseTriggers(this,hs,ms[gs],ps)&&this.game.queue.push("pds_space_defense_event\t"+ms[gs]+"\t"+hs+"\t"+ps+"\t"+ys);return 1}if("pds_space_defense_event"===a[0]){var vs=this.returnEventObjects(),bs=parseInt(a[1]),_s=parseInt(a[2]),ws=a[3],xs=parseInt(a[4]);return this.game.queue.splice(n,1),vs[xs].pdsSpaceDefenseEvent(this,_s,bs,ws)}if("pds_space_defense_post"===a[0]){var ks=parseInt(a[1]),Ss=a[2];this.game.queue.splice(n,1),this.updateSectorGraphics(Ss);for(var Es=this.returnSpeakerOrder(),As=0;As<Es.length;As++)1==this.doesPlayerHavePDSUnitsWithinRange(ks,Es[As],Ss)&&this.game.queue.push("pds_space_defense_player_menu\t"+Es[As]+"\t"+ks+"\t"+Ss);return 1}if("pds_space_defense_player_menu"===a[0]){var Ps=parseInt(a[1]),Cs=parseInt(a[2]),Ds=a[3];return this.game.queue.splice(n,1),this.updateSectorGraphics(Ds),this.updateLog(this.returnFactionNickname(Ps)+" preparing to fire PDS"),this.game.player==Ps&&this.playerPlayPDSDefense(Ps,Cs,Ds),0}if("player_destroy_unit"===a[0]){parseInt(a[1]);var Ts=parseInt(a[2]),Os=parseInt(a[3]),Ms=a[4],Is=a[5];return a[6],"space"==Ms&&this.playerDestroyShips(Ts,Os,Is),0}if("destroy_unit"===a[0]||"destroy"===a[0]){parseInt(a[1]);var Rs=parseInt(a[2]),Fs=a[3],Bs=a[4],js=a[5],Ns=parseInt(a[6]),qs=(parseInt(a[7]),this.returnSectorAndPlanets(Bs));this.returnEventObjects(),"space"==Fs&&(qs.s.units[Rs-1][Ns].strength=0,qs.s.units[Rs-1][Ns].destroyed=1),"ground"==Fs&&(qs.p[js].units[Rs-1][Ns].strength=0,qs.p[js].units[Rs-1][Ns].destroyed=1,"spacedock"!==qs.p[js].units[Rs-1][Ns].type&&"pds"!==qs.p[js].units[Rs-1][Ns].type||qs.p[js].units[Rs-1].splice(Ns,1));var Ls=this.game.queue[n-1].split("\t");return"destroy_unit"!==Ls[0]&&this.eliminateDestroyedUnitsInSector(Rs,Bs),this.saveSystemAndPlanets(qs),this.updateSectorGraphics(Bs),this.game.queue.splice(n,1),1}if("destroy_infantry_on_planet"===a[0]){for(var Us=parseInt(a[1]),zs=a[2],Hs=parseInt(a[3]),$s=parseInt(a[4]),Gs=this.returnSectorAndPlanets(zs),Ks=this.returnEventObjects(),Vs=Gs.p[Hs],Ws=(Vs.owner,0);Ws<Vs.units.length;Ws++)if(Vs.units[Ws].length>0&&Ws+1!=Us)for(var Ys=0,Js=0;Js<Vs.units[Ws].length&&Ys<$s;Js++){var Qs=Vs.units[Ws][Js];if("infantry"==Qs.type){for(var Xs in Qs.strength=0,Qs.destroyed=1,Ys++,Ks)Vs.units[Ws][Js]=Ks[Xs].unitDestroyed(t,Us,Vs.units[Ws][Js]);try{1==Vs.units[Ws][Js].destroyed&&(this.game.players_info[Ws].my_units_destroyed_this_combat_round.push(Vs.units[Ws][Js].type),this.game.players_info[Us-1].units_i_destroyed_this_combat_round.push(Vs.units[Ws][Js].type))}catch(e){}t.eliminateDestroyedUnitsInSector(Vs.owner,zs)}}return this.saveSystemAndPlanets(Gs),this.updateSectorGraphics(zs),this.game.queue.splice(n,1),1}if("assign_hit"===a[0]){var Zs=parseInt(a[1]),ec=parseInt(a[2]),tc=parseInt(a[3]),rc=a[4],nc=a[5],ac=parseInt(a[6]),ic=parseInt(a[7]),oc=this.returnSectorAndPlanets(nc),sc=this.returnEventObjects();if("ship"==rc){try{if(oc.s.units[tc-1][ac].last_round_damaged=this.game.state.space_combat_round,(1==ic&&t.game.player==tc||t.game.player!=tc)&&oc.s.units[tc-1][ac].strength--,oc.s.units[tc-1][ac].strength<=0){for(var cc in this.updateLog(this.returnFactionNickname(tc)+" "+oc.s.units[tc-1][ac].name+" destroyed"),oc.s.units[tc-1][ac].destroyed=1,sc)oc.s.units[tc-1][ac]=sc[cc].unitDestroyed(t,Zs,oc.s.units[tc-1][ac]);try{1==oc.s.units[tc-1][ac].destroyed&&(this.game.players_info[tc-1].my_units_destroyed_this_combat_round.push(oc.s.units[tc-1][ac].type),this.game.players_info[Zs-1].units_i_destroyed_this_combat_round.push(oc.s.units[tc-1][ac].type))}catch(e){}}else this.updateLog(this.returnFactionNickname(tc)+" "+oc.s.units[tc-1][ac].name+" damaged")}catch(e){console.log("Error? Not all hits assigned: "+e)}this.saveSystemAndPlanets(oc),this.doesPlayerHaveShipsInSector(Zs,nc),this.doesPlayerHaveShipsInSector(ec,nc)}var lc=this.game.queue[this.game.queue.length-1].split("\t");return"assign_hit"===lc[0]&&lc[5]===nc||this.eliminateDestroyedUnitsInSector(tc,nc),this.saveSystemAndPlanets(oc),this.updateSectorGraphics(nc),this.game.queue.splice(n,1),1}if("assign_hits_capital_ship"===a[0]){var uc=parseInt(a[1]),dc=a[2],hc=a[3];return this.returnSectorAndPlanets(dc),this.game.queue.splice(n,1),this.game.player==uc&&this.playerAssignHitsCapitalShips(uc,dc,hc),0}if("assign_hits"===a[0]){var pc=this.game.queue.length-2,fc=[];if(pc>=0&&("ships_fire"===(fc=this.game.queue[pc].split("\t"))[0]||"infantry_fire"==fc[0]||"pds_fire"==fc[0])){var mc=this.game.queue[pc],gc=this.game.queue[pc+1];return this.game.queue[pc]=gc,this.game.queue[pc+1]=mc,1}var yc=parseInt(a[1]),vc=parseInt(a[2]),bc=a[3],_c=a[4],wc=a[5];"pds"!=wc&&(wc=parseInt(wc));var xc=parseInt(a[6]),kc=a[7],Sc=this.returnSectorAndPlanets(_c);if(this.game.state.assign_hits_queue_instruction="",this.game.player==vc&&(this.game.state.assign_hits_queue_instruction=this.game.queue[this.game.queue.length-1]),this.game.queue.splice(n,1),xc>0&&this.updateStatus(this.returnFaction(vc)+" is assigning hits to units ... "),this.game.state.assign_hits_to_cancel>0&&(xc-=this.game.state.assign_hits_to_cancel,this.game.state.assign_hits_to_cancel=0,xc<=0))return 1;if("pds"==wc)return xc>0?this.game.player==vc?(this.playerAssignHits(yc,vc,bc,_c,wc,xc,kc),0):(this.updateStatus(this.returnFaction(vc)+" assigning hits to units ... "),0):1;if("anti_fighter_barrage"==bc){for(var Ec=0,Ac=this.returnSectorAndPlanets(_c),Pc=0;Pc<Ac.s.units[vc-1].length;Pc++)"fighter"===Ac.s.units[vc-1][Pc].type&&Ec++;return xc>Ec&&(xc=Ec),xc>0?this.game.player==vc?(this.playerAssignHits(yc,vc,bc,_c,wc,xc,kc),0):(this.updateStatus(this.returnFaction(vc)+" assigning hits to units ... "),0):1}if("space"==bc)return xc>0?this.game.player==vc?(this.playerAssignHits(yc,vc,bc,_c,wc,xc,kc),0):(this.updateStatus(this.returnFaction(vc)+" assigning hits to units ... "),0):1;if("ground"==bc&&xc>0){this.assignHitsToGroundForces(yc,vc,_c,wc,xc),this.eliminateDestroyedUnitsInSector(vc,_c),this.eliminateDestroyedUnitsInSector(yc,_c),this.updateSectorGraphics(_c);var Cc=this.returnNumberOfGroundForcesOnPlanet(yc,_c,wc),Dc=this.returnNumberOfGroundForcesOnPlanet(vc,_c,wc);if(Cc>=0&&Cc>Dc&&Dc<=0){if(-1!=vc)if(1==this.game.players_info[yc-1].temporary_infiltrate_infrastructure_on_invasion||1==this.game.players_info[yc-1].temporary_infiltrate_infrastructure_on_invasion){for(var Tc=0,Oc=0;Oc<Sc.p[wc].units[vc-1].length;Oc++)"pds"===Sc.p[wc].units[vc-1][Oc].type&&(this.addPlanetaryUnit(yc,_c,wc,"pds"),Tc=1),"spacedock"===Sc.p[wc].units[vc-1][Oc].type&&(this.addPlanetaryUnit(yc,_c,wc,"spacedock"),Tc=1);Sc.p[wc].units[vc-1]=[],1==Tc&&(this.game.players_info[yc-1].temporary_infiltrate_infrastructure_on_invasion=0)}else Sc.p[wc].units[vc-1]=[];if(Sc.p[wc].owner==yc){var Mc=t.returnNumberOfGroundForcesOnPlanet(yc,_c,wc);this.updateLog(Sc.p[wc].name+" defended by "+this.returnFactionNickname(yc)+" ("+Mc+" infantry)")}}return 1}}if("gain_planet"===a[0]){var Ic=parseInt(a[1]),Rc=a[2],Fc=parseInt(a[3]),Bc=this.returnSectorAndPlanets(Rc);this.game.queue.splice(n,1),Bc.p[Fc].owner>-1&&(this.game.players_info[Bc.p[Fc].owner].lost_planet_this_round=Ic),this.updatePlanetOwner(Rc,Fc,Ic)}if("destroy_units"===a[0]){var jc=parseInt(a[1]),Nc=parseInt(a[2]),qc=a[3],Lc=0;if(parseInt(a[4])&&(Lc=1),qc.indexOf("_")>0){var Uc=this.returnSectorAndPlanets(qc);qc=Uc.s.sector}return this.game.queue.splice(n,1),1==Nc?this.updateStatus(this.returnFaction(jc)+" is destroying "+Nc+" unit"):this.updateStatus(this.returnFaction(jc)+" is destroying "+Nc+" units"),this.game.player==jc&&this.playerDestroyUnits(jc,Nc,qc,Lc),0}if("destroy_ships"===a[0]){console.log(JSON.stringify(a));var zc=parseInt(a[1]),Hc=parseInt(a[2]),$c=a[3],Gc=0;if(parseInt(a[4])&&(Gc=1),null==$c&&($c=this.game.state.activated_sector),console.log("in sector: "+$c),$c.indexOf("_")>0){var Kc=this.returnSectorAndPlanets($c);$c=Kc.s.sector}return this.game.queue.splice(n,1),1==Hc?this.updateStatus(this.returnFaction(zc)+" is destroying "+Hc+" ship"):this.updateStatus(this.returnFaction(zc)+" is destroying "+Hc+" ships"),this.game.player==zc&&this.playerDestroyShips(zc,Hc,$c,Gc),0}if("pds_fire"===a[0]){var Vc=parseInt(a[1]),Wc=parseInt(a[2]),Yc=a[3];if(this.game.queue.splice(n,1),1==this.doesPlayerHavePDSUnitsWithinRange(Wc,Vc,Yc)){for(var Jc=this.returnPDSWithinRangeOfSector(Wc,Vc,Yc),Qc=0,Xc=[],Zc=[],el=[],tl=0,rl=this.returnEventObjects(),nl=[],al=[],il=[],ol=0;ol<Jc.length;ol++)Jc[ol].owner==Vc&&(Qc++,Xc.push(Jc[ol].combat),el.push(Jc[ol].unit));for(var sl=0,cl=10,ll=0;ll<Jc.length;ll++)Jc[ll].combat<cl&&(sl=ll,cl=Jc[ll].combat);console.log("DO WE HAVE BONUS SHOTS? "),console.log("attacker: "+Wc),console.log("player: "+Vc);for(var ul=0;ul<this.game.players_info[Vc-1].pds_combat_roll_bonus_shots;ul++){console.log("bonus: "+(ul+1));var dl={name:"Bonus"};dl.unit=JSON.parse(JSON.stringify(Jc[sl].unit)),dl.unit.name="Bonus",dl.range=Jc[sl].range,dl.combat=Jc[sl].combat,dl.owner=Jc[sl].owner,dl.sector=Jc[sl].sector,Qc++,Xc.push(dl.combat),el.push(dl.unit)}this.updateLog(this.returnFactionNickname(Vc)+" has "+Qc+" PDS shots");for(var hl=0;hl<Qc;hl++){var pl=this.rollDice(10);for(var fl in nl.push(pl),rl)pl=rl[fl].modifyCombatRoll(this,Vc,Wc,Vc,"pds",pl),t.game.players_info[Wc-1].target_units=rl[fl].modifyTargets(this,Wc,Vc,t.game.player,"pds",t.game.players_info[Wc-1].target_units);pl+=this.game.players_info[Vc-1].pds_combat_roll_modifier,pl+=this.game.players_info[Vc-1].temporary_pds_combat_roll_modifier,al.push(pl),il.push(0),pl>=Xc[hl]?(tl++,Zc.push(1)):Zc.push(0)}if(tl<Qc){var ml=Qc-tl,gl=this.game.players_info[Vc-1].combat_dice_reroll+this.game.players_info[Vc-1].pds_combat_dice_reroll;for(var yl in rl)gl=rl[yl].modifyCombatRerolls(this,Vc,Wc,Vc,"pds",gl),t.game.players_info[Vc-1].target_units=rl[yl].modifyTargets(this,Wc,Vc,t.game.player,"pds",t.game.players_info[Vc-1].target_units);var vl=gl;ml<gl&&(vl=ml);for(var bl=0;bl<vl;bl++){for(var _l=11,wl=11,xl=0;xl<hits_to_misses.length;xl++)Xc[xl]<_l&&0==Zc[xl]&&(wl=xl,_l=Xc[xl]);var kl=this.rollDice(10);for(var Sl in il[wl]=1,nl[wl]=kl,rl)kl=rl[Sl].modifyCombatRerolls(this,Vc,Wc,Vc,"pds",kl),t.game.players_info[Vc-1].target_units=rl[Sl].modifyTargets(this,Wc,Vc,t.game.player,"pds",t.game.players_info[Vc-1].target_units);kl+=this.game.players_info[Vc-1].pds_combat_roll_modifier,kl+=this.game.players_info[Vc-1].temporary_pds_combat_roll_modifier,al[wl]=kl,kl>=Xc[wl]?(tl++,Zc[wl]=1):Zc[wl]=-1}}this.game.queue.push("assign_hits\t"+Vc+"\t"+Wc+"\tspace\t"+Yc+"\tpds\t"+tl+"\tpds");var El={};El.attacker=Vc,El.hits_or_misses=Zc,El.hits_or_misses=Zc,El.units_firing=el,El.hits_on=Xc,El.unmodified_roll=nl,El.modified_roll=al,El.reroll=il,this.updateCombatLog(El),1==tl?this.updateLog(this.returnFactionNickname(Wc)+" takes "+tl+" hit"):this.updateLog(this.returnFactionNickname(Wc)+" takes "+tl+" hits")}return this.updateSectorGraphics(Yc),1}if("bombard"===a[0]){var Al=this,Pl=parseInt(a[1]),Cl=a[2],Dl=a[3],Tl=this.returnEventObjects();if(this.game.queue.splice(n,1),1==this.doesPlayerHaveShipsInSector(Pl,Cl)){for(var Ol=this.returnSectorAndPlanets(Cl),Ml=Ol.p[Dl].owner,Il=0,Rl=0,Fl=[],Bl=[],jl=0,Nl=0;Nl<Ol.p[Dl].units[Pl-1].length;Nl++)if(Ol.p[Dl].units[Pl-1][Nl].bombardment_rolls>0)for(var ql=0;ql<Ol.p[Dl].units[Pl-1][Nl].bombardment_rolls;ql++){var Ll=this.rollDice(10);for(z_index in Tl)Ll=Tl[z_index].modifyCombatRoll(Al,Pl,Ol.p[Dl].owner,this.game.player,"bombardment",Ll);Ll+=this.game.players_info[Pl-1].bombardment_roll_modifier,Ll+=this.game.players_info[Pl-1].temporary_bombardment_roll_modifier,Ll+=this.game.players_info[Pl-1].combat_roll_modifier,(Ll+=Ol.s.units[Pl-1][Nl].temporary_combat_modifier)>=Ol.p[Dl].units[Pl-1][Nl].bombardment_combat?(Il++,Fl.push(1),Bl.push(Ol.p[Dl].units[Pl-1][Nl].bombardment_combat)):(Fl.push(0),Bl.push(Ol.p[Dl].units[Pl-1][Nl].bombardment_combat))}for(var Ul=10,zl=0;zl<Bl.length;zl++)Bl[zl]<Ul&&(Ul=Bl[zl]);jl+=this.game.players_info[Pl-1].bombardment_combat_roll_bonus_shots;for(var Hl=Fl.length;Hl<Fl.length+jl;Hl++){var $l=this.rollDice(10);for(z_index in Tl)$l=Tl[z_index].modifyCombatRoll(Al,Pl,Ol.p[Dl].owner,this.game.player,"bombardment",$l);$l+=this.game.players_info[Pl-1].bombardment_roll_modifier,$l+=this.game.players_info[Pl-1].temporary_bombardment_roll_modifier,$l+=this.game.players_info[Pl-1].combat_roll_modifier,($l+=Ol.s.units[Pl-1][Hl].temporary_combat_modifier)>=Ul?(Il++,Fl.push(1),Bl.push(Ol.p[Dl].units[Pl-1][Hl].bombardment_combat)):(Fl.push(0),Bl.push(Ul))}if(Il<Rl){var Gl=Il-total_hits,Kl=this.game.players_info[Pl-1].combat_dice_reroll+this.game.players_info[Pl-1].bombardment_combat_dice_reroll;for(var Vl in Tl)Kl=Tl[Vl].modifyCombatRerolls(this,Pl,Ml,player,"bombardment",Kl);var Wl=Kl;Gl<Kl&&(Wl=Gl);for(var Yl=0;Yl<Wl;Yl++){for(var Jl=11,Ql=11,Xl=0;Xl<hits_to_misses.length;Xl++)Bl[Xl]<Jl&&0==Fl[Xl]&&(Ql=Xl,Jl=Bl[Xl]);var Zl=this.rollDice(10);for(var eu in Tl)Zl=Tl[eu].modifyCombatRerolls(this,player,Pl,player,"space",Zl),Al.game.players_info[Ml-1].target_units=Tl[eu].modifyTargets(this,Pl,Ml,Al.game.player,"space",Al.game.players_info[Ml-1].target_units);for(z_index in Tl)Zl=Tl[z_index].modifyCombatRoll(Al,Pl,Ol.p[Dl].owner,this.game.player,"bombardment",Zl);Zl+=this.game.players_info[Pl-1].bombardment_roll_modifier,Zl+=this.game.players_info[Pl-1].temporary_bombardment_roll_modifier,Zl+=this.game.players_info[Pl-1].combat_roll_modifier,(Zl+=Ol.s.units[Pl-1][Ql].temporary_combat_modifier)>=Bl[Ql]?(Il++,Fl[Ql]=1):Fl[Ql]=-1}}1==Il?this.updateLog("Bombardment produces "+Il+" hit"):this.updateLog("Bombardment produces "+Il+" hits"),this.game.queue.push("assign_hits\t"+Pl+"\t"+Ol.p[Dl].owner+"\tground\t"+Cl+"\t"+Dl+"\t"+Il+"\tbombardment")}return 1}if("ships_fire"===a[0]){var tu=this.game.queue.length-2;if(tu>=0&&"space_combat_player_menu"===this.game.queue[tu].split("\t")[0]){var ru=this.game.queue[tu],nu=this.game.queue[tu+1];return this.game.queue[tu]=nu,this.game.queue[tu+1]=ru,1}var au=t.game.player,iu=parseInt(a[1]),ou=parseInt(a[2]),su=a[3],cu=this.returnSectorAndPlanets(su),lu=this.returnEventObjects();if(this.game.queue.splice(n,1),1==this.doesPlayerHaveShipsInSector(iu,su)){for(var uu=0,du=0,hu=[],pu=[],fu=[],mu=[],gu=[],yu=[],vu=0;vu<cu.s.units[iu-1].length;vu++)for(var bu=0;bu<cu.s.units[iu-1][vu].shots;bu++)if(cu.s.units[iu-1][vu].strength>0){var _u=this.rollDice(10);for(var wu in mu.push(_u),lu)_u=lu[wu].modifyCombatRoll(this,iu,ou,iu,"space",_u),du=lu[wu].modifyUnitHits(this,iu,ou,iu,"space",cu.s.units[iu-1][vu],_u,du),t.game.players_info[ou-1].target_units=lu[wu].modifyTargets(this,iu,ou,t.game.player,"space",t.game.players_info[ou-1].target_units);_u+=this.game.players_info[iu-1].space_combat_roll_modifier,_u+=this.game.players_info[iu-1].temporary_space_combat_roll_modifier,_u+=cu.s.units[iu-1][vu].temporary_combat_modifier,gu.push(_u),yu.push(0),_u>=cu.s.units[iu-1][vu].combat?(du++,uu++,pu.push(cu.s.units[iu-1][vu].combat),hu.push(1),fu.push(cu.s.units[iu-1][vu])):(uu++,hu.push(0),pu.push(cu.s.units[iu-1][vu].combat),fu.push(cu.s.units[iu-1][vu]))}if(du<uu){var xu=uu-du,ku=this.game.players_info[iu-1].combat_dice_reroll+this.game.players_info[iu-1].space_combat_dice_reroll;for(var Su in lu)ku=lu[Su].modifyCombatRerolls(this,au,iu,au,"space",ku),t.game.players_info[ou-1].target_units=lu[Su].modifyTargets(this,iu,ou,t.game.player,"space",t.game.players_info[ou-1].target_units);var Eu=ku;xu<ku&&(Eu=xu);for(var Au=0;Au<Eu;Au++){for(var Pu=11,Cu=11,Du=null,Tu=0;Tu<hits_to_misses.length;Tu++)pu[Tu]<Pu&&0==hu[Tu]&&(Cu=Tu,Pu=pu[Tu],Du=fu[Tu]);var Ou=this.rollDice(10);for(var Mu in mu[Cu]=Ou,lu)Ou=lu[Mu].modifyCombatRerolls(this,au,iu,au,"space",Ou),du=lu[Mu].modifyUnitHits(this,iu,ou,iu,"space",Du,Ou,du),t.game.players_info[ou-1].target_units=lu[Mu].modifyTargets(this,iu,ou,t.game.player,"space",t.game.players_info[ou-1].target_units);Ou+=this.game.players_info[au-1].space_combat_roll_modifier,Ou+=this.game.players_info[au-1].temporary_space_combat_roll_modifier,Ou+=cu.s.units[iu-1][Cu].temporary_combat_modifier,gu[Cu]=Ou,yu[Cu]=1,Ou>=pu[Cu]?(du++,hu[Cu]=1):hu[Cu]=-1}}var Iu={};Iu.attacker=iu,Iu.hits_or_misses=hu,Iu.units_firing=fu,Iu.hits_on=pu,Iu.unmodified_roll=mu,Iu.modified_roll=gu,Iu.reroll=yu,this.updateCombatLog(Iu),1==du?this.updateLog(this.returnFactionNickname(iu)+":  "+du+" hit"):this.updateLog(this.returnFactionNickname(iu)+":  "+du+" hits"),this.game.queue.push("assign_hits\t"+iu+"\t"+ou+"\tspace\t"+su+"\tspace\t"+du+"\tspace_combat")}return 1}if("infantry_fire"===a[0]){var Ru=this.game.queue.length-2;if(Ru>=0&&"ground_combat_player_menu"===this.game.queue[Ru].split("\t")[0]){var Fu=this.game.queue[Ru],Bu=this.game.queue[Ru+1];return this.game.queue[Ru]=Bu,this.game.queue[Ru+1]=Fu,1}var ju=t.game.player,Nu=parseInt(a[1]),qu=parseInt(a[2]),Lu=a[3],Uu=a[4],zu=this.returnSectorAndPlanets(Lu),Hu=this.returnEventObjects();if(this.game.queue.splice(n,1),1==this.doesPlayerHaveInfantryOnPlanet(Nu,Lu,Uu)){for(var $u=0,Gu=0,Ku=[],Vu=[],Wu=[],Yu=[],Ju=[],Qu=[],Xu=0;Xu<zu.p[Uu].units[Nu-1].length;Xu++)if("infantry"==zu.p[Uu].units[Nu-1][Xu].type&&0==zu.p[Uu].units[Nu-1][Xu].destroyed){Wu.push(zu.p[Uu].units[Nu-1][Xu]);var Zu=this.rollDice(10);for(var ed in Yu.push(Zu),Hu)Zu=Hu[ed].modifyCombatRoll(this,Nu,qu,Nu,"ground",Zu),t.game.players_info[qu-1].target_units=Hu[ed].modifyTargets(this,Nu,qu,t.game.player,"ground",t.game.players_info[qu-1].target_units);Zu+=this.game.players_info[Nu-1].ground_combat_roll_modifier,Zu+=this.game.players_info[Nu-1].temporary_ground_combat_roll_modifier,Zu+=zu.p[Uu].units[Nu-1][Xu].temporary_combat_modifier,Ju.push(Zu),Qu.push(0),Zu>=zu.p[Uu].units[Nu-1][Xu].combat?(Gu++,$u++,Ku.push(1),Vu.push(zu.p[Uu].units[Nu-1][Xu].combat)):($u++,Ku.push(0),Vu.push(zu.p[Uu].units[Nu-1][Xu].combat))}if(Gu<$u){var td=$u-Gu,rd=this.game.players_info[Nu-1].combat_dice_reroll+this.game.players_info[Nu-1].ground_combat_dice_reroll;for(var nd in Hu)rd=Hu[nd].modifyCombatRerolls(this,ju,Nu,ju,"ground",rd),t.game.players_info[qu-1].target_units=Hu[nd].modifyTargets(this,Nu,qu,t.game.player,"ground",t.game.players_info[qu-1].target_units);var ad=rd;td<rd&&(ad=td);for(var id=0;id<ad;id++){for(var od=11,sd=11,cd=0;cd<hits_to_misses.length;cd++)Vu[cd]<od&&0==Ku[cd]&&(sd=cd,od=Vu[cd]);var ld=this.rollDice(10);for(var ud in Yu[sd]=ld,Qu[sd]=1,Hu)ld=Hu[ud].modifyCombatRerolls(this,ju,Nu,ju,"ground",ld),t.game.players_info[qu-1].target_units=Hu[ud].modifyTargets(this,Nu,qu,t.game.player,"ground",t.game.players_info[qu-1].target_units);ld+=this.game.players_info[ju-1].ground_combat_roll_modifier,ld+=this.game.players_info[ju-1].temporary_ground_combat_roll_modifier,ld+=zu.p[Uu].units[Nu-1][sd].temporary_combat_modifier,Ju[sd]=ld,ld>=Vu[sd]?(Gu++,Ku[sd]=1):Ku[sd]=-1}}var dd={};dd.attacker=Nu,dd.hits_or_misses=Ku,dd.units_firing=Wu,dd.hits_on=Vu,dd.unmodified_roll=Yu,dd.modified_roll=Ju,dd.reroll=Qu,this.updateCombatLog(dd),1==Gu?this.updateLog(this.returnFactionNickname(Nu)+":  "+Gu+" hit"):this.updateLog(this.returnFactionNickname(Nu)+":  "+Gu+" hits"),this.game.queue.push("assign_hits\t"+Nu+"\t"+qu+"\tground\t"+Lu+"\t"+Uu+"\t"+Gu+"\tground_combat")}return 1}if("space_invasion"===a[0]){var hd=a[1],pd=a[2];return this.game.queue.splice(n,1),this.game.state.space_combat_sector=pd,this.unloadStoredShipsIntoSector(hd,pd),this.game.state.space_combat_round=0,this.game.state.space_combat_ships_destroyed_attacker=0,this.game.state.space_combat_ships_destroyed_defender=0,hd==this.game.player&&(this.addMove("continue\t"+hd+"\t"+pd),this.addMove("space_combat_end\t"+hd+"\t"+pd),this.addMove("space_combat_post\t"+hd+"\t"+pd),this.addMove("space_combat\t"+hd+"\t"+pd),this.addMove("space_combat_start\t"+hd+"\t"+pd),this.addMove("anti_fighter_barrage\t"+hd+"\t"+pd),this.addMove("pds_space_defense_post\t"+hd+"\t"+pd),this.addMove("pds_space_defense\t"+hd+"\t"+pd),this.endTurn()),0}if("space_combat_start"===a[0])return a[1],a[2],a[3],this.game.queue.splice(n,1),this.resetTargetUnits(),this.game.state.space_combat_attacker=-1,this.game.state.space_combat_defender=-1,this.game.state.space_combat_retreats=[],1;if("space_combat_end"===a[0]){var fd=a[1],md=a[2];if(a[3],1==this.hasUnresolvedSpaceCombat(fd,md)){if(this.game.player==fd){if(this.addMove("space_combat_post\t"+fd+"\t"+md),this.addMove("space_combat\t"+fd+"\t"+md),-1!=this.game.state.space_combat_defender){var gd=this.returnEventObjects();for(var yd in gd)gd[yd].spaceCombatRoundEnd(this,this.game.state.space_combat_attacker,this.game.state.space_combat_defender,md)}return this.endTurn(),0}return 0}if(1==this.game_space_combat_defender?this.game.queue.push("space_combat_over_player_menu\t"+this.game.state.space_combat_defender+"\t"+md):this.game.queue.push("space_combat_over_player_menu\t"+this.game.state.space_combat_attacker+"\t"+md),this.game.queue.splice(n,1),this.game.player==fd){if(-1!=this.game.state.space_combat_defender){var vd=this.returnEventObjects();for(var bd in vd)vd[bd].spaceCombatRoundEnd(this,this.game.state.space_combat_attacker,this.game.state.space_combat_defender,md)}this.endTurn()}return 0}if("space_combat"===a[0]){a[1];var _d=a[2],wd=this.returnEventObjects();this.game.queue.splice(n,1);for(var xd=this.returnSpeakerOrder(),kd=0;kd<xd.length;kd++)for(var Sd=0;Sd<wd.length;Sd++)1==wd[Sd].spaceCombatTriggers(this,xd[kd],_d)&&this.game.queue.push("space_combat_event\t"+xd[kd]+"\t"+_d+"\t"+Sd);return 1}if("space_combat_event"===a[0]){var Ed=this.returnEventObjects(),Ad=parseInt(a[1]),Pd=a[2],Cd=parseInt(a[3]);return this.game.queue.splice(n,1),Ed[Cd].spaceCombatEvent(this,Ad,Pd)}if("space_combat_post"===a[0]){var Dd=parseInt(a[1]),Td=a[2];this.updateSectorGraphics(Td),this.game.queue.splice(n,1),this.game.state.space_combat_round++,this.game.state.assign_hits_to_cancel=0;for(var Od=0;Od<this.game.players_info.length;Od++)this.game.players_info[Od].units_i_destroyed_last_combat_round=this.game.players_info[Od].units_i_destroyed_last_combat_round,this.game.players_info[Od].units_i_destroyed_this_combat_round=[],this.game.players_info[Od].my_units_destroyed_last_combat_round=this.game.players_info[Od].my_units_destroyed_last_combat_round,this.game.players_info[Od].my_units_destroyed_this_combat_round=[];var Md=this.returnDefender(Dd,Td);return-1==Md||(this.resetSpaceUnitTemporaryModifiers(Td),this.game.state.space_combat_attacker=Dd,this.game.state.space_combat_defender=Md,1!=this.doesPlayerHaveShipsInSector(Dd,Td)||1!=this.doesPlayerHaveShipsInSector(Md,Td)||(this.updateLog("Space Combat: round "+this.game.state.space_combat_round),this.game.queue.push("space_combat_player_menu\t"+Md+"\t"+Dd+"\t"+Td),this.game.queue.push("space_combat_player_menu\t"+Dd+"\t"+Md+"\t"+Td))),1}if("anti_fighter_barrage"===a[0]){for(var Id=parseInt(a[1]),Rd=a[2],Fd=this.returnSectorAndPlanets(Rd),Bd=this.returnEventObjects(),jd=Id,Nd=-1,qd=0;qd<Fd.s.units.length;qd++)qd+1!=Id&&Fd.s.units[qd].length>0&&(Nd=qd+1,qd=Fd.s.units.length+1);if(this.updateSectorGraphics(Rd),this.game.queue.splice(n,1),-1!=Nd){this.game.queue.push("anti_fighter_barrage_post\t"+Id+"\t"+Nd+"\t"+jd+"\t"+Rd);for(var Ld=this.returnSpeakerOrder(),Ud=0;Ud<Ld.length;Ud++)for(var zd=0;zd<Bd.length;zd++)1==Bd[zd].antiFighterBarrageEventTriggers(this,Ld[Ud],Nd,jd,Rd)&&this.game.queue.push("anti_fighter_barrage_event\t"+Ld[Ud]+"\t"+Nd+"\t"+jd+"\t"+Rd+"\t"+zd);this.game.queue.push("anti_fighter_barrage_post\t"+Id+"\t"+jd+"\t"+Nd+"\t"+Rd);for(var Hd=0;Hd<Ld.length;Hd++)for(var $d=0;$d<Bd.length;$d++)1==Bd[$d].antiFighterBarrageEventTriggers(this,Ld[Hd],jd,Nd,Rd)&&this.game.queue.push("anti_fighter_barrage_event\t"+Ld[Hd]+"\t"+jd+"\t"+Nd+"\t"+Rd+"\t"+$d)}return 1}if("anti_fighter_barrage_event"===a[0]){var Gd=parseInt(a[1]),Kd=a[2],Vd=a[3],Wd=a[4],Yd=a[5],Jd=this.returnEventObjects();return this.game.queue.splice(n,1),Jd[Yd].antiFighterBarrageEvent(this,Gd,Kd,Vd,Wd)}if("anti_fighter_barrage_post"===a[0]){var Qd=parseInt(a[1]),Xd=parseInt(a[2]),Zd=parseInt(a[3]),eh=a[4],th=this.returnSectorAndPlanets(eh);if(eh=th.s.sector,1==this.doesPlayerHaveShipsInSector(Xd,eh)&&1==this.doesPlayerHaveAntiFighterBarrageInSector(Xd,eh)){this.updateLog(this.returnFactionNickname(Xd)+" anti-fighter barrage...");for(var rh=0,nh=0,ah=[],ih=[],oh=[],sh=[],ch=[],lh=[],uh=0;uh<th.s.units[Xd-1].length;uh++)if(th.s.units[Xd-1][uh].strength>0&&th.s.units[Xd-1][uh].anti_fighter_barrage>0){for(var dh=0;dh<th.s.units[Xd-1][uh].anti_fighter_barrage;dh++){var hh=this.rollDice(10);for(var ph in sh.push(hh),r)hh=r[ph].modifyCombatRoll(this,Xd,Zd,Xd,"anti_fighter_barrage",hh),nh=r[ph].modifyUnitHits(this,Xd,Zd,Xd,"anti_fighter_barrage",th.s.units[Xd-1][uh],hh,nh),t.game.players_info[Zd-1].target_units=r[ph].modifyTargets(this,Xd,Zd,t.game.player,"anti_fighter_barrage",t.game.players_info[Zd-1].target_units);hh+=this.game.players_info[Xd-1].space_combat_roll_modifier,hh+=this.game.players_info[Xd-1].temporary_space_combat_roll_modifier,hh+=th.s.units[Xd-1][uh].temporary_combat_modifier,ch.push(hh),lh.push(0),hh>=th.s.units[Xd-1][uh].anti_fighter_barrage_combat?(nh++,rh++,ih.push(th.s.units[Xd-1][uh].anti_fighter_barrage_combat),ah.push(1),oh.push(th.s.units[Xd-1][uh])):(rh++,ah.push(0),ih.push(th.s.units[Xd-1][uh].anti_fighter_barrage_combat),oh.push(th.s.units[Xd-1][uh]))}if(nh<rh){var fh=rh-nh,mh=this.game.players_info[Xd-1].combat_dice_reroll+this.game.players_info[Xd-1].space_combat_dice_reroll;for(var gh in r)mh=r[gh].modifyCombatRerolls(this,Qd,Xd,Qd,"anti_fighter_barrage",mh),t.game.players_info[Zd-1].target_units=r[gh].modifyTargets(this,Xd,Zd,t.game.player,"anti_fighter_barrage",t.game.players_info[Zd-1].target_units);var yh=mh;fh<mh&&(yh=fh);for(var vh=0;vh<yh;vh++){for(var bh=11,_h=11,wh=null,xh=0;xh<hits_to_misses.length;xh++)ih[xh]<bh&&0==ah[xh]&&(_h=xh,bh=ih[xh],wh=oh[xh]);var kh=this.rollDice(10);for(var Sh in sh[_h]=kh,r)kh=r[Sh].modifyCombatRerolls(this,Qd,Xd,Qd,"anti_fighter_barrage",kh),nh=r[Sh].modifyUnitHits(this,Xd,Zd,Xd,"space",wh,kh,nh),t.game.players_info[Zd-1].target_units=r[Sh].modifyTargets(this,Xd,Zd,t.game.player,"space",t.game.players_info[Zd-1].target_units);kh+=this.game.players_info[Qd-1].space_combat_roll_modifier,kh+=this.game.players_info[Qd-1].temporary_space_combat_roll_modifier,kh+=th.s.units[Xd-1][_h].temporary_combat_modifier,ch[_h]=kh,lh[_h]=1,kh>=ih[_h]?(nh++,ah[_h]=1):ah[_h]=-1}}}var Eh={};Eh.attacker=Xd,Eh.hits_or_misses=ah,Eh.units_firing=oh,Eh.hits_on=ih,Eh.unmodified_roll=sh,Eh.modified_roll=ch,Eh.reroll=lh,this.updateCombatLog(Eh),this.game.queue.push("assign_hits\t"+Xd+"\t"+Zd+"\tanti_fighter_barrage\t"+eh+"\tanti_fighter_barrage\t"+nh+"\tanti_fighter_barrage"),1==nh?(this.updateLog(this.returnFactionNickname(Xd)+":  "+nh+" hit"),this.game.queue.push("ACKNOWLEDGE\t"+t.returnFaction(Xd)+" launches anti-fighter-barrage ("+nh+" hit)")):(this.updateLog(this.returnFactionNickname(Xd)+":  "+nh+" hits"),this.game.queue.push("ACKNOWLEDGE\t"+t.returnFaction(Xd)+" launches anti-fighter-barrage ("+nh+" hits)"))}return this.game.queue.splice(n,1),1}if("space_combat_over_player_menu"===a[0]){var Ah=parseInt(a[1]),Ph=a[2];return this.game.queue.splice(n,1),this.game.player==Ah&&this.playerPlaySpaceCombatOver(Ah,Ph),1}if("space_combat_player_menu"===a[0]){var Ch=parseInt(a[1]),Dh=parseInt(a[2]),Th=a[3];return this.game.queue.splice(n,1),this.updateSectorGraphics(Th),this.game.player==Ch&&this.playerPlaySpaceCombat(Ch,Dh,Th),0}if("ground_combat_over_player_menu"===a[0]){var Oh=parseInt(a[1]),Mh=a[2],Ih=parseInt(a[3]);return this.game.queue.splice(n,1),this.game.player==Oh&&this.playerPlayGroundCombatOver(Oh,Mh,Ih),1}if("ground_combat_player_menu"===a[0]){var Rh=parseInt(a[1]),Fh=parseInt(a[2]),Bh=a[3],jh=a[4];return this.game.queue.splice(n,1),this.updateSectorGraphics(Bh),this.game.player==Rh?(this.playerPlayGroundCombat(Rh,Fh,Bh,jh),0):0}if("bombardment"===a[0]){var Nh=a[1],qh=a[2],Lh=a[3],Uh=this.returnEventObjects();this.game.queue.splice(n,1);for(var zh=this.returnSpeakerOrder(),Hh=0;Hh<zh.length;Hh++)for(var $h=0;$h<Uh.length;$h++)1==Uh[$h].bombardmentTriggers(this,zh[Hh],Nh,qh,Lh)&&this.game.queue.push("bombardment_event\t"+zh[Hh]+"\t"+Nh+"\t"+qh+"\t"+Lh+"\t"+$h);return 1}if("bombardment_event"===a[0]){var Gh=this.returnEventObjects(),Kh=parseInt(a[1]),Vh=parseInt(a[2]),Wh=a[3],Yh=a[4],Jh=parseInt(a[5]);return this.game.queue.splice(n,1),Gh[Jh].bombardmentEvent(this,Kh,Vh,Wh,Yh)}if("bombardment_post"===a[0]){var Qh=parseInt(a[1]),Xh=a[2],Zh=a[3];this.updateSectorGraphics(Xh),this.game.queue.splice(n,1);var ep=this.returnSectorAndPlanets(Xh),tp=ep.p[Zh].owner;return-1==tp?1:this.doesSectorContainPlayerUnit(Qh,Xh,"dreadnaught")||this.doesSectorContainPlayerUnit(Qh,Xh,"warsun")?(this.game.player==Qh&&this.playerPlayBombardment(Qh,Xh,Zh),0):1}if("planetary_defense"===a[0]){var rp=a[1],np=a[2],ap=a[3],ip=this.returnEventObjects();this.game.queue.splice(n,1);for(var op=this.returnSpeakerOrder(),sp=0;sp<op.length;sp++)for(var cp=0;cp<ip.length;cp++)1==ip[cp].planetaryDefenseTriggers(this,rp,np,ap)&&this.game.queue.push("planetary_defense_event\t"+op[sp]+"\t"+np+"\t"+ap+"\t"+cp);return 1}if("planetary_defense_event"===a[0]){var lp=this.returnEventObjects(),up=parseInt(a[1]),dp=a[2],hp=a[3],pp=parseInt(a[4]);return this.game.queue.splice(n,1),lp[pp].planetaryDefenseEvent(this,up,dp,hp)}if("planetary_defense_post"===a[0]){parseInt(a[1]);var fp=a[2];return a[3],this.updateSectorGraphics(fp),this.game.queue.splice(n,1),1}if("ground_combat_start"===a[0]){a[1];var mp=a[2],gp=a[3];return this.game.queue.splice(n,1),this.game.state.ground_combat_round=0,this.game.state.ground_combat_sector=mp,this.game.state.ground_combat_planet_idx=gp,this.game.state.ground_combat_infantry_destroyed_attacker=0,this.game.state.ground_combat_infantry_destroyed_defender=0,this.game.state.ground_combat_attacker=-1,this.game.state.ground_combat_defender=-1,1}if("ground_combat_end"===a[0]){var yp=a[1],vp=a[2],bp=a[3],_p=this.returnSectorAndPlanets(vp);if(this.game.queue.splice(n,1),-1!=this.game.state.ground_combat_defender){var wp=this.returnEventObjects();for(var xp in wp)wp[xp].groundCombatRoundEnd(this,this.game.state.ground_combat_attacker,this.game.state.ground_combat_defender,vp,bp)}if(1==this.hasUnresolvedGroundCombat(yp,vp,bp))return this.game.player==yp?(this.addMove("ground_combat_end\t"+yp+"\t"+vp+"\t"+bp),this.addMove("ground_combat_post\t"+yp+"\t"+vp+"\t"+bp),this.addMove("ground_combat\t"+yp+"\t"+vp+"\t"+bp),this.endTurn(),0):0;1==this.game_ground_combat_defender?this.game.queue.push("ground_combat_over_player_menu\t"+this.game.state.ground_combat_defender+"\t"+vp+"\t"+bp):this.game.queue.push("ground_combat_over_player_menu\t"+this.game.state.ground_combat_attacker+"\t"+vp+"\t"+bp);var kp=t.returnNumberOfGroundForcesOnPlanet(yp,vp,bp),Sp=t.returnNumberOfGroundForcesOnPlanet(this.game.state.ground_combat_defender,vp,bp);if(kp>0){this.updateLog(_p.p[bp].name+" conquered by "+this.returnFactionNickname(yp)+" ("+kp+" infantry)");var Ep=yp,Ap=this.game.state.ground_combat_defender;if(1==this.game.players_info[yp-1].temporary_infiltrate_infrastructure_on_invasion||1==this.game.players_info[yp-1].temporary_infiltrate_infrastructure_on_invasion){for(var Pp=0,Cp=0;Cp<_p.p[bp].units[Ap-1].length;Cp++)"pds"===_p.p[bp].units[Ap-1][Cp].type&&(this.addPlanetaryUnit(Ep,vp,bp,"pds"),Pp=1),"spacedock"===_p.p[bp].units[Ap-1][Cp].type&&(this.addPlanetaryUnit(Ep,vp,bp,"spacedock"),Pp=1);_p.p[bp].units[Ap-1]=[],1==Pp&&(this.game.players_info[Ep-1].temporary_infiltrate_infrastructure_on_invasion=0)}else _p.p[bp].units[Ap-1]=[];Ap>0&&-1!=Ap&&(console.log("defender is: "+Ap),this.game.players_info[Ap-1].lost_planet_this_round=Ep),this.updatePlanetOwner(vp,bp,yp)}else this.updateLog(_p.p[bp].name+" defended by "+this.returnFactionNickname(this.game.state.ground_combat_defender)+" ("+Sp+" infantry)");return this.game.queue.splice(n,1),1}if("ground_combat"===a[0]){a[1];var Dp=a[2],Tp=a[3],Op=this.returnEventObjects();this.game.queue.splice(n,1);for(var Mp=this.returnSpeakerOrder(),Ip=0;Ip<Mp.length;Ip++)for(var Rp=0;Rp<Op.length;Rp++)1==Op[Rp].groundCombatTriggers(this,Mp[Ip],Dp,Tp)&&this.game.queue.push("ground_combat_event\t"+Mp[Ip]+"\t"+Dp+"\t"+Tp+"\t"+Rp);return 1}if("ground_combat_event"===a[0]){var Fp=this.returnEventObjects(),Bp=parseInt(a[1]),jp=a[2],Np=a[3],qp=parseInt(a[4]);return this.game.queue.splice(n,1),Fp[qp].groundCombatEvent(this,Bp,jp,Np)}if("ground_combat_post"===a[0]){var Lp=parseInt(a[1]),Up=a[2],zp=parseInt(a[3]),Hp=this.returnSectorAndPlanets(Up);this.game.queue.splice(n,1),this.game.state.assign_hits_to_cancel=0,this.game.state.ground_combat_round++;for(var $p=0;$p<this.game.players_info.length;$p++)this.game.players_info[$p].units_i_destroyed_last_combat_round=this.game.players_info[$p].units_i_destroyed_last_combat_round,this.game.players_info[$p].units_i_destroyed_this_combat_round=[],this.game.players_info[$p].my_units_destroyed_last_combat_round=this.game.players_info[$p].my_units_destroyed_last_combat_round,this.game.players_info[$p].my_units_destroyed_this_combat_round=[];var Gp=this.returnDefender(Lp,Up,zp);return-1==Gp?(Hp.p[zp].owner!=Lp&&(this.updateLog(this.returnFactionNickname(Lp)+" seizes "+Hp.p[zp].name),-1!=Hp.p[zp].owner&&(this.game.players_info[Hp.p[zp].owner-1].lost_planet_this_round=Lp),this.updatePlanetOwner(Up,zp,Lp)),1):(this.resetGroundUnitTemporaryModifiers(Up,zp),this.game.state.ground_combat_attacker=Lp,this.game.state.ground_combat_defender=Gp,1==this.hasUnresolvedGroundCombat(Lp,Up,zp)&&(this.updateLog("Round "+this.game.state.ground_combat_round+": "+this.returnPlayerInfantryOnPlanet(Lp,Hp.p[zp])+" "+this.returnFactionNickname(Lp)+" infantry vs. "+this.returnPlayerInfantryOnPlanet(Gp,Hp.p[zp])+" "+this.returnFactionNickname(Gp)+" infantry"),this.game.queue.push("ground_combat_player_menu\t"+Gp+"\t"+Lp+"\t"+Up+"\t"+zp),this.game.queue.push("ground_combat_player_menu\t"+Lp+"\t"+Gp+"\t"+Up+"\t"+zp)),1)}if("action_card"===a[0]){var Kp=parseInt(a[1]),Vp=a[2],Wp=this.returnEventObjects();"action"==this.action_cards[Vp].type&&(this.game.state.active_player_moved=1),this.updateLog(this.returnFactionNickname(Kp)+" plays "+this.action_cards[Vp].name+"<p></p><div style='width:80%;font-size:1.0em;margin-left:auto;margin-right:auto;margin-top:15px;margin-bottom:15px'>"+this.action_cards[Vp].text+"</div>");var Yp=this.returnActionCards();Yp[Vp],this.game.queue.splice(n,1);var Jp=this.returnSpeakerOrder();if(this.game.players_info[this.game.player-1].can_intervene_in_action_card=0,"simultaneous"===this.game.state.action_card_order){for(var Qp=0;Qp<Jp.length;Qp++)for(var Xp=0;Xp<Wp.length;Xp++)1==Wp[Xp].playActionCardTriggers(this,Jp[Qp],Kp,Vp)&&this.game.queue.push("action_card_event\t"+Jp[Qp]+"\t"+Kp+"\t"+Vp+"\t"+Xp);this.game.queue.push("simultaneous_action_card_player_menu\t"+Kp+"\t"+Vp),0!=Vp.indexOf("sabotage")&&this.game.queue.push("resetconfirmsneeded\t"+Jp.length)}else for(var Zp=0;Zp<Jp.length;Zp++){for(var ef=0;ef<Wp.length;ef++)1==Wp[ef].playActionCardTriggers(this,Jp[Zp],Kp,Vp)&&this.game.queue.push("action_card_event\t"+Jp[Zp]+"\t"+Kp+"\t"+Vp+"\t"+ef);Jp[Zp]!=Kp&&this.game.queue.push("action_card_player_menu\t"+Jp[Zp]+"\t"+Kp+"\t"+Vp)}return 1}if("simultaneous_action_card_player_menu"===a[0]){var tf=parseInt(a[1]),rf=a[2];return console.log("reached simultaneous_action_card_player_menu..."),console.log("AM I CONFIRMED: "+this.hasPlayerConfirmed(this.app.wallet.returnPublicKey())),this.game.player==tf?(this.updateStatus("Your opponents are being notified you have played "+this.action_cards[rf].name),this.hasPlayerConfirmed(this.app.wallet.returnPublicKey())?(rf.indexOf("sabotage"),t.addMove("resolve\tsimultaneous_action_card_player_menu\t1\t"+t.app.wallet.returnPublicKey()),t.addPublickeyConfirm(t.app.wallet.returnPublicKey(),1),t.endTurn()):(t.addMove("resolve\tsimultaneous_action_card_player_menu\t1\t"+t.app.wallet.returnPublicKey()),t.addPublickeyConfirm(t.app.wallet.returnPublicKey(),1),t.endTurn()),0):(this.hasPlayerConfirmed(this.app.wallet.returnPublicKey())&&0!=rf.indexOf("sabotage")?this.updateStatus("Waiting for players to respond to "+this.action_cards[rf].name):this.playerPlayActionCardMenu(tf,rf),0)}if("action_card_player_menu"===a[0]){var nf=parseInt(a[1]),af=parseInt(a[2]),of=a[3];return this.game.queue.splice(n,1),nf==af?(this.updateStatus("Your opponents are being notified you have played "+this.action_cards[of].name),0):(this.game.player==nf?this.playerPlayActionCardMenu(af,of):this.updateStatus(this.returnFaction(nf)+" is responding to action card "+this.action_cards[of].name),0)}if("action_card_event"===a[0]){var sf=this.returnEventObjects(),cf=parseInt(a[1]),lf=a[2],uf=a[3],df=parseInt(a[4]);return this.game.queue.splice(n,1),sf[df].playActionCardEvent(this,cf,lf,uf)}if("action_card_post"===a[0]){var hf=parseInt(a[1]),pf=a[2],ff=this.returnActionCards(),mf=ff[pf];return this.game.queue.splice(n,1),console.log(pf+" -- "+this.game.player+" -- "+hf),mf.playActionCard(this,this.game.player,hf,pf)}for(var gf in r)if(!r[gf].handleGameLoop(t,n,a))return 0;if(0==o)return 0}return 1}},{key:"convertSectorToSectorname",value:function(e){for(var t in this.game.board)if(this.game.board[t].tile==e)return t;return""}},{key:"convertPlanetIdentifierToSector",value:function(e){for(var t in this.game.board)for(var r=this.game.board[t].tile,n=this.game.sectors[r],a=0;a<n.planets.length;a++)if(n.planets[a]==e)return r;return null}},{key:"returnPlanetIdxOfPlanetIdentifierInSector",value:function(e,t){for(var r=this.returnSectorAndPlanets(t),n=0;n<r.p.length;n++)for(var a in this.game.planets)if(a==e&&r.p[n]==this.game.planets[a])return n;return-1}},{key:"returnPlayerTurnTracker",value:function(){var e={activate_system:0,production:0,invasion:0,action_card:0,trade:0,action:0};return e}},{key:"addMove",value:function(e){this.moves.push(e)}},{key:"prependMove",value:function(e){this.moves.unshift(e)}},{key:"endTurn",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.rmoves.length-1;t>=0;t--)this.moves.push(this.rmoves[t]);0!=e&&(extra.target=e),this.game.turn=this.moves,this.moves=[],this.rmoves=[],this.sendMessage("game",{}),this.updateStatus("Waiting for information from peers....")}},{key:"endGame",value:function(e,t){this.game.over=1,1==this.active_browser&&salert("The Game is Over!")}},{key:"resetConfirmsNeeded",value:function(e){if(this.game.confirms_needed=e,this.game.confirms_received=0,this.game.confirms_players=[],this.game.tmp_confirms_received=0,this.game.tmp_confirms_players=[],this.game.confirms_needed==this.game.players_info.length)for(var t=1;t<=this.game.players_info.length;t++)this.setPlayerActive(t)}},{key:"returnGameOptionsHTML",value:function(){var e=this.maxPlayers;try{e=document.querySelector(".game-wizard-players-select").value}catch(e){}for(var t='\n\n      <div style="padding:40px;width:100vw;height:100vh;overflow-y:scroll;display:grid;grid-template-columns: 200px auto">\n\n        <div style="top:0;left:0;margin-right: 20px;">\n\n            <label for="game_length ">Game Length:</label>\n            <select name="game_length">\n              <option value="4">4 VP</option>\n              <option value="6">6 VP</option>\n              <option value="8" selected>8 VP</option>\n              <option value="10">10 VP</option>\n              <option value="12">12 VP</option>\n              <option value="14">14 VP</option>\n            </select>\n\n            <div id="game-wizard-advanced-return-btn" class="game-wizard-advanced-return-btn button">accept</div>\n\n        </div>\n        <div>\n\n    ',r=1;r<=e;r++)t+='\n            <label for="player'.concat(r,'" class="game-players-options game-players-options-').concat(r,'p">Player ').concat(r,':</label>\n            <select name="player').concat(r,'" id="game-players-select-').concat(r,'p" class="game-players-options game-players-options-').concat(r,'p">\n              <option value="random" default>random</option>\n              <option value="faction1" default>Sol Federation</option>\n              <option value="faction2">Universities of Jol Nar</option>\n              <option value="faction3">XXcha Kingdom</option>\n              <option value="faction4">Sardakk N\'Orr</option>\n              <option value="faction5">Brotherhood of Yin</option>\n              <option value="faction6">Yssaril Tribes</option>\n              <option value="faction7">Embers of Muaat</option>\n            </select>\n      ');return t+="\n        </div>\n      </div>\n    "}},{key:"returnPlayers",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=[],r=JSON.parse(JSON.stringify(this.returnFactions())),n=0;n<e;n++){0==n&&(col="color1"),1==n&&(col="color2"),2==n&&(col="color3"),3==n&&(col="color4"),4==n&&(col="color5"),5==n&&(col="color6");var a=Object.keys(r),i=a[this.rollDice(a.length)-1];0==n&&null!=this.game.options.player1&&"random"!=this.game.options.player1&&(i=this.game.options.player1),1==n&&null!=this.game.options.player2&&"random"!=this.game.options.player2&&(i=this.game.options.player2),2==n&&null!=this.game.options.player3&&"random"!=this.game.options.player3&&(i=this.game.options.player3),3==n&&null!=this.game.options.player4&&"random"!=this.game.options.player4&&(i=this.game.options.player4),4==n&&null!=this.game.options.player5&&"random"!=this.game.options.player5&&(i=this.game.options.player5),5==n&&null!=this.game.options.player6&&"random"!=this.game.options.player6&&(i=this.game.options.player6),delete r[i],t[n]={},t[n].can_intervene_in_action_card=0,t[n].secret_objectives_in_hand=0,t[n].action_cards_in_hand=0,t[n].action_cards_per_round=1,t[n].action_card_limit=7,t[n].action_cards_played=[],t[n].new_tokens_per_round=2,t[n].command_tokens=3,t[n].strategy_tokens=2,t[n].fleet_supply=3,t[n].fleet_supply_limit=16,t[n].faction=i,t[n].homeworld="",t[n].color=col,t[n].goods=0,t[n].commodities=0,t[n].commodity_limit=3,t[n].vp=0,t[n].passed=0,t[n].strategy_cards_played=[],t[n].strategy_cards_retained=[],t[n].cost_of_technology_primary=6,t[n].cost_of_technology_secondary=4,t[n].promissary_notes=[],t[n].infantry_limit=30,t[n].fighter_limit=30,t[n].carrier_limit=4,t[n].destroyer_limit=8,t[n].cruiser_limit=8,t[n].dreadnaught_limit=5,t[n].flagship_limit=1,t[n].warsun_limit=2,t[n].pds_limit=4,t[n].spacedock_limit=3,t[n].traded_this_turn=0,t[n].new_token_bonus_when_issued=0,t[n].action_cards_bonus_when_issued=0,t[n].fleet_move_bonus=0,t[n].temporary_fleet_move_bonus=0,t[n].ship_move_bonus=0,t[n].temporary_ship_move_bonus=0,t[n].fly_through_asteroids=0,t[n].fly_through_nebulas=0,t[n].fly_through_supernovas=0,t[n].move_into_supernovas=0,t[n].reinforce_infantry_after_successful_ground_combat=0,t[n].bacterial_weapon=0,t[n].evasive_bonus_on_pds_shots=0,t[n].perform_two_actions=0,t[n].move_through_sectors_with_opponent_ships=0,t[n].temporary_move_through_sectors_with_opponent_ships=0,t[n].assign_pds_hits_to_non_fighters=0,t[n].reallocate_four_infantry_per_round=0,t[n].may_produce_after_gaining_planet=0,t[n].extra_roll_on_bombardment_or_pds=0,t[n].stasis_on_opponent_combat_first_round=0,t[n].may_repair_damaged_ships_after_space_combat=0,t[n].may_assign_first_round_combat_shot=0,t[n].production_bonus=0,t[n].may_player_produce_without_spacedock=0,t[n].may_player_produce_without_spacedock_production_limit=0,t[n].may_player_produce_without_spacedock_cost_limit=0,t[n].may_produce_warsuns=0,t[n].target_units=[],t[n].planets_conquered_this_turn=[],t[n].objectives_scored_this_round=[],t[n].must_exhaust_at_round_start=[],t[n].deep_space_conduits=0,t[n].resupply_stations=0,t[n].turn_nullification=0,t[n].space_combat_roll_modifier=0,t[n].ground_combat_roll_modifier=0,t[n].pds_combat_roll_modifier=0,t[n].bombardment_combat_roll_modifier=0,t[n].space_combat_roll_bonus_shots=0,t[n].ground_combat_roll_bonus_shots=0,t[n].pds_combat_roll_bonus_shots=0,t[n].bombardment_combat_roll_bonus_shots=0,t[n].ground_combat_dice_reroll=0,t[n].space_combat_dice_reroll=0,t[n].pds_combat_dice_reroll=0,t[n].bombardment_combat_dice_reroll=0,t[n].combat_dice_reroll=0,t[n].temporary_immune_to_pds_fire=0,t[n].temporary_immune_to_planetary_defense=0,t[n].temporary_space_combat_roll_modifier=0,t[n].temporary_ground_combat_roll_modifier=0,t[n].temporary_pds_combat_roll_modifier=0,t[n].temporary_bombardment_combat_roll_modifier=0,t[n].units_i_destroyed_this_combat_round=[],t[n].units_i_destroyed_last_combat_round=[],t[n].my_units_destroyed_this_combat_round=[],t[n].my_units_destroyed_last_combat_round=[],t[n].temporary_green_tech_prerequisite=0,t[n].temporary_yellow_tech_prerequisite=0,t[n].temporary_red_tech_prerequisite=0,t[n].temporary_blue_tech_prerequisite=0,t[n].permanent_green_tech_prerequisite=0,t[n].permanent_yellow_tech_prerequisite=0,t[n].permanent_red_tech_prerequisite=0,t[n].permanent_blue_tech_prerequisite=0,t[n].temporary_ignore_number_of_tech_prerequisites_on_nonunit_upgrade=0,t[n].permanent_ignore_number_of_tech_prerequisites_on_nonunit_upgrade=0,t[n].temporary_infiltrate_infrastructure_on_invasion=0,t[n].permanent_infiltrate_infrastructure_on_invasion=0,t[n].temporary_opponent_cannot_retreat=0,t[n].permanent_opponent_cannot_retreat=0,t[n].permanent_research_technology_card_must_not_spend_resources=0,1==n&&(t[n].color="yellow"),2==n&&(t[n].color="green"),3==n&&(t[n].color="blue"),4==n&&(t[n].color="purple"),5==n&&(t[n].color="black"),t[n].planets=[],t[n].tech=[],t[n].tech_exhausted_this_turn=[],t[n].upgrades=[],t[n].strategy=[],t[n].objectives_scored=[],t[n].lost_planet_this_round=-1}return t}},{key:"playerTurn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main",t=this,r=(this.returnTechnology(),["action","main","instant"]),n=this.returnPlayerActionCards(t.game.player,r);if(this.updateLeaderboard(),this.updateTokenDisplay(),"main"==e){var a="player_color_"+this.game.player,i="";i+='<div class="terminal_header2 sf-readable"><div class="player_color_box '+a+'"></div>'+this.returnFaction(this.game.player)+":</div><p><ul class='terminal_header3'>",1==this.canPlayerPass(this.game.player)?1==this.game.state.active_player_moved?i+='<li class="option" id="endturn">end turn</li>':i+='<li class="option" id="pass">pass</li>':1==this.game.state.active_player_moved&&(i+='<li class="option" id="endturn">end turn</li>'),1==this.game.state.round&&0==this.game.state.active_player_moved&&(0==this.tutorial_move_clicked&&(i+='<li class="option" id="tutorial_move_ships">move ships</li>'),0==this.tutorial_produce_clicked&&(i+='<li class="option" id="tutorial_produce_units">produce units</li>')),this.game.players_info[this.game.player-1].command_tokens>0&&0==this.game.state.active_player_moved&&(i+='<li class="option" id="activate">activate sector</li>'),1==this.canPlayerPlayStrategyCard(this.game.player)&&0==this.game.state.active_player_moved&&(i+='<li class="option" id="select_strategy_card">play strategy card</li>'),n.length>0&&0==this.game.tracker.action_card&&1==this.canPlayerPlayActionCard(this.game.player)&&0==this.game.state.active_player_moved&&(i+='<li class="option" id="action">play action card</li>'),0==this.game.tracker.trade&&1==this.canPlayerTrade(this.game.player)&&(i+='<li class="option" id="trade">trade</li>');var o=0,s=[],c=[],l=this.returnEventObjects();if(0==this.game.state.active_player_moved)for(var u=0;u<l.length;u++)if(1==l[u].menuOptionTriggers(this,"main",this.game.player)){var d=l[u].menuOption(this,"main",this.game.player);i+=d.html,c.push(u),s.push(d.event),o=1}i+="</ul></p>",this.updateStatus(i),$(".option").on("click",(function(){var e=$(this).attr("id");if(1==o)for(var n=0;n<s.length;n++)if(e==s[n])return $(this).remove(),t.game.state.active_player_moved=1,void l[c[n]].menuOptionActivated(t,"main",t.game.player);return"activate"==e&&t.playerActivateSystem(),"tutorial_move_ships"==e?(t.tutorial_move_clicked=1,t.game.state.use_tutorials=1,t.overlay.showOverlay(t.app,t,'<div style="margin-left:auto;margin-right:auto;width:1200px;height:auto"><img src="/imperium/img/tutorials/movement.png" style="width:100%; height:auto;" /></div>'),void t.playerAcknowledgeNotice('REMEMBER: to move ships select "activate sector" and pick the sector you are moving into. Most ships can only move 1-hex and you cannot move ships from sectors that are already activated. You will be able to choose the ships to move, and load infantry and fighters into units that can carry them.',(function(){t.playerTurn()}))):"tutorial_produce_units"==e?(t.tutorial_produce_clicked=1,t.game.state.use_tutorials=1,t.overlay.showOverlay(t.app,t,'<div style="margin-left:auto;margin-right:auto;width:1200px;height:auto"><img src="/imperium/img/tutorials/production.png" style="width:100%; height:auto;" /></div>'),void t.playerAcknowledgeNotice('REMEMBER: to produce units, select "activate sector" and activate a sector with a space dock (like your home system). You are limited to producing +2 more units than the resources of the planet on which the Space Dock sits. And you can only have as many non-fighter ships in any sector as your fleet supply, so move your ships out before producing more!',(function(){t.playerTurn()}))):("select_strategy_card"==e&&t.playerSelectStrategyCard((function(e){t.game.state.active_player_moved=1,t.addMove("strategy_card_after\t"+e+"\t"+t.game.player+"\t1"),t.addMove("strategy\t"+e+"\t"+t.game.player+"\t1"),t.addMove("strategy_card_before\t"+e+"\t"+t.game.player+"\t1"),t.endTurn()})),"action"==e&&t.playerSelectActionCard((function(e){"action"==t.action_cards[e].type&&(t.game.state.active_player_moved=1),t.addMove("action_card_post\t"+t.game.player+"\t"+e),t.addMove("action_card\t"+t.game.player+"\t"+e),t.addMove("lose\t"+t.game.player+"\taction_cards\t1"),t.endTurn()}),(function(){t.playerTurn()}),r),"trade"==e?(t.playerTrade(),0):("pass"==e&&(t.addMove("resolve\tplay"),t.addMove("setvar\tstate\t0\tactive_player_moved\tint\t0"),t.addMove("player_end_turn\t"+t.game.player),t.addMove("pass\t"+t.game.player),t.endTurn()),void("endturn"==e&&(t.addMove("resolve\tplay"),t.addMove("setvar\tstate\t0\tactive_player_moved\tint\t0"),t.addMove("player_end_turn\t"+t.game.player),t.endTurn()))))}))}}},{key:"playerPlayActionCardMenu",value:function(e,t){for(var r=this,n=["counter"],a=0;a<this.game.deck[1].hand.length;a++)this.game.deck[1].hand[a].indexOf("sabotage")>-1&&-1==t.indexOf("sabotage")&&(this.game.players_info[this.game.player-1].can_intervene_in_action_card=1);if(!this.game.players_info[this.game.player-1].can_intervene_in_action_card){var i='<div class="action_card_instructions_hud">'+this.returnFaction(e)+" has played an action card:</div>";return i+='<div class="action_card_name_hud">'+r.action_cards[t].name+"</div>",i+='<div class="action_card_text_hud">',i+=this.action_cards[t].text,i+="</div>",this.playerAcknowledgeNotice(i,(function(){"simultaneous"===r.game.state.action_card_order&&(r.prependMove("resolve\tsimultaneous_action_card_player_menu\t1\t"+r.app.wallet.returnPublicKey()),r.addPublickeyConfirm(r.app.wallet.returnPublicKey(),1),console.log("BROADCASTING MOVES 3: "+JSON.stringify(this.moves))),r.endTurn()})),0}var o='<div class="action_card_instructions_hud">'+this.returnFaction(e)+" has played an action card:</div>";o+='<div class="action_card_name_hud">'+r.action_cards[t].name+"</div>",o+='<div class="action_card_text_hud">',o+=this.action_cards[t].text,o+="</div>",o+="<ul>";var s=this.returnPlayerActionCards(this.game.player,n);s.length>0?(o+='<li class="option" id="cont">continue</li>',o+='<li class="option" id="action">play action card</li>'):o+='<li class="option" id="cont">continue</li>';for(var c=0,l=[],u=[],d=this.returnEventObjects(),h=0;h<d.length;h++)if(1==d[h].menuOptionTriggers(this,"action_card",this.game.player)){var p=d[h].menuOption(this,"action_card",this.game.player);o+=p.html,u.push(h),l.push(p.event),c=1}o+="</ul>",this.updateStatus(o),$(".option").off(),$(".option").on("click",(function(){var a=$(this).attr("id");if(1==c)for(var i=0;i<l.length;i++)a==l[i]&&($(this).remove(),d[u[i]].menuOptionActivated(r,"action_card",r.game.player));return"action"==a&&r.playerSelectActionCard((function(n){r.game.players_info[r.game.player-1].action_cards_played.push(n),r.addMove("action_card_post\t"+r.game.player+"\t"+n),r.addMove("action_card\t"+r.game.player+"\t"+n),r.addMove("lose\t"+r.game.player+"\taction_cards\t1"),0==n.indexOf("sabotage")?r.endTurn():r.playerPlayActionCardMenu(e,t)}),(function(){r.playerPlayActionCardMenu(e,t)}),n),"cont"==a&&("simultaneous"===r.game.state.action_card_order&&(r.prependMove("resolve\tsimultaneous_action_card_player_menu\t1\t"+r.app.wallet.returnPublicKey()),r.addPublickeyConfirm(r.app.wallet.returnPublicKey(),1)),r.endTurn()),0}))}},{key:"playerPlayBombardment",value:function(e,t,r){var n=this;this.game.state.bombardment_sector=t,this.game.state.bombardment_planet_idx=r;var a=n.returnSectorAndPlanets(t);if(0==this.game.state.bombardment_against_cultural_planets&&"cultural"==a.p[r].type&&(this.updateLog("Bombardment not possible against cultural planets. Skipping."),this.endTurn()),0==this.game.state.bombardment_against_industrial_planets&&"industrial"==a.p[r].type&&(this.updateLog("Bombardment not possible against industrial planets. Skipping."),this.endTurn()),0==this.game.state.bombardment_against_hazardous_planets&&"hazardous"==a.p[r].type&&(this.updateLog("Bombardment not possible against hazardous planets. Skipping."),this.endTurn()),a.p[r].owner==n.game.player)return n.endTurn(),0;if(this.doesPlanetHavePDS(a.p[r])){if(!this.doesSectorContainPlayerUnit(e,t,"warsun"))return this.updateLog("Bombardment not possible against PDS-defended planets. Skipping."),n.endTurn(),0;this.updateLog("Warsuns make bombardment possible against PDS-defended planets...")}html='<div class="sf-readable">Do you wish to bombard '+a.p[r].name+"? </div><ul>",this.returnPlayerActionCards(this.game.player,["pre_bombardment"]).length>0?(html+='<li class="option" id="bombard">bombard planet</li>',html+='<li class="option" id="action">play action card</li>',html+='<li class="option" id="skip">skip bombardment</li>'):(html+='<li class="option" id="bombard">bombard planet</li>',html+='<li class="option" id="skip">skip bombardment</li>');for(var i=0,o=[],s=[],c=this.returnEventObjects(),l=0;l<c.length;l++)if(1==c[l].menuOptionTriggers(this,"pre_bombardment",this.game.player)){var u=c[l].menuOption(this,"pre_bombardment",this.game.player);html+=u.html,s.push(l),o.push(u.event),i=1}html+="</ul>",this.updateStatus(html),$(".option").on("click",(function(){var e=$(this).attr("id");if(1==i)for(var a=0;a<o.length;a++)e==o[a]&&($(this).remove(),c[s[a]].menuOptionActivated(n,"pre_bombardment",n.game.player));return"action"==e&&n.playerSelectActionCard((function(e){n.game.players_info[this.game.player-1].action_cards_played.push(e),n.addMove("action_card_post\t"+n.game.player+"\t"+e),n.addMove("action_card\t"+n.game.player+"\t"+e),n.addMove("lose\t"+n.game.player+"\taction_cards\t1"),n.playerPlayActionCardMenu(action_card_player,e)}),(function(){n.playerPlayActionCardMenu(action_card_player,card)}),["pre_bombardment"]),"bombard"==e&&(n.addMove("bombard\t"+n.game.player+"\t"+t+"\t"+r),n.endTurn()),"skip"==e&&n.endTurn(),0}))}},{key:"playerAcknowledgeNotice",value:function(e,t){var r='<div class="sf-readable">'+e+"</div><ul>";r+='<li class="textchoice" id="confirmit">I understand...</li>',r+="</ul></p>",this.updateStatus(r);try{$(".textchoice").off(),$(".textchoice").on("click",(function(){t()}))}catch(e){}return 0}},{key:"playerAssignHitsCapitalShips",value:function(e,t,r){var n=this,a=0,i=0,o=0,s=["destroyer","cruiser","carrier","dreadnaught","warsun","flagship"];html='<div class="sf-readable">You must assign '+r+" to your capital ships (if possible):</div><ul>",html+='<li class="option" id="assign">continue</li>',html+="</ul>",this.updateStatus(html),$(".option").on("click",(function(){if("assign"==$(this).attr("id")){var c=n.returnSectorAndPlanets(t),l="";l+='<div class="sf-readable">Assign <div style="display:inline" id="total_hits_to_assign">'+r+"</div> hits:</div>",l+="<ul>";for(var u=0;u<c.s.units[n.game.player-1].length;u++)if(0==c.s.units[n.game.player-1][u].destroyed&&c.s.units[n.game.player-1][u].strength>0){var d=c.s.units[n.game.player-1][u];if(i++,s.includes(d.type)&&o++,l+='<li class="textchoice player_ship_'+u+'" id="'+u+'">'+d.name,d.capacity>=1){for(var h="",p=0,f=0,m=0;m<c.s.units[n.game.player-1][u].storage.length;m++)"infantry"==c.s.units[n.game.player-1][u].storage[m].type&&f++,"fighter"==c.s.units[n.game.player-1][u].storage[m].type&&p++;(f>0||p>0)&&(h+=" ",f>0&&(h+=f+"i"),p>0&&(f>0&&(h+=", "),h+=p+"f"),h+=" "),l+=h}if(d.strength>1){i+=d.strength-1,l+=' <div style="display:inline" id="player_ship_'+u+'_hits">(';for(var g=1;g<d.strength;g++)l+="*";l+=")",l+="</div>"}l+="</li>"}if(l+="</ul>",0==i)return n.endTurn(),0;n.updateStatus(l),$(".textchoice").off(),$(".textchoice").on("click",(function(){var u=$(this).attr("id"),d=c.s.units[n.game.player-1][u];if(o>0){if(!s.includes(d.type))return void salert("You must first assign hits to the required unit types");o--}if(n.addMove("assign_hit\t"+e+"\t"+e+"\t"+n.game.player+"\tship\t"+t+"\t"+u+"\t0"),r--,a++,$("#total_hits_to_assign").innerHTML=r,d.strength>1){d.strength--;var h="#player_ship_"+u+"_hits",p="";if(d.strength>1){l+="(";for(var f=1;f<d.strength;f++)p+="*";p+=")"}$(h).html(p)}else d.strength=0,d.destroyed=0,$(this).remove();n.saveSystemAndPlanets(c),(0==r||a>=i)&&(n.updateStatus("Notifying players of hits assignment..."),n.endTurn(),n.updateStatus("Hits taken..."))}))}}))}},{key:"playerAssignHits",value:function(e,t,r,n,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",s=this,c=0,l=0,u=["assign_hits"];"pds"==a&&(u=["post_pds"]),html='<div class="sf-readable">You must assign '+i+" to your fleet:</div><ul>";var d=this.returnPlayerActionCards(s.game.player,u);d.length>0?(html+='<li class="option" id="assign">continue</li>',html+='<li class="option" id="action">play action card</li>'):html+='<li class="option" id="assign">continue</li>';var h="";"pds"==a&&(h="assign_hits_pds"),""==h&&"space"==r&&(h="assign_hits_space"),"ground"==r&&(h="assign_hits_ground"),"anti_fighter_barrage"==r&&(h="assign_hits_anti_fighter_barrage");for(var p=0,f=[],m=[],g=this.returnEventObjects(),y=0;y<g.length;y++)if(1==g[y].menuOptionTriggers(this,h,this.game.player)){var v=g[y].menuOption(this,h,this.game.player);html+=v.html,m.push(y),f.push(v.event),p=1}html+="</ul>",this.updateStatus(html),$(".option").on("click",(function(){var d=$(this).attr("id");if(1==p)for(var y=0;y<f.length;y++)d==f[y]&&(this.tech[s.game.players_info[s.game.player-1].tech[m]],g[m[y]].menuOptionActivated(s,h,s.game.player));if("action"==d&&s.playerSelectActionCard((function(e){s.addMove(s.game.state.assign_hits_queue_instruction),s.addMove("action_card_post\t"+s.game.player+"\t"+e),s.addMove("action_card\t"+s.game.player+"\t"+e),s.addMove("lose\t"+s.game.player+"\taction_cards\t1"),s.endTurn(),s.updateStatus("playing action card before hits assignment")}),(function(){s.playerAssignHits(e,t,r,n,a,i,o)}),u),"assign"==d){if(s.game.state.assign_hits_to_cancel>0&&((i-=s.game.state.assign_hits_to_cancel)<0&&(i=0),0==i))return s.updateLog("NOTIFY\t"+s.returnFactionNickname(s.game.player)+" does not take any hits"),s.endTurn(),0;var v=s.returnSectorAndPlanets(n),b="";b+='<div class="sf-readable">Assign <div style="display:inline" id="total_hits_to_assign">'+i+"</div> hits:</div>",b+="<ul>";var _=0,w=s.game.players_info[s.game.player-1].target_units;"anti_fighter_barrage"==r&&(w=["fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter"]);for(var x=0;x<v.s.units[s.game.player-1].length;x++)if(0==v.s.units[s.game.player-1][x].destroyed&&v.s.units[s.game.player-1][x].strength>0){var k=v.s.units[s.game.player-1][x];if(l++,w.includes(k.type)&&_++,b+='<li class="textchoice player_ship_'+x+'" id="'+x+'">'+k.name,k.capacity>=1){for(var S="",E=0,A=0,P=0;P<v.s.units[s.game.player-1][x].storage.length;P++)"infantry"==v.s.units[s.game.player-1][x].storage[P].type&&A++,"fighter"==v.s.units[s.game.player-1][x].storage[P].type&&E++;(A>0||E>0)&&(S+=" ",A>0&&(S+=A+"i"),E>0&&(A>0&&(S+=", "),S+=E+"f"),S+=" "),b+=S}if(k.strength>1){l+=k.strength-1,b+=' <div style="display:inline" id="player_ship_'+x+'_hits">(';for(var C=1;C<k.strength;C++)b+="*";b+=")",b+="</div>"}b+="</li>"}if(b+="</ul>",0==l)return console.log("ERROR: you had no hits left to assign, bug?"),console.log("SHIPS: "+JSON.stringify(v.s.units[s.game.player-1])),s.endTurn(),0;s.updateStatus(b),$(".textchoice").off(),$(".textchoice").on("click",(function(){var r=$(this).attr("id"),a=v.s.units[s.game.player-1][r];if(_>0){if(!w.includes(a.type))return void salert("You must first assign hits to the required unit types");_--}if(s.addMove("assign_hit\t"+e+"\t"+t+"\t"+s.game.player+"\tship\t"+n+"\t"+r+"\t0"),i--,c++,$("#total_hits_to_assign").innerHTML=i,a.strength>1){a.strength--;var o="#player_ship_"+r+"_hits",u="";if(a.strength>1){b+="(";for(var d=1;d<a.strength;d++)u+="*";u+=")"}$(o).html(u)}else a.strength=0,a.destroyed=0,$(this).remove();s.saveSystemAndPlanets(v),(0==i||c>=l)&&(s.updateStatus("Notifying players of hits assignment..."),s.endTurn(),s.updateStatus("Hits taken..."))}))}}))}},{key:"playerDestroyUnits",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=this,o=t,s=0,c=0,l=a.returnSectorAndPlanets(r);html='<div class="sf-readable">You must destroy '+t+" units in sector: "+a.game.sectors[r].name+":</div><ul>";var u=0,d=a.game.players_info[a.game.player-1].target_units;1==n&&((d=[]).push("destroyer"),d.push("carrier"),d.push("destroyer"),d.push("cruiser"),d.push("dreadnaught"),d.push("warsun"),d.push("flagship"));for(var h=0;h<l.s.units[a.game.player-1].length;h++){var p=l.s.units[a.game.player-1][h];c++,d.includes(p.type)&&u++,html+='<li class="textchoice player_ship_'+h+'" id="'+h+'">'+p.name+"</li>"}for(var f=0;i<l.p.length;f++)for(var m=0;m<l.p[f].units[a.game.player-1].length;m++){var g=l.p[f].units[a.game.player-1][m];c++,d.includes(g.type)&&u++,html+='<li class="textchoice player_unit_'+f+"_"+m+'" id="ground_unit_'+f+"_"+m+'">'+g.name+"</li>"}if(html+="</ul>",0==c)return this.addMove("NOTIFY\t"+this.returnFaction(e)+" has no ships to destroy"),this.endTurn(),0;a.updateStatus(html),$(".textchoice").off(),$(".textchoice").on("click",(function(){var t=$(this).attr("id"),n=0,i=0,h="ship";if(t.indexOf("_unit_")>0){h="ground";var p=t.split("_");n=p[1],i=p[2]}var f=null;if(f="ship"==h?l.s.units[a.game.player-1][t]:l.p[n].units[a.game.player-1][i],u>0){if(!d.includes(f.type))return void salert("You must first destroy the required unit types");u--}"ship"==h?a.addMove("destroy_unit\t"+e+"\t"+e+"\tspace\t"+r+"\t0\t"+t+"\t1"):a.addMove("destroy_unit\t"+e+"\t"+e+"\tground\t"+r+"\t"+n+"\t"+i+"\t1"),f.strength=0,f.destroyed=0,$(this).remove(),o--,s++,(0==o||s>=c)&&(a.updateStatus("Notifying players of units destroyed..."),a.endTurn())}))}},{key:"playerDestroyShips",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=this,i=t,o=0,s=0,c=a.returnSectorAndPlanets(r);html='<div class="sf-readable">You must destroy '+t+" ships in your fleet:</div><ul>";var l=0,u=a.game.players_info[a.game.player-1].target_units;1==n&&((u=[]).push("destroyer"),u.push("carrier"),u.push("destroyer"),u.push("cruiser"),u.push("dreadnaught"),u.push("warsun"),u.push("flagship"));for(var d=0;d<c.s.units[a.game.player-1].length;d++){var h=c.s.units[a.game.player-1][d];s++,u.includes(h.type)&&l++,html+='<li class="textchoice player_ship_'+d+'" id="'+d+'">'+h.name+"</li>"}if(html+="</ul>",0==s)return this.addMove("NOTIFY\t"+this.returnFaction(e)+" has no ships to destroy"),this.endTurn(),0;a.updateStatus(html),$(".textchoice").off(),$(".textchoice").on("click",(function(){var t=$(this).attr("id"),n=c.s.units[a.game.player-1][t];if(l>0){if(!u.includes(n.type))return void salert("You must first destroy the required unit types");l--}a.addMove("destroy_unit\t"+e+"\t"+e+"\tspace\t"+r+"\t0\t"+t+"\t1"),n.strength=0,n.destroyed=0,$(this).remove(),i--,o++,(0==i||o>=s)&&(a.updateStatus("Notifying players of hits assignment..."),a.endTurn())}))}},{key:"playerDestroyOpponentShips",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=this,i=0,o=0,s=a.returnSectorAndPlanets(r),c=a.returnOpponentInSector(e,r);if(-1==c)return this.addMove("NOTIFY\t"+this.returnFactionNickname(c)+" has no ships to destroy"),this.endTurn(),0;html='<div class="sf-readable">You may destroy '+t+" ships in opponent fleet:</div><ul>";var l=0,u=a.game.players_info[a.game.player-1].target_units;1==n&&((u=[]).push("destroyer"),u.push("carrier"),u.push("destroyer"),u.push("cruiser"),u.push("dreadnaught"),u.push("warsun"),u.push("flagship"));for(var d=0;d<s.s.units[c-1].length;d++){var h=s.s.units[c-1][d];o++,u.includes(h.type)&&l++,html+='<li class="textchoice player_ship_'+d+'" id="'+d+'">'+h.name+"</li>"}if(html+="</ul>",0==o)return this.addMove("NOTIFY\t"+this.returnFactionNickname(c)+" has no ships to destroy"),this.endTurn(),0;a.updateStatus(html),$(".textchoice").off(),$(".textchoice").on("click",(function(){var n=$(this).attr("id"),d=s.s.units[c-1][n];if(l>0){if(!u.includes(d.type))return void salert("You must first destroy the required unit types");l--}a.addMove("destroy_unit\t"+e+"\t"+c+"\tspace\t"+r+"\t0\t"+n+"\t1"),d.strength=0,d.destroyed=0,$(this).remove(),t--,i++,(0==t||i>=o)&&(a.updateStatus("Notifying players of destroyed ships..."),a.endTurn())}))}},{key:"playerPlaySpaceCombat",value:function(e,t,r){var n=this,a=(this.returnSectorAndPlanets(r),""),i=["space_combat"];this.game.state.space_combat_round>1&&i.push("space_combat_post");var o=e;n.game.player==e&&(o=t),this.game.state.space_combat_sector=r,a='<div class="sf-readable"><b>Space Combat: round '+this.game.state.space_combat_round+':</b><div class="combat_attacker">'+this.returnFaction(e)+'</div><div class="combat_attacker_fleet">'+this.returnPlayerFleetInSector(e,r)+'</div><div class="combat_defender">'+this.returnFaction(t)+'</div><div class="combat_defender_fleet">'+this.returnPlayerFleetInSector(t,r)+"</div><ul>",this.returnPlayerActionCards(this.game.player,i).length>0?(a+='<li class="option" id="attack">continue</li>',a+='<li class="option" id="action">play action card</li>'):a+='<li class="option" id="attack">continue</li>',this.canPlayerRetreat(n.game.player,e,t,r)&&(a+='<li class="option" id="retreat">announce retreat</li>');for(var s=0,c=[],l=[],u=this.returnEventObjects(),d=0;d<u.length;d++)if(1==u[d].menuOptionTriggers(this,"space_combat",this.game.player)){var h=u[d].menuOption(this,"space_combat",this.game.player);a+=h.html,l.push(d),c.push(h.event),s=1}a+="</ul>",this.updateStatus(a),$(".option").on("click",(function(){var a=$(this).attr("id");if(1==s)for(var d=0;d<c.length;d++)a==c[d]&&($(this).remove(),u[l[d]].menuOptionActivated(n,"space_combat",n.game.player));if("action"==a&&n.playerSelectActionCard((function(a){n.addMove("action_card_post\t"+n.game.player+"\t"+a),n.addMove("action_card\t"+n.game.player+"\t"+a),n.addMove("lose\t"+n.game.player+"\taction_cards\t1"),n.playerPlaySpaceCombat(e,t,r)}),(function(){n.playerPlaySpaceCombat(e,t,r)}),i),"attack"==a&&(n.prependMove("ships_fire\t"+e+"\t"+t+"\t"+r),n.endTurn()),"retreat"==a)if(n.canPlayerRetreat(n.game.player,e,t,r)){for(var h=n.returnSectorsWherePlayerCanRetreat(n.game.player,r),p='<div clss="sf-readable">Retreat into which Sector? </div><ul>',f=0;f<h.length;f++)p+='<li class="option" id="'+f+'">'+n.returnSectorAndPlanets(h[f]).s.name+"</li>";p+="</ul>",n.updateStatus(p),$(".option").off(),$(".option").on("click",(function(){var e=$(this).attr("id"),t=h[e];return n.addMove("announce_retreat\t"+n.game.player+"\t"+o+"\t"+r+"\t"+t),n.endTurn(),0}))}else n.playerPlaySpaceCombat(e,t,r)}))}},{key:"playerRespondToRetreat",value:function(e,t,r,n){var a=this,i=this.returnSectorAndPlanets(n),o=this.returnPlayerActionCards(this.game.player,["retreat"]),s='<div class="sf-readable">Your opponent has announced a retreat into '+i.s.name+" at the end of this round of combat: </div><p></p><ul>";o.length>0&&(s+='<li class="option" id="action">play action card</li>'),s+='<li class="option" id="permit">permit retreat</li>',s+="</ul>";for(var c=0,l=[],u=[],d=this.returnEventObjects(),h=0;h<d.length;h++)if(1==d[h].menuOptionTriggers(this,"retreat",this.game.player)){var p=d[h].menuOption(this,"retreat",this.game.player);s+=p.html,u.push(h),l.push(p.event),c=1}s+="</ul>",this.updateStatus(s),$(".option").off(),$(".option").on("click",(function(){var i=$(this).attr("id");if(1==c)for(var o=0;o<l.length;o++)i==l[o]&&($(this).remove(),d[u[o]].menuOptionActivated(a,"space_combat",a.game.player));"action"==i&&a.playerSelectActionCard((function(i){a.addMove("action_card_post\t"+a.game.player+"\t"+i),a.addMove("action_card\t"+a.game.player+"\t"+i),a.addMove("lose\t"+a.game.player+"\taction_cards\t1"),a.playerRespondToRetreat(e,t,r,n)}),function(){a.playerRespondToRetreat(e,t,r,n)}.relevant_action_cards),"permit"==i&&a.endTurn()}))}},{key:"playerPlayGroundCombatOver",value:function(e,t){var r=this,n=this.returnSectorAndPlanets(t),a=this.returnPlayerActionCards(this.game.player,["ground_combat_victory","ground_combat_over","ground_combat_loss"]),i="";i=e==n.p[planet_idx].owner?'<div class="sf-readable">Ground Combat is Over (you win): </div><ul>':'<div class="sf-readable">Space Combat is Over (you lose): </div><ul>',a.length>0?(i+='<li class="option" id="ok">acknowledge</li>',i+='<li class="option" id="action">action card</li>'):i+='<li class="option" id="ok">acknowledge</li>';for(var o=0,s=[],c=[],l=this.returnEventObjects(),u=0;u<l.length;u++)if(1==l[u].menuOptionTriggers(this,"ground_combat_over",this.game.player)){var d=l[u].menuOption(this,"ground_combat_over",this.game.player);i+=d.html,c.push(u),s.push(d.event),o=1}i+="</ul>",this.updateStatus(i),$(".option").off(),$(".option").on("click",(function(){var n=$(this).attr("id");if(1==o)for(var a=0;a<s.length;a++)n==s[a]&&($(this).remove(),l[c[a]].menuOptionActivated(r,"space_combat",r.game.player));"action"===n&&r.playerSelectActionCard((function(n){r.addMove("action_card_post\t"+r.game.player+"\t"+n),r.addMove("action_card\t"+r.game.player+"\t"+n),r.addMove("lose\t"+r.game.player+"\taction_cards\t1"),r.playerPlayGroundCombatOver(e,t,planet_idx)}),(function(){r.playerPlayGroundCombatOver(e,t,planet_idx)})),"ok"===n&&r.endTurn()}))}},{key:"playerPlaySpaceCombatOver",value:function(e,t){var r=this,n=(this.returnSectorAndPlanets(t),this.returnPlayerActionCards(this.game.player,["space_combat_victory","space_combat_over","space_combat_loss"])),a="";a=this.doesPlayerHaveShipsInSector(e,t)?'<div class="sf-readable">Space Combat is Over (you win): </div><ul>':'<div class="sf-readable">Space Combat is Over (you lose): </div><ul>',n.length>0?(a+='<li class="option" id="ok">acknowledge</li>',a+='<li class="option" id="action">action card</li>'):a+='<li class="option" id="ok">acknowledge</li>';for(var i=0,o=[],s=[],c=this.returnEventObjects(),l=0;l<c.length;l++)if(1==c[l].menuOptionTriggers(this,"space_combat_over",this.game.player)){var u=c[l].menuOption(this,"space_combat_over",this.game.player);a+=u.html,s.push(l),o.push(u.event),i=1}a+="</ul>",this.updateStatus(a),$(".option").on("click",(function(){var n=$(this).attr("id");if(1==i)for(var a=0;a<o.length;a++)n==o[a]&&($(this).remove(),c[s[a]].menuOptionActivated(r,"space_combat_over",r.game.player));"action"==n&&r.playerSelectActionCard((function(n){r.addMove("action_card_post\t"+r.game.player+"\t"+n),r.addMove("action_card\t"+r.game.player+"\t"+n),r.addMove("lose\t"+r.game.player+"\taction_cards\t1"),r.playerPlaySpaceCombatOver(e,t,planet_idx)}),(function(){r.playerPlaySpaceCombatOver(e,t,planet_idx)})),"ok"===n&&r.endTurn()}))}},{key:"playerPlayGroundCombat",value:function(e,t,r,n){var a=this,i=this.returnSectorAndPlanets(r),o="";this.game.state.ground_combat_sector=r,this.game.state.ground_combat_planet_idx=n;var s=this.returnNumberOfGroundForcesOnPlanet(e,r,n),c=this.returnNumberOfGroundForcesOnPlanet(t,r,n);o=i.p[n].owner!=e?'<div class="sf-readable">'+this.returnFactionNickname(e)+" are invading "+i.p[n].name+" with "+s+" infantry. "+this.returnFactionNickname(t)+" is defending with "+c+" infantry. This is round "+this.game.state.ground_combat_round+" of ground combat. </div><ul>":'<div class="sf-readable">'+this.returnFactionNickname(t)+" are invading "+i.p[n].name+" with "+c+" infantry. You have "+s+" infantry remaining. This is round "+this.game.state.ground_combat_round+" of ground combat. </div><ul>",this.returnPlayerActionCards(this.game.player,["combat","ground_combat"]).length>0?(o+='<li class="option" id="attack">continue</li>',o+='<li class="option" id="action">play action card</li>'):o+='<li class="option" id="attack">continue</li>';for(var l=0,u=[],d=[],h=this.returnEventObjects(),p=0;p<h.length;p++)if(1==h[p].menuOptionTriggers(this,"ground_combat",this.game.player)){var f=h[p].menuOption(this,"ground_combat",this.game.player);o+=f.html,d.push(p),u.push(f.event),l=1}o+="</ul>",this.updateStatus(o),$(".option").off(),$(".option").on("click",(function(){var i=$(this).attr("id");if(1==l)for(var o=0;o<u.length;o++)i==u[o]&&($(this).remove(),h[d[o]].menuOptionActivated(a,"ground_combat",a.game.player));"action"==i&&a.playerSelectActionCard((function(i){a.addMove("action_card_post\t"+a.game.player+"\t"+i),a.addMove("action_card\t"+a.game.player+"\t"+i),a.addMove("lose\t"+a.game.player+"\taction_cards\t1"),a.playerPlayGroundCombat(e,t,r,n)}),(function(){a.playerPlayGroundCombat(e,t,r,n)})),"attack"==i&&(a.prependMove("infantry_fire\t"+e+"\t"+t+"\t"+r+"\t"+n),a.endTurn())}))}},{key:"playerPlayPDSAttack",value:function(e,t,r){for(var n=this,a="",i=["pre_pds"],o=1,s=-1,c=n.returnSectorAndPlanets(r),l=0;l<c.s.units.length;l++)l+1!=t&&c.s.units[l].length>0&&(s=l+1);a='<div class="sf-readable">Do you wish to fire your PDS before moving into the sector?</div><ul>',-1!=s?n.game.players_info[s-1].temporary_immune_to_pds_fire&&(a='<div class="sf-readable">'+n.returnFaction(s)+" cannot be targeted by PDS fire during this invasion:</div><ul>",o=0):(a='<div class="sf-readable">You cannot target any ships with PDS fire and must skip firing:</div><ul>',o=0),a+='<li class="option" id="skip">skip PDS</li>',1==o&&(a+='<li class="option" id="fire">fire PDS</li>'),this.returnPlayerActionCards(e,i).length>0&&(a+='<li class="option" id="action">play action card</li>');for(var u=0,d=[],h=[],p=this.returnEventObjects(),f=0;f<p.length;f++)if(1==p[f].menuOptionTriggers(this,"pds",this.game.player)){var m=p[f].menuOption(this,"pds",this.game.player);a+=m.html,h.push(f),d.push(m.event),u=1}a+="</ul>",this.updateStatus(a),$(".option").on("click",(function(){var a=$(this).attr("id");if(1==u)for(var o=0;o<d.length;o++)a==d[o]&&($(this).remove(),p[h[o]].menuOptionActivated(n,"pds",n.game.player));"action"==a&&n.playerSelectActionCard((function(a){n.addMove("action_card_post\t"+n.game.player+"\t"+a),n.addMove("action_card\t"+n.game.player+"\t"+a),n.addMove("lose\t"+n.game.player+"\taction_cards\t1"),n.playerPlayPDSAttack(e,t,r)}),(function(){n.playerPlayPDSAttack(e,t,r)}),i),"skip"==a&&n.endTurn(),"fire"==a&&(n.prependMove("pds_fire\t"+n.game.player+"\t"+s+"\t"+r),n.endTurn())}))}},{key:"playerPlayPDSDefense",value:function(e,t,r){var n=this,a="",i=["pre_pds"],o=1;a='<div class="sf-readable">Do you wish to fire your PDS?</div><ul>',n.game.players_info[t-1].temporary_immune_to_pds_fire&&(a='<div class="sf-readable">Your attacker cannot be targeted by PDS fire during this invasion:</div><ul>',o=0),a+='<li class="option" id="skip">skip PDS</li>',1==o&&(a+='<li class="option" id="fire">fire PDS</li>'),this.returnPlayerActionCards(e,i).length>0&&(a+='<li class="option" id="action">play action card</li>');for(var s=0,c=[],l=[],u=this.returnEventObjects(),d=0;d<u.length;d++)if(1==u[d].menuOptionTriggers(this,"pds",this.game.player)){var h=u[d].menuOption(this,"pds",this.game.player);a+=h.html,l.push(d),c.push(h.event),s=1}a+="</ul>",this.updateStatus(a),$(".option").on("click",(function(){var a=$(this).attr("id");if(1==s)for(var o=0;o<c.length;o++)a==c[o]&&($(this).remove(),u[l[o]].menuOptionActivated(n,"pds",n.game.player));"action"==a&&n.playerSelectActionCard((function(a){n.addMove("action_card_post\t"+n.game.player+"\t"+a),n.addMove("action_card\t"+n.game.player+"\t"+a),n.addMove("lose\t"+n.game.player+"\taction_cards\t1"),n.playerPlayPDSDefense(e,t,r)}),(function(){n.playerPlayPDSDefense(e,t,r)}),i),"skip"==a&&n.endTurn(),"fire"==a&&(n.prependMove("pds_fire\t"+n.game.player+"\t"+t+"\t"+r),n.endTurn())}))}},{key:"playerResolveDeadlockedAgenda",value:function(e,t){var r=this,n="";n='<div class="sf-readable">The agenda has become deadlocked in the Senate. You - the Speaker - must resolve it: </div><ul>';for(var a=0;a<t.length;a++)n+='<li class="option" id="'+a+'">'+this.returnNameFromIndex(t[a])+"</li>";n+="</ul>",this.updateStatus(n),$(".option").off(),$(".option").on("click",(function(){var n=$(this).attr("id");return r.addMove("resolve_agenda\t"+e+"\tspeaker\t"+t[n]),r.endTurn(),0}))}},{key:"playerPlayPreAgendaStage",value:function(e,t,r){var n=this,a="",i=this.returnPlayerActionCards(n.game.player,["pre_agenda","rider"]);a=this.doesPlayerHaveRider(n.game.player)?'<div class="sf-readable">With your riders depending on how the other factions vote, your emissaries track the mood in the Senate closely...:</div><ul>':'<div class="sf-readable">As the Senators gather to vote on '+this.agenda_cards[t].name+", your emissaries nervously tally the votes in their head:</div><ul>",a+='<li class="option" id="skip">proceed into Senate</li>',i.length>0&&(a+='<li class="option" id="action">action card</li>');for(var o=0,s=[],c=[],l=this.returnEventObjects(),u=0;u<l.length;u++)if(1==l[u].menuOptionTriggers(this,"pre_agenda",this.game.player)){var d=l[u].menuOption(this,"pre_agenda",this.game.player);a+=d.html,c.push(u),s.push(d.event),o=1}a+="</ul>",0!=o||0!=i.length?(this.updateStatus(a),$(".option").off(),$(".option").on("click",(function(){var a=$(this).attr("id");if(1==o)for(var i=0;i<s.length;i++)a==s[i]&&($(this).remove(),l[c[i]].menuOptionActivated(n,"agenda",n.game.player));"action"==a&&n.playerSelectActionCard((function(a){n.addMove("action_card_post\t"+n.game.player+"\t"+a),n.addMove("action_card\t"+n.game.player+"\t"+a),n.addMove("lose\t"+n.game.player+"\taction_cards\t1"),n.playerPlayPreAgendaStage(e,t,r)}),(function(){n.playerPlayPreAgendaStage(e,t,r)}),["pre_agenda","rider"]),"skip"==a&&n.endTurn()}))):n.endTurn()}},{key:"playerPlayPostAgendaStage",value:function(e,t,r){var n=this,a="",i=["post_agenda"],o=this.returnPlayerActionCards(n.game.player,i);a=r.length>0?'<div class="sf-readable">The Senate has apparently voted for "'+this.returnNameFromIndex(r[0])+'". As the Speaker confirms the final tally, you get the feeling the issue may not be fully settled:</div><ul>':'<div class="sf-readable">No-one in the Senate bothered to show-up and vote, leaving the matter to be decided by the Speaker:</div><ul>',r.length>1&&(a='<div class="sf-readable">The voting has concluded in deadlock. The Speaker must resolve the agenda:</div><ul>'),a+='<li class="option" id="skip">await results</li>',o.length>0&&(a+='<li class="option" id="action">action card</li>');for(var s=0,c=[],l=[],u=this.returnEventObjects(),d=0;d<u.length;d++)if(1==u[d].menuOptionTriggers(this,"post_agenda",this.game.player)){var h=u[d].menuOption(this,"post_agenda",this.game.player);a+=h.html,l.push(d),c.push(h.event),s=1}a+="</ul>",0!=s||0!=o.length?(this.updateStatus(a),$(".option").off(),$(".option").on("click",(function(){var a=$(this).attr("id");if(1==s)for(var o=0;o<c.length;o++)a==c[o]&&($(this).remove(),u[l[o]].menuOptionActivated(n,"post_agenda",n.game.player));"action"==a&&n.playerSelectActionCard((function(a){n.addMove("action_card_post\t"+n.game.player+"\t"+a),n.addMove("action_card\t"+n.game.player+"\t"+a),n.addMove("lose\t"+n.game.player+"\taction_cards\t1"),n.playerPlayPostAgendaStage(e,t,r)}),(function(){n.playerPlayPostAgendaStage(e,t,r)}),i),"skip"==a&&n.endTurn()}))):n.endTurn()}},{key:"playerContinueTurn",value:function(e,t){var r=this;null==this.game.tracker.invasion&&(this.game.tracker=this.returnPlayerTurnTracker(),this.game.tracker.activate_system=1);var n="<div class='sf-readable'><div class='player_color_box player_color_"+this.game.player+"'></div>"+this.returnFaction(e)+": </div><ul>";""!=this.canPlayerScoreActionStageVictoryPoints(e)&&(n+='<li class="option" id="score">score secret objective</li>'),this.canPlayerProduceInSector(e,t)&&0==this.game.tracker.production&&(n+='<li class="option" id="produce">produce units</li>'),this.canPlayerInvadePlanet(e,t)&&0==this.game.tracker.invasion&&("new-byzantium"==t||"4_4"==t?(-1!=r.game.planets["new-byzantium"].owner||r.returnAvailableInfluence(r.game.player)+r.game.players_info[r.game.player-1].goods>=6)&&(n+='<li class="option" id="invade">invade planet</li>'):n+='<li class="option" id="invade">invade planet</li>'),this.canPlayerLandInfantry(e,t)&&0==this.game.tracker.invasion&&(n+='<li class="option" id="land">reassign infantry</li>'),0==this.game.tracker.trade&&1==this.canPlayerTrade(this.game.player)&&(n+='<li class="option" id="trade">trade</li>');for(var a=0,i=[],o=[],s=this.returnEventObjects(),c=0;c<s.length;c++)if(1==s[c].menuOptionTriggers(this,"continue",this.game.player)){var l=s[c].menuOption(this,"continue",this.game.player);n+=l.html,o.push(c),i.push(l.event),a=1}n+='<li class="option" id="endturn">end turn</li>',n+="</ul>",this.updateStatus(n),$(".option").on("click",(function(){var n=$(this).attr("id");if(1==a)for(var c=0;c<i.length;c++)n==i[c]&&($(this).remove(),s[o[c]].menuOptionActivated(r,"continue",r.game.player));if("endturn"==n)return r.addMove("resolve\tplay"),r.addMove("setvar\tstate\t0\tactive_player_moved\tint\t0"),r.endTurn(),0;if("trade"==n)return r.addMove("continue\t"+r.game.player+"\t"+t),r.playerTurn(),0;if("land"==n)return r.addMove("continue\t"+r.game.player+"\t"+t),r.playerSelectInfantryToLand(t),0;if("produce"==n){var l=r.returnSpareFleetSupplyInSector(r.game.player,t);if(l<=1){var u="You have no spare fleet supply in this sector. Do you still wish to produce more ships?";return 1==l&&(u="You have fleet supply for 1 additional capital ship in this sector. Do you still wish to produce more ships?"),void(sconfirm(u)&&(r.addMove("continue\t"+r.game.player+"\t"+t),r.playerProduceUnits(t)))}r.addMove("continue\t"+r.game.player+"\t"+t),r.playerProduceUnits(t)}if("invade"==n){if(("new-byzantium"===t||"4_4"==t)&&-1==r.game.planets["new-byzantium"].owner)return r.returnAvailableInfluence(r.game.player)>=6?void r.playerSelectInfluence(6,(function(n){r.game.tracker.invasion=1,r.playerInvadePlanet(e,t)})):void salert("The first conquest of New Byzantium requires spending 6 influence, which you lack.");r.game.tracker.invasion=1,r.playerInvadePlanet(e,t)}"action"==n&&r.playerSelectActionCard((function(e){r.game.tracker.action_card=1,r.addMove("continue\t"+r.game.player+"\t"+t),r.addMove("action_card_post\t"+r.game.player+"\t"+e),r.addMove("action_card\t"+r.game.player+"\t"+e),r.addMove("lose\t"+r.game.player+"\taction_cards\t1"),r.endTurn()}),(function(){r.playerContinueTurn(e,t)})),"score"==n&&r.playerScoreActionStageVictoryPoints(r,(function(e,r,n){e.addMove("continue\t"+e.game.player+"\t"+t),r>0&&e.addMove("score\t"+e.game.player+"\t"+r+"\t"+n),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(n),e.endTurn()}))}))}},{key:"playerBuyTokens",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this;if(this.returnAvailableInfluence(this.game.player)<=2)return this.updateLog("You skip the initiative secondary, as you lack adequate influence..."),this.updateStatus("Skipping purchase of tokens as insufficient influence..."),1==t&&r.addMove("resolve\tstrategy\t1\t"+r.app.wallet.returnPublicKey()),this.endTurn(),0;var n='<div class="sf-readable">Do you wish to purchase any command or strategy tokens, or increase your fleet supply?</div><ul>';2==e&&(n='<div class="sf-readable">Leadership has been played. Do you wish to purchase any additional command or strategy tokens, or increase your fleet supply?</div><ul>',1==r.game.state.round&&(n="The Leadership strategy card has been played. This lets you spend 3 influence to purchase additional command tokens, strategy tokens or fleet supply. Do you wish to purchase any additional tokens: </p><ul>")),n+='<li class="buildchoice textchoice" id="skip">Do Not Purchase</li>',n+='<li class="buildchoice textchoice" id="command">Command Tokens  +<span class="command_total">0</span></li>',n+='<li class="buildchoice textchoice" id="strategy">Strategy Tokens +<span class="strategy_total">0</span></li>',n+='<li class="buildchoice textchoice" id="fleet">Fleet Supply  +<span class="fleet_total">0</span></li>',n+="</ul></p>",n+="",n+='<div id="buildcost" class="buildcost"><span class="buildcost_total">0</span> influence</div>',n+='<div id="confirm" class="buildchoice">click here to finish</div>',this.updateStatus(n);var a=0,i=0,o=0,s=0;r.lockInterface(),$(".buildchoice").off(),$(".buildchoice").on("click",(function(){if(r.mayUnlockInterface()){var e=$(this).attr("id");if("skip"==e)return 1==t&&r.addMove("resolve\tstrategy\t1\t"+r.app.wallet.returnPublicKey()),r.unlockInterface(),void r.endTurn();"confirm"==e&&(s=3*(o+a+i),1==t&&(r.addMove("resolve\tstrategy\t1\t"+r.app.wallet.returnPublicKey()),r.addPublickeyConfirm(r.app.wallet.returnPublicKey(),1)),r.unlockInterface(),r.playerSelectInfluence(s,(function(e){if(1==e)return r.addMove("purchase\t"+r.game.player+"\tcommand\t"+a),r.addMove("purchase\t"+r.game.player+"\tstrategy\t"+i),r.addMove("purchase\t"+r.game.player+"\tfleetsupply\t"+o),void r.endTurn();r.endTurn()}))),"command"==e&&a++,"strategy"==e&&i++,"fleet"==e&&o++;var n="."+e+"_total",c=parseInt($(n).html());c++,$(n).html(c),s=3*(a+i+o),$(".buildcost_total").html(s);var l=0;return s>r.returnAvailableInfluence(r.game.player)&&(salert("You cannot buy more tokens than you have influence available to pay"),l=1),1==l?(s=0,a=0,i=0,o=0,$(".command_total").html(0),$(".strategy_total").html(0),void $(".fleet_total").html(0)):void 0}salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"playerBuyActionCards",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this,r='<div class="sf-readable">Do you wish to spend 1 strategy token to purchase 2 action cards?</div><ul>';2==e&&(r='<div class="sf-readable">Politics has been played: do you wish to spend 1 strategy token to purchase 2 action cards?</div><ul>',1==t.game.state.round&&(r="".concat(t.returnFaction(t.game.player)," has played the Politics strategy card. This lets you to spend 1 strategy token to purchase 2 action cards, which provide special one-time abilities. You have ").concat(t.game.players_info[t.game.player-1].strategy_tokens," strategy tokens. Purchase action cards: </p><ul>"))),r+='<li class="buildchoice textchoice" id="yes">Purchase Action Cards</li>',r+='<li class="buildchoice textchoice" id="no">Do Not Purchase Action Cards</li>',r+="</ul>",this.updateStatus(r),t.lockInterface(),$(".buildchoice").off(),$(".buildchoice").on("click",(function(){if(t.mayUnlockInterface())return t.unlockInterface(),"yes"==$(this).attr("id")?(t.addMove("resolve\tstrategy\t1\t"+t.app.wallet.returnPublicKey()),t.addPublickeyConfirm(t.app.wallet.returnPublicKey(),1),t.addMove("NOTIFY\t"+t.returnFaction(t.game.player)+" gets action cards"),t.addMove("gain\t"+t.game.player+"\taction_cards\t2"),t.addMove("DEAL\t2\t"+t.game.player+"\t2"),t.addMove("expend\t"+t.game.player+"\tstrategy\t1"),t.endTurn(),void t.updateStatus("submitted...")):(t.addMove("resolve\tstrategy\t1\t"+t.app.wallet.returnPublicKey()),t.addPublickeyConfirm(t.app.wallet.returnPublicKey(),1),t.endTurn(),void t.updateStatus("submitted..."));salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"playerBuySecretObjective",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this,r='<div class="sf-readable">Do you wish to spend 1 strategy token to purchase a Secret Objective?</div><ul>';2==e&&(r='<div class="sf-readable">The Imperial Strategy card has been played: do you wish to spend 1 strategy token to purchase a Secret Objective?</div><ul>',1==t.game.state.round&&(r="".concat(t.returnFaction(t.game.player)," has played the Imperial strategy card. This lets you to spend 1 strategy token to purchase an additional secret bjective. You have ").concat(t.game.players_info[t.game.player-1].strategy_tokens," strategy tokens. Purchase secret objective: </p><ul>"))),r+='<li class="buildchoice textchoice" id="yes">Purchase Secret Objective</li>',r+='<li class="buildchoice textchoice" id="no">Do Not Purchase</li>',r+="</ul>",this.updateStatus(r),t.lockInterface(),$(".buildchoice").off(),$(".buildchoice").on("click",(function(){if(t.mayUnlockInterface())return t.unlockInterface(),"yes"==$(this).attr("id")?(t.addMove("resolve\tstrategy\t1\t"+t.app.wallet.returnPublicKey()),t.addPublickeyConfirm(t.app.wallet.returnPublicKey(),1),t.addMove("gain\t"+t.game.player+"\tsecret_objective\t1"),t.addMove("DEAL\t6\t"+t.game.player+"\t1"),t.addMove("expend\t"+t.game.player+"\tstrategy\t1"),t.endTurn(),void t.updateStatus("submitted...")):(t.addMove("resolve\tstrategy\t1\t"+t.app.wallet.returnPublicKey()),t.addPublickeyConfirm(t.app.wallet.returnPublicKey(),1),t.endTurn(),void t.updateStatus("submitted..."));salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"playerResearchTechnology",value:function(e){var t=this,r='<div class="sf-readable">You are eligible to upgrade to the following technologies: </div><ul>';for(var n in this.tech)this.canPlayerResearchTechnology(n)&&(r+='<li class="option" id="'+n+'">'+this.tech[n].name+"</li>");r+="</ul>",this.updateStatus(r),t.lockInterface(),$(".option").off(),$(".option").on("mouseenter",(function(){var e=$(this).attr("id");t.showTechCard(e)})),$(".option").on("mouseleave",(function(){var e=$(this).attr("id");t.hideTechCard(e)})),$(".option").on("click",(function(){if(t.mayUnlockInterface()){t.unlockInterface();var r=$(this).attr("id");t.hideTechCard(r),t.exhaustPlayerResearchTechnologyPrerequisites(r),e($(this).attr("id"))}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"canPlayerScoreActionStageVictoryPoints",value:function(e){for(var t="",r=0;r<this.game.deck[5].hand.length;r++)this.game.players_info[this.game.player-1].objectives_scored.includes(this.game.deck[5].hand[r])||this.canPlayerScoreVictoryPoints(this.game.player,this.game.deck[5].hand[r],3)&&"action"===this.secret_objectives[this.game.deck[5].hand[r]].phase&&(t+='<li class="option secret3" id="'+this.game.deck[5].hand[r]+'">'+this.secret_objectives[this.game.deck[5].hand[r]].name+"</li>");return t}},{key:"playerScoreActionStageVictoryPoints",value:function(e,t){var r="",n=e.game.player;r+='<div class="sf-readable">Do you wish to score a secret objective? </div><ul>',r+=this.canPlayerScoreActionStageVictoryPoints(n),r+='<li class="option cancel" id="cancel">cancel</li>',r+="</ul>",e.updateStatus(r),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var r=$(this).attr("id");if($(this).hasClass("stage1"),$(this).hasClass("stage2"),$(this).hasClass("secret3"),"no"===r)t(e,0,"");else{var n=r,a=1;e.secret_objectives[n]&&e.secret_objectives[n].vp>1&&(a=e.stage_ii_objectives[n].vp),t(e,a,n)}}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"canPlayerScoreVictoryPoints",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(""==t)return 0;var n=this;if(1==r){var a=this.returnStageIPublicObjectives();if(""!=a[t]&&1==a[t].canPlayerScoreVictoryPoints(n,e))return 1}if(2==r){var i=this.returnStageIIPublicObjectives();if(""!=i[t]&&1==i[t].canPlayerScoreVictoryPoints(n,e))return 1}if(3==r){var o=this.returnSecretObjectives();if(""!=o[t]&&1==o[t].canPlayerScoreVictoryPoints(n,e))return 1}return 0}},{key:"playerScoreSecretObjective",value:function(e,t){var r="";r+='<div class="sf-readable">Do you wish to score any Secret Objectives? </div><ul>';for(var n=0;n<e.game.deck[5].hand.length;n++)e.game.players_info[e.game.player-1].objectives_scored.includes(e.game.deck[5].hand[n])||e.canPlayerScoreVictoryPoints(e.game.player,e.game.deck[5].hand[n],3)&&(e.game.players_info[e.game.player-1].objectives_scored_this_round.includes(e.game.deck[5].hand[n])||(r+='1 VP Secret Objective: <li class="option secret3" id="'+e.game.deck[5].hand[n]+'">'+e.game.deck[5].cards[e.game.deck[5].hand[n]].name+"</li>"));r+='<li class="option" id="no">I choose not to score...</li>',r+="</ul>",e.updateStatus(r),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var r=$(this).attr("id");if("no"==r)t(e,0,"");else{var n=r,a=1;e.secret_objectives[n]&&e.secret_objectives[n].vp>1&&(a=e.secret_objectives[n].vp),t(e,a,n)}}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"playerScoreVictoryPoints",value:function(e,t){var r="";if(0==e.doesPlayerControlHomeworld(e.game.player))return r+='<div class="sf-readable">You cannot score public objectives without control of your Homeworld: </div><ul>',r+='<li class="option" id="no">I choose not to score...</li>',r+="</ul>",e.updateStatus(r),e.lockInterface(),$(".option").off(),void $(".option").on("click",(function(){e.mayUnlockInterface()?(e.unlockInterface(),t(e,0,"")):salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}));r+='<div class="sf-readable">Do you wish to score any public objectives? </div><ul>';for(var n=0;n<e.game.state.stage_i_objectives.length;n++)e.game.players_info[e.game.player-1].objectives_scored.includes(e.game.state.stage_i_objectives[n])||e.canPlayerScoreVictoryPoints(e.game.player,e.game.state.stage_i_objectives[n],1)&&(e.game.players_info[e.game.player-1].objectives_scored_this_round.includes(e.game.state.stage_i_objectives[n])||(r+='1 VP Public Objective: <li class="option stage1" id="'+e.game.state.stage_i_objectives[n]+'">'+e.game.deck[3].cards[e.game.state.stage_i_objectives[n]].name+"</li>"));for(var a=0;a<e.game.state.stage_ii_objectives.length;a++)e.game.players_info[e.game.player-1].objectives_scored.includes(e.game.state.stage_ii_objectives[a])||e.canPlayerScoreVictoryPoints(e.game.player,e.game.state.stage_ii_objectives[a],2)&&(e.game.players_info[e.game.player-1].objectives_scored_this_round.includes(e.game.state.stage_ii_objectives[a])||(r+='2 VP Public Objective: <li class="option stage2" id="'+e.game.state.stage_ii_objectives[a]+'">'+e.game.deck[4].cards[e.game.state.stage_ii_objectives[a]].name+"</li>"));r+='<li class="option" id="no">I choose not to score...</li>',r+="</ul>",e.updateStatus(r),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var r=$(this).attr("id");if($(this).hasClass("stage1"),$(this).hasClass("stage2"),$(this).hasClass("secret3"),"no"===r)t(e,0,"");else{var n=r,a=1;e.stage_ii_objectives[n]&&e.stage_ii_objectives[n].vp>1&&(a=e.stage_ii_objectives[n].vp),t(e,a,n)}}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"playerBuildInfrastructure",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this,n="";n+=1==t?"<div class='sf-readable'>Which would you like to build: </div><ul>":"<div class='sf_readable'>You may also build an additional PDS: </div><ul>",n+='<li class="buildchoice" id="pds">Planetary Defense System</li>',1==t&&(n+='<li class="buildchoice" id="spacedock">Space Dock</li>'),n+="</ul>",this.updateStatus(n),r.lockInterface(),$(".buildchoice").off(),$(".buildchoice").on("mouseenter",(function(){var e=$(this).attr("id");r.showUnit(e)})),$(".buildchoice").on("mouseleave",(function(){var e=$(this).attr("id");r.hideUnit(e)})),$(".buildchoice").on("click",(function(){if(r.mayUnlockInterface()){r.unlockInterface(),$(".buildchoice").off();var n=$(this).attr("id");r.playerSelectPlanetWithFilter("Select a planet on which to build: ",(function(e){var t=0;if(r.game.planets[e].owner==r.game.player){for(var a=0;a<r.game.planets[e].units[r.game.player-1].length;a++)r.game.planets[e].units[r.game.player-1][a].type==n&&t++;return"pds"===n&&t>=r.game.state.pds_limit_per_planet||"spacedock"===n&&t>=1?0:1}return 0}),(function(t){"pds"==n&&(r.addMove("produce\t"+r.game.player+"\t1\t"+r.game.planets[t].idx+"\tpds\t"+r.game.planets[t].sector),e(r.game.planets[t].sector)),"spacedock"==n&&(r.addMove("produce\t"+r.game.player+"\t1\t"+r.game.planets[t].idx+"\tspacedock\t"+r.game.planets[t].sector),e(r.game.planets[t].sector))}),(function(){r.unlockInterface(),r.playerBuildInfrastructure(e,t)}))}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"playerProduceUnits",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=this,i=this.returnPlayerFleet(a.game.player),o={infantry:0,fighters:0,carriers:0,cruisers:0,dreadnaughts:0,destroyers:0,flagships:0,warsuns:0},s=this.returnSectorAndPlanets(e),c=a.returnAvailableResources(a.game.player);c+=a.game.players_info[a.game.player-1].production_bonus;for(var l=0,u=0;u<s.s.units[this.game.player-1].length;u++)l+=s.s.units[this.game.player-1][u].production;for(var d=0;d<s.p.length;d++)for(var h=0;h<s.p[d].units[this.game.player-1].length;h++)l+=s.p[d].units[this.game.player-1][h].production,"spacedock"===s.p[d].units[this.game.player-1][h].type&&(l+=s.p[d].resources);console.log("Calculated Production Limit: "+l),1==this.game.players_info[this.game.player-1].may_player_produce_without_spacedock&&(0==t&&this.game.players_info[this.game.player-1].may_player_produce_without_spacedock_production_limit>=0&&(t=this.game.players_info[this.game.player-1].may_player_produce_without_spacedock_production_limit),0==r&&this.game.players_info[this.game.player-1].may_player_produce_without_spacedock_cost_limit>=0&&(r=this.game.players_info[this.game.player-1].may_player_produce_without_spacedock_cost_limit)),l>t&&(t=l);var p='<div class="sf-readable">Produce Units in this Sector: ';0!=t&&(p+="("+t+" units max)"),0!=r&&(p+="("+r+" cost max)"),p+="</div><ul>",c>=1&&(p+='<li class="buildchoice" id="infantry">Infantry - <span class="infantry_total">0</span></li>'),c>=1&&(p+='<li class="buildchoice" id="fighter">Fighter - <span class="fighter_total">0</span></li>'),c>=1&&(p+='<li class="buildchoice" id="destroyer">Destroyer - <span class="destroyer_total">0</span></li>'),c>=3&&(p+='<li class="buildchoice" id="carrier">Carrier - <span class="carrier_total">0</span></li>'),c>=2&&(p+='<li class="buildchoice" id="cruiser">Cruiser - <span class="cruiser_total">0</span></li>'),c>=4&&(p+='<li class="buildchoice" id="dreadnaught">Dreadnaught - <span class="dreadnaught_total">0</span></li>'),c>=8&&this.canPlayerProduceFlagship(a.game.player)&&(p+='<li class="buildchoice" id="flagship">Flagship - <span class="flagship_total">0</span></li>'),1==a.game.players_info[a.game.player-1].may_produce_warsuns&&c>=12&&(p+='<li class="buildchoice" id="warsun">War Sun - <span class="warsun_total">0</span></li>'),p+="</ul>",p+="</p>",p+='<div id="buildcost" class="buildcost"><span class="buildcost_total">0 resources</span></div>',p+='<div id="confirm" class="buildchoice">click here to build</div>',this.updateStatus(p);var f=[];a.lockInterface(),$(".buildchoice").off(),$(".buildchoice").on("mouseenter",(function(){var e=$(this).attr("id");a.showUnit(e)})),$(".buildchoice").on("mouseleave",(function(){var e=$(this).attr("id");a.hideUnit(e)})),$(".buildchoice").on("click",(function(){if(a.mayUnlockInterface()){var s=$(this).attr("id");if("confirm"==s){$(".buildchoice").off();for(var c=0,u=0;u<f.length;u++)c+=a.returnUnitCost(f[u],a.game.player);return a.game.players_info[a.game.player-1].production_bonus>0&&(c-=a.game.players_info[a.game.player-1].production_bonus)<0&&(c=0),0==n?(a.addMove("resolve\tplay"),a.addMove("continue\t"+a.game.player+"\t"+e)):(a.addMove("resolve\tstrategy\t1\t"+a.app.wallet.returnPublicKey()),a.addPublickeyConfirm(a.app.wallet.returnPublicKey(),1),a.addMove("expend\t"+a.game.player+"\tstrategy\t1")),a.unlockInterface(),void a.playerSelectResources(c,(function(t){if(1!=t)salert("failure to find appropriate influence");else{a.addMove("post_production\t"+a.game.player+"\t"+e+"\t"+JSON.stringify(f));for(var r=0;r<f.length;r++){var n=a.returnPlayersLeastDefendedPlanetInSector(a.game.player,e);"infantry"!=f[r]&&(n=-1),a.addMove("produce\t"+a.game.player+"\t1\t"+n+"\t"+f[r]+"\t"+e),a.addMove("setvar\tstate\t0\tactive_player_has_produced\t1"),a.game.tracker.production=1}a.endTurn()}}))}for(var d=0,h=0;h<f.length;h++)d+=a.returnUnitCost(f[h],a.game.player);d+=a.returnUnitCost(s,a.game.player),a.game.players_info[a.game.player-1].production_bonus>0&&(d-=a.game.players_info[a.game.player-1].production_bonus);var p=0;if("fighter"==s&&o.fighters+i.fighters>a.game.players_info[a.game.player-1].fighter_limit&&(salert("You can only have "+a.game.players_info[a.game.player-1].fighter_limit+" fighters on the board"),p=1),"infantry"==s&&o.infantry+i.infantry>a.game.players_info[a.game.player-1].infantry_limit&&(salert("You can only have "+a.game.players_info[a.game.player-1].infantry_limit+" infantry on the board"),p=1),"destroyer"==s&&o.destroyers+i.destroyers>a.game.players_info[a.game.player-1].destroyer_limit&&(salert("You can only have "+a.game.players_info[a.game.player-1].destroyer_limit+" destroyers on the board"),p=1),"carrier"==s&&o.carriers+i.carriers>a.game.players_info[a.game.player-1].carrier_limit&&(salert("You can only have "+a.game.players_info[a.game.player-1].carrier_limit+" carriers on the board"),p=1),"cruiser"==s&&o.cruisers+i.cruisers>a.game.players_info[a.game.player-1].cruiser_limit&&(salert("You can only have "+a.game.players_info[a.game.player-1].cruiser_limit+" cruisers on the board"),p=1),"dreadnaught"==s&&o.dreadnaughts+i.dreadnaughts>a.game.players_info[a.game.player-1].dreadnaught_limit&&(salert("You can only have "+a.game.players_info[a.game.player-1].dreadnaught_limit+" dreadnaughts on the board"),p=1),"flagship"==s&&o.flagships+i.flagships>a.game.players_info[a.game.player-1].flagships_limit&&(salert("You can only have "+a.game.players_info[a.game.player-1].flagship_limit+" flagships on the board"),p=1),"warsun"==s&&o.warsuns+i.warsuns>a.game.players_info[a.game.player-1].warsun_limit&&(salert("You can only have "+a.game.players_info[a.game.player-1].warsun_limit+" warsuns on the board"),p=1),d>a.returnAvailableResources(a.game.player)&&(salert("You cannot build more than you have available to pay for it."),p=1),t<f.length&&t>0&&(salert("You cannot build more units than your production limit"),p=1),r<d&&r>0&&(salert("You cannot build units that cost more than your cost limit"),p=1),f.length+1>l&&(salert("You cannot build more units than your production limit"),p=1),1==p)return f=[],$(".infantry_total").html(0),$(".fighter_total").html(0),$(".destroyer_total").html(0),$(".carrier_total").html(0),$(".cruiser_total").html(0),$(".dreadnaught_total").html(0),$(".flagship_total").html(0),$(".warsun_total").html(0),(o={}).infantry=0,o.fighters=0,o.carriers=0,o.cruisers=0,o.dreadnaughts=0,o.destroyers=0,o.flagships=0,void(o.warsuns=0);f.push(s);for(var m=0,g=0;g<f.length;g++)m+=a.returnUnitCost(f[g],a.game.player);var y="."+s+"_total",v=parseInt($(y).html());v++,$(y).html(v),a.game.players_info[a.game.player-1].production_bonus>0&&(m-=a.game.players_info[a.game.player-1].production_bonus,a.updateLog("Production Costs reduced by 1"));var b=" resources";1==m&&(b=" resource"),$(".buildcost_total").html(m+b)}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"playerHandleTradeOffer",value:function(e,t,r,n){var a=this;if(t.promissaries&&t.promissaries.length>0)for(var i=0;i<t.promissaries.length;i++){var o=t.promissaries[i].promissary.split("-"),s=a.factions[o[0]].name;"".concat(s," - ").concat(a.promissary_notes[o[1]].name)}if(r.promissaries&&r.promissaries.length>0)for(var c=0;c<r.promissaries.length;c++){var l=r.promissaries[c].promissary.split("-"),u=a.factions[l[0]].name;"".concat(u," - ").concat(a.promissary_notes[l[1]].name)}var d='<div class="sf-readable">You have received a trade offer from '+a.returnFaction(e)+". ";d+=n,d+=": </div><ul>",d+='  <li class="option" id="yes">accept trade</li>',d+='  <li class="option" id="no">refuse trade</li>',d+="</ul>",a.updateStatus(d),$(".option").off(),$(".option").on("click",(function(){var n=$(this).attr("id");return"no"==n?(a.addMove("refuse_offer\t"+a.game.player+"\t"+e),a.endTurn(),0):"yes"==n?(a.addMove("trade\t"+e+"\t"+a.game.player+"\t"+JSON.stringify(t)+"\t"+JSON.stringify(r)),a.endTurn(),0):void 0}))}},{key:"playerTrade",value:function(){var e=this.returnFactions(),t=0,r=0,n=[],a=[],i=0,o=0,s=function(t,r,n,a){for(var s='<div class="sf-readable">Make Trade Offer to Faction: </div><ul>',c=0;c<t.game.players_info.length;c++)0==t.game.players_info[c].traded_this_turn&&c+1!=t.game.player&&t.arePlayersAdjacent(t.game.player,c+1)&&(s+='  <li class="option" id="'.concat(c,'">').concat(e[t.game.players_info[c].faction].name,"</li>"));s+='  <li class="option" id="cancel">cancel</li>',s+="</ul>",t.updateStatus(s),$(".option").off(),$(".option").on("click",(function(){var e=$(this).attr("id");if("cancel"==e)return t.playerTurn(),0;i=t.game.players_info[t.game.player-1].commodities+t.game.players_info[t.game.player-1].goods,o=t.game.players_info[parseInt(e)].commodities+t.game.players_info[parseInt(e)].goods,n(t,parseInt(e)+1,r,n,a)}))};s(this,s,(function(e,s,c,l,u){for(var d="no promissaries",h=0;h<a.length;h++){0==h&&(d="");var p=a[h].promissary.split("-"),f=e.factions[p[0]].name;h>0&&(d+=", "),d+="".concat(f," - ").concat(e.promissary_notes[p[1]].name)}for(var m="no promissaries",g=0;g<n.length;g++){0==g&&(m="");var y=n[g].promissary.split("-"),v=e.factions[y[0]].name;g>0&&(m+=", "),m+="".concat(v," - ").concat(e.promissary_notes[y[1]].name)}var b="<div class='sf-readable'>Make an Offer: </div><ul>";b+='<li id="to_offer" class="option">you give <span class="offer_total">'+t+"</span> trade goods</li>",b+='<li id="to_receive" class="option">you receive <span class="receive_total">'+r+"</span> trade goods</li>",b+='<li id="promissary_offer" class="option">you give <span class="give_promissary">'+m+"</span></li>",b+='<li id="promissary_receive" class="option">you receive <span class="receive_promissary">'+d+"</span></li>",b+='<li id="confirm" class="option">submit offer</li>',b+='<li id="cancel" class="option">cancel</li>',b+="</ul>",e.updateStatus(b),$(".option").off(),$(".option").on("click",(function(){var d=$(this).attr("id");if("to_offer"==d&&++t>i&&(t=0),"to_receive"==d&&++r>o&&(r=0),"cancel"!=d)if("promissary_offer"!=d)if("promissary_receive"!=d){if("confirm"==d){var h={};h.goods=$(".offer_total").html(),h.promissaries=n;var p={};p.goods=$(".receive_total").html(),p.promissaries=a,e.addMove("offer\t"+e.game.player+"\t"+s+"\t"+JSON.stringify(h)+"\t"+JSON.stringify(p)),e.updateStatus("trade offer submitted"),e.endTurn()}$(".offer_total").html(t),$(".receive_total").html(r)}else u(e,s,2,c,l,u);else u(e,s,1,c,l,u);else e.playerTurn()}))}),(function(e,t,r,i,o,s){if(1==r){for(var c='<div class="sf-readable">Add Promissary to YOUR Offer: </div><ul>',l=0;l<e.game.players_info[e.game.player-1].promissary_notes.length;l++){for(var u=e.game.players_info[e.game.player-1].promissary_notes[l],d=u.split("-"),h=e.factions[d[0]].name,p=0,f=0;f<n.length;f++)n[f].promissary===u&&(p=1);0==p&&(c+='  <li class="option" id="'.concat(l,'">').concat(h," - ").concat(e.promissary_notes[d[1]].name,"</li>"))}c+='  <li class="option" id="cancel">cancel</li>',e.updateStatus(c),$(".option").off(),$(".option").on("click",(function(){var r=$(this).attr("id");if("cancel"==r)return o(e,t,i,o,s),0;var a={player:e.game.player,promissary:e.game.players_info[e.game.player-1].promissary_notes[r]};n.push(a),o(e,t,i,o,s)}))}if(2==r){for(var m='<div class="sf-readable">Request Promissary FROM them: </div><ul>',g=0;g<e.game.players_info[t-1].promissary_notes.length;g++){for(var y=e.game.players_info[t-1].promissary_notes[g],v=y.split("-"),b=e.factions[v[0]].name,_=0,w=0;w<a.length;w++)a[w].promissary===y&&(_=1);0==_&&(m+='  <li class="option" id="'.concat(g,'">').concat(b," - ").concat(e.promissary_notes[v[1]].name,"</li>"))}m+='  <li class="option" id="cancel">cancel</li>',e.updateStatus(m),$(".option").off(),$(".option").on("click",(function(){var r=$(this).attr("id");if("cancel"==r)return o(e,t,i,o,s),0;var n={player:t,promissary:e.game.players_info[t-1].promissary_notes[r]};a.push(n),o(e,t,i,o,s)}))}}))}},{key:"playerSelectSector",value:function(e){$(".sector").off(),$(".sector").on("click",(function(){$(".sector").off();var t=$(this).attr("id");e(t)}))}},{key:"playerSelectPlanet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this,n="Select a system in which to select a planet: ";this.updateStatus(n),$(".sector").on("click",(function(){var a=$(this).attr("id"),i=r.returnSectorAndPlanets(a);if(2==t){for(var o=0,s=0;s<i.p.length;s++)i.p[s].owner==r.game.player&&(o=1);if(0==o)return void salert("Invalid Choice: you do not control planets in that sector")}n='<div class="sf-readable">Select a planet in this system: </div><ul>';for(var c=0;c<i.p.length;c++)0==t&&(n+='<li class="option" id="'+c+'">'+i.p[c].name+' - <span class="invadeplanet_'+c+'">0</span></li>'),1==t&&(n+='<li class="option" id="'+c+'">'+i.p[c].name+' - <span class="invadeplanet_'+c+'">0</span></li>'),2==t&&i.p[c].owner==r.game.player&&(n+='<li class="option" id="'+c+'">'+i.p[c].name+"</li>");n+="</ul>",r.updateStatus(n),$(".option").off(),$(".option").on("mouseenter",(function(){var e=$(this).attr("id");r.showPlanetCard(a,e),r.showSectorHighlight(a)})),$(".option").on("mouseleave",(function(){var e=$(this).attr("id");r.hidePlanetCard(a,e),r.hideSectorHighlight(a)})),$(".option").on("click",(function(){var t=$(this).attr("id");r.hidePlanetCard(a,t),e(a,t)}))}))}},{key:"playerSelectInfluence",value:function(e,t){if(0!=e){for(var r=this,n=this.returnPlayerUnexhaustedPlanetCards(this.game.player),a=[],i=0,o=r.game.players_info[r.game.player-1].goods,s="<div class='sf-readable'>Select "+e+" in influence: </div><ul>",c=0;c<n.length;c++)s+='<li class="cardchoice cardchoice-card" id="cardchoice_'+n[c]+'">'+this.returnPlanetCard(n[c])+"</li>";1==r.game.players_info[r.game.player-1].goods?s+='<li class="textchoice" id="trade_goods" style="clear:both">'+r.game.players_info[r.game.player-1].goods+" trade good</li>":s+='<li class="textchoice" id="trade_goods" style="clear:both">'+r.game.players_info[r.game.player-1].goods+" trade goods</li>",s+="</ul>",this.updateStatus(s),this.lockInterface(),$(".cardchoice , .textchoice").on("click",(function(){for(var s=$(this).attr("id"),c=s.split("_"),l="#"+s,u=c[1],d=0,h=0;h<n.length;h++)n[h]===u&&(d=h);if("trade_goods"==s?o>0&&(r.addMove("expend\t"+r.game.player+"\tgoods\t1"),o--,i+=1,1==o?$("#trade_goods").html(o+" trade good"):$("#trade_goods").html(o+" trade goods")):(r.addMove("expend\t"+r.game.player+"\tplanet\t"+n[d]),a.push(n[d]),$(l).off(),$(l).css("opacity","0.2"),i+=r.game.planets[n[d]].influence),e<=i){if(!r.mayUnlockInterface())return void salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.");r.unlockInterface(),$(".cardchoice , .textchoice").off(),t(1)}}))}else t(1)}},{key:"playerSelectStrategyAndCommandTokens",value:function(e,t){0==e&&t(1);var r=this,n=0,a="<div class='sf-readable'>Select "+e+" in Strategy and Command Tokens: </div><ul>";a+='<li class="textchoice" id="command">command tokens - <span class="available_command_tokens">'+r.game.players_info[r.game.player-1].command_tokens+"</span></li>",a+='<li class="textchoice" id="strategy">strategy tokens - <span class="available_strategy_tokens">'+r.game.players_info[r.game.player-1].strategy_tokens+"</span></li>",a+="</ul>",this.updateStatus(a),this.lockInterface(),$(".textchoice").on("click",(function(){var a=$(this).attr("id");if("strategy"==a){var i=parseInt($(".available_strategy_tokens").html());i>0&&(n++,$(".available_strategy_tokens").html(i-1),r.addMove("expend\t"+r.game.player+"\tstrategy\t1"))}if("command"==a){var o=parseInt($(".available_command_tokens").html());o>0&&(n++,$(".available_command_tokens").html(o-1),r.addMove("expend\t"+r.game.player+"\tcommand\t1"))}if(e<=n){if(!r.mayUnlockInterface())return void salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.");r.unlockInterface(),$(".textchoice").off(),t(1)}}))}},{key:"playerSelectResources",value:function(e,t){if(0!=e){for(var r=this,n=this.returnPlayerUnexhaustedPlanetCards(this.game.player),a=[],i=0,o=r.game.players_info[r.game.player-1].goods,s="<div class='sf-readable'>Select "+e+" in resources: </div><ul>",c=0;c<n.length;c++)s+='<li class="cardchoice cardchoice-card" id="cardchoice_'+n[c]+'">'+this.returnPlanetCard(n[c])+"</li>";1==r.game.players_info[r.game.player-1].goods?s+='<li class="textchoice" id="trade_goods" style="clear:both">'+r.game.players_info[r.game.player-1].goods+" trade good</li>":s+='<li class="textchoice" id="trade_goods" style="clear:both">'+r.game.players_info[r.game.player-1].goods+" trade goods</li>",s+="</ul>",this.updateStatus(s),this.lockInterface(),$(".cardchoice , .textchoice").on("click",(function(){for(var s=$(this).attr("id"),c=s.split("_"),l="#"+s,u=c[1],d=0,h=0;h<n.length;h++)n[h]===u&&(d=h);if("trade_goods"==s?o>0&&(r.addMove("expend\t"+r.game.player+"\tgoods\t1"),o--,i+=1,1==o?$("#trade_goods").html(o+" trade good"):$("#trade_goods").html(o+" trade goods")):(r.addMove("expend\t"+r.game.player+"\tplanet\t"+n[d]),a.push(n[d]),$(l).off(),$(l).css("opacity","0.2"),i+=parseInt(r.game.planets[n[d]].resources)),e<=i){if(!r.mayUnlockInterface())return void salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.");r.unlockInterface(),$(".cardchoice , .textchoice").off(),t(1)}}))}else t(1)}},{key:"playerSelectActionCard",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=this,a=this.returnPlayerActionCards(this.game.player,r);if(0==a.length)return this.playerAcknowledgeNotice("You do not have any action cards that can be played now",(function(){return null!=t?(t(),0):(n.playerTurn(),0)})),0;var i="";i+="<div class='sf-readable'>Select an action card: </div><ul>";for(var o=0;o<a.length;o++)if(!this.game.players_info[this.game.player-1].action_cards_played.includes(a[o])){var s=n.action_cards[a[o]];i+='<li class="textchoice pointer" id="'+a[o]+'">'+s.name+"</li>"}i+='<li class="textchoice pointer" id="cancel">cancel</li>',i+="</ul>",this.updateStatus(i),$(".textchoice").off(),$(".textchoice").on("mouseenter",(function(){var e=$(this).attr("id");"cancel"!=e&&n.showActionCard(e)})),$(".textchoice").on("mouseleave",(function(){var e=$(this).attr("id");"cancel"!=e&&n.hideActionCard(e)})),$(".textchoice").on("click",(function(){var r=$(this).attr("id");if("cancel"!=r&&n.hideActionCard(r),"cancel"===r)return t(),0;n.game.tracker&&(n.game.tracker.action_card=1),"action"==n.action_cards[r].type&&(n.game.state.active_player_moved=1),n.game.players_info[n.game.player-1].action_cards_played.push(r),e(r)}))}},{key:"playerSelectStrategyCard",value:function(e){var t=this.game.players_info[this.game.player-1].strategy,r=this.returnStrategyCards(),n=this,a="";for(var i in a+="<div class='sf-readable'>Select a strategy card: </div><ul>",t)this.game.players_info[this.game.player-1].strategy_cards_played.includes(t[i])||(a+='<li class="textchoice" id="'+t[i]+'">'+r[t[i]].name+"</li>");a+='<li class="textchoice pointer" id="cancel">cancel</li>',a+="</ul>",this.updateStatus(a),$(".textchoice").on("mouseenter",(function(){var e=$(this).attr("id");"cancel"!=e&&n.showStrategyCard(e)})),$(".textchoice").on("mouseleave",(function(){var e=$(this).attr("id");"cancel"!=e&&n.hideStrategyCard(e)})),$(".textchoice").on("click",(function(){var t=$(this).attr("id");"cancel"!=t&&n.hideStrategyCard(t),"cancel"!==t?e(t):n.playerTurn()}))}},{key:"playerSelectStrategyCards",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this,n=this.returnStrategyCards(),a="player_color_"+this.game.player,i=["strategy"],o=this.returnPlayerActionCards(this.game.player,i),s="<div class='terminal_header'><div class='player_color_box "+a+"'></div>"+this.returnFaction(this.game.player)+": select your strategy card:</div><ul>";this.game.state.round>1&&(s="<div class='terminal_header'>"+this.returnFaction(this.game.player)+": select your strategy card:</div><ul>"),o.length>0&&(s+='<li class="option" id="action">play action card</li>');var c=[],l=[],u=[];for(var d in this.strategy_cards)c.push(""),l.push({});for(var h=0;h<this.game.state.strategy_cards.length;h++){for(var p=parseInt(this.strategy_cards[this.game.state.strategy_cards[h]].rank);""!=c[p-1];)p++;c[p-1]='<li class="textchoice" id="'+this.game.state.strategy_cards[h]+'">'+n[this.game.state.strategy_cards[h]].name+"</li>",l[p-1]=n[this.game.state.strategy_cards[h]]}for(var f=0;f<c.length;f++)""!=c[f]&&(s+=c[f]);for(var m in n){for(var g=0,y=0;y<l.length;y++)n[m].name===l[y].name&&(g=1);var v=parseInt(n[m].rank);0==g&&(l[v-1]=n[m],u.push(n[m]))}if(s+="</ul></p>",this.updateStatus(s),$(".textchoice").off(),$(".textchoice").on("mouseenter",(function(){var e=$(this).attr("id");"cancel"!=e&&r.showStrategyCard(e)})),$(".textchoice").on("mouseleave",(function(){var e=$(this).attr("id");"cancel"!=e&&r.hideStrategyCard(e)})),$(".textchoice").on("click",(function(){var t=$(this).attr("id");if("action"==t)return r.playerSelectActionCard((function(e){return r.addMove("pickstrategy\t"+r.game.player),r.addMove("action_card_post\t"+r.game.player+"\t"+e),r.addMove("action_card\t"+r.game.player+"\t"+e),r.addMove("lose\t"+r.game.player+"\taction_cards\t1"),r.endTurn(),0}),(function(){r.playerSelectActionCards(action_card_player,card)}),["action"]),0;r.hideStrategyCard(t),e(t)})),0==o.length){var b="Select Your Strategy Card";1==t&&(b="Select Your FIRST Strategy Card"),2==t&&(b="Select Your SECOND Strategy Card"),3==t&&(b="Select Your THIRD Strategy Card"),4==t&&(b="Select Your FOURTH Strategy Card"),r.overlay.showCardSelectionOverlay(r.app,r,l,{title:b,subtitle:"you must play this card sometime during your turn",textAlign:"center",rowGap:"30px",columnGap:"30px",columns:4,unselectableCards:u,backgroundImage:"/imperium/img/starscape_background3.jpg",onCardSelect:function(t){r.overlay.hideOverlay(),r.hideStrategyCard(t),e(t)}},(function(){}))}}},{key:"playerRemoveInfantryFromPlanets",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2?arguments[2]:void 0,n=this,a="";a+='<div class="sf-readable">Remove '+t+" infantry from planets you control:</div>",a+="<ul>";var i=[];for(var o in this.game.planets){var s=this.game.planets[o];if(s.owner==e){for(var c=0,l=0;l<s.units[e-1].length;l++)"infantry"==s.units[e-1][l].type&&c++;c>0&&(a+='<li class="option textchoice" id="'+o+'">'+s.name+' - <div style="display:inline" id="'+o+'_infantry">'+c+"</div></li>")}}a+='<li class="option textchoice" id="end"></li>',a+="</ul>",this.updateStatus(a),$(".textchoice").off(),$(".textchoice").on("click",(function(){var a=$(this).attr("id");if("end"!=a){i.push({infantry:1,planet:a});var o="#"+a+"_infantry",s=$(o).html(),c=parseInt(s)-1;c<0&&(c=0),$(o).html(c),0==c&&$(this).remove(),i.length>=t&&$("#end").click()}else{for(var l=0;l<i.length;l++)for(var u=n.game.planets[i[l].planet],d=u.units[e-1].length,h=0;h<d;h++)"infantry"==u.units[e-1][h].type&&(u.units[e-1].splice(h,1),h=d+2,n.addMove("remove_infantry_from_planet\t"+e+"\t"+i[l].planet+"\t0"),n.addMove("NOTIFY\tREMOVING INFANTRY FROM PLANET: "+i[l].planet));r(i.length)}}))}},{key:"playerAddInfantryToPlanets",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2?arguments[2]:void 0,n=this,a="";a+='<div class="sf-readable">Add '+t+" infantry to planets you control:</div>",a+="<ul>";var i=[];for(var o in this.game.planets){var s=this.game.planets[o];if(s.owner==e){for(var c=0,l=0;l<s.units[e-1].length;l++)"infantry"==s.units[e-1][l].type&&c++;a+='<li class="option textchoice" id="'+o+'">'+s.name+' - <div style="display:inline" id="'+o+'_infantry">'+c+"</div></li>"}}a+='<li class="option textchoice" id="end"></li>',a+="</ul>",this.updateStatus(a),$(".textchoice").off(),$(".textchoice").on("click",(function(){var a=$(this).attr("id");if("end"!=a){i.push({infantry:1,planet:a});var o="#"+a+"_infantry",s=$(o).html(),c=parseInt(s)+1;$(o).html(c),i.length>=t&&$("#end").click()}else{for(var l=0;l<i.length;l++)n.addMove("add_infantry_to_planet\t"+e+"\t"+i[l].planet+"\t1");r(i.length)}}))}},{key:"playerSelectUnitsToMove",value:function(e){var t,r,n,a=[],i={max_hops:2};i.ship_move_bonus=this.game.players_info[this.game.player-1].ship_move_bonus+this.game.players_info[this.game.player-1].temporary_ship_move_bonus,i.fleet_move_bonus=this.game.players_info[this.game.player-1].fleet_move_bonus+this.game.players_info[this.game.player-1].temporary_fleet_move_bonus,i.ships_and_sectors=[],i.stuff_to_move=[],i.stuff_to_load=[],i.distance_adjustment=0,i.max_hops+=i.ship_move_bonus,i.max_hops+=i.fleet_move_bonus;var o=this.returnSectorsWithinHopDistance(e,i.max_hops,this.game.player);t=o.sectors,a=o.distance,r=o.hazards,n=o.hoppable;for(var s=0;s<a.length;s++)i.ship_move_bonus>0&&a[s]--,i.fleet_move_bonus>0&&a[s]--;i.ship_move_bonus>0&&(i.distance_adjustment+=i.ship_move_bonus),i.fleet_move_bonus>0&&(i.distance_adjustment+=i.fleet_move_bonus),i.ships_and_sectors=this.returnShipsMovableToDestinationFromSectors(e,t,a,r,n);var c=function(t,r,n){var a=0;r.ship_move_bonus>0&&(a+=r.ship_move_bonus),r.fleet_move_bonus>0&&(a+=r.fleet_move_bonus);for(var i=r.distance_adjustment-a,o="<div class='player_color_box player_color_"+t.game.player+"'></div> "+t.returnFaction(t.game.player)+": select ships to move<ul>",s=0;s<r.ships_and_sectors.length;s++){var c=t.returnSectorAndPlanets(r.ships_and_sectors[s].sector);o+='<b class="sector_name" id="'+r.ships_and_sectors[s].sector+'" style="margin-top:10px">'+c.s.name+"</b>",o+='<ul class="ship_selector">';for(var l=0;l<r.ships_and_sectors[s].ships.length;l++){for(var u=0,d=0;d<r.stuff_to_move.length;d++)1==r.stuff_to_move[d].already_moved&&(u=1),r.stuff_to_move[d].sector==r.ships_and_sectors[s].sector&&r.stuff_to_move[d].i==s&&r.stuff_to_move[d].ii==l&&(u=1);var h=0;"rift"===r.ships_and_sectors[s].hazards[l]&&(h=1),1==u?o+=0==h?'<li id="sector_'.concat(s,"_").concat(l,'" class=""><b>').concat(t.returnShipInformation(r.ships_and_sectors[s].ships[l]),"</b></li>"):'<li id="sector_'.concat(s,"_").concat(l,'" class=""><b>').concat(t.returnShipInformation(r.ships_and_sectors[s].ships[l]),"</b> - rift</li>"):r.ships_and_sectors[s].ships[l].move-(r.ships_and_sectors[s].adjusted_distance[l]+i)>=0&&(o+=0==h?'<li id="sector_'.concat(s,"_").concat(l,'" class="option">').concat(t.returnShipInformation(r.ships_and_sectors[s].ships[l]),"</li>"):'<li id="sector_'.concat(s,"_").concat(l,'" class="option">').concat(t.returnShipInformation(r.ships_and_sectors[s].ships[l])," - rift</li>"))}o+="</ul>"}o+="<hr />",o+='<div id="confirm" class="option">click here to move</div>',o+="<hr />",t.updateStatus(o);var p=".sector_name";$(p).on("mouseenter",(function(){var e=$(this).attr("id");t.addSectorHighlight(e)})),$(p).on("mouseleave",(function(){var e=$(this).attr("id");t.removeSectorHighlight(e)})),$(".option").off(),$(".option").on("click",(function(){var a=$(this).attr("id");if("confirm"!=a){if("clear"==a)return salert("To change movement options, please reload!"),void window.location.reload(!0);$(this).css("font-weight","bold"),this.classList.add("ship_selected");var i=a.split("_"),o=i[1],s=i[2],c=r.ships_and_sectors[o].distance,l=r.ships_and_sectors[o].sector,u=t.returnSectorAndPlanets(l),d=r.ships_and_sectors[o].ships[s],h=t.returnRemainingCapacity(d),f={i:o,ii:s,sector:l};c+r.distance_adjustment>d.move+r.fleet_move_bonus&&r.ship_move_bonus--,"fighter"==d.type&&(r.ships_and_sectors[o].ships[s].already_moved=1),r.stuff_to_move.push(f),n(t,r,n);for(var m=0,g=0;g<u.p.length;g++)for(var y=u.p[g].units[t.game.player-1],v=0;v<y.length;v++)"infantry"==y[v].type&&m++;for(var b=0;b<u.s.units[t.game.player-1].length;b++)"fighter"==u.s.units[t.game.player-1][b].type&&m++;for(var _=0;_<u.s.units[t.game.player-1].length;_++)if("fighter"==u.s.units[t.game.player-1][_].type){for(var w=0,x=0;x<r.stuff_to_move.length;x++)r.stuff_to_move[x].sector==l&&r.stuff_to_move[x].ii==_&&(w=1);1==w&&m--}if(h>0&&m>0){for(var k=0;k<r.stuff_to_load.length;k++){var S=r.stuff_to_load[k];S.i==o&&S.ii==s&&JSON.parse(r.stuff_to_load[k].unitjson).capacity_required}for(var E='<div class="sf-readable">This ship has <span class="capacity_remaining">'.concat(h,"</span> capacity. Infantry can capture planets and fighters can protect your fleet. Do you wish to add them? </div><ul>"),A=0;A<u.p.length;A++){for(var P=u.p[A].units[t.game.player-1],C=0,D=0;D<P.length;D++)"infantry"==P[D].type&&C++;C>0&&(E+='<li class="option textchoice" id="addinfantry_p_'+A+'">add infantry from '+u.p[A].name+' - <span class="add_infantry_remaining_'+A+'">'+C+"</span></li>")}for(var T=0,O=0;O<u.s.units[t.game.player-1].length;O++)if("fighter"==u.s.units[t.game.player-1][O].type){for(var M=0,I=0;I<r.stuff_to_move.length;I++)r.stuff_to_move[I].sector==l&&r.stuff_to_move[I].ii==O&&(M=1);0==M&&T++}E+='<li class="option textchoice" id="addfighter_s_s">add fighter - <span class="add_fighters_remaining">'+T+"</span></li>",E+='<li class="option textchoice" id="skip">finish</li>',E+="</ul></div>",$(".status-overlay").html(E),$(".status-overlay").show(),$(".status").hide(),$(".textchoice").off();for(var R=function(e){p="#addinfantry_p_"+e,$(p).on("mouseenter",(function(){t.addPlanetHighlight(l,e)})),$(p).on("mouseleave",(function(){t.removePlanetHighlight(l,e)}))},F=0;F<u.p.length;F++)R(F);p="#addfighter_s_s",$(p).on("mouseenter",(function(){t.addSectorHighlight(l)})),$(p).on("mouseleave",(function(){t.removeSectorHighlight(l)})),$(".textchoice").on("click",(function(){var e=$(this).attr("id").split("_"),n=e[0];if(h>0){if("addinfantry"===n){var a=e[2],i=".add_infantry_remaining_"+a,c=parseInt($(i).html()),d=parseInt($(".capacity_remaining").html()),p=t.unloadUnitFromPlanet(t.game.player,l,a,"infantry"),f=JSON.stringify(u.s.units[t.game.player-1][r.ships_and_sectors[o].ship_idxs[s]]);t.loadUnitByJSONOntoShip(t.game.player,l,r.ships_and_sectors[o].ship_idxs[s],p),$(i).html(c-1),$(".capacity_remaining").html(d-1);var m={};m.sector=l,m.source="planet",m.source_idx=a,m.unitjson=p,m.ship_idx=r.ships_and_sectors[o].ship_idxs[s],m.shipjson=f,m.i=o,m.ii=s,h--,r.stuff_to_load.push(m),1===d&&0==h&&($(".status").show(),$(".status-overlay").hide())}if("addfighter"===n){if(T<=0)return;var g=parseInt($(".add_fighters_remaining").html()),y=parseInt($(".capacity_remaining").html());$(".add_fighters_remaining").html(g-1),T--,$(".capacity_remaining").html(y-1);for(var v=r.ships_and_sectors.length,b=0;b<r.ships_and_sectors.length;b++)if(r.ships_and_sectors[b].sector===l)for(var _=r.ships_and_sectors[b].ships.length,w=0;w<_;w++)1==r.ships_and_sectors[b].ships[w].already_moved||"fighter"==r.ships_and_sectors[b].ships[w].type&&($("#sector_"+b+"_"+w).remove(),r.ships_and_sectors[b].ships[w]={},r.ships_and_sectors[b].adjusted_distance[w]=0,w=_+2,b=v+2);var x=t.removeSpaceUnit(t.game.player,l,"fighter"),k=JSON.stringify(u.s.units[t.game.player-1][r.ships_and_sectors[o].ship_idxs[s]]);t.loadUnitByJSONOntoShip(t.game.player,l,r.ships_and_sectors[o].ship_idxs[s],x);var S={};r.stuff_to_load.push(S),S.sector=l,S.source="ship",S.source_idx="",S.unitjson=x,S.ship_idx=r.ships_and_sectors[o].ship_idxs[s],S.shipjson=k,S.i=o,S.ii=s,h--,1==y&&0==h&&($(".status").show(),$(".status-overlay").hide())}}"skip"===n&&($(".status-overlay").hide(),$(".status").show())}))}}else{t.addMove("resolve\tplay"),t.addMove("space_invasion\t"+t.game.player+"\t"+e),t.addMove("check_fleet_supply\t"+t.game.player+"\t"+e);for(var B=0;B<r.stuff_to_move.length;B++){var j=r.stuff_to_move[B].i,N=r.stuff_to_move[B].ii,q=r.ships_and_sectors[j].hazards[N];t.addMove("move\t"+t.game.player+"\t1\t"+r.ships_and_sectors[r.stuff_to_move[B].i].sector+"\t"+e+"\t"+JSON.stringify(r.ships_and_sectors[r.stuff_to_move[B].i].ships[r.stuff_to_move[B].ii])+"\t"+q)}for(var L=r.stuff_to_load.length-1;L>=0;L--)t.addMove("load\t"+t.game.player+"\t0\t"+r.stuff_to_load[L].sector+"\t"+r.stuff_to_load[L].source+"\t"+r.stuff_to_load[L].source_idx+"\t"+r.stuff_to_load[L].unitjson+"\t"+r.stuff_to_load[L].shipjson);t.endTurn()}}))};c(this,i,c)}},{key:"playerSelectInfantryToLand",value:function(e){for(var t=this,r='<div id="status-message" class="imperial-status-message">Unload Infantry (source): <ul>',n=t.returnSectorAndPlanets(e),a=[],i=[],o=0;o<n.s.units[this.game.player-1].length;o++){var s=n.s.units[this.game.player-1][o];t.returnInfantryInUnit(s)>0&&(r+='<li class="option textchoice" id="addinfantry_s_'.concat(o,'">remove infantry from ').concat(s.name,' - <span class="add_infantry_remaining_s_').concat(o,'">').concat(t.returnInfantryInUnit(s),"</span></li>"))}for(var c=0;c<n.p.length;c++){var l=n.p[c];t.returnInfantryOnPlanet(l)>0&&(r+='<li class="option textchoice" id="addinfantry_p_'.concat(c,'">remove infantry from ').concat(l.name,' - <span class="add_infantry_remaining_p_').concat(c,'">').concat(t.returnInfantryOnPlanet(l),"</span></li>"))}r+="</ul>",r+="</div>",r+='<div id="confirm" class="option">click here to move</div>',t.updateStatus(r),$(".option").off(),$(".option").on("click",(function(){for(var r=$(this).attr("id"),o=[],s=0,c=0;c<n.p.length;c++)o.push(0);if("confirm"==r){for(var l=0;l<a.length;l++)t.addMove("unload_infantry\t"+t.game.player+"\t1\t"+e+"\tship\t"+a[l].ship_idx),s++;for(var u=0;u<i.length;u++)t.addMove("unload_infantry\t"+t.game.player+"\t1\t"+e+"\tplanet\t"+i[u].planet_idx),s++;for(var d='<div class="sf-readable" id="status-message">Reassign Infantry to Planets: <ul>',h=0;h<n.p.length;h++){for(var p=t.returnInfantryOnPlanet(n.p[h]),f=0;f<i.length;f++)i[f].planet_idx==h&&p--;d+='<li class="option textchoice" id="'.concat(h,'">').concat(n.p[h].name,' - <span class="infantry_on_').concat(h,'">').concat(p,"</span></li>")}d+='<div id="confirm" class="option">click here to move</div>',d+="</ul",d+="</div>",t.updateStatus(d),$(".option").off(),$(".option").on("click",(function(){var r=$(this).attr("id");if("confirm"==r&&t.endTurn(),s>0){s--;var n=".infantry_on_"+r,a=parseInt($(n).html());a++,$(n).html(a),t.addMove("load_infantry\t"+t.game.player+"\t1\t"+e+"\tplanet\t"+r)}}))}"clear"==r&&(salert("To change movement options, just reload!"),window.location.reload(!0));var m=r.split("_");if("p"===m[1]){var g=".add_infantry_remaining_p_"+m[2],y=parseInt($(g).html());y>0&&(i.push({planet_idx:m[2]}),$(g).html(y-1))}if("s"===m[1]){var v=".add_infantry_remaining_s_"+m[2],b=parseInt($(v).html());b>0&&(a.push({ship_idx:m[2]}),$(v).html(b-1))}}))}},{key:"playerInvadePlanet",value:function(e,t){var r=this,n=this.returnSectorAndPlanets(t),a=0,i=[],o=[],s=[];html='<div class="sf-readable">Which planet(s) do you invade: </div><ul>';for(var c=0;c<n.p.length;c++)n.p[c].owner!=e&&(html+='<li class="option sector_name" id="'+c+'">'+n.p[c].name+' - <span class="invadeplanet_'+c+'">0</span></li>');html+='<li class="option" id="confirm">launch invasion(s)</li>',html+="</ul>",this.updateStatus(html);var l=0,u=0,d=[],h=[];$(".option").off(),$(".sector_name").on("mouseenter",(function(){var e=$(this).attr("id");r.addPlanetHighlight(t,e)})),$(".sector_name").on("mouseleave",(function(){var e=$(this).attr("id");r.removePlanetHighlight(t,e)})),$(".option").on("click",(function(){var c=$(this).attr("id");if("confirm"===c){for(var p=0;p<s.length;p++)if(o.includes(s[p])){var f=n.p[s[p]].owner;r.prependMove("bombardment\t"+r.game.player+"\t"+t+"\t"+s[p]),r.prependMove("bombardment_post\t"+r.game.player+"\t"+t+"\t"+s[p]),r.prependMove("bombardment_post\t"+f+"\t"+t+"\t"+s[p]),r.prependMove("planetary_defense\t"+r.game.player+"\t"+t+"\t"+s[p]),r.prependMove("planetary_defense_post\t"+r.game.player+"\t"+t+"\t"+s[p]),r.prependMove("ground_combat_start\t"+r.game.player+"\t"+t+"\t"+s[p]),r.prependMove("ground_combat\t"+r.game.player+"\t"+t+"\t"+s[p]),r.prependMove("ground_combat_post\t"+r.game.player+"\t"+t+"\t"+s[p]),r.prependMove("ground_combat_end\t"+r.game.player+"\t"+t+"\t"+s[p])}return r.prependMove("continue\t"+r.game.player+"\t"+t),void r.endTurn()}s.includes(c)||s.push(c);for(var m=0;m<n.s.units[e-1].length;m++){for(var g=n.s.units[e-1][m],y=0;y<g.storage.length;y++)g.storage[y].type;n.s.units[e-1][m].capacity>0&&0==u&&(a+=n.s.units[e-1][m].capacity)}html='<div class="sf-readable">Select Ground Forces for Invasion of '+n.p[c].name+": </div><ul>";for(var v=0;v<n.p.length;v++)if(d.push(0),a>0&&n.p[v].units[e-1].length>0){for(var b=0;b<n.p[v].units[e-1].length;b++)"infantry"==n.p[v].units[e-1][b].type&&0==l&&d[v]++;html+='<li class="invadechoice textchoice option" id="invasion_planet_'+v+'">'+n.p[v].name+' - <span class="planet_'+v+'_infantry">'+d[v]+"</span></li>"}l=1;for(var _=0;_<n.s.units[e-1].length;_++){var w=n.s.units[e-1][_];h.push(0);for(var x=0;x<w.storage.length;x++)"infantry"===w.storage[x].type&&0==u&&h[_]++;h[_]>0&&(html+='<li class="invadechoice textchoice" id="invasion_ship_'+_+'">'+w.name+' - <span class="ship_'+_+'_infantry">'+h[_]+"</span></li>")}u=1,html+='<li class="invadechoice textchoice" id="finished_0_0">finish selecting</li>',html+="</ul></p>",$(".status-overlay").html(html),$(".status").hide(),$(".status-overlay").show(),$(".invadechoice").off(),$(".invadechoice").on("click",(function(){var e=$(this).attr("id").split("_"),n=e[0],s=e[1],l=e[2],u="."+s+"_"+l+"_infantry",p=parseInt($(u).html());if("invasion"==n){if("planet"==s){if(a<=0)return void salert("Invalid Choice! No space transport available!");d[l]--}else h[l]--;if(0==p)return void salert("You cannot attack with forces you do not have available.");var f=JSON.stringify(r.returnUnit("infantry",r.game.player)),m={};m.sector=t,m.source=s,m.source_idx=l,m.planet_idx=c,m.unitjson=f,i.push(m);var g=".invadeplanet_"+c,y=parseInt($(g).html());y++,$(g).html(y),p--,$(u).html(p)}if("finished"===n){for(var v=0;v<i.length;v++)r.addMove("land\t"+r.game.player+"\t1\t"+i[v].sector+"\t"+i[v].source+"\t"+i[v].source_idx+"\t"+i[v].planet_idx+"\t"+i[v].unitjson),o.includes(i[v].planet_idx)||o.push(i[v].planet_idx);return i=[],$(".status").show(),void $(".status-overlay").hide()}}))}))}},{key:"playerActivateSystem",value:function(){var e=this,t=0,r=0,n=0;e.updateStatus("Select a sector to activate: "),$(".sector").off(),$(".sector").on("mousedown",(function(e){r=e.clientX,n=e.clientY})),$(".sector").on("mouseup",(function(a){if(!(Math.abs(r-a.clientX)>4||Math.abs(n-a.clientY)>4||1==t)){var i=$(this).attr("id");if(0==e.canPlayerActivateSystem(i))salert("You cannot activate that system.");else{var o=e.returnSectorAndPlanets(i);if(1==e.game.state.round){if(!e.canPlayerMoveShipsIntoSector(e.game.player,i)&&!e.canPlayerProduceInSector(e.game.player,i))return void e.overlay.showOverlay(e.app,e,e.returnFirstTurnOverlay())}else if(!e.canPlayerMoveShipsIntoSector(e.game.player,i)&&!confirm("You cannot move ships into this sector. Are you sure you wish to activate it?"))return;if(e.returnPlayerHomeworldSector()==o.s.sector&&1==e.game.state.round&&1==e.doesPlayerHaveShipsInSector(e.game.player,i)&&!confirm("Ships cannot move out of activated sectors -- if you activate your homeworld you will not be able to move ships out of it until Round 2. Are you sure you want to do this?"))return;t=1;var s="#"+i;$(s).find(".hex_activated").css("background-color","var(--p"+e.game.player+")"),$(s).find(".hex_activated").css("opacity","0.3"),e.updateStatus('<div class=\'sf-readable\'>Activate this system?</div><ul><li class="option" id="yes">yes, do it</li><li class="option" id="no">choose again</li></ul>'),$(".option").off(),$(".option").on("click",(function(){"yes"===$(this).attr("id")?(o.s.activated[e.game.player-1]=1,e.addMove("activate_system_post\t"+e.game.player+"\t"+i),e.addMove("pds_space_attack_post\t"+e.game.player+"\t"+i),e.addMove("pds_space_attack\t"+e.game.player+"\t"+i),e.addMove("activate_system\t"+e.game.player+"\t"+i),e.addMove("expend\t"+e.game.player+"\tcommand\t1"),e.addMove("setvar\tstate\t0\tactive_player_moved\tint\t1"),e.endTurn()):(t=0,$(s).find(".hex_activated").css("background-color","transparent"),$(s).find(".hex_activated").css("opacity","1"),e.playerActivateSystem())}))}}}))}},{key:"playerPostActivateSystem",value:function(e){var t=this,r=this.returnPlayerActionCards(t.game.player,["post_activate_system"]),n=t.game.player,a="<div class='sf-readable'>"+this.returnFaction(this.game.player)+": </div><ul>";t.canPlayerMoveShipsIntoSector(n,e)&&(a+='<li class="option" id="move">move into sector</li>'),this.canPlayerInvadePlanet(n,e)&&0==this.game.tracker.invasion&&("new-byzantium"==e||"4_4"==e?(-1!=t.game.planets["new-byzantium"].owner||t.returnAvailableInfluence(t.game.player)+t.game.players_info[t.game.player-1].goods>=6)&&(a+='<li class="option" id="invade">invade planet</li>'):a+='<li class="option" id="invade">invade planet</li>'),this.canPlayerLandInfantry(n,e)&&0==this.game.tracker.invasion&&(a+='<li class="option" id="land">reassign infantry</li>'),this.canPlayerProduceInSector(this.game.player,e)&&(a+='<li class="option" id="produce">produce units</li>'),this.canPlayerLandInfantry(n,e)&&0==this.game.tracker.invasion&&(a+='<li class="option" id="land">relocate infantry</li>'),r.length>0&&(a+='<li class="option" id="action">play action card</li>'),a+='<li class="option" id="finish">finish turn</li>',a+="</ul>",t.updateStatus(a),$(".option").on("click",(function(){var r=$(this).attr("id");if("action"==r&&t.playerSelectActionCard((function(r){t.addMove("activate_system_post\t"+t.game.player+"\t"+e),t.game.players_info[this.game.player-1].action_cards_played.push(r),t.addMove("action_card_post\t"+t.game.player+"\t"+r),t.addMove("action_card\t"+t.game.player+"\t"+r),t.addMove("lose\t"+t.game.player+"\taction_cards\t1")}),(function(){t.playerPlayActionCardMenu(action_card_player,card)}),["action"]),"invade"==r){if(("new-byzantium"===e||"4_4"==e)&&-1==t.game.planets["new-byzantium"].owner)return t.returnAvailableInfluence(t.game.player)>=6?void t.playerSelectInfluence(6,(function(r){t.game.tracker.invasion=1,t.playerInvadePlanet(n,e)})):void salert("The first conquest of New Byzantium requires spending 6 influence, which you lack.");t.game.tracker.invasion=1,t.playerInvadePlanet(n,e)}if("land"==r)return t.addMove("continue\t"+t.game.player+"\t"+e),t.playerSelectInfantryToLand(e),0;if("move"==r&&t.playerSelectUnitsToMove(e),"produce"==r){var a=t.returnSpareFleetSupplyInSector(n,e);if(a<=1){var i="You have no spare fleet supply in this sector. Do you still wish to produce more ships?";return 1==a&&(i="You have fleet supply for 1 additional capital ship in this sector. Do you still wish to produce more ships?"),void(confirm(i)&&t.playerProduceUnits(e))}t.playerProduceUnits(e)}"finish"==r&&(t.moves.includes("resolve\tplay")||t.addMove("resolve\tplay"),t.addMove("setvar\tstate\t0\tactive_player_moved\tint\t0"),t.endTurn())}))}},{key:"playerAllocateNewTokens",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=this;if(this.game.player==e){var o={};o.current_command=this.game.players_info[e-1].command_tokens,o.current_strategy=this.game.players_info[e-1].strategy_tokens,o.current_fleet=this.game.players_info[e-1].fleet_supply,o.new_command=0,o.new_strategy=0,o.new_fleet=0,o.new_tokens=t;var s=function(t,i,o){var s='<div class="sf-readable">You have '+i.new_tokens+" tokens to allocate. How do you want to allocate them? </div><ul>";1==n&&(s='<div class="sf-readable">The Leadership card gives you '+i.new_tokens+" tokens to allocate. How do you wish to allocate them? </div><ul>"),2==n&&(s='<div class="sf-readable">Leadership has been played and you have purchased '+i.new_tokens+" additional tokens. How do you wish to allocate them? </div><ul>"),3==n&&(s='<div class="sf-readable">You have '+i.new_tokens+" new tokens to allocate: </div><ul>"),s+='<li class="option" id="command">Command Token - '+(parseInt(i.current_command)+parseInt(i.new_command))+"</li>",s+='<li class="option" id="strategy">Strategy Token - '+(parseInt(i.current_strategy)+parseInt(i.new_strategy))+"</li>",s+='<li class="option" id="fleet">Fleet Supply - '+(parseInt(i.current_fleet)+parseInt(i.new_fleet))+"</li>",s+="</ul>",t.updateStatus(s),t.lockInterface(),$(".option").off(),$(".option").on("click",(function(){var n=$(this).attr("id");"strategy"==n&&(i.new_strategy++,i.new_tokens--),"command"==n&&(i.new_command++,i.new_tokens--),"fleet"==n&&(i.new_fleet++,i.new_tokens--),0==i.new_tokens?(1==r&&(t.game.confirms_needed>0&&0==a?t.addMove("resolve\ttokenallocation\t1\t"+t.app.wallet.returnPublicKey()):t.addMove("resolve\ttokenallocation")),t.addMove("purchase\t"+e+"\tstrategy\t"+i.new_strategy),t.addMove("purchase\t"+e+"\tcommand\t"+i.new_command),t.addMove("purchase\t"+e+"\tfleetsupply\t"+i.new_fleet),t.unlockInterface(),t.endTurn()):(t.unlockInterface(),o(t,i,o))}))};s(i,o,s)}return 0}},{key:"playerSelectPlayerWithFilter",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=this,i='<div class="sf-readable">'+e+"</div>";i+="<ul>";for(var o=0;o<this.game.players_info.length;o++)1==t(this.game.players_info[o])&&(i+='<li class="textchoice" id="'+(o+1)+'">'+this.returnFaction(o+1)+"</li>");null!=n&&(i+='<li class="textchoice" id="cancel">cancel</li>'),i+="</ul>",this.updateStatus(i),a.lockInterface(),$(".textchoice").off(),$(".textchoice").on("click",(function(){if(a.mayUnlockInterface()){a.unlockInterface();var e=$(this).attr("id");if("cancel"==e)return n(),0;r(e)}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"playerSelectSectorWithFilter",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=this,i='<div class="sf-readable">'+e+"</div>";for(var o in i+="<ul>",this.game.board)1==t(this.game.board[o].tile)&&(i+='<li class="textchoice" id="'+o+'">'+this.game.sectors[this.game.board[o].tile].name+"</li>");null!=n&&(i+='<li class="textchoice" id="cancel">cancel</li>'),i+="</ul>",this.updateStatus(i),this.lockInterface(),$(".textchoice").off(),$(".textchoice").on("mouseenter",(function(){var e=$(this).attr("id");"cancel"!=e&&a.showSectorHighlight(e)})),$(".textchoice").on("mouseleave",(function(){var e=$(this).attr("id");"cancel"!=e&&a.hideSectorHighlight(e)})),$(".textchoice").on("click",(function(){if(a.mayUnlockInterface()){a.unlockInterface();var e=$(this).attr("id");if("cancel"!=e&&a.hideSectorHighlight(e),"cancel"==e)return n(),0;a.updateStatus(""),r(a.game.board[e].tile)}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"playerSelectChoice",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"other",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=this,i='<div class="sf-readable">'+e+"</div>";i+="<ul>";for(var o=0;o<t.length;o++)"player"==r&&("Unknown"!=this.returnFaction(t[o])?i+='<li class="textchoice" id="'+o+'">'+this.returnFaction(t[o])+"</li>":i+='<li class="textchoice" id="'+o+'">'+t[o]+"</li>"),"planet"==r&&(i+='<li class="textchoice" id="'+o+'">'+this.game.planets[t[o]].name+"</li>"),"sector"==r&&(i+='<li class="textchoice" id="'+o+'">'+this.game.sectors[this.game.board[t[o]].tile].name+"</li>"),"other"==r&&(i+='<li class="textchoice" id="'+o+'">'+t[o]+"</li>");i+="</ul>",this.updateStatus(i),this.lockInterface(),$(".textchoice").off(),$(".textchoice").on("click",(function(){if(a.mayUnlockInterface()){a.unlockInterface();var e=$(this).attr("id");n(e)}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"playerSelectPlanetWithFilter",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=this,i='<div class="sf-readable">'+e+"</div>";for(var o in i+="<ul>",this.game.planets)""!=this.game.planets[o].tile&&1==t(o)&&(i+='<li class="textchoice" id="'+o+'">'+this.game.planets[o].name+"</li>");null!=n&&(i+='<li class="textchoice" id="cancel">cancel</li>'),i+="</ul>",this.updateStatus(i),this.lockInterface(),$(".textchoice").off(),$(".textchoice").on("mouseenter",(function(){var e=$(this).attr("id");"cancel"!=e&&(a.showPlanetCard(a.game.planets[e].tile,a.game.planets[e].idx),a.showSectorHighlight(a.game.planets[e].tile))})),$(".textchoice").on("mouseleave",(function(){var e=$(this).attr("id");"cancel"!=e&&(a.hidePlanetCard(a.game.planets[e].tile,a.game.planets[e].idx),a.hideSectorHighlight(a.game.planets[e].tile))})),$(".textchoice").on("click",(function(){if(a.mayUnlockInterface()){a.unlockInterface();var e=$(this).attr("id");if("cancel"!=e&&(a.hidePlanetCard(a.game.planets[e].tile,a.game.planets[e].idx),a.hideSectorHighlight(a.game.planets[e].tile)),"cancel"==e)return n(),a.hideSectorHighlight(e),0;a.updateStatus(""),a.hideSectorHighlight(e),r(e)}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"playerSelectUnitInSectorWithFilter",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=this,o=[],s=[],c=[],l=[],u=0,d='<div class="sf-readable">'+e+"</div>";d+="<ul>";for(var h=this.returnSectorAndPlanets(t),p=0;p<h.s.units[i.game.player-1].length;p++)r(h.s.units[i.game.player-1][p])&&(o.push(h.s.units[i.game.player-1][p]),s.push(t),c.push(-1),l.push(p),u=1,d+='<li class="textchoice" id="'+(o.length-1)+'">'+h.s.name+" - "+o[o.length-1].name+"</li>");for(var f=0;f<h.p.length;f++)for(var m=0;m<h.p[f].units[i.game.player-1].length;m++)r(h.p[f].units[i.game.player-1][m])&&(o.push(h.p[f].units[i.game.player-1][m]),s.push(t),c.push(f),l.push(m),u=1,d+='<li class="textchoice" id="'+(o.length-1)+'">'+h.s.sector+" / "+h.p[f].name+" - "+o[o.length-1].name+"</li>");0==u&&(d+='<li class="textchoice" id="none">no unit available</li>'),null!=a&&(d+='<li class="textchoice" id="cancel">cancel</li>'),d+="</ul>",this.updateStatus(d),$(".textchoice").off(),this.lockInterface(),$(".textchoice").on("click",(function(){if(i.mayUnlockInterface()){i.unlockInterface();var e=$(this).attr("id");if("cancel"===e)return a(),i.hideSectorHighlight(e),0;if("none"!==e){var t={sector:s[e],planet_idx:c[e],unit_idx:l[e],unit:o[e]};i.updateStatus(""),n(t)}else n({sector:"",planet_idx:"",unit_idx:-1,unit:null})}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"playerSelectUnitWithFilter",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=this,i=[],o=[],s=[],c=[],l=0,u='<div class="sf-readable">'+e+"</div>";for(var d in u+="<ul>",this.game.board){var h=this.game.board[d].tile;console.log(d+" -- "+h);var p=this.returnSectorAndPlanets(h);if(null!=p){for(var f=0;f<p.s.units[a.game.player-1].length;f++)t(p.s.units[a.game.player-1][f])&&(i.push(p.s.units[a.game.player-1][f]),o.push(d),s.push(-1),c.push(f),l=1,console.log("k: "+f),console.log(JSON.stringify(i)),u+='<li class="textchoice" id="'+(i.length-1)+'">'+p.s.name+" - "+i[i.length-1].name+"</li>");for(var m=0;m<p.p.length;m++)for(var g=0;g<p.p[m].units[a.game.player-1].length;g++)t(p.p[m].units[a.game.player-1][g])&&(i.push(p.p[m].units[a.game.player-1][g]),o.push(sector),s.push(m),c.push(g),l=1,console.log("p k: "+m+" - "+g),u+='<li class="textchoice" id="'+(i.length-1)+'">'+p.s.sector+" / "+p.p[m].name+" - "+i[i.length-1].name+"</li>")}}0==l&&(u+='<li class="textchoice" id="none">no unit available</li>'),null!=n&&(u+='<li class="textchoice" id="cancel">cancel</li>'),u+="</ul>",this.updateStatus(u),$(".textchoice").off(),this.lockInterface(),$(".textchoice").on("click",(function(){if(a.mayUnlockInterface()){a.unlockInterface();var e=$(this).attr("id");if("cancel"===e)return n(),a.hideSectorHighlight(e),0;if("none"!==e){var t={sector:o[e],planet_idx:s[e],unit_idx:c[e],unit:i[e]};console.log("returning unit: "+JSON.stringify(t)),a.updateStatus(""),r(t)}else r({sector:"",planet_idx:"",unit_idx:-1,unit:null})}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"playerSelectOpponentUnitInSectorWithFilter",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=this,o=[],s=[],c=[],l=[],u=0,d='<div class="sf-readable">'+e+"</div>";d+="<ul>";for(var h=this.returnSectorAndPlanets(t),p=0;p<h.s.units.length;p++)if(p!=i.game.player-1)for(var f=0;f<h.s.units[p].length;f++)r(h.s.units[p][f])&&(o.push(h.s.units[p][f]),s.push(t),c.push(-1),l.push(f),u=1,d+='<li class="textchoice" id="'+(o.length-1)+'">'+h.s.name+" - "+o[o.length-1].name+"</li>");for(var m=0;m<h.p.length;m++)for(var g=0;g<h.s.units.length;g++)if(g!=i.game.player-1)for(var y=0;y<h.p[m].units[i.game.player-1].length;y++)r(h.p[m].units[i.game.player-1][y])&&(o.push(h.p[m].units[i.game.player-1][y]),s.push(t),c.push(m),l.push(y),u=1,d+='<li class="textchoice" id="'+(o.length-1)+'">'+h.s.sector+" / "+h.p[m].name+" - "+o[o.length-1].name+"</li>");0==u&&(d+='<li class="textchoice" id="none">no unit available</li>'),null!=a&&(d+='<li class="textchoice" id="cancel">cancel</li>'),d+="</ul>",this.updateStatus(d),this.lockInterface(),$(".textchoice").off(),$(".textchoice").on("click",(function(){if(i.mayUnlockInterface()){i.unlockInterface();var e=$(this).attr("id");if("cancel"===e)return a(),i.hideSectorHighlight(e),0;if("none"!==e){var t={sector:s[e],planet_idx:c[e],unit_idx:l[e],unit:o[e]};i.updateStatus(""),n(t)}else n({sector:"",planet_idx:"",unit_idx:-1,unit:null})}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"playerSelectUnitInSectorFilter",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=this.returnSectorAndPlanets(t),o='<div class="sf-readable">'+e+"</div>";o+="<ul>";for(var s=0;s<this.game.players_info.length;s++)for(var c=0;c<i.s.units[s].length;c++)1==r(i.s.units[s][c])&&(o+='<li class="textchoice" id="'+t+"_"+s+"_"+s+'">'+this.returnFaction(s+1)+" - "+i.s.units[s][c].name+"</li>");null!=a&&(o+='<li class="textchoice" id="cancel">cancel</li>'),o+="</ul>",this.updateStatus(o),$(".textchoice").off(),$(".textchoice").on("click",(function(){var e=$(this).attr("id");if("cancel"==e)return a(),0;var t=e.split("_"),r=t[0],i=t[1],o=t[2];n({sector:r,player:i,unitidx:o})}))}},{key:"playerDiscardActionCards",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this;e<0&&r.endTurn();var n="<div class='sf-readable'>You must discard <div style='display:inline' class='totalnum' id='totalnum'>"+e+"</div> action card";e>1&&(n+="s"),n+=":</div>",n+="<ul>";for(var a=this.returnPlayerActionCards(r.game.player),i=0;i<a.length;i++)n+='<li class="textchoice" id="'+i+'">'+this.action_cards[a[i]].name+"</li>";n+="</ul>",this.updateStatus(n),$(".textchoice").off(),$(".textchoice").on("mouseenter",(function(){var e=$(this).attr("id");"cancel"!=e&&r.showActionCard(a[e])})),$(".textchoice").on("mouseleave",(function(){var e=$(this).attr("id");"cancel"!=e&&r.hideActionCard(a[e])})),$(".textchoice").on("click",(function(){var n=$(this).attr("id");e--,$(".totalnum").html(e),$(this).remove(),r.hideActionCard(n),r.game.players_info[r.game.player-1].action_cards_played.push(a[n]),r.addMove("lose\t"+r.game.player+"\taction_cards\t1"),0==e&&(null==t?(r.updateStatus("discarding..."),r.endTurn()):t())}))}},{key:"returnPlanets",value:function(){var e={planet1:{type:"hazardous",img:"/imperium/img/planets/CRYSTALIS.png",name:"Crystalis",resources:3,influence:0,bonus:""},planet2:{type:"hazardous",img:"/imperium/img/planets/TROTH.png",name:"Troth",resources:2,influence:0,bonus:""},planet3:{type:"industrial",img:"/imperium/img/planets/LONDRAK.png",name:"Londrak",resources:1,influence:2,bonus:""},planet4:{type:"hazardous",img:"/imperium/img/planets/CITADEL.png",name:"Citadel",resources:0,influence:4,bonus:"red"},planet5:{type:"industrial",img:"/imperium/img/planets/BELVEDYR.png",name:"Belvedyr",resources:1,influence:2,bonus:""},planet6:{type:"industrial",img:"/imperium/img/planets/SHRIVA.png",name:"Shriva",resources:2,influence:1,bonus:""},planet7:{type:"hazardous",img:"/imperium/img/planets/ZONDOR.png",name:"Zondor",resources:3,influence:1,bonus:""},planet8:{type:"hazardous",img:"/imperium/img/planets/CALTHREX.png",name:"Calthrex",resources:2,influence:3,bonus:""},planet9:{type:"cultural",img:"/imperium/img/planets/SOUNDRA-IV.png",name:"Soundra IV",resources:1,influence:3,bonus:""},planet10:{type:"cultural",img:"/imperium/img/planets/VIGOR.png",name:"Vigor",resources:1,influence:1,bonus:""},planet11:{type:"cultural",img:"/imperium/img/planets/UDON-II.png",name:"Udon II",resources:1,influence:2,bonus:""},planet12:{type:"cultural",img:"/imperium/img/planets/NEW-JYLANX.png",name:"New Jylanx",resources:2,influence:0,bonus:""},planet13:{type:"cultural",img:"/imperium/img/planets/TERRA-CORE.png",name:"Terra Core",resources:0,influence:2,bonus:""},planet14:{type:"cultural",img:"/imperium/img/planets/OLYMPIA.png",name:"Olympia",resources:1,influence:2,bonus:""},planet15:{type:"industrial",img:"/imperium/img/planets/GRANTON-MEX.png",name:"Granton Mex",resources:1,influence:0,bonus:"yellow"},planet16:{type:"hazardous",img:"/imperium/img/planets/HARKON-CALEDONIA.png",name:"Harkon Caledonia",resources:2,influence:1,bonus:""},planet17:{type:"cultural",img:"/imperium/img/planets/NEW-ILLIA.png",name:"New Illia",resources:3,influence:1,bonus:""},planet18:{type:"hazardous",img:"/imperium/img/planets/LAZAKS-CURSE.png",name:"Lazak's Curse",resources:1,influence:3,bonus:"red"},planet19:{type:"cultural",img:"/imperium/img/planets/VOLUNTRA.png",name:"Voluntra",resources:0,influence:2,bonus:""},planet20:{type:"hazardous",img:"/imperium/img/planets/XERXES-IV.png",name:"Xerxes IV",resources:3,influence:1,bonus:""},planet21:{type:"industrial",img:"/imperium/img/planets/SIRENS-END.png",name:"Siren's End",resources:1,influence:1,bonus:"green"},planet22:{type:"hazardous",img:"/imperium/img/planets/RIFTVIEW.png",name:"Riftview",resources:2,influence:1,bonus:""},planet23:{type:"cultural",img:"/imperium/img/planets/BROUGHTON.png",name:"Broughton",resources:1,influence:2,bonus:""},planet24:{type:"industrial",img:"/imperium/img/planets/FJORDRA.png",name:"Fjordra",resources:0,influence:3,bonus:""},planet25:{type:"cultural",img:"/imperium/img/planets/SINGHARTA.png",name:"Singharta",resources:1,influence:1,bonus:""},planet26:{type:"industrial",img:"/imperium/img/planets/NOVA-KLONDIKE.png",name:"Nova Klondike",resources:2,influence:2,bonus:""},planet27:{type:"industrial",img:"/imperium/img/planets/CONTOURI-I.png",name:"Contouri I",resources:1,influence:1,bonus:"green"},planet28:{type:"hazardous",img:"/imperium/img/planets/CONTOURI-II.png",name:"Contouri II",resources:2,influence:0,bonus:""},planet29:{type:"cultural",img:"/imperium/img/planets/HOTH.png",name:"Hoth",resources:2,influence:2,bonus:""},planet30:{type:"industrial",img:"/imperium/img/planets/UNSULLA.png",name:"Unsulla",resources:1,influence:2,bonus:""},planet31:{type:"industrial",img:"/imperium/img/planets/GROX-TOWERS.png",name:"Grox Towers",resources:1,influence:1,bonus:"blue"},planet32:{type:"hazardous",img:"/imperium/img/planets/GRAVITYS-EDGE.png",name:"Gravity's Edge",resources:2,influence:1,bonus:""},planet33:{type:"industrial",img:"/imperium/img/planets/POPULAX.png",name:"Populax",resources:3,influence:2,bonus:"yellow"},planet34:{type:"cultural",img:"/imperium/img/planets/OLD-MOLTOUR.png",name:"Old Moltour",resources:2,influence:0,bonus:""},"new-byzantium":{type:"diplomatic",img:"/imperium/img/planets/NEW-BYZANTIUM.png",name:"New Byzantium",resources:1,influence:6,bonus:""},planet36:{type:"cultural",img:"/imperium/img/planets/OUTERANT.png",name:"Outerant",resources:1,influence:3,bonus:""},planet37:{type:"industrial",img:"/imperium/img/planets/VESPAR.png",name:"Vespar",resources:2,influence:2,bonus:""},planet38:{type:"hazardous",img:"/imperium/img/planets/CRAW-POPULI.png",name:"Craw Populi",resources:1,influence:2,bonus:""},planet39:{type:"cultural",img:"/imperium/img/planets/YSSARI-II.png",name:"Yssari II",resources:0,influence:1,bonus:""},planet41:{type:"industrial",img:"/imperium/img/planets/LORSTRUCK.png",name:"Lorstruck",resources:1,influence:0,bonus:""},planet42:{type:"hazardous",img:"/imperium/img/planets/INDUSTRYL.png",name:"Industryl",resources:3,influence:1,bonus:""},planet43:{type:"cultural",img:"/imperium/img/planets/MECHANEX.png",name:"Mechanex",resources:1,influence:0,bonus:""},planet44:{type:"industrial",img:"/imperium/img/planets/HEARTHSLOUGH.png",name:"Hearthslough",resources:3,influence:0,bonus:""},planet45:{type:"hazardous",img:"/imperium/img/planets/INCARTH.png",name:"Incarth",resources:2,influence:0,bonus:""},planet46:{type:"cultural",img:"/imperium/img/planets/AANDOR.png",name:"Aandor",resources:2,influence:1,bonus:""},planet40:{type:"industrial",img:"/imperium/img/planets/HOPES-LURE.png",name:"Hope's Lure",resources:3,influence:2,bonus:""},planet47:{type:"hazardous",img:"/imperium/img/planets/QUANDAM.png",name:"Quandam",resources:1,influence:1,bonus:""},planet48:{type:"cultural",img:"/imperium/img/planets/BREST.png",name:"Brest",resources:3,influence:1,bonus:""},planet49:{type:"hazardous",img:"/imperium/img/planets/HIRAETH.png",name:"Hiraeth",resources:1,influence:1,bonus:""},planet50:{type:"cultural",img:"/imperium/img/planets/FIREHOLE.png",name:"Firehole",resources:3,influence:0,bonus:""},planet51:{type:"industrial",img:"/imperium/img/planets/QUARTIL.png",name:"Quartil",resources:3,influence:1,bonus:""},planet52:{type:"hazardous",img:"/imperium/img/planets/YODERUX.png",name:"Yoderux",resources:3,influence:1,bonus:""},planet53:{type:"homeworld",img:"/imperium/img/planets/JOL.png",name:"Jol",resources:1,influence:2,bonus:""},planet54:{type:"homeworld",img:"/imperium/img/planets/NAR.png",name:"Nar",resources:2,influence:3,bonus:""},planet55:{type:"homeworld",img:"/imperium/img/planets/ARCHION-REX.png",name:"Archion Rex",resources:2,influence:3,bonus:""},planet56:{type:"homeworld",img:"/imperium/img/planets/ARCHION-TAO.png",name:"Archion Tao",resources:1,influence:1,bonus:""},planet57:{type:"homeworld",img:"/imperium/img/planets/EARTH.png",name:"Earth",resources:4,influence:2,bonus:""},planet58:{type:"homeworld",img:"/imperium/img/planets/ARTIZZ.png",name:"Artizz",resources:4,influence:1,bonus:""},planet59:{type:"cultural",img:"/imperium/img/planets/STARTIDE.png",name:"Startide",resources:2,influence:0,bonus:""},planet60:{type:"industrial",img:"/imperium/img/planets/GIANTS-DRINK.png",name:"Giant's Drink",resources:1,influence:1,bonus:""},planet61:{type:"hazardous",img:"/imperium/img/planets/MIRANDA.png",name:"Miranda",resources:0,influence:2,bonus:""},planet62:{type:"industrial",img:"/imperium/img/planets/EBERBACH.png",name:"Eberbach",resources:2,influence:1,bonus:""},planet63:{type:"hazardous",img:"/imperium/img/planets/OTHO.png",name:"Otho",resources:1,influence:2,bonus:""},planet64:{type:"hazardous",img:"/imperium/img/planets/PERTINAX.png",name:"Pertinax",resources:2,influence:2,bonus:""},planet65:{type:"cultural",img:"/imperium/img/planets/COTILLARD.png",name:"Cotillard",resources:2,influence:2,bonus:""},planet66:{type:"cultural",img:"/imperium/img/planets/DOMINIC.png",name:"Dominic",resources:3,influence:1,bonus:""},planet67:{type:"industrial",img:"/imperium/img/planets/PESTULON.png",name:"Pestulon",resources:1,influence:1,bonus:"yellow"},planet68:{type:"hazardous",img:"/imperium/img/planets/XIAO-ZUOR.png",name:"Xiao Zuor",resources:1,influence:3,bonus:""},planet69:{type:"hazardous",img:"/imperium/img/planets/KROEBER.png",name:"Kroeber",resources:2,influence:0,bonus:""},planet70:{type:"hazardous",img:"/imperium/img/planets/LEGUIN.png",name:"Leguin",resources:0,influence:1,bonus:""},planet71:{type:"cultural",img:"/imperium/img/planets/SIGURD.png",name:"Sigurd's Cradle",resources:1,influence:3,bonus:""},planet72:{type:"cultural",img:"/imperium/img/planets/KLENCORY.png",name:"Klencory",resources:2,influence:2,bonus:""},planet73:{type:"homeworld",img:"/imperium/img/planets/ALTAIR-IV.png",name:"Altair-IV",resources:4,influence:4,bonus:""},planet74:{type:"homeworld",img:"/imperium/img/planets/MUASYM.png",name:"Muasym",resources:4,influence:1,bonus:""},planet75:{type:"homeworld",img:"/imperium/img/planets/SARRON.png",name:"Sarron",resources:1,influence:2,bonus:""},planet76:{type:"homeworld",img:"/imperium/img/planets/REPTILLION.png",name:"Reptillion",resources:2,influence:3,bonus:""}};for(var t in e){e[t].exhausted=0,e[t].locked=0,e[t].owner=-1,e[t].units=[this.totalPlayers],e[t].sector="",e[t].tile="",e[t].idx=-1,e[t].planet="",e[t].hw=0;for(var r=0;r<this.totalPlayers;r++)e[t].units[r]=[]}return e}},{key:"returnSectors",value:function(){var e={sector3:{img:"/imperium/img/sectors/sector3.png",name:"Empty Space",type:0,hw:0,wormhole:0,mr:0,planets:[]},sector4:{img:"/imperium/img/sectors/sector4.png",name:"Empty Space",type:0,hw:0,wormhole:0,mr:0,planets:[]},sector5:{img:"/imperium/img/sectors/sector5.png",name:"Empty Space",type:0,hw:0,wormhole:0,mr:0,planets:[]},sector6:{img:"/imperium/img/sectors/sector6.png",name:"Empty Space",type:0,hw:0,wormhole:0,mr:0,planets:[]},sector1:{img:"/imperium/img/sectors/sector1.png",name:"Empty Space",type:0,hw:0,wormhole:0,mr:0,planets:[]},sector2:{img:"/imperium/img/sectors/sector2.png",name:"Empty Space",type:0,hw:0,wormhole:0,mr:0,planets:[]},sector7:{img:"/imperium/img/sectors/sector7.png",name:"Gravity Rift",type:1,hw:0,wormhole:0,mr:0,planets:[]},sector72:{img:"/imperium/img/sectors/sector72.png",name:"Nebula",type:2,hw:0,wormhole:0,mr:0,planets:[]},sector34:{img:"/imperium/img/sectors/sector34.png",name:"Asteroid Field",type:3,hw:0,wormhole:0,mr:0,planets:[]},sector35:{img:"/imperium/img/sectors/sector35.png",name:"Asteroid Field",type:3,hw:0,wormhole:0,mr:0,planets:[]},sector71:{img:"/imperium/img/sectors/sector71.png",name:"Supernova",type:4,hw:0,wormhole:0,mr:0,planets:[]},sector54:{img:"/imperium/img/sectors/sector54.png",name:"Wormhole A",type:0,hw:0,wormhole:1,mr:0,planets:[]},sector56:{img:"/imperium/img/sectors/sector56.png",name:"Wormhole B",type:0,hw:0,wormhole:2,mr:0,planets:[]},sector55:{img:"/imperium/img/sectors/sector55.png",name:"Yoderux",type:0,hw:0,wormhole:1,mr:0,planets:["planet52"]},sector57:{img:"/imperium/img/sectors/sector57.png",name:"Quartil",type:0,hw:0,wormhole:2,mr:0,planets:["planet51"]},sector8:{img:"/imperium/img/sectors/sector8.png",name:"Crystalis / Troth",type:0,hw:0,wormhole:0,mr:0,planets:["planet1","planet2"]},sector9:{img:"/imperium/img/sectors/sector9.png",name:"Londrak / Citadel",type:0,hw:0,wormhole:0,mr:0,planets:["planet3","planet4"]},sector10:{img:"/imperium/img/sectors/sector10.png",name:"Belvedyr / Shriva",type:0,hw:0,wormhole:0,mr:0,planets:["planet5","planet6"]},sector11:{img:"/imperium/img/sectors/sector11.png",name:"Zondor / Calthrex",type:0,hw:0,wormhole:0,mr:0,planets:["planet7","planet8"]},sector12:{img:"/imperium/img/sectors/sector12.png",name:"Soundra-IV / Vigor",type:0,hw:0,wormhole:0,mr:0,planets:["planet9","planet10"]},sector15:{img:"/imperium/img/sectors/sector15.png",name:"Granton / Harkon",type:0,hw:0,wormhole:0,mr:0,planets:["planet15","planet16"]},sector16:{img:"/imperium/img/sectors/sector16.png",name:"New Illia / Lazaks Curse",type:0,hw:0,wormhole:0,mr:0,planets:["planet17","planet18"]},sector18:{img:"/imperium/img/sectors/sector18.png",name:"Siren's End / Riftview",type:0,hw:0,wormhole:0,mr:0,planets:["planet21","planet22"]},sector19:{img:"/imperium/img/sectors/sector19.png",name:"Broughton / Fjordra",type:0,hw:0,wormhole:0,mr:0,planets:["planet23","planet24"]},sector20:{img:"/imperium/img/sectors/sector20.png",name:"Singharta / Nova Klondike",type:0,hw:0,wormhole:0,mr:0,planets:["planet25","planet26"]},sector22:{img:"/imperium/img/sectors/sector22.png",name:"Hoth",type:0,hw:0,wormhole:0,mr:0,planets:["planet29"]},sector25:{img:"/imperium/img/sectors/sector25.png",name:"Gravity's Edge",type:0,hw:0,wormhole:0,mr:0,planets:["planet32"]},sector26:{img:"/imperium/img/sectors/sector26.png",name:"Populax",type:0,hw:0,wormhole:0,mr:0,planets:["planet33"]},sector27:{img:"/imperium/img/sectors/sector27.png",name:"Old Moultour",type:0,hw:0,wormhole:0,mr:0,planets:["planet34"]},"new-byzantium":{img:"/imperium/img/sectors/sector28.png",name:"New Byzantium",type:0,hw:0,wormhole:0,mr:1,planets:["new-byzantium"]},sector29:{img:"/imperium/img/sectors/sector29.png",name:"Outerant",type:0,hw:0,wormhole:0,mr:0,planets:["planet36"]},sector31:{img:"/imperium/img/sectors/sector31.png",name:"Craw Populi",type:0,hw:0,wormhole:0,mr:0,planets:["planet38"]},sector32:{img:"/imperium/img/sectors/sector32.png",name:"Yssari-II",type:0,hw:0,wormhole:0,mr:0,planets:["planet39"]},sector38:{img:"/imperium/img/sectors/sector38.png",name:"Lorstruck / Industryl",type:0,hw:0,wormhole:0,mr:0,planets:["planet41","planet42"]},sector39:{img:"/imperium/img/sectors/sector39.png",name:"Mechanix / Hearthslough",type:0,hw:0,wormhole:0,mr:0,planets:["planet43","planet44"]},sector40:{img:"/imperium/img/sectors/sector40.png",name:"Aandor / Incarth",type:0,hw:0,wormhole:0,mr:0,planets:["planet46","planet45"]},sector41:{img:"/imperium/img/sectors/sector41.png",name:"Hope's Lure",type:0,hw:0,wormhole:0,mr:0,planets:["planet40"]},sector42:{img:"/imperium/img/sectors/sector42.png",name:"Quandam",type:0,hw:0,wormhole:0,mr:0,planets:["planet47"]},sector43:{img:"/imperium/img/sectors/sector43.png",name:"Brest",type:0,hw:0,wormhole:0,mr:0,planets:["planet48"]},sector44:{img:"/imperium/img/sectors/sector44.png",name:"Hiraeth",type:0,hw:0,wormhole:0,mr:0,planets:["planet49"]},sector58:{img:"/imperium/img/sectors/sector58.png",name:"Startide",type:0,hw:0,wormhole:0,mr:0,planets:["planet59"]},sector59:{img:"/imperium/img/sectors/sector59.png",name:"Giant's Drink",type:0,hw:0,wormhole:0,mr:0,planets:["planet60"]},sector60:{img:"/imperium/img/sectors/sector60.png",name:"Miranda",type:0,hw:0,wormhole:0,mr:0,planets:["planet61"]},sector62:{img:"/imperium/img/sectors/sector62.png",name:"Otho",type:0,hw:0,wormhole:0,mr:0,planets:["planet63"]},sector65:{img:"/imperium/img/sectors/sector65.png",name:"Dominic",type:0,hw:0,wormhole:0,mr:0,planets:["planet66"]},sector67:{img:"/imperium/img/sectors/sector67.png",name:"Xiao-Zuor",type:0,hw:0,wormhole:0,mr:0,planets:["planet68"]},sector69:{img:"/imperium/img/sectors/sector69.png",name:"Sigurd's Cradle",type:0,hw:0,wormhole:0,mr:0,planets:["planet71"]},sector24:{img:"/imperium/img/sectors/sector24.png",name:"Grox Towers",type:0,hw:0,wormhole:0,mr:0,planets:["planet31"]},sector66:{img:"/imperium/img/sectors/sector66.png",name:"Pestulon",type:0,hw:0,wormhole:0,mr:0,planets:["planet67"]},sector50:{img:"/imperium/img/sectors/sector50.png",name:"Jol Nar Homeworld",type:0,hw:1,wormhole:0,mr:0,planets:["planet53","planet54"]},sector51:{img:"/imperium/img/sectors/sector51.png",name:"XXCha Homeworld",type:0,hw:1,wormhole:0,mr:0,planets:["planet55","planet56"]},sector52:{img:"/imperium/img/sectors/sector52.png",name:"Sol Homeworld",type:0,hw:1,wormhole:0,mr:0,planets:["planet57"]},sector53:{img:"/imperium/img/sectors/sector53.png",name:"Sardaak Homeworld",type:0,hw:1,wormhole:0,mr:0,planets:["planet58"]},sector74:{img:"/imperium/img/sectors/sector74.png",name:"Yin Homeworld",type:0,hw:1,wormhole:0,mr:0,planets:["planet73"]},sector75:{img:"/imperium/img/sectors/sector75.png",name:"Ysarril Homeworld",type:0,hw:1,wormhole:0,mr:0,planets:["planet76","planet75"]},sector76:{img:"/imperium/img/sectors/sector76.png",name:"Muaat Homeworld",type:0,hw:1,wormhole:0,mr:0,planets:["planet74"]}};for(var t in e){e[t].units=[this.totalPlayers],e[t].activated=[this.totalPlayers],e[t].sector="",e[t].tile="";for(var r=0;r<this.totalPlayers;r++)e[t].units[r]=[],e[t].activated[r]=0}return e}},{key:"addWormholesToBoardTiles",value:function(e){var t=[];for(var r in this.game.sectors)0!=this.game.sectors[r].wormhole&&t.push(r);for(var n in e)if(this.game.board[n]){var a=this.game.board[n].tile;if(0!=this.game.sectors[a].wormhole)for(var i=0;i<t.length;i++)if(this.game.state.wormholes_adjacent||this.game.state.temporary_wormholes_adjacent){if(t[i]!=a&&0!=this.game.sectors[a].wormhole&&0!=this.game.sectors[t[i]].wormhole)for(var o in e)this.game.board[o]&&this.game.board[o].tile==t[i]&&(e[n].neighbours.includes(o)||e[n].neighbours.push(o))}else if(t[i]!=a&&this.game.sectors[a].wormhole==this.game.sectors[t[i]].wormhole)for(var s in e)this.game.board[s]&&this.game.board[s].tile==t[i]&&(e[n].neighbours.includes(s)||e[n].neighbours.push(s))}return e}},{key:"returnBoardTiles",value:function(){var e={"1_1":{neighbours:["1_2","2_1","2_2"]},"1_2":{neighbours:["1_1","1_3","2_2","2_3"]},"1_3":{neighbours:["1_2","1_4","2_3","2_4"]},"1_4":{neighbours:["1_3","2_4","2_5"]},"2_1":{neighbours:["1_1","2_2","3_1","3_2"]},"2_2":{neighbours:["1_1","1_2","2_1","2_3","3_2","3_3"]},"2_3":{neighbours:["1_2","1_3","2_2","2_4","3_3","3_4"]},"2_4":{neighbours:["1_3","1_4","2_3","2_5","3_4","3_5"]},"2_5":{neighbours:["1_4","2_4","3_5","3_6"]},"3_1":{neighbours:["2_1","3_2","4_1","4_2"]},"3_2":{neighbours:["2_1","2_2","3_1","3_3","4_2","4_3"]},"3_3":{neighbours:["2_2","2_3","3_2","3_4","4_3","4_4"]},"3_4":{neighbours:["2_3","2_4","3_3","3_5","4_4","4_5"]},"3_5":{neighbours:["2_4","3_4","3_6","4_5","4_6"]},"3_6":{neighbours:["2_5","3_5","4_6","4_7"]},"4_1":{neighbours:["3_1","4_2","5_1"]},"4_2":{neighbours:["3_1","3_2","4_1","4_3","5_1","5_2"]},"4_3":{neighbours:["3_2","3_3","4_2","4_4","5_2","5_3"]},"4_4":{neighbours:["3_3","3_4","4_3","4_5","5_3","5_4"]},"4_5":{neighbours:["3_4","3_5","4_4","4_6","5_4","5_5"]},"4_6":{neighbours:["3_5","3_6","4_5","4_7","5_5","5_6"]},"4_7":{neighbours:["3_6","4_6","5_6"]},"5_1":{neighbours:["4_1","4_2","5_2","6_1"]},"5_2":{neighbours:["4_2","4_3","5_1","5_3","6_1","6_2"]},"5_3":{neighbours:["4_3","4_4","5_2","5_4","6_2","6_3"]},"5_4":{neighbours:["4_4","4_5","5_3","5_5","6_3","6_4"]},"5_5":{neighbours:["4_5","4_6","5_4","5_6","6_4","6_5"]},"5_6":{neighbours:["4_6","4_7","5_5","6_5"]},"6_1":{neighbours:["5_1","5_2","6_2","7_1"]},"6_2":{neighbours:["5_2","5_3","6_1","6_3","7_1","7_2"]},"6_3":{neighbours:["5_3","5_4","6_2","6_4","7_2","7_3"]},"6_4":{neighbours:["5_4","5_5","6_3","6_5","7_3","7_4"]},"6_5":{neighbours:["5_5","5_6","6_4","7_4"]},"7_1":{neighbours:["6_1","6_2","7_2"]},"7_2":{neighbours:["6_2","6_3","7_1","7_3"]},"7_3":{neighbours:["6_3","6_4","7_2","7_4"]},"7_4":{neighbours:["6_4","6_5","7_3"]}};return e}},{key:"returnHomeworldSectors",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;return e<=2?["1_1","4_7"]:e<=3?["1_1","4_7","7_1"]:e<=4?["1_3","3_1","5_6","7_2"]:e<=5?["1_3","3_1","4_7","7_1","7_4"]:e<=6?["1_1","1_4","4_1","4_7","7_1","7_7"]:void 0}},{key:"returnState",value:function(){var e={speaker:1,round:0,turn:1,round_scoring:0,events:{},show_tutorials:0,laws:[],agendas:[],vp_target:14};return this.game.options.game_length&&(e.vp_target=parseInt(this.game.options.game_length)),e.riders=[],e.choices=[],e.action_card_order="simultaneous",e.assign_hits_queue_instruction="",e.assign_hits_to_cancel="",e.active_player_moved=0,e.agendas_voting_information=[],e.strategy_cards=[],e.strategy_cards_bonus=[],e.stage_i_objectives=[],e.stage_ii_objectives=[],e.secret_objectives=[],e.agenda_voting_order="simultaneous",e.votes_available=[],e.votes_cast=[],e.voted_on_agenda=[],e.voting_on_agenda=0,e.agendas_per_round=2,e.how_voted_on_agenda=[],e.temporary_assignments=["all"],e.temporary_rerolls=0,e.temporary_adjacency=[],e.wormholes_open=1,e.wormholes_adjacent=0,e.temporary_wormholes_adjacent=0,e.space_combat_round=0,e.space_combat_attacker=-1,e.space_combat_defender=-1,e.space_combat_ships_destroyed_attacker=0,e.space_combat_ships_destroyed_defender=0,e.ground_combat_round=0,e.ground_combat_attacker=-1,e.ground_combat_defender=-1,e.ground_combat_infantry_destroyed_attacker=0,e.ground_combat_infantry_destroyed_defender=0,e.bombardment_against_cultural_planets=1,e.bombardment_against_industrial_planets=1,e.bombardment_against_hazardous_planets=1,e.pds_limit_per_planet=2,e.pds_limit_total=4,e.retreat_cancelled=0,e.activated_sector="",e.bombardment_sector="",e.bombardment_planet_idx="",e.space_combat_sector="",e.ground_combat_sector="",e.ground_combat_planet_idx="",e}},{key:"returnEventObjects",value:function(e){for(var t=[],r=[],n=0;n<this.game.players_info.length;n++)for(var a=0;a<this.game.players_info[n].tech.length;a++)null!=this.tech[this.game.players_info[n].tech[a]]&&(r.includes(this.game.players_info[n].tech[a])||(t.push(this.tech[this.game.players_info[n].tech[a]]),r.push(this.game.players_info[n].tech[a])));for(var i in this.promissary_notes)t.push(this.promissary_notes[i]);for(var o=0;o<this.game.players_info.length;o++)null!=this.factions[this.game.players_info[o].faction]&&t.push(this.factions[this.game.players_info[o].faction]);for(var s=0;s<this.game.state.laws.length;s++)this.game.state.laws[s].agenda&&this.agenda_cards[this.game.state.laws[s].agenda].name&&t.push(this.agenda_cards[this.game.state.laws[s].agenda]);for(var c in this.action_cards)t.push(this.action_cards[c]);for(var l in this.secret_objectives)t.push(this.secret_objectives[l]);return t}},{key:"addEvents",value:function(e){return null==e.handleGameLoop&&(e.handleGameLoop=function(e,t,r){return 1}),null==e.initialize&&(e.initialize=function(e,t){return 0}),null==e.gainPlanet&&(e.gainPlanet=function(e,t,r){return 1}),null==e.gainPromissary&&(e.gainPromissary=function(e,t,r){return 1}),null==e.losePromissary&&(e.losePromissary=function(e,t,r){return 1}),null==e.gainTechnology&&(e.gainTechnology=function(e,t,r){return 1}),null==e.gainActionCards&&(e.gainActionCards=function(e,t,r){return 1}),null==e.gainFleetSupply&&(e.gainFleetSupply=function(e,t,r){return r}),null==e.gainTradeGoods&&(e.gainTradeGoods=function(e,t,r){return r}),null==e.gainCommodities&&(e.gainCommodities=function(e,t,r){return r}),null==e.gainFleetSupply&&(e.gainFleetSupply=function(e,t,r){return r}),null==e.gainStrategyCard&&(e.gainStrategyCard=function(e,t,r){return r}),null==e.gainCommandTokens&&(e.gainCommandTokens=function(e,t,r){return r}),null==e.gainStrategyTokens&&(e.gainStrategyTokens=function(e,t,r){return r}),null==e.losePlanet&&(e.losePlanet=function(e,t,r){return 1}),null==e.upgradeUnit&&(e.upgradeUnit=function(e,t,r){return r}),null==e.unitDestroyed&&(e.unitDestroyed=function(e,t,r){return r}),null==e.unitHit&&(e.unitHit=function(e,t,r){return r}),null==e.onNewRound&&(e.onNewRound=function(e,t,r){return 0}),null==e.onNewTurn&&(e.onNewTurn=function(e,t,r){return 0}),null==e.spaceCombatRoundEnd&&(e.spaceCombatRoundEnd=function(e,t,r,n){return 1}),null==e.antiFighterBarrageEventTriggers&&(e.antiFighterBarrageEventTriggers=function(e,t,r,n,a){return 0}),null==e.antiFighterBarrageEvent&&(e.antiFighterBarrageEvent=function(e,t,r,n,a){return 1}),null==e.groundCombatRoundEnd&&(e.groundCombatRoundEnd=function(e,t,r,n,a){return 1}),null==e.postProduction&&(e.postProduction=function(e,t,r){return 1}),null==e.strategyPrimaryEvent&&(e.strategyPrimaryEvent=function(e,t,r){return 0}),null==e.strategySecondaryEvent&&(e.strategySecondaryEvent=function(e,t,r){return 0}),null==e.strategyCardBeforeTriggers&&(e.strategyCardBeforeTriggers=function(e,t,r,n){return 0}),null==e.strategyCardBeforeEvent&&(e.strategyCardBeforeEvent=function(e,t,r,n){return 0}),null==e.strategyCardAfterTriggers&&(e.strategyCardAfterTriggers=function(e,t,r,n){return 0}),null==e.strategyCardAfterEvent&&(e.strategyCardAfterEvent=function(e,t,r,n){return 0}),null==e.playersChooseStrategyCardsBeforeTriggers&&(e.playersChooseStrategyCardsBeforeTriggers=function(e,t){return 0}),null==e.playersChooseStrategyCardsBeforeEvent&&(e.playersChooseStrategyCardsBeforeEvent=function(e,t){return 0}),null==e.playersChooseStrategyCardsAfterTriggers&&(e.playersChooseStrategyCardsAfterTriggers=function(e,t){return 0}),null==e.playersChooseStrategyCardsAfterEvent&&(e.playersChooseStrategyCardsAfterEvent=function(e,t){return 0}),null==e.menuOption&&(e.menuOption=function(e,t,r){return{}}),null==e.menuOptionTriggers&&(e.menuOptionTriggers=function(e,t,r){return 0}),null==e.menuOptionActivated&&(e.menuOptionActivated=function(e,t,r){return 0}),null==e.preAgendaStageTriggers&&(e.preAgendaStageTriggers=function(e,t,r){return 0}),null==e.preAgendaStageEvent&&(e.preAgendaStageEvent=function(e,t,r){return 1}),null==e.postAgendaStageTriggers&&(e.postAgendaStageTriggers=function(e,t,r){return 0}),null==e.postAgendaStageEvent&&(e.postAgendaStageEvent=function(e,t,r){return 1}),null==e.returnAgendaOptions&&(e.returnAgendaOptions=function(e){return["support","oppose"]}),null==e.repealAgenda&&(e.repealAgenda=function(e){return 1}),null==e.onPass&&(e.onPass=function(e,t){return 0}),null==e.modifyPDSRoll&&(e.modifyPDSRoll=function(e,t,r,n){return n}),null==e.modifySpaceCombatRoll&&(e.modifySpaceCombatRoll=function(e,t,r,n){return n}),null==e.modifyGroundCombatRoll&&(e.modifyGroundCombatRoll=function(e,t,r,n){return n}),null==e.modifyUnitHits&&(e.modifyUnitHits=function(e,t,r,n,a,i,o,s){return s}),null==e.modifyCombatRoll&&(e.modifyCombatRoll=function(e,t,r,n,a,i){return i}),null==e.modifyCombatRerolls&&(e.modifyCombatRerolls=function(e,t,r,n,a,i){return i}),null==e.modifyTargets&&(e.modifyTargets=function(e,t,r,n,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];return i}),null==e.canPlayerScoreVictoryPoints&&(e.canPlayerScoreVictoryPoints=function(e,t){return 0}),null==e.scoreObjective&&(e.scoreObjective=function(e,t){return 1}),null==e.returnPDSUnitsWithinRange&&(e.returnPDSUnitsWithinRange=function(e,t,r,n,a,i){return i}),null==e.playActionCardTriggers&&(e.playActionCardTriggers=function(e,t,r,n){return 0}),null==e.playActionCardEvent&&(e.playActionCardEvent=function(e,t,r,n){return 0}),null==e.playActionCard&&(e.playActionCard=function(e,t,r,n){return 1}),null==e.playStrategyCardPrimaryTriggers&&(e.playStrategyCardPrimaryTriggers=function(e,t,r){return 0}),null==e.playStrategyCardPrimaryEvent&&(e.playStrategyCardPrimaryEvent=function(e,t,r){return 0}),null==e.playStrategyCardSecondaryTriggers&&(e.playStrategyCardSecondaryTriggers=function(e,t,r){return 0}),null==e.playStrategyCardSecondaryEvent&&(e.playStrategyCardSecondaryEvent=function(e,t,r){return 0}),null==e.activateSystemTriggers&&(e.activateSystemTriggers=function(e,t,r,n){return 0}),null==e.activateSystemEvent&&(e.activateSystemEvent=function(e,t,r,n){return 0}),null==e.pdsSpaceAttackTriggers&&(e.pdsSpaceAttackTriggers=function(e,t,r,n){return 0}),null==e.pdsSpaceAttackEvent&&(e.pdsSpaceAttackEvent=function(e,t,r,n){return 0}),null==e.pdsSpaceDefenseTriggers&&(e.pdsSpaceDefenseTriggers=function(e,t,r,n){return 0}),null==e.pdsSpaceDefenseEvent&&(e.pdsSpaceDefenseEvent=function(e,t,r,n){return 0}),null==e.spaceCombatTriggers&&(e.spaceCombatTriggers=function(e,t,r){return 0}),null==e.spaceCombatEvent&&(e.spaceCombatEvent=function(e,t,r){return 0}),null==e.bombardmentTriggers&&(e.bombardmentTriggers=function(e,t,r,n,a){return 0}),null==e.bombardmentEvent&&(e.bombardmentEvent=function(e,t,r,n,a){return 0}),null==e.planetaryDefenseTriggers&&(e.planetaryDefenseTriggers=function(e,t,r,n){return 0}),null==e.planetaryDefenseEvent&&(e.planetaryDefenseEvent=function(e,t,r,n){return 0}),null==e.groundCombatTriggers&&(e.groundCombatTriggers=function(e,t,r,n){return 0}),null==e.groundCombatEvent&&(e.groundCombatEvent=function(e,t,r,n){return 0}),null==e.playerEndTurnTriggers&&(e.playerEndTurnTriggers=function(e,t){return 0}),null==e.playerEndTurnEvent&&(e.playerEndTurnEvent=function(e,t){return 0}),e}},{key:"returnFaction",value:function(e){return null==this.game.players_info[e-1]||null==this.game.players_info[e-1]?"Unknown":this.returnFactionName(this,e)}},{key:"returnFactionNickname",value:function(e){return null==this.game.players_info[e-1]||null==this.game.players_info[e-1]?"Unknown":this.returnFactionNameNickname(this,e)}},{key:"returnFactionName",value:function(e,t){return e.returnFactions()[e.game.players_info[t-1].faction].name}},{key:"returnFactionNameNickname",value:function(e,t){return e.returnFactions()[e.game.players_info[t-1].faction].nickname}},{key:"returnPlayerHomeworld",value:function(e){return this.returnFactions()[this.game.players_info[e-1].faction].homeworld}},{key:"returnSpeaker",value:function(){return this.returnFactions()[this.game.players_info[this.game.state.speaker-1].faction].name}},{key:"returnSectorName",value:function(e){return this.game.sectors[this.game.board[e].tile].name}},{key:"returnPlanetName",value:function(e,t){return this.returnSectorAndPlanets(e).p[t].name}},{key:"returnPlayersWithHighestVP",value:function(){for(var e=0,t=[],r=this.game.players_info,n=0;n<r.length;n++)r[n].vp>e&&(e=r[n].vp);for(var a=0;a<r.length;a++)r[a].vp==e&&t.push(a+1);return t}},{key:"returnPlayersWithLowestVP",value:function(){for(var e=1e3,t=[],r=this.game.players_info,n=0;n<r.length;n++)r[n].vp<e&&(e=r[n].vp);for(var a=0;a<r.length;a++)r[a].vp==e&&t.push(a+1);return t}},{key:"returnNameOfUnknown",value:function(e){return null!=this.tech[e]?this.tech[e].name:null!=this.strategy_cards[e]?this.strategy_cards[e].name:null!=this.game.planets[e]?this.game.planets[e].name:null!=this.agenda_cards[e]?this.agenda_cards[e].name:null!=this.action_cards[e]?this.action_cards[e].name:null!=this.stage_i_objectives[e]?this.stage_i_objectives[e].name:null!=this.stage_ii_objectives[e]?this.stage_ii_objectives[e].name:null!=this.secret_objectives[e]?this.secret_objectives[e].name:null!=this.promissary_notes[e]?this.promissary_notes[e].name:e}},{key:"returnNameFromIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null==e?"":0==e.indexOf("planet")&&this.game.planets[e]?this.game.planets[e].name:0==e.indexOf("sector")&&this.game.sectors[e]?this.game.sectors[e].sector:e}},{key:"returnActiveAgenda",value:function(){for(var e=this.game.queue.length-1;e>=0;e--){var t=this.game.queue[e].split("\t");if("agenda"==t[0])return t[1];if("simultaneous_agenda"==t[0])return t[1]}return""}},{key:"returnPlayerFleet",value:function(e){var t={fighters:0,infantry:0,carriers:0,cruisers:0,destroyers:0,dreadnaughts:0,flagship:0,warsuns:0,pds:0,spacedocks:0};for(var r in this.game.sectors)if(this.game.sectors[r].units[e-1])for(var n in this.game.sectors[r].units[e-1]){var a=this.game.sectors[r].units[e-1][n];"fighter"==a.type&&t.fighters++,"carrier"==a.type&&t.carriers++,"cruiser"==a.type&&t.cruisers++,"destroyer"==a.type&&t.destroyers++,"dreadnaught"==a.type&&t.dreadnaughts++,"flagship"==a.type&&t.flagship++,"warsun"==a.type&&t.warsun++}for(var i in this.game.planets)if(this.game.planets[i].units[e-1])for(var o in this.game.planets[i].units[e-1]){var s=this.game.planets[i].units[e-1][o];"infantry"==s.type&&t.infantry++,"spacedock"==s.type&&t.spacedock++,"pds"==s.type&&t.pds++}return t}},{key:"isPlayerOverCapacity",value:function(e,t){var r=this.returnShipsOverCapacity(e,t),n=this.returnFightersWithoutCapacity(e,t);return r>0||n>0?1:0}},{key:"returnSpareFleetSupplyInSector",value:function(e,t){for(var r=this.returnSectorAndPlanets(t),n=this.game.players_info[e-1].fleet_supply,a=0,i=0;i<r.s.units[e-1].length;i++){var o=r.s.units[e-1][i];"destroyer"==o.type&&a++,"carrier"==o.type&&a++,"cruiser"==o.type&&a++,"dreadnaught"==o.type&&a++,"flagship"==o.type&&a++,"warsun"==o.type&&a++,o.type}return n-a>0?n-a:0}},{key:"returnShipsOverCapacity",value:function(e,t){for(var r=this.returnSectorAndPlanets(t),n=this.game.players_info[e-1].fleet_supply,a=0,i=0;i<r.s.units[e-1].length;i++){var o=r.s.units[e-1][i];o.capacity,this.returnRemainingCapacity(o),"destroyer"==o.type&&a++,"carrier"==o.type&&a++,"cruiser"==o.type&&a++,"dreadnaught"==o.type&&a++,"flagship"==o.type&&a++,"warsun"==o.type&&a++,o.type}return a>n?a-n:0}},{key:"returnFightersWithoutCapacity",value:function(e,t){for(var r=this.returnSectorAndPlanets(t),n=this.game.players_info[e-1].fleet_supply,a=0,i=0,o=0,s=0,c=0;c<r.s.units[e-1].length;c++){var l=r.s.units[e-1][c];s+=l.capacity,a+=this.returnRemainingCapacity(l),"destroyer"==l.type&&i++,"carrier"==l.type&&i++,"cruiser"==l.type&&i++,"dreadnaught"==l.type&&i++,"flagship"==l.type&&i++,"warsun"==l.type&&i++,"fighter"==l.type&&o++}for(var u=0;u<r.p.length;u++)for(var d=0;d<r.p[u].units[e-1].length;d++)"spacedock"===r.p[u].units[e-1][d].type&&(o-=3)<0&&(o=0);return this.doesPlayerHaveTech(e,"fighter-ii")&&o+i-a>n?o-(a+(n-i)):o>s?o-s:0}},{key:"checkForVictory",value:function(){for(var e=0;e<this.game.players_info.length;e++)if(this.game.players_info[e].vp>=this.game.state.vp_target)return this.updateStatus("Game Over: "+this.returnFaction(e+1)+" has reached "+this.game.state.vo_target+" VP"),1;return 0}},{key:"returnSectorsWherePlayerCanRetreat",value:function(e,t){t.indexOf("_")>-1&&(t=this.game.board[t].tile);for(var r=[],n=this.returnAdjacentSectors(t),a=0;a<n.length;a++){var i=0;this.doesSectorContainPlayerShips(e,n[a])&&!this.doesSectorContainNonPlayerShips(e,n[a])&&(i=1),this.doesSectorContainPlanetOwnedByPlayer(n[a],e)&&!this.doesSectorContainNonPlayerShips(e,n[a])&&(i=1),1==i&&r.push(n[a])}return r}},{key:"canPlayerRetreat",value:function(e,t,r,n){for(var a=this.returnAdjacentSectors(n),i=0;i<a.length;i++){if(this.doesSectorContainPlayerShips(e,a[i])&&!this.doesSectorContainNonPlayerShips(e,a[i]))return 1;if(this.doesSectorContainPlanetOwnedByPlayer(a[i],e)&&!this.doesSectorContainNonPlayerShips(e,a[i]))return 1}return 0}},{key:"canPlayerTrade",value:function(e){for(var t=0;t<this.game.players_info.length;t++)if(0==this.game.players_info[t].traded_this_turn&&t+1!=this.game.player&&this.arePlayersAdjacent(this.game.player,t+1)){if((this.game.players_info[this.game.player-1].commodities>0||this.game.players_info[this.game.player-1].goods>0)&&(this.game.players_info[t].commodities>0||this.game.players_info[t].goods>0))return 1;if(this.game.players_info[this.game.player-1].promissary_notes.length>0||this.game.players_info[t].promissary_notes.length>0)return 1}return 0}},{key:"canPlayerProduceFlagship",value:function(e){for(var t in this.game.sectors)if(this.game.sectors[t])for(var r=0;r<this.game.sectors[t].units[e-1].length;r++)if("flagship"===this.game.sectors[t].units[e-1][r].type)return 0;return 1}},{key:"canPlayerPlayStrategyCard",value:function(e){for(var t=0;t<this.game.players_info[e-1].strategy.length;t++)if(!this.game.players_info[e-1].strategy_cards_played.includes(this.game.players_info[e-1].strategy[t]))return 1;return 0}},{key:"canPlayerPass",value:function(e){return 1==this.canPlayerPlayStrategyCard(e)?0:1}},{key:"canPlayerPlayActionCard",value:function(e){return this.returnPlayerActionCards(this.game.player).length>0?1:0}},{key:"exhaustPlayerResearchTechnologyPrerequisites",value:function(e){var t=this.game.players_info[this.game.player-1].tech;if(t.includes(e))return 0;for(var r=JSON.parse(JSON.stringify(this.tech[e].prereqs)),n=this.tech[e].faction,a=this.tech[e].type,i=0;i<t.length;i++)if(this.tech[t[i]])for(var o=this.tech[t[i]].color,s=0;s<r.length;s++)r[s]==o&&(r.splice(s,1),s=r.length);if(1==this.game.players_info[this.game.player-1].permanent_blue_tech_prerequisite)for(var c=0;c<r.length;c++)"blue"==r[c]&&(r.splice(c,1),c=r.length);if(1==this.game.players_info[this.game.player-1].permanent_green_tech_prerequisite)for(var l=0;l<r.length;l++)"green"==r[l]&&(r.splice(l,1),l=r.length);if(1==this.game.players_info[this.game.player-1].permanent_red_tech_prerequisite)for(var u=0;u<r.length;u++)"red"==r[u]&&(r.splice(u,1),u=r.length);if(1==this.game.players_info[this.game.player-1].permanent_yellow_tech_prerequisite)for(var d=0;d<r.length;d++)"yellow"==r[d]&&(r.splice(d,1),d=r.length);if(1==this.game.players_info[this.game.player-1].temporary_blue_tech_prerequisite)for(var h=0;h<r.length;h++)"blue"==r[h]&&(r.splice(h,1),h=r.length,this.game.players_info[this.game.player-1].temporary_blue_tech_prerequisite=0);if(1==this.game.players_info[this.game.player-1].temporary_green_tech_prerequisite)for(var p=0;p<r.length;p++)"green"==r[p]&&(r.splice(p,1),p=r.length,this.game.players_info[this.game.player-1].temporary_green_tech_prerequisite=0);if(1==this.game.players_info[this.game.player-1].temporary_red_tech_prerequisite)for(var f=0;f<r.length;f++)"red"==r[f]&&(r.splice(f,1),f=r.length,this.game.players_info[this.game.player-1].temporary_red_tech_prerequisite=0);if(1==this.game.players_info[this.game.player-1].temporary_yellow_tech_prerequisite)for(var m=0;m<r.length;m++)"yellow"==r[m]&&(r.splice(m,1),m=r.length,this.game.players_info[this.game.player-1].temporary_yellow_tech_prerequisite=0);r.length>=1&&this.game.players_info[this.game.player-1].permanent_ignore_number_of_tech_prerequisites_on_nonunit_upgrade>=1&&r.splice(0,1),r.length>=1&&this.game.players_info[this.game.player-1].temporary_ignore_number_of_tech_prerequisites_on_nonunit_upgrade>=1&&(r.splice(0,1),this.game_players_info[this.game.player-1].temporary_ignore_number_of_tech_prerequisities_on_nonunit_upgrade=0);for(var g=this.returnPlayerPlanetTechSkips(this.game.player,1),y=0;y<r.length;y++)for(var v=0;v<g.length;v++)r[y]===g[v].color&&(this.addMove("expend\t"+this.game.player+"\tplanet\t"+g[v].planet),r.splice(y,1),g.splice(v,1),y--,v--);return 0!=r.length||"all"!=n&&n!=this.game.players_info[this.game.player-1].faction||"normal"!=a?0:1}},{key:"canPlayerResearchTechnology",value:function(e){var t=this.game.players_info[this.game.player-1].tech,r=this.game.players_info[this.game.player-1].faction;if(t.includes(e))return 0;if(null==this.tech[e])return console.log("Undefined Technology: "+e),0;var n=JSON.parse(JSON.stringify(this.tech[e].prereqs)),a=this.tech[e].faction,i=this.tech[e].type,o=(this.tech[e].replaces,this.returnPlayerPlanetTechSkips(this.game.player,1));for(var s in this.tech)if(this.tech[s].faction==r&&this.tech[s].replaces==e)return 0;if("ability"==i)return 0;if("special"==i&&a!=this.game.players_info[this.game.player-1].faction)return 0;for(var c=0;c<t.length;c++)if(this.tech[t[c]])for(var l=this.tech[t[c]].color,u=0;u<n.length;u++)n[u]==l&&(n.splice(u,1),u=n.length);if(1==this.game.players_info[this.game.player-1].temporary_blue_tech_prerequisite)for(var d=0;d<n.length;d++)"blue"==n[d]&&(n.splice(d,1),d=n.length);if(1==this.game.players_info[this.game.player-1].temporary_green_tech_prerequisite)for(var h=0;h<n.length;h++)"green"==n[h]&&(n.splice(h,1),h=n.length);if(1==this.game.players_info[this.game.player-1].temporary_red_tech_prerequisite)for(var p=0;p<n.length;p++)"red"==n[p]&&(n.splice(p,1),p=n.length);if(1==this.game.players_info[this.game.player-1].temporary_yellow_tech_prerequisite)for(var f=0;f<n.length;f++)"yellow"==n[f]&&(n.splice(f,1),f=n.length);if(1==this.game.players_info[this.game.player-1].permanent_blue_tech_prerequisite)for(var m=0;m<n.length;m++)"blue"==n[m]&&(n.splice(m,1),m=n.length);if(1==this.game.players_info[this.game.player-1].permanent_green_tech_prerequisite)for(var g=0;g<n.length;g++)"green"==n[g]&&(n.splice(g,1),g=n.length);if(1==this.game.players_info[this.game.player-1].permanent_red_tech_prerequisite)for(var y=0;y<n.length;y++)"red"==n[y]&&(n.splice(y,1),y=n.length);if(1==this.game.players_info[this.game.player-1].permanent_yellow_tech_prerequisite)for(var v=0;v<n.length;v++)"yellow"==n[v]&&(n.splice(v,1),v=n.length);1==n.length&&this.game.players_info[this.game.player-1].permanent_ignore_number_of_tech_prerequisites_on_nonunit_upgrade>=1&&n.splice(0,1),1==n.length&&this.game.players_info[this.game.player-1].temporary_ignore_number_of_tech_prerequisites_on_nonunit_upgrade>=1&&n.splice(0,1);for(var b=0;b<n.length;b++)for(var _=0;_<o.length;_++)n[b]===o[_].color&&(n.splice(b,1),o.splice(_,1),b--,_--);return 0!=n.length||"all"!=a&&a!=this.game.players_info[this.game.player-1].faction||"normal"!=i&&"special"!=i?0:1}},{key:"returnAvailableVotes",value:function(e){for(var t=this.returnPlayerPlanetCards(e),r=0,n=0;n<t.length;n++)r+=this.game.planets[t[n]].influence;return r}},{key:"returnPlayersLeastDefendedPlanetInSector",value:function(e,t){var r=this.returnSectorAndPlanets(t),n=100,a=0;if(0==r.p.length)return-1;for(var i=0;i<r.p.length;i++)r.p[i].owner==e&&r.p[i].units[e-1].length<n&&(n=r.p[i].units[e-1].length,a=i);return a}},{key:"returnPlayerFleetInSector",value:function(e,t){for(var r=this.returnSectorAndPlanets(t),n="",a=0;a<r.s.units[e-1].length;a++)if(0==r.s.units[e-1][a].destroyed&&(a>0&&(n+=", "),n+=r.s.units[e-1][a].name,r.s.units[e-1][a].storage.length>0)){for(var i=0,o=0,s=0;s<r.s.units[e-1][a].storage.length;s++)"infantry"==r.s.units[e-1][a].storage[s].type&&o++,"fighter"==r.s.units[e-1][a].storage[s].type&&i++;(o>0||i>0)&&(n+=" (",o>0&&(n+=o+"i"),i>0&&(o>0&&(n+=", "),n+=i+"f"),n+=")")}return n}},{key:"returnShipInformation",value:function(e){for(var t=e.name,r=1;r<e.strength;r++)1==r&&(t+=" ("),t+="*",r==e.strength-1&&(t+=")");for(var n=0,a=0,i=0;i<e.storage.length;i++)"infantry"==e.storage[i].type&&a++,"fighter"==e.storage[i].type&&n++;return n+a>0&&(t+=" (",a>0&&(t+=a+"i"),n>0&&(a>0&&(t+=", "),t+=n+"f"),t+=")"),t}},{key:"returnTotalResources",value:function(e){for(var t=this.returnPlayerPlanetCards(e),r=0,n=0;n<t.length;n++)r+=this.game.planets[t[n]].resources;return r+=this.game.players_info[e-1].goods}},{key:"returnTotalInfluence",value:function(e){for(var t=this.returnPlayerPlanetCards(e),r=0,n=0;n<t.length;n++)r+=this.game.planets[t[n]].influence;return r+=this.game.players_info[e-1].goods}},{key:"returnAvailableResources",value:function(e){for(var t=this.returnPlayerUnexhaustedPlanetCards(e),r=0,n=0;n<t.length;n++)r+=this.game.planets[t[n]].resources;return r+=this.game.players_info[e-1].goods}},{key:"returnAvailableInfluence",value:function(e){for(var t=this.returnPlayerUnexhaustedPlanetCards(e),r=0,n=0;n<t.length;n++)r+=this.game.planets[t[n]].influence;return r+=this.game.players_info[e-1].goods}},{key:"returnAvailableTradeGoods",value:function(e){return this.game.players_info[e-1].goods}},{key:"canPlayerActivateSystem",value:function(e){return 1==this.returnSectorAndPlanets(e).s.activated[this.game.player-1]?0:1}},{key:"returnDefender",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.returnSectorAndPlanets(t),a=-1;if(null==r){for(var i=0;i<n.s.units.length;i++)e!=i+1&&n.s.units[i].length>0&&(a=i+1);return a}for(var o=0;o<n.p[r].units.length;o++)e!=o+1&&n.p[r].units[o].length>0&&(a=o+1);return-1==a&&n.p[r].owner!=e?n.p[r].owner:a}},{key:"hasUnresolvedSpaceCombat",value:function(e,t){for(var r=this.returnSectorAndPlanets(t),n=0,a=0,i=0;i<r.s.units.length;i++)if(e!=i+1){if(r.s.units[i].length>0)for(var o=0;o<r.s.units[i].length;o++)0==r.s.units[i][o].destroyed&&(n=1)}else if(r.s.units[i].length>0)for(var s=0;s<r.s.units[i].length;s++)0==r.s.units[i][s].destroyed&&(a=1);return 0==n?0:1==n&&1==a?1:0}},{key:"hasUnresolvedGroundCombat",value:function(e,t,r){for(var n=this.returnSectorAndPlanets(t),a=-1,i=0;i<n.p[r].units.length;i++)n.p[r].units[i].length>0&&i+1!=e&&(a=i+1);return a==e?0:(attacker_forces=-1==e?0:this.returnNumberOfGroundForcesOnPlanet(e,t,r),defender_forces=-1==a?0:this.returnNumberOfGroundForcesOnPlanet(a,t,r),attacker_forces>0&&defender_forces>0?1:0)}},{key:"isPlanetExhausted",value:function(e){return 1==this.game.planets[e].exhausted?1:0}},{key:"returnAdjacentSectors",value:function(e){e.indexOf("_")>-1&&(e=this.game.board[e].tile);var t=[],r=this.addWormholesToBoardTiles(this.returnBoardTiles());for(var n in r)if(this.game.board[n]){var a=this.returnSectorAndPlanets(n);if(a&&a.s&&a.s.sector==e)for(var i=0;i<r[n].neighbours.length;i++){var o=this.returnSectorAndPlanets(r[n].neighbours[i]);o&&o.s&&t.push(o.s.sector)}}return t}},{key:"areSectorsAdjacent",value:function(e,t){var r=this.addWormholesToBoardTiles(this.returnBoardTiles());if(""===e)return 0;if(""===t)return 0;var n=this.returnSectorAndPlanets(e),a=this.returnSectorAndPlanets(t),i=n.s.tile,o=a.s.tile;if(""===i||""===o)return 0;if(r[i].neighbours.includes(o))return 1;if(r[o].neighbours.includes(i))return 1;for(var s=0;s<this.game.state.temporary_adjacency.length;s++){if(temporary_adjacency[s][0]==e&&temporary_adjacency[s][1]==t)return 1;if(temporary_adjacency[s][0]==t&&temporary_adjacency[s][1]==e)return 1}return 0}},{key:"arePlayersAdjacent",value:function(e,t){for(var r=this.returnSectorsWithPlayerUnitsAndPlanets(e),n=this.returnSectorsWithPlayerUnitsAndPlanets(t),a=0;a<r.length;a++)for(var i=0;i<n.length;i++){if(r[a]===n[i])return 1;if(this.areSectorsAdjacent(r[a],n[i]))return 1}return 0}},{key:"isPlayerAdjacentToSector",value:function(e,t){for(var r=this.returnSectorsWithPlayerUnits(e),n=0;n<r.length;n++){if(r[n]==t)return 1;if(this.areSectorsAdjacent(r[n],t))return 1}return 0}},{key:"isPlayerShipAdjacentToSector",value:function(e,t){for(var r=this.returnSectorsWithPlayerShips(e),n=0;n<r.length;n++){if(r[n]==t)return 1;if(this.areSectorsAdjacent(r[n],t))return 1}return 0}},{key:"returnPlanetsOnBoard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=[];for(var r in this.game.planets)""!=this.game.planets[r].tile&&(null==e||e(this.game.planets[r]))&&t.push(r);return t}},{key:"returnSectorsOnBoard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=[];for(var r in this.game.sectors)this.game.sectors[r].tile&&(null==e||e(this.game.sectors[r]))&&t.push(r);return t}},{key:"returnSectorsWithPlayerShips",value:function(e){var t=[];for(var r in this.game.sectors)this.doesSectorContainPlayerShips(e,r)&&t.push(r);return t}},{key:"returnSectorsWithPlayerUnits",value:function(e){var t=[];for(var r in this.game.sectors)this.doesSectorContainPlayerUnits(e,r)&&t.push(r);return t}},{key:"returnSectorsWithPlayerUnitsAndPlanets",value:function(e){var t=[];for(var r in this.game.sectors)(this.doesSectorContainPlayerUnits(e,r)||this.doesSectorContainPlanetOwnedByPlayer(r,e))&&t.push(r);return t}},{key:"canPlayerProduceInSector",value:function(e,t){if(1==this.game.players_info[e-1].may_player_produce_without_spacedock)return 1;for(var r=this.returnSectorAndPlanets(t),n=0;n<r.p.length;n++)for(var a=0;a<r.p[n].units[e-1].length;a++)if("spacedock"==r.p[n].units[e-1][a].type)return 1;return 0}},{key:"canPlayerLandInfantry",value:function(e,t){for(var r=0,n=[],a=0,i=this.returnInfantryInSpace(e,t),o=this.returnSectorAndPlanets(t),s=0;s<o.p.length;s++)o.p[s].owner==this.game.player&&(r++,n.push(this.returnInfantryOnPlanet(o.p[s])),a+=this.returnInfantryOnPlanet(o.p[s]));if(r>1){for(var c=0;c<n.length;c++)if(n[c]<=a)return 1}else if(r>0&&i)return 1;return 0}},{key:"canPlayerInvadePlanet",value:function(e,t){for(var r=this.returnSectorAndPlanets(t),n=0,a=0,i=0,o=0;o<r.p.length;o++)0==r.p[o].locked&&r.p[o].owner!=e&&(a=1);if(0==a)return 0;for(var s=0;s<r.s.units[e-1].length;s++){for(var c=r.s.units[e-1][s],l=0;l<c.storage.length;l++)"infantry"==c.storage[l].type&&(i+=1);c.capacity>0&&(n=1)}if(i>0)return 1;if(1==n)for(var u=0;u<r.p.length;u++)for(var d=0;d<r.p[u].units[e-1].length;d++)if("infantry"==r.p[u].units[e-1][d].type)return 1;return 0}},{key:"returnSpeakerFirstOrder",value:function(){for(var e=this.game.state.speaker,t=[],r=0;r<this.game.players.length;r++){var n=r+e;n>this.game.players.length&&(n-=this.game.players.length),t.push(n)}return t}},{key:"returnSpeakerOrder",value:function(){for(var e=this.game.state.speaker,t=[],r=0;r<this.game.players.length;r++){var n=r+e+1;n>this.game.players.length&&(n-=this.game.players.length),t.push(n)}return t}},{key:"returnInitiativeOrder",value:function(){var e=this.returnStrategyCards(),t=[],r=[];for(var n in e)t[n]=e[n].rank;for(var a=0;a<this.game.players_info.length;a++){r[a]=1e5;for(var i=0;i<this.game.players_info[a].strategy.length;i++){var o=t[this.game.players_info[a].strategy[i]];o<r[a]&&(r[a]=o)}}for(var s=r.length,c=[],l=0;l<s;l++){for(var u=1e5,d=0,h=0;h<r.length;h++)r[h]<u&&(u=r[h],d=h);r[d]=999999,c.push(d+1)}return c}},{key:"returnSectorsWithinHopDistance",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=[],a=[],i=[],o=[],s=this.addWormholesToBoardTiles(this.returnBoardTiles());n.push(e),a.push(0),i.push(""),o.push(1);for(var c=0;c<t;c++)for(var l=JSON.parse(JSON.stringify(n)),u=JSON.parse(JSON.stringify(i)),d=0;d<l.length;d++){var h="";if("rift"==u[d]&&(h="rift"),null!=this.game.board[l[d]]){var p=1,f=this.game.sectors[this.game.board[l[d]].tile].type;if(null==r||(1==this.game.players_info[r-1].move_through_sectors_with_opponent_ships||1==this.game.players_info[r-1].temporary_move_through_sectors_with_opponent_ships||this.doesSectorContainNonPlayerShips(r,l[d])&&(p=-1,console.log("now that we are here we can see sector: "+n[d]+" is unhoppable"),o[d]=-1),-1==o[d]&&(p=-1),3==f&&0==this.game.players_info[r-1].fly_through_asteroids&&(p=0),4==f&&0==this.game.players_info[r-1].fly_through_supernovas&&(p=0),2==f&&0==this.game.players_info[r-1].fly_through_nebulas&&(p=0)),1==f&&(h="rift",p=1),l[d]==e&&(p=1),-1==p){for(var g=s[l[d]].neighbours,y=0;y<g.length;y++)if(n.includes(g[y])){for(var v=1,b=0;b<n.length;b++)n[b]==g[y]&&i[b]==h&&(v=0);1==v&&(n.push(g[y]),o.push(-1),"rift"===h?a.push(c):a.push(c+1),i.push(h))}else n.push(g[y]),o.push(-1),"rift"===h?a.push(c):a.push(c+1),i.push(h);for(var _=0;_<this.game.state.temporary_adjacency.length;_++){if(l[d]==this.game.state.temporary_adjacency[_][0])if(n.includes(this.game.state.temporary_adjacency[_][1])){for(var w=1,x=0;x<n.length;x++)n[x]==this.game.state.temporary_adjacency[_][1]&&i[x]==h&&(w=0);1==w&&(n.push(g[m]),o.push(-1),"rift"===h?a.push(c):a.push(c+1),i.push(h))}else n.push(this.game.state.temporary_adjacency[_][1]),o.push(-1),"rift"===h?a.push(c):a.push(c+1),i.push(h);if(l[d]==this.game.state.temporary_adjacency[_][1])if(n.includes(this.game.state.temporary_adjacency[_][0])){for(var k=1,S=0;S<n.length;S++)n[S]==this.game.state.temporary_adjacency[_][0]&&i[S]==h&&(k=0);1==k&&(n.push(this.game.state.temporary_adjacency[_][0]),o.push(-1),"rift"===h?a.push(c):a.push(c+1),i.push(h))}else n.push(this.game.state.temporary_adjacency[_][0]),"rift"===h?a.push(c):a.push(c+1),o.push(-1),i.push(h)}}if(1==p){for(var E=s[l[d]].neighbours,A=0;A<E.length;A++)if(n.includes(E[A])){for(var P=1,C=0;C<n.length;C++)n[C]==E[A]&&(i[C]==h&&(P=0),-1==o[C]&&(P=1));1==P&&(n.push(E[A]),o.push(1),"rift"===h?a.push(c):a.push(c+1),i.push(h))}else n.push(E[A]),o.push(1),"rift"===h?a.push(c):a.push(c+1),i.push(h);for(var D=0;D<this.game.state.temporary_adjacency.length;D++){if(l[d]==this.game.state.temporary_adjacency[D][0])if(n.includes(this.game.state.temporary_adjacency[D][1])){for(var T=1,O=0;O<n.length;O++)n[O]==this.game.state.temporary_adjacency[D][1]&&i[O]==h&&(T=0);1==T&&(n.push(E[m]),o.push(1),"rift"===h?a.push(c):a.push(c+1),i.push(h))}else n.push(this.game.state.temporary_adjacency[D][1]),o.push(1),"rift"===h?a.push(c):a.push(c+1),i.push(h);if(l[d]==this.game.state.temporary_adjacency[D][1])if(n.includes(this.game.state.temporary_adjacency[D][0])){for(var M=1,I=0;I<n.length;I++)n[I]==this.game.state.temporary_adjacency[D][0]&&i[I]==h&&(M=0);1==M&&(n.push(this.game.state.temporary_adjacency[D][0]),o.push(1),"rift"===h?a.push(c):a.push(c+1),i.push(h))}else n.push(this.game.state.temporary_adjacency[D][0]),o.push(1),"rift"===h?a.push(c):a.push(c+1),i.push(h)}}}}for(var R=0;R<n.length;R++)if("rift"==i[R]&&a[R]==t&&null!=this.game.board[n[R]]){for(var F=s[n[R]].neighbours,B=0;B<F.length;B++)n.includes(F[B])||(o.push(1),n.push(F[B]),a.push(t),i.push("rift"));for(var j=0;j<this.game.state.temporary_adjacency.length;j++)n[R]==this.game.state.temporary_adjacency[j][0]&&(n.includes(this.game.state.temporary_adjacency[j][1])||(n.push(this.game.state.temporary_adjacency[j][1]),a.push(t),i.push("rift"),o.push(1))),n[R]==this.game.state.temporary_adjacency[j][1]&&(n.includes(this.game.state.temporary_adjacency[j][0])||(n.push(this.game.state.temporary_adjacency[j][0]),a.push(t),i.push("rift"),o.push(1)))}for(var N=n.length,q=0;q<N;q++)if("rift"===i[q])for(var L=0;L<n.length;L++)n[q]===n[L]&&a[q]>=a[L]&&q!=L&&(n.splice(q,1),o.splice(q,1),a.splice(q,1),i.splice(q,1),q--,N--,L=n.length+2);N=n.length;for(var U=0;U<N;U++)if(-1==o[U])for(var z=0;z<n.length;z++)n[U]===n[z]&&1==o[z]&&U!=z&&a[U]>=a[z]&&(n.splice(U,1),o.splice(U,1),a.splice(U,1),i.splice(U,1),U--,N--,z=n.length+2);var H={sectors:n,distance:a,hazards:i,hoppable:o};return H}},{key:"returnPDSOnPlanet",value:function(e){for(var t=0,r=0;r<e.units.length;r++)for(var n=0;n<e.units[r].length;n++)"pds"==e.units[r][n].type&&t++;return t}},{key:"returnSpaceDocksOnPlanet",value:function(e){for(var t=0,r=0;r<e.units.length;r++)for(var n=0;n<e.units[r].length;n++)"spacedock"==e.units[r][n].type&&t++;return t}},{key:"returnOpponentInSector",value:function(e,t){for(var r=this.returnSectorAndPlanets(t),n=0;n<r.s.units.length;n++)if(n+1!=e&&r.s.units[n].length>0)return n+1;return-1}},{key:"returnOpponentOnPlanet",value:function(e,t){for(var r=0;r<t.units.length;r++)if(r+1!=e&&t.units[r].length>0)return r+1;return-1}},{key:"returnPlayerInfantryOnPlanet",value:function(e,t){for(var r=0,n=0;n<t.units[e-1].length;n++)"infantry"==t.units[e-1][n].type&&r++;return r}},{key:"returnNonPlayerInfantryOnPlanet",value:function(e,t){for(var r=0,n=0;n<t.units.length;n++)if(n+1!=e)for(var a=0;a<t.units[n].length;a++)"infantry"==t.units[n][a].type&&r++;return r}},{key:"returnInfantryOnPlanet",value:function(e){for(var t=0,r=0;r<e.units.length;r++)for(var n=0;n<e.units[r].length;n++)"infantry"==e.units[r][n].type&&t++;return t}},{key:"returnInfantryInUnit",value:function(e){for(var t=0,r=0;r<e.storage.length;r++)"infantry"==e.storage[r].type&&t++;return t}},{key:"returnInfantryInSpace",value:function(e,t){for(var r=this.returnSectorAndPlanets(t),n=0,a=0;a<r.s.units[e-1].length;a++)if(0==r.s.units[e-1][a].destroyed&&r.s.units[e-1][a].storage.length>0)for(var i=0;i<r.s.units[e-1][a].storage.length;i++)"infantry"==r.s.units[e-1][a].storage[i].type&&n++;return n}},{key:"doesPlanetHavePDS",value:function(e){if(null==e.units){var t=this.game.planets[e];if(!t.units)return 0;e=t}for(var r=0;r<e.units.length;r++)for(var n=0;n<e.units[r].length;n++)if("pds"==e.units[r][n].type)return 1;return 0}},{key:"doesPlanetHaveSpaceDock",value:function(e){null==e.units&&(e=this.game.planets[e]);for(var t=0;t<e.units.length;t++)for(var r=0;r<e.units[t].length;r++)if("spacedock"==e.units[t][r].type)return 1;return 0}},{key:"doesPlanetHaveInfantry",value:function(e){null==e.units&&(e=this.game.planets[e]);for(var t=0;t<e.units.length;t++)for(var r=0;r<e.units[t].length;r++)if("infantry"==e.units[t][r].type)return 1;return 0}},{key:"doesPlanetHaveUnits",value:function(e){null==e.units&&(e=this.game.planets[e]);for(var t=0;t<e.units.length;t++)if(e.units[t].length>0)return 1;return 0}},{key:"doesPlanetHavePlayerInfantry",value:function(e,t){null==e.units&&(e=this.game.planets[e]);for(var r=0;r<e.units[t-1].length;r++)if("infantry"==e.units[i][r].type)return 1;return 0}},{key:"doesPlanetHavePlayerSpaceDock",value:function(e,t){for(var r=0;r<e.units[t-1].length;r++)if("spacedock"==e.units[i][r].type)return 1;return 0}},{key:"doesPlanetHavePlayerPDS",value:function(e,t){for(var r=0;r<e.units[t-1].length;r++)if("pds"==e.units[i][r].type)return 1;return 0}},{key:"doesPlayerHavePromissary",value:function(e,t){return this.game.players_info[e-1].promissary_notes.includes(t)?1:0}},{key:"returnPlayablePromissaryArray",value:function(e,t){for(var r=[],n=0;n<this.game.players_info.length;n++)n+1!=e&&r.push(this.game.players_info[n].faction+"-"+t);return r}},{key:"doesPlayerHaveRider",value:function(e){for(var t=0;t<this.game.state.riders.length;t++)if(this.game.state.riders[t].player==e)return 1;if(this.game.turn)for(var r=0;r<this.game.turn.length;r++)if(this.game.turn[r]){var n=this.game.turn[r].split("\t");if("rider"==n[0]&&n[1]==this.game.player)return 1}return 0}},{key:"doesPlayerHaveInfantryOnPlanet",value:function(e,t,r){return this.returnSectorAndPlanets(t).p[r].units[e-1].length>0?1:0}},{key:"doesPlayerHaveAntiFighterBarrageInSector",value:function(e,t){if(-1==e)return 0;var r=this.returnSectorAndPlanets(t);if(r.s.units[e-1].length>0)for(var n=0;n<r.s.units[e-1].length;n++)if(null==r.s.units[e-1][n])r.s.units[e-1].splice(n,1),n--;else if(0==r.s.units[e-1][n].destroyed&&"destroyer"==r.s.units[e-1][n].type)return 1;return 0}},{key:"doesPlayerHaveShipsInSector",value:function(e,t){if(-1==e)return 0;var r=this.returnSectorAndPlanets(t);if(r.s.units[e-1].length>0)for(var n=0;n<r.s.units[e-1].length;n++)if(null==r.s.units[e-1][n])r.s.units[e-1].splice(n,1),n--;else if(0==r.s.units[e-1][n].destroyed)return 1;return 0}},{key:"doesPlayerHaveUnitsInSector",value:function(e,t){if(-1==e)return 0;var r=this.returnSectorAndPlanets(t);if(r.s.units[e-1].length>0)for(var n=0;n<r.s.units[e-1].length;n++)if(null==r.s.units[e-1][n])r.s.units[e-1].splice(n,1),n--;else if(0==r.s.units[e-1][n].destroyed)return 1;for(var a=0;a<r.p.length;a++)if(r.p[a].units[e-1].length>0)return 1;return 0}},{key:"doesPlayerHaveUnitOnBoard",value:function(e,t){for(var r in this.game.sectors)for(var n=0;n<this.game.sectors[r].units[e-1].length;n++)if(this.game.sectors[r].units[e-1][n].type==t)return 1;for(var a in this.game.planets)for(var i=0;i<this.game.planets[a].units[e-1].length;i++)if(this.game.planets[a].units[e-1][i].type==t)return 1;return 1}},{key:"doesPlayerHavePDSUnitsWithinRange",value:function(e,t,r){this.returnSectorAndPlanets(r);var n,a,i=this.returnSectorsWithinHopDistance(r,1);n=i.sectors,a=i.distance;var o=this.returnPDSWithinRange(e,r,n,a),s=this.returnEventObjects();for(var c in s)for(var l=0;l<this.game.players_info.length;l++)o=s[c].returnPDSUnitsWithinRange(this,l+1,e,t,r,o);for(var u=0;u<o.length;u++)if(o[u].owner==t){if(o[u].sector==r)return 1;if(o[u].range>0)return 1}return 0}},{key:"returnPDSWithinRangeOfSector",value:function(e,t,r){for(var n,a,i=this.returnSectorAndPlanets(r),o=this.returnSectorsWithinHopDistance(r,1),s=-1,c=0;c<this.game.players_info.length;c++)i.s.units[c].length>0&&c+1!=e&&(s=c+1);n=o.sectors,a=o.distance;var l=this.returnPDSWithinRange(e,r,n,a),u=this.returnEventObjects();for(var d in u)for(var h=0;h<this.game.players_info.length;h++)l=u[d].returnPDSUnitsWithinRange(this,h+1,e,s,r,l);return l}},{key:"returnSectorAndPlanets",value:function(e){var t=null;if(null==this.game.board[e]){if(!this.game.sectors[e])return;t=this.game.sectors[e]}else{if(null==this.game.board[e].tile)return;t=this.game.sectors[this.game.board[e].tile]}if(null==t)return null;for(var r=[],n=0;n<t.planets.length;n++)r[n]=this.game.planets[t.planets[n]];return{s:t,p:r}}},{key:"saveSystemAndPlanets",value:function(e){for(var t in this.game.sectors)if(this.game.sectors[t].img==e.s.img){this.game.sectors[t]=e.s;for(var r=0;r<this.game.sectors[t].planets.length;r++)this.game.planets[this.game.sectors[t].planets[r]]=e.p[r]}}},{key:"returnOtherPlayerHomeworldPlanets",value:function(){arguments.length>0&&void 0!==arguments[0]||this.game.player;for(var e=[],t=0;t<this.game.players_info.length;t++)if(this.game.player!=t+1)for(var r=this.returnPlayerHomeworldPlanets(t+1),n=0;n<r.length;n++)e.push(r);return e}},{key:"doesPlayerControlHomeworld",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null==e&&(e=this.game.player);for(var t=this.returnSectorAndPlanets(this.returnPlayerHomeworldSector(e)),r=0;r<t.p.length;r++)if(t.p[r].owner!=e)return 0;return 1}},{key:"returnPlayerHomeworldSector",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null==e&&(e=this.game.player);var t=this.game.board[this.game.players_info[e-1].homeworld].tile;return t}},{key:"returnPlayerHomeworldPlanets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null==e&&(e=this.game.player);var t=this.game.board[this.game.players_info[e-1].homeworld].tile;return this.game.sectors[t].planets}},{key:"returnPlayerPlanetTechSkips",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[],n=this.returnPlayerPlanetCards(e,t),a=0;a<n.length;a++)this.game.planets[n[a]].bonus.indexOf("blue")>-1&&r.push({color:"blue",planet:n[a]}),this.game.planets[n[a]].bonus.indexOf("red")>-1&&r.push({color:"red",planet:n[a]}),this.game.planets[n[a]].bonus.indexOf("yellow")>-1&&r.push({color:"yellow",planet:n[a]}),this.game.planets[n[a]].bonus.indexOf("green")>-1&&r.push({color:"green",planet:n[a]});return r}},{key:"returnPlayerUnexhaustedPlanetCards",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null==e&&(e=this.game.player),this.returnPlayerPlanetCards(e,1)}},{key:"returnPlayerExhaustedPlanetCards",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null==e&&(e=this.game.player),this.returnPlayerPlanetCards(e,2)}},{key:"returnPlayerPlanetCards",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;null==e&&parseInt(this.game.player);var r=[];for(var n in this.game.planets)this.game.planets[n].owner==e&&(0==t&&r.push(n),1==t&&0==this.game.planets[n].exhausted&&r.push(n),2==t&&1==this.game.planets[n].exhausted&&r.push(n));return r}},{key:"returnPlayerActionCards",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];null==e&&(e=this.game.player);for(var r=[],n=0;n<this.game.deck[1].hand.length;n++)(0==t.length||t.includes(this.action_cards[this.game.deck[1].hand[n]].type))&&(this.game.players_info[e-1].action_cards_played.includes(this.game.deck[1].hand[n])||r.push(this.game.deck[1].hand[n]));return r}},{key:"returnPlayerObjectivesScored",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];null==e&&(e=this.game.player);for(var r=[],n=0;n<this.game.players_info[e-1].objectives_scored.length;n++){var a=this.game.players_info[e-1].objectives_scored[n];void 0!==this.stage_i_objectives[a]&&(0==t.length?r.push(this.stage_i_objectives_objectives[a]):t.includes("stage_i_objectives")&&r.push(this.stage_i_objectives[a])),void 0!==this.stage_ii_objectives[a]&&(0==t.length?r.push(this.stage_ii_objectives_objectives[a]):t.includes("stage_ii_objectives")&&r.push(this.stage_ii_objectives[a])),void 0!==this.secret_objectives[a]&&(0==t.length?r.push(this.secret_objectives_objectives[a]):t.includes("secret_objectives")&&r.push(this.secret_objectives[a]))}return r}},{key:"returnPlayerObjectives",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];null==e&&(e=this.game.player);var r=[];if(this.game.player==e)for(var n=0;n<this.game.deck[5].hand.length;n++)(0==t.length||t.includes("secret_objectives"))&&r.push(this.secret_objectives[this.game.deck[5].hand[n]]);for(var a=0;a<this.game.state.stage_i_objectives.length;a++)(0==t.length||t.includes("stage_i_objectives"))&&r.push(this.stage_i_objectives[this.game.state.stage_i_objectives[a]]);for(var i=0;i<this.game.state.stage_ii_objectives.length;i++)(0==t.length||t.includes("stage_ii_objectives"))&&r.push(this.stage_ii_objectives[this.game.state.stage_ii_objectives[i]]);return r}},{key:"returnPlanetCard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.game.planets[e];if(null==t)return'<div class="noncard">'+cardname+"</div>";var r='\n      <div class="planetcard" style="background-image: url(\''.concat(t.img,"');\">\n      </div>\n    ");return r}},{key:"returnStrategyCard",value:function(e){var t=this.returnStrategyCards()[e];return null==t?'<div class="noncard">'+e+"</div>":'\n      <div class="strategycard" style="background-image: url(\''.concat(t.img,'\');">\n        <div class="strategycard_name">').concat(t.name,"</div>\n      </div>\n    ")}},{key:"returnActionCard",value:function(e){this.returnActionCards()[e]}},{key:"doesSectorContainPlanetOwnedByPlayer",value:function(e,t){var r=this.returnSectorAndPlanets(e);if(!r)return 0;for(var n=0;n<r.p.length;n++)if(r.p[n].owner==t)return 1;return 0}},{key:"doesSectorContainUnit",value:function(e,t){var r=this.returnSectorAndPlanets(e);if(!r)return 0;for(var n=0;n<r.s.units.length;n++)for(var a=0;a<r.s.units[n].length;a++)if(r.s.units[n][a].type==t)return 1;return 0}},{key:"doesSectorContainPlayerShip",value:function(e,t){return this.doesSectorContainPlayerShips(e,t)}},{key:"doesSectorContainShips",value:function(e){var t=this.returnSectorAndPlanets(e);if(!t)return 0;for(var r=0;r<t.s.units.length;r++)if(t.s.units[r].length>0)return 1;return 0}},{key:"doesSectorContainNonPlayerUnit",value:function(e,t,r){for(var n=0;n<this.game.players_info.length;n++)if(n+1!=e&&this.doesSectorContainPlayerUnit(n+1,t,r))return 1;return 0}},{key:"doesSectorContainNonPlayerShips",value:function(e,t){for(var r=0;r<this.game.players_info.length;r++)if(r+1!=e&&this.doesSectorContainPlayerShips(r+1,t))return 1;return 0}},{key:"doesSectorContainPlayerUnit",value:function(e,t,r){var n=this.returnSectorAndPlanets(t);if(!n)return 0;for(var a=0;a<n.s.units[e-1].length;a++)if(n.s.units[e-1][a].type==r)return 1;for(var i=0;i<n.p.length;i++)for(var o=0;o<n.p[i].units[e-1].length;o++)if(n.p[i].units[e-1][o].type==r)return 1;return 0}},{key:"canPlayerMoveShipsIntoSector",value:function(e,t){if(0==this.game.players_info[e-1].move_into_supernovas&&4==this.returnSectorAndPlanets(t).s.type)return 0;if(!this.doesPlayerHaveTech(e,"antimass-deflectors")&&3==this.returnSectorAndPlanets(t).s.type)return 0;var r,n,a,i=[],o={max_hops:2};o.ship_move_bonus=this.game.players_info[this.game.player-1].ship_move_bonus+this.game.players_info[this.game.player-1].temporary_ship_move_bonus,o.fleet_move_bonus=this.game.players_info[this.game.player-1].fleet_move_bonus+this.game.players_info[this.game.player-1].temporary_fleet_move_bonus,o.ships_and_sectors=[],o.stuff_to_move=[],o.stuff_to_load=[],o.distance_adjustment=0,o.max_hops+=o.ship_move_bonus,o.max_hops+=o.fleet_move_bonus;var s=this.returnSectorsWithinHopDistance(t,o.max_hops,this.game.player);r=s.sectors,i=s.distance,n=s.hazards,a=s.hoppable;for(var c=0;c<i.length;c++)o.ship_move_bonus>0&&i[c]--,o.fleet_move_bonus>0&&i[c]--;return o.ship_move_bonus>0&&(o.distance_adjustment+=o.ship_move_bonus),o.fleet_move_bonus>0&&(o.distance_adjustment+=o.fleet_move_bonus),o.ships_and_sectors=this.returnShipsMovableToDestinationFromSectors(t,r,i,n,a),o.ships_and_sectors.length>0?1:0}},{key:"resetTechBonuses",value:function(){for(var e=this.returnTechnology(),t=0;t<this.game.players_info.length;t++)for(var r=0;r<this.game.players_info[t].tech.length;r++)e[this.game.players_info[t].tech[r]].onNewTurn()}},{key:"givePromissary",value:function(e,t,r){this.game.players_info[t-1].promissary_notes.push(r);for(var n=0;n<this.game.players_info[e-1].promissary_notes.length;n++)this.game.players_info[e-1].promissary_notes[n]===r&&(this.game.players_info[e-1].promissary_notes.splice(n,1),n=this.game.players_info[e-1].promissary_notes.length);for(var a=this.returnEventObjects(),i=0;i<a.length;i++)a[i].gainPromissary(this,t,r),a[i].losePromissary(this,e,r)}},{key:"handleFleetSupply",value:function(e,t){var r=this.returnSectorAndPlanets(t);t.indexOf("_")>0&&(t=r.s.sector);var n=this.returnShipsOverCapacity(e,t),a=this.returnFightersWithoutCapacity(e,t);if(n>0)return e==this.game.player&&(this.addMove("destroy_ships\t"+e+"\t"+n+"\t"+t+"\t1"),this.endTurn()),0;if(a>0){for(var i=this.returnSectorAndPlanets(t),o=0,s=0;s<i.s.units[e-1].length&&o<a;s++)"fighter"==i.s.units[e-1][s].type&&(i.s.units[e-1].splice(s,1),s--,o++);this.saveSystemAndPlanets(i)}return 1}},{key:"handleActionCardLimit",value:function(e){return this.game.players_info[e-1].action_cards_in_hand>this.game.players_info[e-1].action_card_limit?(this.game.player==e&&this.playerDiscardActionCards(this.game.players_info[e-1].action_cards_in_hand-this.game.players_info[e-1].action_card_limit),0):1}},{key:"resetSpaceUnitTemporaryModifiers",value:function(e){for(var t=this.returnSectorAndPlanets(e),r=0;r<t.s.units.length;r++)for(var n=0;n<t.s.units[r].length;n++)this.resetTemporaryModifiers(t.s.units[r][n])}},{key:"resetGroundUnitTemporaryModifiers",value:function(e,t){for(var r=this.returnSectorAndPlanets(e),n=0;n<r.p[t].units.length;n++)for(var a=0;a<r.p[t].units[n].length;a++)this.resetTemporaryModifiers(r.p[t].units[n][a])}},{key:"resetTargetUnits",value:function(){for(var e=0;e<this.game.players_info.length;e++)this.game.players_info[e].target_units=[]}},{key:"resetTurnVariables",value:function(e){this.game.players_info[e-1].planets_conquered_this_turn=[],this.game.players_info[e-1].may_player_produce_without_spacedock=0,this.game.players_info[e-1].may_player_produce_without_spacedock_production_limit=0,this.game.players_info[e-1].may_player_produce_without_spacedock_cost_limit=0,this.game.players_info[e-1].temporary_immune_to_pds_fire=0,this.game.players_info[e-1].temporary_immune_to_planetary_defense=0,this.game.players_info[e-1].temporary_space_combat_roll_modifier=0,this.game.players_info[e-1].temporary_ground_combat_roll_modifier=0,this.game.players_info[e-1].temporary_pds_combat_roll_modifier=0,this.game.players_info[e-1].temporary_bombardment_combat_roll_modifier=0,this.game.players_info[e-1].temporary_move_through_sectors_with_opponent_ships=0,this.game.players_info[e-1].temporary_fleet_move_bonus=0,this.game.players_info[e-1].temporary_ship_move_bonus=0,this.game.players_info[e-1].ground_combat_dice_reroll=0,this.game.players_info[e-1].space_combat_dice_reroll=0,this.game.players_info[e-1].pds_combat_dice_reroll=0,this.game.players_info[e-1].bombardment_combat_dice_reroll=0,this.game.players_info[e-1].combat_dice_reroll=0,this.game.players_info[e-1].experimental_battlestation="",this.game.players_info[e-1].lost_planet_this_round=-1,this.game.players_info[e-1].temporary_opponent_cannot_retreat=0;for(var t=0;t<this.game.players_info.length;t++)this.game.players_info[t].traded_this_turn=0;this.game.state.temporary_adjacency=[],this.game.state.temporary_wormhole_adjacency=0,this.game.state.retreat_cancelled=0}},{key:"deactivateSectors",value:function(){for(var e in this.game.sectors)for(var t=0;t<this.totalPlayers;t++){this.game.sectors[e].activated[t]=0;try{this.updateSectorGraphics(e)}catch(e){}}}},{key:"exhaustPlanet",value:function(e){this.game.planets[e].exhausted=1}},{key:"unexhaustPlanet",value:function(e){this.game.planets[e].exhausted=0}},{key:"updatePlanetOwner",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;e.indexOf("_")>-1&&(e=this.game.board[e].tile);var n="",a=this.returnSectorAndPlanets(e),i=r,o=a.p[t].owner;"new-byzantium"==e&&-1==a.p[t].owner&&-1!=r&&(this.game.players_info[r-1].vp+=1,this.updateLog(this.returnFaction(r)+" gains 1 VP for first conquest of New Byzantium"),this.updateLeaderboard());for(var s=0;s<a.p[t].units.length&&-1==r;s++)a.p[t].units[s].length>0&&(i=s+1);for(var c in-1!=i&&(a.p[t].owner=i,a.p[t].exhausted=1),this.game.planets)this.game.planets[c].name===a.p[t].name&&(n=c);if(o!=i){this.game.players_info[i-1].planets_conquered_this_turn.push(a.p[t].name);var l=this.returnEventObjects();for(var u in l)l[u].gainPlanet(this,i,n),-1!=o&&l[u].losePlanet(this,o,n)}this.saveSystemAndPlanets(a),this.updateSectorGraphics(e)}},{key:"eliminateDestroyedUnitsInSector",value:function(e,t){if(!((e=parseInt(e))<0)){var r=this.returnSectorAndPlanets(t),n=0;if(null!=r&&null!=r){for(var a=r.s.units[e-1].length,i=0;i<a;i++)null==r.s.units[e-1][i]?r.s.units[e-1].splice(i,1):1!=r.s.units[e-1][i].destroyed&&0!=r.s.units[e-1][i].strength||"spacedock"==r.s.units[e-1][i].type||"pds"==r.s.units[e-1][i].type||(n=1,r.s.units[e-1].splice(i,1),i--,a--);if(r.p)for(var o=0;o<r.p.length;o++)for(var s=r.p[o].units[e-1].length,c=0;c<s;c++)null==r.p[o].units[e-1][c]?r.p[o].units[e-1].splice(c,1):1!=r.p[o].units[e-1][c].destroyed&&0!=r.p[o].units[e-1][c].strength||"spacedock"==r.p[o].units[e-1][c].type||"pds"==r.p[o].units[e-1][c].type||(n=1,r.p[o].units[e-1].splice(c,1),c--,s--);1==n&&this.saveSystemAndPlanets(r)}}}},{key:"eliminateDestroyedUnitsOnPlanet",value:function(e,t,r){if(!(e<0)){for(var n=this.returnSectorAndPlanets(t),a=0;a<n.p[r].units[e-1].length;a++)null==n.p[r].units[e-1][a]?n.p[r].units[e-1].splice(a,1):1!=n.p[r].units[e-1][a].destroyed&&0!=n.p[r].units[e-1][a].strength||"spacedock"==n.p[r].units[e-1][a].type||"pds"==n.p[r].units[e-1][a].type||(n.p[r].units[e-1].splice(a,1),a--);this.saveSystemAndPlanets(n)}}},{key:"assignHitsToGroundForces",value:function(e,t,r,n,a){for(var i=this.returnEventObjects(),o=0,s=this.returnSectorAndPlanets(r),c=0;c<a;c++){for(var l=-1,u=-1,d=0;d<s.p[n].units[t-1].length;d++){var h=s.p[n].units[t-1][d];null!=h&&(h.strength>0&&-1==u&&0==h.destroyed&&(l=s.p[n].units[t-1].strength,u=d),h.strength>0&&h.strength<l&&-1!=u&&(l=h.strength,u=d))}if(u>-1&&(s.p[n].units[t-1][u].strength--,s.p[n].units[t-1][u].strength<=0))for(z_index in o++,s.p[n].units[t-1][u].destroyed=1,i)s.p[n].units[t-1][u]=i[z_index].unitDestroyed(this,e,s.p[n].units[t-1][u])}return this.saveSystemAndPlanets(s),o}},{key:"assignHitsToSpaceFleet",value:function(e,t,r,n){for(var a=this.returnEventObjects(),i=0,o=this.returnSectorAndPlanets(r),s=0;s<n;s++){for(var c=-1,l=-1,u=0;u<o.s.units[t-1].length;u++){var d=o.s.units[t-1][u];d.strength>0&&-1==l&&0==d.destroyed&&(c=o.s.units[t-1][u].strength,l=u),d.strength>0&&d.strength<c&&-1!=l&&(c=d.strength,l=u)}if(-1!=l&&(o.s.units[t-1][l].strength--,o.s.units[t-1][l].strength<=0))for(z_index in i++,o.s.units[t-1][l].destroyed=1,a)o.s.units[t-1][l]=a[z_index].unitDestroyed(this,e,o.s.units[t-1][l])}return this.saveSystemAndPlanets(o),i}},{key:"displayBoard",value:function(){for(var e in this.game.systems)this.updateSectorGraphics(e);this.addEventsToBoard()}},{key:"addEventsToBoard",value:function(){var e=this,t="",r=0,n=0;try{$(".sector").off(),$(".sector").on("mouseenter",(function(){t=$(this).attr("id"),e.showSector(t)})).on("mouseleave",(function(){t=$(this).attr("id"),e.hideSector(t)})),$(".sector").on("mousedown",(function(e){r=e.clientX,n=e.clientY})),$(".sector").on("mouseup",(function(a){Math.abs(r-a.clientX)>4||Math.abs(n-a.clientY)>4||(t=$(this).attr("id"),e.overlay.showOverlay(e.app,e,e.returnSectorInformationHTML(t)))}))}catch(e){}}},{key:"returnFirstTurnOverlay",value:function(){return'\n    <div class="how_to_play_overlay" id="how_to_play_overlay">\n\n<h2>Your First Turn:</h2>\n\n<p></p>\n\n<img src="/imperium/img/firstturn.png" style="width:400px;float:left;padding-right:15px;padding-bottom:5px;" />\n\nYour home world is bordered in your color. In Round 1, you can only activate \nsectors you can reach. To see ship movement, click on UNITS in the CARDS menu.\nThis will also show you build costs and strength in combat.\n\n<p style="margin-bottom:10px"></p>\n\nFirst turn? Try moving a CARRIER into a sector adjacent to your homeworld. \nBring INFANTRY so your can INVADE a planet in that sector after your fleet has\nmoved. The <span class="resources_box">resources</span> and <span class="influence_box">influence</span>\n of the planets you conquer will be available to spend Round 2.\n\n    </div>\n\n    <style type="text/css">\n.resources_box {\n background-color:black;padding:4px;border:1px solid #fff;\n}\n.influence_box {\n  background-color:orange;padding:4px;border:1px solid #fff;\n}\n.how_to_play_overlay {\n  padding:30px;\n  width: 800px;\n  max-width: 80vw;\n  max-height: 90vh;\n  font-family: \'orbitron-medium\', helvetica, arial;\n  line-height: 1.7em;\n  font-size: 1.1em;\n  background-image: url(\'/imperium/img/starscape-background4.jpg\');\n  background-size: cover;\n  color: white;\n  overflow-y: scroll;\n  font-size:1.4em;\n}\n    </style>\n  '}},{key:"returnHowToPlayOverlay",value:function(){return'\n\n    <div class="how_to_play_overlay" id="how_to_play_overlay">\n\n<h2>Your Goal:</h2>\n\n<img src="/imperium/img/planets/BROUGHTON.png" class="demo_planet_card" />\n\n<p></p>\n\nConquer planets to gain resources and influence:\n\n<p></p>\n\n<div style="padding-left:30px;padding-right:30px;">\n<div class="how_to_play_resources_entry">\n<b><span class="resources_box">RESOURCES</span></b>\n<p></p>\nbuild units and research technology.\n</div>\n\n<div class="how_to_play_resources_entry">\n<b><span class="influence_box">INFLUENCE</span></b>\n<p></p>\nbuy command tokens and vote on laws.\n</div>\n</div>\n\n\n<h2 style="margin-top:30px">On Your Turn:</h2>\n\n<div style="padding-left:30px;font-family:\'orbitron-medium\', helvetica, arial;line-height:2em;">\n  <ol class="demo_ordered_list" style="font-family: \'orbitron-medium\', helvetica, arial">\n    <li>Spend a command token to activate a sector</li>\n      <ul style="margin-left:20px">\n        <li style="list-style:none">- to move ships into the sector</li>\n        <li style="list-style:none">- to produce in the sector</li>\n      </ul>\n    <li>Play a strategy card</li>\n    <li>Pass</li>\n  </ol>\n</div>\n\n    </div>\n    </style>\n  '}},{key:"returnMovementOverlay",value:function(){return'\n\n    <div class="how_to_play_overlay" id="how_to_play_overlay">\n\n<h2>Moving Ships:</h2>\n\n<p style="margin-top:15px"></p>\n\nEach ship can move a maximum number of hexes per turn. The INFO > UNITS \nmenu will show you how many hexes.\n\n<p style="margin-top:15px"></p>\n\nTo move a ship, activate the destination sector. You will be able to \nto select the ships you wish to move.\n\n<p style="margin-top:15px"></p>\n\nSome tech upgrades and action cards can increase movement distance. You \ncan also <b>upgrade</b> units to increase combat and movement.\n\n\n<h2 style="margin-top:30px">Carrying Units:</h2>\n\n<p style="margin-top:15px"></p>\n\nSome units like the CARRIER have the capacity to carry planet-based \nunits like INFANTRY. You need these units to invade and controls\nplanets..\n\n<p style="margin-top:15px"></p>\n\nCapacity of each ship can be found in the INFO > UNITS menu.\n\n</div>\n\n    </div>\n  '}},{key:"returnCombatOverlay",value:function(){return'\n\n    <div class="how_to_play_overlay" id="how_to_play_overlay">\n\n<h2>Space Battles:</h2>\n\n<p style="margin-top:15px"></p>\n\nThe strength of each ship in combat can be found on the INFO > UNITS\nmenu. This is the number which must be rolled on a 10-sided dice to\nsecure a hit in combat.\n\n<p style="margin-top:15px"></p>\n\nIn combat both players fire all available units, and both players then\ntake damage. Combat ends when one player is destroyed or retreats from\nthe battle.\n\n<p style="margin-top:15px"></p>\n\nSpace battles are automated. If you have action cards that will\nmodify combat or allow you to avoid damage you will have the option to \nplay them during your turn.\n\n<p style="margin-top:15px"></p>\n\nThe order of combat:\n\n<p style="margin-top:15px"></p>\n\n<div style="padding-left:30px;font-family:\'orbitron-medium\', helvetica, arial;line-height:2em;">\n  <ol class="demo_ordered_list" style="font-family: \'orbitron-medium\', helvetica, arial">\n    <li>PDS combat (optional)</li>\n    <li>Anti-fighter barrage</li>\n    <li>Space Combat</li>\n  </ol>\n</div>\n\n<h2 style="clear:both;margin-top:35px;">Ground Combat:</h2>\n\n<div style="padding-left: 30px">\n\nGround combat works like space combat. The sequence of events:\n\n<p style="margin-top:15px"></p>\n\n<div style="padding-left:30px;font-family:\'orbitron-medium\', helvetica, arial;line-height:2em;">\n  <ol class="demo_ordered_list" style="font-family: \'orbitron-medium\', helvetica, arial">\n    <li>Bombardment (optional)</li>\n    <li>Landing of Infantry</li>\n    <li>Ground Combat</li>\n  </ol>\n</div>\n\n<p style="margin-top:15px"></p>\n\nGround combat ends when one player\'s infantry are totally destroyed. The \nwinner holds the planet, regardless of who controls the sector in space.\n\n</div>\n\n    </div>\n  '}},{key:"returnFactionOverlay",value:function(){return'\n\n    <div class="how_to_play_overlay" id="how_to_play_overlay">\n\n<h2 style="clear:both;margin-top:35px;">Faction Abilities:</h2>\n\n<div style="padding-left: 30px">\n\n<img src="/imperium/img/factions/faction_dashboard.png" class="demo_planet_card" />\n\n<p></p>\n\nThe faction dashboard shows the total influence and resources controlled by \nevery faction. The third hex is the number of trade goods held by each \nfaction. Trade goods may be spent 1-for-1 in lieu of resources or influence.\n\n<p></p>\n\n<div style="padding-left:30px;padding-right:30px;">\n<div class="how_to_play_resources_entry">\n<b>TRADE GOODS:</b>\n<p></p>\ncan be used instead of resources or influence.\n</div>\n\n<div class="how_to_play_resources_entry">\n<b>COMMODITIES:</b>\n<p></p>\nturn into trade goods when you trade them away\n</div>\n</div>\n\n<p style="margin-top:15px"></p>\n\nLearn more about the factions in the game by clicking on their faction \ndashboard. Each faction has unique faction abilities that can change the \ngame radically. Learn your opponent\'s weaknesses and strengths.\n\n    </div>\n  '}},{key:"returnNewSecretObjectiveOverlay",value:function(e){var t=this.secret_objectives[e];return'\n    <div class="new_secret_objective_overlay" id="new_secret_objective_overlay">\n      <div style="width:100%"><div class="new_secret_objective_overlay_title">New Secret Objective</div></div>\n      <div style="width:100%"><div style="display:inline-block">\n      <div class="objectives_overlay_objectives_card" style="background-image: url('.concat(t.img,')">\n        <div class="objectives_card_name">').concat(t.name,'</div>\n        <div class="objectives_card_content">\n          ').concat(t.text,'\n        <div class="objectives_secret_notice">secret</div>\n      </div>\n      </div></div>\n    </div>\n  ')}},{key:"returnTechOverlay",value:function(){return'<div class="tech_overlay overlay" id="tech_overlay"><img src="/imperium/img/tech_tree.png" style="width:90vw"></div>'}},{key:"returnSectorInformationHTML",value:function(e){e.indexOf("_")>-1&&(e=this.game.board[e].tile);var t=this.returnSectorAndPlanets(e),r='\n    <div class="system_summary">\n      <div class="system_summary_text">\n  ';r+='<div class="system_summary_sector">',r+=t.s.name,r+="</div>";for(var n="",a=0;a<t.s.units.length;a++)t.s.units[a].length>0&&(n+=this.returnPlayerFleetInSector(a+1,e),a=t.s.units.length);""!=n&&(r+='<div class="system_summary_units">',r+=n,r+="</div>"),r+='\n    <div class="grid-2">\n  ';for(var i=0;i<t.p.length;i++){var o="UNCONTROLLED";-1!=t.p[i].owner&&(o=this.returnFactionNickname(t.p[i].owner)),r+='\n      <div class="system_summary_planet">\n        '.concat(o,"\n        <p style=\"margin-top:10px\" />\n        <div style='clear:both;margin-left:10px;margin-top:6px;'>\n          ").concat(this.returnInfantryOnPlanet(t.p[i])," infantry\n          <br />\n          ").concat(this.returnPDSOnPlanet(t.p[i])," PDS\n          <br />\n          ").concat(this.returnSpaceDocksOnPlanet(t.p[i]),' spacedocks\n        </div>\n      </div>\n      <div class="system_summary_planet_card" style="background-image: url(\'').concat(t.p[i].img,"');\"></div>\n    ")}return r+="\n    </div>\n  </div>\n  "}},{key:"updateCombatLog",value:function(e){for(var t=0,r=0,n=0;n<e.units_firing.length;n++)1==e.reroll[n]&&(t=1),e.modified_roll[n]!=e.unmodified_roll[n]&&(r=1);var a="";a+='<table class="combat_log">',a+="<tr>",a+='<th class="combat_log_th">'.concat(this.returnFactionNickname(e.attacker),"</th>"),a+='<th class="combat_log_th">HP</th>',a+='<th class="combat_log_th">Combat</th>',a+='<th class="combat_log_th">Roll</th>',r&&(a+='<th class="combat_log_th">Modified</th>'),t&&(a+='<th class="combat_log_th">Reroll</th>'),a+='<th class="combat_log_th">Hit</th>',a+="</tr>";for(var i=0;i<e.units_firing.length;i++)a+="<tr>",a+='<td class="combat_log_td">'.concat(e.units_firing[i].name,"</td>"),a+='<td class="combat_log_td">'.concat(e.units_firing[i].strength,"</td>"),a+='<td class="combat_log_td">'.concat(e.hits_on[i],"</td>"),a+='<td class="combat_log_td">'.concat(e.unmodified_roll[i],"</td>"),r&&(a+='<td class="combat_log_td">'.concat(e.modified_roll[i],"</td>")),t&&(a+='<td class="combat_log_td">'.concat(e.reroll[i],"</td>")),a+='<td class="combat_log_td">'.concat(e.hits_or_misses[i],"</td>"),a+="</tr>";a+="</table>",this.updateLog(a)}},{key:"setPlayerActive",value:function(e){$(".dash-faction-status-"+e).css("background-color","green")}},{key:"setPlayerInactive",value:function(e){$(".dash-faction-status-"+e).css("background-color","red")}},{key:"setPlayerActiveOnly",value:function(e){for(var t=1;t<=this.game.players_info.length;t++)e==t?this.setPlayerActive(t):this.setPlayerInactive(t)}},{key:"returnPlanetInformationHTML",value:function(e){var t=e;this.game.planets[e]&&(t=this.game.planets[e]);var r=this.returnInfantryOnPlanet(t),n=this.returnPDSOnPlanet(t),a=this.returnSpaceDocksOnPlanet(t),i="";i=this.game.planets[e].owner>0?"p"+this.game.planets[e].owner:"nowner";var o="";return r>0&&(o+='<div class="planet_infantry_count_label">Infantry</div><div class="planet_infantry_count">'+r+"</div>"),n>0&&(o+='<div class="planet_pds_count_label">PDS</div><div class="planet_pds_count">'+n+"</div>"),a>0&&(o+='<div class="planet_spacedock_count_label">Spacedock</div><div class="planet_spacedock_count">'+a+"</div>"),""!=this.game.planets[e].bonus&&(o+='<div class="planet_tech_label tech_'+this.game.planets[e].bonus+' bold">'+this.game.planets[e].bonus+" TECH</div><div></div>"),o=n+a+r>0||""!=this.game.planets[e].bonus?'<div class="sector_information_planetname '.concat(i,'">').concat(t.name,'</div><div class="sector_information_planet_content">')+o+"</div>":'<div class="sector_information_planetname '.concat(i,'">').concat(t.name,"</div>")}},{key:"returnFactionDashboard",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t="",r=0;r<this.game.players_info.length;r++)t+='\n\n    <div data-id="'.concat(r+1,'" class="dash-faction p').concat(r+1,'">\n     <div data-id="').concat(r+1,'" class="dash-faction-name bk"></div>\n    '),t+=1==e?'\n      <div data-id="'.concat(r+1,'" class="dash-faction-agenda">\n        <div data-id="').concat(r+1,'" class="dash-item-agenda-influence agenda-influence">\n          <span data-id="').concat(r+1,'" class="avail">').concat(this.game.state.votes_available[r],"</span>\n        </div>\n      </div>\n    "):'\n      <div data-id="'.concat(r+1,'" class="dash-faction-info">\n        <div data-id="').concat(r+1,'" class="dash-item tooltip dash-item-resources resources">\n          <span data-id="').concat(r+1,'" class="avail"></span>\n          <span data-id="').concat(r+1,'" class="total"></span>\n        </div>\n\n        <div data-id="').concat(r+1,'" class="dash-item tooltip dash-item-influence influence">\n          <span data-id="').concat(r+1,'" class="avail"></span>\n          <span data-id="').concat(r+1,'" class="total"></span>\n        </div>\n\n        <div data-id="').concat(r+1,'" class="dash-item tooltip dash-item-trade trade">\n          <i data-id="').concat(r+1,'" class="fas fa-database pc white-stroke"></i>\n          <div data-id="').concat(r+1,'" id="dash-item-goods" class="dash-item-goods">\n            ').concat(this.game.players_info[r].goods,"\n          </div>\n        </div>\n      </div>\n    "),t+='\n      <div data-id="'.concat(r+1,'" class="dash-faction-base">\n\t<div data-id="').concat(r+1,'" class="dash-faction-status-').concat(r+1,' dash-faction-status"></div>\n\tcommodities : <span data-id="').concat(r+1,'" class="dash-item-commodities">').concat(this.game.players_info[r].commodities,'</span> / <span data-id="').concat(r+1,'" class="dash-item-commodity-limit">').concat(this.game.players_info[r].commodity_limit,'</span>\n      </div>\n\n      <div data-id="').concat(r+1,'" class="dash-faction-speaker'),this.game.state.speaker==r+1?t+=' speaker">speaker':t+='">',t+="</div>\n    </div>\n    ";return t}},{key:"returnLawsOverlay",value:function(){var e=this.returnAgendaCards(),t='<div class="overlay_laws_container">';if(this.game.state.laws.length>0){t+='<ul style="clear:both;margin-top:10px;">';for(var r=0;r<this.game.state.laws.length;r++)t+='  <li style="background-image: url(\'/imperium/img/agenda_card_template.png\');background-size:cover;" class="overlay_agendacard card option" id="'.concat(r,'"><div class="overlay_agendatitle">').concat(e[this.game.state.laws[r].agenda].name,'</div><div class="overlay_agendacontent">').concat(e[this.game.state.laws[r].agenda].text,'</div><div class="overlay_law_option">').concat(this.returnNameOfUnknown(this.game.state.laws[r].option),"</div></li>");t+="</ul>"}return 0==this.game.state.laws.length&&0==this.game.state.agendas.length&&(t+='<div class="overlay_laws_header">There are no laws in force or agendas up for consideration at this time.</div>'),t+="</div>"}},{key:"returnAgendasOverlay",value:function(){var e=this.returnAgendaCards(),t='<div class="overlay_laws_container">';if(this.game.state.agendas.length>0){t+='<div class="overlay_laws_list">';for(var r=0;r<this.game.state.agendas.length;r++)t+='  <div style="background-image: url(\'/imperium/img/agenda_card_template.png\');" class="overlay_agendacard card option" id="'.concat(r,'"><div class="overlay_agendatitle">').concat(e[this.game.state.agendas[r]].name,'</div><div class="overlay_agendacontent">').concat(e[this.game.state.agendas[r]].text,"</div></div>");t+="</div>"}return 0==this.game.state.laws.length&&0==this.game.state.agendas.length&&(t+='<div class="overlay_laws_header">There are no laws in force or agendas up for consideration at this time.</div>'),t+="</div>"}},{key:"returnStrategyOverlay",value:function(){var e=[],t=[];for(var r in this.strategy_cards){for(var n="not picked",a=-1,i=0,o=0;o<this.game.state.strategy_cards.length;o++)r===this.game.state.strategy_cards[o]&&(i=this.game.state.strategy_cards_bonus[o]);var s="";i>0&&(s='<div class="strategy_card_bonus">    \n        <i class="fas fa-database white-stroke"></i>\n        <span>'.concat(i,"</span>\n      </div>"));for(var c=this.strategy_cards[r],l=0;l<this.game.players_info.length;l++)this.game.players_info[l].strategy.includes(r)&&(n="unplayed",a=l+1,this.game.players_info[l].strategy_cards_played.includes(r)&&(n="played"));var u=c.returnCardImage(),d=u.lastIndexOf("</div>");u=u.substring(0,d),"not picked"!=n&&(u+='\n\t  <div class="strategy_card_state p'.concat(a,'">\n\t    <div class="strategy_card_state_internal bk">').concat(n,"</div>\n          </div>\n       ")),u+="\n          ".concat(s,"\n\t</div>\n    "),t.push(u),e.push(this.strategy_cards[r].rank)}for(var h=[],p=0;t.length>0&&!(++p>100);){for(var f=100,m=-1,g=0;g<e.length;g++)f>e[g]&&(f=e[g],m=g);h.push(t[m]),t.splice(m,1),e.splice(m,1)}var y="";y+='<div class="overlay_strategy_container">';for(var v=0;v<h.length;v++)y+=h[v];return y+="</div>"}},{key:"returnUnitsOverlay",value:function(){var e='<div class="units-overlay-container" style="">',t=[];if(1==this.game.state.round){e+='\n      <div style="width:100%;text-align:center"><div class="units-overlay-text" style="line-height: 1.4em; font-size: 1.8em; margin-top: 50px; margin-bottom: 30px; padding: 20px;">\n        units <b>COST</b> resources to produce\n<p style="margin-top:10px"></p>\n        ships <b>MOVE</b> a maximum number of hexes\n<p style="margin-top:10px"></p>\n\tsome <b>CARRY</b> infantry or fighters\n<p style="margin-top:10px"></p>\n\tlower <b>COMBAT</b> scores hit more often\n\n      </div></div>\n      <div class="unit-table">\n    ';var r=this.returnPlayerFleet(this.game.player);r.carriers>0&&t.push("carrier"),r.cruisers>0&&t.push("cruiser"),r.destroyers>0&&t.push("destroyer"),r.dreadnaughts>0&&t.push("dreadnaught"),r.warsuns>0&&t.push("warsun"),r.fighters>0&&t.push("fighter"),r.infantry>0&&t.push("infantry"),r.flagships>0&&t.push("flagship"),r.pds>0&&t.push("pds"),r.spacedocks}else{var n=this.game.players_info[this.game.player-1];e+='\n      <div style="width:100%;text-align:center"><div class="units-overlay-title">Your Units</div></div>\n      <div style="width:100%;text-align:center"><div class="units-overlay-text">check available upgrades in your faction overlay...</div></div>\n      <div class="unit-table">\n    ',this.doesPlayerHaveTech(this.game.player,"infantry-ii")?t.push("infantry-ii"):t.push("infantry"),this.doesPlayerHaveTech(this.game.player,"fighter-ii")?t.push("fighter-ii"):t.push("fighter"),this.doesPlayerHaveTech(this.game.player,"destroyer-ii")?t.push("destroyer-ii"):t.push("destroyer"),this.doesPlayerHaveTech(this.game.player,"carrier-ii")?t.push("carrier-ii"):t.push("carrier"),this.doesPlayerHaveTech(this.game.player,"cruiser-ii")?t.push("cruiser-ii"):t.push("cruiser"),this.doesPlayerHaveTech(this.game.player,"dreadnaught-ii")?t.push("dreadnaught-ii"):t.push("dreadnaught"),this.doesPlayerHaveTech(this.game.player,"flagship-ii")?t.push("flagship-ii"):t.push("flagship"),this.doesPlayerHaveTech(this.game.player,"warsun-ii")?t.push("warsun-ii"):1==n.may_produce_warsuns&&t.push("warsun"),this.doesPlayerHaveTech(this.game.player,"spacedock-ii")?t.push("spacedock-ii"):t.push("spacedock"),this.doesPlayerHaveTech(this.game.player,"pds-ii")?t.push("pds-ii"):t.push("pds")}for(var a=0;a<t.length;a++)e+=this.returnUnitTableEntry(t[a]);return e+='\n\n    <div id="close-units-btn" class="button" style="">CONTINUE</div>\n\n  '}},{key:"returnUnitPopup",value:function(e){return'\n\n    <div class="unit_details_popup">\n      '.concat(this.returnUnitPopupEntry(e),"}\n    </div\n\n  ")}},{key:"returnUnitPopupEntry",value:function(e){var t=this.units[e];return t?'\n      <div class="unit-element" style="background:#333c;width:100%;padding:5%;border-radius:5px;font-size:0.7em;">\n        <div class="unit-box-ship unit-box-ship-'.concat(e,'" style="width:100%"></div>\n        <div class="unit-box" style="width:24.5%;height:auto;padding-bottom:10px;">\n\t  <div class="unit-box-num" style="font-size:2.8em">').concat(t.cost,'</div>\n\t  <div class="unit-box-desc" style="font-size:1.4em;padding-top:5px;">cost</div>\n\t</div>\n        <div class="unit-box" style="width:24.5%;height:auto;padding-bottom:10px;">\n\t  <div class="unit-box-num" style="font-size:2.8em">').concat(t.move,'</div>\n\t  <div class="unit-box-desc" style="font-size:1.4em;padding-top:5px;">move</div>\n\t</div>\n        <div class="unit-box" style="width:24.5%;height:auto;padding-bottom:10px;">\n\t  <div class="unit-box-num" style="font-size:2.8em">').concat(t.combat,'</div>\n\t  <div class="unit-box-desc" style="font-size:1.4em;padding-top:5px;">combat</div>\n\t</div>\n        <div class="unit-box" style="width:24.5%;height:auto;padding-bottom:10px;">\n\t  <div class="unit-box-num" style="font-size:2.8em">').concat(t.capacity,'</div>\n\t  <div class="unit-box-desc" style="font-size:1.4em;padding-top:5px;">carry</div>\n\t</div>\n        <div class="unit-description" style="font-size:1.1em">').concat(t.description,".</div>\n      </div>\n    "):""}},{key:"returnUnitTableEntry",value:function(e){console.log("UNIT: "+e);var t=this.units[e],r=JSON.parse(JSON.stringify(t));return r.owner=this.game.player,(r=this.upgradeUnit(r,this.game.player))?'\n      <div class="unit-element">\n        <div class="unit-box-ship unit-box-ship-'.concat(e,'"></div>\n        <div class="unit-box">\n\t  <div class="unit-box-num">').concat(r.cost,'</div>\n\t  <div class="unit-box-desc">cost</div>\n\t</div>\n        <div class="unit-box">\n\t  <div class="unit-box-num">').concat(r.move,'</div>\n\t  <div class="unit-box-desc">move</div>\n\t</div>\n        <div class="unit-box">\n\t  <div class="unit-box-num">').concat(r.combat,'</div>\n\t  <div class="unit-box-desc">combat</div>\n\t</div>\n        <div class="unit-box">\n\t  <div class="unit-box-num">').concat(r.capacity,'</div>\n\t  <div class="unit-box-desc">carry</div>\n\t</div>\n        <div class="unit-description">').concat(r.description,".</div>\n      </div>\n    "):""}},{key:"returnNewActionCardsOverlay",value:function(e){for(var t='\n    <div class="new_action_cards_overlay_container" style="">\n      <div class="new_action_cards_title">'.concat("Your New Action Cards",'</div>\n      <div style="width:100%"><div class="new_objectives_text">click on your faction to see all your action cards anytime...</div></div>\n      <div class="new_action_cards">\n  '),r=0;r<e.length;r++)t+='\n      <div class="overlay_action_card bc">\n        <div class="action_card_name">'.concat(this.action_cards[e[r]].name,'</div>\n        <div class="action_card_content">').concat(this.action_cards[e[r]].text,"</div>\n      </div>\n    ");return t+='\n      </div>\n      <div id="close-action-cards-btn" class="button" style="">CONTINUE</div>\n    </div>\n  '}},{key:"returnObjectivesOverlay",value:function(){var e="";e+='<div class="objectives-overlay-container" style="">';for(var t=0;t<this.game.deck[5].hand.length;t++)if(!this.game.players_info[this.game.player-1].objectives_scored.includes(this.game.deck[5].hand[t])){var r=this.secret_objectives[this.game.deck[5].hand[t]];e+='<div class="objectives_overlay_objectives_card" style="background-image: url('.concat(r.img,')">\n                 <div class="objectives_card_name">').concat(r.name,'</div>\n                 <div class="objectives_card_content">').concat(r.text,'\n\t\t   <div class="objectives_secret_notice">secret</div>\n\t\t </div>\n\t       </div>\n      ')}for(var n=0;n<this.game.state.stage_i_objectives.length;n++){var a=this.stage_i_objectives[this.game.state.stage_i_objectives[n]];e+='<div class="objectives_overlay_objectives_card" style="background-image: url('.concat(a.img,')">\n               <div class="objectives_card_name">').concat(a.name,'</div>\n               <div class="objectives_card_content">').concat(a.text,'</div>\n               <div class="objectives_scorings">\n    ');for(var i=0;i<this.game.players_info.length;i++)for(var o=0;o<this.game.players_info[i].objectives_scored.length;o++)this.game.state.stage_i_objectives[n]===this.game.players_info[i].objectives_scored[o]&&(e+='<div class="objectives_players_scored players_scored_'.concat(i+1," p").concat(i+1,'"><div class="bk" style="width:100%;height:100%"></div></div>'));e+="</div>",e+="</div>"}e+="<p></p>";for(var s=0;s<this.game.state.stage_ii_objectives.length;s++){var c=this.stage_ii_objectives[this.game.state.stage_ii_objectives[s]];e+='<div class="objectives_overlay_objectives_card" style="background-image: url('.concat(c.img,')">\n               <div class="objectives_card_name">').concat(c.name,'</div>\n               <div class="objectives_card_content">').concat(c.text,'</div>\n               <div class="objectives_scorings">\n    ');for(var l=0;l<this.game.players_info.length;l++)for(var u=0;u<this.game.players_info[l].objectives_scored.length;u++)this.game.state.stage_ii_objectives[s]===this.game.players_info[l].objectives_scored[u]&&(e+='<div class="objectives_players_scored players_scored_'.concat(l+1," p").concat(l+1,'"><div class="bk" style="width:100%;height:100%"></div></div>'));e+="</div>",e+="</div>"}e+="<p></p>";for(var d=0;d<this.game.players_info.length;d++){d>0&&(e+="<p></p>");var h=this.returnPlayerObjectivesScored(d+1,["secret_objectives"]);for(var p in h)e+='<div class="objectives_overlay_objectives_card" style="background-image: url('.concat(h[p].img,')">\n               <div class="objectives_card_name">').concat(h[p].name,'</div>\n               <div class="objectives_card_content">').concat(h[p].text,'</div>\n               <div class="objectives_players_scored players_scored_').concat(d+1," p").concat(d+1,'"><div class="bk" style="width:100%;height:100%"></div></div>\n             </div>')}return e+="</div>"}},{key:"displayFactionDashboard",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=this;try{document.querySelector(".dashboard").innerHTML=this.returnFactionDashboard(t);for(var n="",a="",i=function(t){a=".dash-faction."+(n="p"+(t+1));var i=e.returnTotalResources(t+1)-e.game.players_info[t].goods,o=e.returnAvailableResources(t+1)-e.game.players_info[t].goods,s=e.returnTotalInfluence(t+1)-e.game.players_info[t].goods,c=e.returnAvailableInfluence(t+1)-e.game.players_info[t].goods;document.querySelector(".".concat(n," .dash-faction-name")).innerHTML=e.returnFaction(t+1);try{document.querySelector(".".concat(n," .influence .avail")).innerHTML=c,document.querySelector(".".concat(n," .influence .total")).innerHTML=s,document.querySelector(".".concat(n," .resources .avail")).innerHTML=o,document.querySelector(".".concat(n," .resources .total")).innerHTML=i,document.querySelector(".".concat(n," .dash-item-goods")).innerHTML=e.game.players_info[t].goods,document.querySelector(".".concat(n," .dash-item-commodities")).innerHTML=e.game.players_info[t].commodities,document.querySelector(".".concat(n," .dash-item-commodity-limit")).innerHTML=e.game.players_info[t].commodity_limit}catch(e){}document.querySelector(a).onclick=function(e){r.displayFactionSheet(t+1)}},o=0;o<this.game.players_info.length;o++)i(o)}catch(e){console.log("ERROR: "+e)}}},{key:"displayFactionSheet",value:function(e){var t=this.returnFactionSheet(this,e);this.overlay.showOverlay(this.app,this,t)}},{key:"returnFactionSheet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t||(t=e.game.player);var r="",n="";null!=t&&(r="p"+t,n="bc"+t);var a='\n      <div class="faction_sheet_container '.concat(r," ").concat(n,'" style="overflow-y:scroll;padding:15px;;width:90vw;height:90vh;background-image:url(\'/imperium/img/factions/').concat(e.game.players_info[t-1].faction,'.jpg\');background-size:cover;">\n        <div class="faction_sheet_token_box" id="faction_sheet_token_box">\n          <div class="faction_sheet_token_box_title">Command</div>\n          <div class="faction_sheet_token_box_title">Strategy</div>\n          <div class="faction_sheet_token_box_title">Fleet</div>\n          <div>\t\n            <span class="fa-stack fa-3x">\n            <i class="fas fa-dice-d20 fa-stack-2x pc white-stroke"></i>\n            <span class="fa fa-stack-1x">\n            <span class="token_count commend_token_count">\n            ').concat(e.game.players_info[t-1].command_tokens,'\n            </span>\n            </span>\n            </span>\n          </div>\n          <div>\n            <span class="fa-stack fa-3x">\n            <i class="far fa-futbol fa-stack-2x pc white-stroke"></i>\n            <span class="fa fa-stack-1x">\n            <span class="token_count strategy_token_count">\n            ').concat(this.game.players_info[t-1].strategy_tokens,'\n            </span>\n            </span>\n            </span>\n          </div>\n          <div>\n            <span class="fa-stack fa-3x">\n            <i class="fas fa-space-shuttle fa-stack-2x pc white-stroke"></i>\n            <span class="fa fa-stack-1x">\n            <span class="token_count fleet_supply_count">\n            ').concat(this.game.players_info[t-1].fleet_supply,'\n            </span>\n            </span>\n            </span>\n          </div>\n        </div>\n        <div class="faction_sheet_active">\n   ');a+='\n      <div class="faction_sheet_tech_box" id="faction_sheet_abilities_box">\n    ';for(var o=0;o<e.game.players_info[t-1].tech.length;o++){var s=e.tech[e.game.players_info[t-1].tech[o]];if("ability"==s.type){var c=s.returnCardImage();a+=c.replace(/card_nonopaque/g,"bc")}}a+="</div>",a+='\n      <div class="faction_sheet_tech_box" id="faction_sheet_tech_box">\n    ';for(var l=0;l<e.game.players_info[t-1].tech.length;l++){var u=e.game.players_info[t-1].tech[l],d=e.tech[u];"ability"!=d.type&&(a+=d.returnCardImage())}for(i in e.tech){var h=e.tech[i];if("special"==h.type&&!e.game.players_info[t-1].tech.includes(i)&&e.game.players_info[t-1].faction==h.faction){var p=h.returnCardImage();a+=p.replace(/card_nonopaque/g,"card_opaque")}}a+="</div>";var f=e.returnPlayerActionCards(e.game.player);if(f.length>0)if(a+='\n      <div class="faction_sheet_action_card_box" id="faction_sheet_action_card_box">\n      ',e.game.player==t)for(var m=0;m<f.length;m++)a+='\n            <div class="faction_sheet_action_card bc">\n              <div class="action_card_name">'.concat(e.action_cards[f[m]].name,'</div>\n              <div class="action_card_content">').concat(e.action_cards[f[m]].text,"</div>\n            </div> \n\t  ");else for(var g=e.game.players_info[t-1].action_cards_in_hand,y=0;y<g;y++)a+='\n            <div class="faction_sheet_action_card faction_sheet_action_card_back bc">\n            </div> \n\t  ';for(var v=e.returnPlayerPlanetCards(t),b=0;b<v.length;b++){var _="";1==this.game.planets[v[b]].exhausted&&(_="exhausted"),a+='<div class="faction_sheet_planet_card bc '.concat(_,'" id="').concat(v[b],'" style="background-image: url(').concat(this.game.planets[v[b]].img,');"></div>')}return a+="\n      </div>\n    "}},{key:"addUIEvents",value:function(){if(0!=this.browser_active){$("#hexGrid").draggable(),document.querySelector(".leaderboardbox").addEventListener("click",(function(e){document.querySelector(".leaderboardbox").toggleClass("leaderboardbox-lock")})),document.documentElement.style.setProperty("--my-color","var(--p".concat(this.game.player,")")),this.displayFactionDashboard();var e=this.returnTokenDisplay();document.querySelector(".hud-header").append(this.app.browser.htmlToElement(e))}}},{key:"returnTokenDisplay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null==e&&(e=this.game.player);var t='\n    <div class="hud-token-count">\n      <div>\t\n        <span class="fa-stack fa-3x">\n        <i class="fas fa-dice-d20 fa-stack-2x pc white-stroke"></i>\n        <span class="fa fa-stack-1x">\n        <div id="token_display_command_token_count" class="token_count command_token_count">\n        '.concat(this.game.players_info[e-1].command_tokens,'\n        </div>\n        </span>\n        </span>\n      </div>\n      <div>\n        <span class="fa-stack fa-3x">\n        <i class="far fa-futbol fa-stack-2x pc white-stroke"></i>\n        <span class="fa fa-stack-1x">\n        <div id="token_display_strategy_token_count" class="token_count strategy_token_count">\n        ').concat(this.game.players_info[e-1].strategy_tokens,'\n        </div>\n        </span>\n        </span>\n      </div>\n      <div>\n        <span class="fa-stack fa-3x">\n        <i class="fas fa-space-shuttle fa-stack-2x pc white-stroke"></i>\n        <span class="fa fa-stack-1x">\n        <div id="token_display_fleet_supply_count" class="token_count fleet_supply_count">\n        ').concat(this.game.players_info[e-1].fleet_supply,"\n        </div>\n        </span>\n        </span>\n      </div>\n    </div>");return t}},{key:"showSector",value:function(e){var t=this.game.board[e].tile;this.showSectorHighlight(t)}},{key:"hideSector",value:function(e){var t=this.game.board[e].tile;this.hideSectorHighlight(t),$(".sector_graphics_space_"+e).fadeIn()}},{key:"updateTokenDisplay",value:function(){try{$("#token_display_command_token_count").html(this.game.players_info[this.game.player-1].command_tokens),$("#token_display_strategy_token_count").html(this.game.players_info[this.game.player-1].strategy_tokens),$("#token_display_fleet_supply_count").html(this.game.players_info[this.game.player-1].fleet_supply_tokens)}catch(e){}}},{key:"updateLeaderboard",value:function(){if(0!=this.browser_active){var e=this.returnFactions();try{try{if(this.game.state.vp_target<14)for(var t=14;t>this.game.state.vp_target;t--){var r="."+t+"-points";document.querySelector(r).style.display="none"}}catch(e){}document.querySelector(".round").innerHTML=this.game.state.round,document.querySelector(".turn").innerHTML=this.game.state.turn;var n='<div class="VP-track-label">Victory Points</div>',a=14;14!=this.game.state.vp_target&&this.game.state.vp_target>0&&(a=this.game.state.vp_target),this.game.options.vp&&(a=parseInt(this.game.options.vp));for(var i=a;i>=0;i--){n+='<div class="vp '+i+'-points"><div class="player-vp-background">'+i+"</div>",n+='<div class="vp-players">';for(var o=0;o<this.game.players_info.length;o++)this.game.players_info[o].vp==i&&(n+='  <div class="player-vp" style="background-color:var(--p'.concat(o+1,');"><div class="vp-faction-name">').concat(e[this.game.players_info[o].faction].name,"</div></div>"));n+="</div></div>"}document.querySelector(".leaderboard").innerHTML=n}catch(e){}}}},{key:"updateSectorGraphics",value:function(e){var t=this.returnSectorAndPlanets(e);if(null!=t&&null!=t&&null!=t.s&&null!=t.s)try{-1==e.indexOf("_")&&(e=t.s.tile);for(var r=0;r<this.game.players_info.length;r++)if(this.game.queue.length>0){var n=this.game.queue[this.game.queue.length-1].split("\t");"destroy_unit"!==n[0]&&"assign_hit"!==n[0]&&this.eliminateDestroyedUnitsInSector(r+1,e)}var a=0,i=0;if(1==t.s.activated[this.game.player-1]){var o="#"+e;$(o).find(".hex_activated").css("background-color","var(--p"+this.game.player+")"),$(o).find(".hex_activated").css("opacity","0.3")}else $("#"+e).find(".hex_activated").css("opacity","0.0");for(var s=0;s<t.s.units.length;s++){var c=s+1;if(t.s.type>0&&$("#hex_img_hazard_border_"+e).css("display","block"),t.s.units[c-1].length>0){var l="#hex_img_faction_border_"+e,u="player_color_"+c;$(l).removeClass("player_color_1"),$(l).removeClass("player_color_2"),$(l).removeClass("player_color_3"),$(l).removeClass("player_color_4"),$(l).removeClass("player_color_5"),$(l).removeClass("player_color_6"),$(l).addClass(u),$(l).css("display","block"),$(l).css("opacity","1"),a=1}if(t.s.units[c-1].length>0){updated_space_graphics=1,i=1;for(var d=0,h=0,p=0,f=0,m=0,g=0,y=0,v=0;v<t.s.units[c-1].length;v++){var b=t.s.units[c-1][v];"carrier"==b.type&&d++,"fighter"==b.type&&h++,"destroyer"==b.type&&p++,"cruiser"==b.type&&f++,"dreadnaught"==b.type&&m++,"flagship"==b.type&&g++,"warsun"==b.type&&y++}var _=[],w=[];if(h>0){var x=h;h>9&&(x=9);var k="white_space_frame_1_"+x+".png";w.push("white_space_fighter.png"),_.push(k)}if(p>0){var S=p;p>9&&(S=9);var E="white_space_frame_2_"+S+".png";w.push("white_space_destroyer.png"),_.push(E)}if(d>0){var A=d;d>9&&(A=9);var P="white_space_frame_3_"+A+".png";w.push("white_space_carrier.png"),_.push(P)}if(f>0){var C=f;f>9&&(C=9);var D="white_space_frame_4_"+C+".png";w.push("white_space_cruiser.png"),_.push(D)}if(m>0){var T=m;m>9&&(T=9);var O="white_space_frame_5_"+T+".png";w.push("white_space_dreadnaught.png"),_.push(O)}if(g>0){var M=g;g>9&&(M=9);var I="white_space_frame_6_"+M+".png";w.push("white_space_flagship.png"),_.push(I)}if(y>0){var R=y;y>9&&(R=9);var F="white_space_frame_7_"+R+".png";w.push("white_space_warsun.png"),_.push(F)}$("#hex_bg_"+e+" > .sector_graphics").remove();for(var B="#hex_bg_"+e,j="player_color_"+c,N=0;N<w.length;N++)$(B).append('<img class="sector_graphics '+j+" ship_graphic sector_graphics_space sector_graphics_space_"+e+'" src="/imperium/img/frame/'+w[N]+'" />');for(var q=0;q<_.length;q++)$(B).append('<img style="opacity:0.8" class="sector_graphics sector_graphics_space sector_graphics_space_'+e+'" src="/imperium/img/frame/'+_[q]+'" />')}}0==i&&$("#hex_bg_"+e+" > .sector_graphics").remove();for(var L=[],U=[],z=0;z<t.s.units.length;z++){for(var H=z+1,G=0,K=0;K<t.p.length;K++)G+=t.p[K].units[H-1].length;if(G>0){for(var V=0;V<t.p.length;V++){if(t.p[V].units[H-1].length>0&&0==a){var W="#hex_img_faction_border_"+e,Y="player_color_"+H;$(W).removeClass("player_color_1"),$(W).removeClass("player_color_2"),$(W).removeClass("player_color_3"),$(W).removeClass("player_color_4"),$(W).removeClass("player_color_5"),$(W).removeClass("player_color_6"),$(W).addClass(Y),$(W).css("display","block"),$(W).css("opacity","0.6"),a=1}for(var J=0,Q=0,X=0,Z=0;Z<t.p[V].units[H-1].length;Z++){var ee=t.p[V].units[H-1][Z];"infantry"==ee.type&&J++,"pds"==ee.type&&X++,"spacedock"==ee.type&&Q++}var te="";if(L.push("white_planet_center.png"),1==t.p.length?te="center":(0==V&&(te="top_left"),1==V&&(te="bottom_right")),U.push(te),J>0){var re=J;J>9&&(re=9);var ne="white_planet_center_1_"+re+".png";L.push(ne),U.push(te)}if(Q>0){var ae=Q;Q>9&&(ae=9);var ie="white_planet_center_2_"+ae+".png";L.push(ie),U.push(te)}if(X>0){var oe=X;X>9&&(oe=9);var se="white_planet_center_3_"+oe+".png";L.push(se),U.push(te)}}0==i&&($("#hex_bg_"+e+" > .sector_graphics").remove(),i=1),$("#hex_bg_"+e+" > .sector_graphics_planet").remove();for(var ce=0;ce<L.length;ce++)ce>0&&(U[ce],U[ce-1])}}if(0==a)for(var le=0;le<t.p.length;le++)if(-1!=t.p[le].owner){var ue="#hex_img_faction_border_"+e,de="player_color_"+t.p[le].owner;$(ue).removeClass("player_color_1"),$(ue).removeClass("player_color_2"),$(ue).removeClass("player_color_3"),$(ue).removeClass("player_color_4"),$(ue).removeClass("player_color_5"),$(ue).removeClass("player_color_6"),$(ue).addClass(de),$(ue).css("display","block"),$(ue).css("opacity","0.6"),a=1}}catch(e){}}},{key:"unhighlightSectors",value:function(){for(var e in this.game.sectors)this.removeSectorHighlight(e)}},{key:"showUnit",value:function(e){var t=this.returnUnitPopup(e);this.cardbox.showCardboxHTML("",t,"",(function(){}))}},{key:"hideUnit",value:function(e){this.cardbox.hideCardbox(1)}},{key:"showSectorHighlight",value:function(e){this.addSectorHighlight(e)}},{key:"hideSectorHighlight",value:function(e){this.removeSectorHighlight(e)}},{key:"addSectorHighlight",value:function(e){e.indexOf("_")>-1&&(e=this.game.board[e].tile);var t=this.returnSectorAndPlanets(e);try{0!=e.indexOf("planet")&&"new-byzantium"!=e||(e=this.game.planets[e].sector);var r=".sector_graphics_space_"+t.s.tile;if($(r).css("display","none"),!this.game.sectors[e].planets)return;if(0==this.game.sectors[e].planets.length)return;var n=document.querySelector("#hex_info_"+t.s.tile),a="";1==this.game.sectors[e].planets.length?(a=this.returnPlanetInformationHTML(this.game.sectors[e].planets[0]),n.innerHTML=a,n.classList.add("one_planet")):(a='<div class="top_planet">',a+=this.returnPlanetInformationHTML(this.game.sectors[e].planets[0]),a+='</div><div class="bottom_planet">',a+=this.returnPlanetInformationHTML(this.game.sectors[e].planets[1]),a+="</div>",n.innerHTML=a,n.classList.add("two_planet")),document.querySelector("#hexIn_"+t.s.tile).classList.add("bi")}catch(e){}}},{key:"removeSectorHighlight",value:function(e){try{0!=e.indexOf("planet")&&"new-byzantium"!=e||(e=this.game.planets[e].sector);var t=this.returnSectorAndPlanets(e),r=".sector_graphics_space_"+t.s.tile;$(r).css("display","all"),document.querySelector("#hexIn_"+t.s.tile).classList.remove("bi")}catch(e){}}},{key:"addPlanetHighlight",value:function(e,t){e.indexOf("_")>-1&&(e=this.game.board[e].tile),this.showSectorHighlight(e)}},{key:"removePlanetHighlight",value:function(e,t){this.hideSectorHighlight(e)}},{key:"showHelpCard",value:function(e){var t="";"resources"==e&&(t='<div style="width:100%; height: 100%"><img style="width:100%;height:auto;" src="/imperium/img/resources_dash_card.png" /></div>'),"influence"==e&&(t='<div style="width:100%; height: 100%"><img style="width:100%;height:auto;" src="/imperium/img/influence_dash_card.png" /></div>'),"trade"==e&&(t='<div style="width:100%; height: 100%"><img style="width:100%;height:auto;" src="/imperium/img/trade_dash_card.png" /></div>'),this.cardbox.showCardboxHTML(null,t)}},{key:"hideHelpCard",value:function(e){this.cardbox.hideCardbox(1)}},{key:"showActionCard",value:function(e){var t=this.action_cards[e],r='\n      <div class="overlay_action_card bc">\n        <div class="action_card_name">'.concat(t.name,'</div>\n        <div class="action_card_content">').concat(t.text,"</div>\n      </div>\n    ");this.cardbox.showCardboxHTML(t,r)}},{key:"hideActionCard",value:function(e){this.cardbox.hideCardbox(1)}},{key:"showStrategyCard",value:function(e){for(var t=this.returnStrategyCards()[e],r=0,n=0;n<this.game.state.strategy_cards.length;n++)t===this.game.state.strategy_cards[n]&&(r=this.game.state.strategy_cards_bonus[n]);r>0&&'<div class="strategy_card_bonus">    \n        <i class="fas fa-database white-stroke"></i>\n        <span>'.concat(r,"</span>\n      </div>"),this.cardbox.showCardboxHTML(t,t.returnCardImage())}},{key:"hideStrategyCard",value:function(e){this.cardbox.hideCardbox(1)}},{key:"showPlanetCard",value:function(e,t){var r=this.returnPlanets()[this.returnSectors()[this.game.board[e].tile].planets[t]];this.cardbox.showCardboxHTML(r,'<img src="'+r.img+'" style="width:100%" />')}},{key:"hidePlanetCard",value:function(e,t){this.cardbox.hideCardbox(1)}},{key:"showAgendaCard",value:function(e){var t=this.agenda_cards[e],r='\n      <div style="background-image: url(\'/imperium/img/agenda_card_template.png\');height:100%;" class="overlay_agendacard card option" id="'.concat(e,'">\n        <div class="overlay_agendatitle">').concat(t.name,'</div>\n        <div class="overlay_agendacontent">').concat(t.text,"</div>\n      </div>\n    ");this.cardbox.showCardboxHTML(t,r)}},{key:"hideAgendaCard",value:function(e,t){this.cardbox.hideCardbox(1)}},{key:"showTechCard",value:function(e){this.cardbox.showCardboxHTML(e,this.returnTechCardHTML(e))}},{key:"hideTechCard",value:function(e){this.cardbox.hideCardbox(1)}},{key:"returnShortGameOptionsArray",value:function(e){var t=c(p(y.prototype),"returnShortGameOptionsArray",this).call(this,e),r=[];for(var n in t)if(""!=t[n]){var a=n,i=e[n];"game_length"==n&&(a="VP"),r[a]=i}return r}},{key:"returnStrategyCards",value:function(){return this.strategy_cards}},{key:"importStrategyCard",value:function(e,t){null==t.name&&(t.name="Strategy Card"),null==t.rank&&(t.rank=1),null==t.returnCardImage&&(t.returnCardImage=function(){return'\n          <div class="strategy_card" id="'.concat(e,'">\n\t    <img class="strategy_card_img" id="').concat(e,'" src="/imperium/img').concat(t.img,'" style="width:100%">\n\t    <div class="strategy_card_text">').concat(t.text,"</div>\n\t  </div>\n        ")}),t=this.addEvents(t),this.strategy_cards[e]=t}},{key:"playStrategyCardPrimary",value:function(e,t){for(var r=0;r<this.game.players_info.length;r++)this.strategy_cards[t]&&this.strategy_cards[t].strategyPrimaryEvent(this,r+1,e);return 0}},{key:"playStrategyCardSecondary",value:function(e,t){for(var r=0;r<this.game.players_info.length;r++)this.strategy_cards[t]&&this.strategy_cards[t].strategySecondaryEvent(this,r+1,e);return 0}},{key:"playStrategyCardTertiary",value:function(e,t){for(var r=0;r<this.game.players_info.length;r++)this.strategy_cards[t]&&this.strategy_cards[t].strategyTertiaryEvent(this,r+1,e);return 0}}])&&s(t.prototype,r),n&&s(t,n),y}(r(82));e.exports=f},function(e,t){this.importActionCard("infiltrate",{name:"Infiltrate",type:"instant",text:"The next time you invade a planet, you may takeover any existing PDS units or Space Docks",playActionCard:function(e,t,r,n){return e.game.players_info[r-1].temporary_infiltrate_infrastructure_on_invasion=1,1}}),this.importActionCard("reparations",{name:"Reparations",type:"action",text:"If you have lost a planet this round, refresh one of your planets",playActionCard:function(e,t,r,n){if(-1!=e.game.players_info[r-1].lost_planet_this_round&&r==e.game.player){var a=e.returnPlayerExhaustedPlanetCards(e.game.player);return e.playerSelectPlanetWithFilter("Select an exhausted planet to refresh: ",(function(e){return a.includes(e)?1:0}),(function(t){return e.addMove("unexhaust\tplanet\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(r)+" refreshes "+e.game.planets[t].name),e.endTurn(),0}),null),0}return 1}}),this.importActionCard("political-stability",{name:"Political Stability",type:"instant",text:"Pick a strategy card you have already played this round. You may keep this for next round",playActionCard:function(e,t,r,n){if(e.game.player==r){for(var a='<div class="sf-readable">Pick a Strategy Card to keep for next round: </div><ul>',i=0;i<e.game.players_info[r-1].strategy_cards_played.length;i++){var o=e.game.players_info[r-1].strategy_cards_played[i];a+='<li class="option" id="'+o+'">'+e.strategy_cards[o].name+"</li>"}for(var s=0;s<e.game.players_info[r-1].strategy.length;s++)if(!e.game.players_info[e.game.player-1].strategy_cards_played.includes(e.game.players_info[r-1].strategy[s])){var c=e.game.players_info[r-1].strategy[s];a+='<li class="option" id="'+c+'">'+e.strategy_cards[c].name+"</li>"}a+="</ul>",e.updateStatus(a),$(".option").off(),$(".option").on("click",(function(){var t=$(this).attr("id");return e.addMove("strategy_card_retained\t"+e.game.player+"\t"+t),e.endTurn(),0}))}return 0},handleGameLoop:function(e,t,r){if("strategy_card_retained"==r[0]){var n=parseInt(r[1]),a=r[2];return e.game.queue.splice(t,1),e.game.players_info[n-1].strategy_cards_retained.push(a),1}return 1}}),this.importActionCard("lost-star-chart",{name:"Lost Star Chart",type:"instant",text:"During this turn, all wormholes are adjacent to each other",playActionCard:function(e,t,r,n){return e.game.state.temporary_wormholes_adjacent=1,1}}),this.importActionCard("plague",{name:"Plague",type:"action",text:"ACTION: Select a planet. Roll a dice for each infantry on planet and destroy number of rolls 6 or higher.",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectPlanetWithFilter("Select a planet to cripple with the plague:",(function(t){return e.doesPlanetHaveInfantry(t)}),(function(t){return e.addMove("plague\t"+e.game.player+"\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" unleashes a plague on "+e.game.planets[t].name),e.endTurn(),0}),null),0},handleGameLoop:function(e,t,r){if("plague"==r[0]){for(var n=parseInt(r[1]),a=r[2],i=e.game.planets[a].sector,o=e.game.planets[a].idx,s=e.returnSectorAndPlanets(i),c=e.returnEventObjects(),l=s.p[o].owner,u=0,d=0;d<s.p[o].units.length;d++)for(var h=0;h<s.p[o].units[d].length;h++){var p=s.p[o].units[d][h];if("infantry"==p.type)if(e.rollDice(10)>6){for(z_index in p.destroyed=1,c)p=c[z_index].unitDestroyed(this,n,p);u++}}return e.updateLog("The plague destroys "+u+" infantry"),e.eliminateDestroyedUnitsInSector(l,i),e.saveSystemAndPlanets(s),e.updateSectorGraphics(i),e.game.queue.splice(t,1),1}return 1}}),this.importActionCard("repeal-law",{name:"Repeal Law",type:"action",text:"ACTION: Repeal one law that is in effect.",playActionCard:function(e,t,r,n){if(e.game.player==r){for(var a='<div class="sf-readable">Pick a Law to Repeal: </div><ul>',i=0;i<e.game.state.laws.length;i++){var o=e.game.state.laws[i],s=e.agenda_cards[o];a+='<li class="option" id="'+s+'">'+s.name+"</li>"}a+='<li class="option" id="cancel">cancel</li>',a+="</ul>",e.updateStatus(a),$(".option").off(),$(".option").on("click",(function(){var t=$(this).attr("id");return"cancel"===t?(e.endTurn(),0):(e.addMove("repeal_law\t"+t),e.endTurn(),0)}))}return 0},handleGameLoop:function(e,t,r){if("repeal_law"==r[0]){var n=r[2];e.game.queue.splice(t,1);for(var a=0;a<e.game.state.laws.length;a++)if(e.game.state.laws[a]==n)return e.agenda_cards[n].repealAgenda(e),1;return 1}return 1}}),this.importActionCard("veto",{name:"Veto",type:"action",text:"ACTION: Select one agenda to remove from consideration and draw a replacement",playActionCard:function(e,t,r,n){if(e.game.player==r){var a="";for(a+="Select one agenda to quash in the Galactic Senate.<ul>",i=0;i<3;i++)a+='<li class="option" id="'+e.game.state.agendas[i]+'">'+e.agenda_cards[e.game.state.agendas[i]].name+"</li>";a+="</ul>",e.updateStatus(a),$(".option").off(),$(".option").on("mouseenter",(function(){var t=$(this).attr("id");e.showAgendaCard(t)})),$(".option").on("mouseleave",(function(){var t=$(this).attr("id");e.hideAgendaCard(t)})),$(".option").on("click",(function(){var t=$(this).attr("id");e.hideAgendaCard(t),e.updateStatus("Quashing Agenda"),e.addMove("quash\t"+t+"\t1"),e.endTurn()}))}return 0}}),this.importActionCard("flank-speed1",{name:"Flank Speed",type:"instant",text:"Gain +1 movement on all ships moved this turn",playActionCard:function(e,t,r,n){return e.game.players_info[r-1].temporary_fleet_move_bonus=1,1}}),this.importActionCard("flank-speed2",{name:"Flank Speed",type:"instant",text:"Gain +1 movement on all ships moved this turn",playActionCard:function(e,t,r,n){return e.game.players_info[r-1].temporary_fleet_move_bonus=1,1}}),this.importActionCard("flank-speed3",{name:"Flank Speed",type:"instant",text:"Gain +1 movement on all ships moved this turn",playActionCard:function(e,t,r,n){return e.game.players_info[r-1].temporary_fleet_move_bonus=1,1}}),this.importActionCard("flank-speed4",{name:"Flank Speed",type:"instant",text:"Gain +1 movement on all ships moved this turn",playActionCard:function(e,t,r,n){return e.game.players_info[r-1].temporary_fleet_move_bonus=1,1}}),this.importActionCard("propulsion-research",{name:"Propulsion Research",type:"instant",text:"Gain +1 movement on a single ship moved this turn",playActionCard:function(e,t,r,n){return e.game.players_info[r-1].temporary_ship_move_bonus=1,1}}),this.importActionCard("military-drills",{name:"Military Drills",type:"action",text:"ACTION: Gain two new command tokens",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerAllocateNewTokens(r,2),0}}),this.importActionCard("cripple-defenses",{name:"Cripple Defenses",type:"action",text:"ACTION: Select a planet and destroy all PDS units on that planet",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectPlanetWithFilter("Select a planet to destroy all PDS units on that planet: ",(function(t){return e.doesPlanetHavePDS(t)}),(function(t){for(var r=(t=e.game.planets[t]).sector,n=(t.tile,t.idx),a=e.returnSectorAndPlanets(r),i=0;i<a.p[n].units.length;i++)for(var o=0;o<a.p[n].units[i].length;o++)"pds"==a.p[n].units[i][o].type&&e.addMove("destroy_unit\t"+e.game.player+"\t"+(i+1)+"\tground\t"+r+"\t"+n+"\t"+o+"\t1");return e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" destroys all PDS units destroyed on "+a.p[n].name),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("reactor-meltdown",{name:"Reactor Meltdown",type:"action",text:"ACTION: Select a non-homeworld planet and destroy one Space Dock on that planet",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectPlanetWithFilter("Select a non-homeworld planet and destroy one Space Dock on that planet: ",(function(t){if(0==(t=e.game.planets[t]).hw&&e.doesPlanetHaveSpaceDock(t))return 1}),(function(t){for(var r=(t=e.game.planets[t]).sector,n=(t.tile,t.idx),a=e.returnSectorAndPlanets(r),i=0;i<a.p[n].units.length;i++)for(var o=0;o<a.p[n].units[i].length;o++)"spacedock"==a.p[n].units[i][o].type&&e.addMove("destroy_unit\t"+e.game.player+"\t"+(i+1)+"\tground\t"+r+"\t"+n+"\t"+o+"\t1");return e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" destroys all Space Docks on "+a.p[n].name),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("lost-mission",{name:"Lost Mission",type:"action",text:"ACTION: Place 1 Destroyer in a system with no existing ships",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectSectorWithFilter("Select a sector with no existing ships in which to place a Destroyer: ",(function(t){return!e.doesSectorContainShips(t)}),(function(t){return e.addMove("produce\t"+e.game.player+"\t1\t-1\tdestroyer\t"+t),e.addMove("NOTIFY\tAdding destroyer to gamebaord"),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("accidental-colonization",{name:"Accidental Colonization",type:"action",text:"ACTION: Gain control of one planet not controlled by any player",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectPlanetWithFilter("Select a planet not controlled by another player: ",(function(t){return-1==(t=e.game.planets[t]).owner?1:0}),(function(t){var r=(t=e.game.planets[t]).sector;return e.addMove("gain_planet\t"+e.game.player+"\t"+r+"\t"+t.idx),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" gains planet "+t.name),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("uprising",{name:"Uprising",type:"action",text:"ACTION: Exhaust a non-home planet card held by another player. Gain trade goods equal to resource value.",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectPlanetWithFilter("Exhaust a non-homeworld planet card held by another player. Gain trade goods equal to resource value.",(function(t){return-1!=(t=e.game.planets[t]).owner&&t.owner!=e.game.player&&0==t.exhausted&&0==t.hw?1:0}),(function(t){var r=(t=e.game.planets[t]).resources;return e.addMove("purchase\t"+e.game.player+"\tgoods\t"+r),e.addMove("expend\t"+e.game.player+"\tplanet\t"+t.planet),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" exhausting "+t.name+" and gaining "+r+" trade goods"),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("diaspora-conflict",{name:"Diaspora Conflict",type:"action",text:"ACTION: Exhaust a non-home planet card held by another player. Gain trade goods equal to resource value.",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectPlanetWithFilter("Exhaust a planet card held by another player. Gain trade goods equal to resource value.",(function(t){return-1!=(t=e.game.planets[t]).owner&&t.owner!=e.game.player&&0==t.exhausted&&0==t.hw?1:0}),(function(t){var r=t,n=(t=e.game.planets[t]).resources;return e.addMove("purchase\t"+e.game.player+"\tgoods\t"+n),e.addMove("expend\t"+e.game.player+"\tplanet\t"+r),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" exhausting "+t.name+" and gaining "+n+" trade goods"),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("economic-initiative",{name:"Economic Initiative",type:"action",text:"ACTION: Ready each cultural planet in your control",playActionCard:function(e,t,r,n){for(var a in e.game.planets)e.game.planets[a].owner==r&&"cultural"==e.game.planets[a].type&&(e.game.planets[a].exhausted=0);return 1}}),this.importActionCard("focused-research",{name:"Focused Research",type:"action",text:"ACTION: Spend 4 Trade Goods to Research 1 Technology",playActionCard:function(e,t,r,n){return e.game.players_info[e.game.player-1].goods<4?(e.updateLog("Player does not have enough trade goods to research a technology"),1):(e.game.player==r&&e.playerResearchTechnology((function(t){e.addMove("purchase\t"+e.game.player+"\ttech\t"+t),e.addMove("expend\t"+e.game.player+"\tgoods\t4"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" researches "+e.tech[t].name),e.endTurn()})),0)}}),this.importActionCard("frontline-deployment",{name:"Frontline Deployment",type:"action",text:"ACTION: Deploy three infantry on one planet you control",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectPlanetWithFilter("Deploy three infantry to a planet you control: ",(function(t){return e.game.planets[t].owner==e.game.player?1:0}),(function(t){return t=e.game.planets[t],e.addMove("produce\t"+e.game.player+"\t1\t"+t.idx+"\tinfantry\t"+t.sector),e.addMove("produce\t"+e.game.player+"\t1\t"+t.idx+"\tinfantry\t"+t.sector),e.addMove("produce\t"+e.game.player+"\t1\t"+t.idx+"\tinfantry\t"+t.sector),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" deploys three infantry to "+t.name),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("ghost-ship",{name:"Ghost Ship",type:"action",text:"ACTION: Place a destroyer in a sector with a wormhole and no enemy ships",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectSectorWithFilter("Place a destroyer in a sector with a wormhole and no enemy ships: ",(function(t){return 0==e.doesSectorContainShips(t)&&0!=e.game.sectors[t].wormhole?1:0}),(function(t){return e.addMove("produce\t"+e.game.player+"\t1\t-1\tdestroyer\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" deploys a Destroyer to "+e.game.sectors[t].name),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("war-effort",{name:"War Effort",type:"action",text:"ACTION: Place a cruiser in a sector with one of your ships",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectSectorWithFilter("Place a cruiser in a sector with one of your ships: ",(function(r){return 1==e.doesSectorContainPlayerShips(t,r)?1:0}),(function(t){return e.addMove("produce\t"+e.game.player+"\t1\t-1\tcruiser\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" deploys a Cruiser to "+e.game.sectors[t].name),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("industrial-initiative",{name:"Industrial Initiative",type:"action",text:"ACTION: Gain a trade good for each industrial planet you control",playActionCard:function(e,t,r,n){var a=0;for(var i in e.game.planets)e.game.planets[i].owner==r&&"industrial"==e.game.planets[i].type&&a++;return a>0&&e.game.queue.push("purchase\t"+e.game.player+"\tgoods\t"+a),1}}),this.importActionCard("Insubordination",{name:"Insubordination",type:"action",text:"ACTION: Select a player and remove 1 token from their command pool",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectPlayerWithFilter("Select a player and remove one token from their command pool: ",(function(t){return t!=e.game.player?1:0}),(function(t){return e.addMove("expend\t"+t+"\tcommand\t1"),e.addMove("NOTIFY\t"+e.returnFactionNickname(t)+" loses one comand token"),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("Lucky Shot",{name:"Lucky Shot",type:"action",text:"ACTION: Destroy a destroyer, cruiser or dreadnaught in a sector with a planet you control",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectSectorWithFilter("Destroy a destroyer, cruiser or dreadnaught in a sector containing a planet you control: ",(function(t){return e.doesSectorContainPlanetOwnedByPlayer(t,e.game.player)&&(e.doesSectorContainUnit(t,"destroyer")||e.doesSectorContainUnit(t,"cruiser")||e.doesSectorContainUnit(t,"dreadnaught"))?1:0}),(function(t){e.playerSelectOpponentUnitInSectorWithFilter("Select opponent ship in this sector to destroy: ",t,(function(e){return"destroyer"==e.type||"cruiser"==e.type||"dreadnaught"==e.type?1:0}),(function(t){var r=t.sector,n=(parseInt(t.unit.owner),t.unit_idx),a=e.returnSectorAndPlanets(r),i=t.unit;return e.addMove("destroy_unit\t"+e.game.player+"\t"+i.owner+"\tspace\t"+r+"\t-1\t"+n+"\t1"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" destroys a "+i.name+" in "+a.name),e.endTurn(),0}),null)}),(function(){e.playerTurn()})),0}}),this.importActionCard("mining-initiative-ac",{name:"Mining Initiative",type:"action",text:"ACTION: Gain trade goods equal to the highest resource value planet you control",playActionCard:function(e,t,r,n){if(e.game.player==r){var a=0;for(var i in e.game.planets)e.game.planets[i].owner==r&&e.game.planets[i].resources>a&&(a=e.game.planets[i].resources);return e.addMove("purchase\t"+e.game.player+"\tgoods\t"+a),e.endTurn(),0}return 0}}),this.importActionCard("rise-of-a-messiah",{name:"Rise of a Messiah",type:"action",text:"ACTION: Add one infantry to each planet player controls",playActionCard:function(e,t,r,n){for(var a in e.game.planets)e.game.planets[a].owner==r&&(e.updateLog(e.returnFaction(r)+" adds 1 infantry to "+e.game.planets[a].name),e.addPlanetaryUnit(r,e.game.planets[a].sector,e.game.planets[a].idx,"infantry"));return 1}}),this.importActionCard("unstable-planet",{name:"Unstable Planet",type:"action",text:"ACTION: Choose a hazardous planet and exhaust it. Destroy 3 infantry on that planet if they exist",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectPlanetWithFilter("Select a hazardous planet and exhaust it. Destroy 3 infantry on that planet if they exist",(function(t){return"hazardous"==(t=e.game.planets[t]).type?1:0}),(function(n){e.addMove("expend\t"+t+"\tplanet\t"+n);var a=e.game.planets[n],i=parseInt(a.owner),o=(parseInt(a.resources),0);if(i>=0)for(var s=a.units[i-1].length-1;s>=0;s--)o<3&&"infantry"==a.units[i-1][s].type&&(e.addMove("destroy_unit\t"+r+"\t"+i+"\tground\t"+a.sector+"\t"+a.idx+"\t"+s+"\t1"),o++);return e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("covert-operation",{name:"Covert Operation",type:"action",text:"ACTION: Choose a player. They give you one of their action cards, if possible",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectPlayerWithFilter("Select a player. They give you one of their action cards: ",(function(t){return t!=e.game.player?1:0}),(function(t){return e.addMove("pull\t"+e.game.player+"\t"+t+"\taction\trandom"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" pulls a random action card from "+e.returnFaction(t)),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("tactical-bombardment",{name:"Tactical Bombardment",type:"action",text:"ACTION: Choose a sector in which you have ships with bombardment. Exhaust all planets in that sector",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectSectorWithFilter("Select a sector in which you have ships with bombardment. Exhaust all planets in that sector",(function(r){return 1==e.doesSectorContainPlayerUnit(t,r,"dreadnaught")||1==e.doesSectorContainPlayerUnit(t,r,"warsun")?1:0}),(function(r){for(var n=e.game.sectors[r].planets,a=0;a<n.length;a++)e.addMove("expend\t"+t+"\tplanet\t"+n[a]),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" exhausts "+e.game.planets[n[a]].name);return e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("signal-jamming",{name:"Signal Jamming",type:"action",text:"ACTION: Choose a player. They must activate a system in or next to a system in which you have a ship",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectSectorWithFilter("Select a sector in which you have a ship or one adjacent to one: ",(function(t){return e.isPlayerShipAdjacentToSector(r,t)?1:0}),(function(t){e.playerSelectPlayerWithFilter("Select a player to signal jam in that sector: ",(function(t){return t!=e.game.player?1:0}),(function(r){return e.addMove("activate\t"+r+"\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(r)+" suffers signal jamming in "+e.game.sectors[t].name),e.endTurn(),0}),null)}),(function(){e.playerTurn()})),0}}),this.importActionCard("unexpected-action",{name:"Unexpected Action",type:"action",text:"ACTION: Deactivate a stystem you have activated. Gain one command or strategy token: ",playActionCard:function(e,t,r,n){return e.game.player==r&&e.playerSelectSectorWithFilter("Select a sector that you have activated and deactivate it: ",(function(t){if(1==e.game.sectors[t].activated[r-1])return 1}),(function(t){return'<li class="option" id="command">command token</li>','<li class="option" id="strategy">strategy token</li>',"</ul>",e.updateStatus('<div class="sf-readable">Gain command or strategy token?</div><ul><li class="option" id="command">command token</li><li class="option" id="strategy">strategy token</li></ul>'),$(".option").off(),$(".option").on("click",(function(){var n=$(this).attr("id");e.addMove("purchase\t"+r+"\t"+n+"\t1"),e.addMove("deactivate\t"+r+"\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(r)+" deactivates "+e.game.sectors[t].name),e.endTurn()})),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("in-the-silence-of-space",{name:"In the Silence of Space",type:"instant",text:"Your ships may move through sectors with other player ships this turn: ",playActionCard:function(e,t,r,n){return e.game.players_info[r-1].temporary_move_through_sectors_with_opponent_ships=1,1}})},function(e,t){this.importActionCard("upgrade",{name:"Upgrade",type:"activate",text:"After you activate a system containing one of your ships, place a Dreadnaught from your reinforcements in that sector",playActionCard:function(e,t,r,n){var a=e.game.state.activated_sector;return e.doesSectorContainPlayerShips(r,a)&&e.addSpaceUnit(r,a,"dreadnaught"),1}}),this.importActionCard("disable",{name:"Disable",type:"activate",text:"Your fleet cannot be hit by PDS fire or Planetary Defense during this invasion",playActionCard:function(e,t,r,n){return e.game.players_info[r-1].temporary_immune_to_pds_fire=1,e.game.players_info[r-1].temporary_immune_to_planetary_defense=1,1}})},function(e,t){this.importActionCard("bunker",{name:"Bunker",type:"bombardment_defender",text:"During this bombardment, attacker gets -4 applied to each bombardment roll.",playActionCard:function(e,t,r,n){for(var a=0;a<e.game.players_info.length;a++)e.game.players_info[a].temporary_bombardment_combat_roll_modifier=-4;return 1}}),this.importActionCard("thunder-from-the-heavens",{name:"Thunder from the Heavens",type:"bombardment_attacker",text:"During this bombardment, attacker gets +2 applied to each bombardment roll.",playActionCard:function(e,t,r,n){for(var a=0;a<e.game.players_info.length;a++)e.game.players_info[a].temporary_bombardment_combat_roll_modifier=2;return 1}})},function(e,t){this.importActionCard("sabotage1",{name:"Sabotage",type:"counter",text:"When another player plays an action card, you may cancel that action card",playActionCard:function(e,t,r,n){console.log("QUEUE: "+JSON.stringify(e.game.queue));for(var a=e.game.queue.length-1;a>=0;a--)if(e.game.queue[a].indexOf("action_card_")>=0){var i=0;if(0==e.game.queue[a].indexOf("action_card_post")&&(i=1),console.log("removing: "+JSON.stringify(e.game.queue[a])),e.game.queue[a].indexOf("sabotage")>0&&(i=0),0!=e.game.queue[a].indexOf("resolve")&&e.game.queue.splice(a,1),1==i)return e.removeConfirmsNeeded(),e.updateLog(e.returnFaction(r)+" plays Sabotage!"),1}return 1}}),this.importActionCard("sabotage2",{name:"Sabotage",type:"counter",text:"When another player plays an action card, you may cancel that action card",playActionCard:function(e,t,r,n){console.log("QUEUE: "+JSON.stringify(e.game.queue));for(var a=e.game.queue.length-1;a>=0;a--)if(e.game.queue[a].indexOf("action_card_")>=0){var i=0;if(0==e.game.queue[a].indexOf("action_card_post")&&(i=1),console.log("removing: "+JSON.stringify(e.game.queue[a])),e.game.queue[a].indexOf("sabotage")>0&&(i=0),0!=e.game.queue[a].indexOf("resolve")&&e.game.queue.splice(a,1),1==i)return e.removeConfirmsNeeded(),e.updateLog(e.returnFaction(r)+" plays Sabotage!"),1}return 1}}),this.importActionCard("sabotage3",{name:"Sabotage",type:"counter",text:"When another player plays an action card, you may cancel that action card",playActionCard:function(e,t,r,n){console.log("QUEUE: "+JSON.stringify(e.game.queue));for(var a=e.game.queue.length-1;a>=0;a--)if(e.game.queue[a].indexOf("action_card_")>=0){var i=0;if(0==e.game.queue[a].indexOf("action_card_post")&&(i=1),console.log("removing: "+JSON.stringify(e.game.queue[a])),e.game.queue[a].indexOf("sabotage")>0&&(i=0),0!=e.game.queue[a].indexOf("resolve")&&e.game.queue.splice(a,1),1==i)return e.removeConfirmsNeeded(),e.updateLog(e.returnFaction(r)+" plays Sabotage!"),1}return 1}}),this.importActionCard("sabotage4",{name:"Sabotage",type:"counter",text:"When another player plays an action card, you may cancel that action card",playActionCard:function(e,t,r,n){for(var a=e.game.queue.length-1;a>=0;a--)if(e.game.queue[a].indexOf("action_card_")>=0){var i=0;if(0==e.game.queue[a].indexOf("action_card_post")&&(i=1),e.game.queue[a].indexOf("sabotage")>0&&(i=0),0!=e.game.queue[a].indexOf("resolve")&&e.game.queue.splice(a,1),1==i)return e.removeConfirmsNeeded(),e.updateLog(e.returnFaction(r)+" plays Sabotage!"),1}return 1}})},function(e,t){this.importActionCard("fire-team",{name:"Fire Team",type:"ground_combat",text:"Reroll up to 15 dice during this round of ground combat",playActionCard:function(e,t,r,n){return e.game.players_info[r-1].combat_dice_reroll=15,1}}),this.importActionCard("parley",{name:"Parley",type:"ground_combat",text:"Return invading infantry to space if player ships exist in the sector",playActionCard:function(e,t,r,n){if(t==r){var a=e.game.state.ground_combat_sector,i=e.game.state.ground_combat_planet_idx,o=e.game.state.ground_combat_attacker,s=e.returnSectorAndPlanets(a),c=s.p[i].units[o-1];s.p[i].units[o-1]=[];for(var l=0;l<s.s.units[o-1].length;l++)for(;e.returnRemainingCapacity(s.s.units[o-1][l])>0&&c.length>0;)e.loadUnitByJSONOntoShip(o,a,l,JSON.stringify(c[0])),c.splice(0,1)}return e.updateSectorGraphics(sector),1}})},function(e,t){this.importActionCard("distinguished-councillor",{name:"Distinguished Coucillor",type:"post_agenda",text:"After the speaker has cast his votes, cast an additional 5 votes",playActionCard:function(e,t,r,n){return e.game.state.votes_cast[r-1]+=5,e.updateLog(e.returnFaction(r)+" casts an additional 5 votes with Distinguished Councillor"),1}}),this.importActionCard("bribery",{name:"Bribery",type:"post_agenda",text:"After the speaker has cast his vote, spend any number of trade goods to purchase additional votes",playActionCard:function(e,t,r,n){if(e.game.player==r){var a='<div class="sf-readable">Spend any number of trade goods to purchase additional votes: </div><ul>';if(e.game.players_info[r-1].goods>0){a+='<li class="textchoice" id="0">0 votes</li>';for(var i=1;i<=e.game.players_info[r-1].goods+1;i++)a+=1==i?'<li class="textchoice" id="1">'+i+" vote</li>":'<li class="textchoice" id="'+i+'">'+i+" votes</li>"}else a+='<li class="textchoice" id="0">0 votes</li>';a+="</ul>",e.updateStatus(a),$(".textchoice").off(),$(".textchoice").on("click",(function(){var t=$(this).attr("id");e.addMove("bribery\t"+r+"\t"+t),e.endTurn()}))}return 0},handleGameLoop:function(e,t,r){if("bribery"==r[0]){var n=parseInt(r[1]),a=parseInt(r[2]);return e.game.queue.splice(t,1),e.game.state.votes_cast[n-1].votes+=a,e.game.players_info[n-1].goods-=a,1==a?e.updateLog(e.returnFaction(n)+" bribes the Council for "+a+" additional vote"):e.updateLog(e.returnFaction(n)+" bribes the Council for "+a+" additional votes"),1}return 1}})},function(e,t){this.importActionCard("assassinate-representative",{name:"Assassinate Representative",type:"pre_agenda",text:"Choose a player. That player cannot vote on the Agenda",playActionCard:function(e,t,r,n){return r==e.game.player&&e.playerSelectPlayerWithFilter("Select a player who will not be able to vote on this Agenda: ",(function(t){return t!=e.game.player?1:0}),(function(t){return e.addMove("rider\t"+t+"\tassassinate-representative\t-1"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" assassinates the "+e.returnFactionNickname(t)+" delegate"),e.endTurn(),0}),null),0}}),this.importActionCard("diplomatic-scandal",{name:"Diplomatic Scandal",type:"pre_agenda",text:"Choose a player. That player loses a maximum of four votes on this agenda",playActionCard:function(e,t,r,n){return r==e.game.player&&e.playerSelectPlayerWithFilter("Select a player to lose 4 votes: ",(function(t){return t!=e.game.player?1:0}),(function(t){return e.addMove("diplomatic_scandal\t"+e.game.player+"\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" unearths scandal concerning the voting representative of "+e.returnFaction(t)),e.endTurn(),0}),null),0},handleGameLoop:function(e,t,r){if("diplomatic_scandal"==r[0]){parseInt(r[1]);var n=parseInt(r[2]);return e.game.queue.splice(t,1),e.game.state.votes_available[n-1]-=4,e.game.state.votes_available[n-1]<0&&(e.game.state.votes_available[n-1]=0),1}return 1}})},function(e,t){this.importActionCard("leadership-rider",{name:"Leadership Rider",type:"rider",text:"Bet on agenda outcome to gain two strategy tokens and 1 command token",playActionCard:function(e,t,r,n){if(e.game.player==r){var a=e.returnActiveAgenda(),i=e.agenda_cards[a].returnAgendaOptions(e),o=e.agenda_cards[a].elect;e.playerSelectChoice("On which choice do you wish to place your Leadership rider?",i,o,(function(t){e.addMove("rider\t"+e.game.player+"\tdiplomacy-rider\t"+i[t]),e.addMove("NOTIFY\t"+e.returnFactionNickname(e.game.player)+" has placed a Leadership Rider on "+i[t]),e.endTurn()}))}return 0},playActionCardEvent:function(e,t,r,n){return e.game.players_info[r-1].strategy_tokens+=2,e.game.players_info[r-1].command_tokens+=1,e.updateLog(e.returnFaction(r)+" gains 2 strategy tokens and 1 command token"),1}}),this.importActionCard("diplomacy-rider",{name:"Diplomacy Rider",type:"rider",text:"Bet on agenda outcome to have others activate system with planet you control",playActionCard:function(e,t,r,n){if(e.game.player==r){var a=e.returnActiveAgenda(),i=e.agenda_cards[a].returnAgendaOptions(e),o=e.agenda_cards[a].elect;e.playerSelectChoice("On which choice do you wish to place your Diplomacy rider?",i,o,(function(t){e.addMove("rider\t"+e.game.player+"\tdiplomacy-rider\t"+i[t]),e.addMove("NOTIFY\t"+e.returnFactionNickname(e.game.player)+" has placed a Diplomacy Rider on "+i[t]),e.endTurn()}))}return 0},playActionCardEvent:function(e,t,r,n){return r==e.game.player&&e.playerSelectSectorWithFilter("Select a sector with a planet you control to mire in diplomatic conflict: ",(function(t){for(var r=0;r<e.game.sectors[t].planets.length;r++)return e.game.planets[e.game.sectors[t].planets[r]].owner==e.game.player?1:0}),(function(t){for(var n=0;n<e.game.players_info.length;n++)e.addMove("activate\t"+(n+1)+"\t"+t);return e.addMove("NOTIFY\t"+e.returnFactionNickname(r)+" uses Diplomacy Rider to protect "+t),e.endTurn(),0}),null),0}}),this.importActionCard("politics-rider",{name:"Politics Rider",type:"rider",text:"Bet on agenda outcome to gain three action cards and the speaker token",playActionCard:function(e,t,r,n){if(e.game.player==r){var a=e.returnActiveAgenda(),i=e.agenda_cards[a].returnAgendaOptions(e),o=e.agenda_cards[a].elect;e.playerSelectChoice("On which choice do you wish to place your Politics rider?",i,o,(function(t){e.addMove("rider\t"+e.game.player+"\tpolitics-rider\t"+i[t]),e.addMove("NOTIFY\t"+e.returnFactionNickname(e.game.player)+" has placed a Politics Rider on "+i[t]),e.endTurn()}))}return 0},playActionCardEvent:function(e,t,r,n){if(console.log(JSON.stringify(e.agenda_cards[active_agenda])),e.game.player==r){e.addMove("gain\t"+e.game.player+"\taction_cards\t3"),e.addMove("DEAL\t2\t"+e.game.player+"\t3"),e.addMove("NOTIFY\tdealing two action cards to "+e.returnFactionNickname(e.game.player));for(var a="Make which player the speaker? <ul>",i=0;i<e.game.players_info.length;i++)a+='<li class="textchoice" id="'+i+'">'+factions[e.game.players_info[i].faction].name+"</li>";a+="</ul>",e.updateStatus(a);e.game.player;$(".textchoice").off(),$(".textchoice").on("click",(function(){var t=parseInt($(this).attr("id"))+1;e.addMove("change_speaker\t"+t),e.endTurn()}))}return 0}}),this.importActionCard("construction-rider",{name:"Construction Rider",type:"rider",text:"Bet on agenda outcome to place a space dock on a planet you control",playActionCard:function(e,t,r,n){if(r==e.game.player){var a=e.returnActiveAgenda(),i=e.agenda_cards[a].returnAgendaOptions(e),o=e.agenda_cards[a].elect;e.playerSelectChoice("On which choice do you wish to place the Construction rider?",i,o,(function(t){e.addMove("rider\t"+e.game.player+"\tconstruction-rider\t"+i[t]),e.addMove("NOTIFY\t"+e.returnFactionNickname(e.game.player)+" has placed a Construction Rider on "+i[t]),e.endTurn()}))}return 0},playActionCardEvent:function(e,t,r,n){return r==e.game.player&&e.playerSelectPlanetWithFilter("Select a planet you control without a Space Dock: ",(function(t){return e.game.planets[t].owner==e.game.player&&0==e.doesPlanetHaveSpaceDock(t)?1:0}),(function(t){return e.addMove("produce\t"+e.game.player+"\t1\t"+e.game.planets[t].idx+"\tspacedock\t"+e.game.planets[t].sector),e.addMove("NOTIFY\t"+e.returnFaction(r)+" builds a Space Dock in "+e.game.sectors[e.game.planets[t].sector].name),e.endTurn(),0}),null),0}}),this.importActionCard("trade-rider",{name:"Trade Rider",type:"rider",text:"Bet on agenda outcome to receive 5 trade goods",playActionCard:function(e,t,r,n){if(e.game.player==r){var a=e.returnActiveAgenda(),i=e.agenda_cards[a].returnAgendaOptions(e),o=e.agenda_cards[a].elect;e.playerSelectChoice("On which choice do you wish to place your Trade rider?",i,o,(function(t){e.addMove("rider\t"+e.game.player+"\ttrade-rider\t"+i[t]),e.addMove("NOTIFY\t"+e.returnFactionNickname(e.game.player)+" has placed a Trade Rider on "+i[t]),e.endTurn()}))}return 0},playActionCardEvent:function(e,t,r,n){return e.game.queue.push("purchase\t"+r+"\tgoods\t5"),e.game.queue.push("NOTIFY\t"+e.returnFaction(r)+" gains 5 Trade Goods through their Trade Rider"),1}}),this.importActionCard("warfare-rider",{name:"Warfare Rider",type:"rider",text:"Bet on agenda outcome to place a dreadnaught in a system with one of your ships: ",playActionCard:function(e,t,r,n){if(e.game.player==r){var a=e.returnActiveAgenda(),i=e.agenda_cards[a].returnAgendaOptions(e),o=e.agenda_cards[a].elect;e.playerSelectChoice("On which choice do you wish to place your Warfare Rider?",i,o,(function(t){e.addMove("rider\t"+e.game.player+"\twarfare-rider\t"+i[t]),e.addMove("NOTIFY\t"+e.returnFactionNickname(e.game.player)+" has placed a Warfare Rider on "+i[t]),e.endTurn()}))}return 0},playActionCardEvent:function(e,t,r,n){return e.game.player==r&&e.playerSelectSectorWithFilter("Select a sector which contains at least one of your ships: ",(function(t){return e.doesSectorContainPlayerShips(r,t)}),(function(t){return e.addMove("produce\t"+e.game.player+"\t1\t-1\tdreadnaught\t"+t),e.addMove("NOTIFY\tAdding dreadnaught to board"),e.endTurn(),0}),null),0}}),this.importActionCard("technology-rider",{name:"Technology Rider",type:"rider",text:"Bet on agenda outcome to research a technology for free",playActionCard:function(e,t,r,n){if(e.game.player==r){var a=e.returnActiveAgenda();console.log("Active Agenda: "+a);var i=e.agenda_cards[a].returnAgendaOptions(e),o=e.agenda_cards[a].elect;e.playerSelectChoice("On which choice do you wish to place your Technology rider?",i,o,(function(t){e.addMove("rider\t"+e.game.player+"\ttechnology-rider\t"+i[t]),e.addMove("NOTIFY\t"+e.returnFactionNickname(e.game.player)+" has placed a Technology Rider on "+i[t]),e.endTurn()}))}return 0},playActionCardEvent:function(e,t,r,n){return e.game.player==r&&e.playerResearchTechnology((function(t){e.endTurn()})),0}}),this.importActionCard("imperial-rider",{name:"Imperial Rider",type:"rider",text:"Player gains 1 VP",playActionCard:function(e,t,r,n){if(e.game.player==r){var a=e.returnActiveAgenda(),i=e.agenda_cards[a].returnAgendaOptions(e),o=e.agenda_cards[a].elect;e.playerSelectChoice("On which choice do you wish to place the Imperial rider?",i,o,(function(t){e.addMove("rider\t"+e.game.player+"\timperial-rider\t"+i[t]),e.addMove("NOTIFY\t"+e.returnFactionNickname(e.game.player)+" has placed an Imperial Rider on "+i[t]),e.endTurn()}))}},playActionCardEvent:function(e,t,r,n){return e.game.players_info[r-1].vp+=1,e.game.players_info[r-1].objectives_scored.push("imperial-rider"),1}})},function(e,t){this.importActionCard("intercept",{name:"Intercept",type:"retreat",text:"After your opponent declares a retreat in space combat, they cannot retreat",playActionCard:function(e,t,r,n){return e.game.players[r-1].temporary_opponent_cannot_retreat=1,1}}),this.importActionCard("courageous-to-the-end",{name:"Courageous to the End",type:"space_combat_after",text:"For one ship lost in last round of space combat, fire twice. With each hit your opponent must destroy a ship of their chosing",playActionCard:function(e,t,r,n){if(e.game.players_info[r-1].my_units_destroyed_last_combat_round.length>0){for(var a=10,i=0;i<e.game.players_info[r-1].my_units_destroyed_last_combat_round[i];i++){var o=e.game.players_info[r-1].my_units_destroyed_last_combat_round[i],s=e.returnUnit(o,t);s.combat<a&&(a=s.combat)}var c=e.rollDice(10),l=e.rollDice(10),u=e.game.state.space_combat_attacker;u==t&&(u=e.game.state.space_combat_defender);var d=0;return c>=a&&d++,l>=a&&d++,e.game.player==r&&(e.addMove("player_destroy_unit\t"+t+"\t"+u+"\t"+d+"\tspace\t"+e.game.state.space_combat_sector+"\t0"),e.endTurn()),0}return 1}}),this.importActionCard("salvage",{name:"Salvage",type:"space_combat_victory",text:"If you win a space combat, opponent gives you all their commodities",playActionCard:function(e,t,r,n){if(t==r){var a=e.game.players_info[e.game.state.space_combat_attacker],i=e.game.players_info[e.game.state.space_combat_defender];return i.commodities>0&&(a.goods+=i.commodities,e.updateLog(e.returnFaction(e.game.state.space_combat_attacker)+" takes "+i.commodities+" in trade goods from commodities lost in combat"),i.commodities=0),1}}}),this.importActionCard("shields-holding1",{name:"Shields Holding",type:"assign_hits",text:"Cancel 2 hits in Space Combat",playActionCard:function(e,t,r,n){return e.game.state.assign_hits_to_cancel+=2,1}}),this.importActionCard("shields-holding2",{name:"Shields Holding",type:"assign_hits",text:"Cancel 2 hits in Space Combat",playActionCard:function(e,t,r,n){return e.game.state.assign_hits_to_cancel+=2,1}}),this.importActionCard("shields-holding3",{name:"Shields Holding",type:"assign_hits",text:"Cancel 2 hits in Space Combat",playActionCard:function(e,t,r,n){return e.game.state.assign_hits_to_cancel+=2,1}}),this.importActionCard("shields-holding4",{name:"Shields Holding",type:"assign_hits",text:"Cancel 2 hits in Space Combat",playActionCard:function(e,t,r,n){return e.game.state.assign_hits_to_cancel+=2,1}}),this.importActionCard("maneuvering-jets1",{name:"Maneuvering Jets",type:"post_pds",text:"Cancel 1 hit from a PDS firing upon your ships",playActionCard:function(e,t,r,n){return e.game.state.assign_hits_to_cancel++,1}}),this.importActionCard("maneuvering-jets2",{name:"Maneuvering Jets",type:"post_pds",text:"Cancel 1 hit from a PDS firing upon your ships",playActionCard:function(e,t,r,n){return e.game.state.assign_hits_to_cancel++,1}}),this.importActionCard("maneuvering-jets3",{name:"Maneuvering Jets",type:"post_pds",text:"Cancel 1 hit from a PDS firing upon your ships",playActionCard:function(e,t,r,n){return e.game.state.assign_hits_to_cancel++,1}}),this.importActionCard("maneuvering-jets4",{name:"Maneuvering Jets",type:"post_pds",text:"Cancel 1 hit from a PDS firing upon your ships",playActionCard:function(e,t,r,n){return e.game.state.assign_hits_to_cancel++,1}}),this.importActionCard("emergency-repairs",{name:"Emergency Repairs",type:"assign_hits",text:"Repair all damaged ships not at full strength",playActionCard:function(e,t,r,n){for(var a=e.returnSectorAndPlanets(e.game.state.space_combat_sector),i=0;i<a.s.units[r-1].length;i++)a.s.units[r-1][i].strength<a.s.units[r-1][i].max_strength&&(a.s.units[r-1][i].strength=a.s.units[r-1][i].max_strength);return 1}}),this.importActionCard("experimental-fighter-prototype",{name:"Experimental Fighter Prototype",type:"space_combat",text:"Your fighters get +2 on their combat rolls for a single round of space combat",playActionCard:function(e,t,r,n){for(var a=e.returnSectorAndPlanets(e.game.state.space_combat_sector),i=0;i<a.s.units[r-1].length;i++){var o=a.s.units[r-1][i];"fighter"==o.type&&(o.temporary_combat_modifier+=2)}return 1}}),this.importActionCard("moral-boost",{name:"Moral Boost",type:"combat",text:"Apply +1 to each of your units' combat rolls during this round of combat",playActionCard:function(e,t,r,n){if(e.game.state.space_combat_sector)for(var a=e.returnSectorAndPlanets(e.game.state.space_combat_sector),o=0;o<a.s.units[r-1].length;o++){a.s.units[r-1][o].temporary_combat_modifier+=1}if(e.game.state.ground_combat_sector&&e.game.state.ground_combat_planet_idx)for(var s=e.returnSectorAndPlanets(e.game.state.space_combat_sector),c=0;i<s.p.length;c++)for(var l=0;l<s.p[c].units[r-1].length;l++){s.p[c].units[r-1][l].temporary_combat_modifier+=1}return 1}}),this.importActionCard("experimental-battlestation",{name:"Experimental Battlestation",type:"pre_pds",text:"After a player moves ships into a sector, a space dock in that or an adjacent sector can fire 3 PDS shots",playActionCard:function(e,t,r,n){e.updateLog("Experimental Battlestation");var a=e.game.state.activated_sector,i=e.returnAdjacentSectors(a);i.push(a);for(var o=0;o<i.length;o++)for(var s=e.returnSectorAndPlanets(i[o]),c=0;c<s.p.length;c++)if(s.p[c].owner==e.game.player&&e.doesPlayerHaveSpaceDock(s.p[c]))return e.game.players_info[r-1].experimental_battlestation=a,1;return 1}}),this.importActionCard("direct-hit1",{name:"Direct Hit",type:"space_combat_after",text:"Destroy a ship that is damaged or not at full strength",playActionCard:function(e,t,r,n){for(var a=e.returnEventObjects(),i=e.returnSectorAndPlanets(e.game.state.space_combat_sector),o=0;o<i.s.units.length;o++)if(o!=r-1)for(var s=0;s<i.s.units[o].length;s++)if(i.s.units[o][s].strength<i.s.units[r-1][s].max_strength){for(var c in i.s.units[o][s].strength=0,i.s.units[o][s].strength=0,a)a[c].unitDestroyed(e,attacker,i.p.units[o][s]);e.eliminateDestroyedUnitsInSector(o+1,sector),e.saveSystemAndPlanets(i),e.updateSectorGraphics(sector),s=i.s.units[o].length+2}return 1}}),this.importActionCard("direct-hit2",{name:"Direct Hit",type:"space_combat_after",text:"Destroy a ship that is damaged or not at full strength",playActionCard:function(e,t,r,n){for(var a=e.returnEventObjects(),i=e.returnSectorAndPlanets(e.game.state.space_combat_sector),o=0;o<i.s.units.length;o++)if(o!=r-1)for(var s=0;s<i.s.units[o].length;s++)if(i.s.units[o][s].strength<i.s.units[r-1][s].max_strength){for(var c in i.s.units[o][s].strength=0,i.s.units[o][s].strength=0,a)a[c].unitDestroyed(e,attacker,i.p.units[o][s]);e.eliminateDestroyedUnitsInSector(o+1,sector),e.saveSystemAndPlanets(i),e.updateSectorGraphics(sector),s=i.s.units[o].length+2}return 1}}),this.importActionCard("direct-hit3",{name:"Direct Hit",type:"space_combat_after",text:"Destroy a ship that is damaged or not at full strength",playActionCard:function(e,t,r,n){for(var a=e.returnEventObjects(),i=e.returnSectorAndPlanets(e.game.state.space_combat_sector),o=0;o<i.s.units.length;o++)if(o!=r-1)for(var s=0;s<i.s.units[o].length;s++)if(i.s.units[o][s].strength<i.s.units[r-1][s].max_strength){for(var c in i.s.units[o][s].strength=0,i.s.units[o][s].strength=0,a)a[c].unitDestroyed(e,attacker,i.p.units[o][s]);e.eliminateDestroyedUnitsInSector(o+1,sector),e.saveSystemAndPlanets(i),e.updateSectorGraphics(sector),s=i.s.units[o].length+2}return 1}}),this.importActionCard("direct-hit4",{name:"Direct Hit",type:"space_combat_after",text:"Destroy a ship that is damaged or not at full strength",playActionCard:function(e,t,r,n){for(var a=e.returnEventObjects(),i=e.returnSectorAndPlanets(e.game.state.space_combat_sector),o=0;o<i.s.units.length;o++)if(o!=r-1)for(var s=0;s<i.s.units[o].length;s++)if(i.s.units[o][s].strength<i.s.units[r-1][s].max_strength){for(var c in i.s.units[o][s].strength=0,i.s.units[o][s].strength=0,a)a[c].unitDestroyed(e,attacker,i.p.units[o][s]);e.eliminateDestroyedUnitsInSector(o+1,sector),e.saveSystemAndPlanets(i),e.updateSectorGraphics(sector),s=i.s.units[o].length+2}return 1}}),this.importActionCard("skilled-retreat1",{name:"Skilled Retreat",type:"space_combat",text:"Retreat into an adjacent system without enemy ships. Space Battle ends tied",playActionCard:function(e,t,r,n){if(e.game.player==r){var a=e.game.state.space_combat_sector;e.returnAdjacentSectors(a);e.playerSelectSectorWithFilter("Select an adjacent sector without opponent ships into which to retreat: ",(function(t){return e.areSectorsAdjacent(a,t)&&t!=a&&!e.doesSectorContainNonPlayerShips(t)?1:0}),(function(t){e.addMove("skilled_retreat\t"+r+"\t"+t+"\t"+e.game.state.space_combat_sector),e.addMove("NOTIFY\t"+e.returnFaction(r)+" makes skilled retreat into "+e.game.sectors[t].name),e.addMove("activate\t"+r+"\t"+t),e.addMove("activate\t"+r+"\t"+e.game.state.space_combat_sector),e.endTurn()}),(function(){e.addMove("NOTIFY\tno suitable sectors available for skilled retreat"),e.endTurn()}))}return 0},handleGameLoop:function(e,t,r){if("skilled_retreat"==r[0]){var n=parseInt(r[1]),a=r[2],i=r[3];e.game.queue.splice(t,1);for(var o=e.returnSectorAndPlanets(a),s=e.returnSectorAndPlanets(i),c=0;c<s.s.units[n-1].length;c++)o.s.units[n-1].push(s.s.units[n-1][c]);s.s.units[n-1]=[],e.saveSystemAndPlanets(o),e.saveSystemAndPlanets(s);for(var l=e.game.queue.length-1;l>=0;l--){"continue"!==e.game.queue[l].split("\t")[0]?e.game.queue.splice(l,1):l=-1}return e.updateSectorGraphics(s.s.sector),e.updateSectorGraphics(o.s.sector),e.handleFleetSupply(n,a)}return 1}}),this.importActionCard("skilled-retreat2",{name:"Skilled Retreat",type:"space_combat",text:"Retreat into an adjacent system without enemy ships. Space Battle ends tied",playActionCard:function(e,t,r,n){if(e.game.player==r){var a=e.game.state.space_combat_sector;e.returnAdjacentSectors(a);e.playerSelectSectorWithFilter("Select an adjacent sector without opponent ships into which to retreat: ",(function(t){return e.areSectorsAdjacent(a,t)&&t!=a&&!e.doesSectorContainNonPlayerShips(t)?1:0}),(function(t){e.addMove("skilled_retreat\t"+r+"\t"+t+"\t"+e.game.state.space_combat_sector),e.addMove("NOTIFY\t"+e.returnFaction(r)+" makes skilled retreat into "+e.game.sectors[t].name),e.addMove("activate\t"+r+"\t"+t),e.addMove("activate\t"+r+"\t"+e.game.state.space_combat_sector),e.endTurn()}),(function(){e.addMove("NOTIFY\tno suitable sectors available for skilled retreat"),e.endTurn()}))}return 0}}),this.importActionCard("skilled-retreat3",{name:"Skilled Retreat",type:"space_combat",text:"Retreat into an adjacent system without enemy ships. Space Battle ends tied",playActionCard:function(e,t,r,n){if(e.game.player==r){var a=e.game.state.space_combat_sector;e.returnAdjacentSectors(a);e.playerSelectSectorWithFilter("Select an adjacent sector without opponent ships into which to retreat: ",(function(t){return e.areSectorsAdjacent(a,t)&&t!=a&&!e.doesSectorContainNonPlayerShips(t)?1:0}),(function(t){e.addMove("skilled_retreat\t"+r+"\t"+t+"\t"+e.game.state.space_combat_sector),e.addMove("NOTIFY\t"+e.returnFaction(r)+" makes skilled retreat into "+e.game.sectors[t].name),e.addMove("activate\t"+r+"\t"+t),e.addMove("activate\t"+r+"\t"+e.game.state.space_combat_sector),e.endTurn()}),(function(){e.addMove("NOTIFY\tno suitable sectors available for skilled retreat"),e.endTurn()}))}return 0}}),this.importActionCard("skilled-retreat4",{name:"Skilled Retreat",type:"space_combat",text:"Retreat into an adjacent system without enemy ships. Space Battle ends tied",playActionCard:function(e,t,r,n){if(e.game.player==r){var a=e.game.state.space_combat_sector;e.returnAdjacentSectors(a);e.playerSelectSectorWithFilter("Select an adjacent sector without opponent ships into which to retreat: ",(function(t){return e.areSectorsAdjacent(a,t)&&t!=a&&!e.doesSectorContainNonPlayerShips(t)?1:0}),(function(t){e.addMove("skilled_retreat\t"+r+"\t"+t+"\t"+e.game.state.space_combat_sector),e.addMove("NOTIFY\t"+e.returnFaction(r)+" makes skilled retreat into "+e.game.sectors[t].name),e.addMove("activate\t"+r+"\t"+t),e.addMove("activate\t"+r+"\t"+e.game.state.space_combat_sector),e.endTurn()}),(function(){e.addMove("NOTIFY\tno suitable sectors available for skilled retreat"),e.endTurn()}))}return 0}})},function(e,t){this.importActionCard("public-disgrace",{name:"Public Disgrace",type:"activate",text:"Force a player who has already picked a strategy card to select another. They select before you do",playActionCard:function(e,t,r,n){return 0},handleGameLoop:function(e,t,r){if("public_disgrace"==r[0]){var n=parseInt(r[1]),a=parseInt(r[2]),i=r[3];e.game.queue.splice(t,1);for(var o=0;o<e.game.players_info[a-1].strategy.length;o++)e.game.players_info[a-1].strategy[o]==i&&e.game.players_info[a-1].strategy.splice(o,1);return e.game.queue.push("pickstrategy\t"+n),e.game.queue.push("reinsert_strategy_card\t"+i),e.game.queue.push("pickstrategy\t"+a),1}if("reinsert_strategy_card"==r[0]){var s=r[1];return e.game.state.strategy_cards.push(s),e.game.state.strategy_cards_bonus.push(0),1}return 1}})},function(e,t){this.importAgendaCard("sequential-voting",{name:"Sequential Voting",type:"Law",text:"Players must vote on Agendas in Initiative Order, not Simultaneously",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){e.game.state.agenda_voting_order="for"===t?"initiative":"simultaneous"}}),this.importAgendaCard("shard-of-the-throne",{name:"Shard of the Throne",type:"Law",elect:"player",text:"Elect a Player to earn 1 VP. When this player loses a space combat to another player, they transfer the VP to that player",returnAgendaOptions:function(e){for(var t=[],r=0;r<e.game.players_info.length;r++)t.push(e.returnFaction(r+1));return t},onPass:function(e,t){e.game.state.shard_of_the_throne=1;for(var r=0;r<e.game.players_info.length;r++)t===e.returnFaction(r+1)&&(e.game.state.shard_of_the_throne_player=r+1);var n={agenda:"shard-of-the-throne"};n.option=t,e.game.state.laws.push(n),e.game.players_info[e.game.state.shard_of_the_throne_player-1].vp+=1,e.updateLeaderboard(),e.updateLog(e.returnFaction(e.game.state.shard_of_the_throne_player)+" gains the Shard of the Throne (1VP)")},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"shard-of-the-throne"===e.game.state.laws[t].agenda&&(e.game.state.laws.splice(t,1),t--);return e.game.state.shard_of_the_throne_player=-2,1},spaceCombatRoundEnd:function(e,t,r,n){r==e.game.state.shard_of_the_throne_player&&(e.doesPlayerHaveShipsInSector(r,n)||(e.game.state.shard_of_the_throne_player=t,e.updateLog(e.returnFaction(e.game.state.shard_of_the_throne_player)+" gains the Shard of the Throne (1VP)"),e.game.players_info[t-1].vp+=1,e.game.players_info[r-1].vp-=1,e.updateLeaderboard()))},groundCombatRoundEnd:function(e,t,r,n,a){r==e.game.state.shard_of_the_throne_player&&(e.doesPlayerHaveInfantryOnPlanet(r,n,a)||(e.game.state.shard_of_the_throne_player=t,e.updateLog(e.returnFaction(e.game.state.shard_of_the_throne_player)+" gains the Shard of the Throne (1VP)"),e.game.players_info[t-1].vp+=1,e.game.players_info[r-1].vp-=1,e.updateLeaderboard()))}}),this.importAgendaCard("homeland-defense-act",{name:"Homeland Defense Act",type:"Law",text:"FOR: there is no limit to the number of PDS units on a planet. AGAINST: each player must destroy one PDS unit",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){e.game.state.homeland_defense_act=1;var r={agenda:"homeland-defense-act"};if(r.option=t,e.game.state.laws.push(r),"for"===t&&(e.game.state.pds_limit_per_planet=100),"against"===t)for(var n=0;n<e.game.players_info.length;n++)e.doesPlayerHaveUnitOnBoard(n+1,"pds")&&e.game.queue.push("destroy_a_pds\t"+(n+1));e.game.state.laws.push({agenda:"homeland-defense-act",option:t})},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"homeland-defense-act"===e.game.state.laws[t].agenda&&(e.game.state.laws.splice(t,1),t--);return e.game.state.homeland_defense_act=0,e.game.state.pds_limit_per_planet=2,1},handleGameLoop:function(e,t,r){if("destroy_a_pds"==r[0]){var n=parseInt(r[1]);return e.game.queue.splice(t,1),e.game.player==n&&e.playerSelectUnitWithFilter("Select a PDS unit to destroy: ",(function(e){return null==e?0:"pds"==e.type?1:0}),(function(t){var r=t.sector,n=t.planet_idx,a=t.unit_idx,i=t.unit,o=e.returnSectorAndPlanets(r);if(null==i)return e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" has no PDS units to destroy"),e.endTurn(),0;e.addMove("destroy_unit\t"+e.game.player+"\t"+e.game.player+"\tground\t"+r+"\t"+n+"\t"+a+"\t1"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" destroys a "+i.name+" in "+o.s.name),e.endTurn()})),0}return 1}}),this.importAgendaCard("holy-planet-of-ixth",{name:"Holy Planet of Ixth",type:"Law",elect:"planet",text:"Elect a cultural planet. The planet's controller gains 1 VP. Units cannot be landed, produced or placed on this planet",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return"cultural"===e.type?1:0}))},onPass:function(e,t){e.game.state.holy_planet_of_ixth=1,e.game.state.holy_planet_of_ixth_planet=t;var r={agenda:"holy-planet-of-ixth"};r.option=t,e.game.state.laws.push(r),e.game.planets[t].locked=1;var n=e.game.planets[t].owner;-1!=n&&(e.game.players_info[n-1].vp+=1,e.updateLeaderboard(),e.updateLog(e.returnFaction(n)+" gains 1 VP from Holy Planet of Ixth"))},repealAgenda:function(e){for(var t=null,r=0;r<e.game.state.laws.length;r++)"holy-planet-of-ixth"===e.game.state.laws[r].agenda&&(t=e.game.state.laws[r].option,e.game.state.laws.splice(r,1),r--);return null!=t&&(e.game.state.holy_planet_of_ixth=0,e.game.state.holy_planet_of_ixth_planet=-1,e.game.planets[t].locked=0),1}}),this.importAgendaCard("research-team-biotic",{name:"Research Team: Biotic",type:"Law",elect:"planet",text:"Elect an industrial planet. The owner may exhaust this planet to ignore 1 green technology prerequisite the next time they research a technology",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return"industrial"===e.type?1:0}))},repealAgenda:function(e){for(var t=null,r=0;r<e.game.state.laws.length;r++)"research-team-biotic"===e.game.state.laws[r].agenda&&(t=e.game.state.laws[r].option,e.game.state.laws.splice(r,1),r--);return null!=t&&(e.game.state.research_team_biotic=0,e.game.state.research_team_biotic_planet=-1),1},onPass:function(e,t){e.game.state.research_team_biotic=1,e.game.state.research_team_biotic_planet=t;var r={agenda:"research-team-biotic"};r.option=t,e.game.state.laws.push(r)},menuOption:function(e,t,r){return"main"==t&&e.game.planets[e.game.state.research_team_biotic_planet].owner==r?{event:"research_team_biotic",html:'<li class="option" id="research_team_biotic">use biotic (green) tech-skip</li>'}:{}},menuOptionTriggers:function(e,t,r){return"main"==t&&e.game.planets[e.game.state.research_team_biotic_planet].owner==r&&0==e.game.planets[e.game.state.research_team_biotic_planet].exhausted?1:0},menuOptionActivated:function(e,t,r){return"main"==t&&(e.game.players_info[r-1].temporary_green_tech_prerequisite++,e.game.planets[e.game.state.research_team_biotic_planet].exhausted=1),0}}),this.importAgendaCard("research-team-cybernetic",{name:"Research Team: Cybernetic",type:"Law",elect:"planet",text:"Elect an industrial planet. The owner may exhaust this planet to ignore 1 yellow technology prerequisite the next time they research a technology",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return"industrial"===e.type?1:0}))},onPass:function(e,t){e.game.state.research_team_cybernetic=1,e.game.state.research_team_cybernetic_planet=t;var r={agenda:"research-team-cybernetic"};r.option=t,e.game.state.laws.push(r)},repealAgenda:function(e){for(var t=null,r=0;r<e.game.state.laws.length;r++)"research-team-cybernetic"===e.game.state.laws[r].agenda&&(t=e.game.state.laws[r].option,e.game.state.laws.splice(r,1),r--);return null!=t&&(e.game.state.research_team_cybernetic=0,e.game.state.research_team_cybernetic_planet=-1),1},menuOption:function(e,t,r){return"main"==t&&e.game.planets[e.game.state.research_team_cybernetic_planet].owner==r?{event:"research_team_cybernetic",html:'<li class="option" id="research_team_cybernetic">use cybernetic (yellow) tech-skip</li>'}:{}},menuOptionTriggers:function(e,t,r){return"main"==t&&e.game.planets[e.game.state.research_team_cybernetic_planet].owner==r&&0==e.game.planets[e.game.state.research_team_cybernetic_planet].exhausted?1:0},menuOptionActivated:function(e,t,r){return"main"==t&&(e.game.players_info[r-1].temporary_yellow_tech_prerequisite++,e.game.planets[e.game.state.research_team_cybernetic_planet].exhausted=1),0}}),this.importAgendaCard("research-team-propulsion",{name:"Research Team: Propulsion",type:"Law",elect:"planet",text:"Elect an industrial planet. The owner may exhaust this planet to ignore 1 blue technology prerequisite the next time they research a technology",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return"industrial"===e.type?1:0}))},repealAgenda:function(e){for(var t=null,r=0;r<e.game.state.laws.length;r++)"research-team-propulsion"===e.game.state.laws[r].agenda&&(t=e.game.state.laws[r].option,e.game.state.laws.splice(r,1),r--);return null!=t&&(e.game.state.research_team_propulsion=0,e.game.state.research_team_propulsion_planet=-1),1},onPass:function(e,t){e.game.state.research_team_propulsion=1,e.game.state.research_team_propulsion_planet=t;var r={agenda:"research-team-propulsion"};r.option=t,e.game.state.laws.push(r)},menuOption:function(e,t,r){return"main"==t&&e.game.planets[e.game.state.research_team_propulsion_planet].owner==r?{event:"research_team_propulsion",html:'<li class="option" id="research_team_propulsion">use propulsion (blue) tech-skip</li>'}:{}},menuOptionTriggers:function(e,t,r){return"main"==t&&e.game.planets[e.game.state.research_team_propulsion_planet].owner==r&&0==e.game.planets[e.game.state.research_team_propulsion_planet].exhausted?1:0},menuOptionActivated:function(e,t,r){return"main"==t&&(e.game.players_info[r-1].temporary_blue_tech_prerequisite++,e.game.planets[e.game.state.research_team_propulsion_planet].exhausted=1),0}}),this.importAgendaCard("research-team-warfare",{name:"Research Team: Warfare",type:"Law",elect:"planet",text:"Elect an hazardous planet. The owner may exhaust this planet to ignore 1 red technology prerequisite the next time they research a technology",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return"industrial"===e.type?1:0}))},repealAgenda:function(e){for(var t=null,r=0;r<e.game.state.laws.length;r++)"research-team-warfare"===e.game.state.laws[r].agenda&&(t=e.game.state.laws[r].option,e.game.state.laws.splice(r,1),r--);return null!=t&&(e.game.state.research_team_warfare=0,e.game.state.research_team_warfare_planet=-1),1},onPass:function(e,t){e.game.state.research_team_warfare=1,e.game.state.research_team_warfare_planet=t;var r={agenda:"research-team-warfare"};r.option=t,e.game.state.laws.push(r)},menuOption:function(e,t,r){return"main"==t&&e.game.planets[e.game.state.research_team_warfare_planet].owner==r?{event:"research_team_warfare",html:'<li class="option" id="research_team_warfare">use warfare (red) tech-skip</li>'}:{}},menuOptionTriggers:function(e,t,r){return"main"==t&&e.game.planets[e.game.state.research_team_warfare_planet].owner==r&&0==e.game.planets[e.game.state.research_team_warfare_planet].exhausted?1:0},menuOptionActivated:function(e,t,r){return"main"==t&&(e.game.players_info[r-1].temporary_red_tech_prerequisite++,e.game.planets[e.game.state.research_team_warfare_planet].exhausted=1),0}}),this.importAgendaCard("demilitarized-zone",{name:"Demilitarized Zone",type:"Law",elect:"planet",text:"Elect a cultural planet. All units are destroyed and cannot be landed, produced or placed on this planet",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return"cultural"===e.type?1:0}))},onPass:function(e,t){e.game.state.demilitarized_zone=1,e.game.state.demilitarized_zone_planet=t;var r={agenda:"demilitarized-zone"};r.option=t,e.game.state.laws.push(r),e.game.planets[t].units=[];for(var n=0;n<e.game.players_info.length;n++)e.game.planets[t].units.push([]);e.game.planets[t].locked=1},repealAgenda:function(e){for(var t=null,r=0;r<e.game.state.laws.length;r++)"demilitarized-zone"===e.game.state.laws[r].agenda&&(t=e.game.state.laws[r].option,e.game.state.laws.splice(r,1),r--);return null!=t&&(e.game.state.demilitarized_zone=0,e.game.state.demilitarized_zone_planet=-1,e.game.planets[t].locked=0),1}}),this.importAgendaCard("core-mining",{name:"Core Mining",type:"Law",elect:"planet",text:"Elect a hazardous planet. Destroy half the infantry on that planet and increase its resource value by +2",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return"hazardous"===e.type?1:0}))},repealAgenda:function(e){for(var t=null,r=0;r<e.game.state.laws.length;r++)"core-mining"===e.game.state.laws[r].agenda&&(t=e.game.state.laws[r].option,e.game.state.laws.splice(r,1),r--);return null!=t&&(e.game.state.core_mining=0,e.game.state.core_mining_planet=-1,e.game.planets[t].locked=0,e.game.planets[t].resources-=2),1},onPass:function(e,t){e.game.state.core_mining=1,e.game.state.core_mining_planet=t;var r={agenda:"core-mining"};r.option=t,e.game.state.laws.push(r);e.returnPlanetsOnBoard((function(e){return"hazardous"===e.type?1:0}));for(var n=t,a=0;a<e.game.planets[n].units.length;a++)for(var i=1,o=0;o<e.game.planets[n].units[a].length;o++)"infantry"==e.game.planets[n].units[a][o].type&&(1==i?(e.game.planets[n].units[a].splice(o,1),o--,i=0):i=1);e.game.planets[t].resources+=2}}),this.importAgendaCard("anti-intellectual-revolution",{name:"Anti-Intellectual Revolution",type:"Law",text:"FOR: players must destroy a capital ship in order to play the Technology card. AGAINST: at the start of the next round, each player exhausts one planet for each technology they have.",returnAgendaOptions:function(e){return["for","against"]},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"anti-intellectual-revolution"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);var r=e.strategy_cards.technology;return r.strategyPrimaryEventBackup&&(r.strategyPrimaryEvent=r.strategyPrimaryEventBackup),r.strategySecondaryEventBackup&&(r.strategySecondaryEvent=r.strategySecondaryEventBackup),1},initialize:function(e,t){if("for"===t){var r=e.strategy_cards.technology,n=r.strategySecondaryEvent;r.strategySecondaryEventBackup=n,r.strategySecondaryEvent=function(e,t,r){e.game.player==t&&e.game.player!=r&&e.playerAcknowledgeNotice("Anti-Intellectual Revolution is in play. Do you wish to destroy a capital ship to research technology?",(function(){e.playerSelectUnitWithFilter("Select a capital ship to destroy: ",(function(e){return"destroyer"==e.type||"cruiser"==e.type||"carrier"==e.type||"dreadnaught"==e.type||"flagship"==e.type||"warsun"==e.type?1:0}),(function(a){var i=a.sector,o=a.planet_idx,s=a.unit_idx,c=a.unit,l=e.returnSectorAndPlanets(i);-1==o?e.addMove("destroy_unit\t"+e.game.player+"\t"+e.game.player+"\tspace\t"+i+"\t"+o+"\t"+s+"\t1"):e.addMove("destroy_unit\t"+e.game.player+"\t"+e.game.player+"\tground\t"+i+"\t"+o+"\t"+s+"\t1"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" destroys a "+c.name+" in "+l.s.name),n(e,t,r)}))}))};var a=r.strategyPrimaryEvent;r.strategyPrimaryEventBackup=a,r.strategyPrimaryEvent=function(e,t,r){e.game.player==r&&t==r&&e.playerAcknowledgeNotice("Anti-Intellectual Revolution is in play. Do you wish to destroy a capital ship to research technology?",(function(){e.playerSelectUnitWithFilter("Select a capital ship to destroy: ",(function(e){return"destroyer"==e.type||"cruiser"==e.type||"carrier"==e.type||"dreadnaught"==e.type||"flagship"==e.type||"warsun"==e.type?1:0}),(function(n){var i=n.sector,o=n.planet_idx,s=n.unit_idx,c=n.unit,l=e.returnSectorAndPlanets(i);-1==o?e.addMove("destroy_unit\t"+e.game.player+"\t"+e.game.player+"\tspace\t"+i+"\t"+o+"\t"+s+"\t1"):e.addMove("destroy_unit\t"+e.game.player+"\t"+e.game.player+"\tground\t"+i+"\t"+o+"\t"+s+"\t1"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" destroys a "+c.name+" in "+l.s.name),a(e,t,r)}))}))}}if("against"===t)for(var i=0;i<e.game.players_info.length;i++)e.game.players_info[i].must_exhaust_at_round_start.push("planet","planet")},onPass:function(e,t){e.game.state.anti_intellectual_revolution=1;var r={agenda:"anti-intellectual-revolution"};r.option=t,e.game.state.laws.push(r),this.initialize(e,t)}}),this.importAgendaCard("unconventional-measures",{name:"Unconventional Measures",type:"Directive",text:"FOR: each player that votes 'for' draws 2 action cards. AGAINST: each player that votes 'for' discards their action cards.",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){if("for"===t)for(var r=0;r<e.game.players_info.length;r++)e.game.state.choices[e.game.state.how_voted_on_agenda[r]]==t&&(e.game.queue.push("gain\t2\t"+(r+2)+"\taction_cards\t2"),e.game.queue.push("DEAL\t2\t"+(r+1)+"\t2"),e.game.queue.push("NOTIFY\tdealing two action cards to player "+(r+1)));if("against"===t)for(var n=0;n<e.game.players_info.length;n++)console.log("uncon plyr: "+n),console.log(" how voted: "+e.game.state.choices[e.game.state.how_voted_on_agenda[n]]),"for"==e.game.state.choices[e.game.state.how_voted_on_agenda[n]]&&(e.game.player==n+1?(alert("clearing out my action cards!"),e.game.players_info[n].action_cards_in_hand=0,e.game.deck[1].hand=[]):(alert("clearing out my action cards!"),e.game.players_info[n].action_cards_in_hand=0))}}),this.importAgendaCard("seeds-of-an-empire",{name:"Seeds of an Empire",type:"Directive",text:"FOR: the player(s) with the most VP gain a VP. AGAINST: the players with the least VP gain a VP",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){var r=e.returnInitiativeOrder();if(console.log("seeds of the empire: "+t),"for"===t){for(var n=0,a=0;a<r.length;a++)n<e.game.players_info[r[a]-1].vp&&(n=e.game.players_info[r[a]-1].vp),e.game.state.seeds_of_an_empire=r[a];for(var i=0;i<r.length;i++)if(n==e.game.players_info[r[i]-1].vp&&(e.game.players_info[r[i]-1].vp+=1,e.game.queue.push("NOTIFY\t"+e.returnFaction(r[i])+" gains 1 VP from Seeds of an Empire"),e.game.state.seeds_of_an_empire=r[i],e.checkForVictory()))return 0}if("against"===t){for(var o=1e4,s=0;s<r.length;s++)o>e.game.players_info[r[s]-1].vp&&(o=e.game.players_info[r[s]-1].vp);for(var c=0;c<r.length;c++)if(o==e.game.players_info[r[c]-1].vp&&(e.game.players_info[r[c]-1].vp+=1,e.game.queue.push("NOTIFY\t"+e.returnFaction(r[c]+1)+" gains 1 VP from Seeds of an Empire"),e.game.state.seeds_of_an_empire=r[c],e.checkForVictory()))return 0}return e.updateLeaderboard(),1}}),this.importAgendaCard("space-cadet",{name:"Space Cadet",type:"Law",text:"Any player more than 3 VP behind the lead must henceforth be referred to as an Irrelevant Loser",returnAgendaOptions:function(e){return["for","against"]},initialize:function(e,t){null==e.space_cadet_initialized&&(e.space_cadet_initialized=1,1==e.game.state.space_cadet&&(e.returnFactionNamePreSpaceCadet=e.returnFactionName,e.returnFactionName=function(e,t){for(var r=0,n=0;n<e.game.players_info.length;n++)r<e.game.players_info[n].vp&&(r=e.game.players_info[n].vp);return e.game.players_info[t-1].vp<=r-3?"Irrelevant Loser":e.returnFactionNamePreSpaceCadet(e,t)},e.returnFactionNameNicknamePreSpaceCadet=e.returnFactionNameNickname,e.returnFactionNameNickname=function(e,t){for(var r=0,n=0;n<e.game.players_info.length;n++)r<e.game.players_info[n].vp&&(r=e.game.players_info[n].vp);return e.game.players_info[t-1].vp<=r-3?"Loser":e.returnFactionNameNicknamePreSpaceCadet(e,t)}))},onPass:function(e,t){if("for"==t){e.game.state.space_cadet=1;var r={agenda:"space-cadet"};r.option=t,e.game.state.laws.push(r),this.initialize(e)}},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"space-cadet"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);return e.game.state.space_cadet=0,e.returnFactionName=e.returnFactionNamePreSpaceCadet,1}}),this.importAgendaCard("galactic-threat",{name:"Galactic Threat",type:"Law",text:"Elect a player. They must henceforth be referred to as the Galatic Threat",returnAgendaOptions:function(e){for(var t=[],r=0;r<e.game.players_info.length;r++)t.push(e.returnFaction(r+1));return t},initialize:function(e,t){null==e.galactic_threat_initialized&&(e.galactic_threat_initialized=1,1==e.game.state.galactic_threat&&(e.returnFactionNamePreGalacticThreat=e.returnFactionName,e.returnFactionName=function(e,t){return e.game.state.galactic_threat_player==t?"The Galactic Threat":e.returnFactionNamePreGalacticThreat(e,t)},e.returnFactionNameNicknamePreGalacticThreat=e.returnFactionNameNickname,e.returnFactionNameNickname=function(e,t){return e.game.state.galactic_threat_player==t?"Threat":e.returnFactionNameNicknamePreGalacticThreat(e,t)}))},onPass:function(e,t){e.game.state.galactic_threat=1;for(var r=0;r<e.game.players_info.length;r++)t===e.returnFaction(r+1)&&(e.game.state.galactic_threat_player=r+1);var n={agenda:"galactic-threat"};n.option=t,e.game.state.laws.push(n),this.initialize(e)},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"galactic-threat"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);return e.game.state.galactic_threat=0,e.game.state.galactic_threat_initialized=0,e.returnFactionNamePreGalacticThreat&&(e.returnFactionName=e.returnFactionNamePreGalacticThreat),1}}),this.importAgendaCard("committee-formation",{name:"Committee Formation",type:"Law",elect:"player",text:"Elect a player. They may form a committee to vote on which player is elected in a future agenda",returnAgendaOptions:function(e){for(var t=[],r=0;r<e.game.players_info.length;r++)t.push(e.returnFaction(r+1));return t},preAgendaStageTriggers:function(e,t,r){return 1==e.game.state.committee_formation&&e.game.state.committee_formation_player==t&&"player"==e.agenda_cards[r].elect?1:0},preAgendaStageEvent:function(e,t,r){if(t!=e.game.player){var n=e.returnFaction(e.game.player)+" is deciding whether to Form a Committee";return e.updateStatus(n),0}return'<li class="textchoice" id="yes">assemble the committee</li>','<li class="textchoice" id="no">not this time</li>',"</ul>",e.updateStatus('Do you wish to use Committee Formation to select the winner yourself? <ul><li class="textchoice" id="yes">assemble the committee</li><li class="textchoice" id="no">not this time</li></ul>'),$(".textchoice").off(),$(".textchoice").on("click",(function(){"no"==$(this).attr("id")&&e.endTurn();for(var r=0;r<e.game.players_info.length;r++)r!=e.game.player-1&&e.addMove("rider\t"+t+"\tassassinate-representative\t-1");e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" forms a committee..."),e.endTurn()})),0},onPass:function(e,t){e.game.state.committee_formation=1;for(var r=0;r<e.game.players_info.length;r++)t===e.returnFaction(r+1)&&(e.game.state.committee_formation_player=r+1);var n={agenda:"committee-formation"};n.option=t,console.log("pushing onto law: "+JSON.stringify(n)),e.game.state.laws.push(n)},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"committee_formation"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);return e.game.state.committee_formation=0,e.game.state.committee_formation_player=-1,1}}),this.importAgendaCard("minister-of-policy",{name:"Minister of Policy",type:"Law",elect:"player",text:"Elect a player. They draw an extra action card at the start of each round",returnAgendaOptions:function(e){for(var t=[],r=0;r<e.game.players_info.length;r++)t.push(e.returnFaction(r+1));return t},onPass:function(e,t){e.game.state.minister_of_policy=1,e.game.state.minister_of_policy_player=t;for(var r=0;r<e.game.players_info.length;r++)t===e.returnFaction(r+1)&&(e.game.state.minister_of_policy_player=r+1);e.game.players_info[e.game.state.minister_of_policy_player-1].action_cards_bonus_when_issued++;var n={agenda:"minister-of-policy"};n.option=t,e.game.state.laws.push(n)},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"minister-of-policy"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);return e.game.state.minister_of_policy=0,e.game.players_info[e.game.state.minister_of_policy_player-1].action_cards_bonus_when_issued--,e.game.state.minister_of_policy_player=-1,1}}),this.importAgendaCard("executive-sanctions",{name:"Executive Sanctions",type:"Law",text:"Players may have a maximum of 3 action cards in their hands at all times",returnAgendaOptions:function(e){return["support","oppose"]},onPass:function(e,t){if("support"==this.returnAgendaOptions(e)[t])for(var r=0;r<e.game.players_info.length;r++)e.game.players_info[r].action_card_limit=3;var n={agenda:"executive-sanctions"};return n.option=t,e.game.state.laws.push(n),1},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"executive-sanctions"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);for(var r=0;r<e.game.players_info.length;r++)3==e.game.players_info[r].action_card_limit&&(e.game.players_info[r].action_card_limit=7);return 1}}),this.importAgendaCard("fleet-limitations",{name:"Fleet Limitations",type:"Law",text:"Players may have a maximum of four tokens in their fleet supply.",img:"/imperium/img/agenda_card_template.png",returnAgendaOptions:function(e){return["support","oppose"]},onPass:function(e,t){if("support"==this.returnAgendaOptions(e)[t])for(var r=0;r<e.game.players_info.length;r++)e.game.players_info[r].fleet_supply_limit=4,e.game.players_info[r].fleet_supply>=4&&(e.game.players_info[r].fleet_supply=4);return 1},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"fleet-limitations"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);for(var r=0;r<e.game.players_info.length;r++)e.game.players_info[r].fleet_supply_limit=16;return 1}}),this.importAgendaCard("restricted-conscription",{name:"Restricted Conscription",type:"Law",text:"Production cost for infantry and fighters is 1 rather than 0.5 resources",img:"/imperium/img/agenda_card_template.png",returnAgendaOptions:function(e){return["support","oppose"]},onPass:function(e,t){"support"==this.returnAgendaOptions(e)[t]&&(e.units.infantry.cost=1,e.units.fighter.cost=1);var r={agenda:"restricted-conscription"};return r.option=t,e.game.state.laws.push(r),1},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"restricted-conscription"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);return e.units.infantry.cost=.5,e.units.fighter.cost=.5,1}}),this.importAgendaCard("wormhole-travel-ban",{name:"Wormhole Travel Ban",type:"Law",text:"All wormholes are closed.",img:"/imperium/img/agenda_card_template.png",returnAgendaOptions:function(e){return["support","oppose"]},onPass:function(e,t){"support"==this.returnAgendaOptions(e)[t]&&(e.game.state.wormholes_open=0);var r={agenda:"wormhole-travel-ban"};return r.option=t,e.game.state.laws.push(r),1},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"wormhole-travel-ban"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);return e.game.state.wormholes_open=1,1}}),this.importAgendaCard("archived-secret",{name:"Archived Secret",type:"Directive",text:"Elected Player draws one secret objective",returnAgendaOptions:function(e){for(var t=[],r=0;r<e.game.players_info.length;r++)t.push(e.returnFaction(r+1));return t},onPass:function(e,t){e.game.state.archived_secret=1;for(var r=0;r<e.game.players_info.length;r++)t===e.returnFaction(r+1)&&(e.game.state.archived_secret_player=r+1);return e.game.queue.push("gain\t"+e.game.state.archived_secret_player+"\tsecret_objectives\t1"),e.game.queue.push("DEAL\t6\t"+e.game.state.archived_secret_player+"\t1"),1}}),this.importAgendaCard("economic-equality",{name:"Economic Equality",type:"Directive",text:"FOR: all players discard all trade goods, AGAINST: players lose all trade goods and then gain 5 trade goods. ",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){if(e.game.state.economic_equality=1,"for"===t){for(var r=0;r<e.game.players_info.length;r++)e.game.players_info[r].goods=0;e.updateLog("All players have 0 trade goods")}if("against"===t){for(var n=0;n<e.game.players_info.length;n++)e.game.players_info[n].goods=5;e.updateLog("All players have 5 trade goods")}return e.displayFactionDashboard(),1}}),this.importAgendaCard("mutiny",{name:"Mutiny",type:"Directive",text:"FOR: all who vote FOR gain 1 VP, AGAINST: all players who vote FOR lose 1 VP",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){if(e.game.state.mutiny=1,"for"===t)for(var r=0;r<e.game.players_info.length;r++)"for"==e.game.state.choices[e.game.state.how_voted_on_agenda[r]]&&(e.game.players_info[r].vp++,e.updateLog(e.returnFaction(r+1)+" gains 1 VP from Mutiny"));if("against"===t)for(var n=0;n<e.game.players_info.length;n++)"for"===e.game.state.choices[e.game.state.how_voted_on_agenda[n]]&&(e.game.players_info[n].vp--,e.updateLog(e.returnFaction(n+1)+" loses 1 VP from Mutiny"));return e.updateLeaderboard(),1}}),this.importAgendaCard("conventions-of-war",{name:"Conventions of War",type:"Law",text:"FOR: cultural planets are exempt from bombardment, AGAINST: players who vote against discard all action cards",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){if(e.game.state.conventions_of_war=1,"for"===t)for(var r=0;r<e.game.players_info.length;r++)"against"==e.game.state.choices[e.game.state.how_voted_on_agenda[r]]&&(e.game.players_info[r].action_cards_in_hand=0,e.game.player==r+1&&(e.game.deck[1].hand=[]));"against"===t&&(e.game.state.bombardment_against_cultural_planets=0);var n={agenda:"conventions-of-war"};return n.option=t,e.game.state.laws.push(n),1},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"conventions-of-war"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);return e.game.state.bombardment_against_cultural_planets=1,1}}),this.importAgendaCard("swords-to-ploughshares",{name:"Swords to Ploughshares",type:"Directive",text:"FOR: everyone destroys half their infantry (round up) on every planet, AGAINST: everyone gains 1 infantry each planet",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){if(e.game.state.swords_to_ploughshares=1,"against"===t)for(var r in e.game.planets)-1!=e.game.planets[r].owner&&e.game.planets[r].units[e.game.planets[r].owner-1].push(e.returnUnit("infantry",e.game.planets[r].owner));if("for"===t)for(var n=0;n<e.game.players_info.length;n++){var a=0;for(var i in e.game.planets)if(e.game.planets[i].owner==n+1){for(var o=0,s=0;s<e.game.planets[i].units[n].length;s++)"infantry"==e.game.planets[i].units[n][s].type&&(1==o?(o=0,a++):o=1);for(var c=0,l=0;l<a&&c<e.game.planets[i].units[n].length;c++)"infantry"==e.game.planets[i].units[n][c].type&&(e.game.planets[i].units[n].splice(c,1),c--,l++)}1==a?e.updateLog(e.returnFaction(n+1)+" gains "+a+" trade good"):e.updateLog(e.returnFaction(n+1)+" gains "+a+" trade goods")}return 1}}),this.importAgendaCard("wormhole-research",{name:"Wormhole Research",type:"Directive",text:"FOR: all ships in sectors with alpha and beta wormholes are destroyed, their owners research 1 technology, AGAINST: everyone who voted against loses a command token",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){e.game.state.wormhole_research=1;var r=[];if("for"===t){for(var n in e.game.sectors)if(0!=e.game.sectors[n].wormhole)for(var a=0;a<e.game.sectors[n].units.length;a++)e.game.sectors[n].units[a].length>0&&(e.game.sectors[n].units[a]=[],r.includes(a+1)||r.push(a+1));r.sort();for(var i=0;i<r.length;i++)e.game.queue.push("research\t"+r[i])}if("against"===t){for(var o=0;o<e.game.players_info.length;o++)"against"==e.game.state.choices[e.game.state.how_voted_on_agenda[o]]&&(e.game.players_info[o].command_tokens--,e.game.players_info[o].command_tokens<=0&&(e.game.players_info[o].command_tokens=0));e.updateTokenDisplay()}return 1}}),this.importAgendaCard("new-constitution",{name:"New Constitution",type:"Directive",text:"FOR: remove all laws in play and exhaust all homeworld at the start of the next round",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){e.game.state.new_constitution=1;for(var r=e.game.state.laws.length-1;r>0;r--){var n=e.game.state.laws[r].agenda;e.agenda_cards[n].repealAgenda(e)}if("for"===t){e.game.state.laws=[];for(var a=0;a<e.game.players_info.length;a++)e.game.players_info[a].must_exhaust_at_round_start.push("homeworld")}return 1}}),this.importAgendaCard("shared-research",{name:"Shared Research",type:"Directive",text:"FOR: each player activates their home system, AGAINST: units can move through nebulas",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){e.game.state.shared_research=1;if("for"===t)for(var r=0;r<e.game.players_info.length;r++)e.game.queue.push("activate\t"+(r+1)+"\t"+e.returnPlayerHomeworld(r+1));return"against"===t&&(e.game.players_info[i].fly_through_nebulas=1),1}}),this.importAgendaCard("wormhole-reconstruction",{name:"Wormhole Reconstruction",type:"Directive",text:"FOR: alpha and beta wormholes connect to each other, AGAINST:  each player activates all systems with alpha and beta wormholes",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){if(e.game.state.wormhole_reconstruction=1,"for"===t&&(e.game.state.wormholes_adjacent=1),"against"===t)for(var r in e.game.sectors)if(1==e.game.sectors[r].wormhole||2==e.game.sectors[r].wormhole){for(var n=0;n<e.game.players_info.length;n++)e.game.sectors[r].activated[n]=1;e.returnSectorAndPlanets(r).s&&e.updateSectorGraphics(r)}return 1}}),this.importAgendaCard("crown-of-emphidia",{name:"Crown of Emphidia",type:"Law",elect:"player",text:"Elect a Player to earn 1 VP. When this player loses a homeworld to another player, they lose 1 VP and their opponent gains 1 VP",returnAgendaOptions:function(e){for(var t=[],r=0;r<e.game.players_info.length;r++)t.push(e.returnFaction(r+1));return t},onPass:function(e,t){e.game.state.crown_of_emphidia=1;for(var r=0;r<e.game.players_info.length;r++)t===e.returnFaction(r+1)&&(e.game.state.crown_of_emphidia_player=r+1);var n={agenda:"crown-of-emphidia"};n.option=t,e.game.state.laws.push(n),e.game.players_info[e.game.state.crown_of_emphidia_player-1].vp+=1,e.updateLeaderboard(),e.updateLog(e.returnFaction(e.game.state.crown_of_emphidia_player)+" gains 1 VP from Crown of Emphidia")},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"crown-of-emphidia"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);return e.game.state.crown_of_emphidia=-1,e.game.state.crown_of_emphidia_player=-1,1},groundCombatRoundEnd:function(e,t,r,n,a){return r==e.game.state.crown_of_emphidia_player&&(e.doesPlayerHaveInfantryOnPlanet(r,n,a)||e.doesPlayerHaveInfantryOnPlanet(t,n,a)&&(e.updateLog(e.returnFaction(e.game.state.crown_of_emphidia_player)+" loses the Crown of Emphidia (-1VP)"),e.game.state.crown_of_emphidia_player=t,e.updateLog(e.returnFaction(e.game.state.crown_of_emphidia_player)+" gains the Crown of Emphidia (+1VP)"),e.game.players_info[t-1].vp+=1,e.game.players_info[r-1].vp-=1,e.updateLeaderboard())),1}}),this.importAgendaCard("terraforming-initiative",{name:"Terraforming Initiative",type:"Law",elect:"planet",text:"Elect a hazardous planet. The resource and influence values of this planet are increased by 1 point each",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return"hazardous"===e.type?1:0}))},onPass:function(e,t){e.game.state.terraforming_initiative=1,e.game.state.terraforming_initiative_planet=t;var r={agenda:"terraforming-initiative"};return r.option=t,e.game.state.laws.push(r),e.game.planets[t].resources++,e.game.planets[t].influence++,e.updateLog(e.game.planets[t].name+" increases resource and influence through terraforming"),1},repealAgenda:function(e){for(var t=null,r=0;r<e.game.state.laws.length;r++)"terraforming-initiative"===e.game.state.laws[r].agenda&&(t=e.game.state.laws[r].option,e.game.state.laws.splice(r,1),r--);return e.game.state.terraforming_initiative=-1,t&&e.game.planets[t]&&(e.game.planets[t].resources--,e.game.planets[t].influence--),e.game.state.terraforming_initiative_planet=-1,1}}),this.importAgendaCard("senate-sanctuary",{name:"Senate Sanctuary",type:"Law",elect:"planet",text:"Elect a cultural planet. The influence value of this planet is increased by 2 points",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return"cultural"===e.type?1:0}))},repealAgenda:function(e){for(var t=null,r=0;r<e.game.state.laws.length;r++)"senate-sanctuary"===e.game.state.laws[r].agenda&&(t=e.game.state.laws[r].option,e.game.state.laws.splice(r,1),r--);return t&&e.game.planets[t]&&(e.game.planets[t].influence-=2),e.game.state.senate_sanctuary=0,e.game.state.senate_sanctuary_planet=-1,1},onPass:function(e,t){e.game.state.senate_sanctuary=1,e.game.state.senate_sanctuary_planet=t;var r={agenda:"senate-sanctuary"};return r.option=t,e.game.state.laws.push(r),e.game.planets[t].influence+=2,e.updateLog(e.game.planets[t].name+" increases influence value by 2"),1}}),this.importAgendaCard("publicize-weapons-schematics",{name:"Publicize Weapons Schematics",type:"Directive",text:"FOR: all players now have War Suns technology, AGAINST: all players with War Suns technology discard all action cards",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){if(e.game.state.publicize_weapons_schematics=1,"for"===t)for(var r=0;r<e.game.players_info.length;r++)e.doesPlayerHaveTech(r+1,"warsun")||e.game.queue.push("purchase\t"+(r+1)+"\ttech\twarsun");if("against"===t)for(var n=0;n<e.game.players_info.length;n++)e.doesPlayerHaveTech(n+1,"warsun")&&(e.game.players_info[n].action_cards_in_hand=0,e.game.player==n+1&&(e.game.deck[1].hand=[]),e.updateLog(e.returnFaction(n+1)+" discards all Action Cards"));return 1}}),this.importAgendaCard("incentive-program",{name:"Incentive Program",type:"Directive",text:"FOR: reveal a 1 VP public objective, AGAINST: reveal a 2 VP public objective",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){if(e.game.state.incentive_program=1,"for"===t){e.game.queue.push("revealobjectives");for(var r=1;r<=e.game.players_info.length;r++)e.game.queue.push("FLIPCARD\t4\t1\t2\t"+r)}if("against"===t){e.game.queue.push("revealobjectives");for(var n=1;n<=e.game.players_info.length;n++)e.game.queue.push("FLIPCARD\t5\t1\t3\t"+n)}return 1}}),this.importAgendaCard("colonial-redistribution",{name:"Colonial Redistribution",type:"Directive",elect:"planet",text:"Elect a cultural, industrial or hazardous planet. Destroy all units on the planet. Planet owner chooses a player with the fewest VP to gain control of the planet and gain 1 infantry on it. If no-one controls that planet, the Speaker chooses the recipient.",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return"cultural"===e.type||"industrial"===e.type||"hazardous"===e.type?1:0}))},onPass:function(e,t){return e.game.state.colonial_redistribution=1,e.game.state.colonial_redistribution_planet=t,e.game.queue.push("colonial_redistribution\t"+t),e.game.state.laws.push({agenda:"colonial-redistribution",option:t}),0},handleGameLoop:function(e,t,r){if("colonial_redistribution"==r[0]){var n=r[1];e.game.queue.splice(t,1);var a=e.game.planets[n].owner,i=e.game.planets[n].idx,o=e.game.planets[n].sector;return-1==a&&(a=e.game.state.speaker),e.game.planets[n].units[a]=[],e.game.player==a&&e.playerSelectPlayerWithFilter("Select a player to receive 1 infantry and this planet",(function(t){for(var r=0,n=t.vp,a=0;a<e.game.players_info.length;a++)e.game.players_info[a]<n&&(r=1);return 1==r?0:1}),(function(t){return e.updateStatus(""),e.addMove("produce\t"+t+"\t1\t"+i+"\tinfantry\t"+o),e.addMove("annex\t"+t+"\t"+o+"\t"+i),e.addMove("NOTIFY\t"+e.returnFaction(t)+" gains the contested planet"),e.endTurn(),0})),0}return 1}}),this.importAgendaCard("compensated-disarmament",{name:"Compensated Disarmament",type:"Directive",elect:"planet",text:"Destroy all ground forces on planet. For each infantry destroyed planet owner gains 1 trade good",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return 1}))},onPass:function(e,t){e.game.state.compensated_disarmament=1,e.game.state.compensated_disarmament_planet=t,console.log("planet is: "+t);var r=e.game.planets[t],n=parseInt(r.owner),a=0;if(-1==n)return 1;for(var i=r.units[n-1].length,o=0;o<i;o++){"infantry"==r.units[n-1][o].type&&(a++,r.units[n-1].splice(o,1),o--,i=r.units[n-1].length)}return a>0&&e.game.queue.push("purchase\t"+n+"\tgoods\t"+a),e.updateSectorGraphics(r.sector),1}}),this.importAgendaCard("judicial-abolishment",{name:"Judicial Abolishment",type:"Directive",elect:"law",text:"Discard a law if one is in play",returnAgendaOptions:function(e){for(var t=[],r=0;r<e.game.state.laws.length;r++)t.push(e.agenda_cards[e.game.state.laws[r].agenda].name);return t},onPass:function(e,t){e.game.state.judicial_abolishment=1,e.game.state.judicial_abolishment_law=t;for(var r=null,n=0;n<e.game.state.laws.length;n++)t===e.agenda_cards[e.game.state.laws[n].agenda].name&&(e.agenda_cards[e.game.state.laws[n].agenda].repealAgenda(e),r=e.game.state.laws[n].agenda,n=e.game.state.laws.length+2);return r&&e.updateLog(e.agenda_cards[r].name+" abolished"),1}}),this.importAgendaCard("public-execution",{name:"Public Execution",type:"Directive",elect:"player",text:"Elect a player. They discard all their action cards, lose the speaker token to the next player in initiative order (if they have it) and lose all of their votes.",returnAgendaOptions:function(e){for(var t=[],r=0;r<e.game.players_info.length;r++)t.push(e.returnFaction(r+1));return t},onPass:function(e,t){var r=e.returnInitiativeOrder();e.game.state.public_execution=1;for(var n=0;n<e.game.players_info.length;n++)t===e.returnFaction(n+1)&&(e.game.state.public_execution_player=n+1);if(e.game.players_info[e.game.state.public_execution_player-1].action_cards_in_hand=0,e.game.player==e.game.state.public_execution_player&&(e.game.deck[1].hand=[]),e.game.state.public_execution_player==e.game.state.speaker){e.game.state.speaker=r[0];for(var a=0;a<r.length-1;a++)r[a]==e.game.state.public_execution_player&&(e.game.state.speaker=r[a+1])}return e.game.state.votes_available[e.game.state.public_execution_player-1]=0,e.updateLog(e.returnFaction(e.game.state.public_execution_player)+" representative publicly executed"),e.displayFactionDashboard(),1}}),this.importAgendaCard("ixthian-artifact",{name:"Ixthian Artifact",type:"Directive",text:"FOR: roll a die. On rolls of 5 and under destroy all units on New Byzantium and 3 units in each adjacent system. On all other rolls each player researches 2 technologies",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){if("for"==t){var r=e.rollDice(10);if(e.updateLog("Ixthian Artifact rolls "+r),r<=5){for(var n=0;n<e.game.players_info.length;n++)e.game.planets["new-byzantium"].units[n]=[],e.game.sectors["new-byzantium"].units[n]=[];for(var a=e.returnAdjacentSectors("new-byzantium"),i=0;i<a.length;i++)for(var o=0;o<e.game.players_info.length;o++)e.doesSectorContainPlayerUnits(o+1,a[i])&&e.game.queue.push("destroy_units\t"+(o+1)+"\t3\t"+a[i]+"\t0")}if(r>=6){for(var s=0;s<e.game.players_info.length;s++)e.game.queue.push("research\t"+(s+1)),e.game.queue.push("research\t"+(s+1));e.game.queue.push("ACKNOWLEDGE\tThe Ixthian Artifact did not explode. All players may now research two technologies...")}}return 1}})},function(e,t){this.importFaction("faction2",{id:"faction2",name:"Universities of Jol Nar",nickname:"Jol Nar",homeworld:"sector50",space_units:["carrier","carrier","dreadnaught","fighter"],ground_units:["infantry","infantry","pds","spacedock"],tech:["sarween-tools","neural-motivator","plasma-scoring","antimass-deflectors","faction2-analytic","faction2-brilliant","faction2-fragile","faction2-flagship"],background:"faction2.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the Universities of Jol Nar, a physically weak faction which excells at science and technology. Survive long enough to amass enough protective technology and you can be a contender for the Imperial Throne. Good luck!</div>'}),this.importTech("faction2-flagship",{name:"XXCha Flagship",faction:"faction2",type:"ability",text:"Extra hit on every roll of 9 or 10 before modifications",modifyUnitHits:function(e,t,r,n,a,i,o,s){return e.doesPlayerHaveTech(n,"faction2-flagship")&&i.owner==n&&"flagship"==i.type&&o>8?(e.updateLog("Jol Nar flagship scores an additional hit through flagshup ability"),++s):s}}),this.importTech("faction2-analytic",{name:"Analytic",faction:"faction2",type:"ability",text:"Ignore 1 tech prerequisite on non-unit upgrades",onNewRound:function(e,t){e.doesPlayerHaveTech(t,"faction2-analytic")&&(e.game.players_info[t-1].permanent_ignore_number_of_tech_prerequisites_on_nonunit_upgrade=1)}}),this.importTech("faction2-fragile",{name:"Fragile",faction:"faction2",type:"ability",text:"-1 on all combat rolls",onNewRound:function(e,t){e.doesPlayerHaveTech(t,"faction2-fragile")&&(e.game.players_info[t-1].permanent_ignore_number_of_tech_prerequisites_on_nonunit_upgrade=1)},modifyCombatRoll:function(e,t,r,n,a,i){return"space"!=a&&"ground"!=a||e.doesPlayerHaveTech(t,"faction2-fragile")&&(e.updateLog("Jol Nar combat rolls -1 due to fragility"),(i-=1)<1&&(i=1)),i}}),this.importTech("faction2-brilliant",{name:"Brilliant",faction:"faction2",type:"ability",text:"Tech primary is played when token spent to execute secondary",initialize:function(e,t){null==e.faction2_brilliant_swapped&&(e.faction2_brilliant_swapped=1,e.brilliant_original_event=e.strategy_cards.technology.strategySecondaryEvent,e.strategy_cards.technology.strategySecondaryEvent=function(e,t,r){e.doesPlayerHaveTech(t,"faction2-brilliant")&&t!=r&&e.game.player==t?(e.game.players_info[t-1].cost_of_technology_secondary=6,e.playerAcknowledgeNotice("The Tech strategy card has been played. You may expend a strategy token to research a technology. You can then purchase a second for 6 resources:",(function(){e.updateStatus('<p>Technology has been played. Do you wish to spend a strategy token to research a technology? </p><ul><li class="option" id="yes">Yes</li><li class="option" id="no">No</li></ul>'),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){if(e.unlockInterface(),"no"===$(this).attr("id"))return e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0;e.playerResearchTechnology((function(r){e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.addMove("purchase\t"+t+"\ttechnology\t"+r),e.game.players_info[e.game.player-1].tech.push(r);var n=6,a="<p>Do you wish to spend 6 resources to research a second technology? </p><ul>";1!=e.game.players_info[t-1].permanent_research_technology_card_must_not_spend_resources&&1!=e.game.players_info[t-1].temporary_research_technology_card_must_not_spend_resources||(a="<p>Do you wish to research a second technology for free?",n=0),e.returnAvailableResources(e.game.player)>=n&&(a+='<li class="option" id="yes">Yes</li>'),a+='<li class="option" id="no">No</li>',a+="</ul>",e.updateStatus(a),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var r=$(this).attr("id");return"yes"===r&&(e.game.players_info[t-1].temporary_research_technology_card_must_not_spend_resources=0,e.playerSelectResources(n,(function(r){if(1!=r)return e.endTurn(),0;e.playerResearchTechnology((function(r){e.addMove("purchase\t"+t+"\ttechnology\t"+r),e.endTurn()}))}))),"no"===r?(e.endTurn(),0):void 0}salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}))}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}))):e.brilliant_original_event(e,t,r)})}}),this.importTech("faction2-eres-siphons",{name:"E-Res Siphons",faction:"faction2",type:"special",color:"yellow",prereqs:["yellow","yellow"],text:"Gain 4 trade goods whenever a system is activated containing your ships",initialize:function(e,t){null==e.game.players_info[t-1].eres_siphons&&(e.game.players_info[t-1].eres_siphons=0)},gainTechnology:function(e,t,r){"faction2-eres-siphons"==r&&(e.game.players_info[t-1].eres_siphons=1)},activateSystemTriggers:function(e,t,r,n){return 1==e.game.players_info[r-1].eres_siphons&&t!=r&&1==e.doesSectorContainPlayerShips(r,n)?1:0},postSystemActivation:function(e,t,r,n){e.game.players_info[r-1].goods+=4}}),this.importTech("faction2-deep-space-conduits",{name:"Deep Space Conduits",faction:"faction2",type:"special",color:"blue",prereqs:["blue","blue"],text:"Activate card to make activated system 1 hop away from all other systems with Jol Nar ships",initialize:function(e,t){null==e.game.players_info[t-1].deep_space_conduits&&(e.game.players_info[t-1].deep_space_conduits=0,e.game.players_info[t-1].deep_space_conduits_exhausted=0)},onNewRound:function(e,t){1==e.game.players_info[t-1].deep_space_conduits&&(e.game.players_info[t-1].deep_space_conduits_exhausted=0)},gainTechnology:function(e,t,r){"faction2-deep-space-conduits"==r&&(e.game.players_info[t-1].deep_space_conduits=1,e.game.players_info[t-1].deep_space_conduits_exhausted=0)},activateSystemTriggers:function(e,t,r,n){return r==e.game.player&&t==r&&1==e.game.players_info[t-1].deep_space_conduits&&0==e.game.players_info[t-1].deep_space_conduits_exhausted&&e.doesSectorContainPlayerUnits(t,n)?1:0},activateSystemEvent:function(e,t,r,n){e.updateStatus('Do you wish to activate Deep Space Conduits: <ul><li class="textchoice" id="yes">activate</li><li class="textchoice" id="no">skip</li></ul>'),$(".textchoice").off(),$(".textchoice").on("click",(function(){var a=$(this).attr("id");if("yes"==a){var i=e.returnSectorsWithPlayerUnits(t);e.game.players_info[t-1].deep_space_conduits_exhausted=1,e.addMove("setvar\tplayers\t"+r+"\tdeep_space_conduits_exhausted\tint\t1");for(var o=0;o<i.length;o++)e.addMove("adjacency\ttemporary\t"+i[o]+"\t"+n);e.endTurn()}"no"==a&&(e.updateStatus(),e.endTurn())}))}})},function(e,t){this.importFaction("faction7",{id:"faction7",name:"Embers of Muaat",nickname:"Muaat",homeworld:"sector76",space_units:["warsun","fighter","fighter"],ground_units:["infantry","infantry","infantry","infantry","spacedock"],tech:["plasma-scoring","faction7-star-forge","faction7-gashlai-physiology","faction7-advanced-warsun-i","faction7-flagship"],background:"faction7.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the Embers of Muaat, a faction which forges its instruments of war in the heat of lava-powered furnaces and whose technical research expands to conquering the heat of the very starts themselves. Goodl luck!</div>'}),this.importTech("faction7-star-forge",{name:"Star Forge",faction:"faction7",type:"ability",text:"Spend 1 strategy token to place 2 fighters or a destroy in sector with your warsun",initialize:function(e,t){null==e.game.players_info[t-1].star_forge&&(e.game.players_info[t-1].star_forge=0)},gainTechnology:function(e,t,r){"faction7-star-forge"==r&&(e.game.players_info[t-1].star_forge=1)},menuOption:function(e,t,r){var n={};return"main"===t&&(n.event="starforge",n.html='<li class="option" id="starforge">star forge</li>'),n},menuOptionTriggers:function(e,t,r){return e.doesPlayerHaveTech(r,"faction7-star-forge")&&"main"===t&&e.game.players_info[r-1].strategy_tokens>0?1:0},menuOptionActivated:function(e,t,r){return e.game.player==r?(e.playerSelectSectorWithFilter("Star Forge spends 1 strategy token to drop 2 fighters or 1 destroyer in a sector containing your War Sun: ",(function(t){return e.doesSectorContainPlayerUnit(e.game.player,t,"warsun")}),(function(t){return e.addMove("produce\t"+e.game.player+"\t1\t-1\tdestroyer\t"+t),e.addMove("NOTIFY\tStar Forge adds destroyer to "+t),e.addMove("expend\t"+e.game.player+"\tstrategy\t1"),e.endTurn(),0}),(function(){e.playerTurn()})),0):0}}),this.importTech("faction7-gashlai-physiology",{name:"Gashlai Physiology",faction:"faction7",type:"ability",text:"Player may move through supernovas",initialize:function(e,t){null==e.game.players_info[t-1].gashlai_physiology&&(e.game.players_info[t-1].gashlai_physiology=0)},gainTechnology:function(e,t,r){"faction7-gashlai-physiology"==r&&(e.game.players_info[t-1].gashlai_physiology=1,e.game.players_info[t-1].fly_through_supernovas=1)}}),this.importTech("faction7-magmus-reactor",{name:"Magmus Reactor",faction:"faction7",type:"special",text:"Player may move into supernovas. Gain 1 trade good producing with Warsun or adjacent to Supernova",initialize:function(e,t){null==e.game.players_info[t-1].magmus_reactor&&(e.game.players_info[t-1].magmus_reactor=0)},gainTechnology:function(e,t,r){"faction7-magmus-reactor"==r&&(e.game.players_info[t-1].magmus_reactor=1,e.game.players_info[t-1].move_into_supernovas=1)},postProduction:function(e,t,r,n){if(1==e.game.players_info[t-1].magmus_reactor){var a=e.returnAdjacentSectors(r),i=0;if(e.doesSectorContainPlayerUnit(t,r,"warsun")&&(i=1),0==i)for(var o=0;o<a.length;o++){4==e.returnSectorAndPlanets(a[o]).s.type&&(i=1)}1==i&&(e.updateLog("Muatt gains 1 trade good from Magmus Reactor - producing in a sector with a Warsun or adjacent to a Supernova"),e.game.players_info[t-1].goods+=1,e.updateTokenDisplay(),e.displayFactionDashboard())}}}),this.importTech("faction7-flagship",{name:"Muaat Flagship",faction:"faction7",type:"ability",text:"May spend 1 strategy token to place a cruiser in your flagship system"}),this.importTech("faction7-advanced-warsun-i",{name:"Advanced Warsun I",faction:"faction7",replaces:"warsun",unit:1,type:"special",text:"A more dangerous and mobile warsun",prereqs:[],initialize:function(e,t){null==e.game.players_info[t-1].faction7_advanced_warsun_i&&(e.game.players_info[t-1].faction7_advanced_warsun_i=0)},gainTechnology:function(e,t,r){e.game.players_info[t-1].faction7_advanced_warsun_i=1,e.game.players_info[t-1].may_produce_warsuns=1},upgradeUnit:function(e,t,r){return 1==e.game.players_info[r.owner-1].faction7_advanced_warsun_i&&"warsun"==r.type&&(r.cost=12,r.combat=3,r.move=1,r.capacity=6,r.bombardment_rolls=3,r.bombardment_combat=3),r}}),this.importTech("faction7-advanced-warsun-ii",{name:"Advanced Warsun II",faction:"faction7",replaces:"warsun",unit:1,type:"special",text:"A more dangerous and mobile warsun",prereqs:["red","red","red","yellow"],initialize:function(e,t){null==e.game.players_info[t-1].faction7_advanced_warsun_ii&&(e.game.players_info[t-1].faction7_advanced_warsun_ii=0)},gainTechnology:function(e,t,r){e.game.players_info[t-1].faction7_advanced_warsun_ii=1},upgradeUnit:function(e,t,r){return 1==e.game.players_info[r.owner-1].faction7_advanced_warsun_ii&&"warsun"==r.type&&(r.cost=10,r.combat=3,r.move=3,r.capacity=6,r.bombardment_rolls=3,r.bombardment_combat=3),r}})},function(e,t){this.importFaction("faction4",{id:"faction4",name:"Sardakk N'Orr",nickname:"Sardakk",homeworld:"sector53",space_units:["carrier","carrier","cruiser"],ground_units:["infantry","infantry","infantry","infantry","infantry","spacedock"],tech:["faction4-unrelenting","faction4-exotrireme-i","faction4-flagship"],background:"faction4.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the Sardaak N\'Orr, an overpowered faction known for its raw strength in combat. Your brutal power makes you an intimidating faction on the board. Good luck!</div>'}),this.importTech("faction4-unrelenting",{name:"Unrelenting",faction:"faction4",type:"ability",text:"+1 on all combat rolls",onNewRound:function(e,t){e.doesPlayerHaveTech(t,"faction4-unrelenting")&&(e.game.players_info[t-1].faction4_unrelenting=1)},modifyCombatRoll:function(e,t,r,n,a,i){return"space"!=a&&"ground"!=a||e.doesPlayerHaveTech(t,"faction4-unrelenting")&&(e.updateLog("Sardakk combat rolls +1 due to Sardakk"),(i+=1)>10&&(i=10)),i}}),this.importTech("faction4-flagship",{name:"Sardakk Flagship",faction:"faction4",type:"ability",text:"+1 on all combat rolls for ships in same sector",modifyCombatRoll:function(e,t,r,n,a,i){if("space"==a){e.doesSectorContainPlayerUnit(t,e.game.state.activated_sector,"flagship")&&(e.updateLog("Sardakk Flagship adds +1 to dice roll"),(i+=1)>10&&(i=10))}return i}}),this.importTech("faction4-exotrireme-i",{name:"Exotrireme I",faction:"faction4",replaces:"dreadnaught",unit:1,type:"special",text:"A more powerful dreadnaught",prereqs:[],initialize:function(e,t){null==e.game.players_info[t-1].faction4_advanced_dreadnaught_i&&(e.game.players_info[t-1].faction4_advanced_dreadnaught_i=0)},gainTechnology:function(e,t,r){e.game.players_info[t-1].faction4_advanced_dreadnaught_i=1},upgradeUnit:function(e,t,r){return 1==e.game.players_info[r.owner-1].faction4_advanced_dreadnaught_i&&"dreadnaught"==r.type&&(r.cost=4,r.combat=5,r.move=1,r.capacity=1,r.strength=2,r.bombardment_rolls=2,r.bombardment_combat=4,r.description="The Exotrireme I is a more powerful dreadnaught not vulnerable to Direct Hit cards"),r}}),this.importTech("faction4-exotrireme-ii",{name:"Exotrireme II",faction:"faction4",replaces:"dreadnaught",unit:1,type:"special",prereqs:["blue","blue","yellow"],text:"A much more powerful dreadnaught",initialize:function(e,t){null==e.game.players_info[t-1].faction4_advanced_dreadnaught_ii&&(e.game.players_info[t-1].faction4_advanced_dreadnaught_ii=0)},gainTechnology:function(e,t,r){e.game.players_info[t-1].faction4_advanced_dreadnaught_ii=1,e.game.players_info[t-1].faction4_advanced_dreadnaught_i=0},upgradeUnit:function(e,t,r){return 1==e.game.players_info[r.owner-1].faction4_advanced_dreadnaught_ii&&"dreadnaught"==r.type&&(r.cost=4,r.combat=5,r.move=2,r.capacity=1,r.strength=2,r.bombardment_rolls=2,r.bombardment_combat=4,r.description="The Exotrireme II is a more powerful dreadnaught not vulnerable to Direct Hit cards. It may be destroyed after a round of space combat to destroy up to two opponent ships."),r},spaceCombatRoundEnd:function(e,t,r,n){return e.doesPlayerHaveTech(t,"faction4-exotrireme-ii")&&e.doesSectorContainPlayerUnit(t,n,"dreadnaught")&&e.addMove("faction4_exotrireme_ii_sacrifice\t"+t+"\t"+n),e.doesPlayerHaveTech(r,"faction4-exotrireme-ii")&&e.doesSectorContainPlayerUnit(r,n,"dreadnaught")&&e.addMove("faction4_exotrireme_ii_sacrifice\t"+r+"\t"+n),1},handleGameLoop:function(e,t,r){if("faction4_exotrireme_ii_sacrifice"==r[0]){var n=parseInt(r[1]),a=e.returnSectorAndPlanets(r[2]),i=e.returnOpponentInSector(n,r[2]);if(n==e.game.player){if(-1==i)return e.addMove("resolve\tfaction4_exotrireme_ii_sacrifice"),e.addMove("NOTIFY\tNo target ships for Sardakk Exotrireme II faction ability"),e.endTurn(),0;for(var o=0,s=0;s<a.s.units[i-1].length;s++)a.s.units[i-1][s].strength>0&&(o=1);if(0==o)return e.addMove("resolve\tfaction4_exotrireme_ii_sacrifice"),e.addMove("NOTIFY\tNo target ships for Sardakk Exotrireme II action ability"),e.endTurn(),0;html='<div class="sf-readable">Do you wish to sacrifice a Dreadnaught to destroy up to 2 opponent ships?</div><ul>';for(var c=0;c<a.s.units[e.game.player-1].length;c++)"dreadnaught"==a.s.units[e.game.player-1][c].type&&(html+='<li class="option" id="'.concat(c,'">sacrifice ').concat(e.returnShipInformation(a.s.units[e.game.player-1][c]),"</li>"));html+='<li class="option" id="no">do not sacrifice</li>',html+="</ul>",e.updateStatus(html),$(".option").on("click",(function(){var t=$(this).attr("id");return"no"===t?(e.addMove("resolve\tfaction4_exotrireme_ii_sacrifice"),e.endTurn(),0):(e.addMove("resolve\tfaction4_exotrireme_ii_sacrifice"),e.addMove("faction4_exotrireme_ii_picktwo\t"+e.game.player+"\t"+r[2]),e.addMove("NOTIFY\tSardakk sacrifies Exotritreme II to destroy opponent ships"),e.addMove("destroy_unit\t"+e.game.player+"\t"+e.game.player+"\tspace\t"+r[2]+"\t0\t"+t+"\t1"),e.endTurn(),0)}))}return 0}if("faction4_exotrireme_ii_picktwo"==r[0]){var l=parseInt(r[1]);e.returnSectorAndPlanets(r[2]);return l==e.game.player?(e.addMove("resolve\tfaction4_exotrireme_ii_picktwo"),e.playerDestroyOpponentShips(l,2,r[2])):e.updateStatus("Exotrireme II engaging in suicide assault"),0}}}),this.importTech("faction4-particle-weave",{name:"Particle Weave",faction:"faction4",type:"special",prereqs:["red","red"],text:"Infantry vaporize 1 opponent for each hit received",initialize:function(e,t){null==e.game.players_info[t-1].faction4_particle_weave&&(e.game.players_info[t-1].faction4_particle_weave=0,e.game.players_info[t-1].faction4_particle_weave_opponent=0,e.game.players_info[t-1].faction4_particle_weave_my_forces=0)},gainTechnology:function(e,t,r){"faction4-particle-weave"==r&&(e.game.players_info[t-1].faction4_particle_weave=1)},groundCombatTriggers:function(e,t,r,n){if(e.doesPlayerHaveTech(t,"faction4-particle-weave")){var a=e.returnSectorAndPlanets(r).p[n];e.game.players_info[t-1].faction4_particle_weave_my_forces=a.units[t-1].length}return 0},groundCombatRoundEnd:function(e,t,r,n,a){if(e.doesPlayerHaveTech(t,"faction4-particle-weave")){var i=e.returnSectorAndPlanets(n),o=i.p[a];if(o.units[t-1].length<e.game.players_info[t-1].faction4_particle_weave_my_forces){e.updateLog("Sardakk Particle Weave vaporizes 1 opponent infantry...");for(var s=0;s<o.units[r-1].length;s++)"infantry"==o.units[r-1][s].type&&(o.units[r-1].splice(s,1),s=o.units[r-1].length+1)}e.saveSystemAndPlanets(i)}if(e.doesPlayerHaveTech(r,"faction4-particle-weave")){var c=e.returnSectorAndPlanets(n),l=c.p[a];if(l.units[r-1].length<e.game.players_info[r-1].faction4_particle_weave_my_forces){e.updateLog("Sardakk Particle Weave vaporizes 1 opponent infantry...");for(var u=0;u<l.units[t-1].length;u++)"infantry"==l.units[t-1][u].type&&(l.units[t-1].splice(u,1),u=l.units[t-1].length+1)}e.saveSystemAndPlanets(c)}return 1}})},function(e,t){this.importFaction("faction1",{id:"faction1",name:"Federation of Sol",nickname:"Sol",homeworld:"sector52",space_units:["carrier","carrier","destroyer","fighter","fighter","fighter"],ground_units:["infantry","infantry","infantry","infantry","infantry","spacedock"],tech:["neural-motivator","antimass-deflectors","faction1-orbital-drop","faction1-versatile","faction1-flagship"],background:"faction1.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the Sol Federation. a Terran faction under cellular military government. Your reinforced infantry and tactical flexibility will be important in your fight for the Imperial Throne. Good luck!</div>'}),this.importTech("faction1-flagship",{name:"Sol Flagship",faction:"faction1",text:"Flagship gains 1 infantry when player selects a strategy card",type:"ability",playersChooseStrategyCardsBeforeTriggers:function(e,t){return e.doesPlayerHaveTech(t,"faction1-flagship")&&e.returnPlayerFleet(t).flagship>0?1:0},playersChooseStrategyCardsBeforeEvent:function(e,t){for(var r in e.game.sectors)if(e.doesSectorContainPlayerUnit(t,r,"flagship"))for(var n=e.game.sectors[r],a=0;a<n.units[t-1].length;a++)if("flagship"==n.units[t-1][a].type)return e.loadUnitOntoShip(t,r,a,"infantry"),e.updateLog("Faction Ability: infantry added to Sol Flagship..."),1;return 1}}),this.importTech("faction1-orbital-drop",{name:"Orbital Drop",faction:"faction1",type:"ability",text:"Drop two infantry onto any controlled planet",initialize:function(e,t){null==e.game.players_info[t-1].orbital_drop&&(e.game.players_info[t-1].orbital_drop=0)},gainTechnology:function(e,t,r){"faction1-orbital-drop"==r&&(e.game.players_info[t-1].orbital_drop=1)},menuOption:function(e,t,r){var n={};return"main"===t&&(n.event="orbitaldrop",n.html='<li class="option" id="orbitaldrop">orbital drop</li>'),n},menuOptionTriggers:function(e,t,r){return e.doesPlayerHaveTech(r,"faction1-orbital-drop")&&"main"===t&&e.game.players_info[r-1].strategy_tokens>0&&0==e.game.state.active_player_moved?1:0},menuOptionActivated:function(e,t,r){if(e.game.player==r)return e.playerSelectPlanetWithFilter("Use Orbital Drop to reinforce which planet with two infantry: ",(function(t){return e.game.planets[t].owner==e.game.player?1:0}),(function(t){return t=e.game.planets[t],e.addMove("resolve\tplay"),e.addMove("setvar\tstate\t0\tactive_player_moved\tint\t0"),e.addMove("player_end_turn\t"+e.game.player),e.addMove("produce\t"+e.game.player+"\t1\t"+t.idx+"\tinfantry\t"+t.sector),e.addMove("produce\t"+e.game.player+"\t1\t"+t.idx+"\tinfantry\t"+t.sector),e.addMove("expend\t"+e.game.player+"\tstrategy\t1"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" orbital drops 2 infantry onto "+t.name),e.endTurn(),0}),null),0}}),this.importTech("faction1-versatile",{name:"Versatile",faction:"faction1",type:"ability",text:"Gain an extra command token each round",onNewRound:function(e,t){e.doesPlayerHaveTech(t,"faction1-versatile")&&(e.game.players_info[t-1].new_tokens_per_round=3)}}),this.importTech("faction1-advanced-carrier-ii",{name:"Advanced Carrier II",faction:"faction1",replaces:"carrier-ii",unit:1,type:"special",text:"A more sophisticated carrier",prereqs:["blue","blue"],initialize:function(e,t){null==e.game.players_info[t-1].faction1_advanced_carrier_ii&&(e.game.players_info[t-1].faction1_advanced_carrier_ii=0)},gainTechnology:function(e,t,r){e.game.players_info[t-1].faction1_advanced_carrier_ii=1},upgradeUnit:function(e,t,r){return 1==e.game.players_info[r.owner-1].faction1_advanced_carrier_ii&&"carrier"==r.type&&(r.cost=3,r.combat=9,r.move=2,r.capacity=8),r}}),this.importTech("faction1-advanced-infantry-ii",{name:"Special Ops II",faction:"faction1",replaces:"infantry-ii",unit:1,type:"special",text:"Battle-hardened infantry",prereqs:["green","green"],initialize:function(e,t){e.game.players_info[t-1].faction1_advanced_infantry_ii=0},gainTechnology:function(e,t,r){e.game.players_info[t-1].faction1_advanced_infantry_ii=1},upgradeUnit:function(e,t,r){return 1==e.game.players_info[r.owner-1].faction1_advanced_infantry_ii&&"infantry"==r.type&&(r.cost=.5,r.combat=6),r}})},function(e,t){this.importFaction("faction3",{id:"faction3",name:"XXCha Kingdom",nickname:"XXCha",homeworld:"sector51",space_units:["carrier","cruiser","cruiser","fighter","fighter","fighter"],ground_units:["infantry","infantry","infantry","infantry","pds","spacedock"],tech:["graviton-laser-system","faction3-peace-accords","faction3-quash","faction3-flagship"],background:"faction3.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the XXCha Kingdom, a faction which excels in diplomacy and defensive weaponry. With the proper alliances and political maneuvers your faction you can be a contender for the Imperial Throne. Good luck!</div>'}),this.importTech("faction3-flagship",{name:"XXCha Flagship",faction:"faction3",type:"ability",text:"3 space cannons which target adjacent systems attached to flagship",returnPDSUnitsWithinRange:function(e,t,r,n,a,i){if(!e.doesPlayerHaveTech(t,"faction3-flagship"))return i;if(e.returnPlayerFleet(t).flagship>0)for(var o=e.returnAdjacentSectors(a),s=0;s<o.length;s++)if(e.doesSectorContainPlayerUnit(t,o[s],"flagship")){var c={name:"XXCha Flagship #1"};c.unit=JSON.parse(JSON.stringify(e.returnUnit("pds",t))),c.unit.name="Flagship",c.range=1,c.combat=6,c.owner=t,c.sector=a;var l={name:"XXCha Flagship #2"};l.unit=JSON.parse(JSON.stringify(e.returnUnit("pds",t))),l.unit.name="Flagship",l.range=1,l.combat=6,l.owner=t,l.sector=a;var u={name:"XXCha Flagship #3"};return u.unit=JSON.parse(JSON.stringify(e.returnUnit("pds",t))),u.unit.name="Flagship",u.range=1,u.combat=6,u.owner=t,u.sector=a,i.push(c),i.push(l),i.push(u),i}return i}}),this.importTech("faction3-peace-accords",{name:"Peace Accords",faction:"faction3",type:"ability",text:"Colonize adjacent unprotected planet when diplomacy secondary is played",initialize:function(e,t){null==e.game.players_info[t-1].peace_accords&&(e.game.players_info[t-1].peace_accords=0)},gainTechnology:function(e,t,r){"faction3-peace-accords"==r&&(e.game.players_info[t-1].peace_accords=1)},strategyCardAfterTriggers:function(e,t,r,n){return 1==e.game.players_info[t-1].peace_accords?1:0},strategyCardAfterEvent:function(e,t,r,n){if("diplomacy"==n){for(var a=e.returnPlayerPlanetCards(t),i=[],o=[],s=[],c=0;c<a.length;c++)i.includes(e.game.planets[a[c]].sector)||(i.push(e.game.planets[a[c]].sector),o.push(e.game.planets[a[c]].sector));for(var l=0;l<i.length;l++)for(var u=e.returnAdjacentSectors(i[l]),d=0;d<u.length;d++)o.includes(u[d])||o.push(u[d]);for(var h=0;h<o.length;h++){var p=e.returnSectorAndPlanets(o[h]);if(p.p)for(var f=0;f<p.p.length;f++){p.p[f].owner!=t&&(e.doesPlanetHaveInfantry(p.p[f])||s.push(p.p[f].planet))}}return s.length<0?(e.updateLog("XXCha cannot annex any unguarded planets via Peace Accords"),1):1==e.game.players_info[t-1].peace_accords?(e.updateStatus("XXCha selecting planet to annex with Peace Accords"),e.game.player==t&&e.playerSelectPlanetWithFilter("Select a planet to annex via Peace Accords: ",(function(e){return s.includes(e)?1:0}),(function(t){return e.addMove("annex\t"+e.game.player+"\t"+e.game.planets[t].sector+"\t"+e.game.planets[t].idx),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" annexes "+e.game.planets[t].name+" via Peace Accords"),e.endTurn(),0}),(function(){return e.endTurn(),0})),0):1}return 1}}),this.importTech("faction3-quash",{name:"Quash",faction:"faction3",type:"ability",text:"Spend strategy token to quash upcoming agenda",initialize:function(e,t){null==e.game.players_info[t-1].quash&&(e.game.players_info[t-1].quash=0)},gainTechnology:function(e,t,r){"faction3-quash"==r&&(e.game.players_info[t-1].quash=1)},menuOption:function(e,t,r){var n={};return"main"===t&&(n.event="quash",n.html='<li class="option" id="quash">quash agenda</li>'),n},menuOptionTriggers:function(e,t,r){return e.doesPlayerHaveTech(r,"faction3-quash")&&"main"==t&&e.game.players_info[r-1].strategy_tokens>0&&0==e.game.state.active_player_moved?1:0},menuOptionActivated:function(e,t,r){if(e.game.player==r){var n="";for(n+="Select one agenda to quash in the Galactic Senate.<ul>",i=0;i<e.game.state.agendas.length;i++)""!=e.game.state.agendas[i]&&(n+='<li class="option" id="'+e.game.state.agendas[i]+'">'+e.agenda_cards[e.game.state.agendas[i]].name+"</li>");n+="</ul>",e.updateStatus(n),$(".option").off(),$(".option").on("mouseenter",(function(){var t=$(this).attr("id");e.showAgendaCard(t)})),$(".option").on("mouseleave",(function(){var t=$(this).attr("id");e.hideAgendaCard(t)})),$(".option").on("click",(function(){var t=$(this).attr("id");e.updateStatus("Quashing Agenda"),e.addMove("expend\t"+e.game.player+"\tstrategy\t1"),e.addMove("quash\t"+t+"\t1"),e.endTurn()}))}}}),this.importTech("faction3-instinct-training",{name:"Instinct Training",faction:"faction3",prereqs:["green"],color:"green",type:"special",text:"Expend strategy token to cancel opponent action card",initialize:function(e,t){null==e.game.players_info[t-1].instinct_training&&(e.game.players_info[t-1].instinct_training=0)},gainTechnology:function(e,t,r){"faction3-instinct-training"==r&&(e.game.players_info[t-1].instinct_training=1)},playActionCardTriggers:function(e,t,r,n){return 1==e.game.players_info[t-1].instinct_training&&e.game.players_info[t-1].strategy_tokens>0?1:0},playActionCardEvent:function(e,t,r,n){if(e.game.player==t){'<li class="textchoice" id="yes">yes</li>','<li class="textchoice" id="no">no</li>',"</ul>",e.updateStatus('<div class=\'sf-readable\'>Do you wish to spend a strategy token to cancel opponent action card with Instinct Training?</div><ul><li class="textchoice" id="yes">yes</li><li class="textchoice" id="no">no</li></ul>'),$(".textchoice").off(),$(".textchoice").on("click",(function(){"no"===$(this).attr("id")||(e.addMove("resolve\taction_card"),e.addMove("resolve\taction_card_post"),e.addMove("expend\t"+e.game.player+"strategy1")),e.endTurn()}))}return 0}}),this.importTech("faction3-field-nullification",{name:"Nullification Fields",faction:"faction3",type:"special",color:"yellow",prereqs:["yellow","yellow"],text:"Terminate the turn of active player who activates a system containing your ship",initialize:function(e,t){null==e.game.players_info[t-1].field_nullification&&(e.game.players_info[t-1].field_nullification=0,e.game.players_info[t-1].field_nullification_exhausted=0)},onNewRound:function(e,t){e.doesPlayerHaveTech(t,"faction3-field-nullification")&&(e.game.players_info[t-1].field_nullification_exhausted=0)},gainTechnology:function(e,t,r){"faction3-field-nullification"==r&&(e.game.players_info[t-1].field_nullification=1,e.game.players_info[t-1].field_nullification_exhausted=0)},activateSystemTriggers:function(e,t,r,n){return e.doesPlayerHaveTech(r,"faction3-field-nullification")&&e.doesSectorContainPlayerShips(r,n)&&t!=r?1:0},activateSystemEvent:function(e,t,r,n){if(e.doesPlayerHaveTech(r,"faction3-field-nullification")){if(1==e.game.players_info[r-1].field_nullification_exhausted)return 1;if(e.game.player!=r)return e.updateStatus(e.returnFaction(r)+" is deciding whether to use Nullification Fields"),0;return'<li class="textchoice" id="yes">activate nullification field</li>','<li class="textchoice" id="no">do not activate</li>',"</ul>",e.updateStatus('Do you wish to use Field Nullification to terminate this player\'s turn? <ul><li class="textchoice" id="yes">activate nullification field</li><li class="textchoice" id="no">do not activate</li></ul>'),$(".textchoice").off(),$(".textchoice").on("click",(function(){var a=$(this).attr("id");"yes"==a&&(e.addMove("resolve\tplay"),e.addMove("setvar\tstate\t0\tactive_player_moved\tint\t0"),e.addMove("player_end_turn\t"+e.game.player),e.addMove("field_nullification\t"+r+"\t"+t+"\t"+n),e.endTurn()),"no"==a&&e.endTurn()})),0}return 1},handleGameLoop:function(e,t,r){if("field_nullification"==r[0]){var n=parseInt(r[1]),a=parseInt(r[2]);r[3];return e.game.queue.splice(t,1),e.updateLog(e.returnFactionNickname(n)+" uses Nullification Fields to end "+e.returnFactionNickname(a)+" turn"),1}return 1}})},function(e,t){this.importFaction("faction5",{id:"faction5",name:"Yin Brotherhood",nickname:"Yin",homeworld:"sector74",space_units:["carrier","carrier","destroyer","fighter","fighter","fighter","fighter"],ground_units:["infantry","infantry","infantry","infantry","spacedock"],tech:["sarween-tools","faction5-indoctrination","faction5-devotion","faction5-flagship"],background:"faction5.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the Yin Brotherhood, a monastic order of religious zealots whose eagerness to sacrifice their lives for the collective good makes them terrifying in one-on-one combat. Direct their self-destructive passion and you can win the Imperial Throne. Good luck!</div>'}),this.importTech("faction5-indoctrination",{name:"Indoctrination",faction:"faction5",type:"ability",text:"Spend 2 influence to convert 1 enemy infantry at combat start",groundCombatTriggers:function(e,t,r,n){if(e.doesPlayerHaveTech(t,"faction5-indoctrination")&&(e.returnSectorAndPlanets(r).p[n].units[t-1].length>0&&e.returnAvailableInfluence(t)>=2&&e.game.state.ground_combat_round<2))return 1;return 0},groundCombatEvent:function(e,t,r,n){if(e.game.player==t)return e.returnSectorAndPlanets(r).p[n].units[t-1].length>0?e.playIndoctrination(e,t,r,n,(function(e){e.endTurn()})):e.endTurn(),0}}),this.importTech("faction5-devotion",{name:"Devotion",faction:"faction5",type:"ability",text:"Sacrifice destroyer or cruiser to assign 1 enemy hit at combat end",spaceCombatTriggers:function(e,t,r){return e.doesPlayerHaveTech(t,"faction5-devotion")&&e.doesPlayerHaveShipsInSector(t,r)&&e.game.state.space_combat_round>0?1:0},spaceCombatEvent:function(e,t,r){return e.game.player==t&&e.playDevotion(e,t,r,(function(){e.endTurn()})),0}}),this.importTech("faction5-impulse-core",{name:"Impulse Core",faction:"faction5",prereqs:["yellow","yellow"],color:"yellow",type:"special",text:"Sacrifice destroyer or cruiser at combat start, opponent takes hit on capital ship",spaceCombatTriggers:function(e,t,r){return e.doesPlayerHaveTech(t,"faction5-impulse-core")&&e.doesPlayerHaveShipsInSector(t,r)&&0==e.game.state.space_combat_round?1:0},spaceCombatEvent:function(e,t,r){return e.game.player==t&&e.playDevotion(e,t,r,(function(){e.endTurn()}),1),0}}),this.importTech("faction5-yin-spinner",{name:"Yin Spinner",faction:"faction5",prereqs:["green","green"],color:"green",type:"special",text:"Place additional infantry on planet after producing in sector",initialize:function(e,t){null==e.game.players_info[t-1].faction5_yin_spinner&&(e.game.players_info[t-1].faction5_yin_spinner=0)},gainTechnology:function(e,t,r){"faction5-yin-spinner"==r&&(e.game.players_info[t-1].faction5_yin_spinner=1)},playerEndTurnTriggers:function(e,t){return 1==e.game.players_info[t-1].faction5_yin_spinner&&e.game.player==t&&1==e.game.state.active_player_has_produced?1:0},playerEndTurnEvent:function(e,t){if(e.game.player!=t)return 0;e.playerSelectPlanetWithFilter("Yin Spinner Tech: place additional infantry on which planet?",(function(t){return(t=e.game.planets[t]).owner==e.game.player?1:0}),(function(t){return t=e.game.planets[t],e.addMove("produce\t"+e.game.player+"\t1\t"+t.idx+"\tinfantry\t"+t.sectors),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" spins extra infantry on "+t.name),e.endTurn(),0}),(function(){e.playerTurn()}))}}),this.importTech("faction5-flagship",{name:"Yin Flagship",faction:"faction5",type:"ability",text:"Wipes out all ships in sector when destroyed",unitDestroyed:function(e,t,r){if("flagship"==r.type&&e.doesPlayerHaveTech(r.owner,"faction5-flagship")){var n=e.game.state.activated_sector;""===n&&(n=e.game.state.space_combat_sector);var a=e.returnSectorAndPlanets(n);if(a){for(var i=0;i<a.s.units.length;i++)a.s.units[i]=[];for(var o=0;o<a.p.length;o++)for(var s=0;s<a.p[o].units.length;s++)a.p[o].units[s]=[];e.saveSystemAndPlanets(n),e.updateSectorGraphics(n),e.updateLog("The destruction of the Yin Flagship has caused a terrible calamity...")}}return r}}),this.playIndoctrination=function(e,t,r,n,a){if(this.game.player==t&&this.game.player==t){var i=e.returnSectorAndPlanets(r),o=i.p[n],s=e.returnOpponentOnPlanet(t,o);if(e.returnNonPlayerInfantryOnPlanet(t,o)<=0||-1==s)a(e);else if(i.p[n].units[s-1].length<=0)a(e);else{'<li class="textchoice" id="yes">yes</li>','<li class="textchoice" id="no">no</li>',"</ul>",this.updateStatus('<div class=\'sf-readable\'>Do you wish to spend 2 influence to convert 1 enemy infantry to your side?</div><ul><li class="textchoice" id="yes">yes</li><li class="textchoice" id="no">no</li></ul>'),$(".textchoice").off(),$(".textchoice").on("click",(function(){var i=$(this).attr("id");"no"!==i?"yes"===i&&e.playerSelectInfluence(2,(function(i){1==i?(e.addMove("destroy_infantry_on_planet\t"+t+"\t"+r+"\t"+n+"\t1"),e.addMove("add_infantry_to_planet\t"+t+"\t"+o.planet+"\t1"),e.addMove("NOTIFY\tYin Indoctrination converts opposing infantry"),e.endTurn()):a(e)})):a(e)}))}}},this.playDevotion=function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(e.game.player!=t)return 0;var i=e.returnSectorAndPlanets(r),o=e.returnOpponentInSector(t,r),s=e.doesSectorContainPlayerUnit(t,r,"destroyer"),c=e.doesSectorContainPlayerUnit(t,r,"cruiser");if(1==s||1==c){if(-1!=o){var l="<div class='sf-readable'>Do you wish to sacrifice a Destroyer or Cruiser to assign 1 hit to an enemy ship?</div><ul>";return s&&(l+='<li class="textchoice" id="destroyer">sacrifice destroyer</li>'),c&&(l+='<li class="textchoice" id="cruiser">sacrifice cruiser</li>'),l+='<li class="textchoice" id="no">no</li>',l+="</ul>",e.updateStatus(l),$(".textchoice").off(),$(".textchoice").on("click",(function(){var o=$(this).attr("id");if("no"!==o){if("destroyer"===o){for(var s=0,c=0;c<i.s.units[t-1].length;c++)"destroyer"==i.s.units[t-1][c].type&&(s=c);return e.addMove("destroy_unit\t"+t+"\t"+t+"\tspace\t"+r+"\t0\t"+s+"\t1"),void e.playDevotionAssignHit(e,t,r,n,a)}if("cruiser"===o){for(var l=0,u=0;u<i.s.units[t-1].length;u++)"cruiser"==i.s.units[t-1][u].type&&(l=u);return e.addMove("destroy_unit\t"+t+"\t"+t+"\tspace\t"+r+"\t0\t"+l+"\t1"),void e.playDevotionAssignHit(e,t,r,n,a)}}else n(e)})),0}n(e)}else n(e)},this.playDevotionAssignHit=function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=e.returnSectorAndPlanets(r),o=e.returnOpponentInSector(t,r);if(1==a)return this.addMove("assign_hits_capital_ship\t"+o+"\t"+r+"\t1"),void n();for(var s="<div class='sf-readable'>Assign 1 hit to which opponent ship?</div><ul>",c=0;c<i.s.units[o-1].length;c++){var l=i.s.units[o-1][c];if(s+='<li class="textchoice" id="'+c+'">'+l.name,l.capacity>=1){for(var u="",d=0,h=0,p=0;p<l.storage.length;p++)"infantry"==l.storage[p].type&&h++,"fighter"==i.s.units[e.game.player-1][c].storage[p].type&&d++;(h>0||d>0)&&(u+=" ",h>0&&(u+=h+"i"),d>0&&(h>0&&(u+=", "),u+=d+"f"),u+=" "),s+=u}s+="</li>"}s+="</ul>",e.updateStatus(s),$(".textchoice").off(),$(".textchoice").on("click",(function(){$(".textchoice").off();var a=$(this).attr("id");e.addMove("assign_hit\t"+t+"\t"+o+"\t"+t+"\tship\t"+r+"\t"+a+"\t1"),n(e)}))}},function(e,t){this.importFaction("faction6",{id:"faction6",name:"Yssaril Tribes",nickname:"Yssaril",homeworld:"sector75",space_units:["carrier","carrier","cruiser","fighter","fighter"],ground_units:["infantry","infantry","infantry","infantry","infantry","pds","spacedock"],tech:["neural-motivator","faction6-stall-tactics","faction6-scheming","faction6-crafty","faction6-flagship"],background:"faction6.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the Yssaril Tribe, a primitive race of swamp-dwelling creatures whose fast instincts and almost unerring ability to change tactics on-the-fly lead many to suspect more is at work than their primitive appearance belies. Good luck!</div>'}),this.importTech("faction6-stall-tactics",{name:"Stall Tactics",faction:"faction6",type:"ability",text:"Discard an Action Card to stall one turn",initialize:function(e,t){null==e.game.players_info[t-1].stall_tactics&&(e.game.players_info[t-1].stall_tactics=0)},gainTechnology:function(e,t,r){"faction6-stall-tactics"==r&&(e.game.players_info[t-1].stall_tactics=1)},menuOption:function(e,t,r){var n={};return"main"===t&&(n.event="stalltactics",n.html='<li class="option" id="stalltactics">discard action card (stall)</li>'),n},menuOptionTriggers:function(e,t,r){if(e.doesPlayerHaveTech(r,"faction6-stall-tactics")&&"main"===t&&e.returnPlayerActionCards(r).length>0)return 1;return 0},menuOptionActivated:function(e,t,r){return e.game.player==r&&e.playerDiscardActionCards(1,(function(){return e.addMove("resolve\tplay"),e.addMove("setvar\tstate\t0\tactive_player_moved\tint\t0"),e.addMove("player_end_turn\t"+e.game.player),e.addMove("NOTIFY\t"+e.returnFactionNickname(e.game.player)+" stalls by discarding an action card"),e.endTurn(),0})),0}}),this.importTech("faction6-crafty",{name:"Crafty",faction:"faction6",type:"ability",text:"Unlimited action cards. Game effects cannot change.",onNewRound:function(e,t){e.doesPlayerHaveTech(t,"faction6-crafty")&&(e.game.players_info[t-1].action_card_limit=1e3)}}),this.importTech("faction6-scheming",{name:"Scheming",faction:"faction6",type:"ability",text:"Receive bonus card when gaining action cards, then discard one",initialize:function(e,t){null==e.game.players_info[t-1].faction6_scheming&&(e.game.players_info[t-1].faction6_scheming=0)},gainTechnology:function(e,t,r){"faction6-scheming"==r&&(e.game.players_info[t-1].faction6_scheming=1)},gainActionCards:function(e,t,r){return e.doesPlayerHaveTech(t,"faction6-scheming")&&(e.game.queue.push("yssaril_action_card_discard\t"+t+"\t1"),e.game.queue.push("gain\t"+t+"\taction_cards\t1\t0"),e.game.queue.push("DEAL\t2\t"+t+"\t1"),e.game.queue.push("NOTIFY\t"+e.returnFaction(t)+" gains bonus action card and must discard one")),1},handleGameLoop:function(e,t,r){if("yssaril_action_card_discard"==r[0]){var n=parseInt(r[1]),a=parseInt(r[2]);return e.game.queue.splice(t,1),e.game.player===n&&e.playerDiscardActionCards(a,(function(){e.endTurn()})),0}return 1}}),this.importTech("faction6-transparasteel-plating",{name:"Transparasteel Plating",faction:"faction6",prereqs:["green"],color:"green",type:"special",text:"Selectively terminate action cards from players who have passed on your turn",initialize:function(e,t){null==e.game.players_info[t-1].transparasteel_plating&&(e.game.players_info[t-1].transparasteel_plating=0)},gainTechnology:function(e,t,r){"faction6-transparasteel-plating"==r&&(e.game.players_info[t-1].transparasteel_plating=1)},playActionCardTriggers:function(e,t,r,n){return 1==e.game.players_info[t-1].transparasteel_plating&&e.game.player==t&&r!=t&&1==e.game.players_info[r-1].passed?1:0},playActionCardEvent:function(e,t,r,n){return e.game.player==t&&(e.addMove("resolve\taction_card"),e.addMove("resolve\taction_card_post"),e.addMove("expend\t"+e.game.player+"strategy1"),e.endTurn()),0}}),this.importTech("faction6-mageon-implants",{name:"Mageon Implants",faction:"faction6",prereqs:["green","green","green"],color:"green",type:"special",text:"Exhaust to look at other players action cards and take one.",initialize:function(e,t){null==e.game.players_info[t-1].mageon_implants&&(e.game.players_info[t-1].mageon_implants=0,e.game.players_info[t-1].mageon_implants_exhausted=0)},onNewRound:function(e,t){1==e.game.players_info[t-1].mageon_implants&&(e.game.players_info[t-1].mageon_implants=1,e.game.players_info[t-1].mageon_implants_exhausted=0)},gainTechnology:function(e,t,r){"faction6-mageon-implants"==r&&(e.game.players_info[t-1].mageon_implants=1,e.game.players_info[t-1].mageon_implants_exhausted=0)},menuOption:function(e,t,r){return"main"==t?{event:"mageonimplants",html:'<li class="option" id="mageonimplants">exhaust mageon implants</li>'}:{}},menuOptionTriggers:function(e,t,r){return"main"==t&&0==e.game.players_info[r-1].mageon_implants_exhausted&&1==e.game.players_info[r-1].mageon_implants?1:0},menuOptionActivated:function(e,t,r){return e.playerSelectPlayerWithFilter("Select a player from which to take an action card (if possible): ",(function(t){return t!=e.game.player?1:0}),(function(t){return e.addMove("faction6_choose_card_triggered\t"+e.game.player+"\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" pulls a random action card from "+e.returnFaction(t)),e.endTurn(),0}),(function(){e.playerTurn()})),0},handleGameLoop:function(e,t,r){if("faction6_choose_card_triggered"==r[0]){var n=parseInt(r[1]),a=parseInt(r[2]);if(e.game.queue.splice(t,1),e.game.player===a){var i=e.returnPlayerActionCards();e.addMove("faction6_choose_card_return\t"+n+"\t"+a+"\t"+JSON.stringify(i)),e.endTurn()}return 0}if("faction6_choose_card_return"==r[0]){var o=parseInt(r[1]),s=parseInt(r[2]),c=JSON.parse(r[3]);if(e.game.queue.splice(t,1),e.game.player===o){for(var l='<div class="" style="margin-bottom:10px">Select '+e.returnFactionNickname(s)+" action card:</div><ul>",u=0;u<c.length;u++)l+='<li class="option" id="'.concat(u,'">').concat(e.action_cards[c[u]].name,"</li>");l+='<li class="option" id="cancel">skip</li>',e.updateStatus(l),$(".option").off(),$(".option").on("click",(function(){$(".option").off();var t=$(this).attr("id");return"skip"===t?(e.playerTurn(),0):(e.addMove("setvar\tplayers\t"+e.game.player+"\tmageon_implants_exhausted\tint\t1"),e.addMove("pull\t"+e.game.player+"\t"+s+"\taction\t"+c[t]),e.endTurn(),0)}))}return 0}return 1}}),this.importTech("faction6-flagship",{name:"Yssaril Flagship",faction:"faction6",type:"ability",text:"May move through sectors containing other ships",upgradeUnit:function(e,t,r){return e.doesPlayerHaveTech(r.owner,"faction6-flagship")&&"flagship"==r.type&&(r.may_fly_through_sectors_containing_other_ships=1,r.move=3),r}})},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /Users/david/Programming/saito-lite-rust/bundler/default/mods/imperium/src/imperium-action-cards.js: Missing semicolon. (3:29)\n\n[0m [90m 1 |[39m   [0m\n[0m [90m 2 |[39m   [0m\n[0m[31m[1m>[22m[39m[90m 3 |[39m   returnActionCards(types[33m=[39m[]) {[0m\n[0m [90m   |[39m                              [31m[1m^[22m[39m[0m\n[0m [90m 4 |[39m[0m\n[0m [90m 5 |[39m     [36mif[39m (types[33m.[39mlength [33m==[39m [35m0[39m) { [36mreturn[39m [36mthis[39m[33m.[39maction_cards[33m;[39m }[0m\n[0m [90m 6 |[39m     [36melse[39m {[0m\n    at Parser._raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:541:17)\n    at Parser.raiseWithData (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:534:17)\n    at Parser.raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:495:17)\n    at Parser.semicolon (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:3530:10)\n    at Parser.parseExpressionStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13832:10)\n    at Parser.parseStatementContent (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13423:19)\n    at Parser.parseStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13285:17)\n    at Parser.parseBlockOrModuleBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13874:25)\n    at Parser.parseBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13865:10)\n    at Parser.parseProgram (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13207:10)\n    at Parser.parseTopLevel (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13198:25)\n    at Parser.parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:14957:10)\n    at parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:15009:38)\n    at parser (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/parser/index.js:52:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/normalize-file.js:87:38)\n    at normalizeFile.next (<anonymous>)\n    at run (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/index.js:29:50)\n    at run.next (<anonymous>)\n    at Function.transform (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transform.js:25:41)\n    at transform.next (<anonymous>)\n    at step (/Users/david/Programming/saito-lite-rust/node_modules/gensync/index.js:261:32)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /Users/david/Programming/saito-lite-rust/bundler/default/mods/imperium/src/imperium-agenda-cards.js: Missing semicolon. (2:21)\n\n[0m [90m 1 |[39m[0m\n[0m[31m[1m>[22m[39m[90m 2 |[39m   returnAgendaCards() {[0m\n[0m [90m   |[39m                      [31m[1m^[22m[39m[0m\n[0m [90m 3 |[39m     [36mreturn[39m [36mthis[39m[33m.[39magenda_cards[33m;[39m[0m\n[0m [90m 4 |[39m   }[0m\n[0m [90m 5 |[39m[0m\n    at Parser._raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:541:17)\n    at Parser.raiseWithData (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:534:17)\n    at Parser.raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:495:17)\n    at Parser.semicolon (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:3530:10)\n    at Parser.parseExpressionStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13832:10)\n    at Parser.parseStatementContent (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13423:19)\n    at Parser.parseStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13285:17)\n    at Parser.parseBlockOrModuleBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13874:25)\n    at Parser.parseBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13865:10)\n    at Parser.parseProgram (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13207:10)\n    at Parser.parseTopLevel (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13198:25)\n    at Parser.parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:14957:10)\n    at parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:15009:38)\n    at parser (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/parser/index.js:52:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/normalize-file.js:87:38)\n    at normalizeFile.next (<anonymous>)\n    at run (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/index.js:29:50)\n    at run.next (<anonymous>)\n    at Function.transform (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transform.js:25:41)\n    at transform.next (<anonymous>)\n    at step (/Users/david/Programming/saito-lite-rust/node_modules/gensync/index.js:261:32)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /Users/david/Programming/saito-lite-rust/bundler/default/mods/imperium/src/imperium-display.js: Missing semicolon. (5:14)\n\n[0m [90m 3 |[39m [90m// redraw all sectors[39m[0m\n[0m [90m 4 |[39m [90m//[39m[0m\n[0m[31m[1m>[22m[39m[90m 5 |[39m displayBoard() {[0m\n[0m [90m   |[39m               [31m[1m^[22m[39m[0m\n[0m [90m 6 |[39m   [36mfor[39m ([36mlet[39m i [36min[39m [36mthis[39m[33m.[39mgame[33m.[39msystems) {[0m\n[0m [90m 7 |[39m     [36mthis[39m[33m.[39mupdateSectorGraphics(i)[33m;[39m[0m\n[0m [90m 8 |[39m   }[0m\n    at Parser._raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:541:17)\n    at Parser.raiseWithData (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:534:17)\n    at Parser.raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:495:17)\n    at Parser.semicolon (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:3530:10)\n    at Parser.parseExpressionStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13832:10)\n    at Parser.parseStatementContent (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13423:19)\n    at Parser.parseStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13285:17)\n    at Parser.parseBlockOrModuleBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13874:25)\n    at Parser.parseBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13865:10)\n    at Parser.parseProgram (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13207:10)\n    at Parser.parseTopLevel (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13198:25)\n    at Parser.parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:14957:10)\n    at parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:15009:38)\n    at parser (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/parser/index.js:52:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/normalize-file.js:87:38)\n    at normalizeFile.next (<anonymous>)\n    at run (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/index.js:29:50)\n    at run.next (<anonymous>)\n    at Function.transform (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transform.js:25:41)\n    at transform.next (<anonymous>)\n    at step (/Users/david/Programming/saito-lite-rust/node_modules/gensync/index.js:261:32)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /Users/david/Programming/saito-lite-rust/bundler/default/mods/imperium/src/imperium-end.js: Unexpected token (5:0)\n\n[0m [90m 3 |[39m[0m\n[0m [90m 4 |[39m[0m\n[0m[31m[1m>[22m[39m[90m 5 |[39m }[0m\n[0m [90m   |[39m [31m[1m^[22m[39m[0m\n[0m [90m 6 |[39m[0m\n[0m [90m 7 |[39m module[33m.[39mexports [33m=[39m [33mImperium[39m[33m;[39m[0m\n[0m [90m 8 |[39m   [0m\n    at Parser._raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:541:17)\n    at Parser.raiseWithData (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:534:17)\n    at Parser.raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:495:17)\n    at Parser.unexpected (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:3560:16)\n    at Parser.parseExprAtom (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11980:22)\n    at Parser.parseExprSubscripts (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11541:23)\n    at Parser.parseUpdate (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11521:21)\n    at Parser.parseMaybeUnary (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11496:23)\n    at Parser.parseMaybeUnaryOrPrivate (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11310:61)\n    at Parser.parseExprOps (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11317:23)\n    at Parser.parseMaybeConditional (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11287:23)\n    at Parser.parseMaybeAssign (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11250:21)\n    at Parser.parseExpressionBase (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11186:23)\n    at /Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11180:39\n    at Parser.allowInAnd (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13068:16)\n    at Parser.parseExpression (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11180:17)\n    at Parser.parseStatementContent (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13418:23)\n    at Parser.parseStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13285:17)\n    at Parser.parseBlockOrModuleBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13874:25)\n    at Parser.parseBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13865:10)\n    at Parser.parseProgram (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13207:10)\n    at Parser.parseTopLevel (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13198:25)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /Users/david/Programming/saito-lite-rust/bundler/default/mods/imperium/src/imperium-events.js: Missing semicolon. (3:28)\n\n[0m [90m 1 |[39m[0m\n[0m [90m 2 |[39m[0m\n[0m[31m[1m>[22m[39m[90m 3 |[39m   returnEventObjects(player) {[0m\n[0m [90m   |[39m                             [31m[1m^[22m[39m[0m\n[0m [90m 4 |[39m[0m\n[0m [90m 5 |[39m     [36mlet[39m z [33m=[39m [][33m;[39m[0m\n[0m [90m 6 |[39m     [36mlet[39m zz [33m=[39m [][33m;[39m[0m\n    at Parser._raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:541:17)\n    at Parser.raiseWithData (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:534:17)\n    at Parser.raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:495:17)\n    at Parser.semicolon (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:3530:10)\n    at Parser.parseExpressionStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13832:10)\n    at Parser.parseStatementContent (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13423:19)\n    at Parser.parseStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13285:17)\n    at Parser.parseBlockOrModuleBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13874:25)\n    at Parser.parseBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13865:10)\n    at Parser.parseProgram (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13207:10)\n    at Parser.parseTopLevel (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13198:25)\n    at Parser.parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:14957:10)\n    at parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:15009:38)\n    at parser (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/parser/index.js:52:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/normalize-file.js:87:38)\n    at normalizeFile.next (<anonymous>)\n    at run (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/index.js:29:50)\n    at run.next (<anonymous>)\n    at Function.transform (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transform.js:25:41)\n    at transform.next (<anonymous>)\n    at step (/Users/david/Programming/saito-lite-rust/node_modules/gensync/index.js:261:32)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /Users/david/Programming/saito-lite-rust/bundler/default/mods/imperium/src/imperium-factions.js: Missing semicolon. (3:18)\n\n[0m [90m 1 |[39m   [0m\n[0m [90m 2 |[39m   [0m\n[0m[31m[1m>[22m[39m[90m 3 |[39m   returnFactions() {[0m\n[0m [90m   |[39m                   [31m[1m^[22m[39m[0m\n[0m [90m 4 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mfactions[33m;[39m[0m\n[0m [90m 5 |[39m   }[0m\n[0m [90m 6 |[39m   [0m\n    at Parser._raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:541:17)\n    at Parser.raiseWithData (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:534:17)\n    at Parser.raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:495:17)\n    at Parser.semicolon (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:3530:10)\n    at Parser.parseExpressionStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13832:10)\n    at Parser.parseStatementContent (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13423:19)\n    at Parser.parseStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13285:17)\n    at Parser.parseBlockOrModuleBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13874:25)\n    at Parser.parseBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13865:10)\n    at Parser.parseProgram (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13207:10)\n    at Parser.parseTopLevel (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13198:25)\n    at Parser.parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:14957:10)\n    at parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:15009:38)\n    at parser (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/parser/index.js:52:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/normalize-file.js:87:38)\n    at normalizeFile.next (<anonymous>)\n    at run (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/index.js:29:50)\n    at run.next (<anonymous>)\n    at Function.transform (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transform.js:25:41)\n    at transform.next (<anonymous>)\n    at step (/Users/david/Programming/saito-lite-rust/node_modules/gensync/index.js:261:32)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /Users/david/Programming/saito-lite-rust/bundler/default/mods/imperium/src/imperium-gameloop.js: Missing semicolon. (6:26)\n\n[0m [90m 4 |[39m   [90m// Core Game Logic //[39m[0m\n[0m [90m 5 |[39m   [90m/////////////////////[39m[0m\n[0m[31m[1m>[22m[39m[90m 6 |[39m   handleGameLoop(msg[33m=[39m[36mnull[39m) {[0m\n[0m [90m   |[39m                           [31m[1m^[22m[39m[0m\n[0m [90m 7 |[39m   [0m\n[0m [90m 8 |[39m     [36mlet[39m imperium_self [33m=[39m [36mthis[39m[33m;[39m[0m\n[0m [90m 9 |[39m     [36mlet[39m z [33m=[39m imperium_self[33m.[39mreturnEventObjects()[33m;[39m[0m\n    at Parser._raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:541:17)\n    at Parser.raiseWithData (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:534:17)\n    at Parser.raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:495:17)\n    at Parser.semicolon (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:3530:10)\n    at Parser.parseExpressionStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13832:10)\n    at Parser.parseStatementContent (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13423:19)\n    at Parser.parseStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13285:17)\n    at Parser.parseBlockOrModuleBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13874:25)\n    at Parser.parseBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13865:10)\n    at Parser.parseProgram (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13207:10)\n    at Parser.parseTopLevel (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13198:25)\n    at Parser.parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:14957:10)\n    at parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:15009:38)\n    at parser (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/parser/index.js:52:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/normalize-file.js:87:38)\n    at normalizeFile.next (<anonymous>)\n    at run (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/index.js:29:50)\n    at run.next (<anonymous>)\n    at Function.transform (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transform.js:25:41)\n    at transform.next (<anonymous>)\n    at step (/Users/david/Programming/saito-lite-rust/node_modules/gensync/index.js:261:32)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /Users/david/Programming/saito-lite-rust/bundler/default/mods/imperium/src/imperium-helpers.js: Missing semicolon. (6:36)\n\n[0m [90m 4 |[39m   [90m// utility function to convert sector32 to 3_2 or whatever[39m[0m\n[0m [90m 5 |[39m   [90m//[39m[0m\n[0m[31m[1m>[22m[39m[90m 6 |[39m   convertSectorToSectorname(sectorN) {[0m\n[0m [90m   |[39m                                     [31m[1m^[22m[39m[0m\n[0m [90m 7 |[39m[0m\n[0m [90m 8 |[39m     [36mfor[39m ([36mlet[39m i [36min[39m [36mthis[39m[33m.[39mgame[33m.[39mboard) {[0m\n[0m [90m 9 |[39m       [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mboard[i][33m.[39mtile [33m==[39m sectorN) {[0m\n    at Parser._raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:541:17)\n    at Parser.raiseWithData (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:534:17)\n    at Parser.raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:495:17)\n    at Parser.semicolon (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:3530:10)\n    at Parser.parseExpressionStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13832:10)\n    at Parser.parseStatementContent (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13423:19)\n    at Parser.parseStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13285:17)\n    at Parser.parseBlockOrModuleBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13874:25)\n    at Parser.parseBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13865:10)\n    at Parser.parseProgram (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13207:10)\n    at Parser.parseTopLevel (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13198:25)\n    at Parser.parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:14957:10)\n    at parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:15009:38)\n    at parser (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/parser/index.js:52:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/normalize-file.js:87:38)\n    at normalizeFile.next (<anonymous>)\n    at run (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/index.js:29:50)\n    at run.next (<anonymous>)\n    at Function.transform (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transform.js:25:41)\n    at transform.next (<anonymous>)\n    at step (/Users/david/Programming/saito-lite-rust/node_modules/gensync/index.js:261:32)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /Users/david/Programming/saito-lite-rust/bundler/default/mods/imperium/src/imperium-initialize.js: Unexpected token (3:2)\n\n[0m [90m 1 |[39m   [0m\n[0m [90m 2 |[39m[0m\n[0m[31m[1m>[22m[39m[90m 3 |[39m   } [90m// end initializeGameObjects[39m[0m\n[0m [90m   |[39m   [31m[1m^[22m[39m[0m\n[0m [90m 4 |[39m[0m\n[0m [90m 5 |[39m[0m\n[0m [90m 6 |[39m[0m\n    at Parser._raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:541:17)\n    at Parser.raiseWithData (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:534:17)\n    at Parser.raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:495:17)\n    at Parser.unexpected (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:3560:16)\n    at Parser.parseExprAtom (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11980:22)\n    at Parser.parseExprSubscripts (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11541:23)\n    at Parser.parseUpdate (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11521:21)\n    at Parser.parseMaybeUnary (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11496:23)\n    at Parser.parseMaybeUnaryOrPrivate (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11310:61)\n    at Parser.parseExprOps (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11317:23)\n    at Parser.parseMaybeConditional (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11287:23)\n    at Parser.parseMaybeAssign (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11250:21)\n    at Parser.parseExpressionBase (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11186:23)\n    at /Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11180:39\n    at Parser.allowInAnd (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13068:16)\n    at Parser.parseExpression (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11180:17)\n    at Parser.parseStatementContent (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13418:23)\n    at Parser.parseStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13285:17)\n    at Parser.parseBlockOrModuleBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13874:25)\n    at Parser.parseBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13865:10)\n    at Parser.parseProgram (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13207:10)\n    at Parser.parseTopLevel (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13198:25)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /Users/david/Programming/saito-lite-rust/bundler/default/mods/imperium/src/imperium-objectives.js: Missing semicolon. (2:26)\n\n[0m [90m 1 |[39m   [0m\n[0m[31m[1m>[22m[39m[90m 2 |[39m   returnSecretObjectives() {[0m\n[0m [90m   |[39m                           [31m[1m^[22m[39m[0m\n[0m [90m 3 |[39m     [36mreturn[39m [36mthis[39m[33m.[39msecret_objectives[33m;[39m[0m\n[0m [90m 4 |[39m   }[0m\n[0m [90m 5 |[39m   [0m\n    at Parser._raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:541:17)\n    at Parser.raiseWithData (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:534:17)\n    at Parser.raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:495:17)\n    at Parser.semicolon (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:3530:10)\n    at Parser.parseExpressionStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13832:10)\n    at Parser.parseStatementContent (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13423:19)\n    at Parser.parseStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13285:17)\n    at Parser.parseBlockOrModuleBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13874:25)\n    at Parser.parseBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13865:10)\n    at Parser.parseProgram (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13207:10)\n    at Parser.parseTopLevel (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13198:25)\n    at Parser.parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:14957:10)\n    at parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:15009:38)\n    at parser (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/parser/index.js:52:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/normalize-file.js:87:38)\n    at normalizeFile.next (<anonymous>)\n    at run (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/index.js:29:50)\n    at run.next (<anonymous>)\n    at Function.transform (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transform.js:25:41)\n    at transform.next (<anonymous>)\n    at step (/Users/david/Programming/saito-lite-rust/node_modules/gensync/index.js:261:32)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /Users/david/Programming/saito-lite-rust/bundler/default/mods/imperium/src/imperium-player.js: Missing semicolon. (2:22)\n\n[0m [90m 1 |[39m[0m\n[0m[31m[1m>[22m[39m[90m 2 |[39m returnPlayers(num [33m=[39m [35m0[39m) {[0m\n[0m [90m   |[39m                       [31m[1m^[22m[39m[0m\n[0m [90m 3 |[39m[0m\n[0m [90m 4 |[39m   [36mvar[39m players [33m=[39m [][33m;[39m[0m\n[0m [90m 5 |[39m[0m\n    at Parser._raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:541:17)\n    at Parser.raiseWithData (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:534:17)\n    at Parser.raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:495:17)\n    at Parser.semicolon (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:3530:10)\n    at Parser.parseExpressionStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13832:10)\n    at Parser.parseStatementContent (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13423:19)\n    at Parser.parseStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13285:17)\n    at Parser.parseBlockOrModuleBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13874:25)\n    at Parser.parseBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13865:10)\n    at Parser.parseProgram (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13207:10)\n    at Parser.parseTopLevel (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13198:25)\n    at Parser.parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:14957:10)\n    at parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:15009:38)\n    at parser (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/parser/index.js:52:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/normalize-file.js:87:38)\n    at normalizeFile.next (<anonymous>)\n    at run (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/index.js:29:50)\n    at run.next (<anonymous>)\n    at Function.transform (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transform.js:25:41)\n    at transform.next (<anonymous>)\n    at step (/Users/david/Programming/saito-lite-rust/node_modules/gensync/index.js:261:32)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /Users/david/Programming/saito-lite-rust/bundler/default/mods/imperium/src/imperium-promissary.js: Missing semicolon. (2:25)\n\n[0m [90m 1 |[39m   [0m\n[0m[31m[1m>[22m[39m[90m 2 |[39m   returnPromissaryNotes() {[0m\n[0m [90m   |[39m                          [31m[1m^[22m[39m[0m\n[0m [90m 3 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mpromissary_notes[33m;[39m[0m\n[0m [90m 4 |[39m   }[0m\n[0m [90m 5 |[39m   [0m\n    at Parser._raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:541:17)\n    at Parser.raiseWithData (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:534:17)\n    at Parser.raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:495:17)\n    at Parser.semicolon (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:3530:10)\n    at Parser.parseExpressionStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13832:10)\n    at Parser.parseStatementContent (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13423:19)\n    at Parser.parseStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13285:17)\n    at Parser.parseBlockOrModuleBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13874:25)\n    at Parser.parseBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13865:10)\n    at Parser.parseProgram (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13207:10)\n    at Parser.parseTopLevel (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13198:25)\n    at Parser.parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:14957:10)\n    at parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:15009:38)\n    at parser (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/parser/index.js:52:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/normalize-file.js:87:38)\n    at normalizeFile.next (<anonymous>)\n    at run (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/index.js:29:50)\n    at run.next (<anonymous>)\n    at Function.transform (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transform.js:25:41)\n    at transform.next (<anonymous>)\n    at step (/Users/david/Programming/saito-lite-rust/node_modules/gensync/index.js:261:32)")},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /Users/david/Programming/saito-lite-rust/bundler/default/mods/imperium/src/imperium-start.js: Unexpected token (84:0)\n\n[0m [90m 82 |[39m console[33m.[39mlog([32m"INITIALIZE GAME OBJECTS"[39m)[33m;[39m[0m\n[0m [90m 83 |[39m[0m\n[0m[31m[1m>[22m[39m[90m 84 |[39m[0m\n[0m [90m    |[39m [31m[1m^[22m[39m[0m\n    at Parser._raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:541:17)\n    at Parser.raiseWithData (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:534:17)\n    at Parser.raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:495:17)\n    at Parser.unexpected (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:3560:16)\n    at Parser.parseExprAtom (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11980:22)\n    at Parser.parseExprSubscripts (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11541:23)\n    at Parser.parseUpdate (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11521:21)\n    at Parser.parseMaybeUnary (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11496:23)\n    at Parser.parseMaybeUnaryOrPrivate (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11310:61)\n    at Parser.parseExprOps (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11317:23)\n    at Parser.parseMaybeConditional (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11287:23)\n    at Parser.parseMaybeAssign (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11250:21)\n    at Parser.parseExpressionBase (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11186:23)\n    at /Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11180:39\n    at Parser.allowInAnd (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13068:16)\n    at Parser.parseExpression (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:11180:17)\n    at Parser.parseStatementContent (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13418:23)\n    at Parser.parseStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13285:17)\n    at Parser.parseBlockOrModuleBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13874:25)\n    at Parser.parseBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13865:10)\n    at Parser.parseBlock (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13849:10)\n    at Parser.parseFunctionBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:12728:24)')},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /Users/david/Programming/saito-lite-rust/bundler/default/mods/imperium/src/imperium-state.js: Missing semicolon. (2:15)\n\n[0m [90m 1 |[39m[0m\n[0m[31m[1m>[22m[39m[90m 2 |[39m   returnState() {[0m\n[0m [90m   |[39m                [31m[1m^[22m[39m[0m\n[0m [90m 3 |[39m  [0m\n[0m [90m 4 |[39m     [36mlet[39m state [33m=[39m {}[33m;[39m[0m\n[0m [90m 5 |[39m  [0m\n    at Parser._raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:541:17)\n    at Parser.raiseWithData (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:534:17)\n    at Parser.raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:495:17)\n    at Parser.semicolon (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:3530:10)\n    at Parser.parseExpressionStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13832:10)\n    at Parser.parseStatementContent (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13423:19)\n    at Parser.parseStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13285:17)\n    at Parser.parseBlockOrModuleBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13874:25)\n    at Parser.parseBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13865:10)\n    at Parser.parseProgram (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13207:10)\n    at Parser.parseTopLevel (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13198:25)\n    at Parser.parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:14957:10)\n    at parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:15009:38)\n    at parser (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/parser/index.js:52:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/normalize-file.js:87:38)\n    at normalizeFile.next (<anonymous>)\n    at run (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/index.js:29:50)\n    at run.next (<anonymous>)\n    at Function.transform (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transform.js:25:41)\n    at transform.next (<anonymous>)\n    at step (/Users/david/Programming/saito-lite-rust/node_modules/gensync/index.js:261:32)")},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /Users/david/Programming/saito-lite-rust/bundler/default/mods/imperium/src/imperium-state-checks.js: Missing semicolon. (7:23)\n\n[0m [90m  5 |[39m   [90m// Return Factions //[39m[0m\n[0m [90m  6 |[39m   [90m/////////////////////[39m[0m\n[0m[31m[1m>[22m[39m[90m  7 |[39m   returnFaction(player) {[0m\n[0m [90m    |[39m                        [31m[1m^[22m[39m[0m\n[0m [90m  8 |[39m     [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayers_info[player[33m-[39m[35m1[39m] [33m==[39m [36mnull[39m) { [36mreturn[39m [32m"Unknown"[39m[33m;[39m }[0m\n[0m [90m  9 |[39m     [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayers_info[player[33m-[39m[35m1[39m] [33m==[39m undefined) { [36mreturn[39m [32m"Unknown"[39m[33m;[39m }[0m\n[0m [90m 10 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mreturnFactionName([36mthis[39m[33m,[39m player)[33m;[39m[0m\n    at Parser._raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:541:17)\n    at Parser.raiseWithData (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:534:17)\n    at Parser.raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:495:17)\n    at Parser.semicolon (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:3530:10)\n    at Parser.parseExpressionStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13832:10)\n    at Parser.parseStatementContent (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13423:19)\n    at Parser.parseStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13285:17)\n    at Parser.parseBlockOrModuleBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13874:25)\n    at Parser.parseBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13865:10)\n    at Parser.parseProgram (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13207:10)\n    at Parser.parseTopLevel (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13198:25)\n    at Parser.parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:14957:10)\n    at parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:15009:38)\n    at parser (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/parser/index.js:52:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/normalize-file.js:87:38)\n    at normalizeFile.next (<anonymous>)\n    at run (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/index.js:29:50)\n    at run.next (<anonymous>)\n    at Function.transform (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transform.js:25:41)\n    at transform.next (<anonymous>)\n    at step (/Users/david/Programming/saito-lite-rust/node_modules/gensync/index.js:261:32)')},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /Users/david/Programming/saito-lite-rust/bundler/default/mods/imperium/src/imperium-state-updates.js: Missing semicolon. (10:20)\n\n[0m [90m  8 |[39m   [90m// available.[39m[0m\n[0m [90m  9 |[39m   [90m//[39m[0m\n[0m[31m[1m>[22m[39m[90m 10 |[39m   resetTechBonuses() {[0m\n[0m [90m    |[39m                     [31m[1m^[22m[39m[0m\n[0m [90m 11 |[39m[0m\n[0m [90m 12 |[39m     [36mlet[39m technologies [33m=[39m [36mthis[39m[33m.[39mreturnTechnology()[33m;[39m[0m\n[0m [90m 13 |[39m[0m\n    at Parser._raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:541:17)\n    at Parser.raiseWithData (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:534:17)\n    at Parser.raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:495:17)\n    at Parser.semicolon (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:3530:10)\n    at Parser.parseExpressionStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13832:10)\n    at Parser.parseStatementContent (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13423:19)\n    at Parser.parseStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13285:17)\n    at Parser.parseBlockOrModuleBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13874:25)\n    at Parser.parseBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13865:10)\n    at Parser.parseProgram (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13207:10)\n    at Parser.parseTopLevel (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13198:25)\n    at Parser.parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:14957:10)\n    at parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:15009:38)\n    at parser (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/parser/index.js:52:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/normalize-file.js:87:38)\n    at normalizeFile.next (<anonymous>)\n    at run (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/index.js:29:50)\n    at run.next (<anonymous>)\n    at Function.transform (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transform.js:25:41)\n    at transform.next (<anonymous>)\n    at step (/Users/david/Programming/saito-lite-rust/node_modules/gensync/index.js:261:32)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /Users/david/Programming/saito-lite-rust/bundler/default/mods/imperium/src/imperium-strategy-cards.js: Missing semicolon. (8:23)\n\n[0m [90m  6 |[39m   [90m// in any particular round.[39m[0m\n[0m [90m  7 |[39m   [90m//[39m[0m\n[0m[31m[1m>[22m[39m[90m  8 |[39m   returnStrategyCards() {[0m\n[0m [90m    |[39m                        [31m[1m^[22m[39m[0m\n[0m [90m  9 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mstrategy_cards[33m;[39m[0m\n[0m [90m 10 |[39m   }[0m\n[0m [90m 11 |[39m   [0m\n    at Parser._raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:541:17)\n    at Parser.raiseWithData (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:534:17)\n    at Parser.raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:495:17)\n    at Parser.semicolon (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:3530:10)\n    at Parser.parseExpressionStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13832:10)\n    at Parser.parseStatementContent (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13423:19)\n    at Parser.parseStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13285:17)\n    at Parser.parseBlockOrModuleBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13874:25)\n    at Parser.parseBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13865:10)\n    at Parser.parseProgram (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13207:10)\n    at Parser.parseTopLevel (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13198:25)\n    at Parser.parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:14957:10)\n    at parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:15009:38)\n    at parser (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/parser/index.js:52:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/normalize-file.js:87:38)\n    at normalizeFile.next (<anonymous>)\n    at run (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/index.js:29:50)\n    at run.next (<anonymous>)\n    at Function.transform (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transform.js:25:41)\n    at transform.next (<anonymous>)\n    at step (/Users/david/Programming/saito-lite-rust/node_modules/gensync/index.js:261:32)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /Users/david/Programming/saito-lite-rust/bundler/default/mods/imperium/src/imperium-tech.js: Missing semicolon. (17:20)\n\n[0m [90m 15 |[39m   [90m// returnCardImage(cardkey) --\x3e returns image of card[39m[0m\n[0m [90m 16 |[39m   [90m//[39m[0m\n[0m[31m[1m>[22m[39m[90m 17 |[39m   returnTechnology() {[0m\n[0m [90m    |[39m                     [31m[1m^[22m[39m[0m\n[0m [90m 18 |[39m     [36mreturn[39m [36mthis[39m[33m.[39mtech[33m;[39m[0m\n[0m [90m 19 |[39m   }[0m\n[0m [90m 20 |[39m   [0m\n    at Parser._raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:541:17)\n    at Parser.raiseWithData (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:534:17)\n    at Parser.raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:495:17)\n    at Parser.semicolon (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:3530:10)\n    at Parser.parseExpressionStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13832:10)\n    at Parser.parseStatementContent (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13423:19)\n    at Parser.parseStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13285:17)\n    at Parser.parseBlockOrModuleBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13874:25)\n    at Parser.parseBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13865:10)\n    at Parser.parseProgram (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13207:10)\n    at Parser.parseTopLevel (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13198:25)\n    at Parser.parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:14957:10)\n    at parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:15009:38)\n    at parser (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/parser/index.js:52:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/normalize-file.js:87:38)\n    at normalizeFile.next (<anonymous>)\n    at run (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/index.js:29:50)\n    at run.next (<anonymous>)\n    at Function.transform (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transform.js:25:41)\n    at transform.next (<anonymous>)\n    at step (/Users/david/Programming/saito-lite-rust/node_modules/gensync/index.js:261:32)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /Users/david/Programming/saito-lite-rust/bundler/default/mods/imperium/src/imperium-ui.js: Missing semicolon. (5:15)\n\n[0m [90m 3 |[39m [90m// manually add arcade banner support[39m[0m\n[0m [90m 4 |[39m [90m//[39m[0m\n[0m[31m[1m>[22m[39m[90m 5 |[39m respondTo(type) {[0m\n[0m [90m   |[39m                [31m[1m^[22m[39m[0m\n[0m [90m 6 |[39m[0m\n[0m [90m 7 |[39m   [36mif[39m ([36msuper[39m[33m.[39mrespondTo(type) [33m!=[39m [36mnull[39m) {[0m\n[0m [90m 8 |[39m     [36mreturn[39m [36msuper[39m[33m.[39mrespondTo(type)[33m;[39m[0m\n    at Parser._raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:541:17)\n    at Parser.raiseWithData (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:534:17)\n    at Parser.raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:495:17)\n    at Parser.semicolon (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:3530:10)\n    at Parser.parseExpressionStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13832:10)\n    at Parser.parseStatementContent (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13423:19)\n    at Parser.parseStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13285:17)\n    at Parser.parseBlockOrModuleBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13874:25)\n    at Parser.parseBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13865:10)\n    at Parser.parseProgram (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13207:10)\n    at Parser.parseTopLevel (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13198:25)\n    at Parser.parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:14957:10)\n    at parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:15009:38)\n    at parser (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/parser/index.js:52:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/normalize-file.js:87:38)\n    at normalizeFile.next (<anonymous>)\n    at run (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/index.js:29:50)\n    at run.next (<anonymous>)\n    at Function.transform (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transform.js:25:41)\n    at transform.next (<anonymous>)\n    at step (/Users/david/Programming/saito-lite-rust/node_modules/gensync/index.js:261:32)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /Users/david/Programming/saito-lite-rust/bundler/default/mods/imperium/src/imperium-unit.js: Missing semicolon. (3:15)\n\n[0m [90m 1 |[39m   [0m\n[0m [90m 2 |[39m   [0m\n[0m[31m[1m>[22m[39m[90m 3 |[39m   returnUnits() {[0m\n[0m [90m   |[39m                [31m[1m^[22m[39m[0m\n[0m [90m 4 |[39m     [36mreturn[39m [36mthis[39m[33m.[39munits[33m;[39m[0m\n[0m [90m 5 |[39m   }[0m\n[0m [90m 6 |[39m   [0m\n    at Parser._raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:541:17)\n    at Parser.raiseWithData (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:534:17)\n    at Parser.raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:495:17)\n    at Parser.semicolon (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:3530:10)\n    at Parser.parseExpressionStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13832:10)\n    at Parser.parseStatementContent (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13423:19)\n    at Parser.parseStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13285:17)\n    at Parser.parseBlockOrModuleBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13874:25)\n    at Parser.parseBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13865:10)\n    at Parser.parseProgram (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13207:10)\n    at Parser.parseTopLevel (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13198:25)\n    at Parser.parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:14957:10)\n    at parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:15009:38)\n    at parser (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/parser/index.js:52:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/normalize-file.js:87:38)\n    at normalizeFile.next (<anonymous>)\n    at run (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/index.js:29:50)\n    at run.next (<anonymous>)\n    at Function.transform (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transform.js:25:41)\n    at transform.next (<anonymous>)\n    at step (/Users/david/Programming/saito-lite-rust/node_modules/gensync/index.js:261:32)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /Users/david/Programming/saito-lite-rust/bundler/default/mods/imperium/src/imperium-universe.js: Missing semicolon. (5:17)\n\n[0m [90m 3 |[39m   [90m// Return Planets //[39m[0m\n[0m [90m 4 |[39m   [90m////////////////////[39m[0m\n[0m[31m[1m>[22m[39m[90m 5 |[39m   returnPlanets() {[0m\n[0m [90m   |[39m                  [31m[1m^[22m[39m[0m\n[0m [90m 6 |[39m   [0m\n[0m [90m 7 |[39m     [36mvar[39m planets [33m=[39m {}[33m;[39m[0m\n[0m [90m 8 |[39m   [0m\n    at Parser._raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:541:17)\n    at Parser.raiseWithData (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:534:17)\n    at Parser.raise (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:495:17)\n    at Parser.semicolon (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:3530:10)\n    at Parser.parseExpressionStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13832:10)\n    at Parser.parseStatementContent (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13423:19)\n    at Parser.parseStatement (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13285:17)\n    at Parser.parseBlockOrModuleBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13874:25)\n    at Parser.parseBlockBody (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13865:10)\n    at Parser.parseProgram (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13207:10)\n    at Parser.parseTopLevel (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:13198:25)\n    at Parser.parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:14957:10)\n    at parse (/Users/david/Programming/saito-lite-rust/node_modules/@babel/parser/lib/index.js:15009:38)\n    at parser (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/parser/index.js:52:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/normalize-file.js:87:38)\n    at normalizeFile.next (<anonymous>)\n    at run (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transformation/index.js:29:50)\n    at run.next (<anonymous>)\n    at Function.transform (/Users/david/Programming/saito-lite-rust/node_modules/@babel/core/lib/transform.js:25:41)\n    at transform.next (<anonymous>)\n    at step (/Users/david/Programming/saito-lite-rust/node_modules/gensync/index.js:261:32)")},function(e,t){this.importSecretObjective("military-catastrophe",{name:"Military Catastrophe",text:"Destroy the flagship of another player",type:"secret",phase:"action",onNewTurn:function(e,t,r){return e.game.state.secret_objective_military_catastrophe=0,0},spaceCombatRoundEnd:function(e,t,r,n){return e.game.players_info[e.game.player-1].units_i_destroyed_this_combat_round.includes("flagship")&&(e.game.state.secret_objective_military_catastrophe=1),0},groundCombatRoundEnd:function(e,t,r,n,a){return 0},canPlayerScoreVictoryPoints:function(e,t){return 1==e.game.state.secret_objective_military_catastrophe?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("flagship-dominance",{name:"Blood Christening",text:"Achieve victory in a space combat in a system containing your flagship. Your flagship must survive this combat",type:"secret",phase:"action",onNewTurn:function(e,t,r){return e.game.state.secret_objective_flagship_dominance=0,0},spaceCombatRoundEnd:function(e,t,r,n){if(e.doesSectorContainPlayerUnit(e.game.player,n,"flagship")){var a=e.returnSectorAndPlanets(n);0==a.s.units[r-1].length&&t==e.game.player&&a.s.units[t-1].length>0&&(e.game.state.secret_objective_flagship_dominance=1),0==a.s.units[t-1].length&&r==e.game.player&&a.s.units[r-1].length>0&&(e.game.state.secret_objective_flagship_dominance=1)}return 0},canPlayerScoreVictoryPoints:function(e,t){return 1==e.game.state.secret_objective_flagship_dominance?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("nuke-them-from-orbit",{name:"Nuke them from Orbit",text:"Destroy the last of a player's ground forces using bombardment",type:"secret",phase:"action",onNewTurn:function(e,t,r){return e.game.state.secret_objective_nuke_from_orbit=0,e.game.state.secret_objective_nuke_from_orbit_how_many_got_nuked=0,0},bombardmentTriggers:function(e,t,r,n,a){e.game.state.secret_objective_nuke_from_orbit_how_many_got_nuked=0;for(var i=e.returnSectorAndPlanets(n).p[a],o=e.returnInfantryOnPlanet(i),s=0;s<i.units.length;s++)i.units[s].length>0&&s+1!=r&&(defender=s+1,e.game.state.secret_objective_nuke_from_orbit_how_many_got_nuked=o);return 0},planetaryDefenseTriggers:function(e,t,r,n){if(e.game.state.secret_objective_nuke_from_orbit_how_many_got_nuked>0){var a=e.returnSectorAndPlanets(r).p[n];0==e.returnInfantryOnPlanet(a)&&(e.game.state.secret_objective_nuke_from_orbit_how_many_got_nuked=1)}return 0},canPlayerScoreVictoryPoints:function(e,t){return 1==e.game.state.secret_objective_nuke_from_orbit?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("anti-imperialism",{name:"Anti-Imperialism",text:"Achieve victory in combat with a player with the most VP",type:"secret",phase:"action",onNewTurn:function(e,t,r){return e.game.state.secret_objective_anti_imperialism=0,0},spaceCombatRoundEnd:function(e,t,r,n){e.game.state.secret_objective_anti_imperialism=0;var a=e.returnSectorAndPlanets(n),i=e.returnPlayersWithHighestVP();return e.game.player==t&&0==a.s.units[r-1].length&&a.s.units[t-1].length>0&&0==e.hasUnresolvedSpaceCombat(t,n)&&i.includes(r)&&(e.game.state.secret_objective_anti_imperialism=1),e.game.player==r&&0==a.s.units[t-1].length&&a.s.units[r-1].length>0&&0==e.hasUnresolvedSpaceCombat(r,n)&&i.includes(t)&&(e.game.state.secret_objective_anti_imperialism=1),0},groundCombatRoundEnd:function(e,t,r,n,a){var i=e.returnSectorAndPlanets(n).p[a],o=e.returnPlayersWithHighestVP();return e.game.player==t&&i.units[t-1].length>0&&0==i.units[r-1].length&&o.includes(r)&&(e.game.state.secret_objective_anti_imperialism=1),e.game.player==r&&i.units[r-1].length>0&&0==i.units[t-1].length&&o.includes(t)&&(e.game.state.secret_objective_anti_imperialism=1),0},canPlayerScoreVictoryPoints:function(e,t){return 1==e.game.state.secret_objective_anti_imperialism?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("end-their-suffering",{name:"End Their Suffering",text:"Eliminate a player with the lowest VP from the board in Space or Ground Combat",type:"secret",phase:"action",onNewTurn:function(e,t,r){return e.game.state.secret_objective_end_their_suffering=0,0},spaceCombatRoundEnd:function(e,t,r,n){var a=e.returnSectorAndPlanets(n),i=e.returnPlayersWithLowestVP();if(e.game.player==t&&0==a.s.units[r-1].length&&i.includes(r)){for(var o in e.game.sectors)if(e.game.sectors[o].units[r-1].length>0)return;for(var s in e.game.planets)if(e.game.planets[s].units[r-1].length>0)return;e.game.state.secret_objective_end_their_suffering=1}if(e.game.player==r&&0==a.s.units[t-1].length&&i.includes(t)){for(var c in e.game.sectors)if(e.game.sectors[c].units[t-1].length>0)return;for(var l in e.game.planets)if(e.game.planets[l].units[t-1].length>0)return;e.game.state.secret_objective_end_their_suffering=1}return 0},groundCombatRoundEnd:function(e,t,r,n,a){var i=e.returnSectorAndPlanets(n).p[a],o=e.returnPlayersWithLowestVP();if(e.game.player==t&&0==i.units[r-1].length&&o.includes(r)){for(var s in e.game.sectors)if(e.game.sectors[s].units[r-1].length>0)return;for(var c in e.game.planets)if(e.game.planets[c].units[r-1].length>0)return;e.game.state.secret_objective_end_their_suffering=1}if(e.game.player==r&&0==i.units[t-1].length&&o.includes(t)){for(var l in e.game.sectors)if(e.game.sectors[l].units[t-1].length>0)return;for(var u in e.game.planets)if(e.game.planets[u].units[t-1].length>0)return;e.game.state.secret_objective_end_their_suffering=1}return 0},canPlayerScoreVictoryPoints:function(e,t){return 1==e.game.state.secret_objective_end_their_suffering?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("establish-a-blockade",{name:"Establish a Blockade",text:"Have at least 1 ship in the same sector as an opponent's spacedock",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var r in e.game.sectors)if(e.game.sectors[r].units[t-1].length>0)for(var n=e.returnSectorAndPlanets(r),a=0;a<n.p.length;a++)for(var i=0;i<n.p[a].units.length;i++)if(i+1!=t)for(var o=0;o<n.p[a].units[i].length;o++)if("spacedock"===n.p[a].units[i][o].type)return 1;return 0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("close-the-trap",{name:"Close the Trap",text:"Destroy another player's last ship in a system using a PDS",type:"secret",phase:"action",onNewTurn:function(e,t,r){return e.game.state.secret_objective_close_the_trap=0,e.game.state.secret_objective_close_the_trap_pds_fired=0,0},modifyPDSRoll:function(e,t,r,n){t==e.game.player&&(e.game.state.secret_objective_close_the_trap_pds_fired=1),r==e.game.player&&(e.game.state.secret_objective_close_the_trap_pds_fired=1)},modifySpaceCombatRoll:function(e,t,r,n){e.game.state.secret_objective_close_the_trap_pds_fired=0},spaceCombatRoundEnd:function(e,t,r,n){var a=e.returnSectorAndPlanets(n);return e.game.player==t&&a.s.units[t-1].length>0&&0==e.hasUnresolvedSpaceCombat(t,n)&&1==e.game.state.secret_objective_close_the_trap_pds_fired&&(e.game.state.secret_objective_close_the_trap=1,e.game.state.secret_objective_close_the_trap_pds_fired=1),e.game.player==r&&a.s.units[r-1].length>0&&0==e.hasUnresolvedSpaceCombat(r,n)&&1==e.game.state.secret_objective_close_the_trap_pds_fired&&(e.game.state.secret_objective_close_the_trap=1,e.game.state.secret_objective_close_the_trap_pds_fired=1),0},canPlayerScoreVictoryPoints:function(e,t){return 1==e.game.state.secret_objective_close_the_trap?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("galactic-observer",{name:"Galactic Observer",text:"Have at least 1 ship in 6 different sectors",type:"secret",canPlayerScoreVictoryPoints:function(e,t){var r=0;for(var n in e.game.board){var a=e.game.board[n].tile;e.doesSectorContainPlayerShip(t,a)&&r++}return r>5?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("master-of-the-ion-cannon",{name:"Master Cannoneer",text:"Have at least 4 PDS units in play",type:"secret",canPlayerScoreVictoryPoints:function(e,t){var r=0;for(var n in e.game.planets)for(var a=e.game.planets[n],i=0;i<a.units[t-1].length;i++)"pds"==a.units[t-1][i].type&&r++;return r>3?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("war-engine",{name:"War Engine",text:"Have three spacedocks in play",type:"secret",canPlayerScoreVictoryPoints:function(e,t){var r=0;for(var n in e.game.planets)for(var a=e.game.planets[n],i=0;i<a.units[t-1].length;i++)"spacedock"==a.units[t-1][i].type&&r++;return r>2?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("wormhole-administrator",{name:"Wormhole Administrator",text:"Have at least 1 ship in systems containing alpha and beta wormholes respectively",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var r=e.returnSectorsWithPlayerShips(t),n=0,a=0,i=0;i<r.length;i++)1==e.game.sectors[r[i]].wormhole&&(n=1),2==e.game.sectors[r[i]].wormhole&&(a=1);return 1==n&&1==a?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("fleet-of-terror",{name:"Fleet of Terror",text:"Have five dreadnaughts in play",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var r=0,n=e.returnSectorsWithPlayerShips(t),a=0;a<n.length;a++)for(var i=0;i<e.game.sectors[n[a]].units[t-1].length;i++)"dreadnaught"===e.game.sectors[n[a]].units[t-1][i].type&&r++;return r>=5?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("cultural-diplomacy",{name:"Cultural Diplomacy",text:"Control at least 4 cultural planets",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var r=0,n=e.returnPlayerPlanetCards(t),a=0;a<n.length;a++)"cultural"===e.game.planets[n[a]].type&&r++;return r>=4?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("act-of-espionage",{name:"Act of Espionage",text:"Discard five action cards from your hard",type:"secret",canPlayerScoreVictoryPoints:function(e,t){return e.returnPlayerActionCards(t).length>=5?1:0},scoreObjective:function(e,t,r){e.game.player==t?e.playerDiscardActionCards(5,(function(){r(1)})):r(0)}}),this.importSecretObjective("space-to-breathe",{name:"Space to Breathe",text:"Have at least 1 ship in 3 systems with no planets",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var r=e.returnSectorsWithPlayerShips(t),n=0,a=0;a<r.length;a++)0==e.game.sectors[r[a]].planets.length&&n++;return n>=3?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("ascendant-technocracy",{name:"Ascendant Technocracy",text:"Research 4 tech upgrades on the same color path",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var r=e.game.players_info[t-1].tech,n=0,a=0,i=0,o=0,s=0;s<r.length;s++)"blue"==e.tech[r[s]].color&&a++,"red"==e.tech[r[s]].color&&i++,"yellow"==e.tech[r[s]].color&&o++,"green"==e.tech[r[s]].color&&n++;return a>=4||o>=4||i>=4||n>=4?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("penal-colonies",{name:"Penal Colonies",text:"Control four planets with hazardous conditions",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var r=0,n=e.returnPlayerPlanetCards(t),a=0;a<n.length;a++)"hazardous"===e.game.planets[n[a]].type&&r++;return r>=4?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("master-of-production",{name:"Master of Production",text:"Control four planets with industrial civilizations",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var r=0,n=e.returnPlayerPlanetCards(t),a=0;a<n.length;a++)"industrial"===e.game.planets[n[a]].type&&r++;return r>=4?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("faction-technologies",{name:"Faction Technologies",text:"Research 2 faction technologies",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var r=e.game.players_info[t-1].tech,n=0,a=0;a<r.length;a++)"special"==e.tech[r[a]].type&&0==r[a].indexOf("faction")&&n++;return n>=2?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("occupy-new-byzantium",{name:"Occupy New Byzantium",text:"Control New Byzantium and have at least 3 ships protecting the sector",type:"secret",canPlayerScoreVictoryPoints:function(e,t){return e.game.planets["new-byzantium"].owner==t&&e.game.sectors["new-byzantium"].units[t-1].length>=3?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importSecretObjective("cast-a-long-shadow",{name:"Cast a Long Shadow",text:"Have at least 1 ship in a system adjacent to an opponent homeworld",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var r=e.returnHomeworldSectors(e.game.players_info.length),n=[],a=0;a<r.length;a++)e.game.board[r[a]].tile!=e.game.board[e.game.players_info[t-1].homeworld].tile&&n.push(e.game.board[r[a]].tile);for(var i=0;i<n.length;i++)if(e.isPlayerAdjacentToSector(t,n[i]))return 1;return 0},scoreObjective:function(e,t,r){r(1)}})},function(e,t){this.importStageIPublicObjective("planetary-unity",{name:"Planetary Unity",img:"/imperium/img/objective_card_1_template.png",text:"Control four planets of the same planet type",canPlayerScoreVictoryPoints:function(e,t){for(var r=0,n=0,a=0,i=e.returnPlayerPlanetCards(t),o=0;o<i.length;o++){e.game.planets[i[o]];"hazardous"===e.game.planets[i[o]].type&&r++,"industrial"===e.game.planets[i[o]].type&&a++,"cultural"===e.game.planets[i[o]].type&&n++}return r>=4||n>=4||a>=4?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importStageIPublicObjective("forge-of-war",{name:"Forge of War",img:"/imperium/img/objective_card_1_template.png",text:"Research 2 unit upgrade technologies",canPlayerScoreVictoryPoints:function(e,t){for(var r=e.game.players_info[t-1].tech,n=0,a=0;a<r.length;a++)1==e.tech[r[a]].unit&&n++;return n>=2?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importStageIPublicObjective("diversified-research",{name:"Diversified Research",img:"/imperium/img/objective_card_1_template.png",text:"Research 2 technologies in two different color paths",canPlayerScoreVictoryPoints:function(e,t){for(var r=e.game.players_info[t-1].tech,n=0,a=0,i=0,o=0,s=0;s<r.length;s++)"blue"==e.tech[r[s]].color&&a++,"red"==e.tech[r[s]].color&&i++,"yellow"==e.tech[r[s]].color&&o++,"green"==e.tech[r[s]].color&&n++;var c=0;return a>=2&&c++,o>=2&&c++,i>=2&&c++,n>=2&&c++,c>=2?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importStageIPublicObjective("mining-conglomerate",{name:"Mining Conglomerate",img:"/imperium/img/objective_card_1_template.png",text:"Spend eight resources when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.returnAvailableResources(t)>=8?1:0},scoreObjective:function(e,t,r){e.game.player==t?e.playerSelectResources(8,(function(e){r(e)})):r(0)}}),this.importStageIPublicObjective("conquest-of-science",{name:"Conquest of Science",minPlayers:4,img:"/imperium/img/objective_card_1_template.png",text:"Control 3 planets with tech specialities",canPlayerScoreVictoryPoints:function(e,t){for(var r=0,n=e.returnPlayerPlanetCards(t),a=0;a<n.length;a++)"red"==n[a].bonus&&r++,"blue"==n[a].bonus&&r++,"green"==n[a].bonus&&r++,"yellow"==n[a].bonus&&r++;return r>=3?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importStageIPublicObjective("colonization",{name:"Colonization",img:"/imperium/img/objective_card_1_template.png",text:"Control six planets outside your home system",canPlayerScoreVictoryPoints:function(e,t){for(var r=0,n=0,a=0,i=0,o=e.returnPlayerPlanetCards(t),s=0;s<o.length;s++)"hazardous"===e.game.planets[o[s]].type&&r++,"industrial"===e.game.planets[o[s]].type&&a++,"cultural"===e.game.planets[o[s]].type&&n++,"diplomatic"===e.game.planets[o[s]].type&&i++;return n+r+a+i>=6?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importStageIPublicObjective("grand-gesture",{name:"A Grand Gesture",img:"/imperium/img/objective_card_1_template.png",text:"Spend 3 command or strategy tokens when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.game.players_info[t-1].strategy_tokens+e.game.players_info[t-1].command_tokens>=3?1:0},scoreObjective:function(e,t,r){e.game.player==t?e.playerSelectStrategyAndCommandTokens(3,(function(e){r(e)})):r(0)}}),this.importStageIPublicObjective("establish-trade-outposts",{name:"Establish Trade Outposts",img:"/imperium/img/objective_card_1_template.png",text:"Spend 5 trade goods when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.returnAvailableTradeGoods(t)>=5?1:0},scoreObjective:function(e,t,r){e.game.players_info[t-1].goods-=5,e.displayFactionDashboard(),r(1)}}),this.importStageIPublicObjective("pecuniary-diplomacy",{name:"Pecuniary Diplomacy",img:"/imperium/img/objective_card_1_template.png",text:"Spend 8 influence when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.returnAvailableInfluence(t)>=8?1:0},scoreObjective:function(e,t,r){e.game.player==t?e.playerSelectInfluence(8,(function(e){r(e)})):r(0)}})},function(e,t){this.importStageIIPublicObjective("master-of-commerce",{name:"Master of Commerce",img:"/imperium/img/objective_card_2_template.png",text:"Spend 10 trade goods when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.returnAvailableTradeGoods(t)>=10?1:0},scoreObjective:function(e,t,r){e.game.players_info[t-1].goods-=10,e.displayFactionDashboard(),r(1)}}),this.importStageIIPublicObjective("display-of-dominance",{name:"Display of Dominance",img:"/imperium/img/objective_card_2_template.png",text:"Control at least 1 planet in another player's home sector",canPlayerScoreVictoryPoints:function(e,t){for(var r=[],n=0;n<e.game.players_info.length;n++)for(var a=e.game.board[e.game.players_info[t-1].homeworld].tile,i=e.returnSectorAndPlanets(a),o=0;o<i.p.length;o++)r.push(i.p[o].name);for(var s=e.returnPlayerPlanetCards(t),c=0;c<s.length;c++)if(r.includes(s[c].name))return 1;return 0},scoreObjective:function(e,t,r){r(1)}}),this.importStageIIPublicObjective("technological-empire",{name:"Technological Empire",minPlayers:4,img:"/imperium/img/objective_card_2_template.png",text:"Control 5 planets with tech bonuses",canPlayerScoreVictoryPoints:function(e,t){for(var r=0,n=e.returnPlayerPlanetCards(t),a=0;a<n.length;a++)"red"==n[a].bonus&&r++,"blue"==n[a].bonus&&r++,"green"==n[a].bonus&&r++,"yellow"==n[a].bonus&&r++;return r>=3?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importStageIIPublicObjective("establish-galactic-currency",{name:"Establish Galactic Currency",img:"/imperium/img/objective_card_2_template.png",text:"Spend 16 resources when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.returnAvailableResources(t)>=16?1:0},scoreObjective:function(e,t,r){e.game.player==t?e.playerSelectResources(16,(function(e){r(e)})):r(0)}}),this.importStageIIPublicObjective("master-of-science",{name:"Master of Science",img:"/imperium/img/objective_card_2_template.png",text:"Own 2 tech upgrades in each of 4 tech color paths",canPlayerScoreVictoryPoints:function(e,t){for(var r=e.game.players_info[t-1].tech,n=0,a=0,i=0,o=0,s=0;s<r.length;s++)"blue"==e.tech[r[s]].color&&a++,"red"==e.tech[r[s]].color&&i++,"yellow"==e.tech[r[s]].color&&o++,"green"==e.tech[r[s]].color&&n++;var c=0;return a>=2&&c++,o>=2&&c++,i>=2&&c++,n>=2&&c++,c>=4?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importStageIIPublicObjective("imperial-unity",{name:"Imperial Unity",img:"/imperium/img/objective_card_2_template.png",text:"Control 6 planets of the same planet type",canPlayerScoreVictoryPoints:function(e,t){for(var r=0,n=0,a=0,i=0,o=e.returnPlayerPlanetCards(t),s=0;s<o.length;s++)"hazardous"===e.game.planets[o[s]].type&&r++,"industrial"===e.game.planets[o[s]].type&&a++,"cultural"===e.game.planets[o[s]].type&&n++,"diplomatic"===e.game.planets[o[s]].type&&i++;return r>=6||n>=6||a>=6||i>=6?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importStageIIPublicObjective("advanced-technologies",{name:"Advanced Technologies",img:"/imperium/img/objective_card_2_template.png",text:"Research 3 unit upgrade technologies",canPlayerScoreVictoryPoints:function(e,t){for(var r=e.game.players_info[t-1].tech,n=0,a=0;a<r.length;a++)1==e.tech[r[a]].unit&&n++;return n>=3?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importStageIIPublicObjective("colonial-dominance",{name:"Colonial Dominance",img:"/imperium/img/objective_card_2_template.png",text:"Control 11 planets outside your home system",canPlayerScoreVictoryPoints:function(e,t){for(var r=0,n=0,a=0,i=0,o=e.returnPlayerPlanetCards(t),s=0;s<o.length;s++)"hazardous"===e.game.planets[o[s]].type&&r++,"industrial"===e.game.planets[o[s]].type&&a++,"cultural"===e.game.planets[o[s]].type&&n++,"diplomatic"===e.game.planets[o[s]].type&&i++;return n+r+a+i>=11?1:0},scoreObjective:function(e,t,r){r(1)}}),this.importStageIIPublicObjective("power-broker",{name:"Power Broker",img:"/imperium/img/objective_card_2_template.png",text:"Spend 16 influence when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.returnAvailableInfluence(t)>=16?1:0},scoreObjective:function(e,t,r){e.game.player==t?e.playerSelectInfluence(16,(function(e){r(e)})):r(0)}}),this.importStageIIPublicObjective("cultural-revolution",{name:"Cultural Revolution",img:"/imperium/img/objective_card_2_template.png",text:"Spend 6 command or strategy tokens when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.game.players_info[t-1].strategy_tokens+e.game.players_info[t-1].command_tokens>=6?1:0},scoreObjective:function(e,t,r){e.game.player==t?e.playerSelectStrategyAndCommandTokens(6,(function(e){r(e)})):r(0)}})},function(e,t){this.importPromissary("ceasefire",{name:"Ceasefire Promissary",faction:-1,text:"When the owner activates a sector that contains one of your units, you may trigger this to prevent them moving in units.",activateSystemTriggers:function(e,t,r,n){var a=e.game.players_info[t-1].faction+"-ceasefire";return e.doesPlayerHavePromissary(r,a)&&t!=r&&e.doesPlayerHaveUnitsInSector(r,n)?1:0},activateSystemEvent:function(e,t,r,n){if(e.game.player!=r)return e.updateStatus(e.returnFaction(r)+" is deciding whether to use Ceasefire"),0;var a='<div clss="sf-readable">Permit '+e.returnFaction(t)+" to activate sector or use ceasefire? </div><ul>";a+='<li class="option" id="activate">use ceasefire</li>',a+='<li class="option" id="nothing">do nothing</li>',a+="</ul>",e.updateStatus(a),$(".option").off(),$(".option").on("click",(function(){var n=$(this).attr("id");return"nothing"===n?(e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" does not use Ceasefire"),e.endTurn(),0):"activate"===n?(e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" uses Ceasefire to end "+e.returnFaction(t)+" turn"),e.addMove("ceasefire\t"+t+"\t"+r),e.endTurn(),0):0}))},handleGameLoop:function(e,t,r){if("ceasefire"==r[0]){var n=parseInt(r[1]);r[2];e.game.queue.splice(t,1);for(var a=0,i=e.game.queue.length-1;i>=0;i--)0!=e.game.queue[i].indexOf("play")&&0==a?e.game.queue.splice(i,1):0==a&&(a=1,e.game.queue.push("resolve\tplay"),e.game.queue.push("setvar\tstate\t0\tactive_player_moved\tint\t0"),e.game.queue.push("player_end_turn\t"+n));return 1}return 1}}),this.importPromissary("trade",{name:"Trade Promissary",faction:-1,text:"When the owner replenishes commodities, this promissary triggers and you gain their commodities as trade goods",gainCommodities:function(e,t,r){for(var n=e.game.players_info[t-1].faction+"-trade",a=e.returnPromissaryPlayer(n),i=0;i<e.game.players_info.length;i++)if(i+1!=t&&e.doesPlayerHavePromissary(i+1,n))return e.game.players_info[i].goods+=r,e.givePromissary(t,i+1,n),e.updateLog(e.returnFaction(i+1)+" redeems their Trade Promissary from "+e.returnFaction(a)),0;return r}}),this.importPromissary("political",{name:"Political Promissary",faction:-1,text:"The owner of this card cannot participate in resolving this agenda",menuOption:function(e,t,r){var n={};return"pre_agenda"==t&&(n.event="political-promissary",n.html='<li class="option" id="political-promissary">Political Promissary</li>'),n},menuOptionTriggers:function(e,t,r){if("pre_agenda"!=t)return 0;for(var n=e.returnPlayablePromissaryArray(r,"political"),a=0;a<n.length;a++)if(e.game.players_info[e.game.player-1].promissary_notes.includes(n[a]))return 1;return 0},menuOptionActivated:function(e,t,r){if(e.game.player==r){for(var n='<div class="sf-readable">Select a Specific Promissary: </div><ul>',a=e.returnPlayablePromissaryArray(r,"political"),i=0;i<a.length;i++){var o=a[i].split("-"),s=e.returnPromissaryPlayer(a[i]);n+='<li class="option" id="'.concat(i,'">').concat(e.returnFactionName(s)," - ").concat(e.promissary_notes[o[1]].name,"</li>")}n+="</ul>",e.updateStatus(n),$(".option").off(),$(".option").on("click",(function(){var t=$(this).attr("id"),r=a[parseInt(t)],n=e.returnPromissaryPlayer(a[parseInt(t)]);return e.addMove("rider\t"+n+"\tpolitical-promissary\t-1"),e.addMove("give\t"+e.game.player+"\t"+r+"\tpromissary\t"+r),e.endTurn(),0}))}return 0}}),this.importPromissary("throne",{name:"Support for the Throne",faction:-1,text:"Gain 1 VP when you receive this card. Lose this card and 1 VP if the owner of this card is eliminated or you activate a system containing any of their units.",gainPromissary:function(e,t,r){r.indexOf("throne")>-1&&(e.returnPromissaryPlayer(r)!=t&&(e.game.players_info[t-1][r]=1,e.game.players_info[t-1].vp++,e.updateLog(e.returnFaction(t)+" gains 1 VP from Support for the Throne"),e.updateLeaderboard()))},losePromissary:function(e,t,r){r.indexOf("throne")>-1&&(e.returnPromissaryPlayer(r)!=t&&(e.game.players_info[t-1][r]=1,e.game.players_info[t-1].vp--,e.updateLog(e.returnFaction(t)+" loses 1 VP from Support for the Throne"),e.updateLeaderboard()))},activateSystemTriggers:function(e,t,r,n){e.returnSectorAndPlanets(n);for(var a=0;a<e.game.players_info.length;a++)if(a+1!=t&&e.doesPlayerHaveUnitsInSector(a+1,n)){var i=e.game.players_info[r-1].id+"-throne";e.doesPlayerHavePromissary(t,i)&&(e.game.players_info[t-1][i]=0,e.updateLog(e.returnFaction(t)+" loses 1 VP from Support for the Throne"),e.game.players_info[t-1].vp--,e.givePromissary(t,a+1,details))}return 0}})},function(e,t){this.importStrategyCard("construction",{name:"Construction",rank:4,img:"/strategy/BUILD.png",text:"<b>Player</b> builds Space Dock and PDS or two PDS units.<hr /><b>Others</b> may spend strategy token and activate sector to build PDS or Space Dock.",strategyPrimaryEvent:function(e,t,r){e.game.player==r&&t==r&&(e.addMove("resolve\tstrategy"),e.addMove("strategy\tconstruction\t"+r+"\t2"),e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.playerAcknowledgeNotice("You have played Construction. First you will have the option of producing a PDS or Space Dock. Then you will have the option of producing an additional PDS if you so choose.",(function(){e.playerBuildInfrastructure((function(t){e.playerBuildInfrastructure((function(t){e.updateSectorGraphics(t),e.endTurn()}),2)}),1)})))},strategySecondaryEvent:function(e,t,r){if(e.game.player!=r&&e.game.player==t){var n="<p>Construction has been played. Do you wish to spend 1 strategy token to build a PDS or Space Dock? This will activate the sector (if unactivated): </p><ul>";1==e.game.state.round&&(n='<p class="doublespace">'.concat(e.returnFaction(r)," has played the Construction strategy card. You may spend 1 strategy token to build a PDS or Space Dock on a planet you control (this will activate the sector). You have ").concat(e.game.players_info[t-1].strategy_tokens," strategy tokens. Use this ability? </p><ul>")),e.game.players_info[t-1].strategy_tokens>0&&(n+='<li class="option" id="yes">Yes</li>'),n+='<li class="option" id="no">No</li>',n+="</ul>",e.updateStatus(n),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var t=$(this).attr("id");return"yes"==t&&(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.addMove("expend\t"+e.game.player+"\tstrategy\t1"),e.playerBuildInfrastructure((function(t){e.addMove("activate\t"+e.game.player+"\t"+t),e.updateSectorGraphics(t),e.endTurn()}),1)),"no"==t?(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0):void 0}salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}}})},function(e,t){this.importStrategyCard("diplomacy",{name:"Diplomacy",rank:2,img:"/strategy/DIPLOMACY.png",text:"<b>Player</b> activates non-Byzantium sector for others, refreshes two planets.<hr /><b>Others</b> may spend strategy token to refresh two planets.",strategyPrimaryEvent:function(e,t,r){return e.game.player==r&&t==r&&(e.updateStatus("Select sector to quagmire in diplomatic negotiations, and refresh any planets in that system: "),e.playerSelectSector((function(t){t.indexOf("_")>-1&&(t=e.game.board[t].tile),e.addMove("resolve\tstrategy"),e.addMove("strategy\tdiplomacy\t"+r+"\t2"),e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" uses Diplomacy to activate "+e.game.sectors[t].name);for(var n=0;n<e.game.players_info.length;n++)e.addMove("activate\t"+(n+1)+"\t"+t);var a=e.returnSectorAndPlanets(t);if(a.p)for(var i=0;i<a.p.length;i++)if(a.p[i].owner==e.game.player)for(var o in e.game.planets)a.p[i]==e.game.planets[o]&&e.addMove("unexhaust\t"+e.game.player+"\tplanet\t"+o);e.saveSystemAndPlanets(a),e.endTurn()}))),0},strategySecondaryEvent:function(e,t,r){if(e.game.player!=r&&e.game.player==t){var n="<p>Do you wish to spend 1 strategy token to unexhaust two planet cards? </p><ul>";1==e.game.state.round&&(n='<p class="doublespace">'.concat(e.returnFaction(r)," has just played the Diplomacy strategy card. This lets you to spend 1 strategy token to unexhaust two planet cards. You have ").concat(e.game.players_info[t-1].strategy_tokens," strategy tokens. Use this ability? </p><ul>")),e.game.players_info[t-1].strategy_tokens>0&&(n+='<li class="option" id="yes">Yes</li>'),n+='<li class="option" id="no">No</li>',n+="</ul>",e.updateStatus(n),$(".option").off(),$(".option").on("click",(function(){var t=$(this).attr("id");if("yes"==t){for(var r=e.returnPlayerExhaustedPlanetCards(e.game.player),n=0,a=0,i="<p>Select planets to unexhaust: </p><ul>",o=".cardchoice",s=0;s<r.length;s++)a++,i+='<li class="cardchoice" id="cardchoice_'+r[s]+'">'+e.returnPlanetCard(r[s])+"</li>";0==a&&(i+='<li class="textchoice" id="cancel">cancel (no options)</li>',o=".textchoice"),i+="</ul>",a>=2&&(a=2),e.updateStatus(i),e.lockInterface(),$(o).off(),$(o).on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var t=$(this).attr("id");if("cancel"===t)return e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),void e.endTurn();for(var i=t.split("_"),o="#"+t,s=i[1],c=0,l=0;l<r.length;l++)r[l]===s&&(c=l);n++,e.addMove("unexhaust\t"+e.game.player+"\tplanet\t"+r[c]),$(o).off(),$(o).css("opacity","0.2"),n>=a&&(e.prependMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn())}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}if("no"==t)return e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0}))}}})},function(e,t){this.importStrategyCard("imperial",{name:"Imperial",rank:8,img:"/strategy/EMPIRE.png",text:"<b>Player</b> may score a public objective, gains 1 VP for controlling New Byzantium or secret objective if not.<hr /><b>Others</b> may spend strategy token to purchase secret objective",strategyPrimaryEvent:function(e,t,r){if(e.game.player==r&&t==r){e.game.planets["new-byzantium"].owner==r?e.playerAcknowledgeNotice("You are granted an additional Victory Point for controlling New Byzantium during Imperial Scoring",(function(){e.playerAcknowledgeNotice("You will first be asked to score your public objective. The game will then allow other players to purchase secret objectives.",(function(){e.addMove("resolve\tstrategy"),e.addMove("strategy\timperial\t"+r+"\t2"),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.playerScoreVictoryPoints(e,(function(e,r,n){r>0&&(null!=e.stage_i_objectives[n]||null!=e.stage_ii_objectives[n])?null!=e.stage_i_objectives[n]?e.stage_i_objectives[n].scoreObjective(e,t,(function(){e.addMove("score\t"+e.game.player+"\t1\tnew-byzantium"),e.addMove("score\t"+t+"\t"+r+"\t"+n),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(n),e.updateStatus("scoring completed"),e.endTurn()})):e.stage_ii_objectives[n].scoreObjective(e,t,(function(){e.addMove("score\t"+e.game.player+"\t1\tnew-byzantium"),e.addMove("score\t"+t+"\t"+r+"\t"+n),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(n),e.updateStatus("scoring completed"),e.endTurn()})):(e.addMove("score\t"+e.game.player+"\t1\tnew-byzantium"),e.updateStatus("scoring completed"),e.endTurn())}),1)}))})):e.playerAcknowledgeNotice("As you do not control New Byzantium during Imperial Scoring, you will be issued an additional Secret Objective",(function(){e.playerAcknowledgeNotice("You will next be asked to score a public objective. The game will then allow other players to purchase secret objectives.",(function(){e.addMove("resolve\tstrategy"),e.addMove("strategy\timperial\t"+r+"\t2"),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.playerScoreVictoryPoints(e,(function(e,n,a){n>0&&(null!=e.stage_i_objectives[a]||null!=e.stage_ii_objectives[a])?null!=e.stage_i_objectives[a]?e.stage_i_objectives[a].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+n+"\t"+a),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(a),e.updateStatus("scoring completed"),e.addMove("gain\t"+r+"\tsecret_objective\t1"),e.addMove("DEAL\t6\t"+r+"\t1"),e.endTurn()})):e.stage_ii_objectives[a].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+n+"\t"+a),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(a),e.updateStatus("scoring completed"),e.addMove("gain\t"+r+"\tsecret_objective\t1"),e.addMove("DEAL\t6\t"+r+"\t1"),e.endTurn()})):(e.addMove("gain\t"+r+"\tsecret_objective\t1"),e.addMove("DEAL\t6\t"+r+"\t1"),e.endTurn())}),1)}))}))}return 0},strategySecondaryEvent:function(e,t,r){return e.game.state.playing_strategy_card_secondary=1,e.game.player==t&&(e.game.player!=r&&e.game.players_info[t-1].strategy_tokens>0?e.playerBuySecretObjective(2):(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn())),0},strategyTertiaryEvent:function(e,t,r){if(e.game.state.playing_strategy_card_secondary=1,e.game.state.round_scoring=1,t==e.game.player){var n="",a="";return e.game.state.round_scoring=2,e.playerScoreSecretObjective(e,(function(r,i,o){a=i,n=o,e.playerScoreVictoryPoints(e,(function(r,i,o){if(e.updateStatus("scoring completed"),e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),a>0)return null!=e.secret_objectives[n]&&e.secret_objectives[n].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+a+"\t"+n),i>0?(null!=e.stage_i_objectives[o]&&e.stage_i_objectives[o].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+i+"\t"+o),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(n),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(o),e.endTurn()})),null!=e.stage_ii_objectives[o]&&e.stage_ii_objectives[o].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+i+"\t"+o),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(n),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(o),e.endTurn()}))):(e.game.players_info[e.game.player-1].objectives_scored_this_round.push(n),e.endTurn())})),0;i>0?(null!=e.stage_i_objectives[o]&&e.stage_i_objectives[o].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+i+"\t"+o),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(o),e.endTurn()})),null!=e.stage_ii_objectives[o]&&e.stage_ii_objectives[o].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+i+"\t"+o),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(o),e.endTurn()}))):e.endTurn()}),2)})),0}}})},function(e,t){this.importStrategyCard("leadership",{name:"Leadership",rank:1,img:"/strategy/INITIATIVE.png",text:"<b>Player</b> gains three tokens.<hr /><b>All players</b> may purchase tokens for three influence each.",strategyPrimaryEvent:function(e,t,r){return e.game.player==r&&t==r&&(e.addMove("resolve\tstrategy"),e.addMove("strategy\tleadership\t"+r+"\t2"),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.playerAllocateNewTokens(e.game.player,3,0,1,1)),0},strategySecondaryEvent:function(e,t,r){return t==e.game.player?(e.game.player,e.playerBuyTokens(2),0):1}})},function(e,t){this.importStrategyCard("politics",{name:"Politics",rank:3,img:"/strategy/POLITICS.png",text:"<b>Player</b> picks new Speaker and gains 2 action cards.<hr /><b>Others</b> may spend strategy token for two action cards.",strategyPrimaryEvent:function(e,t,r){if(e.game.player===r&&t==r){e.addMove("resolve\tstrategy"),e.addMove("gain\t"+e.game.player+"\taction_cards\t2"),e.addMove("DEAL\t2\t"+e.game.player+"\t2"),e.addMove("NOTIFY\t"+e.returnFaction(t)+" gains action cards"),e.addMove("strategy\tpolitics\t"+r+"\t2"),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length);for(var n=e.returnFactions(),a="Make which player the speaker? <ul>",i=0;i<e.game.players_info.length;i++)a+='<li class="option" id="'+i+'">'+n[e.game.players_info[i].faction].name+"</li>";a+="</ul>",e.updateStatus(a);e.game.player;$(".option").off(),$(".option").on("click",(function(){var t=parseInt($(this).attr("id"))+1;e.returnAgendaCards();return e.playerAcknowledgeNotice("You will receive two action cards once other players have decided whether to purchase action cards.",(function(){e.addMove("change_speaker\t"+t),e.endTurn()})),0}))}},strategySecondaryEvent:function(e,t,r){e.game.player==t&&(e.game.player!=r&&e.game.players_info[t-1].strategy_tokens>0?e.playerBuyActionCards(2):(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn()))},strategyTertiaryEvent:function(e,t,r){var n=[],a=e.returnAgendaCards(),o=0;if(e.game.player==t){e.game.state.votes_available=[],e.game.state.votes_cast=[],e.game.state.how_voted_on_agenda=[],e.game.state.voted_on_agenda=[],e.game.state.voting_on_agenda=0;for(var s=0;s<e.game.players_info.length;s++){e.game.state.votes_available.push(e.returnAvailableVotes(s+1)),e.game.state.votes_cast.push(0),e.game.state.how_voted_on_agenda[s]="abstain",e.game.state.voted_on_agenda[s]=[],console.log("AP2: "+e.game.state.agendas_per_round);for(var c=0;c<e.game.state.agendas_per_round+2;c++)e.game.state.voted_on_agenda[s].push(0)}}if(console.log("----------------------"),console.log("---"+JSON.stringify(e.game.state.voted_on_agenda)+"---"),console.log("----------------------"),e.game.player===e.game.state.speaker){var l="";for(1==e.game.state.agendas_per_round&&(l+="Select one agenda to advance for consideration in the Galactic Senate.<ul>"),2==e.game.state.agendas_per_round&&(l+="Select two agendas to advance for consideration in the Galactic Senate.<ul>"),3==e.game.state.agendas_per_round&&(l+="Select three agendas to advance for consideration in the Galactic Senate.<ul>"),i=0;i<3&&i<e.game.state.agendas.length;i++)l+='<li class="option" id="'+e.game.state.agendas[i]+'">'+a[e.game.state.agendas[i]].name+"</li>";l+="</ul>",e.updateStatus(l),$(".option").off(),$(".option").on("mouseenter",(function(){var t=$(this).attr("id");e.showAgendaCard(t)})),$(".option").on("mouseleave",(function(){var t=$(this).attr("id");e.hideAgendaCard(t)})),$(".option").on("click",(function(){if(o++,n.push($(this).attr("id")),$(this).hide(),e.hideAgendaCard(n[n.length-1]),o>=e.game.state.agendas_per_round){for(i=1;i>=0;i--)"simultaneous"===e.game.state.agenda_voting_order?(e.addMove("resolve_agenda\t"+n[i]),e.addMove("post_agenda_stage_post\t"+n[i]),e.addMove("post_agenda_stage\t"+n[i]),e.addMove("simultaneous_agenda\t"+n[i]+"\t"+i),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.addMove("pre_agenda_stage_post\t"+n[i]),e.addMove("pre_agenda_stage\t"+n[i]),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length)):(e.addMove("resolve_agenda\t"+n[i]),e.addMove("post_agenda_stage_post\t"+n[i]),e.addMove("post_agenda_stage\t"+n[i]),e.addMove("agenda\t"+n[i]+"\t"+i),e.addMove("pre_agenda_stage_post\t"+n[i]),e.addMove("pre_agenda_stage\t"+n[i]),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length));e.endTurn()}}))}else e.updateStatus("The Speaker is selecting two Agendas for consideration by the Senate")}})},function(e,t){this.importStrategyCard("technology",{name:"Technology",rank:7,img:"/strategy/TECH.png",text:"<b>Player</b> may Research a technology and spend 6 resources to research another.<hr /><b>Others</b> may spend strategy token and 4 resources to research a technology",strategyPrimaryEvent:function(e,t,r){console.log("STRAT PRIM: "+t+" -- "+r),e.game.player==r&&t==r&&e.playerAcknowledgeNotice("You will first have the option of researching a free-technology, and then invited to purchase an additional tech for 6 resources:",(function(){e.playerResearchTechnology((function(n){e.game.players_info[e.game.player-1].tech.push(n),e.addMove("resolve\tstrategy"),e.addMove("strategy\ttechnology\t"+r+"\t2"),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.addMove("purchase\t"+t+"\ttechnology\t"+n),e.endTurn()}))}))},strategySecondaryEvent:function(e,t,r){var n="",a=0;return console.log("STRAT SEC: "+t+" -- "+r),e.game.player==t&&e.game.player!=r?(a=e.game.players_info[e.game.player-1].cost_of_technology_secondary,n="<p>Technology has been played. Do you wish to spend 4 resources and a strategy token to research a technology? </p><ul>",1==e.game.state.round&&(n='<p class="doublespace">'.concat(e.returnFaction(r)," has played the Technology strategy card. You may spend 4 resources and a strategy token to gain a permanent new unit or ability. You have ").concat(e.game.players_info[t-1].strategy_tokens," strategy tokens. Use this ability?</p><ul>")),1!=e.game.players_info[t-1].permanent_research_technology_card_must_not_spend_resources&&1!=e.game.players_info[t-1].temporary_research_technology_card_must_not_spend_resources||(n="<p>Technology has been played. Do you wish to spend a strategy token to research a technology? </p><ul>",a=0),e.returnAvailableResources(e.game.player)>=a&&e.game.players_info[t-1].strategy_tokens>0&&(n+='<li class="option" id="yes">Yes</li>'),n+='<li class="option" id="no">No</li>',n+="</ul>",e.updateStatus(n),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var r=$(this).attr("id");return"yes"===r&&(e.game.players_info[t-1].temporary_research_technology_card_must_not_spend_resources=0,e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.playerSelectResources(a,(function(r){1==r?e.playerResearchTechnology((function(r){e.addMove("purchase\t"+t+"\ttechnology\t"+r),e.addMove("expend\t"+e.game.player+"\tstrategy\t1"),e.endTurn()})):e.endTurn()}))),"no"===r?(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0):void 0}salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")})),0):(e.game.player!=r||(n="<p>Do you wish to spend "+(a=e.game.players_info[e.game.player-1].cost_of_technology_primary)+" resources to research an additional technology? </p><ul>",1!=e.game.players_info[e.game.player-1].permanent_research_technology_card_must_not_spend_resources&&1!=e.game.players_info[e.game.player-1].temporary_research_technology_card_must_not_spend_resources||(n="<p>Do you wish to research an additional technology? </p><ul>",a=0),e.returnAvailableResources(e.game.player)>=a&&(n+='<li class="option" id="yes">Yes</li>'),n+='<li class="option" id="no">No</li>',n+="</ul>",e.updateStatus(n),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var t=$(this).attr("id");return"yes"==t&&(e.game.players_info[e.game.player-1].temporary_research_technology_card_must_not_spend_resources,e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.playerSelectResources(a,(function(t){1==t&&e.playerResearchTechnology((function(t){e.addMove("purchase\t"+e.game.player+"\ttechnology\t"+t),e.endTurn()}))}))),"no"==t?(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0):void 0}salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))),0)}}),this.importAgendaCard("minister-of-technology",{name:"Minister of Technology",type:"Law",text:"Elect a player. They do not need to spend resources to research technology when the technology card is played",initialize:function(e){if(!e.game.state.ministery_of_technology){e.game.state.minster_of_technology=null,e.game.state.minster_of_technology_player=null;for(var t=0;t<e.game.players_info.length;t++)e.game.players_info[t].temporary_research_technology_card_must_not_spend_resources||(e.game.players_info[t].temporary_research_technology_card_must_not_spend_resources=0,e.game.players_info[t].permanent_research_technology_card_must_not_spend_resources=0)}},returnAgendaOptions:function(e){for(var t=[],r=0;r<e.game.players_info.length;r++)t.push(e.returnFaction(r+1));return t},onPass:function(e,t){for(var r=0,n=0;n<e.game.players_info.length;n++)e.returnFaction(n+1)==t&&(r=n);e.game.state.minister_of_technology=1,e.game.state.minister_of_technology_player=r+1,e.game.players_info[r].permanent_research_technology_card_must_not_spend_resources=1,e.game.state.laws.push({agenda:"minister-of-technology",option:t})}}),this.importActionCard("unexpected-breakthrough",{name:"Unexpected Breakthrough",type:"action",text:"Do not spend resources to research technology the next time the Technology card is played",playActionCard:function(e,t,r,n){return e.game.players_info[r-1].temporary_research_technology_card_must_not_spend_resources=1,1}})},function(e,t){this.importStrategyCard("trade",{name:"Trade",rank:5,img:"/strategy/TRADE.png",text:"<b>Player</b> gains 3 trade goods, may refresh any player's commodities.<hr /><b>Others</b> may spend strategy token to refresh their commodities.",strategyPrimaryEvent:function(e,t,r){if(e.game.player==r&&t==r){e.addMove("resolve\tstrategy"),e.addMove("strategy\ttrade\t"+r+"\t2"),e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.addMove("purchase\t"+e.game.player+"\tgoods\t3"),e.addMove("purchase\t"+e.game.player+"\tcommodities\t"+e.game.players_info[e.game.player-1].commodity_limit);for(var n=e.returnFactions(),a="<p>You will receive 3 trade goods and "+e.game.players_info[e.game.player-1].commodity_limit+" commodities. You may choose to replenish the commodities of any other players: </p><ul>",i=0;i<e.game.players_info.length;i++)i!=e.game.player-1&&(a+='<li class="option" id="'+i+'">'+n[e.game.players_info[i].faction].name+"</li>");a+='<li class="option" id="finish">done</li>',e.updateStatus(a),$(".option").off(),$(".option").on("click",(function(){var t=$(this).attr("id");"finish"!=t?(e.addMove("purchase\t"+(parseInt(t)+1)+"\tcommodities\t"+e.game.players_info[t].commodity_limit),$(this).hide()):e.endTurn()}))}},strategySecondaryEvent:function(e,t,r){if(e.game.player==t&&e.game.player!=r){if(e.game.players_info[t-1].commodities==e.game.players_info[t-1].commodity_limit)return e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.updateLog(e.returnFaction(t)+" skips the Trade secondary as they have already refreshed commodities"),e.endTurn(),1;var n="<p>Trade has been played. Do you wish to spend 1 strategy token to refresh your commodities? </p><ul>";if(1==e.game.state.round&&(n='<p class="doublespace">'.concat(e.returnFaction(r)," has played the Trade strategy card. You may spend 1 strategy token to refresh your faction commodities, which may be exchanged with your neighbours on the board for trade goods. You have ").concat(e.game.players_info[t-1].strategy_tokens," strategy tokens. Use this ability? </p><ul>")),e.game.players_info[t-1].strategy_tokens>0&&(n+='<li class="option" id="yes">Yes</li>'),n+='<li class="option" id="no">No</li>',n+="</ul>",e.game.players_info[e.game.player-1].commodities==e.game.players_info[e.game.player-1].commodity_limit)return e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" already has commodities and skips trade secondary"),e.endTurn(),0;e.updateStatus(n),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface(),$(".option").off();var t=$(this).attr("id");return"yes"==t&&(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.addMove("purchase\t"+e.game.player+"\tcommodities\t"+e.game.players_info[e.game.player-1].commodity_limit),e.addMove("expend\t"+e.game.player+"\tstrategy\t1"),e.endTurn()),"no"==t?(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0):void 0}salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}}})},function(e,t){this.importStrategyCard("warfare",{name:"Warfare",rank:6,img:"/strategy/MILITARY.png",text:"<b>Player</b> may de-activate any sector and gain 1 token.<hr /><b>Others</b> may spend strategy token to produce in home system",strategyPrimaryEvent:function(e,t,r){e.game.player==r&&t==r&&(e.updateStatus("Select sector to de-activate."),e.playerSelectSector((function(t){var n=e.returnSectorAndPlanets(t);e.addMove("resolve\tstrategy"),e.addMove("strategy\twarfare\t"+r+"\t2"),e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.addMove("deactivate\t"+r+"\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(r)+" deactivates "+n.s.name),e.playerAllocateNewTokens(e.game.player,1,0,3,0)})))},strategySecondaryEvent:function(e,t,r){if(e.game.player==t&&e.game.player!=r){var n="<p>Do you wish to spend 1 strategy token to produce in your home sector? </p><ul>";1==e.game.state.round&&(n='<p class="doublespace">'.concat(e.returnFaction(r)," has played the Warfare strategy card. You may spend 1 strategy token to produce in your Homeworld without activating the sector. You have ").concat(e.game.players_info[t-1].strategy_tokens," strategy tokens. Use this ability? </p><ul>")),e.game.players_info[t-1].strategy_tokens>0&&(n+='<li class="option" id="yes">Yes</li>'),n+='<li class="option" id="no">No</li>',n+="</ul>",e.updateStatus(n),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var t=$(this).attr("id");return"yes"==t&&e.playerProduceUnits(e.game.players_info[e.game.player-1].homeworld,0,0,2,1),"no"==t?(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0):void 0}salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}}})},function(e,t){this.importTech("antimass-deflectors",{name:"Antimass Deflectors",color:"blue",prereqs:[],text:"You may move through asteroid fields and gain -1 when receiving PDS fire",initialize:function(e,t){null==e.game.players_info[t-1].antimass_deflectors&&(e.game.players_info[t-1].antimass_deflectors=0)},gainTechnology:function(e,t,r){"antimass-deflectors"==r&&(e.game.players_info[t-1].antimass_deflectors=1,e.game.players_info[t-1].fly_through_asteroids=1)}}),this.importTech("gravity-drive",{name:"Gravity Drive",color:"blue",prereqs:["blue"],text:"One ship may gain +1 movement when you activate a system",initialize:function(e,t){null==e.game.players_info[t-1].gravity_drive&&(e.game.players_info[t-1].gravity_drive=0)},gainTechnology:function(e,t,r){"gravity-drive"==r&&(e.game.players_info[t-1].gravity_drive=1,e.game.players_info[t-1].ship_move_bonus=1)}}),this.importTech("fleet-logistics",{name:"Fleet Logistics",color:"blue",prereqs:["blue","blue"],text:"You may perform two actions in any turn",onNewRound:function(e,t){e.doesPlayerHaveTech(t,"fleet-logistics")&&(e.game.players_info[t-1].fleet_logistics_turn=0)},onNewTurn:function(e,t){e.doesPlayerHaveTech(t,"fleet-logistics")&&e.game.players_info[t-1].fleet_logistics_turn++},initialize:function(e,t){null==e.game.players_info[t-1].fleet_logistics&&(e.game.players_info[t-1].fleet_logistics=0,e.game.players_info[t-1].fleet_logistics_exhausted=0,e.game.players_info[t-1].fleet_logistics_turn=0)},gainTechnology:function(e,t,r){"fleet-logistics"==r&&(e.game.players_info[t-1].fleet_logistics=1,e.game.players_info[t-1].fleet_logistics_exhausted=0,e.game.players_info[t-1].perform_two_actions=1)},menuOption:function(e,t,r){return"main"==t&&e.doesPlayerHaveTech(r,"fleet-logistics")?{event:"fleetlogistics",html:'<li class="option" id="fleetlogistics">use fleet logistics</li>'}:{}},menuOptionTriggers:function(e,t,r){return"main"==t&&e.doesPlayerHaveTech(r,"fleet-logistics")&&0==e.game.players_info[r-1].fleet_logistics_exhausted&&e.game.players_info[r-1].fleet_logistics_turn<2&&1==e.game.players_info[r-1].fleet_logistics?1:0},menuOptionActivated:function(e,t,r){return"main"==t&&(e.game.players_info[r-1].fleet_logistics_exhausted=1,e.updateLog(e.returnFaction(r)+" exhausts Fleet Logistics"),e.addMove("setvar\tplayers\t"+r+"\tfleet_logistics_exhausted\tint\t1"),e.addMove("play\t"+r),e.addMove("play\t"+r),e.addMove("NOTIFY\t"+r+" activates fleet logistics"),e.endTurn(),e.updateStatus("Activating Fleet Logistics")),0}}),this.importTech("lightwave-deflector",{name:"Light/Wave Deflector",color:"blue",prereqs:["blue","blue","blue"],text:"Your fleet may move through sectors with opponent ships",initialize:function(e,t){null==e.game.players_info[t-1].lightwave_deflector&&(e.game.players_info[t-1].lightwave_deflector=0)},gainTechnology:function(e,t,r){"lightwave-deflector"==r&&(e.game.players_info[t-1].lightwave_deflector=1,e.game.players_info[t-1].move_through_sectors_with_opponent_ships=1)}})},function(e,t){this.importTech("neural-motivator",{name:"Neural Motivator",color:"green",prereqs:[],text:"Gain an extra action card each turn",initialize:function(e,t){null==e.game.players_info[t-1].neural_motivator&&(e.game.players_info[t-1].neural_motivator=0)},gainTechnology:function(e,t,r){"neural-motivator"==r&&(e.game.players_info[t-1].neural_motivator=1,e.game.players_info[t-1].action_cards_bonus_when_issued=1)}}),this.importTech("dacxive-animators",{name:"Dacxive Animators",color:"green",prereqs:["green"],text:"Place an extra infantry on any planet after winning a defensive ground combat tbere",initialize:function(e,t){null==e.game.players_info[t-1].dacxive_animators&&(e.game.players_info[t-1].dacxive_animators=0)},gainTechnology:function(e,t,r){"dacxive-animators"==r&&(e.game.players_info[t-1].dacxive_animators=1)},groundCombatRoundEnd:function(e,t,r,n,a){var i=e.returnNumberOfGroundForcesOnPlanet(t,n,a),o=e.returnNumberOfGroundForcesOnPlanet(r,n,a);e.doesPlayerHaveTech(r,"dacxive-animators")&&i<o&&0==i&&(e.addPlanetaryUnit(r,n,a,"infantry"),e.updateLog(e.returnFaction(r)+" reinforces infantry with Dacxive Animators"))}}),this.importTech("hyper-metabolism",{name:"Hyper Metabolism",color:"green",prereqs:["green","green"],text:"Gain an extra command token each round",initialize:function(e,t){null==e.game.players_info[t-1].hyper_metabolism&&(e.game.players_info[t-1].hyper_metabolism=0)},gainTechnology:function(e,t,r){"hyper-metabolism"==r&&(e.game.players_info[t-1].hyper_metabolism=1,e.game.players_info[t-1].new_token_bonus_when_issued=1)}}),this.importTech("x89-bacterial-weapon",{name:"X-89 Bacterial Weapon",color:"green",prereqs:["green","green","green"],text:"Bombardment destroys all infantry on planet",initialize:function(e,t){null==e.game.players_info[t-1].x89_bacterial_weapon&&(e.game.players_info[t-1].x89_bacterial_weapon=0,e.game.players_info[t-1].x89_bacterial_weapon_exhausted=0)},gainTechnology:function(e,t,r){"x89-bacterial-weapon"==r&&(e.game.players_info[t-1].x89_bacterial_weapon=1,e.game.players_info[t-1].x89_bacterial_weapon_exhausted=0)},onNewRound:function(e,t){return e.game.players_info[t-1].x89_bacterial_weapon_exhausted=0,1},bombardmentTriggers:function(e,t,r,n){return 1==e.game.players_info[r-1].x89_bacterial_weapon&&0==e.game.players_info[r-1].x89_bacterial_weapon_exhausted&&(e.doesSectorContainPlayerUnit(r,n,"warsun")||e.doesSectorContainPlayerUnit(r,n,"dreadnaught"))?1:0},bombardmentEvent:function(e,t,r,n,a){if(e.game.player!=r)return 0;if(e.game.player!=t)return 0;e.returnSectorAndPlanets(n).p[a];return"<p>Do you wish to use Bacterial Weapons during Bombardment?</p><ul>",'<li class="option textchoice" id="attack">use bacterial weapons?</li>','<li class="option textchoice" id="skip">skip</li>',"</ul>",e.updateStatus('<p>Do you wish to use Bacterial Weapons during Bombardment?</p><ul><li class="option textchoice" id="attack">use bacterial weapons?</li><li class="option textchoice" id="skip">skip</li></ul>'),$(".textchoice").off(),$(".textchoice").on("click",(function(){var r=$(this).attr("id");"attack"==r&&(e.addMove("destroy_infantry_on_planet\t"+t+"\t"+n+"\t"+a+"\t100"),e.addMove("setvar\tplayers\t"+t+"\tx89_bacterial_weapon_exhausted\tint\t1"),e.addMove("NOTIFY\t"+e.returnFaction(t)+" uses X89 Bacterial Weapons"),e.endTurn()),"skip"==r&&(e.addMove("NOTIFY\t"+e.returnFaction(t)+" refrains from using X89 Bacterial Weapons"),e.endTurn())})),0}})},function(e,t){this.importTech("plasma-scoring",{name:"Plasma Scoring",color:"red",prereqs:[],text:"All PDS and bombardment fire gets +1 bonus shot",initialize:function(e,t){null==e.game.players_info[t-1].plasma_scoring&&(e.game.players_info[t-1].plasma_scoring=0)},gainTechnology:function(e,t,r){"plasma-scoring"==r&&(e.game.players_info[t-1].plasma_scoring=1,e.game.players_info[t-1].pds_combat_roll_bonus_shots++)},pdsSpaceAttackTriggers:function(e,t,r,n){return e.doesPlayerHaveTech(r,"plasma-scoring")&&1==e.doesPlayerHavePDSUnitsWithinRange(t,r,n)&&t!=r&&e.updateLog(e.returnFaction(r)+" gets +1 shot from Plasma Scoring"),0},pdsSpaceDefenseTriggers:function(e,t,r,n){return e.doesPlayerHaveTech(r,"plasma-scoring")&&1==e.doesPlayerHavePDSUnitsWithinRange(t,r,n)&&t!=r&&e.updateLog(e.returnFaction(r)+" gets +1 shot from Plasma Scoring"),0}}),this.importTech("magen-defense-grid",{name:"Magen Defense Grid",color:"red",text:"When ground combat begins on a planet with PDS or Space Dock, destroy one opponent infantry",prereqs:["red"],initialize:function(e,t){null==e.game.players_info[t-1].magen_defense_grid&&(e.game.players_info[t-1].magen_defense_grid=0)},onNewRound:function(e,t){return t==e.game.player&&(e.game.players_info[t-1].magen_defense_grid=1),1},groundCombatTriggers:function(e,t,r,n){if(e.game.state.ground_combat_round>=1)return 0;if(e.doesPlayerHaveTech(t,"magen-defense-grid")){var a=e.returnSectorAndPlanets(r).p[n];if(t==a.owner)for(var i=0;i<a.units[t-1].length;i++)if("spacedock"==a.units[t-1][i].type||"pds"==a.units[t-1][i].type)return e.updateLog("Magan Defense Grid triggers on "+a.name),1}return 0},groundCombatEvent:function(e,t,r,n){for(var a=e.returnSectorAndPlanets(r).p[n],i=a.owner,o=0;o<a.units.length;o++){var s=a.units[o].length;if(o!=i-1&&o<a.units.length)for(var c=0;c<s;c++){var l=o+1,u=t;"infantry"==a.units[o][c].type&&(e.assignHitsToGroundForces(u,l,r,n,1),e.eliminateDestroyedUnitsInSector(l,r),e.updateSectorGraphics(r),e.updateLog(e.returnFaction(l)+" loses 1 infantry to Magan Defense Grid"),c=a.units[o].length+3,o=a.units.length+3)}}return 1}}),this.importTech("duranium-armor",{name:"Duranium Armor",color:"red",prereqs:["red","red"],text:"Each round, you may repair any ship which has not taken damage this round",initialize:function(e,t){null==e.game.players_info[t-1].duranium_armor&&(e.game.players_info[t-1].duranium_armor=0,e.game.players_info[t-1].duranium_armor=0)},onNewRound:function(e,t,r){return t==e.game.player&&(e.game.players_info[t-1].duranium_armor=1,e.game.players_info[t-1].may_repair_damaged_ships_after_space_combat=1),1},spaceCombatRoundOver:function(e,t,r,n){var a=e.returnSectorAndPlanets(n);if(e.doesPlayerHaveTech(t,"duranium-armor"))for(var i=0;i<a.s.units[t-1].length;i++){var o=a.s.units[t-1][i];o.last_round_damaged<e.game.state.space_combat_round&&(o.strength=o.max_strength,e.updateLog(e.returnFaction(t)+" repairs ships with Duranium Armor"))}if(e.doesPlayerHaveTech(r,"duranium-armor"))for(var s=0;s<a.s.units[r-1].length;s++){var c=a.s.units[r-1][s];c.last_round_damaged<e.game.state.space_combat_round&&(c.strength=c.max_strength,e.updateLog(e.returnFaction(r)+" repairs ships with Duranium Armor"))}}}),this.importTech("assault-cannon",{name:"Assault Cannon",color:"red",prereqs:["red","red","red"],text:"If you have three or more capital ships in a sector, destroy one opponent capital ship",initialize:function(e,t){null==e.game.players_info[t-1].assault_cannont&&(e.game.players_info[t-1].assault_cannont=0)},onNewRound:function(e,t,r){return t==e.game.player&&(e.game.players_info[t-1].assault_cannont=1,e.game.players_info[t-1].may_assign_first_round_combat_shot=1),1},spaceCombatTriggers:function(e,t,r){e.game.state.activated_sector=r;for(var n=e.returnSectorAndPlanets(r),a=0,i=0;i<n.s.units.length;i++)if(i+1!=t&&e.doesPlayerHaveTech(i+1,"assault-cannon")){for(var o=0;o<n.s.units[i].length;o++){var s=n.s.units[i][o];"destroyer"==s.type&&a++,"carrier"==s.type&&a++,"cruiser"==s.type&&a++,"dreadnaught"==s.type&&a++,"flagship"==s.type&&a++,"warsun"==s.type&&a++}if(a>=3)for(var c=0;c<n.s.units[t-1].length;c++){var l=n.s.units[t-1][c];if("destroyer"==l.type)return 1;if("carrier"==l.type)return 1;if("cruiser"==l.type)return 1;if("dreadnaught"==l.type)return 1;if("flagship"==l.type)return 1;if("warsun"==l.type)return 1}}return 0},spaceCombatEvent:function(e,t,r){return e.game.players_info[t-1].target_units=["carrier","destroyer","cruiser","dreadnaught","flagship","warsun"],e.game.queue.push("destroy_ships\t"+t+"\t1\t"+e.game.state.activated_sector),e.game.queue.push("ACKNOWLEDGE\t"+e.returnFaction(t)+" must destroy 1 ship from Assault Cannon"),1}})},function(e,t){this.importTech("spacedock-ii",{name:"SpaceDock II",unit:1,prereqs:["yellow","yellow"],text:"May produce 4 more units than its planet resource value",initialize:function(e,t){if(1==e.game.players_info[t-1].spacedock_ii)return 1;e.game.players_info[t-1].spacedock_ii=0},gainTechnology:function(e,t,r){"spacedock-ii"==r&&(e.game.players_info[t-1].spacedock_ii=1)},upgradeUnit:function(e,t,r){return"spacedock"===r.type&&e.doesPlayerHaveTech(t,"spacedock-ii")?e.returnUnit("spacedock-ii",t,0):r}}),this.importTech("pds-ii",{name:"PDS II",unit:1,prereqs:["red","yellow"],text:"Hits on 5, able to fire into adjacent sectors",initialize:function(e,t){if(1==e.game.players_info[t-1].pds_ii)return 1;e.game.players_info[t-1].pds_ii=0},gainTechnology:function(e,t,r){"pds-ii"==r&&(e.game.players_info[t-1].pds_ii=1)},upgradeUnit:function(e,t,r){return"pds"===r.type&&e.doesPlayerHaveTech(t,"pds-ii")?e.returnUnit("pds-ii",t,0):r}}),this.importTech("carrier-ii",{name:"Carrier II",unit:1,prereqs:["blue","blue"],text:"Moves 2 hexes and carries 6 infantry or fighters",initialize:function(e,t){if(1==e.game.players_info[t-1].carrier_ii)return 1;e.game.players_info[t-1].carrier_ii=0},gainTechnology:function(e,t,r){"carrier-ii"==r&&(e.game.players_info[t-1].carrier_ii=1)},upgradeUnit:function(e,t,r){return"carrier"===r.type&&e.doesPlayerHaveTech(t,"carrier-ii")?(console.log("returning upgraded carrier..."),e.returnUnit("carrier-ii",t,0)):r}}),this.importTech("infantry-ii",{name:"Infantry II",unit:1,prereqs:["green","green"],text:"Chance of medical rescue and return to homeworld after unit is destroyed",initialize:function(e,t){if(1==e.game.players_info[t-1].infantry_ii)return 1;e.game.players_info[t-1].infantry_ii=0},gainTechnology:function(e,t,r){"infantry-ii"==r&&(e.game.players_info[t-1].infantry_ii=1)},upgradeUnit:function(e,t,r){return"infantry"==r.type&&e.doesPlayerHaveTech(t,"infantry-ii")?e.returnUnit("infantry-ii",t,0):r}}),this.importTech("destroyer-ii",{name:"Destroyer II",unit:1,prereqs:["red","red"],text:"Hits on 8 and has stronger anti-fighter barrage (6x3)",initialize:function(e,t){if(1==e.game.players_info[t-1].destroyer_ii)return 1;e.game.players_info[t-1].destroyer_ii=0},gainTechnology:function(e,t,r){"destroyer-ii"==r&&(e.game.players_info[t-1].destroyer_ii=1)},upgradeUnit:function(e,t,r){return"destroyer"==r.type&&e.doesPlayerHaveTech(t,"destroyer-ii")?e.returnUnit("destroyer-ii",t,0):r}}),this.importTech("fighter-ii",{name:"Fighter II",unit:1,prereqs:["green","blue"],text:"Hits on 8 and moves 2 hexes. May survive without carriers or support",initialize:function(e,t){if(1==e.game.players_info[t-1].fighter_ii)return 1;e.game.players_info[t-1].fighter_ii=0},gainTechnology:function(e,t,r){"fighter-ii"==r&&(e.game.players_info[t-1].fighter_ii=1)},upgradeUnit:function(e,t,r){return"fighter"==r.type&&e.doesPlayerHaveTech(t,"fighter-ii")?e.returnUnit("fighter-ii",t,0):r}}),this.importTech("cruiser-ii",{name:"Cruiser II",unit:1,prereqs:["green","yellow","red"],text:"Hits on 6, moves 3 sectors and can carry 1 fighter or infantry",initialize:function(e,t){if(1==e.game.players_info[t-1].cruiser_ii)return 1;e.game.players_info[t-1].cruiser_ii=0},gainTechnology:function(e,t,r){"cruiser-ii"==r&&(e.game.players_info[t-1].cruiser_ii=1)},upgradeUnit:function(e,t,r){return"cruiser"==r.type&&e.doesPlayerHaveTech(t,"cruiser-ii")?e.returnUnit("cruiser-ii",t,0):r}}),this.importTech("dreadnaught-ii",{name:"Dreadnaught II",unit:1,prereqs:["blue","blue","yellow"],text:"Hits on 5, moves 2 sectors and can carry 1 unit. 2 hits to destroy",initialize:function(e,t){if(1==e.game.players_info[t-1].dreadnaught_ii)return 1;e.game.players_info[t-1].dreadnaught_ii=0},gainTechnology:function(e,t,r){"dreadnaught-ii"==r&&(e.game.players_info[t-1].dreadnaught_ii=1)},upgradeUnit:function(e,t,r){return"dreadnaught"==r.type&&e.doesPlayerHaveTech(t,"dreadnaught-ii")?e.returnUnit("dreadnaught-ii",t,0):r}}),this.importTech("warsun",{name:"Warsun",unit:1,prereqs:["red","red","red","yellow"],text:"The Death Star: terrifying in combat, but fragile without supporting fleet",initialize:function(e,t){null==e.game.players_info[t-1].may_produce_warsuns&&(e.game.players_info[t-1].may_produce_warsuns=0)},gainTechnology:function(e,t,r){"warsun"==r&&(e.game.players_info[t-1].may_produce_warsuns=1)}})},function(e,t){this.importTech("sarween-tools",{name:"Sarween Tools",color:"yellow",text:"Reduce cost of units produced by -1 when using production",prereqs:[],initialize:function(e,t){null==e.game.players_info[t-1].sarween_tools&&(e.game.players_info[t-1].sarween_tools=0)},gainTechnology:function(e,t,r){"sarween-tools"==r&&(e.game.players_info[t-1].sarween_tools=1,e.game.players_info[t-1].production_bonus=1)}}),this.importTech("graviton-laser-system",{name:"Graviton Laser System",color:"yellow",text:"Exhaust card once per round to target capital ships with PDS fire",prereqs:["yellow"],initialize:function(e,t){null==e.game.players_info[t-1].graviton_laser_system&&(e.game.players_info[t-1].graviton_laser_system=0,e.game.players_info[t-1].graviton_laser_system_exhausted=0,e.game.players_info[t-1].graviton_laser_system_active=0)},onNewRound:function(e,t){1==e.game.players_info[t-1].graviton_laser_system&&(e.game.players_info[t-1].graviton_laser_system_exhausted=0,e.game.players_info[t-1].graviton_laser_system_active=0)},gainTechnology:function(e,t,r){"graviton-laser-system"==r&&(e.game.players_info[t-1].graviton_laser_system=1,e.game.players_info[t-1].graviton_laser_system_exhausted=0)},modifyTargets:function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];return"pds"==a&&1==e.game.players_info[r-1].graviton_laser_system_active&&(i.includes("warsun")||i.push("warsun"),i.includes("flagship")||i.push("flagship"),i.includes("dreadnaught")||i.push("dreadnaught"),i.includes("cruiser")||i.push("cruiser"),i.includes("carrier")||i.push("carrier"),i.includes("destroyer")||i.push("destroyer")),i},menuOption:function(e,t,r){return"pds"==t?{event:"graviton",html:'<li class="option" id="graviton">use graviton laser targetting</li>'}:{}},menuOptionTriggers:function(e,t,r){return"pds"==t&&0==e.game.players_info[r-1].graviton_laser_system_exhausted&&1==e.game.players_info[r-1].graviton_laser_system?1:0},menuOptionActivated:function(e,t,r){return"pds"==t&&(e.updateLog(e.returnFaction(r)+" exhausts Graviton Laser System"),e.game.players_info[r-1].graviton_laser_system_exhausted=1,e.game.players_info[r-1].graviton_laser_system_active=1,e.addMove("setvar\tplayers\t"+r+"\tgraviton_laser_system_exhausted\tint\t1"),e.addMove("setvar\tplayers\t"+r+"\tgraviton_laser_system_active\tint\t1"),e.addMove("NOTIFY\t"+e.returnFactionNickname(r)+" activates Graviton Laser System")),0}}),this.importTech("transit-diodes",{name:"Transit Diodes",color:"yellow",prereqs:["yellow","yellow"],text:"Exhaust to reallocate 4 infantry between planets your control",initialize:function(e,t){null==e.game.players_info[t-1].transit_diodes&&(e.game.players_info[t-1].transit_diodes=0,e.game.players_info[t-1].transit_diodes_exhausted=0)},gainTechnology:function(e,t,r){"transit-diodes"==r&&(e.game.players_info[t-1].transit_diodes=1,e.game.players_info[t-1].transit_diodes_exhausted=0)},menuOption:function(e,t,r){return"main"==t?{event:"transitdiodes",html:'<li class="option" id="transitdiodes">use transit diodes</li>'}:{}},menuOptionTriggers:function(e,t,r){return"main"==t&&e.doesPlayerHaveTech(r,"transit-diodes")?1:0},menuOptionActivated:function(e,t,r){return"main"==t&&e.playerRemoveInfantryFromPlanets(r,4,(function(t){e.playerAddInfantryToPlanets(r,t,(function(){e.addMove("setvar\tplayers\t"+r+"\ttransit_diodes_exhausted\tint\t1"),e.addMove("NOTIFY\t"+r+" activates transit diodes"),e.addMove("NOTIFY\t"+e.returnFaction(r)+" has moved infantry"),e.endTurn()}))})),0}}),this.importTech("integrated-economy",{name:"Integrated Economy",color:"yellow",prereqs:["yellow","yellow","yellow"],text:"You may produce on a planet after capturing it, up to cost (resource) limit of planet.",initialize:function(e,t){null==e.game.players_info[t-1].integrated_economy&&(e.game.players_info[t-1].integrated_economy=0,e.game.players_info[t-1].integrated_economy_planet_invaded=0,e.game.players_info[t-1].integrated_economy_planet_invaded_resources=0)},gainTechnology:function(e,t,r){"integrated-economy"==r&&(e.game.players_info[t-1].integrated_economy=1,e.game.players_info[t-1].integrated_economy_planet_invaded=0,e.game.players_info[t-1].integrated_economy_planet_invaded_resources=0)},gainPlanet:function(e,t,r){e.doesPlayerHaveTech(t,"integrated-economy")&&(e.game.players_info[t-1].may_player_produce_without_spacedock=1,e.game.players_info[t-1].may_player_produce_without_spacedock_production_limit=0,console.log("P: "+r),e.game.players_info[t-1].may_player_produce_without_spacedock_cost_limit+=e.game.planets[r].resources)}})},function(e,t){this.importUnit("infantry",{name:"Infantry",type:"infantry",cost:.5,combat:8,strength:1,space:0,ground:1,can_be_stored:1,capacity_required:1,description:"Infantry invade planets, but cannot move between sectors without being carried on carriers or other ships with capacity."}),this.importUnit("fighter",{name:"Fighter",type:"fighter",cost:.5,move:1,combat:9,strength:1,can_be_stored:1,capacity_required:1,description:"Fighters are disposable ships deployed to protect capital ships. They must be transported on carriers or other ships with capacity."}),this.importUnit("pds",{name:"PDS",type:"pds",range:0,cost:5,combat:6,description:"PDS units fire on other ships that invade their sectors. They can also fire on foreign infantry that invade a planet."}),this.importUnit("spacedock",{name:"Spacedock",type:"spacedock",capacity:3,production:2,combat:0,range:0,description:"Spacedocks are used to produce infantry and other ships. They cannot produce ships in space if an opponent fighter is in the sector"}),this.importUnit("carrier",{name:"Carrier",type:"carrier",cost:3,move:1,combat:9,capacity:4,strength:1,description:"The Carrier is a troop and fighter transport ship. Load it with infantry and fighters and use it to conquer other sectors."}),this.importUnit("destroyer",{name:"Destroyer",type:"destroyer",cost:1,move:2,combat:9,strength:1,anti_fighter_barrage:2,anti_fighter_barrage_combat:9,description:"The Destroyer is an inexpensive but mobile ship designed to counter fighter swarms - its ANTI-FIGHTER BARRAGE (2 rolls hitting on 9 or higher) happens at the very start of space-combat"}),this.importUnit("cruiser",{name:"Cruiser",type:"cruiser",cost:2,move:2,combat:7,strength:1,description:"The Cruiser is a more powerful ship with a reasonable chance of landing hits in battle."}),this.importUnit("dreadnaught",{name:"Dreadnaught",type:"dreadnaught",cost:4,move:1,capacity:1,combat:6,strength:2,bombardment_rolls:1,bombardment_combat:5,description:"The Dreadnaught is a powerful combat ship able to SUSTAIN DAMAGE once before being destroyed in combat"}),this.importUnit("flagship",{name:"Flagship",type:"flagship",cost:8,move:1,capacity:1,combat:7,strength:2,description:"The Flagship is the pride of the fleet -- each faction's flagship confers specific abilities. See your factino sheet for more details"}),this.importUnit("warsun",{name:"War Sun",type:"warsun",cost:12,shots:3,move:1,capacity:3,combat:3,strength:2,bombardment_rolls:3,bombardment_combat:3,description:"The War Sun is death packaged in a mass of planet-destroying turbinium. Rumours of their lethality abound, as few have fought one and lived to tell the tale."}),this.importUnit("infantry-ii",{name:"Infantry II",type:"infantry",cost:.5,combat:7,strength:1,space:0,ground:1,can_be_stored:1,capacity_required:1,extension:1,description:"Infantry II are stronger and more resilient but cannot typically be moved between sectors without moving on carriers or other ships with capacity."}),this.importUnit("fighter-ii",{name:"Fighter II",type:"fighter",cost:.5,move:2,combat:8,strength:1,can_be_stored:1,capacity_required:1,extension:1,description:"Fighter II can move without being transported by other ships. Any ships inexcess of your carrying capacity could against your fleet supply."}),this.importUnit("spacedock-ii",{name:"Spacedock II",type:"spacedock",capacity:3,production:4,extension:1,description:"Spacedock II can produce more units whenever they produce."}),this.importUnit("pds-ii",{name:"PDS II",type:"pds",cost:5,combat:5,range:1,extension:1,description:"PDS II has a slightly more accurate targeting mechanism and can fire into adjacent sectors."}),this.importUnit("carrier-ii",{name:"Carrier II",type:"carrier",cost:3,move:2,combat:9,capacity:6,strength:1,extension:1,description:"Carrier II has upgraded ship capacity and is slightly more robust in combat"}),this.importUnit("destroyer-ii",{name:"Destroyer II",type:"destroyer",cost:1,move:2,combat:8,strength:1,extension:1,anti_fighter_barrage:3,anti_fighter_barrage_combat:6,description:"Destroyer II has improved ANTI-FIGHTER-BARRAGE (3x6) and is slightly more effective in general combat"}),this.importUnit("cruiser-ii",{name:"Cruiser II",type:"cruiser",cost:2,move:3,combat:6,strength:1,extension:1,description:"Cruiser II has extended range and the ability to support a small phalanx of ground troops"}),this.importUnit("dreadnaught-ii",{name:"Dreadnaught II",type:"dreadnaught",cost:4,move:2,capacity:1,combat:5,strength:2,extension:1,description:"Dreadnaught II has improved movement, can support a small ground team and is slightly more effective in space combat"})},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var a=l(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=r(284),d=(r(5),function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(d,e);var t,r,n,l=o(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=l.call(this,e)).app=e,t.name="MyQRCode",t.description="Displays your QRcode as an option in the top menu for easy scanning by other users",t.categories="Core Utilities",t.link="/email?module=myqrcode",t.description="QR Code display utility for Saito",t.categories="UI Utilities",s(t,c(t))}return t=d,(r=[{key:"respondTo",value:function(e){if("email-appspace"==e){var t={render:function(e,t){u.render(e,t)},attachEvents:function(e,t){u.attachEvents(e,t)}};return t}return null}}])&&a(t.prototype,r),n&&a(t,n),d}(r(19)));e.exports=d},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var a=u(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=r(82),h=(r(5),function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(h,e);var t,r,n,d=s(h);function h(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=d.call(this,e)).app=e,t.name="Poker",t.description="BETA version of Texas Hold'em Poker for the Saito Arcade. With five cards on the table and two in your hand, can you bet and bluff your way to victory? This game is a playable demo under active development!",t.categories="Games Arcade Entertainment",t.type="Classic Cardgame",t.card_img_dir="/poker/img/cards",t.useHUD=0,t.minPlayers=2,t.maxPlayers=6,t.interface=1,t.boardgameWidth=5100,t.settlement=[],t.updateHTML="",c(t,l(t))}return t=h,(r=[{key:"respondTo",value:function(e){if(null!=i(u(h.prototype),"respondTo",this).call(this,e))return i(u(h.prototype),"respondTo",this).call(this,e);if("arcade-carousel"==e){var t={background:"/poker/img/arcade/arcade-banner-background.png",title:"Poker"};return t}return"arcade-create-game"==e?{slug:this.slug,title:this.name,description:this.description,publisher_message:this.publisher_message,returnGameOptionsHTML:this.returnGameOptionsHTML.bind(this),minPlayers:this.minPlayers,maxPlayers:this.maxPlayers}:null}},{key:"initializeQueue",value:function(){this.game.queue=[],this.game.queue.push("round"),this.game.queue.push("READY"),2==this.game.players.length&&(this.game.queue.push("POOL\t1"),this.game.queue.push("DEAL\t1\t2\t2"),this.game.queue.push("DEAL\t1\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1")),3==this.game.players.length&&(this.game.queue.push("POOL\t1"),this.game.queue.push("DEAL\t1\t3\t2"),this.game.queue.push("DEAL\t1\t2\t2"),this.game.queue.push("DEAL\t1\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t3"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t3"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1")),4==this.game.players.length&&(this.game.queue.push("POOL\t1"),this.game.queue.push("DEAL\t1\t4\t2"),this.game.queue.push("DEAL\t1\t3\t2"),this.game.queue.push("DEAL\t1\t2\t2"),this.game.queue.push("DEAL\t1\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t4"),this.game.queue.push("DECKENCRYPT\t1\t3"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t4"),this.game.queue.push("DECKXOR\t1\t3"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t3"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1")),5==this.game.players.length&&(this.game.queue.push("POOL\t1"),this.game.queue.push("DEAL\t1\t5\t2"),this.game.queue.push("DEAL\t1\t4\t2"),this.game.queue.push("DEAL\t1\t3\t2"),this.game.queue.push("DEAL\t1\t2\t2"),this.game.queue.push("DEAL\t1\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t5"),this.game.queue.push("DECKENCRYPT\t1\t4"),this.game.queue.push("DECKENCRYPT\t1\t3"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t5"),this.game.queue.push("DECKXOR\t1\t4"),this.game.queue.push("DECKXOR\t1\t3"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1")),6==this.game.players.length&&(this.game.queue.push("POOL\t1"),this.game.queue.push("DEAL\t1\t6\t2"),this.game.queue.push("DEAL\t1\t5\t2"),this.game.queue.push("DEAL\t1\t4\t2"),this.game.queue.push("DEAL\t1\t3\t2"),this.game.queue.push("DEAL\t1\t2\t2"),this.game.queue.push("DEAL\t1\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t6"),this.game.queue.push("DECKENCRYPT\t1\t5"),this.game.queue.push("DECKENCRYPT\t1\t4"),this.game.queue.push("DECKENCRYPT\t1\t3"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t6"),this.game.queue.push("DECKXOR\t1\t5"),this.game.queue.push("DECKXOR\t1\t4"),this.game.queue.push("DECKXOR\t1\t3"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1")),7==this.game.players.length&&(this.game.queue.push("POOL\t1"),this.game.queue.push("DEAL\t1\t7\t2"),this.game.queue.push("DEAL\t1\t6\t2"),this.game.queue.push("DEAL\t1\t5\t2"),this.game.queue.push("DEAL\t1\t4\t2"),this.game.queue.push("DEAL\t1\t3\t2"),this.game.queue.push("DEAL\t1\t2\t2"),this.game.queue.push("DEAL\t1\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t7"),this.game.queue.push("DECKENCRYPT\t1\t6"),this.game.queue.push("DECKENCRYPT\t1\t5"),this.game.queue.push("DECKENCRYPT\t1\t4"),this.game.queue.push("DECKENCRYPT\t1\t3"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t7"),this.game.queue.push("DECKXOR\t1\t6"),this.game.queue.push("DECKXOR\t1\t5"),this.game.queue.push("DECKXOR\t1\t4"),this.game.queue.push("DECKXOR\t1\t3"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1")),8==this.game.players.length&&(this.game.queue.push("POOL\t1"),this.game.queue.push("DEAL\t1\t8\t2"),this.game.queue.push("DEAL\t1\t7\t2"),this.game.queue.push("DEAL\t1\t6\t2"),this.game.queue.push("DEAL\t1\t5\t2"),this.game.queue.push("DEAL\t1\t4\t2"),this.game.queue.push("DEAL\t1\t3\t2"),this.game.queue.push("DEAL\t1\t2\t2"),this.game.queue.push("DEAL\t1\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t8"),this.game.queue.push("DECKENCRYPT\t1\t7"),this.game.queue.push("DECKENCRYPT\t1\t6"),this.game.queue.push("DECKENCRYPT\t1\t5"),this.game.queue.push("DECKENCRYPT\t1\t4"),this.game.queue.push("DECKENCRYPT\t1\t3"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t8"),this.game.queue.push("DECKXOR\t1\t7"),this.game.queue.push("DECKXOR\t1\t6"),this.game.queue.push("DECKXOR\t1\t5"),this.game.queue.push("DECKXOR\t1\t4"),this.game.queue.push("DECKXOR\t1\t3"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1")),this.game.queue.push("DECK\t1\t"+JSON.stringify(this.returnDeck()))}},{key:"initializeHTML",value:function(e){var t=this;i(u(h.prototype),"initializeHTML",this).call(this,e),this.app.modules.respondTo("chat-manager").forEach((function(r){r.respondTo("chat-manager").render(e,t),r.respondTo("chat-manager").attachEvents(e,t)})),this.menu.addMenuOption({text:"Game",id:"game-game",class:"game-game",callback:function(e,t){t.menu.showSubMenu("game-game")}}),this.menu.addSubMenuOption("game-game",{text:"Log",id:"game-log",class:"game-log",callback:function(e,t){t.menu.hideSubMenus(),t.log.toggleLog()}}),this.menu.addSubMenuOption("game-game",{text:"Stats",id:"game-stats",class:"game-stats",callback:function(e,t){t.menu.hideSubMenus(),t.handleStatsMenu()}}),this.menu.addSubMenuOption("game-game",{text:"Exit",id:"game-exit",class:"game-exit",callback:function(e,t){window.location.href="/arcade"}}),this.menu.addMenuIcon({text:'<i class="fa fa-window-maximize" aria-hidden="true"></i>',id:"game-menu-fullscreen",callback:function(e,t){t.menu.hideSubMenus(),e.browser.requestFullscreen()}});for(var r=0,n=0,a=0;a<this.app.modules.mods.length;a++)if("chat"===this.app.modules.mods[a].slug)for(var o=0;o<this.game.players.length;o++)this.game.players[o]!=this.app.wallet.returnPublicKey()&&function(){0==r&&(t.menu.addMenuOption({text:"Chat",id:"game-chat",class:"game-chat",callback:function(e,t){t.menu.showSubMenu("game-chat")}}),r=1),0==n&&(t.menu.addSubMenuOption("game-chat",{text:"Community",id:"game-chat-community",class:"game-chat-community",callback:function(e,t){t.menu.hideSubMenus(),c.mute_community_chat=0,c.sendEvent("chat-render-request",{}),c.openChatBox()}}),n=1);var e=[t.game.players[o],t.app.wallet.returnPublicKey()].sort(),i=t.app.crypto.hash(e.join("_")),s="Player "+(o+1),c=t.app.modules.mods[a];t.menu.addSubMenuOption("game-chat",{text:s,id:"game-chat-"+(o+1),class:"game-chat-"+(o+1),callback:function(t,r){r.menu.hideSubMenus(),c.createChatGroup(e,s),c.openChatBox(i),c.sendEvent("chat-render-request",{}),c.saveChat()}})}();this.menu.render(e,this),this.menu.attachEvents(e,this),this.log.render(e,this),this.log.attachEvents(e,this)}},{key:"initializeGame",value:function(e){""!=this.game.status&&this.updateStatus(this.game.status),""==this.game.dice&&this.initializeDice(),0==this.game.deck.length&&(this.game.state=this.returnState(this.game.players.length),this.updateStatus("Generating the Game"),this.game.state.required_pot=this.game.state.big_blind,this.initializeQueue()),this.browser_active&&this.displayBoard()}},{key:"startNextRound",value:function(){this.game.state.turn=0,this.game.state.round++,console.log("Round: "+this.game.state.round),this.game.state.big_blind_player--,this.game.state.small_blind_player--,this.game.state.button_player--,this.game.state.big_blind_player<1&&(this.game.state.big_blind_player=this.game.players.length),this.game.state.small_blind_player<1&&(this.game.state.small_blind_player=this.game.players.length),this.game.state.button_player<1&&(this.game.state.button_player=this.game.players.length),this.game.state.tournament_blinds_level_up>0&&(this.game.state.tournament_blinds_per_level--,this.game.state.tournament_blinds_per_level<0&&(this.updateLog("Blinds increased to: "+game.state.big_blind+"/"+game.state.small_blind),this.game.state.tournament_blinds_per_level=this.game.state.tournament_blinds_per_level_max)),this.game.state.flipped=0,this.game.state.plays_since_last_raise=-1,this.game.state.started=0,this.game.state.pot=0,this.game.state.big_blind_paid=0,this.game.state.small_blind_paid=0,this.game.state.required_pot=0,this.game.state.last_raise=this.game.state.big_blind,this.game.state.required_pot=this.game.state.big_blind;for(var e=0;e<this.game.players.length;e++)this.game.state.passed[e]=0,this.game.state.player_pot[e]=0;if(this.game.state.player_credit.length>2)for(var t=0;t<this.game.state.player_credit.length;t++)this.game.state.player_credit[t]<=0&&(this.game.state.passed[t]=1,this.game.state.player_credit[t]=0,this.game.player==t+1&&this.updateLog("You have been removed from the game."),this.game.state.player_names.splice(t,1),this.game.state.player_pot.splice(t,1),this.game.state.player_credit.splice(t,1),this.game.state.passed.splice(t,1),this.removePlayer(this.game.players[t]),this.game.state.big_blind_player>this.game.players.length&&(this.game.state.big_blind_player=1,this.game.state.small_blind_player=2),this.game.state.small_blind_player>this.game.players.length&&(this.game.state.small_blind_player=1),this.game.queue=[],t--);for(var r=0;r<this.game.players.length;r++)this.game.players[r]===this.app.wallet.returnPublicKey()&&(this.game.player=r+1);this.updateLog("Table "+this.game.id.substring(0,10)+", Seat #"+this.game.state.button_player+" is the button\n\n");for(var n=0;n<this.game.players.length;n++)this.updateLog("Seat "+(n+1)+": "+this.game.state.player_names[n]+" ("+this.game.state.player_credit+")");if(this.updateLog("Round: "+this.game.state.round),document.querySelectorAll(".plog").forEach((function(e){e.innerHTML=""})),this.initializeQueue(),""!=this.game.crypto)for(var a=0;a<this.settlement.length;a++)this.game.queue.push(this.settlement[a]);this.settlement=[],this.displayBoard()}},{key:"handleGameLoop",value:function(){var e=this;if(this.game.queue.length>0){var t=this.game.queue.length-1,r=this.game.queue[t].split("\t"),n=1;if(console.log("QUEUE: "+JSON.stringify(this.game.queue)),"notify"==r[0]&&(this.updateLog(r[1]),this.game.queue.splice(t,1)),"winner"===r[0])return this.updateStatus("Game Over: "+this.game.state.player_names[r[1]-1]+" wins!"),this.updateLog("Game Over: "+this.game.state.player_names[r[1]-1]+" wins!"),this.showSplash("<h1>Game Over: "+this.game.state.player_names[r[1]-1]+" wins!</h1>"+this.updateHTML),this.game.winner=this.game.players[r[1]-1],this.resignGame(this.game.id),0;if("resolve"===r[0])return this.game.queue.splice(t-1,2),1;if("turn"===r[0]){var a=parseInt(r[1]);this.displayBoard();for(var i=0,o=0;o<this.game.state.player_credit.length;o++)(this.game.state.player_credit[o]>0||0==this.game.state.passed[o]&&this.game.state.turn>2)&&i++;if(1==i&&1==this.game.state.turn){for(var s=0;s<this.game.state.player_credit.length;s++)if(this.game.state.player_credit[s]>0&&s==this.game.player-1)return this.addMove("winner\t"+this.game.player),this.endTurn(),0;return this.updateStatus("Game Over"),0}for(var c=0,l=0,u=0;u<this.game.state.passed.length;u++)0==this.game.state.passed[u]&&c++;if(1==c){for(var d=0;d<this.game.state.passed.length;d++)0==this.game.state.passed[d]&&(this.game.state.pot,this.game.state.player_pot,this.updateLog(this.game.state.player_names[d]+" wins "+this.game.state.pot),this.game.state.player_credit[d]+=this.game.state.pot,l=d);if(""!=this.game.crypto)for(var h=0;h<this.game.players.length;h++)this.game.state.player_pot[h]>0&&(this.game.player-1==l?h!=l&&this.settlement.push("RECEIVE\t"+this.game.players[h]+"\t"+this.game.players[l]+"\t"+this.game.state.player_pot[h]+"\t"+(new Date).getTime()+"\t"+this.game.crypto):h!=l&&(this.settlement.push("RECEIVE\t"+this.game.players[h]+"\t"+this.game.players[l]+"\t"+this.game.state.player_pot[h]+"\t"+(new Date).getTime()+"\t"+this.game.crypto),this.settlement.push("SEND\t"+this.game.players[h]+"\t"+this.game.players[l]+"\t"+this.game.state.player_pot[h]+"\t"+(new Date).getTime()+"\t"+this.game.crypto)));return this.startNextRound(),1}if(this.game.state.plays_since_last_raise>=this.game.players.length){if(5==this.game.state.flipped){this.game.state.player_cards={},this.game.state.player_cards_reported=0,this.game.state.player_cards_required=0;for(var p=-1,f=0;f<this.game.state.passed.length;f++)0==this.game.state.passed[f]&&(-1==p&&(p=f),this.game.state.player_cards_required++,this.game.state.player_cards[f]=[]);return p==this.game.player-1&&(this.addMove("reveal\t"+this.game.player+"\t"+this.game.deck[0].hand[0]+"\t"+this.game.deck[0].hand[1]),this.endTurn()),0}var m=1;0==this.game.state.flipped&&(m=3),this.game.state.flipped+=m,this.game.queue.push("announce");for(var g=0;g<m;g++){for(var y=this.game.players.length-1;y>=0;y--)this.game.queue.push("FLIPCARD\t1\t1\t1\t"+(y+1));this.game.queue.push("FLIPRESET\t1")}return 0==this.game.player&&this.game.queue.push("OBSERVER_CHECKPOINT"),this.game.state.plays_since_last_raise=0,1}return this.game.state.plays_since_last_raise++,0==this.game.state.plays_since_last_raise&&this.game.state.plays_since_last_raise++,this.game.state.turn++,1==this.game.state.passed[a-1]?(this.game.queue.splice(t,1),1):parseInt(r[1])==this.game.player?(this.playerTurn(),0):(this.updateStatus("Waiting for "+this.game.state.player_names[r[1]-1]),this.updatePlayerLog(parseInt(r[1]),"player turn"),0)}if("announce"===r[0])return this.game.queue.splice(t,1),0===this.game.state.flipped&&this.updateLog("*** HOLE CARDS *** ["+this.cardToHuman(this.game.deck[0].hand[0])+" "+this.cardToHuman(this.game.deck[0].hand[1])+"]"),3===this.game.state.flipped&&this.updateLog("*** FLOP *** ["+this.cardToHuman(this.game.pool[0].hand[0])+" "+this.cardToHuman(this.game.pool[0].hand[1])+" "+this.cardToHuman(this.game.pool[0].hand[2])+"]"),4===this.game.state.flipped&&this.updateLog("*** TURN *** ["+this.cardToHuman(this.game.pool[0].hand[0])+" "+this.cardToHuman(this.game.pool[0].hand[1])+" "+this.cardToHuman(this.game.pool[0].hand[2])+"] ["+this.cardToHuman(this.game.pool[0].hand[3])+"]"),5===this.game.state.flipped&&this.updateLog("*** TURN *** ["+this.cardToHuman(this.game.pool[0].hand[0])+" "+this.cardToHuman(this.game.pool[0].hand[1])+" "+this.cardToHuman(this.game.pool[0].hand[2])+"] ["+this.cardToHuman(this.game.pool[0].hand[3])+"] ["+this.cardToHuman(this.game.pool[0].hand[4])+"]"),1;if("reveal"===r[0]){var v=this,b=parseInt(r[1]),_=r[2],w=r[3];this.game.state.player_cards[b-1].push(this.returnCardFromDeck(_)),this.game.state.player_cards[b-1].push(this.returnCardFromDeck(w)),this.game.state.player_cards[b-1].push(this.returnCardFromDeck(this.game.pool[0].hand[0])),this.game.state.player_cards[b-1].push(this.returnCardFromDeck(this.game.pool[0].hand[1])),this.game.state.player_cards[b-1].push(this.returnCardFromDeck(this.game.pool[0].hand[2])),this.game.state.player_cards[b-1].push(this.returnCardFromDeck(this.game.pool[0].hand[3])),this.game.state.player_cards[b-1].push(this.returnCardFromDeck(this.game.pool[0].hand[4]));var x=[];this.game.state.player_cards_reported++;for(var k=-1,S=b;S<this.game.state.passed.length;S++)0==this.game.state.passed[S]&&-1==k&&(k=S);if(this.game.state.player_cards_reported==this.game.state.player_cards_required){var E=null,A="",P=[];for(var C in this.game.state.player_cards)if(E=this.game.state.player_cards[C],0==P.length)P.splice(0,0,{player:parseInt(C)+1,player_hand:this.scoreHand(E)});else{for(var D=P.length,T=0,O=0;O<D;O++)v.pickWinner(P[O].player_hand,v.scoreHand(E))>1&&(T=O+1);P.splice(T,0,{player:parseInt(C)+1,player_hand:v.scoreHand(E)})}x.push(P[P.length-1].player-1);for(var M=P.length-1;M>0;M--)3==v.pickWinner(P[P.length-1].player_hand,P[M-1].player_hand)&&x.push(P[M-1].player-1);var I="";if(1==x.length?I+="<h2>"+this.game.state.player_names[x[0]]+" takes the pot!</h2>":(x.forEach((function(t){I+=e.game.state.player_names[t]+", "})),I="<h2>"+I.replace(/,([^,])$/,"").replace(/,([^,]*)$/," and$1")+" split the pot!</h2>"),P.forEach((function(t){v.updateLog(v.game.state.player_names[t.player-1]+": "+t.player_hand.hand_description+" <br />&nbsp;&nbsp;"+v.toHuman(t.player_hand.cards_to_score)),A=e.toHTMLHAND(t.player_hand.cards_to_score)+A,A="<h3>"+v.game.state.player_names[t.player-1]+": "+t.player_hand.hand_description+"</h3>"+A})),A=I+A,this.updateLog(I),this.showSplash(A),this.updateHTML=A,console.log("WINNERS LENGTH: "+x.length),x.length>1){console.log("winners are all");for(var R=Math.floor(this.game.state.pot/x.length),F=0;F<x.length;F++)this.updateLog(this.game.state.player_names[x[F]]+" splits pot and wins "+R),this.game.state.player_credit[x[F]]+=R;this.game.state.player_pot[this.game.player-1],x.length;for(var B=0;B<x.length;B++)if(""!=this.game.crypto)for(var j=0;j<this.game.players.length;j++)!x.includes(j)&&this.game.state.player_pot[j]>0&&(this.settlement.push("RECEIVE\t"+this.game.players[j]+"\t"+this.game.players[x[B]]+"\t"+this.game.state.player_pot[j]/x.length+"\t"+(new Date).getTime()+"\t"+this.game.crypto),this.settlement.push("SEND\t"+this.game.players[j]+"\t"+this.game.players[x[B]]+"\t"+this.game.state.player_pot[j]/x.length+"\t"+(new Date).getTime()+"\t"+this.game.crypto))}else if(this.updateLog(this.game.state.player_names[x[0]]+" wins "+this.game.state.pot),this.game.state.player_credit[x[0]]+=this.game.state.pot,""!=this.game.crypto)for(var N=0;N<this.game.players.length;N++)!x.includes(N)&&this.game.state.player_pot[N]>0&&(this.settlement.push("RECEIVE\t"+this.game.players[N]+"\t"+this.game.players[x[0]]+"\t"+this.game.state.player_pot[N]+"\t"+(new Date).getTime()+"\t"+this.game.crypto),this.settlement.push("SEND\t"+this.game.players[N]+"\t"+this.game.players[x[0]]+"\t"+this.game.state.player_pot[N]+"\t"+(new Date).getTime()+"\t"+this.game.crypto));return this.startNextRound(),1}return this.game.player-1==k&&(this.addMove("reveal\t"+this.game.player+"\t"+this.game.deck[0].hand[0]+"\t"+this.game.deck[0].hand[1]),this.endTurn()),0}if("round"===r[0]){if(this.displayBoard(),0==this.game.state.turn&&(this.game.state.player_credit[this.game.state.big_blind_player-1]<=this.game.state.big_blind?(this.game.state.player_credit[this.game.state.big_blind_player-1]==this.game.state.big_blind?this.updateLog(this.game.state.player_names[this.game.state.big_blind_player-1]+" posts big blind "+this.game.state.big_blind):this.updateLog(this.game.state.player_names[this.game.state.big_blind_player-1]+" posts remaining tokens as big blind and is removed from game"),this.game.state.player_pot[this.game.state.big_blind_player-1]+=this.game.state.player_credit[this.game.state.big_blind_player-1],this.game.state.pot+=this.game.state.player_credit[this.game.state.big_blind_player-1],this.game.state.player_credit[this.game.state.big_blind_player-1]=0,this.game.state.passed[this.game.state.big_blind_player-1]=1):(this.updateLog(this.game.state.player_names[this.game.state.big_blind_player-1]+" posts big blind "+this.game.state.big_blind),this.game.state.player_pot[this.game.state.big_blind_player-1]+=this.game.state.big_blind,this.game.state.pot+=this.game.state.big_blind,this.game.state.player_credit[this.game.state.big_blind_player-1]-=this.game.state.big_blind),this.game.state.player_credit[this.game.state.small_blind_player-1]<=this.game.state.small_blind?(this.game.state.player_credit[this.game.state.small_blind_player-1]<=this.game.state.small_blind?this.updateLog(this.game.state.player_names[this.game.state.small_blind_player-1]+" posts small blind "+this.game.state.small_blind):this.updateLog(this.game.state.player_names[this.game.state.small_blind_player-1]+" posts remaining tokens as small blind and is removed from the game"),this.game.state.player_pot[this.game.state.small_blind_player-1]+=this.game.state.player_credit[this.game.state.small_blind_player-1],this.game.state.pot+=this.game.state.player_credit[this.game.state.small_blind_player-1],this.game.state.player_credit[this.game.state.small_blind_player-1]=0,this.game.state.passed[this.game.state.small_blind_player-1]=1):(this.updateLog(this.game.state.player_names[this.game.state.small_blind_player-1]+" posts small blind "+this.game.state.small_blind),this.game.state.player_pot[this.game.state.small_blind_player-1]+=this.game.state.small_blind,this.game.state.pot+=this.game.state.small_blind,this.game.state.player_credit[this.game.state.small_blind_player-1]-=this.game.state.small_blind)),this.game.state.turn++,this.game.state.required_pot<this.game.state.big_blind&&(this.game.state.required_pot=this.game.state.big_blind),this.updateStatus("Opponent is Speaking"),0==this.game.state.flipped&&this.game.state.plays_since_last_raise<this.game.players.length)for(var q=this.game.state.big_blind_player;q<=this.game.state.big_blind_player+this.game.players.length-1;q++){var L=q%this.game.players.length;0==L&&(L=this.game.players.length),this.game.queue.push("turn\t"+L)}else for(var U=this.game.state.button_player;U<=this.game.state.button_player+this.game.players.length-1;U++){var z=U%this.game.players.length;0==z&&(z=this.game.players.length),this.game.queue.push("turn\t"+z)}1==this.game.state.turn&&this.game.queue.push("announce")}if("call"===r[0]){var H=parseInt(r[1]),$=0;this.updatePlayerLog(H,"call"),this.game.state.required_pot>this.game.state.player_pot[H-1]&&($=this.game.state.required_pot-this.game.state.player_pot[H-1]),this.updateLog(this.game.state.player_names[H-1]+" calls"),this.game.state.player_credit[H-1]-=$,this.game.state.player_pot[H-1]+=$,this.game.state.pot+=$,this.game.queue.splice(t,1)}if("fold"===r[0]){var G=parseInt(r[1]);this.updatePlayerLog(G,"fold"),this.updateLog(this.game.state.player_names[G-1]+" folds"),this.game.state.passed[G-1]=1,this.game.queue.splice(t,1);for(var K=0,V=-1,W=0;W<this.game.state.passed.length;W++)0==this.game.state.passed&&(K++,V=W);if(1==K){if(this.game.state.player_credit[V]=this.game.state.pot,""!=this.game.crypto)for(var Y=0;Y<this.game.players.length;Y++)Y!=V&&(this.game.player-1==V?Y!=V&&this.settlement.push("RECEIVE\t"+this.game.players[Y]+"\t"+this.game.players[V]+"\t"+this.game.state.player_pot[Y]+"\t"+(new Date).getTime()+"\t"+this.game.crypto):Y!=V&&(this.settlement.push("RECEIVE\t"+this.game.players[Y]+"\t"+this.game.players[V]+"\t"+this.game.state.player_pot[Y]+"\t"+(new Date).getTime()+"\t"+this.game.crypto),this.settlement.push("SEND\t"+this.game.players[Y]+"\t"+this.game.players[V]+"\t"+this.game.state.player_pot[Y]+"\t"+(new Date).getTime()+"\t"+this.game.crypto)));this.startNextRound()}}if("check"===r[0]){var J=parseInt(r[1]);this.game.queue.splice(t,1),this.updateLog(this.game.state.player_names[J-1]+" checks.")}if("raise"==r[0]){var Q=parseInt(r[1]),X=parseFloat(r[2]),Z=0,ee=0;console.log("plays since last raise is now 1 because of raise..."),this.game.state.plays_since_last_raise=1,this.game.state.required_pot>this.game.state.player_pot[Q-1]?(ee=X-(Z=this.game.state.required_pot-this.game.state.player_pot[Q-1]),this.game.state.player_credit[Q-1]-=Z,this.game.state.player_pot[Q-1]+=Z,this.game.state.pot+=Z,this.game.state.player_credit[Q-1]-=ee,this.game.state.player_pot[Q-1]+=ee,this.game.state.required_pot+=ee,this.game.state.pot+=ee,ee>0&&(this.game.state.last_raise=ee),ee>0?(this.updateLog(this.game.state.player_names[Q-1]+" raises "+ee+" to "+this.game.state.player_pot[Q-1]),this.updatePlayerLog(Q,"raises "+ee)):this.updateLog(this.game.state.player_names[Q-1]+" calls "+Z+".")):(this.game.state.player_credit[Q-1]-=X,this.game.state.player_pot[Q-1]+=X,this.game.state.required_pot+=X,this.game.state.pot+=X,this.game.state.last_raise=X,this.updateLog(this.game.state.player_names[Q-1]+" raises "+X+" to "+this.game.state.player_pot[Q-1]),this.updatePlayerLog(Q,"raises "+X)),this.game.queue.splice(t,1)}if(0==n)return console.log("NOT CONTINUING"),0}return 1}},{key:"playerTurn",value:function(){if(0!=this.browser_active){var e=this;e.moves.includes("resolve\tturn")||e.addMove("resolve\tturn"),this.displayBoard();var t=this.game.state.required_pot-this.game.state.player_pot[this.game.player-1],r=this.game.state.last_raise,n="",a=1,i=1;this.game.state.player_credit[this.game.state.player-1]<t&&(a=0),this.game.state.player_credit[this.game.state.player-1]<t+this.game.state.last_raise&&(i=0);var o=e.game.options.stake*e.game.players.length;if(e.game.state.player_credit.forEach((function(t,r){o>t&&0==e.game.state.passed[r]&&(o=t)})),o<=t&&(i=0),0==a&&0==i)return this.updateStatus("You can only fold..."),this.addMove("fold\t"+e.game.player),void this.endTurn();n+='<div class="menu-player" style="text-align:left;width:100%">',n+='<div style="float:right;" class="saito-balance">'.concat(this.sizeNumber(this.game.state.player_credit[this.game.player-1])," ").concat(this.game.crypto,"</div>Your move:</div>"),n+="<ul>";var s=this.game.state.required_pot-this.game.state.player_pot[this.game.player-1];s<0&&(s=0),this.game.state.required_pot>this.game.state.player_pot[this.game.player-1]?(n+='<li class="menu_option" id="fold">fold</li>',1==a&&s<=0&&(n+='<li class="menu_option" id="call">call</li>'),1==a&&s>0&&(n+='<li class="menu_option" id="call">call ('+this.sizeNumber(s)+")</li>"),1==i&&s<=0&&(n+='<li class="menu_option" id="raise">raise</li>'),1==i&&s>0&&(n+='<li class="menu_option" id="raise">raise ('+this.sizeNumber(s)+"+)</li>"),n+="</ul>",this.updateStatus(n,1)):this.game.state.required_pot<=this.game.state.player_credit[this.game.player-1]?(n+='<li class="menu_option" id="fold">fold</li>',n+='<li class="menu_option" id="check">check</li>',1==i&&(n+='<li class="menu_option" id="raise">raise</li>'),n+="</ul>",this.updateStatus(n,1)):(n+='<li class="menu_option" id="fold">fold</li>',n+='<li class="menu_option" id="check">check</li>',n+="</ul>",this.updateStatus(n,1)),$(".menu_option").off(),$(".menu_option").on("click",(function(){var t=$(this).attr("id");if("fold"===t&&(e.addMove("fold\t"+e.game.player),e.endTurn()),"check"===t&&(e.addMove("check\t"+e.game.player),e.endTurn()),"call"===t&&(e.addMove("call\t"+e.game.player),e.endTurn()),"raise"===t){r=parseFloat(r);var a=e.game.state.player_credit[e.game.player-1],i=(e.game.state.player_credit[e.game.player-1],e.game.options.stake*e.game.players.length),o=0;e.game.state.player_credit.forEach((function(t,r){i>t&&0==e.game.state.passed[r]&&(i=t,o=r)})),e.game.state.last_raise=parseFloat(e.game.state.last_raise);var c=e.game.state.required_pot-e.game.state.player_pot[e.game.player-1];c<0&&(c=0),n=c>0?"Match "+e.sizeNumber(c)+" and raise: <p></p><ul>":"Please select an option below: <p></p><ul>",n+='<li class="menu_option" id="0">cancel raise</li>',console.log("raise required: "+r),console.log("credit remaining: "+a),console.log("smallest stack: "+i);for(var l=0;l<6;l++){var u=r+l*e.game.state.last_raise;console.log("this raise: "+u),a>u&&i>u?u-c>0&&(n+='<li class="menu_option" id="'+(u-c)+'">raise '+e.sizeNumber(u-c)+"</li>"):i<u&&(i==a?(n+='<li class="menu_option" id="'+(i-c)+'">raise '+e.sizeNumber(i-c)+" ("+e.game.state.player_names[o]+" all in)</li>",l=6):(n+='<li class="menu_option" id="'+i+'">raise '+e.sizeNumber(i)+" ("+e.game.state.player_names[o]+" all in)</li>",l=6))}n+="</ul>",e.updateStatus(n),$(".menu_option").off(),$(".menu_option").on("click",(function(){var t=$(this).attr("id");s>0&&(t=parseFloat(t)+parseFloat(s)),0!=t?(e.addMove("raise\t"+e.game.player+"\t"+t),e.endTurn()):e.playerTurn()}))}}))}}},{key:"sizeNumber",value:function(e){return e>=100?Math.floor(e):e.toString().substring(0,6)}},{key:"displayBoard",value:function(){if(0!=this.browser_active)try{this.displayPlayers(),this.displayHand(),this.displayTable()}catch(e){console.log("err: "+e)}}},{key:"returnState",value:function(e){var t={round:0,new_round:0,turn:0,flipped:0,player_cards:{},player_cards_reported:0,player_cards_required:0,plays_since_last_raise:-1,started:0,pot:0,player_names:[],player_pot:[],player_credit:[],passed:[],big_blind:50,small_blind:25,big_blind_player:1,small_blind_player:2,button_player:3,small_blind_is_button:0};2==e&&(t.button_player=2),t.big_blind_paid=0,t.small_blind_paid=0,t.required_pot=0,t.last_raise=t.big_blind,t.blinds_idx=0,t.blinds_array=[{big:.001,small:5e-4},{big:.002,small:.001},{big:.004,small:.002},{big:.008,small:.004},{big:.015,small:.008},{big:.03,small:.015},{big:.06,small:.03},{big:.12,small:.06},{big:.25,small:.12},{big:.5,small:.25},{big:1,small:.5},{big:2,small:1},{big:4,small:2},{big:8,small:4},{big:15,small:8},{big:30,small:15},{big:60,small:30},{big:120,small:60},{big:250,small:125},{big:500,small:250},{big:1e3,small:500}],t.tournament_blinds_per_level=12,t.tournament_blinds_per_level_max=12,"increase"===this.game.options.blinds?t.tournament_blinds_level_up=1:t.tournament_blinds_level_up=0,null!=this.game.options.crypto&&(this.game.crypto=this.game.options.crypto);for(var r=0;r<e;r++)t.passed[r]=0;for(var n=0;n<e;n++)t.player_pot[n]=0;for(var a=0;a<e;a++)t.player_names[a]=this.app.keys.returnIdentifierByPublicKey(this.game.players[a],1),t.player_names[a].indexOf("@")>0&&(t.player_names[a]=t.player_names[a].substring(0,t.player_names[a].indexOf("@"))),t.player_names[a]===this.game.players[a]&&(t.player_names[a]=this.game.players[a].substring(0,10)+"...");for(var i=0;i<e;i++)t.player_credit[i]=100,null!=this.game.options.stake&&(t.player_credit[i]=parseFloat(this.game.options.stake));return t.big_blind=parseFloat(this.game.options.big_blind),t.small_blind=t.big_blind/2,t.last_raise=t.big_blind,console.log("STATE: "+JSON.stringify(t)),t}},{key:"returnCardFromDeck",value:function(e){var t=this.returnDeck()[e];return t.name.substring(0,t.name.indexOf("."))}},{key:"returnDeck",value:function(){var e={1:{name:"S1.png"},2:{name:"S2.png"},3:{name:"S3.png"},4:{name:"S4.png"},5:{name:"S5.png"},6:{name:"S6.png"},7:{name:"S7.png"},8:{name:"S8.png"},9:{name:"S9.png"},10:{name:"S10.png"},11:{name:"S11.png"},12:{name:"S12.png"},13:{name:"S13.png"},14:{name:"C1.png"},15:{name:"C2.png"},16:{name:"C3.png"},17:{name:"C4.png"},18:{name:"C5.png"},19:{name:"C6.png"},20:{name:"C7.png"},21:{name:"C8.png"},22:{name:"C9.png"},23:{name:"C10.png"},24:{name:"C11.png"},25:{name:"C12.png"},26:{name:"C13.png"},27:{name:"H1.png"},28:{name:"H2.png"},29:{name:"H3.png"},30:{name:"H4.png"},31:{name:"H5.png"},32:{name:"H6.png"},33:{name:"H7.png"},34:{name:"H8.png"},35:{name:"H9.png"},36:{name:"H10.png"},37:{name:"H11.png"},38:{name:"H12.png"},39:{name:"H13.png"},40:{name:"D1.png"},41:{name:"D2.png"},42:{name:"D3.png"},43:{name:"D4.png"},44:{name:"D5.png"},45:{name:"D6.png"},46:{name:"D7.png"},47:{name:"D8.png"},48:{name:"D9.png"},49:{name:"D10.png"},50:{name:"D11.png"},51:{name:"D12.png"},52:{name:"D13.png"}};return e}},{key:"updatePlayerLog",value:function(e,t){var r="#player-info-log-"+e,n=document.querySelector(r);n&&(n.innerHTML=t)}},{key:"returnPlayersBoxArray",value:function(){var e=[];return 2==this.game.players.length&&(e=[1,4]),3==this.game.players.length&&(e=[1,3,5]),4==this.game.players.length&&(e=[1,3,4,5]),5==this.game.players.length&&(e=[1,2,3,5,6]),6==this.game.players.length&&(e=[1,2,3,4,5,6]),e}},{key:"returnViewBoxArray",value:function(){var e=[];return 2==this.game.players.length&&(e=[3,5]),3==this.game.players.length&&(e=[3,4,5]),4==this.game.players.length&&(e=[2,3,5,6]),5==this.game.players.length&&(e=[2,3,4,5,6]),e}},{key:"displayPlayers",value:function(){var e="",t="";this.game.players.includes(this.app.wallet.returnPublicKey())?(e=this.returnPlayersBoxArray(),t=this.game.players.indexOf(this.app.wallet.returnPublicKey())):(document.querySelector(".status").innerHTML="You are out of the game.<br />Feel free to hang out and chat.",document.querySelector(".cardfan").classList.add("hidden"),e=this.returnViewBoxArray());for(var r=2;r<7;r++){var n=document.querySelector("#player-info-"+r);e.includes(r)?n.style.display="block":n.style.display="none"}for(var a=0;a<this.game.players.length;a++){var i=a-t;i<0&&(i+=this.game.players.length);var o="#player-info-"+e[i],s=document.querySelector(o),c='\n      <div class="player-info-hand hand tinyhand" id="player-info-hand-'.concat(a+1,'">\n      ');c+='\n          <img class="card" src="'.concat(this.card_img_dir,'/red_back.png">\n          <img class="card" src="').concat(this.card_img_dir,'/red_back.png">\n      '),c+='\n        </div>\n        <div class="player-info-name" id="player-info-name-'.concat(a+1,'">').concat(this.game.state.player_names[a],'</div>\n        <div class="player-info-chips" id="player-info-chips-').concat(a+1,'">').concat(this.sizeNumber(this.game.state.player_credit[a])," ").concat(this.game.crypto,"</div> \n        \n      "),s.querySelector(".info").innerHTML=c,""==s.querySelector(".plog").innerHTML&&(s.querySelector(".plog").innerHTML+='<div class="player-info-log" id="player-info-log-'.concat(a+1,'"></div>'))}document.querySelector(".dealer").innerHTML=this.game.state.big_blind_player;var l=1+(this.game.players.length+this.game.state.big_blind_player+1)%this.game.players.length;document.querySelector("#player-info-name-"+l).classList.add("dealerbutton"),document.querySelector("#player-info-name-"+this.game.state.big_blind_player).classList.add("bigblind"),document.querySelector("#player-info-name-"+this.game.state.small_blind_player).classList.add("smallblind")}},{key:"displayHand",value:function(){this.cardfan.render(this.app,this),this.cardfan.attachEvents(this.app,this)}},{key:"displayTable",value:function(){document.querySelector("#deal").innerHTML="";for(var e=0;e<5||e<this.game.pool[0].hand.length;e++){var t={};e<this.game.pool[0].hand.length?t=this.game.pool[0].cards[this.game.pool[0].hand[e]]:t.name="red_back.png";var r='<img class="card" src="'.concat(this.card_img_dir,"/").concat(t.name,'">');document.querySelector("#deal").innerHTML+=r}document.querySelector(".pot").innerHTML=this.sizeNumber(this.game.state.pot)}},{key:"addMove",value:function(e){this.moves.push(e)}},{key:"endTurn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.updateStatus("Waiting for information from peers....");try{$(".menu_option").off()}catch(e){}var t={};t.target=this.returnNextPlayer(this.game.player),0!=e&&(t.target=e),this.game.turn=this.moves,this.moves=[],this.sendMessage("game",t)}},{key:"pickWinner",value:function(e,t){for(var r=0,n=0;n<e.cards_to_score.length;n++)e.cards_to_score[n]!==t.cards_to_score[n]&&(r=1);if(0==r)return 3;if("royal flush"==e.hand_description&&"royal flush"==t.hand_description)for(var a=0;a<e.cards_to_score.length;a++)return this.returnHigherCard(e.cards_to_score[a],t.cards_to_score[a])==e.cards_to_score[a]?1:2;if("royal flush"==e.hand_description)return 1;if("royal flush"==t.hand_description)return 2;if("straight flush"==e.hand_description&&"straight flush"==t.hand_description){for(var i=0;i<e.cards_to_score.length;i++){if(this.returnHigherNumberCard(e.cards_to_score[i],t.cards_to_score[i])==e.cards_to_score[i])return 1;if(this.returnHigherNumberCard(e.cards_to_score[i],t.cards_to_score[i])==t.cards_to_score[i])return 2}return 3}if("straight flush"==e.hand_description)return 1;if("straight flush"==t.hand_description)return 2;if("four-of-a-kind"==e.hand_description&&"four-of-a-kind"==t.hand_description)return this.returnHigherNumberCard(e.cards_to_score[0],t.cards_to_score[0])==e.cards_to_score[0]?1:this.returnHigherNumberCard(e.cards_to_score[0],t.cards_to_score[0])==t.cards_to_score[0]?2:this.returnHigherNumberCard(e.cards_to_score[4],t.cards_to_score[4])==e.cards_to_score[4]?1:this.returnHigherNumberCard(e.cards_to_score[4],t.cards_to_score[4])==t.cards_to_score[4]?2:3;if("four-of-a-kind"==e.hand_description)return 1;if("four-of-a-kind"==t.hand_description)return 2;if("full house"==e.hand_description&&"full house"==t.hand_description)return this.returnHigherNumberCard(e.cards_to_score[0],t.cards_to_score[0])==e.cards_to_score[0]?1:this.returnHigherNumberCard(e.cards_to_score[0],t.cards_to_score[0])==t.cards_to_score[0]?2:this.returnHigherNumberCard(e.cards_to_score[3],t.cards_to_score[3])==e.cards_to_score[3]?1:this.returnHigherNumberCard(e.cards_to_score[3],t.cards_to_score[3])==t.cards_to_score[3]?2:3;if("full house"==e.hand_description)return 1;if("full house"==t.hand_description)return 2;if("flush"==e.hand_description&&"flush"==t.hand_description){for(var o=0;o<e.cards_to_score.length;o++){if(this.returnHigherCard(e.cards_to_score[o],t.cards_to_score[o])==e.cards_to_score[o])return 1;if(this.returnHigherCard(e.cards_to_score[o],t.cards_to_score[o])==t.cards_to_score[o])return 2}return 3}if("flush"==e.hand_description)return 1;if("flush"==t.hand_description)return 2;if("straight"==e.hand_description&&"straight"==t.hand_description){for(var s=0;s<e.cards_to_score.length;s++){if(this.returnHigherNumberCard(e.cards_to_score[s],t.cards_to_score[s])==e.cards_to_score[s])return 1;if(this.returnHigherNumberCard(e.cards_to_score[s],t.cards_to_score[s])==t.cards_to_score[s])return 2}return 3}if("straight"==e.hand_description)return 1;if("straight"==t.hand_description)return 2;if("three-of-a-kind"==e.hand_description&&"three-of-a-kind"==t.hand_description){if(this.returnHigherNumberCard(e.cards_to_score[0],t.cards_to_score[0])==e.cards_to_score[0])return 1;if(this.returnHigherNumberCard(e.cards_to_score[0],t.cards_to_score[0])==t.cards_to_score[0])return 2;for(var c=3;c<5;c++){if(this.returnHigherNumberCard(e.cards_to_score[c],t.cards_to_score[c])==e.cards_to_score[c])return 1;if(this.returnHigherNumberCard(e.cards_to_score[c],t.cards_to_score[c])==t.cards_to_score[c])return 2}return 3}if("three-of-a-kind"==e.hand_description)return 1;if("three-of-a-kind"==t.hand_description)return 2;if("two pair"==e.hand_description&&"two pair"==t.hand_description)return this.returnHigherNumberCard(e.cards_to_score[0],t.cards_to_score[0])==e.cards_to_score[0]?1:this.returnHigherNumberCard(e.cards_to_score[0],t.cards_to_score[0])==t.cards_to_score[0]?2:this.returnHigherNumberCard(e.cards_to_score[2],t.cards_to_score[2])==e.cards_to_score[2]?1:this.returnHigherNumberCard(e.cards_to_score[2],t.cards_to_score[2])==t.cards_to_score[2]?2:this.returnHigherNumberCard(e.cards_to_score[4],t.cards_to_score[4])==e.cards_to_score[4]?1:this.returnHigherNumberCard(e.cards_to_score[4],t.cards_to_score[4])==t.cards_to_score[4]?2:3;if("two pair"==e.hand_description)return 1;if("two pair"==t.hand_description)return 2;if("pair"==e.hand_description&&"pair"==t.hand_description)return this.returnHigherNumberCard(e.cards_to_score[0],t.cards_to_score[0])==e.cards_to_score[0]?1:this.returnHigherNumberCard(e.cards_to_score[0],t.cards_to_score[0])==t.cards_to_score[0]?2:this.returnHigherNumberCard(e.cards_to_score[2],t.cards_to_score[2])==e.cards_to_score[2]?1:this.returnHigherNumberCard(e.cards_to_score[2],t.cards_to_score[2])==t.cards_to_score[2]?2:this.returnHigherNumberCard(e.cards_to_score[4],t.cards_to_score[4])==e.cards_to_score[4]?1:this.returnHigherNumberCard(e.cards_to_score[4],t.cards_to_score[4])==t.cards_to_score[4]?2:3;if("pair"==e.hand_description)return 1;if("pair"==t.hand_description)return 2;if("highest card"==e.hand_description&&"highest card"==t.hand_description){for(var l=0;l<e.cards_to_score.length;l++){if(this.returnHigherNumberCard(e.cards_to_score[l],t.cards_to_score[l])==e.cards_to_score[l])return 1;if(this.returnHigherNumberCard(e.cards_to_score[l],t.cards_to_score[l])==t.cards_to_score[l])return 2}return 3}return"highest card"==e.hand_description?1:"highest card"==t.hand_description?2:void 0}},{key:"scoreHand",value:function(e){var t=this.convertHand(e),r=t.suite,n=t.val,a=0,i=[],o=[],s=[],c=[];for(a=1;a<14;){var l=this.isTwo(r,n,a);0==l?a=14:(i.push(l),a=l+1)}for(i.sort((function(e,t){return e-t})),a=1;a<14;){var u=this.isThree(r,n,a);0==u?a=14:(o.push(u),a=u+1)}for(o.sort((function(e,t){return e-t})),a=1;a<14;){var d=this.isFour(r,n,a);0==d?a=14:(s.push(d),a=d+1)}for(a=1;a<10;){var h=this.isStraight(r,n,a);0==h?a=11:(c.push(h),a=h+1)}for(var p=0;p<s.length;p++){for(var f=0;f<o.length;f++)o[f]===s[p]&&o.splice(f,1);for(f=0;f<i.length;f++)i[f]===s[p]&&i.splice(f,1)}for(var m=0;m<o.length;m++)for(f=0;f<i.length;f++)i[f]===o[m]&&i.splice(f,1);var g=[],y="",v=[];if(c.includes(10)&&""!=this.isFlush(r,n)){var b=this.isFlush(r,n);if(1==this.isCardSuite(r,n,1,b)&&1==this.isCardSuite(r,n,13,b)&&1==this.isCardSuite(r,n,12,b)&&1==this.isCardSuite(r,n,11,b)&&1==this.isCardSuite(r,n,10,b))return g.push("1"+b),g.push("13"+b),g.push("12"+b),g.push("11"+b),g.push("10"+b),y="royal flush",{cards_to_score:this.sortByValue(g),hand_description:y}}if(c.length>0&&""!=this.isFlush(r,n))for(var _=this.isFlush(r,n),w=c.length-1;w>=0;w--)if(1==this.isCardSuite(r,n,c[w]+4,_)&&1==this.isCardSuite(r,n,c[w]+3,_)&&1==this.isCardSuite(r,n,c[w]+2,_)&&1==this.isCardSuite(r,n,c[w]+1,_)&&1==this.isCardSuite(r,n,c[w],_))return g.push(c[w]+4+_),g.push(c[w]+3+_),g.push(c[w]+2+_),g.push(c[w]+1+_),g.push(c[w]+_),y="straight flush",{cards_to_score:this.sortByValue(g),hand_description:y};if(s.length>0)return s.includes(1)?(g=["C1","D1","H1","S1"],v=this.returnHighestCard(r,n,g),g.push(v),{cards_to_score:g,hand_description:y="four-of-a-kind"}):(g=["C"+s[s.length-1],"D"+s[s.length-1],"H"+s[s.length-1],"S"+s[s.length-1]],v=this.returnHighestCard(r,n,g),y="four-of-a-kind",g.push(v),{cards_to_score:g,hand_description:y});if(2==o.length&&(o[0]>o[1]?i.push(o.pop()):i.push(o.shift())),o.length>0&&i.length>0){for(var x="C",k=0;k<n.length;k++)n[k]==o[o.length-1]&&(this.isHigherSuite(r[k],x)&&(x=r[k]),g.push(r[k]+n[k]));v=x+o[o.length-1];for(var S=0;S<n.length;S++)n[S]==i[i.length-1]&&g.push(r[S]+n[S]),g.length>5&&g.pop();return{cards_to_score:g,hand_description:y="full house",highest_card:v}}if(""!=this.isFlush(r,n)){for(var E=this.isFlush(r,n),A=[],P=0;P<n.length;P++)r[P]==E&&A.push(n[P]);A.sort((function(e,t){return e-t})),A.splice(0,A.length-5);for(var C=A.length-1;C>=0;C--)g.push(E+A[C]);return y="flush",{cards_to_score:this.sortByValue(g),hand_description:y}}if(this.isStraight(r,n)>0){var D=this.isStraight(r,n);if(y="straight",10==D)return g.push(this.returnHighestSuiteCard(r,n,1)),g.push(this.returnHighestSuiteCard(r,n,13)),g.push(this.returnHighestSuiteCard(r,n,12)),g.push(this.returnHighestSuiteCard(r,n,11)),g.push(this.returnHighestSuiteCard(r,n,10)),{cards_to_score:g,hand_description:y};if(1==D)return g.push(this.returnHighestSuiteCard(r,n,5)),g.push(this.returnHighestSuiteCard(r,n,4)),g.push(this.returnHighestSuiteCard(r,n,3)),g.push(this.returnHighestSuiteCard(r,n,2)),g.push(this.returnHighestSuiteCard(r,n,1)),{cards_to_score:g,hand_description:y};for(var T=4;T>=0;T--)g.push(this.returnHighestSuiteCard(r,n,D+T));return{cards_to_score:this.sortByValue(g),hand_description:y}}if(o.length>0){for(var O=o[o.length-1],M=[],I=n.length,R=0;R<I;R++)n[R]==O&&(M.push(r[R]+n[R]),n.splice(R,1),r.splice(R,1),I--,R--);for(var F=0;F<M.length;F++)g.push(M[F]);for(var B=this.returnHighestCard(r,n),j=this.returnHighestCard(r,n,[B]),N=this.sortByValue([B,j]),q=0;q<N.length;q++)g.push(N[q]);return{cards_to_score:g,hand_description:y="three-of-a-kind"}}if(i.length>1){i.sort((function(e,t){return e-t})),3==i.length&&(1==i[0]&&i.push(i.shift()),i.shift());var L=i[i.length-1],U=i[i.length-2];v=L>U?L:U,1==U&&(v=U);for(var z=n.length,H=0;H<z;H++)n[H]==v&&(g.push(r[H]+n[H]),n.splice(H,1),r.splice(H,1),z--,H--);z=n.length;for(var $=0;$<z;$++)n[$]!=L&&n[$]!=U||(g.push(r[$]+n[$]),n.splice($,1),r.splice($,1),z--,$--);var G=this.returnHighestCard(r,n,g);return g.push(G),{cards_to_score:g,hand_description:y="two pair"}}if(i.length>0){for(var K=i[i.length-1],V=[],W=n.length,Y=0;Y<W;Y++)n[Y]==K&&(V.push(r[Y]+n[Y]),n.splice(Y,1),r.splice(Y,1),W--,Y--);var J=this.returnHighestCard(r,n),Q=this.returnHighestCard(r,n,[J]),X=this.returnHighestCard(r,n,[J,Q]),Z=this.sortByValue([J,Q,X]);g.push(V[0]),g.push(V[1]);for(var ee=0;ee<Z.length;ee++)g.push(Z[ee]);return{cards_to_score:g,hand_description:y="pair"}}var te=this.returnHighestCard(r,n),re=this.returnHighestCard(r,n,[te]),ne=this.returnHighestCard(r,n,[te,re]),ae=this.returnHighestCard(r,n,[te,re,ne]),ie=this.returnHighestCard(r,n,[te,re,ne,ae]);return g.push(te),g.push(re),g.push(ne),g.push(ae),g.push(ie),y="highest card",v=te,{cards_to_score:this.sortByValue(g),hand_description:y}}},{key:"convertHand",value:function(e){for(var t={suite:[],val:[]},r=0;r<e.length;r++)t.suite.push(e[r][0]),t.val.push(parseInt(e[r].substring(1)));return t}},{key:"sortByValue",value:function(e){var t=[],r=0;t.push(e[0]);for(var n=1;n<e.length;n++){r=0;for(var a=0;a<t.length;a++)this.returnHigherCard(e[n],t[a])==t[a]&&(r=a+1);t.splice(r,0,e[n])}return t}},{key:"returnHigherCard",value:function(e,t){var r=e[0],n=parseInt(e.substring(1)),a=t[0],i=parseInt(t.substring(1));return 1==n&&(n=14),1==i&&(i=14),n>i?e:i>n?t:i==n?r==a?0:this.isHigherSuite(r,a)?e:t:void 0}},{key:"returnHigherNumberCard",value:function(e,t){var r=parseInt(e.substring(1)),n=parseInt(t.substring(1));return 1==r&&(r=14),1==n&&(n=14),r>n?e:n>r?t:n==r?0:void 0}},{key:"isHigherSuite",value:function(e,t){return"S"===e?1:"S"==t?0:"H"===e?1:"H"==t?0:"D"===e?1:"D"==t?0:"C"===e?1:"C"==t?0:void 0}},{key:"returnHighestSuiteCard",value:function(e,t,r){for(var n="C",a="",i=0;i<t.length;i++)t[i]==r&&(""!=a?this.isHigherSuite(n,e[i])&&(n=e[i],a=e[i]+t[i]):(n=e[i],a=e[i]+t[i]));return a}},{key:"returnHighestCard",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=0,a="C",i=0;i<t.length;i++)r.includes(e[i]+t[i])?console.log("you are barred from the pub"):(1==t[i]&&(14==n?this.isHigherSuite(e[i],a)&&(a=e[i]):(n=14,a=e[i])),t[i]==n&&this.isHigherSuite(e[i],a)&&(a=e[i]),t[i]>n&&(n=t[i],a=e[i]));return 14==n&&(n=1),a+n}},{key:"isFlush",value:function(e,t){for(var r=0,n=0,a=0,i=0,o=0;o<e.length;o++)"C"==e[o]&&r++,"D"==e[o]&&i++,"H"==e[o]&&a++,"S"==e[o]&&n++;return r>=5?"C":n>=5?"S":a>=5?"H":i>=5?"D":""}},{key:"isFour",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=r-1;n<13;n++)for(var a=0,i=0;i<t.length;i++)if(t[i]==n+1&&4==++a)return n+1;return 0}},{key:"isThree",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=r-1;n<13;n++)for(var a=0,i=0;i<t.length;i++)if(t[i]==n+1&&3==++a)return n+1;return 0}},{key:"isTwo",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=r-1;n<13;n++)for(var a=0,i=0;i<t.length;i++)if(t[i]==n+1&&2==++a)return n+1;return 0}},{key:"isStraight",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=r-1;n<10;n++){if(9==n)return t.includes(13)&&t.includes(12)&&t.includes(11)&&t.includes(10)&&t.includes(1)?10:0;if(t.includes(n+1)&&t.includes(n+2)&&t.includes(n+3)&&t.includes(n+4)&&t.includes(n+5))return n+1}return 0}},{key:"isCardSuite",value:function(e,t,r,n){for(var a=0;a<t.length;a++)if(t[a]==r&&e[a]==n)return 1;return 0}},{key:"cardToHuman",value:function(e){var t=this.game.deck[0].cards[e].name;return-1!=(t=(t=(t=(t=(t=(t=t.replace(".png","")).replace("13","K")).replace("12","Q")).replace("11","J")).replace("1","A")).replace("A0","10")).indexOf("H")&&(t=t.replace("H","")+"h"),-1!=t.indexOf("D")&&(t=t.replace("D","")+"d"),-1!=t.indexOf("S")&&(t=t.replace("S","")+"s"),-1!=t.indexOf("C")&&(t=t.replace("C","")+"c"),t}},{key:"toHuman",value:function(e){var t=" <span class='htmlhand'>";return e.forEach((function(e){e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace("H","<span style='color:red'><span class='suit'>&hearts;</span>")).replace("D","<span style='color:red'><span class='suit'>&diams;</span>")).replace("S","<span style='color:black'><span class='suit'>&spades;</span>")).replace("C","<span style='color:black'><span class='suit'>&clubs;</span>")).replace("13","K")).replace("12","Q")).replace("11","J")).replace("1","A")).replace("A0","10"),t+=e="<span class='htmlCard'>"+e+"</span></span>"})),t+="</span> "}},{key:"toHTMLHAND",value:function(e){_this=this;var t=" <span class='htmlCards'>";return e.forEach((function(e){t+='<img class="card" src="'.concat(_this.card_img_dir,"/").concat(e,'.png">')})),t+="</span> "}},{key:"returnGameOptionsHTML",value:function(){for(var e='\n      <h1 class="overlay-title">Start a Poker Game</h1>\n          <div class="overlay-input">\n            <label for="stake">Initial Stake:</label>\n            <select name="stake">\n              <option value="0.1">0.1</option>\n              <option value="1">1</option>\n              <option value="5">5</option>\n              <option value="20">20</option>\n              <option value="50">50</option>\n              <option value="100">100</option>\n              <option value="500">500</option>\n              <option value="1000" selected="selected">1000</option>\n              <option value="5000" >5000</option>\n              <option value="10000">10000</option>\n            </select>\n          </div>\n          <div class="overlay-input">\n            <label for="big_blind">Starting Blinds:</label>\n            <select name="big_blind">\n              <option value="0.001">0.001</option>\n              <option value="0.008">0.008</option>\n              <option value="0.03">0.03</option>\n              <option value="0.12">0.12</option>\n              <option value="0.25">0.25</option>\n              <option value="1">1</option>\n              <option value="8">8</option>\n              <option value="30" selected>30</option>\n              <option value="120">120</option>\n              <option value="250">250</option>\n              <option value="500">500</option>\n            </select>\n          </div>\n          <div class="overlay-input">\n            <label for="crypto">Crypto:</label>\n            <select name="crypto">\n              <option value="" selected>None</option>\n              <option value="SAITO">SAITO</option>\n    ',t=0;t<this.app.modules.mods.length;t++)""!=this.app.modules.mods[t].ticker&&null!=this.app.modules.mods[t].ticker&&(e+='<option value="'.concat(this.app.modules.mods[t].ticker,'">').concat(this.app.modules.mods[t].ticker,"</option>"));return e+='\n            </select>\n          </div>\n          <div class="overlay-input">\n            <label for="stake">Mode:</label>\n            <select name="blinds">\n              <option value="static">static blinds</option>\n              <option value="increase">increasing blinds</option>\n            </select>\n          </div>\n          <div class="overlay-input">\n            <label for="observer_mode">Observer Mode:</label>\n            <select name="observer">\n              <option value="enable" selected>enable</option>\n              <option value="disable">disable</option>\n            </select>\n          </div>\n\n      <div id="game-wizard-advanced-return-btn" class="game-wizard-advanced-return-btn button">accept</div>\n\n    '}},{key:"returnFormattedGameOptions",value:function(e){var t={};for(var r in e)"stake"==r&&(t[r]=e[r]),"crypto"==r&&(t[r]=e[r]),"blinds"==r&&(t[r]=e[r]),"big_blind"==r&&(t[r]=e[r]);return t}},{key:"showSplash",value:function(e){var t=document.querySelector(".shim");t.classList.remove("hidden"),t.firstElementChild.innerHTML=e,t.addEventListener("click",(function(e){t.classList.add("hidden"),t.firstElementChild.innerHTML=""}))}},{key:"updateStatus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;try{if(document.querySelector(".p1 > .info").style.display=0==t?"block":"none",1==this.lock_interface)return;if(this.game.status=e,1==this.browser_active){var r=document.querySelector(".status");this.game.players.includes(this.app.wallet.returnPublicKey())&&(r.innerHTML=e)}}catch(e){}}},{key:"handleStatsMenu",value:function(){this.overlay.showOverlay(this.app,this,'\n      <div class="game-overlay-menu" id="game-overlay-menu">\n        <div>Game Statistics:</div>\n        <div class="statistics-info">\n        We\'re adding statistics, tracking and other information to help improve player games. If you\'re comfortable with JAVASCRIPT / HTML / CSS and want to help, please reach out.\n        </div>\n      </div>\n    ')}},{key:"increaseBlinds",value:function(){return this.game.state.blinds_idx++,1}},{key:"returnShortGameOptionsArray",value:function(e){var t=i(u(h.prototype),"returnShortGameOptionsArray",this).call(this,e),r=[];for(var n in t)if(""!=t[n]){var a=n,o=e[n],s=1;"big_blind"==n&&(a="blinds"),"blinds"==n&&("increase"==o?(a="mode",o="tournament"):s=0),1==s&&(r[a]=o)}return r}}])&&a(t.prototype,r),n&&a(t,n),h}(d));e.exports=h},function(e,t){e.exports=PostMainTemplate=function(e,t){return'\n  <div id="post-container" class="post-container">\n    <div id="post-sidebar" class="post-sidebar">\n      <div id="email-chat" class="email_chat"></div>\n    </div>\n    <div id="post-main" class="post-main">\n      <div id="post-details" class="post-details"></div>\n      <div id="post-add-comment" class="post-add-comment"></div>\n      <div id="post-comments" class="post-comments"></div>\n    </div>\n  </div>\n    '}},function(e,t,r){var n=r(297),a=r(140);e.exports=NewPost={render:function(e,t){document.body.append(a(n(e,t)))},attachEvents:function(e,t){document.querySelector(".new-post-btn").addEventListener("click",(function(r){var n=document.querySelector(".new-post-content").value;newtx=t.post.createPostTransaction(n),e.network.propagateTransaction(newtx)})),document.querySelector(".post-close").addEventListener("click",(function(e){document.querySelector(".new-post-wrapper")&&document.querySelector(".new-post-wrapper").destroy()}))}}},function(e,t,r){var n=r(298),a=r(140);e.exports=ShowPost={render:function(e,t,r){var i=JSON.parse(r);document.body.append(a(n(e,t,i)))},attachEvents:function(e,t,r){var n=JSON.parse(r);document.querySelector(".show-post-update-btn")&&document.querySelector(".show-post-update-btn").addEventListener("click",(function(r){showtx=t.post.createPostTransaction(n.content,"update"),e.network.propagateTransaction(showtx)}))}}},function(e,t,r){(function(t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){a(o,n,i,s,c,"next",e)}function c(e){a(o,n,i,s,c,"throw",e)}s(void 0)}))}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var a=d(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=r(5),p=r(19),f=r(292),m=r(295),g=r(286),y=r(94),v=r(123),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(E,e);var n,a,u,p,b,_,w,x,k,S=l(E);function E(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,E),(t=S.call(this,e)).name="Post",t.header=null,t.events=["chat-render-request"],t.renderMethod="none",t.post={},t.post.domain="saito",t.posts=[],t.comments=[],t.icon_fa="fa fa-map-signs",t.description="Simple forum for persistent posts and discussions",t.categories="Social Messaging",t}return n=E,(a=[{key:"receiveEvent",value:function(e,t){"chat-render-request"==e&&this.browser_active&&(m.render(this.app,this),m.attachEvents(this.app,this))}},{key:"respondTo",value:function(e){if(null!=s(d(E.prototype),"respondTo",this).call(this,e))return s(d(E.prototype),"respondTo",this).call(this,e);if("arcade-posts"==e){var t={};return t.render=this.renderArcade,t.attachEvents=function(){},t}return"header-dropdown"==e?{name:this.appname?this.appname:this.name,icon_fa:this.icon_fa,browser_active:this.browser_active,slug:this.returnSlug()}:null}},{key:"returnServices",value:function(){var e=[];return e.push({service:"post"}),e}},{key:"initializeHTML",value:function(e){null==this.header&&(this.header=new y(e,this)),this.header.render(e,this),this.header.attachEvents(e,this),m.render(this.app,this),m.attachEvents(this.app,this),f.render(e,this),f.attachEvents(e,this)}},{key:"onConfirmation",value:function(e,t,r,n){if(0==n.BROWSER&&0==r){var a=t.returnMessage();if("Post"===a.module){var i=n.modules.returnModule("Post");"post"==a.type&&(i.receivePostTransaction(t),this.render()),"comment"==a.type&&(i.receiveCommentTransaction(t),this.render()),"edit"==a.type&&(i.receiveEditTransaction(t),this.render()),"editpost"==a.type&&(i.receiveEditPostTransaction(t),this.render()),"report"==a.type&&(i.receiveReportTransaction(t),this.render()),"delete"==a.type&&(i.receiveDeleteTransaction(t),this.render())}}}},{key:"onPeerHandshakeComplete",value:function(e,t){var r=this;"none"!=this.renderMethod&&this.sendPeerDatabaseRequestWithFilter("Post",'SELECT id, children, img, lite_tx FROM posts WHERE parent_id = "" AND deleted = 0 ORDER BY ts DESC LIMIT 12',(function(e){if(e&&e.rows)for(var t=0;t<e.rows.length;t++)r.posts.push(new h.transaction(JSON.parse(e.rows[t].lite_tx))),r.posts[r.posts.length-1].children=e.rows[t].children,r.posts[r.posts.length-1].img=e.rows[t].img;r.render()}),(function(e){if(e.peer.services)for(var t=0;t<e.peer.services.length;t++)if("post"===e.peer.services[t].service)return 1;return 0}))}},{key:"render",value:function(){"main"===this.renderMethod&&(f.render(this.app,this),f.attachEvents(this.app,this)),"arcade"===this.renderMethod&&(g.render(this.app,this),g.attachEvents(this.app,this))}},{key:"renderArcade",value:function(e,t){t.renderMethod="arcade",t.render(e,t)}},{key:"grabImage",value:function(e,t){var n=this,a=r(1167),i=new a;i.register(new a.FileExtension),i.register(new a.MimeType),i.register(new a.Opengraph),i.register(new a.Webpage),i.resolve(e,(function(e){if(e){var r={$img:e.image,$id:t};n.app.storage.executeDatabase("UPDATE posts SET img = $img WHERE id = $id;",r,"post")}else console.log("No image found")}))}},{key:"createPostTransaction",value:function(e,t,r,n,a){var i=this.app.wallet.createUnsignedTransaction();return i.msg.module="Post",i.msg.type="post",i.msg.title=e,i.msg.comment=t,i.msg.link=r,i.msg.forum=n,i.msg.images=a,this.app.wallet.signTransaction(i)}},{key:"receivePostTransaction",value:(k=i(regeneratorRuntime.mark((function e(t){var r,n,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.returnMessage(),n=JSON.stringify(t.transaction),(a=new h.transaction(JSON.parse(JSON.stringify(t.transaction)))).msg.comment="",a.msg.images=[],a=this.app.wallet.signTransaction(a),a=JSON.stringify(a.transaction),""!=r.title){e.next=9;break}return e.abrupt("return");case 9:return i={$pid:t.transaction.sig,$pthread_id:t.transaction.sig,$pparent_id:"",$ptype:"post",$ppublickey:t.transaction.from[0].add,$ptitle:r.title,$pimg:"",$ptext:r.comment,$pforum:r.forum,$plink:r.link,$pfulltx:n,$plitetx:a,$pts:t.transaction.ts,$pchildren:0,$pflagged:0,$pdeleted:0},e.next=13,this.app.storage.executeDatabase("\n        INSERT INTO \n            posts (\n                id,\n                thread_id,\n                parent_id, \n                type,\n\t\tpublickey,\n                title,\n                img,\n                text,\n\t\tforum,\n\t\tlink,\n                tx, \n                lite_tx, \n                ts,\n                children,\n                flagged,\n                deleted\n                ) \n            VALUES (\n                $pid ,\n\t        $pthread_id ,\n                $pparent_id ,\n                $ptype ,\n\t\t$ppublickey ,\n\t\t$ptitle ,\n\t\t$pimg ,\n\t\t$ptext ,\n\t\t$pforum ,\n\t\t$plink ,\n\t\t$pfulltx ,\n\t\t$plitetx ,\n\t\t$pts ,\n\t\t$pchildren ,\n\t\t$pflagged ,\n\t\t$pdeleted\n            );\n        ",i,"post");case 13:""!=r.link&&this.grabImage(r.link,t.transaction.sig);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return k.apply(this,arguments)})},{key:"createEditPostTransaction",value:function(e,t,r,n,a,i){var o=this.app.wallet.createUnsignedTransaction();return o.msg.module="Post",o.msg.type="editpost",o.msg.title=e,o.msg.comment=t,o.msg.link=r,o.msg.forum=n,o.msg.images=a,o.msg.post_id=i,this.app.wallet.signTransaction(o)}},{key:"receiveEditPostTransaction",value:(x=i(regeneratorRuntime.mark((function e(t){var r,n,a,i,o,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.returnMessage(),n=JSON.stringify(t.transaction),(a=new h.transaction(JSON.parse(JSON.stringify(t.transaction)))).msg.comment="",a.msg.images=[],a=this.app.wallet.signTransaction(a),a=JSON.stringify(a.transaction),""!=r.title){e.next=9;break}return e.abrupt("return");case 9:return i=0,o="SELECT parent_id FROM posts WHERE id = $id",s={$id:r.post_id},e.next=14,this.app.storage.queryDatabase(o,s,"post");case 14:return(c=e.sent)&&c.length>0&&""===c[0].parent_id&&(i=1),o="SELECT publickey, children, flagged, deleted FROM posts WHERE id = $id",s={$id:r.post_id},e.next=20,this.app.storage.queryDatabase(o,s,"post");case 20:if(!(c=e.sent)){e.next=43;break}if(!(c.length>0)){e.next=43;break}if(c[0].children,c[0].publickey!==t.transaction.from[0].add){e.next=43;break}return o="DELETE FROM posts WHERE publickey = $author AND id = $id",s={$author:t.transaction.from[0].add,$id:r.post_id},e.next=29,this.app.storage.executeDatabase(o,s,"post");case 29:return o="\n        INSERT INTO \n            posts (\n                id,\n                thread_id,\n                parent_id, \n                type,\n\t\tpublickey,\n                title,\n                img,\n                text,\n\t\tforum,\n\t\tlink,\n                tx, \n                lite_tx, \n                ts,\n                children,\n                flagged,\n                deleted\n                ) \n            VALUES (\n                $pid ,\n\t        $pthread_id ,\n                $pparent_id ,\n                $ptype ,\n\t\t$ppublickey ,\n\t\t$ptitle ,\n\t\t$pimg ,\n\t\t$ptext ,\n\t\t$pforum ,\n\t\t$plink ,\n\t\t$pfulltx ,\n\t\t$plitetx ,\n\t\t$pts ,\n\t\t$pchildren ,\n\t\t$pflagged ,\n\t\t$pdeleted\n            );\n        ",s={$pid:t.transaction.sig,$pthread_id:t.transaction.sig,$pparent_id:"",$ptype:"post",$ppublickey:t.transaction.from[0].add,$ptitle:r.title,$pimg:"",$ptext:r.comment,$pforum:r.forum,$plink:r.link,$pfulltx:n,$plitetx:a,$pts:t.transaction.ts,$pchildren:c[0].children,$pflagged:c[0].flagged,$pdeleted:c[0].deleted},e.next=33,this.app.storage.executeDatabase(o,s,"post");case 33:return""!=r.link&&this.grabImage(r.link,t.transaction.sig),o="UPDATE posts SET parent_id = $new_parent_id WHERE parent_id = $old_parent_id",s={$new_parent_id:t.transaction.sig,$old_parent_id:r.post_id},e.next=38,this.app.storage.executeDatabase(o,s,"post");case 38:if(1!=i){e.next=43;break}return o="UPDATE posts SET thread_id = $new_parent_id WHERE thread_id = $old_parent_id",s={$new_parent_id:t.transaction.sig,$old_parent_id:r.post_id},e.next=43,this.app.storage.executeDatabase(o,s,"post");case 43:case"end":return e.stop()}}),e,this)}))),function(e){return x.apply(this,arguments)})},{key:"createEditTransaction",value:function(e,t){var r=this.app.wallet.createUnsignedTransaction();return r.msg.module="Post",r.msg.type="edit",r.msg.sig=e,r.msg.comment=t,this.app.wallet.signTransaction(r)}},{key:"receiveEditTransaction",value:(w=i(regeneratorRuntime.mark((function e(t){var r,n,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.returnMessage(),n=0,a="SELECT parent_id FROM posts WHERE id = $id",i={$id:r.sig},e.next=6,this.app.storage.queryDatabase(a,i,"post");case 6:return(o=e.sent)&&o.length>0&&""===o[0].parent_id&&(n=1),a="SELECT publickey FROM posts WHERE id = $id",i={$id:r.sig},e.next=12,this.app.storage.queryDatabase(a,i,"post");case 12:if(!(o=e.sent)){e.next=29;break}if(!(o.length>0)){e.next=29;break}if(o[0].publickey!==t.transaction.from[0].add){e.next=29;break}return a="UPDATE posts SET id = $newid, text = $text, tx = $tx WHERE publickey = $author AND id = $id",s={$id:r.sig,$text:r.comment,$tx:JSON.stringify(t.transaction),$author:t.transaction.from[0].add},c="$id",l=r.sig,c in s?Object.defineProperty(s,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[c]=l,i=s,e.next=20,this.app.storage.executeDatabase(a,i,"post");case 20:return a="UPDATE posts SET parent_id = $new_parent_id WHERE parent_id = $old_parent_id",i={$new_parent_id:t.transaction.sig,$old_parent_id:r.sig},e.next=24,this.app.storage.executeDatabase(a,i,"post");case 24:if(1!=n){e.next=29;break}return a="UPDATE posts SET thread_id = $new_parent_id WHERE thread_id = $old_parent_id",i={$new_parent_id:t.transaction.sig,$old_parent_id:r.sig},e.next=29,this.app.storage.executeDatabase(a,i,"post");case 29:case"end":return e.stop()}var s,c,l}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"createCommentTransaction",value:function(e,t){var r=this.app.wallet.createUnsignedTransaction();return r.msg.module="Post",r.msg.type="comment",r.msg.parent_id=e,r.msg.thread_id=e,r.msg.title="",r.msg.comment=t,r.msg.link="",r.msg.forum="",r.msg.images=[],this.app.wallet.signTransaction(r)}},{key:"receiveCommentTransaction",value:(_=i(regeneratorRuntime.mark((function e(t){var r,n,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.returnMessage(),n=JSON.stringify(t.transaction),(a=new h.transaction(JSON.parse(JSON.stringify(t.transaction)))).msg.comment="",a.msg.images=[],a=this.app.wallet.signTransaction(a),a=JSON.stringify(a.transaction),i="\n        INSERT INTO \n            posts (\n                id,\n                thread_id,\n                parent_id, \n                type,\n                publickey,\n                title,\n                text,\n                forum,\n                link,\n                img,\n                tx, \n                lite_tx, \n                ts,\n                children,\n                flagged,\n                deleted\n                ) \n            VALUES (\n                $pid ,\n                $pthread_id ,\n                $pparent_id ,\n                $ptype ,\n                $ppublickey ,\n                $ptitle ,\n                $ptext ,\n                $pforum ,\n                $pimg ,\n                $plink ,\n                $ptx ,\n                $plite_tx ,\n                $pts ,\n                $pchildren ,\n                $pflagged ,\n                $pdeleted\n            );\n        ",o={$pid:t.transaction.sig,$pthread_id:r.thread_id,$pparent_id:r.parent_id,$ptype:"comment",$ppublickey:t.transaction.from[0].add,$ptitle:"",$ptext:r.comment,$pforum:"",$pimg:"",$plink:"",$ptx:n,$plite_tx:a,$pts:t.transaction.ts,$pchildren:0,$pflagged:0,$pdeleted:0},e.next=11,this.app.storage.executeDatabase(i,o,"post");case 11:return i="UPDATE posts SET children = children+1 WHERE id = $pid",o={$pid:r.thread_id},e.next=15,this.app.storage.executeDatabase(i,o,"post");case 15:case"end":return e.stop()}}),e,this)}))),function(e){return _.apply(this,arguments)})},{key:"createReportTransaction",value:function(e,t){var r=this.app.wallet.createUnsignedTransaction();return r.msg.module="Post",r.msg.type="report",r.msg.post_id=e,this.app.wallet.signTransaction(r)}},{key:"receiveReportTransaction",value:(b=i(regeneratorRuntime.mark((function e(r){var n,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.returnMessage(),a={$pid:n.post_id},e.next=5,this.app.storage.executeDatabase("\n        UPDATE posts SET flagged = 1 WHERE id = $pid\n    ",a,"post");case 5:i=this.createDeleteTransaction(n.post_id),o=v.encode(t.from(JSON.stringify(i))),console.log("POSTS MODERATION https://saito.io/post/delete/".concat(o)),this.app.network.sendRequest("send email",{from:"network@saito.tech",to:"moderators@saito.tech",subject:"Saito.io - Post #".concat(n.post_id," was reported."),ishtml:!0,body:"\n        Post #".concat(n.post_id,' was reported.\n        Click <a href="https://saito.io/post/delete/').concat(o,'">here</a> to delete it.\n      ')});case 9:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"createDeleteTransaction",value:function(e){var t=this.app.wallet.createUnsignedTransaction();return t.msg.module="Post",t.msg.type="delete",t.msg.post_id=e,this.app.wallet.signTransaction(t)}},{key:"receiveDeleteTransaction",value:(p=i(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.app.crypto.verifyMessage(t.returnSignatureSource(this.app),t.transaction.sig,t.transaction.from[0].add)){e.next=9;break}return r=t.returnMessage(),console.log(r),n={$post_id:r.post_id},e.next=7,this.app.storage.executeDatabase("\n          UPDATE \n            posts\n          SET\n            deleted = 1\n          WHERE\n            id = $post_id\n        ",n,"post");case 7:e.next=10;break;case 9:console.log("Delete Post Transaction signature is not valid");case 10:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"webServer",value:function(e,r,n){var a=this;s(d(E.prototype),"webServer",this).call(this,e,r,n),r.get("/post/delete/:serialized_tx",function(){var e=i(regeneratorRuntime.mark((function e(r,n){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{i=JSON.parse(t.from(v.decode(r.params.serialized_tx)).toString("utf-8")),a.receiveDeleteTransaction(new h.transaction(i)),n.setHeader("Content-type","text/javascript"),n.write("OK"),n.charset="UTF-8",n.end()}catch(e){console.log("error trying to decode moderation transaction"),console.log(e)}case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())}}])&&o(n.prototype,a),u&&o(n,u),E}(p);e.exports=b}).call(this,r(4).Buffer)},function(e,t,r){"use strict";e.exports=function(e){return null!==e&&"object"==typeof e}},function(e,t,r){var n=r(548),a={input:!0,option:!0,optgroup:!0,select:!0,button:!0,datalist:!0,textarea:!0},i={tr:{tr:!0,th:!0,td:!0},th:{th:!0},td:{thead:!0,th:!0,td:!0},body:{head:!0,link:!0,script:!0},li:{li:!0},p:{p:!0},h1:{p:!0},h2:{p:!0},h3:{p:!0},h4:{p:!0},h5:{p:!0},h6:{p:!0},select:a,input:a,output:a,button:a,datalist:a,textarea:a,option:{option:!0},optgroup:{optgroup:!0}},o={__proto__:null,area:!0,base:!0,basefont:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},s={__proto__:null,math:!0,svg:!0},c={__proto__:null,mi:!0,mo:!0,mn:!0,ms:!0,mtext:!0,"annotation-xml":!0,foreignObject:!0,desc:!0,title:!0},l=/\s|\//;function u(e,t){this._options=t||{},this._cbs=e||{},this._tagname="",this._attribname="",this._attribvalue="",this._attribs=null,this._stack=[],this._foreignContext=[],this.startIndex=0,this.endIndex=null,this._lowerCaseTagNames="lowerCaseTags"in this._options?!!this._options.lowerCaseTags:!this._options.xmlMode,this._lowerCaseAttributeNames="lowerCaseAttributeNames"in this._options?!!this._options.lowerCaseAttributeNames:!this._options.xmlMode,this._options.Tokenizer&&(n=this._options.Tokenizer),this._tokenizer=new n(this._options,this),this._cbs.onparserinit&&this._cbs.onparserinit(this)}r(1)(u,r(50).EventEmitter),u.prototype._updatePosition=function(e){null===this.endIndex?this._tokenizer._sectionStart<=e?this.startIndex=0:this.startIndex=this._tokenizer._sectionStart-e:this.startIndex=this.endIndex+1,this.endIndex=this._tokenizer.getAbsoluteIndex()},u.prototype.ontext=function(e){this._updatePosition(1),this.endIndex--,this._cbs.ontext&&this._cbs.ontext(e)},u.prototype.onopentagname=function(e){if(this._lowerCaseTagNames&&(e=e.toLowerCase()),this._tagname=e,!this._options.xmlMode&&e in i)for(var t;(t=this._stack[this._stack.length-1])in i[e];this.onclosetag(t));!this._options.xmlMode&&e in o||(this._stack.push(e),e in s?this._foreignContext.push(!0):e in c&&this._foreignContext.push(!1)),this._cbs.onopentagname&&this._cbs.onopentagname(e),this._cbs.onopentag&&(this._attribs={})},u.prototype.onopentagend=function(){this._updatePosition(1),this._attribs&&(this._cbs.onopentag&&this._cbs.onopentag(this._tagname,this._attribs),this._attribs=null),!this._options.xmlMode&&this._cbs.onclosetag&&this._tagname in o&&this._cbs.onclosetag(this._tagname),this._tagname=""},u.prototype.onclosetag=function(e){if(this._updatePosition(1),this._lowerCaseTagNames&&(e=e.toLowerCase()),(e in s||e in c)&&this._foreignContext.pop(),!this._stack.length||e in o&&!this._options.xmlMode)this._options.xmlMode||"br"!==e&&"p"!==e||(this.onopentagname(e),this._closeCurrentTag());else{var t=this._stack.lastIndexOf(e);if(-1!==t)if(this._cbs.onclosetag)for(t=this._stack.length-t;t--;)this._cbs.onclosetag(this._stack.pop());else this._stack.length=t;else"p"!==e||this._options.xmlMode||(this.onopentagname(e),this._closeCurrentTag())}},u.prototype.onselfclosingtag=function(){this._options.xmlMode||this._options.recognizeSelfClosing||this._foreignContext[this._foreignContext.length-1]?this._closeCurrentTag():this.onopentagend()},u.prototype._closeCurrentTag=function(){var e=this._tagname;this.onopentagend(),this._stack[this._stack.length-1]===e&&(this._cbs.onclosetag&&this._cbs.onclosetag(e),this._stack.pop())},u.prototype.onattribname=function(e){this._lowerCaseAttributeNames&&(e=e.toLowerCase()),this._attribname=e},u.prototype.onattribdata=function(e){this._attribvalue+=e},u.prototype.onattribend=function(){this._cbs.onattribute&&this._cbs.onattribute(this._attribname,this._attribvalue),this._attribs&&!Object.prototype.hasOwnProperty.call(this._attribs,this._attribname)&&(this._attribs[this._attribname]=this._attribvalue),this._attribname="",this._attribvalue=""},u.prototype._getInstructionName=function(e){var t=e.search(l),r=t<0?e:e.substr(0,t);return this._lowerCaseTagNames&&(r=r.toLowerCase()),r},u.prototype.ondeclaration=function(e){if(this._cbs.onprocessinginstruction){var t=this._getInstructionName(e);this._cbs.onprocessinginstruction("!"+t,"!"+e)}},u.prototype.onprocessinginstruction=function(e){if(this._cbs.onprocessinginstruction){var t=this._getInstructionName(e);this._cbs.onprocessinginstruction("?"+t,"?"+e)}},u.prototype.oncomment=function(e){this._updatePosition(4),this._cbs.oncomment&&this._cbs.oncomment(e),this._cbs.oncommentend&&this._cbs.oncommentend()},u.prototype.oncdata=function(e){this._updatePosition(1),this._options.xmlMode||this._options.recognizeCDATA?(this._cbs.oncdatastart&&this._cbs.oncdatastart(),this._cbs.ontext&&this._cbs.ontext(e),this._cbs.oncdataend&&this._cbs.oncdataend()):this.oncomment("[CDATA["+e+"]]")},u.prototype.onerror=function(e){this._cbs.onerror&&this._cbs.onerror(e)},u.prototype.onend=function(){if(this._cbs.onclosetag)for(var e=this._stack.length;e>0;this._cbs.onclosetag(this._stack[--e]));this._cbs.onend&&this._cbs.onend()},u.prototype.reset=function(){this._cbs.onreset&&this._cbs.onreset(),this._tokenizer.reset(),this._tagname="",this._attribname="",this._attribs=null,this._stack=[],this._cbs.onparserinit&&this._cbs.onparserinit(this)},u.prototype.parseComplete=function(e){this.reset(),this.end(e)},u.prototype.write=function(e){this._tokenizer.write(e)},u.prototype.end=function(e){this._tokenizer.end(e)},u.prototype.pause=function(){this._tokenizer.pause()},u.prototype.resume=function(){this._tokenizer.resume()},u.prototype.parseChunk=u.prototype.write,u.prototype.done=u.prototype.end,e.exports=u},function(e,t,r){e.exports=ge;var n=r(1187),a=r(1189),i=r(1190),o=r(1191),s=0,c=s++,l=s++,u=s++,d=s++,h=s++,p=s++,f=s++,m=s++,g=s++,y=s++,v=s++,b=s++,_=s++,w=s++,x=s++,k=s++,S=s++,E=s++,A=s++,P=s++,C=s++,D=s++,T=s++,O=s++,M=s++,I=s++,R=s++,F=s++,B=s++,j=s++,N=s++,q=s++,L=s++,U=s++,z=s++,H=s++,$=s++,G=s++,K=s++,V=s++,W=s++,Y=s++,J=s++,Q=s++,X=s++,Z=s++,ee=s++,te=s++,re=s++,ne=s++,ae=s++,ie=s++,oe=s++,se=s++,ce=s++,le=0,ue=le++,de=le++,he=le++;function pe(e){return" "===e||"\n"===e||"\t"===e||"\f"===e||"\r"===e}function fe(e,t,r){var n=e.toLowerCase();return e===n?function(e){e===n?this._state=t:(this._state=r,this._index--)}:function(a){a===n||a===e?this._state=t:(this._state=r,this._index--)}}function me(e,t){var r=e.toLowerCase();return function(n){n===r||n===e?this._state=t:(this._state=u,this._index--)}}function ge(e,t){this._state=c,this._buffer="",this._sectionStart=0,this._index=0,this._bufferOffset=0,this._baseState=c,this._special=ue,this._cbs=t,this._running=!0,this._ended=!1,this._xmlMode=!(!e||!e.xmlMode),this._decodeEntities=!(!e||!e.decodeEntities)}ge.prototype._stateText=function(e){"<"===e?(this._index>this._sectionStart&&this._cbs.ontext(this._getSection()),this._state=l,this._sectionStart=this._index):this._decodeEntities&&this._special===ue&&"&"===e&&(this._index>this._sectionStart&&this._cbs.ontext(this._getSection()),this._baseState=c,this._state=ae,this._sectionStart=this._index)},ge.prototype._stateBeforeTagName=function(e){"/"===e?this._state=h:"<"===e?(this._cbs.ontext(this._getSection()),this._sectionStart=this._index):">"===e||this._special!==ue||pe(e)?this._state=c:"!"===e?(this._state=x,this._sectionStart=this._index+1):"?"===e?(this._state=S,this._sectionStart=this._index+1):(this._state=this._xmlMode||"s"!==e&&"S"!==e?u:N,this._sectionStart=this._index)},ge.prototype._stateInTagName=function(e){("/"===e||">"===e||pe(e))&&(this._emitToken("onopentagname"),this._state=m,this._index--)},ge.prototype._stateBeforeCloseingTagName=function(e){pe(e)||(">"===e?this._state=c:this._special!==ue?"s"===e||"S"===e?this._state=q:(this._state=c,this._index--):(this._state=p,this._sectionStart=this._index))},ge.prototype._stateInCloseingTagName=function(e){(">"===e||pe(e))&&(this._emitToken("onclosetag"),this._state=f,this._index--)},ge.prototype._stateAfterCloseingTagName=function(e){">"===e&&(this._state=c,this._sectionStart=this._index+1)},ge.prototype._stateBeforeAttributeName=function(e){">"===e?(this._cbs.onopentagend(),this._state=c,this._sectionStart=this._index+1):"/"===e?this._state=d:pe(e)||(this._state=g,this._sectionStart=this._index)},ge.prototype._stateInSelfClosingTag=function(e){">"===e?(this._cbs.onselfclosingtag(),this._state=c,this._sectionStart=this._index+1):pe(e)||(this._state=m,this._index--)},ge.prototype._stateInAttributeName=function(e){("="===e||"/"===e||">"===e||pe(e))&&(this._cbs.onattribname(this._getSection()),this._sectionStart=-1,this._state=y,this._index--)},ge.prototype._stateAfterAttributeName=function(e){"="===e?this._state=v:"/"===e||">"===e?(this._cbs.onattribend(),this._state=m,this._index--):pe(e)||(this._cbs.onattribend(),this._state=g,this._sectionStart=this._index)},ge.prototype._stateBeforeAttributeValue=function(e){'"'===e?(this._state=b,this._sectionStart=this._index+1):"'"===e?(this._state=_,this._sectionStart=this._index+1):pe(e)||(this._state=w,this._sectionStart=this._index,this._index--)},ge.prototype._stateInAttributeValueDoubleQuotes=function(e){'"'===e?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=m):this._decodeEntities&&"&"===e&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=ae,this._sectionStart=this._index)},ge.prototype._stateInAttributeValueSingleQuotes=function(e){"'"===e?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=m):this._decodeEntities&&"&"===e&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=ae,this._sectionStart=this._index)},ge.prototype._stateInAttributeValueNoQuotes=function(e){pe(e)||">"===e?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=m,this._index--):this._decodeEntities&&"&"===e&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=ae,this._sectionStart=this._index)},ge.prototype._stateBeforeDeclaration=function(e){this._state="["===e?D:"-"===e?E:k},ge.prototype._stateInDeclaration=function(e){">"===e&&(this._cbs.ondeclaration(this._getSection()),this._state=c,this._sectionStart=this._index+1)},ge.prototype._stateInProcessingInstruction=function(e){">"===e&&(this._cbs.onprocessinginstruction(this._getSection()),this._state=c,this._sectionStart=this._index+1)},ge.prototype._stateBeforeComment=function(e){"-"===e?(this._state=A,this._sectionStart=this._index+1):this._state=k},ge.prototype._stateInComment=function(e){"-"===e&&(this._state=P)},ge.prototype._stateAfterComment1=function(e){this._state="-"===e?C:A},ge.prototype._stateAfterComment2=function(e){">"===e?(this._cbs.oncomment(this._buffer.substring(this._sectionStart,this._index-2)),this._state=c,this._sectionStart=this._index+1):"-"!==e&&(this._state=A)},ge.prototype._stateBeforeCdata1=fe("C",T,k),ge.prototype._stateBeforeCdata2=fe("D",O,k),ge.prototype._stateBeforeCdata3=fe("A",M,k),ge.prototype._stateBeforeCdata4=fe("T",I,k),ge.prototype._stateBeforeCdata5=fe("A",R,k),ge.prototype._stateBeforeCdata6=function(e){"["===e?(this._state=F,this._sectionStart=this._index+1):(this._state=k,this._index--)},ge.prototype._stateInCdata=function(e){"]"===e&&(this._state=B)},ge.prototype._stateAfterCdata1=function(e){this._state="]"===e?j:F},ge.prototype._stateAfterCdata2=function(e){">"===e?(this._cbs.oncdata(this._buffer.substring(this._sectionStart,this._index-2)),this._state=c,this._sectionStart=this._index+1):"]"!==e&&(this._state=F)},ge.prototype._stateBeforeSpecial=function(e){"c"===e||"C"===e?this._state=L:"t"===e||"T"===e?this._state=J:(this._state=u,this._index--)},ge.prototype._stateBeforeSpecialEnd=function(e){this._special!==de||"c"!==e&&"C"!==e?this._special!==he||"t"!==e&&"T"!==e?this._state=c:this._state=ee:this._state=G},ge.prototype._stateBeforeScript1=me("R",U),ge.prototype._stateBeforeScript2=me("I",z),ge.prototype._stateBeforeScript3=me("P",H),ge.prototype._stateBeforeScript4=me("T",$),ge.prototype._stateBeforeScript5=function(e){("/"===e||">"===e||pe(e))&&(this._special=de),this._state=u,this._index--},ge.prototype._stateAfterScript1=fe("R",K,c),ge.prototype._stateAfterScript2=fe("I",V,c),ge.prototype._stateAfterScript3=fe("P",W,c),ge.prototype._stateAfterScript4=fe("T",Y,c),ge.prototype._stateAfterScript5=function(e){">"===e||pe(e)?(this._special=ue,this._state=p,this._sectionStart=this._index-6,this._index--):this._state=c},ge.prototype._stateBeforeStyle1=me("Y",Q),ge.prototype._stateBeforeStyle2=me("L",X),ge.prototype._stateBeforeStyle3=me("E",Z),ge.prototype._stateBeforeStyle4=function(e){("/"===e||">"===e||pe(e))&&(this._special=he),this._state=u,this._index--},ge.prototype._stateAfterStyle1=fe("Y",te,c),ge.prototype._stateAfterStyle2=fe("L",re,c),ge.prototype._stateAfterStyle3=fe("E",ne,c),ge.prototype._stateAfterStyle4=function(e){">"===e||pe(e)?(this._special=ue,this._state=p,this._sectionStart=this._index-5,this._index--):this._state=c},ge.prototype._stateBeforeEntity=fe("#",ie,oe),ge.prototype._stateBeforeNumericEntity=fe("X",ce,se),ge.prototype._parseNamedEntityStrict=function(){if(this._sectionStart+1<this._index){var e=this._buffer.substring(this._sectionStart+1,this._index),t=this._xmlMode?o:a;t.hasOwnProperty(e)&&(this._emitPartial(t[e]),this._sectionStart=this._index+1)}},ge.prototype._parseLegacyEntity=function(){var e=this._sectionStart+1,t=this._index-e;for(t>6&&(t=6);t>=2;){var r=this._buffer.substr(e,t);if(i.hasOwnProperty(r))return this._emitPartial(i[r]),void(this._sectionStart+=t+1);t--}},ge.prototype._stateInNamedEntity=function(e){";"===e?(this._parseNamedEntityStrict(),this._sectionStart+1<this._index&&!this._xmlMode&&this._parseLegacyEntity(),this._state=this._baseState):(e<"a"||e>"z")&&(e<"A"||e>"Z")&&(e<"0"||e>"9")&&(this._xmlMode||this._sectionStart+1===this._index||(this._baseState!==c?"="!==e&&this._parseNamedEntityStrict():this._parseLegacyEntity()),this._state=this._baseState,this._index--)},ge.prototype._decodeNumericEntity=function(e,t){var r=this._sectionStart+e;if(r!==this._index){var a=this._buffer.substring(r,this._index),i=parseInt(a,t);this._emitPartial(n(i)),this._sectionStart=this._index}else this._sectionStart--;this._state=this._baseState},ge.prototype._stateInNumericEntity=function(e){";"===e?(this._decodeNumericEntity(2,10),this._sectionStart++):(e<"0"||e>"9")&&(this._xmlMode?this._state=this._baseState:this._decodeNumericEntity(2,10),this._index--)},ge.prototype._stateInHexEntity=function(e){";"===e?(this._decodeNumericEntity(3,16),this._sectionStart++):(e<"a"||e>"f")&&(e<"A"||e>"F")&&(e<"0"||e>"9")&&(this._xmlMode?this._state=this._baseState:this._decodeNumericEntity(3,16),this._index--)},ge.prototype._cleanup=function(){this._sectionStart<0?(this._buffer="",this._bufferOffset+=this._index,this._index=0):this._running&&(this._state===c?(this._sectionStart!==this._index&&this._cbs.ontext(this._buffer.substr(this._sectionStart)),this._buffer="",this._bufferOffset+=this._index,this._index=0):this._sectionStart===this._index?(this._buffer="",this._bufferOffset+=this._index,this._index=0):(this._buffer=this._buffer.substr(this._sectionStart),this._index-=this._sectionStart,this._bufferOffset+=this._sectionStart),this._sectionStart=0)},ge.prototype.write=function(e){this._ended&&this._cbs.onerror(Error(".write() after done!")),this._buffer+=e,this._parse()},ge.prototype._parse=function(){for(;this._index<this._buffer.length&&this._running;){var e=this._buffer.charAt(this._index);this._state===c?this._stateText(e):this._state===l?this._stateBeforeTagName(e):this._state===u?this._stateInTagName(e):this._state===h?this._stateBeforeCloseingTagName(e):this._state===p?this._stateInCloseingTagName(e):this._state===f?this._stateAfterCloseingTagName(e):this._state===d?this._stateInSelfClosingTag(e):this._state===m?this._stateBeforeAttributeName(e):this._state===g?this._stateInAttributeName(e):this._state===y?this._stateAfterAttributeName(e):this._state===v?this._stateBeforeAttributeValue(e):this._state===b?this._stateInAttributeValueDoubleQuotes(e):this._state===_?this._stateInAttributeValueSingleQuotes(e):this._state===w?this._stateInAttributeValueNoQuotes(e):this._state===x?this._stateBeforeDeclaration(e):this._state===k?this._stateInDeclaration(e):this._state===S?this._stateInProcessingInstruction(e):this._state===E?this._stateBeforeComment(e):this._state===A?this._stateInComment(e):this._state===P?this._stateAfterComment1(e):this._state===C?this._stateAfterComment2(e):this._state===D?this._stateBeforeCdata1(e):this._state===T?this._stateBeforeCdata2(e):this._state===O?this._stateBeforeCdata3(e):this._state===M?this._stateBeforeCdata4(e):this._state===I?this._stateBeforeCdata5(e):this._state===R?this._stateBeforeCdata6(e):this._state===F?this._stateInCdata(e):this._state===B?this._stateAfterCdata1(e):this._state===j?this._stateAfterCdata2(e):this._state===N?this._stateBeforeSpecial(e):this._state===q?this._stateBeforeSpecialEnd(e):this._state===L?this._stateBeforeScript1(e):this._state===U?this._stateBeforeScript2(e):this._state===z?this._stateBeforeScript3(e):this._state===H?this._stateBeforeScript4(e):this._state===$?this._stateBeforeScript5(e):this._state===G?this._stateAfterScript1(e):this._state===K?this._stateAfterScript2(e):this._state===V?this._stateAfterScript3(e):this._state===W?this._stateAfterScript4(e):this._state===Y?this._stateAfterScript5(e):this._state===J?this._stateBeforeStyle1(e):this._state===Q?this._stateBeforeStyle2(e):this._state===X?this._stateBeforeStyle3(e):this._state===Z?this._stateBeforeStyle4(e):this._state===ee?this._stateAfterStyle1(e):this._state===te?this._stateAfterStyle2(e):this._state===re?this._stateAfterStyle3(e):this._state===ne?this._stateAfterStyle4(e):this._state===ae?this._stateBeforeEntity(e):this._state===ie?this._stateBeforeNumericEntity(e):this._state===oe?this._stateInNamedEntity(e):this._state===se?this._stateInNumericEntity(e):this._state===ce?this._stateInHexEntity(e):this._cbs.onerror(Error("unknown _state"),this._state),this._index++}this._cleanup()},ge.prototype.pause=function(){this._running=!1},ge.prototype.resume=function(){this._running=!0,this._index<this._buffer.length&&this._parse(),this._ended&&this._finish()},ge.prototype.end=function(e){this._ended&&this._cbs.onerror(Error(".end() after done!")),e&&this.write(e),this._ended=!0,this._running&&this._finish()},ge.prototype._finish=function(){this._sectionStart<this._index&&this._handleTrailingData(),this._cbs.onend()},ge.prototype._handleTrailingData=function(){var e=this._buffer.substr(this._sectionStart);this._state===F||this._state===B||this._state===j?this._cbs.oncdata(e):this._state===A||this._state===P||this._state===C?this._cbs.oncomment(e):this._state!==oe||this._xmlMode?this._state!==se||this._xmlMode?this._state!==ce||this._xmlMode?this._state!==u&&this._state!==m&&this._state!==v&&this._state!==y&&this._state!==g&&this._state!==_&&this._state!==b&&this._state!==w&&this._state!==p&&this._cbs.ontext(e):(this._decodeNumericEntity(3,16),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData())):(this._decodeNumericEntity(2,10),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData())):(this._parseLegacyEntity(),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData()))},ge.prototype.reset=function(){ge.call(this,{xmlMode:this._xmlMode,decodeEntities:this._decodeEntities},this._cbs)},ge.prototype.getAbsoluteIndex=function(){return this._bufferOffset+this._index},ge.prototype._getSection=function(){return this._buffer.substring(this._sectionStart,this._index)},ge.prototype._emitToken=function(e){this._cbs[e](this._getSection()),this._sectionStart=-1},ge.prototype._emitPartial=function(e){this._baseState!==c?this._cbs.onattribdata(e):this._cbs.ontext(e)}},function(e,t,r){var n=r(101),a=/\s+/g,i=r(550),o=r(1192);function s(e,t,r){"object"==typeof e?(r=t,t=e,e=null):"function"==typeof t&&(r=t,t=c),this._callback=e,this._options=t||c,this._elementCB=r,this.dom=[],this._done=!1,this._tagStack=[],this._parser=this._parser||null}var c={normalizeWhitespace:!1,withStartIndices:!1,withEndIndices:!1};s.prototype.onparserinit=function(e){this._parser=e},s.prototype.onreset=function(){s.call(this,this._callback,this._options,this._elementCB)},s.prototype.onend=function(){this._done||(this._done=!0,this._parser=null,this._handleCallback(null))},s.prototype._handleCallback=s.prototype.onerror=function(e){if("function"==typeof this._callback)this._callback(e,this.dom);else if(e)throw e},s.prototype.onclosetag=function(){var e=this._tagStack.pop();this._options.withEndIndices&&e&&(e.endIndex=this._parser.endIndex),this._elementCB&&this._elementCB(e)},s.prototype._createDomElement=function(e){if(!this._options.withDomLvl1)return e;var t;for(var r in t="tag"===e.type?Object.create(o):Object.create(i),e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},s.prototype._addDomElement=function(e){var t=this._tagStack[this._tagStack.length-1],r=t?t.children:this.dom,n=r[r.length-1];e.next=null,this._options.withStartIndices&&(e.startIndex=this._parser.startIndex),this._options.withEndIndices&&(e.endIndex=this._parser.endIndex),n?(e.prev=n,n.next=e):e.prev=null,r.push(e),e.parent=t||null},s.prototype.onopentag=function(e,t){var r={type:"script"===e?n.Script:"style"===e?n.Style:n.Tag,name:e,attribs:t,children:[]},a=this._createDomElement(r);this._addDomElement(a),this._tagStack.push(a)},s.prototype.ontext=function(e){var t,r=this._options.normalizeWhitespace||this._options.ignoreWhitespace;if(!this._tagStack.length&&this.dom.length&&(t=this.dom[this.dom.length-1]).type===n.Text)r?t.data=(t.data+e).replace(a," "):t.data+=e;else if(this._tagStack.length&&(t=this._tagStack[this._tagStack.length-1])&&(t=t.children[t.children.length-1])&&t.type===n.Text)r?t.data=(t.data+e).replace(a," "):t.data+=e;else{r&&(e=e.replace(a," "));var i=this._createDomElement({data:e,type:n.Text});this._addDomElement(i)}},s.prototype.oncomment=function(e){var t=this._tagStack[this._tagStack.length-1];if(t&&t.type===n.Comment)t.data+=e;else{var r={data:e,type:n.Comment},a=this._createDomElement(r);this._addDomElement(a),this._tagStack.push(a)}},s.prototype.oncdatastart=function(){var e={children:[{data:"",type:n.Text}],type:n.CDATA},t=this._createDomElement(e);this._addDomElement(t),this._tagStack.push(t)},s.prototype.oncommentend=s.prototype.oncdataend=function(){this._tagStack.pop()},s.prototype.onprocessinginstruction=function(e,t){var r=this._createDomElement({name:e,data:t,type:n.Directive});this._addDomElement(r)},e.exports=s},function(e,t){var r=e.exports={get firstChild(){var e=this.children;return e&&e[0]||null},get lastChild(){var e=this.children;return e&&e[e.length-1]||null},get nodeType(){return a[this.type]||a.element}},n={tagName:"name",childNodes:"children",parentNode:"parent",previousSibling:"prev",nextSibling:"next",nodeValue:"data"},a={element:1,text:3,cdata:4,comment:8};Object.keys(n).forEach((function(e){var t=n[e];Object.defineProperty(r,e,{get:function(){return this[t]||null},set:function(e){return this[t]=e,e}})}))},function(e,t,r){var n=e.exports;[r(1194),r(1202),r(1203),r(1204),r(1205),r(1206)].forEach((function(e){Object.keys(e).forEach((function(t){n[t]=e[t].bind(n)}))}))},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeHTML=t.decodeHTMLStrict=t.decodeXML=void 0;var a=n(r(553)),i=n(r(1198)),o=n(r(554)),s=n(r(1199)),c=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;function l(e){var t=d(e);return function(e){return String(e).replace(c,t)}}t.decodeXML=l(o.default),t.decodeHTMLStrict=l(a.default);var u=function(e,t){return e<t?1:-1};function d(e){return function(t){if("#"===t.charAt(1)){var r=t.charAt(2);return"X"===r||"x"===r?s.default(parseInt(t.substr(3),16)):s.default(parseInt(t.substr(2),10))}return e[t.slice(1,-1)]||t}}t.decodeHTML=function(){for(var e=Object.keys(i.default).sort(u),t=Object.keys(a.default).sort(u),r=0,n=0;r<t.length;r++)e[n]===t[r]?(t[r]+=";?",n++):t[r]+=";";var o=new RegExp("&(?:"+t.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),s=d(a.default);function c(e){return";"!==e.substr(-1)&&(e+=";"),s(e)}return function(e){return String(e).replace(o,c)}}()},function(e){e.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Abreve":"Ă","abreve":"ă","ac":"∾","acd":"∿","acE":"∾̳","Acirc":"Â","acirc":"â","acute":"´","Acy":"А","acy":"а","AElig":"Æ","aelig":"æ","af":"⁡","Afr":"𝔄","afr":"𝔞","Agrave":"À","agrave":"à","alefsym":"ℵ","aleph":"ℵ","Alpha":"Α","alpha":"α","Amacr":"Ā","amacr":"ā","amalg":"⨿","amp":"&","AMP":"&","andand":"⩕","And":"⩓","and":"∧","andd":"⩜","andslope":"⩘","andv":"⩚","ang":"∠","ange":"⦤","angle":"∠","angmsdaa":"⦨","angmsdab":"⦩","angmsdac":"⦪","angmsdad":"⦫","angmsdae":"⦬","angmsdaf":"⦭","angmsdag":"⦮","angmsdah":"⦯","angmsd":"∡","angrt":"∟","angrtvb":"⊾","angrtvbd":"⦝","angsph":"∢","angst":"Å","angzarr":"⍼","Aogon":"Ą","aogon":"ą","Aopf":"𝔸","aopf":"𝕒","apacir":"⩯","ap":"≈","apE":"⩰","ape":"≊","apid":"≋","apos":"\'","ApplyFunction":"⁡","approx":"≈","approxeq":"≊","Aring":"Å","aring":"å","Ascr":"𝒜","ascr":"𝒶","Assign":"≔","ast":"*","asymp":"≈","asympeq":"≍","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","awconint":"∳","awint":"⨑","backcong":"≌","backepsilon":"϶","backprime":"‵","backsim":"∽","backsimeq":"⋍","Backslash":"∖","Barv":"⫧","barvee":"⊽","barwed":"⌅","Barwed":"⌆","barwedge":"⌅","bbrk":"⎵","bbrktbrk":"⎶","bcong":"≌","Bcy":"Б","bcy":"б","bdquo":"„","becaus":"∵","because":"∵","Because":"∵","bemptyv":"⦰","bepsi":"϶","bernou":"ℬ","Bernoullis":"ℬ","Beta":"Β","beta":"β","beth":"ℶ","between":"≬","Bfr":"𝔅","bfr":"𝔟","bigcap":"⋂","bigcirc":"◯","bigcup":"⋃","bigodot":"⨀","bigoplus":"⨁","bigotimes":"⨂","bigsqcup":"⨆","bigstar":"★","bigtriangledown":"▽","bigtriangleup":"△","biguplus":"⨄","bigvee":"⋁","bigwedge":"⋀","bkarow":"⤍","blacklozenge":"⧫","blacksquare":"▪","blacktriangle":"▴","blacktriangledown":"▾","blacktriangleleft":"◂","blacktriangleright":"▸","blank":"␣","blk12":"▒","blk14":"░","blk34":"▓","block":"█","bne":"=⃥","bnequiv":"≡⃥","bNot":"⫭","bnot":"⌐","Bopf":"𝔹","bopf":"𝕓","bot":"⊥","bottom":"⊥","bowtie":"⋈","boxbox":"⧉","boxdl":"┐","boxdL":"╕","boxDl":"╖","boxDL":"╗","boxdr":"┌","boxdR":"╒","boxDr":"╓","boxDR":"╔","boxh":"─","boxH":"═","boxhd":"┬","boxHd":"╤","boxhD":"╥","boxHD":"╦","boxhu":"┴","boxHu":"╧","boxhU":"╨","boxHU":"╩","boxminus":"⊟","boxplus":"⊞","boxtimes":"⊠","boxul":"┘","boxuL":"╛","boxUl":"╜","boxUL":"╝","boxur":"└","boxuR":"╘","boxUr":"╙","boxUR":"╚","boxv":"│","boxV":"║","boxvh":"┼","boxvH":"╪","boxVh":"╫","boxVH":"╬","boxvl":"┤","boxvL":"╡","boxVl":"╢","boxVL":"╣","boxvr":"├","boxvR":"╞","boxVr":"╟","boxVR":"╠","bprime":"‵","breve":"˘","Breve":"˘","brvbar":"¦","bscr":"𝒷","Bscr":"ℬ","bsemi":"⁏","bsim":"∽","bsime":"⋍","bsolb":"⧅","bsol":"\\\\","bsolhsub":"⟈","bull":"•","bullet":"•","bump":"≎","bumpE":"⪮","bumpe":"≏","Bumpeq":"≎","bumpeq":"≏","Cacute":"Ć","cacute":"ć","capand":"⩄","capbrcup":"⩉","capcap":"⩋","cap":"∩","Cap":"⋒","capcup":"⩇","capdot":"⩀","CapitalDifferentialD":"ⅅ","caps":"∩︀","caret":"⁁","caron":"ˇ","Cayleys":"ℭ","ccaps":"⩍","Ccaron":"Č","ccaron":"č","Ccedil":"Ç","ccedil":"ç","Ccirc":"Ĉ","ccirc":"ĉ","Cconint":"∰","ccups":"⩌","ccupssm":"⩐","Cdot":"Ċ","cdot":"ċ","cedil":"¸","Cedilla":"¸","cemptyv":"⦲","cent":"¢","centerdot":"·","CenterDot":"·","cfr":"𝔠","Cfr":"ℭ","CHcy":"Ч","chcy":"ч","check":"✓","checkmark":"✓","Chi":"Χ","chi":"χ","circ":"ˆ","circeq":"≗","circlearrowleft":"↺","circlearrowright":"↻","circledast":"⊛","circledcirc":"⊚","circleddash":"⊝","CircleDot":"⊙","circledR":"®","circledS":"Ⓢ","CircleMinus":"⊖","CirclePlus":"⊕","CircleTimes":"⊗","cir":"○","cirE":"⧃","cire":"≗","cirfnint":"⨐","cirmid":"⫯","cirscir":"⧂","ClockwiseContourIntegral":"∲","CloseCurlyDoubleQuote":"”","CloseCurlyQuote":"’","clubs":"♣","clubsuit":"♣","colon":":","Colon":"∷","Colone":"⩴","colone":"≔","coloneq":"≔","comma":",","commat":"@","comp":"∁","compfn":"∘","complement":"∁","complexes":"ℂ","cong":"≅","congdot":"⩭","Congruent":"≡","conint":"∮","Conint":"∯","ContourIntegral":"∮","copf":"𝕔","Copf":"ℂ","coprod":"∐","Coproduct":"∐","copy":"©","COPY":"©","copysr":"℗","CounterClockwiseContourIntegral":"∳","crarr":"↵","cross":"✗","Cross":"⨯","Cscr":"𝒞","cscr":"𝒸","csub":"⫏","csube":"⫑","csup":"⫐","csupe":"⫒","ctdot":"⋯","cudarrl":"⤸","cudarrr":"⤵","cuepr":"⋞","cuesc":"⋟","cularr":"↶","cularrp":"⤽","cupbrcap":"⩈","cupcap":"⩆","CupCap":"≍","cup":"∪","Cup":"⋓","cupcup":"⩊","cupdot":"⊍","cupor":"⩅","cups":"∪︀","curarr":"↷","curarrm":"⤼","curlyeqprec":"⋞","curlyeqsucc":"⋟","curlyvee":"⋎","curlywedge":"⋏","curren":"¤","curvearrowleft":"↶","curvearrowright":"↷","cuvee":"⋎","cuwed":"⋏","cwconint":"∲","cwint":"∱","cylcty":"⌭","dagger":"†","Dagger":"‡","daleth":"ℸ","darr":"↓","Darr":"↡","dArr":"⇓","dash":"‐","Dashv":"⫤","dashv":"⊣","dbkarow":"⤏","dblac":"˝","Dcaron":"Ď","dcaron":"ď","Dcy":"Д","dcy":"д","ddagger":"‡","ddarr":"⇊","DD":"ⅅ","dd":"ⅆ","DDotrahd":"⤑","ddotseq":"⩷","deg":"°","Del":"∇","Delta":"Δ","delta":"δ","demptyv":"⦱","dfisht":"⥿","Dfr":"𝔇","dfr":"𝔡","dHar":"⥥","dharl":"⇃","dharr":"⇂","DiacriticalAcute":"´","DiacriticalDot":"˙","DiacriticalDoubleAcute":"˝","DiacriticalGrave":"`","DiacriticalTilde":"˜","diam":"⋄","diamond":"⋄","Diamond":"⋄","diamondsuit":"♦","diams":"♦","die":"¨","DifferentialD":"ⅆ","digamma":"ϝ","disin":"⋲","div":"÷","divide":"÷","divideontimes":"⋇","divonx":"⋇","DJcy":"Ђ","djcy":"ђ","dlcorn":"⌞","dlcrop":"⌍","dollar":"$","Dopf":"𝔻","dopf":"𝕕","Dot":"¨","dot":"˙","DotDot":"⃜","doteq":"≐","doteqdot":"≑","DotEqual":"≐","dotminus":"∸","dotplus":"∔","dotsquare":"⊡","doublebarwedge":"⌆","DoubleContourIntegral":"∯","DoubleDot":"¨","DoubleDownArrow":"⇓","DoubleLeftArrow":"⇐","DoubleLeftRightArrow":"⇔","DoubleLeftTee":"⫤","DoubleLongLeftArrow":"⟸","DoubleLongLeftRightArrow":"⟺","DoubleLongRightArrow":"⟹","DoubleRightArrow":"⇒","DoubleRightTee":"⊨","DoubleUpArrow":"⇑","DoubleUpDownArrow":"⇕","DoubleVerticalBar":"∥","DownArrowBar":"⤓","downarrow":"↓","DownArrow":"↓","Downarrow":"⇓","DownArrowUpArrow":"⇵","DownBreve":"̑","downdownarrows":"⇊","downharpoonleft":"⇃","downharpoonright":"⇂","DownLeftRightVector":"⥐","DownLeftTeeVector":"⥞","DownLeftVectorBar":"⥖","DownLeftVector":"↽","DownRightTeeVector":"⥟","DownRightVectorBar":"⥗","DownRightVector":"⇁","DownTeeArrow":"↧","DownTee":"⊤","drbkarow":"⤐","drcorn":"⌟","drcrop":"⌌","Dscr":"𝒟","dscr":"𝒹","DScy":"Ѕ","dscy":"ѕ","dsol":"⧶","Dstrok":"Đ","dstrok":"đ","dtdot":"⋱","dtri":"▿","dtrif":"▾","duarr":"⇵","duhar":"⥯","dwangle":"⦦","DZcy":"Џ","dzcy":"џ","dzigrarr":"⟿","Eacute":"É","eacute":"é","easter":"⩮","Ecaron":"Ě","ecaron":"ě","Ecirc":"Ê","ecirc":"ê","ecir":"≖","ecolon":"≕","Ecy":"Э","ecy":"э","eDDot":"⩷","Edot":"Ė","edot":"ė","eDot":"≑","ee":"ⅇ","efDot":"≒","Efr":"𝔈","efr":"𝔢","eg":"⪚","Egrave":"È","egrave":"è","egs":"⪖","egsdot":"⪘","el":"⪙","Element":"∈","elinters":"⏧","ell":"ℓ","els":"⪕","elsdot":"⪗","Emacr":"Ē","emacr":"ē","empty":"∅","emptyset":"∅","EmptySmallSquare":"◻","emptyv":"∅","EmptyVerySmallSquare":"▫","emsp13":" ","emsp14":" ","emsp":" ","ENG":"Ŋ","eng":"ŋ","ensp":" ","Eogon":"Ę","eogon":"ę","Eopf":"𝔼","eopf":"𝕖","epar":"⋕","eparsl":"⧣","eplus":"⩱","epsi":"ε","Epsilon":"Ε","epsilon":"ε","epsiv":"ϵ","eqcirc":"≖","eqcolon":"≕","eqsim":"≂","eqslantgtr":"⪖","eqslantless":"⪕","Equal":"⩵","equals":"=","EqualTilde":"≂","equest":"≟","Equilibrium":"⇌","equiv":"≡","equivDD":"⩸","eqvparsl":"⧥","erarr":"⥱","erDot":"≓","escr":"ℯ","Escr":"ℰ","esdot":"≐","Esim":"⩳","esim":"≂","Eta":"Η","eta":"η","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","euro":"€","excl":"!","exist":"∃","Exists":"∃","expectation":"ℰ","exponentiale":"ⅇ","ExponentialE":"ⅇ","fallingdotseq":"≒","Fcy":"Ф","fcy":"ф","female":"♀","ffilig":"ﬃ","fflig":"ﬀ","ffllig":"ﬄ","Ffr":"𝔉","ffr":"𝔣","filig":"ﬁ","FilledSmallSquare":"◼","FilledVerySmallSquare":"▪","fjlig":"fj","flat":"♭","fllig":"ﬂ","fltns":"▱","fnof":"ƒ","Fopf":"𝔽","fopf":"𝕗","forall":"∀","ForAll":"∀","fork":"⋔","forkv":"⫙","Fouriertrf":"ℱ","fpartint":"⨍","frac12":"½","frac13":"⅓","frac14":"¼","frac15":"⅕","frac16":"⅙","frac18":"⅛","frac23":"⅔","frac25":"⅖","frac34":"¾","frac35":"⅗","frac38":"⅜","frac45":"⅘","frac56":"⅚","frac58":"⅝","frac78":"⅞","frasl":"⁄","frown":"⌢","fscr":"𝒻","Fscr":"ℱ","gacute":"ǵ","Gamma":"Γ","gamma":"γ","Gammad":"Ϝ","gammad":"ϝ","gap":"⪆","Gbreve":"Ğ","gbreve":"ğ","Gcedil":"Ģ","Gcirc":"Ĝ","gcirc":"ĝ","Gcy":"Г","gcy":"г","Gdot":"Ġ","gdot":"ġ","ge":"≥","gE":"≧","gEl":"⪌","gel":"⋛","geq":"≥","geqq":"≧","geqslant":"⩾","gescc":"⪩","ges":"⩾","gesdot":"⪀","gesdoto":"⪂","gesdotol":"⪄","gesl":"⋛︀","gesles":"⪔","Gfr":"𝔊","gfr":"𝔤","gg":"≫","Gg":"⋙","ggg":"⋙","gimel":"ℷ","GJcy":"Ѓ","gjcy":"ѓ","gla":"⪥","gl":"≷","glE":"⪒","glj":"⪤","gnap":"⪊","gnapprox":"⪊","gne":"⪈","gnE":"≩","gneq":"⪈","gneqq":"≩","gnsim":"⋧","Gopf":"𝔾","gopf":"𝕘","grave":"`","GreaterEqual":"≥","GreaterEqualLess":"⋛","GreaterFullEqual":"≧","GreaterGreater":"⪢","GreaterLess":"≷","GreaterSlantEqual":"⩾","GreaterTilde":"≳","Gscr":"𝒢","gscr":"ℊ","gsim":"≳","gsime":"⪎","gsiml":"⪐","gtcc":"⪧","gtcir":"⩺","gt":">","GT":">","Gt":"≫","gtdot":"⋗","gtlPar":"⦕","gtquest":"⩼","gtrapprox":"⪆","gtrarr":"⥸","gtrdot":"⋗","gtreqless":"⋛","gtreqqless":"⪌","gtrless":"≷","gtrsim":"≳","gvertneqq":"≩︀","gvnE":"≩︀","Hacek":"ˇ","hairsp":" ","half":"½","hamilt":"ℋ","HARDcy":"Ъ","hardcy":"ъ","harrcir":"⥈","harr":"↔","hArr":"⇔","harrw":"↭","Hat":"^","hbar":"ℏ","Hcirc":"Ĥ","hcirc":"ĥ","hearts":"♥","heartsuit":"♥","hellip":"…","hercon":"⊹","hfr":"𝔥","Hfr":"ℌ","HilbertSpace":"ℋ","hksearow":"⤥","hkswarow":"⤦","hoarr":"⇿","homtht":"∻","hookleftarrow":"↩","hookrightarrow":"↪","hopf":"𝕙","Hopf":"ℍ","horbar":"―","HorizontalLine":"─","hscr":"𝒽","Hscr":"ℋ","hslash":"ℏ","Hstrok":"Ħ","hstrok":"ħ","HumpDownHump":"≎","HumpEqual":"≏","hybull":"⁃","hyphen":"‐","Iacute":"Í","iacute":"í","ic":"⁣","Icirc":"Î","icirc":"î","Icy":"И","icy":"и","Idot":"İ","IEcy":"Е","iecy":"е","iexcl":"¡","iff":"⇔","ifr":"𝔦","Ifr":"ℑ","Igrave":"Ì","igrave":"ì","ii":"ⅈ","iiiint":"⨌","iiint":"∭","iinfin":"⧜","iiota":"℩","IJlig":"Ĳ","ijlig":"ĳ","Imacr":"Ī","imacr":"ī","image":"ℑ","ImaginaryI":"ⅈ","imagline":"ℐ","imagpart":"ℑ","imath":"ı","Im":"ℑ","imof":"⊷","imped":"Ƶ","Implies":"⇒","incare":"℅","in":"∈","infin":"∞","infintie":"⧝","inodot":"ı","intcal":"⊺","int":"∫","Int":"∬","integers":"ℤ","Integral":"∫","intercal":"⊺","Intersection":"⋂","intlarhk":"⨗","intprod":"⨼","InvisibleComma":"⁣","InvisibleTimes":"⁢","IOcy":"Ё","iocy":"ё","Iogon":"Į","iogon":"į","Iopf":"𝕀","iopf":"𝕚","Iota":"Ι","iota":"ι","iprod":"⨼","iquest":"¿","iscr":"𝒾","Iscr":"ℐ","isin":"∈","isindot":"⋵","isinE":"⋹","isins":"⋴","isinsv":"⋳","isinv":"∈","it":"⁢","Itilde":"Ĩ","itilde":"ĩ","Iukcy":"І","iukcy":"і","Iuml":"Ï","iuml":"ï","Jcirc":"Ĵ","jcirc":"ĵ","Jcy":"Й","jcy":"й","Jfr":"𝔍","jfr":"𝔧","jmath":"ȷ","Jopf":"𝕁","jopf":"𝕛","Jscr":"𝒥","jscr":"𝒿","Jsercy":"Ј","jsercy":"ј","Jukcy":"Є","jukcy":"є","Kappa":"Κ","kappa":"κ","kappav":"ϰ","Kcedil":"Ķ","kcedil":"ķ","Kcy":"К","kcy":"к","Kfr":"𝔎","kfr":"𝔨","kgreen":"ĸ","KHcy":"Х","khcy":"х","KJcy":"Ќ","kjcy":"ќ","Kopf":"𝕂","kopf":"𝕜","Kscr":"𝒦","kscr":"𝓀","lAarr":"⇚","Lacute":"Ĺ","lacute":"ĺ","laemptyv":"⦴","lagran":"ℒ","Lambda":"Λ","lambda":"λ","lang":"⟨","Lang":"⟪","langd":"⦑","langle":"⟨","lap":"⪅","Laplacetrf":"ℒ","laquo":"«","larrb":"⇤","larrbfs":"⤟","larr":"←","Larr":"↞","lArr":"⇐","larrfs":"⤝","larrhk":"↩","larrlp":"↫","larrpl":"⤹","larrsim":"⥳","larrtl":"↢","latail":"⤙","lAtail":"⤛","lat":"⪫","late":"⪭","lates":"⪭︀","lbarr":"⤌","lBarr":"⤎","lbbrk":"❲","lbrace":"{","lbrack":"[","lbrke":"⦋","lbrksld":"⦏","lbrkslu":"⦍","Lcaron":"Ľ","lcaron":"ľ","Lcedil":"Ļ","lcedil":"ļ","lceil":"⌈","lcub":"{","Lcy":"Л","lcy":"л","ldca":"⤶","ldquo":"“","ldquor":"„","ldrdhar":"⥧","ldrushar":"⥋","ldsh":"↲","le":"≤","lE":"≦","LeftAngleBracket":"⟨","LeftArrowBar":"⇤","leftarrow":"←","LeftArrow":"←","Leftarrow":"⇐","LeftArrowRightArrow":"⇆","leftarrowtail":"↢","LeftCeiling":"⌈","LeftDoubleBracket":"⟦","LeftDownTeeVector":"⥡","LeftDownVectorBar":"⥙","LeftDownVector":"⇃","LeftFloor":"⌊","leftharpoondown":"↽","leftharpoonup":"↼","leftleftarrows":"⇇","leftrightarrow":"↔","LeftRightArrow":"↔","Leftrightarrow":"⇔","leftrightarrows":"⇆","leftrightharpoons":"⇋","leftrightsquigarrow":"↭","LeftRightVector":"⥎","LeftTeeArrow":"↤","LeftTee":"⊣","LeftTeeVector":"⥚","leftthreetimes":"⋋","LeftTriangleBar":"⧏","LeftTriangle":"⊲","LeftTriangleEqual":"⊴","LeftUpDownVector":"⥑","LeftUpTeeVector":"⥠","LeftUpVectorBar":"⥘","LeftUpVector":"↿","LeftVectorBar":"⥒","LeftVector":"↼","lEg":"⪋","leg":"⋚","leq":"≤","leqq":"≦","leqslant":"⩽","lescc":"⪨","les":"⩽","lesdot":"⩿","lesdoto":"⪁","lesdotor":"⪃","lesg":"⋚︀","lesges":"⪓","lessapprox":"⪅","lessdot":"⋖","lesseqgtr":"⋚","lesseqqgtr":"⪋","LessEqualGreater":"⋚","LessFullEqual":"≦","LessGreater":"≶","lessgtr":"≶","LessLess":"⪡","lesssim":"≲","LessSlantEqual":"⩽","LessTilde":"≲","lfisht":"⥼","lfloor":"⌊","Lfr":"𝔏","lfr":"𝔩","lg":"≶","lgE":"⪑","lHar":"⥢","lhard":"↽","lharu":"↼","lharul":"⥪","lhblk":"▄","LJcy":"Љ","ljcy":"љ","llarr":"⇇","ll":"≪","Ll":"⋘","llcorner":"⌞","Lleftarrow":"⇚","llhard":"⥫","lltri":"◺","Lmidot":"Ŀ","lmidot":"ŀ","lmoustache":"⎰","lmoust":"⎰","lnap":"⪉","lnapprox":"⪉","lne":"⪇","lnE":"≨","lneq":"⪇","lneqq":"≨","lnsim":"⋦","loang":"⟬","loarr":"⇽","lobrk":"⟦","longleftarrow":"⟵","LongLeftArrow":"⟵","Longleftarrow":"⟸","longleftrightarrow":"⟷","LongLeftRightArrow":"⟷","Longleftrightarrow":"⟺","longmapsto":"⟼","longrightarrow":"⟶","LongRightArrow":"⟶","Longrightarrow":"⟹","looparrowleft":"↫","looparrowright":"↬","lopar":"⦅","Lopf":"𝕃","lopf":"𝕝","loplus":"⨭","lotimes":"⨴","lowast":"∗","lowbar":"_","LowerLeftArrow":"↙","LowerRightArrow":"↘","loz":"◊","lozenge":"◊","lozf":"⧫","lpar":"(","lparlt":"⦓","lrarr":"⇆","lrcorner":"⌟","lrhar":"⇋","lrhard":"⥭","lrm":"‎","lrtri":"⊿","lsaquo":"‹","lscr":"𝓁","Lscr":"ℒ","lsh":"↰","Lsh":"↰","lsim":"≲","lsime":"⪍","lsimg":"⪏","lsqb":"[","lsquo":"‘","lsquor":"‚","Lstrok":"Ł","lstrok":"ł","ltcc":"⪦","ltcir":"⩹","lt":"<","LT":"<","Lt":"≪","ltdot":"⋖","lthree":"⋋","ltimes":"⋉","ltlarr":"⥶","ltquest":"⩻","ltri":"◃","ltrie":"⊴","ltrif":"◂","ltrPar":"⦖","lurdshar":"⥊","luruhar":"⥦","lvertneqq":"≨︀","lvnE":"≨︀","macr":"¯","male":"♂","malt":"✠","maltese":"✠","Map":"⤅","map":"↦","mapsto":"↦","mapstodown":"↧","mapstoleft":"↤","mapstoup":"↥","marker":"▮","mcomma":"⨩","Mcy":"М","mcy":"м","mdash":"—","mDDot":"∺","measuredangle":"∡","MediumSpace":" ","Mellintrf":"ℳ","Mfr":"𝔐","mfr":"𝔪","mho":"℧","micro":"µ","midast":"*","midcir":"⫰","mid":"∣","middot":"·","minusb":"⊟","minus":"−","minusd":"∸","minusdu":"⨪","MinusPlus":"∓","mlcp":"⫛","mldr":"…","mnplus":"∓","models":"⊧","Mopf":"𝕄","mopf":"𝕞","mp":"∓","mscr":"𝓂","Mscr":"ℳ","mstpos":"∾","Mu":"Μ","mu":"μ","multimap":"⊸","mumap":"⊸","nabla":"∇","Nacute":"Ń","nacute":"ń","nang":"∠⃒","nap":"≉","napE":"⩰̸","napid":"≋̸","napos":"ŉ","napprox":"≉","natural":"♮","naturals":"ℕ","natur":"♮","nbsp":" ","nbump":"≎̸","nbumpe":"≏̸","ncap":"⩃","Ncaron":"Ň","ncaron":"ň","Ncedil":"Ņ","ncedil":"ņ","ncong":"≇","ncongdot":"⩭̸","ncup":"⩂","Ncy":"Н","ncy":"н","ndash":"–","nearhk":"⤤","nearr":"↗","neArr":"⇗","nearrow":"↗","ne":"≠","nedot":"≐̸","NegativeMediumSpace":"​","NegativeThickSpace":"​","NegativeThinSpace":"​","NegativeVeryThinSpace":"​","nequiv":"≢","nesear":"⤨","nesim":"≂̸","NestedGreaterGreater":"≫","NestedLessLess":"≪","NewLine":"\\n","nexist":"∄","nexists":"∄","Nfr":"𝔑","nfr":"𝔫","ngE":"≧̸","nge":"≱","ngeq":"≱","ngeqq":"≧̸","ngeqslant":"⩾̸","nges":"⩾̸","nGg":"⋙̸","ngsim":"≵","nGt":"≫⃒","ngt":"≯","ngtr":"≯","nGtv":"≫̸","nharr":"↮","nhArr":"⇎","nhpar":"⫲","ni":"∋","nis":"⋼","nisd":"⋺","niv":"∋","NJcy":"Њ","njcy":"њ","nlarr":"↚","nlArr":"⇍","nldr":"‥","nlE":"≦̸","nle":"≰","nleftarrow":"↚","nLeftarrow":"⇍","nleftrightarrow":"↮","nLeftrightarrow":"⇎","nleq":"≰","nleqq":"≦̸","nleqslant":"⩽̸","nles":"⩽̸","nless":"≮","nLl":"⋘̸","nlsim":"≴","nLt":"≪⃒","nlt":"≮","nltri":"⋪","nltrie":"⋬","nLtv":"≪̸","nmid":"∤","NoBreak":"⁠","NonBreakingSpace":" ","nopf":"𝕟","Nopf":"ℕ","Not":"⫬","not":"¬","NotCongruent":"≢","NotCupCap":"≭","NotDoubleVerticalBar":"∦","NotElement":"∉","NotEqual":"≠","NotEqualTilde":"≂̸","NotExists":"∄","NotGreater":"≯","NotGreaterEqual":"≱","NotGreaterFullEqual":"≧̸","NotGreaterGreater":"≫̸","NotGreaterLess":"≹","NotGreaterSlantEqual":"⩾̸","NotGreaterTilde":"≵","NotHumpDownHump":"≎̸","NotHumpEqual":"≏̸","notin":"∉","notindot":"⋵̸","notinE":"⋹̸","notinva":"∉","notinvb":"⋷","notinvc":"⋶","NotLeftTriangleBar":"⧏̸","NotLeftTriangle":"⋪","NotLeftTriangleEqual":"⋬","NotLess":"≮","NotLessEqual":"≰","NotLessGreater":"≸","NotLessLess":"≪̸","NotLessSlantEqual":"⩽̸","NotLessTilde":"≴","NotNestedGreaterGreater":"⪢̸","NotNestedLessLess":"⪡̸","notni":"∌","notniva":"∌","notnivb":"⋾","notnivc":"⋽","NotPrecedes":"⊀","NotPrecedesEqual":"⪯̸","NotPrecedesSlantEqual":"⋠","NotReverseElement":"∌","NotRightTriangleBar":"⧐̸","NotRightTriangle":"⋫","NotRightTriangleEqual":"⋭","NotSquareSubset":"⊏̸","NotSquareSubsetEqual":"⋢","NotSquareSuperset":"⊐̸","NotSquareSupersetEqual":"⋣","NotSubset":"⊂⃒","NotSubsetEqual":"⊈","NotSucceeds":"⊁","NotSucceedsEqual":"⪰̸","NotSucceedsSlantEqual":"⋡","NotSucceedsTilde":"≿̸","NotSuperset":"⊃⃒","NotSupersetEqual":"⊉","NotTilde":"≁","NotTildeEqual":"≄","NotTildeFullEqual":"≇","NotTildeTilde":"≉","NotVerticalBar":"∤","nparallel":"∦","npar":"∦","nparsl":"⫽⃥","npart":"∂̸","npolint":"⨔","npr":"⊀","nprcue":"⋠","nprec":"⊀","npreceq":"⪯̸","npre":"⪯̸","nrarrc":"⤳̸","nrarr":"↛","nrArr":"⇏","nrarrw":"↝̸","nrightarrow":"↛","nRightarrow":"⇏","nrtri":"⋫","nrtrie":"⋭","nsc":"⊁","nsccue":"⋡","nsce":"⪰̸","Nscr":"𝒩","nscr":"𝓃","nshortmid":"∤","nshortparallel":"∦","nsim":"≁","nsime":"≄","nsimeq":"≄","nsmid":"∤","nspar":"∦","nsqsube":"⋢","nsqsupe":"⋣","nsub":"⊄","nsubE":"⫅̸","nsube":"⊈","nsubset":"⊂⃒","nsubseteq":"⊈","nsubseteqq":"⫅̸","nsucc":"⊁","nsucceq":"⪰̸","nsup":"⊅","nsupE":"⫆̸","nsupe":"⊉","nsupset":"⊃⃒","nsupseteq":"⊉","nsupseteqq":"⫆̸","ntgl":"≹","Ntilde":"Ñ","ntilde":"ñ","ntlg":"≸","ntriangleleft":"⋪","ntrianglelefteq":"⋬","ntriangleright":"⋫","ntrianglerighteq":"⋭","Nu":"Ν","nu":"ν","num":"#","numero":"№","numsp":" ","nvap":"≍⃒","nvdash":"⊬","nvDash":"⊭","nVdash":"⊮","nVDash":"⊯","nvge":"≥⃒","nvgt":">⃒","nvHarr":"⤄","nvinfin":"⧞","nvlArr":"⤂","nvle":"≤⃒","nvlt":"<⃒","nvltrie":"⊴⃒","nvrArr":"⤃","nvrtrie":"⊵⃒","nvsim":"∼⃒","nwarhk":"⤣","nwarr":"↖","nwArr":"⇖","nwarrow":"↖","nwnear":"⤧","Oacute":"Ó","oacute":"ó","oast":"⊛","Ocirc":"Ô","ocirc":"ô","ocir":"⊚","Ocy":"О","ocy":"о","odash":"⊝","Odblac":"Ő","odblac":"ő","odiv":"⨸","odot":"⊙","odsold":"⦼","OElig":"Œ","oelig":"œ","ofcir":"⦿","Ofr":"𝔒","ofr":"𝔬","ogon":"˛","Ograve":"Ò","ograve":"ò","ogt":"⧁","ohbar":"⦵","ohm":"Ω","oint":"∮","olarr":"↺","olcir":"⦾","olcross":"⦻","oline":"‾","olt":"⧀","Omacr":"Ō","omacr":"ō","Omega":"Ω","omega":"ω","Omicron":"Ο","omicron":"ο","omid":"⦶","ominus":"⊖","Oopf":"𝕆","oopf":"𝕠","opar":"⦷","OpenCurlyDoubleQuote":"“","OpenCurlyQuote":"‘","operp":"⦹","oplus":"⊕","orarr":"↻","Or":"⩔","or":"∨","ord":"⩝","order":"ℴ","orderof":"ℴ","ordf":"ª","ordm":"º","origof":"⊶","oror":"⩖","orslope":"⩗","orv":"⩛","oS":"Ⓢ","Oscr":"𝒪","oscr":"ℴ","Oslash":"Ø","oslash":"ø","osol":"⊘","Otilde":"Õ","otilde":"õ","otimesas":"⨶","Otimes":"⨷","otimes":"⊗","Ouml":"Ö","ouml":"ö","ovbar":"⌽","OverBar":"‾","OverBrace":"⏞","OverBracket":"⎴","OverParenthesis":"⏜","para":"¶","parallel":"∥","par":"∥","parsim":"⫳","parsl":"⫽","part":"∂","PartialD":"∂","Pcy":"П","pcy":"п","percnt":"%","period":".","permil":"‰","perp":"⊥","pertenk":"‱","Pfr":"𝔓","pfr":"𝔭","Phi":"Φ","phi":"φ","phiv":"ϕ","phmmat":"ℳ","phone":"☎","Pi":"Π","pi":"π","pitchfork":"⋔","piv":"ϖ","planck":"ℏ","planckh":"ℎ","plankv":"ℏ","plusacir":"⨣","plusb":"⊞","pluscir":"⨢","plus":"+","plusdo":"∔","plusdu":"⨥","pluse":"⩲","PlusMinus":"±","plusmn":"±","plussim":"⨦","plustwo":"⨧","pm":"±","Poincareplane":"ℌ","pointint":"⨕","popf":"𝕡","Popf":"ℙ","pound":"£","prap":"⪷","Pr":"⪻","pr":"≺","prcue":"≼","precapprox":"⪷","prec":"≺","preccurlyeq":"≼","Precedes":"≺","PrecedesEqual":"⪯","PrecedesSlantEqual":"≼","PrecedesTilde":"≾","preceq":"⪯","precnapprox":"⪹","precneqq":"⪵","precnsim":"⋨","pre":"⪯","prE":"⪳","precsim":"≾","prime":"′","Prime":"″","primes":"ℙ","prnap":"⪹","prnE":"⪵","prnsim":"⋨","prod":"∏","Product":"∏","profalar":"⌮","profline":"⌒","profsurf":"⌓","prop":"∝","Proportional":"∝","Proportion":"∷","propto":"∝","prsim":"≾","prurel":"⊰","Pscr":"𝒫","pscr":"𝓅","Psi":"Ψ","psi":"ψ","puncsp":" ","Qfr":"𝔔","qfr":"𝔮","qint":"⨌","qopf":"𝕢","Qopf":"ℚ","qprime":"⁗","Qscr":"𝒬","qscr":"𝓆","quaternions":"ℍ","quatint":"⨖","quest":"?","questeq":"≟","quot":"\\"","QUOT":"\\"","rAarr":"⇛","race":"∽̱","Racute":"Ŕ","racute":"ŕ","radic":"√","raemptyv":"⦳","rang":"⟩","Rang":"⟫","rangd":"⦒","range":"⦥","rangle":"⟩","raquo":"»","rarrap":"⥵","rarrb":"⇥","rarrbfs":"⤠","rarrc":"⤳","rarr":"→","Rarr":"↠","rArr":"⇒","rarrfs":"⤞","rarrhk":"↪","rarrlp":"↬","rarrpl":"⥅","rarrsim":"⥴","Rarrtl":"⤖","rarrtl":"↣","rarrw":"↝","ratail":"⤚","rAtail":"⤜","ratio":"∶","rationals":"ℚ","rbarr":"⤍","rBarr":"⤏","RBarr":"⤐","rbbrk":"❳","rbrace":"}","rbrack":"]","rbrke":"⦌","rbrksld":"⦎","rbrkslu":"⦐","Rcaron":"Ř","rcaron":"ř","Rcedil":"Ŗ","rcedil":"ŗ","rceil":"⌉","rcub":"}","Rcy":"Р","rcy":"р","rdca":"⤷","rdldhar":"⥩","rdquo":"”","rdquor":"”","rdsh":"↳","real":"ℜ","realine":"ℛ","realpart":"ℜ","reals":"ℝ","Re":"ℜ","rect":"▭","reg":"®","REG":"®","ReverseElement":"∋","ReverseEquilibrium":"⇋","ReverseUpEquilibrium":"⥯","rfisht":"⥽","rfloor":"⌋","rfr":"𝔯","Rfr":"ℜ","rHar":"⥤","rhard":"⇁","rharu":"⇀","rharul":"⥬","Rho":"Ρ","rho":"ρ","rhov":"ϱ","RightAngleBracket":"⟩","RightArrowBar":"⇥","rightarrow":"→","RightArrow":"→","Rightarrow":"⇒","RightArrowLeftArrow":"⇄","rightarrowtail":"↣","RightCeiling":"⌉","RightDoubleBracket":"⟧","RightDownTeeVector":"⥝","RightDownVectorBar":"⥕","RightDownVector":"⇂","RightFloor":"⌋","rightharpoondown":"⇁","rightharpoonup":"⇀","rightleftarrows":"⇄","rightleftharpoons":"⇌","rightrightarrows":"⇉","rightsquigarrow":"↝","RightTeeArrow":"↦","RightTee":"⊢","RightTeeVector":"⥛","rightthreetimes":"⋌","RightTriangleBar":"⧐","RightTriangle":"⊳","RightTriangleEqual":"⊵","RightUpDownVector":"⥏","RightUpTeeVector":"⥜","RightUpVectorBar":"⥔","RightUpVector":"↾","RightVectorBar":"⥓","RightVector":"⇀","ring":"˚","risingdotseq":"≓","rlarr":"⇄","rlhar":"⇌","rlm":"‏","rmoustache":"⎱","rmoust":"⎱","rnmid":"⫮","roang":"⟭","roarr":"⇾","robrk":"⟧","ropar":"⦆","ropf":"𝕣","Ropf":"ℝ","roplus":"⨮","rotimes":"⨵","RoundImplies":"⥰","rpar":")","rpargt":"⦔","rppolint":"⨒","rrarr":"⇉","Rrightarrow":"⇛","rsaquo":"›","rscr":"𝓇","Rscr":"ℛ","rsh":"↱","Rsh":"↱","rsqb":"]","rsquo":"’","rsquor":"’","rthree":"⋌","rtimes":"⋊","rtri":"▹","rtrie":"⊵","rtrif":"▸","rtriltri":"⧎","RuleDelayed":"⧴","ruluhar":"⥨","rx":"℞","Sacute":"Ś","sacute":"ś","sbquo":"‚","scap":"⪸","Scaron":"Š","scaron":"š","Sc":"⪼","sc":"≻","sccue":"≽","sce":"⪰","scE":"⪴","Scedil":"Ş","scedil":"ş","Scirc":"Ŝ","scirc":"ŝ","scnap":"⪺","scnE":"⪶","scnsim":"⋩","scpolint":"⨓","scsim":"≿","Scy":"С","scy":"с","sdotb":"⊡","sdot":"⋅","sdote":"⩦","searhk":"⤥","searr":"↘","seArr":"⇘","searrow":"↘","sect":"§","semi":";","seswar":"⤩","setminus":"∖","setmn":"∖","sext":"✶","Sfr":"𝔖","sfr":"𝔰","sfrown":"⌢","sharp":"♯","SHCHcy":"Щ","shchcy":"щ","SHcy":"Ш","shcy":"ш","ShortDownArrow":"↓","ShortLeftArrow":"←","shortmid":"∣","shortparallel":"∥","ShortRightArrow":"→","ShortUpArrow":"↑","shy":"­","Sigma":"Σ","sigma":"σ","sigmaf":"ς","sigmav":"ς","sim":"∼","simdot":"⩪","sime":"≃","simeq":"≃","simg":"⪞","simgE":"⪠","siml":"⪝","simlE":"⪟","simne":"≆","simplus":"⨤","simrarr":"⥲","slarr":"←","SmallCircle":"∘","smallsetminus":"∖","smashp":"⨳","smeparsl":"⧤","smid":"∣","smile":"⌣","smt":"⪪","smte":"⪬","smtes":"⪬︀","SOFTcy":"Ь","softcy":"ь","solbar":"⌿","solb":"⧄","sol":"/","Sopf":"𝕊","sopf":"𝕤","spades":"♠","spadesuit":"♠","spar":"∥","sqcap":"⊓","sqcaps":"⊓︀","sqcup":"⊔","sqcups":"⊔︀","Sqrt":"√","sqsub":"⊏","sqsube":"⊑","sqsubset":"⊏","sqsubseteq":"⊑","sqsup":"⊐","sqsupe":"⊒","sqsupset":"⊐","sqsupseteq":"⊒","square":"□","Square":"□","SquareIntersection":"⊓","SquareSubset":"⊏","SquareSubsetEqual":"⊑","SquareSuperset":"⊐","SquareSupersetEqual":"⊒","SquareUnion":"⊔","squarf":"▪","squ":"□","squf":"▪","srarr":"→","Sscr":"𝒮","sscr":"𝓈","ssetmn":"∖","ssmile":"⌣","sstarf":"⋆","Star":"⋆","star":"☆","starf":"★","straightepsilon":"ϵ","straightphi":"ϕ","strns":"¯","sub":"⊂","Sub":"⋐","subdot":"⪽","subE":"⫅","sube":"⊆","subedot":"⫃","submult":"⫁","subnE":"⫋","subne":"⊊","subplus":"⪿","subrarr":"⥹","subset":"⊂","Subset":"⋐","subseteq":"⊆","subseteqq":"⫅","SubsetEqual":"⊆","subsetneq":"⊊","subsetneqq":"⫋","subsim":"⫇","subsub":"⫕","subsup":"⫓","succapprox":"⪸","succ":"≻","succcurlyeq":"≽","Succeeds":"≻","SucceedsEqual":"⪰","SucceedsSlantEqual":"≽","SucceedsTilde":"≿","succeq":"⪰","succnapprox":"⪺","succneqq":"⪶","succnsim":"⋩","succsim":"≿","SuchThat":"∋","sum":"∑","Sum":"∑","sung":"♪","sup1":"¹","sup2":"²","sup3":"³","sup":"⊃","Sup":"⋑","supdot":"⪾","supdsub":"⫘","supE":"⫆","supe":"⊇","supedot":"⫄","Superset":"⊃","SupersetEqual":"⊇","suphsol":"⟉","suphsub":"⫗","suplarr":"⥻","supmult":"⫂","supnE":"⫌","supne":"⊋","supplus":"⫀","supset":"⊃","Supset":"⋑","supseteq":"⊇","supseteqq":"⫆","supsetneq":"⊋","supsetneqq":"⫌","supsim":"⫈","supsub":"⫔","supsup":"⫖","swarhk":"⤦","swarr":"↙","swArr":"⇙","swarrow":"↙","swnwar":"⤪","szlig":"ß","Tab":"\\t","target":"⌖","Tau":"Τ","tau":"τ","tbrk":"⎴","Tcaron":"Ť","tcaron":"ť","Tcedil":"Ţ","tcedil":"ţ","Tcy":"Т","tcy":"т","tdot":"⃛","telrec":"⌕","Tfr":"𝔗","tfr":"𝔱","there4":"∴","therefore":"∴","Therefore":"∴","Theta":"Θ","theta":"θ","thetasym":"ϑ","thetav":"ϑ","thickapprox":"≈","thicksim":"∼","ThickSpace":"  ","ThinSpace":" ","thinsp":" ","thkap":"≈","thksim":"∼","THORN":"Þ","thorn":"þ","tilde":"˜","Tilde":"∼","TildeEqual":"≃","TildeFullEqual":"≅","TildeTilde":"≈","timesbar":"⨱","timesb":"⊠","times":"×","timesd":"⨰","tint":"∭","toea":"⤨","topbot":"⌶","topcir":"⫱","top":"⊤","Topf":"𝕋","topf":"𝕥","topfork":"⫚","tosa":"⤩","tprime":"‴","trade":"™","TRADE":"™","triangle":"▵","triangledown":"▿","triangleleft":"◃","trianglelefteq":"⊴","triangleq":"≜","triangleright":"▹","trianglerighteq":"⊵","tridot":"◬","trie":"≜","triminus":"⨺","TripleDot":"⃛","triplus":"⨹","trisb":"⧍","tritime":"⨻","trpezium":"⏢","Tscr":"𝒯","tscr":"𝓉","TScy":"Ц","tscy":"ц","TSHcy":"Ћ","tshcy":"ћ","Tstrok":"Ŧ","tstrok":"ŧ","twixt":"≬","twoheadleftarrow":"↞","twoheadrightarrow":"↠","Uacute":"Ú","uacute":"ú","uarr":"↑","Uarr":"↟","uArr":"⇑","Uarrocir":"⥉","Ubrcy":"Ў","ubrcy":"ў","Ubreve":"Ŭ","ubreve":"ŭ","Ucirc":"Û","ucirc":"û","Ucy":"У","ucy":"у","udarr":"⇅","Udblac":"Ű","udblac":"ű","udhar":"⥮","ufisht":"⥾","Ufr":"𝔘","ufr":"𝔲","Ugrave":"Ù","ugrave":"ù","uHar":"⥣","uharl":"↿","uharr":"↾","uhblk":"▀","ulcorn":"⌜","ulcorner":"⌜","ulcrop":"⌏","ultri":"◸","Umacr":"Ū","umacr":"ū","uml":"¨","UnderBar":"_","UnderBrace":"⏟","UnderBracket":"⎵","UnderParenthesis":"⏝","Union":"⋃","UnionPlus":"⊎","Uogon":"Ų","uogon":"ų","Uopf":"𝕌","uopf":"𝕦","UpArrowBar":"⤒","uparrow":"↑","UpArrow":"↑","Uparrow":"⇑","UpArrowDownArrow":"⇅","updownarrow":"↕","UpDownArrow":"↕","Updownarrow":"⇕","UpEquilibrium":"⥮","upharpoonleft":"↿","upharpoonright":"↾","uplus":"⊎","UpperLeftArrow":"↖","UpperRightArrow":"↗","upsi":"υ","Upsi":"ϒ","upsih":"ϒ","Upsilon":"Υ","upsilon":"υ","UpTeeArrow":"↥","UpTee":"⊥","upuparrows":"⇈","urcorn":"⌝","urcorner":"⌝","urcrop":"⌎","Uring":"Ů","uring":"ů","urtri":"◹","Uscr":"𝒰","uscr":"𝓊","utdot":"⋰","Utilde":"Ũ","utilde":"ũ","utri":"▵","utrif":"▴","uuarr":"⇈","Uuml":"Ü","uuml":"ü","uwangle":"⦧","vangrt":"⦜","varepsilon":"ϵ","varkappa":"ϰ","varnothing":"∅","varphi":"ϕ","varpi":"ϖ","varpropto":"∝","varr":"↕","vArr":"⇕","varrho":"ϱ","varsigma":"ς","varsubsetneq":"⊊︀","varsubsetneqq":"⫋︀","varsupsetneq":"⊋︀","varsupsetneqq":"⫌︀","vartheta":"ϑ","vartriangleleft":"⊲","vartriangleright":"⊳","vBar":"⫨","Vbar":"⫫","vBarv":"⫩","Vcy":"В","vcy":"в","vdash":"⊢","vDash":"⊨","Vdash":"⊩","VDash":"⊫","Vdashl":"⫦","veebar":"⊻","vee":"∨","Vee":"⋁","veeeq":"≚","vellip":"⋮","verbar":"|","Verbar":"‖","vert":"|","Vert":"‖","VerticalBar":"∣","VerticalLine":"|","VerticalSeparator":"❘","VerticalTilde":"≀","VeryThinSpace":" ","Vfr":"𝔙","vfr":"𝔳","vltri":"⊲","vnsub":"⊂⃒","vnsup":"⊃⃒","Vopf":"𝕍","vopf":"𝕧","vprop":"∝","vrtri":"⊳","Vscr":"𝒱","vscr":"𝓋","vsubnE":"⫋︀","vsubne":"⊊︀","vsupnE":"⫌︀","vsupne":"⊋︀","Vvdash":"⊪","vzigzag":"⦚","Wcirc":"Ŵ","wcirc":"ŵ","wedbar":"⩟","wedge":"∧","Wedge":"⋀","wedgeq":"≙","weierp":"℘","Wfr":"𝔚","wfr":"𝔴","Wopf":"𝕎","wopf":"𝕨","wp":"℘","wr":"≀","wreath":"≀","Wscr":"𝒲","wscr":"𝓌","xcap":"⋂","xcirc":"◯","xcup":"⋃","xdtri":"▽","Xfr":"𝔛","xfr":"𝔵","xharr":"⟷","xhArr":"⟺","Xi":"Ξ","xi":"ξ","xlarr":"⟵","xlArr":"⟸","xmap":"⟼","xnis":"⋻","xodot":"⨀","Xopf":"𝕏","xopf":"𝕩","xoplus":"⨁","xotime":"⨂","xrarr":"⟶","xrArr":"⟹","Xscr":"𝒳","xscr":"𝓍","xsqcup":"⨆","xuplus":"⨄","xutri":"△","xvee":"⋁","xwedge":"⋀","Yacute":"Ý","yacute":"ý","YAcy":"Я","yacy":"я","Ycirc":"Ŷ","ycirc":"ŷ","Ycy":"Ы","ycy":"ы","yen":"¥","Yfr":"𝔜","yfr":"𝔶","YIcy":"Ї","yicy":"ї","Yopf":"𝕐","yopf":"𝕪","Yscr":"𝒴","yscr":"𝓎","YUcy":"Ю","yucy":"ю","yuml":"ÿ","Yuml":"Ÿ","Zacute":"Ź","zacute":"ź","Zcaron":"Ž","zcaron":"ž","Zcy":"З","zcy":"з","Zdot":"Ż","zdot":"ż","zeetrf":"ℨ","ZeroWidthSpace":"​","Zeta":"Ζ","zeta":"ζ","zfr":"𝔷","Zfr":"ℨ","ZHcy":"Ж","zhcy":"ж","zigrarr":"⇝","zopf":"𝕫","Zopf":"ℤ","Zscr":"𝒵","zscr":"𝓏","zwj":"‍","zwnj":"‌"}')},function(e){e.exports=JSON.parse('{"amp":"&","apos":"\'","gt":">","lt":"<","quot":"\\""}')},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.escapeUTF8=t.escape=t.encodeNonAsciiHTML=t.encodeHTML=t.encodeXML=void 0;var a=u(n(r(554)).default),i=d(a);t.encodeXML=g(a);var o,s,c=u(n(r(553)).default),l=d(c);function u(e){return Object.keys(e).sort().reduce((function(t,r){return t[e[r]]="&"+r+";",t}),{})}function d(e){for(var t=[],r=[],n=0,a=Object.keys(e);n<a.length;n++){var i=a[n];1===i.length?t.push("\\"+i):r.push(i)}t.sort();for(var o=0;o<t.length-1;o++){for(var s=o;s<t.length-1&&t[s].charCodeAt(1)+1===t[s+1].charCodeAt(1);)s+=1;var c=1+s-o;c<3||t.splice(o,c,t[o]+"-"+t[s])}return r.unshift("["+t.join("")+"]"),new RegExp(r.join("|"),"g")}t.encodeHTML=(o=c,s=l,function(e){return e.replace(s,(function(e){return o[e]})).replace(h,f)}),t.encodeNonAsciiHTML=g(c);var h=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,p=null!=String.prototype.codePointAt?function(e){return e.codePointAt(0)}:function(e){return 1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536};function f(e){return"&#x"+(e.length>1?p(e):e.charCodeAt(0)).toString(16).toUpperCase()+";"}var m=new RegExp(i.source+"|"+h.source,"g");function g(e){return function(t){return t.replace(m,(function(t){return e[t]||f(t)}))}}t.escape=function(e){return e.replace(m,f)},t.escapeUTF8=function(e){return e.replace(i,f)}},function(e,t,r){e.exports=s;var n=r(547),a=r(1208).Writable,i=r(78).StringDecoder,o=r(4).Buffer;function s(e,t){var r=this._parser=new n(e,t),o=this._decoder=new i;a.call(this,{decodeStrings:!1}),this.once("finish",(function(){r.end(o.end())}))}r(1)(s,a),s.prototype._write=function(e,t,r){e instanceof o&&(e=this._decoder.write(e)),this._parser.write(e),r()}},function(e,t){var r={};function n(e,t){this.count=e,this.dataCodewords=t,this.__defineGetter__("Count",(function(){return this.count})),this.__defineGetter__("DataCodewords",(function(){return this.dataCodewords}))}function a(e,t,r){this.ecCodewordsPerBlock=e,this.ecBlocks=r?new Array(t,r):new Array(t),this.__defineGetter__("ECCodewordsPerBlock",(function(){return this.ecCodewordsPerBlock})),this.__defineGetter__("TotalECCodewords",(function(){return this.ecCodewordsPerBlock*this.NumBlocks})),this.__defineGetter__("NumBlocks",(function(){for(var e=0,t=0;t<this.ecBlocks.length;t++)e+=this.ecBlocks[t].length;return e})),this.getECBlocks=function(){return this.ecBlocks}}function i(e,t,r,n,a,i){this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=new Array(r,n,a,i);for(var o=0,s=r.ECCodewordsPerBlock,c=r.getECBlocks(),l=0;l<c.length;l++){var u=c[l];o+=u.Count*(u.DataCodewords+s)}this.totalCodewords=o,this.__defineGetter__("VersionNumber",(function(){return this.versionNumber})),this.__defineGetter__("AlignmentPatternCenters",(function(){return this.alignmentPatternCenters})),this.__defineGetter__("TotalCodewords",(function(){return this.totalCodewords})),this.__defineGetter__("DimensionForVersion",(function(){return 17+4*this.versionNumber})),this.buildFunctionPattern=function(){var e=this.DimensionForVersion,t=new v(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,n=0;n<r;n++)for(var a=this.alignmentPatternCenters[n]-2,i=0;i<r;i++)0==n&&(0==i||i==r-1)||n==r-1&&0==i||t.setRegion(this.alignmentPatternCenters[i]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},this.getECBlocksForLevel=function(e){return this.ecBlocks[e.ordinal()]}}function o(e,t,r,n,a,i,s,c,l){this.a11=e,this.a12=n,this.a13=s,this.a21=t,this.a22=a,this.a23=c,this.a31=r,this.a32=i,this.a33=l,this.transformPoints1=function(e){for(var t=e.length,r=this.a11,n=this.a12,a=this.a13,i=this.a21,o=this.a22,s=this.a23,c=this.a31,l=this.a32,u=this.a33,d=0;d<t;d+=2){var h=e[d],p=e[d+1],f=a*h+s*p+u;e[d]=(r*h+i*p+c)/f,e[d+1]=(n*h+o*p+l)/f}},this.transformPoints2=function(e,t){for(var r=e.length,n=0;n<r;n++){var a=e[n],i=t[n],o=this.a13*a+this.a23*i+this.a33;e[n]=(this.a11*a+this.a21*i+this.a31)/o,t[n]=(this.a12*a+this.a22*i+this.a32)/o}},this.buildAdjoint=function(){return new o(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},this.times=function(e){return new o(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}function s(e,t){this.bits=e,this.points=t}function c(e){this.image=e,this.resultPointCallback=null,this.sizeOfBlackWhiteBlackRun=function(e,t,r,n){var a=Math.abs(n-t)>Math.abs(r-e);if(a){var i=e;e=t,t=i,i=r,r=n,n=i}for(var o=Math.abs(r-e),s=Math.abs(n-t),c=-o>>1,l=t<n?1:-1,u=e<r?1:-1,d=0,h=e,p=t;h!=r;h+=u){var f=a?p:h,m=a?h:p;if(1==d?this.image[f+m*E.width]&&d++:this.image[f+m*E.width]||d++,3==d){var g=h-e,y=p-t;return Math.sqrt(g*g+y*y)}if((c+=s)>0){if(p==n)break;p+=l,c-=o}}var v=r-e,b=n-t;return Math.sqrt(v*v+b*b)},this.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,n){var a=this.sizeOfBlackWhiteBlackRun(e,t,r,n),i=1,o=e-(r-e);o<0?(i=e/(e-o),o=0):o>=E.width&&(i=(E.width-1-e)/(o-e),o=E.width-1);var s=Math.floor(t-(n-t)*i);return i=1,s<0?(i=t/(t-s),s=0):s>=E.height&&(i=(E.height-1-t)/(s-t),s=E.height-1),o=Math.floor(e+(o-e)*i),(a+=this.sizeOfBlackWhiteBlackRun(e,t,o,s))-1},this.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.X),Math.floor(e.Y),Math.floor(t.X),Math.floor(t.Y)),n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.X),Math.floor(t.Y),Math.floor(e.X),Math.floor(e.Y));return isNaN(r)?n/7:isNaN(n)?r/7:(r+n)/14},this.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},this.distance=function(e,t){var r=e.X-t.X,n=e.Y-t.Y;return Math.sqrt(r*r+n*n)},this.computeDimension=function(e,t,r,n){var a=7+(Math.round(this.distance(e,t)/n)+Math.round(this.distance(e,r)/n)>>1);switch(3&a){case 0:a++;break;case 2:a--;break;case 3:throw"Error"}return a},this.findAlignmentInRegion=function(e,t,r,n){var a=Math.floor(n*e),i=Math.max(0,t-a),o=Math.min(E.width-1,t+a);if(o-i<3*e)throw"Error";var s=Math.max(0,r-a),c=Math.min(E.height-1,r+a);return new O(this.image,i,s,o-i,c-s,e,this.resultPointCallback).find()},this.createTransform=function(e,t,r,n,a){var i,s,c,l,u=a-3.5;return null!=n?(i=n.X,s=n.Y,c=l=u-3):(i=t.X-e.X+r.X,s=t.Y-e.Y+r.Y,c=l=u),o.quadrilateralToQuadrilateral(3.5,3.5,u,3.5,c,l,3.5,u,e.X,e.Y,t.X,t.Y,i,s,r.X,r.Y)},this.sampleGrid=function(e,t,n){return r.sampleGrid3(e,n,t)},this.processFinderPatternInfo=function(e){var t=e.TopLeft,r=e.TopRight,n=e.BottomLeft,a=this.calculateModuleSize(t,r,n);if(a<1)throw"Error";var o=this.computeDimension(t,r,n,a),c=i.getProvisionalVersionForDimension(o),l=c.DimensionForVersion-7,u=null;if(c.AlignmentPatternCenters.length>0)for(var d=r.X-t.X+n.X,h=r.Y-t.Y+n.Y,p=1-3/l,f=Math.floor(t.X+p*(d-t.X)),m=Math.floor(t.Y+p*(h-t.Y)),g=4;g<=16;g<<=1){u=this.findAlignmentInRegion(a,f,m,g);break}var y=this.createTransform(t,r,n,u,o);return new s(this.sampleGrid(this.image,y,o),null==u?new Array(n,t,r):new Array(n,t,r,u))},this.detect=function(){var e=(new D).findFinderPattern(this.image);return this.processFinderPatternInfo(e)}}r.checkAndNudgePoints=function(e,t){for(var r=E.width,n=E.height,a=!0,i=0;i<t.length&&a;i+=2){var o=Math.floor(t[i]),s=Math.floor(t[i+1]);if(o<-1||o>r||s<-1||s>n)throw"Error.checkAndNudgePoints ";a=!1,-1==o?(t[i]=0,a=!0):o==r&&(t[i]=r-1,a=!0),-1==s?(t[i+1]=0,a=!0):s==n&&(t[i+1]=n-1,a=!0)}a=!0;for(i=t.length-2;i>=0&&a;i-=2){o=Math.floor(t[i]),s=Math.floor(t[i+1]);if(o<-1||o>r||s<-1||s>n)throw"Error.checkAndNudgePoints ";a=!1,-1==o?(t[i]=0,a=!0):o==r&&(t[i]=r-1,a=!0),-1==s?(t[i+1]=0,a=!0):s==n&&(t[i+1]=n-1,a=!0)}},r.sampleGrid3=function(e,t,n){for(var a=new v(t),i=new Array(t<<1),o=0;o<t;o++){for(var s=i.length,c=o+.5,l=0;l<s;l+=2)i[l]=.5+(l>>1),i[l+1]=c;n.transformPoints1(i),r.checkAndNudgePoints(e,i);try{for(l=0;l<s;l+=2){e[Math.floor(i[l])+E.width*Math.floor(i[l+1])]&&a.set_Renamed(l>>1,o)}}catch(e){throw"Error.checkAndNudgePoints"}}return a},r.sampleGridx=function(e,t,n,a,i,s,c,l,u,d,h,p,f,m,g,y,v,b){var _=o.quadrilateralToQuadrilateral(n,a,i,s,c,l,u,d,h,p,f,m,g,y,v,b);return r.sampleGrid3(e,t,_)},i.VERSION_DECODE_INFO=new Array(31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017),i.VERSIONS=new Array(new i(1,new Array,new a(7,new n(1,19)),new a(10,new n(1,16)),new a(13,new n(1,13)),new a(17,new n(1,9))),new i(2,new Array(6,18),new a(10,new n(1,34)),new a(16,new n(1,28)),new a(22,new n(1,22)),new a(28,new n(1,16))),new i(3,new Array(6,22),new a(15,new n(1,55)),new a(26,new n(1,44)),new a(18,new n(2,17)),new a(22,new n(2,13))),new i(4,new Array(6,26),new a(20,new n(1,80)),new a(18,new n(2,32)),new a(26,new n(2,24)),new a(16,new n(4,9))),new i(5,new Array(6,30),new a(26,new n(1,108)),new a(24,new n(2,43)),new a(18,new n(2,15),new n(2,16)),new a(22,new n(2,11),new n(2,12))),new i(6,new Array(6,34),new a(18,new n(2,68)),new a(16,new n(4,27)),new a(24,new n(4,19)),new a(28,new n(4,15))),new i(7,new Array(6,22,38),new a(20,new n(2,78)),new a(18,new n(4,31)),new a(18,new n(2,14),new n(4,15)),new a(26,new n(4,13),new n(1,14))),new i(8,new Array(6,24,42),new a(24,new n(2,97)),new a(22,new n(2,38),new n(2,39)),new a(22,new n(4,18),new n(2,19)),new a(26,new n(4,14),new n(2,15))),new i(9,new Array(6,26,46),new a(30,new n(2,116)),new a(22,new n(3,36),new n(2,37)),new a(20,new n(4,16),new n(4,17)),new a(24,new n(4,12),new n(4,13))),new i(10,new Array(6,28,50),new a(18,new n(2,68),new n(2,69)),new a(26,new n(4,43),new n(1,44)),new a(24,new n(6,19),new n(2,20)),new a(28,new n(6,15),new n(2,16))),new i(11,new Array(6,30,54),new a(20,new n(4,81)),new a(30,new n(1,50),new n(4,51)),new a(28,new n(4,22),new n(4,23)),new a(24,new n(3,12),new n(8,13))),new i(12,new Array(6,32,58),new a(24,new n(2,92),new n(2,93)),new a(22,new n(6,36),new n(2,37)),new a(26,new n(4,20),new n(6,21)),new a(28,new n(7,14),new n(4,15))),new i(13,new Array(6,34,62),new a(26,new n(4,107)),new a(22,new n(8,37),new n(1,38)),new a(24,new n(8,20),new n(4,21)),new a(22,new n(12,11),new n(4,12))),new i(14,new Array(6,26,46,66),new a(30,new n(3,115),new n(1,116)),new a(24,new n(4,40),new n(5,41)),new a(20,new n(11,16),new n(5,17)),new a(24,new n(11,12),new n(5,13))),new i(15,new Array(6,26,48,70),new a(22,new n(5,87),new n(1,88)),new a(24,new n(5,41),new n(5,42)),new a(30,new n(5,24),new n(7,25)),new a(24,new n(11,12),new n(7,13))),new i(16,new Array(6,26,50,74),new a(24,new n(5,98),new n(1,99)),new a(28,new n(7,45),new n(3,46)),new a(24,new n(15,19),new n(2,20)),new a(30,new n(3,15),new n(13,16))),new i(17,new Array(6,30,54,78),new a(28,new n(1,107),new n(5,108)),new a(28,new n(10,46),new n(1,47)),new a(28,new n(1,22),new n(15,23)),new a(28,new n(2,14),new n(17,15))),new i(18,new Array(6,30,56,82),new a(30,new n(5,120),new n(1,121)),new a(26,new n(9,43),new n(4,44)),new a(28,new n(17,22),new n(1,23)),new a(28,new n(2,14),new n(19,15))),new i(19,new Array(6,30,58,86),new a(28,new n(3,113),new n(4,114)),new a(26,new n(3,44),new n(11,45)),new a(26,new n(17,21),new n(4,22)),new a(26,new n(9,13),new n(16,14))),new i(20,new Array(6,34,62,90),new a(28,new n(3,107),new n(5,108)),new a(26,new n(3,41),new n(13,42)),new a(30,new n(15,24),new n(5,25)),new a(28,new n(15,15),new n(10,16))),new i(21,new Array(6,28,50,72,94),new a(28,new n(4,116),new n(4,117)),new a(26,new n(17,42)),new a(28,new n(17,22),new n(6,23)),new a(30,new n(19,16),new n(6,17))),new i(22,new Array(6,26,50,74,98),new a(28,new n(2,111),new n(7,112)),new a(28,new n(17,46)),new a(30,new n(7,24),new n(16,25)),new a(24,new n(34,13))),new i(23,new Array(6,30,54,74,102),new a(30,new n(4,121),new n(5,122)),new a(28,new n(4,47),new n(14,48)),new a(30,new n(11,24),new n(14,25)),new a(30,new n(16,15),new n(14,16))),new i(24,new Array(6,28,54,80,106),new a(30,new n(6,117),new n(4,118)),new a(28,new n(6,45),new n(14,46)),new a(30,new n(11,24),new n(16,25)),new a(30,new n(30,16),new n(2,17))),new i(25,new Array(6,32,58,84,110),new a(26,new n(8,106),new n(4,107)),new a(28,new n(8,47),new n(13,48)),new a(30,new n(7,24),new n(22,25)),new a(30,new n(22,15),new n(13,16))),new i(26,new Array(6,30,58,86,114),new a(28,new n(10,114),new n(2,115)),new a(28,new n(19,46),new n(4,47)),new a(28,new n(28,22),new n(6,23)),new a(30,new n(33,16),new n(4,17))),new i(27,new Array(6,34,62,90,118),new a(30,new n(8,122),new n(4,123)),new a(28,new n(22,45),new n(3,46)),new a(30,new n(8,23),new n(26,24)),new a(30,new n(12,15),new n(28,16))),new i(28,new Array(6,26,50,74,98,122),new a(30,new n(3,117),new n(10,118)),new a(28,new n(3,45),new n(23,46)),new a(30,new n(4,24),new n(31,25)),new a(30,new n(11,15),new n(31,16))),new i(29,new Array(6,30,54,78,102,126),new a(30,new n(7,116),new n(7,117)),new a(28,new n(21,45),new n(7,46)),new a(30,new n(1,23),new n(37,24)),new a(30,new n(19,15),new n(26,16))),new i(30,new Array(6,26,52,78,104,130),new a(30,new n(5,115),new n(10,116)),new a(28,new n(19,47),new n(10,48)),new a(30,new n(15,24),new n(25,25)),new a(30,new n(23,15),new n(25,16))),new i(31,new Array(6,30,56,82,108,134),new a(30,new n(13,115),new n(3,116)),new a(28,new n(2,46),new n(29,47)),new a(30,new n(42,24),new n(1,25)),new a(30,new n(23,15),new n(28,16))),new i(32,new Array(6,34,60,86,112,138),new a(30,new n(17,115)),new a(28,new n(10,46),new n(23,47)),new a(30,new n(10,24),new n(35,25)),new a(30,new n(19,15),new n(35,16))),new i(33,new Array(6,30,58,86,114,142),new a(30,new n(17,115),new n(1,116)),new a(28,new n(14,46),new n(21,47)),new a(30,new n(29,24),new n(19,25)),new a(30,new n(11,15),new n(46,16))),new i(34,new Array(6,34,62,90,118,146),new a(30,new n(13,115),new n(6,116)),new a(28,new n(14,46),new n(23,47)),new a(30,new n(44,24),new n(7,25)),new a(30,new n(59,16),new n(1,17))),new i(35,new Array(6,30,54,78,102,126,150),new a(30,new n(12,121),new n(7,122)),new a(28,new n(12,47),new n(26,48)),new a(30,new n(39,24),new n(14,25)),new a(30,new n(22,15),new n(41,16))),new i(36,new Array(6,24,50,76,102,128,154),new a(30,new n(6,121),new n(14,122)),new a(28,new n(6,47),new n(34,48)),new a(30,new n(46,24),new n(10,25)),new a(30,new n(2,15),new n(64,16))),new i(37,new Array(6,28,54,80,106,132,158),new a(30,new n(17,122),new n(4,123)),new a(28,new n(29,46),new n(14,47)),new a(30,new n(49,24),new n(10,25)),new a(30,new n(24,15),new n(46,16))),new i(38,new Array(6,32,58,84,110,136,162),new a(30,new n(4,122),new n(18,123)),new a(28,new n(13,46),new n(32,47)),new a(30,new n(48,24),new n(14,25)),new a(30,new n(42,15),new n(32,16))),new i(39,new Array(6,26,54,82,110,138,166),new a(30,new n(20,117),new n(4,118)),new a(28,new n(40,47),new n(7,48)),new a(30,new n(43,24),new n(22,25)),new a(30,new n(10,15),new n(67,16))),new i(40,new Array(6,30,58,86,114,142,170),new a(30,new n(19,118),new n(6,119)),new a(28,new n(18,47),new n(31,48)),new a(30,new n(34,24),new n(34,25)),new a(30,new n(20,15),new n(61,16)))),i.getVersionForNumber=function(e){if(e<1||e>40)throw"ArgumentException";return i.VERSIONS[e-1]},i.getProvisionalVersionForDimension=function(e){if(e%4!=1)throw"Error getProvisionalVersionForDimension";try{return i.getVersionForNumber(e-17>>2)}catch(e){throw"Error getVersionForNumber"}},i.decodeVersionInformation=function(e){for(var t=4294967295,r=0,n=0;n<i.VERSION_DECODE_INFO.length;n++){var a=i.VERSION_DECODE_INFO[n];if(a==e)return this.getVersionForNumber(n+7);var o=d.numBitsDiffering(e,a);o<t&&(r=n+7,t=o)}return t<=3?this.getVersionForNumber(r):null},o.quadrilateralToQuadrilateral=function(e,t,r,n,a,i,o,s,c,l,u,d,h,p,f,m){var g=this.quadrilateralToSquare(e,t,r,n,a,i,o,s);return this.squareToQuadrilateral(c,l,u,d,h,p,f,m).times(g)},o.squareToQuadrilateral=function(e,t,r,n,a,i,s,c){var l=c-i,u=t-n+i-c;if(0==l&&0==u)return new o(r-e,a-r,e,n-t,i-n,t,0,0,1);var d=r-a,h=s-a,p=e-r+a-s,f=n-i,m=d*l-h*f,g=(p*l-h*u)/m,y=(d*u-p*f)/m;return new o(r-e+g*r,s-e+y*s,e,n-t+g*n,c-t+y*c,t,g,y,1)},o.quadrilateralToSquare=function(e,t,r,n,a,i,o,s){return this.squareToQuadrilateral(e,t,r,n,a,i,o,s).buildAdjoint()};var l=new Array(new Array(21522,0),new Array(20773,1),new Array(24188,2),new Array(23371,3),new Array(17913,4),new Array(16590,5),new Array(20375,6),new Array(19104,7),new Array(30660,8),new Array(29427,9),new Array(32170,10),new Array(30877,11),new Array(26159,12),new Array(25368,13),new Array(27713,14),new Array(26998,15),new Array(5769,16),new Array(5054,17),new Array(7399,18),new Array(6608,19),new Array(1890,20),new Array(597,21),new Array(3340,22),new Array(2107,23),new Array(13663,24),new Array(12392,25),new Array(16177,26),new Array(14854,27),new Array(9396,28),new Array(8579,29),new Array(11994,30),new Array(11245,31)),u=new Array(0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4);function d(e){this.errorCorrectionLevel=h.forBits(e>>3&3),this.dataMask=7&e,this.__defineGetter__("ErrorCorrectionLevel",(function(){return this.errorCorrectionLevel})),this.__defineGetter__("DataMask",(function(){return this.dataMask})),this.GetHashCode=function(){return this.errorCorrectionLevel.ordinal()<<3|this.dataMask},this.Equals=function(e){var t=e;return this.errorCorrectionLevel==t.errorCorrectionLevel&&this.dataMask==t.dataMask}}function h(e,t,r){this.ordinal_Renamed_Field=e,this.bits=t,this.name=r,this.__defineGetter__("Bits",(function(){return this.bits})),this.__defineGetter__("Name",(function(){return this.name})),this.ordinal=function(){return this.ordinal_Renamed_Field}}d.numBitsDiffering=function(e,t){return u[15&(e^=t)]+u[15&A(e,4)]+u[15&A(e,8)]+u[15&A(e,12)]+u[15&A(e,16)]+u[15&A(e,20)]+u[15&A(e,24)]+u[15&A(e,28)]},d.decodeFormatInformation=function(e){var t=d.doDecodeFormatInformation(e);return null!=t?t:d.doDecodeFormatInformation(21522^e)},d.doDecodeFormatInformation=function(e){for(var t=4294967295,r=0,n=0;n<l.length;n++){var a=l[n],i=a[0];if(i==e)return new d(a[1]);var o=this.numBitsDiffering(e,i);o<t&&(r=a[1],t=o)}return t<=3?new d(r):null},h.forBits=function(e){if(e<0||e>=y.length)throw"ArgumentException";return y[e]};var p=new h(0,1,"L"),f=new h(1,0,"M"),m=new h(2,3,"Q"),g=new h(3,2,"H"),y=new Array(f,p,g,m);function v(e,t){if(t||(t=e),e<1||t<1)throw"Both dimensions must be greater than 0";this.width=e,this.height=t;var r=e>>5;0!=(31&e)&&r++,this.rowSize=r,this.bits=new Array(r*t);for(var n=0;n<this.bits.length;n++)this.bits[n]=0;this.__defineGetter__("Width",(function(){return this.width})),this.__defineGetter__("Height",(function(){return this.height})),this.__defineGetter__("Dimension",(function(){if(this.width!=this.height)throw"Can't call getDimension() on a non-square matrix";return this.width})),this.get_Renamed=function(e,t){var r=t*this.rowSize+(e>>5);return 0!=(1&A(this.bits[r],31&e))},this.set_Renamed=function(e,t){var r=t*this.rowSize+(e>>5);this.bits[r]|=1<<(31&e)},this.flip=function(e,t){var r=t*this.rowSize+(e>>5);this.bits[r]^=1<<(31&e)},this.clear=function(){for(var e=this.bits.length,t=0;t<e;t++)this.bits[t]=0},this.setRegion=function(e,t,r,n){if(t<0||e<0)throw"Left and top must be nonnegative";if(n<1||r<1)throw"Height and width must be at least 1";var a=e+r,i=t+n;if(i>this.height||a>this.width)throw"The region must fit inside the matrix";for(var o=t;o<i;o++)for(var s=o*this.rowSize,c=e;c<a;c++)this.bits[s+(c>>5)]|=1<<(31&c)}}function b(e,t){this.numDataCodewords=e,this.codewords=t,this.__defineGetter__("NumDataCodewords",(function(){return this.numDataCodewords})),this.__defineGetter__("Codewords",(function(){return this.codewords}))}function _(e){var t=e.Dimension;if(t<21||1!=(3&t))throw"Error BitMatrixParser";this.bitMatrix=e,this.parsedVersion=null,this.parsedFormatInfo=null,this.copyBit=function(e,t,r){return this.bitMatrix.get_Renamed(e,t)?r<<1|1:r<<1},this.readFormatInformation=function(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);if(this.parsedFormatInfo=d.decodeFormatInformation(e),null!=this.parsedFormatInfo)return this.parsedFormatInfo;var n=this.bitMatrix.Dimension;e=0;var a=n-8;for(t=n-1;t>=a;t--)e=this.copyBit(t,8,e);for(r=n-7;r<n;r++)e=this.copyBit(8,r,e);if(this.parsedFormatInfo=d.decodeFormatInformation(e),null!=this.parsedFormatInfo)return this.parsedFormatInfo;throw"Error readFormatInformation"},this.readVersion=function(){if(null!=this.parsedVersion)return this.parsedVersion;var e=this.bitMatrix.Dimension,t=e-17>>2;if(t<=6)return i.getVersionForNumber(t);for(var r=0,n=e-11,a=5;a>=0;a--)for(var o=e-9;o>=n;o--)r=this.copyBit(o,a,r);if(this.parsedVersion=i.decodeVersionInformation(r),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==e)return this.parsedVersion;r=0;for(o=5;o>=0;o--)for(a=e-9;a>=n;a--)r=this.copyBit(o,a,r);if(this.parsedVersion=i.decodeVersionInformation(r),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==e)return this.parsedVersion;throw"Error readVersion"},this.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=w.forReference(e.DataMask),n=this.bitMatrix.Dimension;r.unmaskBitMatrix(this.bitMatrix,n);for(var a=t.buildFunctionPattern(),i=!0,o=new Array(t.TotalCodewords),s=0,c=0,l=0,u=n-1;u>0;u-=2){6==u&&u--;for(var d=0;d<n;d++)for(var h=i?n-1-d:d,p=0;p<2;p++)a.get_Renamed(u-p,h)||(l++,c<<=1,this.bitMatrix.get_Renamed(u-p,h)&&(c|=1),8==l&&(o[s++]=c,l=0,c=0));i^=!0}if(s!=t.TotalCodewords)throw"Error readCodewords";return o}}b.getDataBlocks=function(e,t,r){if(e.length!=t.TotalCodewords)throw"ArgumentException";for(var n=t.getECBlocksForLevel(r),a=0,i=n.getECBlocks(),o=0;o<i.length;o++)a+=i[o].Count;for(var s=new Array(a),c=0,l=0;l<i.length;l++){var u=i[l];for(o=0;o<u.Count;o++){var d=u.DataCodewords,h=n.ECCodewordsPerBlock+d;s[c++]=new b(d,new Array(h))}}for(var p=s[0].codewords.length,f=s.length-1;f>=0;){if(s[f].codewords.length==p)break;f--}f++;var m=p-n.ECCodewordsPerBlock,g=0;for(o=0;o<m;o++)for(l=0;l<c;l++)s[l].codewords[o]=e[g++];for(l=f;l<c;l++)s[l].codewords[m]=e[g++];var y=s[0].codewords.length;for(o=m;o<y;o++)for(l=0;l<c;l++){var v=l<f?o:o+1;s[l].codewords[v]=e[g++]}return s};var w={};function x(e,t){if(null==t||0==t.length)throw"System.ArgumentException";this.field=e;var r=t.length;if(r>1&&0==t[0]){for(var n=1;n<r&&0==t[n];)n++;if(n==r)this.coefficients=e.Zero.coefficients;else{this.coefficients=new Array(r-n);for(var a=0;a<this.coefficients.length;a++)this.coefficients[a]=0;for(var i=0;i<this.coefficients.length;i++)this.coefficients[i]=t[n+i]}}else this.coefficients=t;this.__defineGetter__("Zero",(function(){return 0==this.coefficients[0]})),this.__defineGetter__("Degree",(function(){return this.coefficients.length-1})),this.__defineGetter__("Coefficients",(function(){return this.coefficients})),this.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},this.evaluateAt=function(e){if(0==e)return this.getCoefficient(0);var t=this.coefficients.length;if(1==e){for(var r=0,n=0;n<t;n++)r=k.addOrSubtract(r,this.coefficients[n]);return r}var a=this.coefficients[0];for(n=1;n<t;n++)a=k.addOrSubtract(this.field.multiply(e,a),this.coefficients[n]);return a},this.addOrSubtract=function(t){if(this.field!=t.field)throw"GF256Polys do not have same GF256 field";if(this.Zero)return t;if(t.Zero)return this;var r=this.coefficients,n=t.coefficients;if(r.length>n.length){var a=r;r=n,n=a}for(var i=new Array(n.length),o=n.length-r.length,s=0;s<o;s++)i[s]=n[s];for(var c=o;c<n.length;c++)i[c]=k.addOrSubtract(r[c-o],n[c]);return new x(e,i)},this.multiply1=function(e){if(this.field!=e.field)throw"GF256Polys do not have same GF256 field";if(this.Zero||e.Zero)return this.field.Zero;for(var t=this.coefficients,r=t.length,n=e.coefficients,a=n.length,i=new Array(r+a-1),o=0;o<r;o++)for(var s=t[o],c=0;c<a;c++)i[o+c]=k.addOrSubtract(i[o+c],this.field.multiply(s,n[c]));return new x(this.field,i)},this.multiply2=function(e){if(0==e)return this.field.Zero;if(1==e)return this;for(var t=this.coefficients.length,r=new Array(t),n=0;n<t;n++)r[n]=this.field.multiply(this.coefficients[n],e);return new x(this.field,r)},this.multiplyByMonomial=function(e,t){if(e<0)throw"System.ArgumentException";if(0==t)return this.field.Zero;for(var r=this.coefficients.length,n=new Array(r+e),a=0;a<n.length;a++)n[a]=0;for(a=0;a<r;a++)n[a]=this.field.multiply(this.coefficients[a],t);return new x(this.field,n)},this.divide=function(e){if(this.field!=e.field)throw"GF256Polys do not have same GF256 field";if(e.Zero)throw"Divide by 0";for(var t=this.field.Zero,r=this,n=e.getCoefficient(e.Degree),a=this.field.inverse(n);r.Degree>=e.Degree&&!r.Zero;){var i=r.Degree-e.Degree,o=this.field.multiply(r.getCoefficient(r.Degree),a),s=e.multiplyByMonomial(i,o),c=this.field.buildMonomial(i,o);t=t.addOrSubtract(c),r=r.addOrSubtract(s)}return new Array(t,r)}}function k(e){this.expTable=new Array(256),this.logTable=new Array(256);for(var t=1,r=0;r<256;r++)this.expTable[r]=t,(t<<=1)>=256&&(t^=e);for(r=0;r<255;r++)this.logTable[this.expTable[r]]=r;var n=new Array(1);n[0]=0,this.zero=new x(this,new Array(n));var a=new Array(1);a[0]=1,this.one=new x(this,new Array(a)),this.__defineGetter__("Zero",(function(){return this.zero})),this.__defineGetter__("One",(function(){return this.one})),this.buildMonomial=function(e,t){if(e<0)throw"System.ArgumentException";if(0==t)return this.zero;for(var r=new Array(e+1),n=0;n<r.length;n++)r[n]=0;return r[0]=t,new x(this,r)},this.exp=function(e){return this.expTable[e]},this.log=function(e){if(0==e)throw"System.ArgumentException";return this.logTable[e]},this.inverse=function(e){if(0==e)throw"System.ArithmeticException";return this.expTable[255-this.logTable[e]]},this.multiply=function(e,t){return 0==e||0==t?0:1==e?t:1==t?e:this.expTable[(this.logTable[e]+this.logTable[t])%255]}}w.forReference=function(e){if(e<0||e>7)throw"System.ArgumentException";return w.DATA_MASKS[e]},w.DATA_MASKS=new Array(new function(){this.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var n=0;n<t;n++)this.isMasked(r,n)&&e.flip(n,r)},this.isMasked=function(e,t){return 0==(e+t&1)}},new function(){this.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var n=0;n<t;n++)this.isMasked(r,n)&&e.flip(n,r)},this.isMasked=function(e,t){return 0==(1&e)}},new function(){this.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var n=0;n<t;n++)this.isMasked(r,n)&&e.flip(n,r)},this.isMasked=function(e,t){return t%3==0}},new function(){this.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var n=0;n<t;n++)this.isMasked(r,n)&&e.flip(n,r)},this.isMasked=function(e,t){return(e+t)%3==0}},new function(){this.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var n=0;n<t;n++)this.isMasked(r,n)&&e.flip(n,r)},this.isMasked=function(e,t){return 0==(A(e,1)+t/3&1)}},new function(){this.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var n=0;n<t;n++)this.isMasked(r,n)&&e.flip(n,r)},this.isMasked=function(e,t){var r=e*t;return(1&r)+r%3==0}},new function(){this.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var n=0;n<t;n++)this.isMasked(r,n)&&e.flip(n,r)},this.isMasked=function(e,t){var r=e*t;return 0==((1&r)+r%3&1)}},new function(){this.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var n=0;n<t;n++)this.isMasked(r,n)&&e.flip(n,r)},this.isMasked=function(e,t){return 0==((e+t&1)+e*t%3&1)}}),k.QR_CODE_FIELD=new k(285),k.DATA_MATRIX_FIELD=new k(301),k.addOrSubtract=function(e,t){return e^t};var S={};S.rsDecoder=new function(e){this.field=e,this.decode=function(e,t){for(var r=new x(this.field,e),n=new Array(t),a=0;a<n.length;a++)n[a]=0;var i=!0;for(a=0;a<t;a++){var o=r.evaluateAt(this.field.exp(a));n[n.length-1-a]=o,0!=o&&(i=!1)}if(!i){var s=new x(this.field,n),c=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),s,t),l=c[0],u=c[1],d=this.findErrorLocations(l),h=this.findErrorMagnitudes(u,d,!1);for(a=0;a<d.length;a++){var p=e.length-1-this.field.log(d[a]);if(p<0)throw"ReedSolomonException Bad error location";e[p]=k.addOrSubtract(e[p],h[a])}}},this.runEuclideanAlgorithm=function(e,t,r){if(e.Degree<t.Degree){var n=e;e=t,t=n}for(var a=e,i=t,o=this.field.One,s=this.field.Zero,c=this.field.Zero,l=this.field.One;i.Degree>=Math.floor(r/2);){var u=a,d=o,h=c;if(o=s,c=l,(a=i).Zero)throw"r_{i-1} was zero";i=u;for(var p=this.field.Zero,f=a.getCoefficient(a.Degree),m=this.field.inverse(f);i.Degree>=a.Degree&&!i.Zero;){var g=i.Degree-a.Degree,y=this.field.multiply(i.getCoefficient(i.Degree),m);p=p.addOrSubtract(this.field.buildMonomial(g,y)),i=i.addOrSubtract(a.multiplyByMonomial(g,y))}s=p.multiply1(o).addOrSubtract(d),l=p.multiply1(c).addOrSubtract(h)}var v=l.getCoefficient(0);if(0==v)throw"ReedSolomonException sigmaTilde(0) was zero";var b=this.field.inverse(v),_=l.multiply2(b),w=i.multiply2(b);return new Array(_,w)},this.findErrorLocations=function(e){var t=e.Degree;if(1==t)return new Array(e.getCoefficient(1));for(var r=new Array(t),n=0,a=1;a<256&&n<t;a++)0==e.evaluateAt(a)&&(r[n]=this.field.inverse(a),n++);if(n!=t)throw"Error locator degree does not match number of roots";return r},this.findErrorMagnitudes=function(e,t,r){for(var n=t.length,a=new Array(n),i=0;i<n;i++){for(var o=this.field.inverse(t[i]),s=1,c=0;c<n;c++)i!=c&&(s=this.field.multiply(s,k.addOrSubtract(1,this.field.multiply(t[c],o))));a[i]=this.field.multiply(e.evaluateAt(o),this.field.inverse(s)),r&&(a[i]=this.field.multiply(a[i],o))}return a}}(k.QR_CODE_FIELD),S.correctErrors=function(e,t){for(var r=e.length,n=new Array(r),a=0;a<r;a++)n[a]=255&e[a];var i=e.length-t;try{S.rsDecoder.decode(n,i)}catch(e){throw e}for(a=0;a<t;a++)e[a]=n[a]},S.decode=function(e){for(var t=new _(e),r=t.readVersion(),n=t.readFormatInformation().ErrorCorrectionLevel,a=t.readCodewords(),i=b.getDataBlocks(a,r,n),o=0,s=0;s<i.length;s++)o+=i[s].NumDataCodewords;for(var c=new Array(o),l=0,u=0;u<i.length;u++){var d=i[u],h=d.Codewords,p=d.NumDataCodewords;S.correctErrors(h,p);for(s=0;s<p;s++)c[l++]=h[s]}return new M(c,r.VersionNumber,n.Bits)};var E={};function A(e,t){return e>=0?e>>t:(e>>t)+(2<<~t)}E.imagedata=null,E.width=0,E.height=0,E.qrCodeSymbol=null,E.debug=!1,E.maxImgSize=1048576,E.sizeOfDataLengthInfo=[[10,9,8,8],[12,11,16,10],[14,13,16,12]],E.callback=null,E.vidSuccess=function(e){E.localstream=e,E.webkit?E.video.src=window.webkitURL.createObjectURL(e):E.moz?(E.video.mozSrcObject=e,E.video.play()):E.video.src=e,E.gUM=!0,E.canvas_qr2=document.createElement("canvas"),E.canvas_qr2.id="qr-canvas",E.qrcontext2=E.canvas_qr2.getContext("2d"),E.canvas_qr2.width=E.video.videoWidth,E.canvas_qr2.height=E.video.videoHeight,setTimeout(E.captureToCanvas,500)},E.vidError=function(e){E.gUM=!1},E.captureToCanvas=function(){if(E.gUM)try{if(0==E.video.videoWidth)return void setTimeout(E.captureToCanvas,500);E.canvas_qr2.width=E.video.videoWidth,E.canvas_qr2.height=E.video.videoHeight,E.qrcontext2.drawImage(E.video,0,0);try{E.decode()}catch(e){console.log(e),setTimeout(E.captureToCanvas,500)}}catch(e){console.log(e),setTimeout(E.captureToCanvas,500)}},E.setWebcam=function(e){var t=navigator;E.video=document.getElementById(e);var r=!0;if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)try{navigator.mediaDevices.enumerateDevices().then((function(e){e.forEach((function(e){console.log("deb1"),"videoinput"===e.kind&&e.label.toLowerCase().search("back")>-1&&(r=[{sourceId:e.deviceId}]),console.log(e.kind+": "+e.label+" id = "+e.deviceId)}))}))}catch(e){console.log(e)}else console.log("no navigator.mediaDevices.enumerateDevices");t.getUserMedia?t.getUserMedia({video:r,audio:!1},E.vidSuccess,E.vidError):t.webkitGetUserMedia?(E.webkit=!0,t.webkitGetUserMedia({video:r,audio:!1},E.vidSuccess,E.vidError)):t.mozGetUserMedia&&(E.moz=!0,t.mozGetUserMedia({video:r,audio:!1},E.vidSuccess,E.vidError))},E.decode=function(e){if(0==arguments.length){if(E.canvas_qr2)var t=E.canvas_qr2,r=E.qrcontext2;else r=(t=document.getElementById("qr-canvas")).getContext("2d");return E.width=t.width,E.height=t.height,E.imagedata=r.getImageData(0,0,E.width,E.height),E.result=E.process(r),null!=E.callback&&E.callback(E.result),E.result}var n=new Image;n.crossOrigin="Anonymous",n.onload=function(){var e=document.getElementById("out-canvas");if(null!=e){var t=e.getContext("2d");t.clearRect(0,0,320,240),t.drawImage(n,0,0,320,240)}var r=document.createElement("canvas"),a=r.getContext("2d"),i=n.height,o=n.width;if(n.width*n.height>E.maxImgSize){var s=n.width/n.height;o=s*(i=Math.sqrt(E.maxImgSize/s))}r.width=o,r.height=i,a.drawImage(n,0,0,r.width,r.height),E.width=r.width,E.height=r.height;try{E.imagedata=a.getImageData(0,0,r.width,r.height)}catch(e){return E.result="Cross domain image reading not supported in your browser! Save it to your computer then drag and drop the file!",void(null!=E.callback&&E.callback(E.result))}try{E.result=E.process(a)}catch(e){console.log(e),E.result="error decoding QR Code"}null!=E.callback&&E.callback(E.result)},n.onerror=function(){null!=E.callback&&E.callback("Failed to load the image")},n.src=e},E.isUrl=function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)},E.decode_url=function(e){var t="";try{t=escape(e)}catch(r){console.log(r),t=e}var r="";try{r=decodeURIComponent(t)}catch(e){console.log(e),r=t}return r},E.decode_utf8=function(e){return E.isUrl(e)?E.decode_url(e):e},E.process=function(e){var t=(new Date).getTime(),r=E.grayScaleToBitmap(E.grayscale());if(E.debug){for(var n=0;n<E.height;n++)for(var a=0;a<E.width;a++){var i=4*a+n*E.width*4;E.imagedata.data[i]=(r[a+n*E.width],0),E.imagedata.data[i+1]=(r[a+n*E.width],0),E.imagedata.data[i+2]=r[a+n*E.width]?255:0}e.putImageData(E.imagedata,0,0)}var o=new c(r).detect();if(E.debug){for(n=0;n<o.bits.Height;n++)for(a=0;a<o.bits.Width;a++){i=4*a*2+2*n*E.width*4;E.imagedata.data[i]=(o.bits.get_Renamed(a,n),0),E.imagedata.data[i+1]=(o.bits.get_Renamed(a,n),0),E.imagedata.data[i+2]=o.bits.get_Renamed(a,n)?255:0}e.putImageData(E.imagedata,0,0)}for(var s=S.decode(o.bits).DataByte,l="",u=0;u<s.length;u++)for(var d=0;d<s[u].length;d++)l+=String.fromCharCode(s[u][d]);var h=(new Date).getTime()-t;return console.log(h),E.decode_utf8(l)},E.getPixel=function(e,t){if(E.width<e)throw"point error";if(E.height<t)throw"point error";var r=4*e+t*E.width*4;return(33*E.imagedata.data[r]+34*E.imagedata.data[r+1]+33*E.imagedata.data[r+2])/100},E.binarize=function(e){for(var t=new Array(E.width*E.height),r=0;r<E.height;r++)for(var n=0;n<E.width;n++){var a=E.getPixel(n,r);t[n+r*E.width]=a<=e}return t},E.getMiddleBrightnessPerArea=function(e){for(var t=Math.floor(E.width/4),r=Math.floor(E.height/4),n=new Array(4),a=0;a<4;a++){n[a]=new Array(4);for(var i=0;i<4;i++)n[a][i]=new Array(0,0)}for(var o=0;o<4;o++)for(var s=0;s<4;s++){n[s][o][0]=255;for(var c=0;c<r;c++)for(var l=0;l<t;l++){var u=e[t*s+l+(r*o+c)*E.width];u<n[s][o][0]&&(n[s][o][0]=u),u>n[s][o][1]&&(n[s][o][1]=u)}}for(var d=new Array(4),h=0;h<4;h++)d[h]=new Array(4);for(o=0;o<4;o++)for(s=0;s<4;s++)d[s][o]=Math.floor((n[s][o][0]+n[s][o][1])/2);return d},E.grayScaleToBitmap=function(e){for(var t=E.getMiddleBrightnessPerArea(e),r=t.length,n=Math.floor(E.width/r),a=Math.floor(E.height/r),i=new ArrayBuffer(E.width*E.height),o=new Uint8Array(i),s=0;s<r;s++)for(var c=0;c<r;c++)for(var l=0;l<a;l++)for(var u=0;u<n;u++)o[n*c+u+(a*s+l)*E.width]=e[n*c+u+(a*s+l)*E.width]<t[c][s];return o},E.grayscale=function(){for(var e=new ArrayBuffer(E.width*E.height),t=new Uint8Array(e),r=0;r<E.height;r++)for(var n=0;n<E.width;n++){var a=E.getPixel(n,r);t[n+r*E.width]=a}return t};function P(e,t,r){this.x=e,this.y=t,this.count=1,this.estimatedModuleSize=r,this.__defineGetter__("EstimatedModuleSize",(function(){return this.estimatedModuleSize})),this.__defineGetter__("Count",(function(){return this.count})),this.__defineGetter__("X",(function(){return this.x})),this.__defineGetter__("Y",(function(){return this.y})),this.incrementCount=function(){this.count++},this.aboutEquals=function(e,t,r){if(Math.abs(t-this.y)<=e&&Math.abs(r-this.x)<=e){var n=Math.abs(e-this.estimatedModuleSize);return n<=1||n/this.estimatedModuleSize<=1}return!1}}function C(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2],this.__defineGetter__("BottomLeft",(function(){return this.bottomLeft})),this.__defineGetter__("TopLeft",(function(){return this.topLeft})),this.__defineGetter__("TopRight",(function(){return this.topRight}))}function D(){this.image=null,this.possibleCenters=[],this.hasSkipped=!1,this.crossCheckStateCount=new Array(0,0,0,0,0),this.resultPointCallback=null,this.__defineGetter__("CrossCheckStateCount",(function(){return this.crossCheckStateCount[0]=0,this.crossCheckStateCount[1]=0,this.crossCheckStateCount[2]=0,this.crossCheckStateCount[3]=0,this.crossCheckStateCount[4]=0,this.crossCheckStateCount})),this.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var n=e[r];if(0==n)return!1;t+=n}if(t<7)return!1;var a=Math.floor((t<<8)/7),i=Math.floor(a/2);return Math.abs(a-(e[0]<<8))<i&&Math.abs(a-(e[1]<<8))<i&&Math.abs(3*a-(e[2]<<8))<3*i&&Math.abs(a-(e[3]<<8))<i&&Math.abs(a-(e[4]<<8))<i},this.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},this.crossCheckVertical=function(e,t,r,n){for(var a=this.image,i=E.height,o=this.CrossCheckStateCount,s=e;s>=0&&a[t+s*E.width];)o[2]++,s--;if(s<0)return NaN;for(;s>=0&&!a[t+s*E.width]&&o[1]<=r;)o[1]++,s--;if(s<0||o[1]>r)return NaN;for(;s>=0&&a[t+s*E.width]&&o[0]<=r;)o[0]++,s--;if(o[0]>r)return NaN;for(s=e+1;s<i&&a[t+s*E.width];)o[2]++,s++;if(s==i)return NaN;for(;s<i&&!a[t+s*E.width]&&o[3]<r;)o[3]++,s++;if(s==i||o[3]>=r)return NaN;for(;s<i&&a[t+s*E.width]&&o[4]<r;)o[4]++,s++;if(o[4]>=r)return NaN;var c=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(c-n)>=2*n?NaN:this.foundPatternCross(o)?this.centerFromEnd(o,s):NaN},this.crossCheckHorizontal=function(e,t,r,n){for(var a=this.image,i=E.width,o=this.CrossCheckStateCount,s=e;s>=0&&a[s+t*E.width];)o[2]++,s--;if(s<0)return NaN;for(;s>=0&&!a[s+t*E.width]&&o[1]<=r;)o[1]++,s--;if(s<0||o[1]>r)return NaN;for(;s>=0&&a[s+t*E.width]&&o[0]<=r;)o[0]++,s--;if(o[0]>r)return NaN;for(s=e+1;s<i&&a[s+t*E.width];)o[2]++,s++;if(s==i)return NaN;for(;s<i&&!a[s+t*E.width]&&o[3]<r;)o[3]++,s++;if(s==i||o[3]>=r)return NaN;for(;s<i&&a[s+t*E.width]&&o[4]<r;)o[4]++,s++;if(o[4]>=r)return NaN;var c=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(c-n)>=n?NaN:this.foundPatternCross(o)?this.centerFromEnd(o,s):NaN},this.handlePossibleCenter=function(e,t,r){var n=e[0]+e[1]+e[2]+e[3]+e[4],a=this.centerFromEnd(e,r),i=this.crossCheckVertical(t,Math.floor(a),e[2],n);if(!isNaN(i)&&(a=this.crossCheckHorizontal(Math.floor(a),Math.floor(i),e[2],n),!isNaN(a))){for(var o=n/7,s=!1,c=this.possibleCenters.length,l=0;l<c;l++){var u=this.possibleCenters[l];if(u.aboutEquals(o,i,a)){u.incrementCount(),s=!0;break}}if(!s){var d=new P(a,i,o);this.possibleCenters.push(d),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(d)}return!0}return!1},this.selectBestPatterns=function(){var e=this.possibleCenters.length;if(e<3)throw"Couldn't find enough finder patterns (found "+e+")";if(e>3){for(var t=0,r=0,n=0;n<e;n++){var a=this.possibleCenters[n].EstimatedModuleSize;t+=a,r+=a*a}var i=t/e;this.possibleCenters.sort((function(e,t){var r=Math.abs(t.EstimatedModuleSize-i),n=Math.abs(e.EstimatedModuleSize-i);return r<n?-1:r==n?0:1}));var o=Math.sqrt(r/e-i*i),s=Math.max(.2*i,o);for(n=this.possibleCenters.length-1;n>=0;n--){var c=this.possibleCenters[n];Math.abs(c.EstimatedModuleSize-i)>s&&this.possibleCenters.splice(n,1)}}return this.possibleCenters.length>3&&this.possibleCenters.sort((function(e,t){return e.count>t.count?-1:e.count<t.count?1:0})),new Array(this.possibleCenters[0],this.possibleCenters[1],this.possibleCenters[2])},this.findRowSkip=function(){var e=this.possibleCenters.length;if(e<=1)return 0;for(var t=null,r=0;r<e;r++){var n=this.possibleCenters[r];if(n.Count>=2){if(null!=t)return this.hasSkipped=!0,Math.floor((Math.abs(t.X-n.X)-Math.abs(t.Y-n.Y))/2);t=n}}return 0},this.haveMultiplyConfirmedCenters=function(){for(var e=0,t=0,r=this.possibleCenters.length,n=0;n<r;n++){var a=this.possibleCenters[n];a.Count>=2&&(e++,t+=a.EstimatedModuleSize)}if(e<3)return!1;var i=t/r,o=0;for(n=0;n<r;n++)a=this.possibleCenters[n],o+=Math.abs(a.EstimatedModuleSize-i);return o<=.05*t},this.findFinderPattern=function(e){this.image=e;var t=E.height,r=E.width,n=Math.floor(3*t/228);n<3&&(n=3);for(var a=!1,i=new Array(5),o=n-1;o<t&&!a;o+=n){i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0;for(var s=0,c=0;c<r;c++)if(e[c+o*E.width])1==(1&s)&&s++,i[s]++;else if(0==(1&s))if(4==s)if(this.foundPatternCross(i)){if(this.handlePossibleCenter(i,o,c))if(n=2,this.hasSkipped)a=this.haveMultiplyConfirmedCenters();else{var l=this.findRowSkip();l>i[2]&&(o+=l-i[2]-n,c=r-1)}else{do{c++}while(c<r&&!e[c+o*E.width]);c--}s=0,i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0}else i[0]=i[2],i[1]=i[3],i[2]=i[4],i[3]=1,i[4]=0,s=3;else i[++s]++;else i[s]++;if(this.foundPatternCross(i))this.handlePossibleCenter(i,o,r)&&(n=i[0],this.hasSkipped&&(a=this.haveMultiplyConfirmedCenters()))}var u=this.selectBestPatterns();return E.orderBestPatterns(u),new C(u)}}function T(e,t,r){this.x=e,this.y=t,this.count=1,this.estimatedModuleSize=r,this.__defineGetter__("EstimatedModuleSize",(function(){return this.estimatedModuleSize})),this.__defineGetter__("Count",(function(){return this.count})),this.__defineGetter__("X",(function(){return Math.floor(this.x)})),this.__defineGetter__("Y",(function(){return Math.floor(this.y)})),this.incrementCount=function(){this.count++},this.aboutEquals=function(e,t,r){if(Math.abs(t-this.y)<=e&&Math.abs(r-this.x)<=e){var n=Math.abs(e-this.estimatedModuleSize);return n<=1||n/this.estimatedModuleSize<=1}return!1}}function O(e,t,r,n,a,i,o){this.image=e,this.possibleCenters=new Array,this.startX=t,this.startY=r,this.width=n,this.height=a,this.moduleSize=i,this.crossCheckStateCount=new Array(0,0,0),this.resultPointCallback=o,this.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},this.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,n=0;n<3;n++)if(Math.abs(t-e[n])>=r)return!1;return!0},this.crossCheckVertical=function(e,t,r,n){var a=this.image,i=E.height,o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;for(var s=e;s>=0&&a[t+s*E.width]&&o[1]<=r;)o[1]++,s--;if(s<0||o[1]>r)return NaN;for(;s>=0&&!a[t+s*E.width]&&o[0]<=r;)o[0]++,s--;if(o[0]>r)return NaN;for(s=e+1;s<i&&a[t+s*E.width]&&o[1]<=r;)o[1]++,s++;if(s==i||o[1]>r)return NaN;for(;s<i&&!a[t+s*E.width]&&o[2]<=r;)o[2]++,s++;if(o[2]>r)return NaN;var c=o[0]+o[1]+o[2];return 5*Math.abs(c-n)>=2*n?NaN:this.foundPatternCross(o)?this.centerFromEnd(o,s):NaN},this.handlePossibleCenter=function(e,t,r){var n=e[0]+e[1]+e[2],a=this.centerFromEnd(e,r),i=this.crossCheckVertical(t,Math.floor(a),2*e[1],n);if(!isNaN(i)){for(var o=(e[0]+e[1]+e[2])/3,s=this.possibleCenters.length,c=0;c<s;c++){if(this.possibleCenters[c].aboutEquals(o,i,a))return new T(a,i,o)}var l=new T(a,i,o);this.possibleCenters.push(l),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(l)}return null},this.find=function(){for(var t=this.startX,a=this.height,i=t+n,o=r+(a>>1),s=new Array(0,0,0),c=0;c<a;c++){var l=o+(0==(1&c)?c+1>>1:-(c+1>>1));s[0]=0,s[1]=0,s[2]=0;for(var u=t;u<i&&!e[u+E.width*l];)u++;for(var d=0;u<i;){if(e[u+l*E.width])if(1==d)s[d]++;else if(2==d){var h;if(this.foundPatternCross(s))if(null!=(h=this.handlePossibleCenter(s,l,u)))return h;s[0]=s[2],s[1]=1,s[2]=0,d=1}else s[++d]++;else 1==d&&d++,s[d]++;u++}if(this.foundPatternCross(s))if(null!=(h=this.handlePossibleCenter(s,l,i)))return h}if(0!=this.possibleCenters.length)return this.possibleCenters[0];throw"Couldn't find enough alignment patterns"}}function M(e,t,r){this.blockPointer=0,this.bitPointer=7,this.dataLength=0,this.blocks=e,this.numErrorCorrectionCode=r,t<=9?this.dataLengthMode=0:t>=10&&t<=26?this.dataLengthMode=1:t>=27&&t<=40&&(this.dataLengthMode=2),this.getNextBits=function(e){var t=0;if(e<this.bitPointer+1){for(var r=0,n=0;n<e;n++)r+=1<<n;return r<<=this.bitPointer-e+1,t=(this.blocks[this.blockPointer]&r)>>this.bitPointer-e+1,this.bitPointer-=e,t}if(e<this.bitPointer+1+8){var a=0;for(n=0;n<this.bitPointer+1;n++)a+=1<<n;return t=(this.blocks[this.blockPointer]&a)<<e-(this.bitPointer+1),this.blockPointer++,t+=this.blocks[this.blockPointer]>>8-(e-(this.bitPointer+1)),this.bitPointer=this.bitPointer-e%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),t}if(e<this.bitPointer+1+16){a=0;var i=0;for(n=0;n<this.bitPointer+1;n++)a+=1<<n;var o=(this.blocks[this.blockPointer]&a)<<e-(this.bitPointer+1);this.blockPointer++;var s=this.blocks[this.blockPointer]<<e-(this.bitPointer+1+8);this.blockPointer++;for(n=0;n<e-(this.bitPointer+1+8);n++)i+=1<<n;return i<<=8-(e-(this.bitPointer+1+8)),t=o+s+((this.blocks[this.blockPointer]&i)>>8-(e-(this.bitPointer+1+8))),this.bitPointer=this.bitPointer-(e-8)%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),t}return 0},this.NextMode=function(){return this.blockPointer>this.blocks.length-this.numErrorCorrectionCode-2?0:this.getNextBits(4)},this.getDataLength=function(e){for(var t=0;e>>t!=1;)t++;return this.getNextBits(E.sizeOfDataLengthInfo[this.dataLengthMode][t])},this.getRomanAndFigureString=function(e){var t=e,r=0,n="",a=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":");do{if(t>1){var i=(r=this.getNextBits(11))%45;n+=a[Math.floor(r/45)],n+=a[i],t-=2}else 1==t&&(n+=a[r=this.getNextBits(6)],t-=1)}while(t>0);return n},this.getFigureString=function(e){var t=e,r=0,n="";do{t>=3?((r=this.getNextBits(10))<100&&(n+="0"),r<10&&(n+="0"),t-=3):2==t?((r=this.getNextBits(7))<10&&(n+="0"),t-=2):1==t&&(r=this.getNextBits(4),t-=1),n+=r}while(t>0);return n},this.get8bitByteArray=function(e){var t=e,r=0,n=new Array;do{r=this.getNextBits(8),n.push(r),t--}while(t>0);return n},this.getKanjiString=function(e){var t=e,r=0,n="";do{var a=((r=this.getNextBits(13))/192<<8)+r%192,i=0;i=a+33088<=40956?a+33088:a+49472,n+=String.fromCharCode(i),t--}while(t>0);return n},this.parseECIValue=function(){var e=0,t=this.getNextBits(8);(0==(128&t)&&(e=127&t),128==(192&t))&&(e=(63&t)<<8|this.getNextBits(8));192==(224&t)&&(e=(31&t)<<16|this.getNextBits(8));return e},this.__defineGetter__("DataByte",(function(){for(var e=new Array;;){var t=this.NextMode();if(0==t){if(e.length>0)break;throw"Empty data block"}if(1!=t&&2!=t&&4!=t&&8!=t&&7!=t)throw"Invalid mode: "+t+" in (block:"+this.blockPointer+" bit:"+this.bitPointer+")";if(7==t)var r=this.parseECIValue();else{var n=this.getDataLength(t);if(n<1)throw"Invalid data length: "+n;switch(t){case 1:for(var a=this.getFigureString(n),i=new Array(a.length),o=0;o<a.length;o++)i[o]=a.charCodeAt(o);e.push(i);break;case 2:for(a=this.getRomanAndFigureString(n),i=new Array(a.length),o=0;o<a.length;o++)i[o]=a.charCodeAt(o);e.push(i);break;case 4:r=this.get8bitByteArray(n);e.push(r);break;case 8:a=this.getKanjiString(n);e.push(a)}}}return e}))}E.orderBestPatterns=function(e){function t(e,t){var r=e.X-t.X,n=e.Y-t.Y;return Math.sqrt(r*r+n*n)}var r,n,a,i=t(e[0],e[1]),o=t(e[1],e[2]),s=t(e[0],e[2]);if(o>=i&&o>=s?(n=e[0],r=e[1],a=e[2]):s>=o&&s>=i?(n=e[1],r=e[0],a=e[2]):(n=e[2],r=e[0],a=e[1]),function(e,t,r){var n=t.x,a=t.y;return(r.x-n)*(e.y-a)-(r.y-a)*(e.x-n)}(r,n,a)<0){var c=r;r=a,a=c}e[0]=r,e[1]=n,e[2]=a},e.exports=E},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var a=u(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=r(19),h=(r(299),function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,r,n,l,d,h=c(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=h.call(this,e)).name="QRScanner",t.description="Adds QRCode scanning functionality to Saito",t.categories="Core",t.video=null,t.canvas=null,t.canvas_context=null,t.isStreamInit=!1,t.scanner_callback=null,t.description="Helper module with QR code scanning functionality.",t.categories="Dev Data Utilities",t.constraints={audio:!1,video:{facingMode:"environment"}},t.decoder=null,t.last_scanned_raw=null,t.last_scanned_at=null,t.debounce_timeout=750,t.events=["encrypt-key-exchange-confirm"],t}return t=p,(r=[{key:"initialize",value:function(e){o(u(p.prototype),"initialize",this).call(this,e)}},{key:"initializeHTML",value:function(e){}},{key:"attachEvents",value:function(e){var t=this;document.querySelector(".launch-scanner").addEventListener("click",(function(e){t.startScanner()}))}},{key:"startQRDecoderInitializationLoop",value:function(){var e=this;x=this.attemptQRDecode(),1==x?console.log("working..."):(console.log("wait 100...."),setTimeout((function(){e.startQRDecoderInitializationLoop()}),100))}},{key:"startScanner",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(0!=this.app.BROWSER&&document&&!document.querySelector(".qrscanner-container")){this.scanner_callback=null,e&&(this.scanner_callback=e),document.body.innerHTML=this.returnScannerHTML();var t=this;t.start(document.getElementById("qr-video"),document.getElementById("qr-canvas"))}}},{key:"startEmbeddedScanner",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(0!=this.app.BROWSER&&document&&!document.querySelector(".qrscanner-container")){this.scanner_callback=null,t&&(this.scanner_callback=t),e.innerHTML=this.returnScannerHTML();var r=this;r.start(document.getElementById("qr-video"),document.getElementById("qr-canvas"))}}},{key:"startQRDecoder",value:function(){var e=this;x=this.attemptQRDecode(),1==x||setTimeout((function(){e.startQRDecoder()}),100)}},{key:"returnScannerHTML",value:function(){return'\n      <div class="qrscanner-container">\n        <div id="qr-target" class="qr-target"></div>\n        <div id="scanline" class="scanline"></div>\n        <div class="video-container">\n          <video playsinline autoplay id="qr-video" class="qr-video"></video>\n        </div>\n        <canvas style="display: none" id="qr-canvas"></canvas>\n      </div>\n\n    '}},{key:"start",value:(l=regeneratorRuntime.mark((function e(t,r){var n,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.video=t,this.canvas=r,this.canvas_context=this.canvas.getContext("2d"),this.decoder=new Worker("/qrscanner/quirc_worker.js"),this.decoder.onmessage=function(e){a.onDecoderMessage(e)},e.prev=5,e.next=8,navigator.mediaDevices.getUserMedia(this.constraints);case 8:n=e.sent,this.handleSuccess(n),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),this.handleError(e.t0);case 15:this.startQRDecoderInitializationLoop();case 16:case"end":return e.stop()}}),e,this,[[5,12]])})),d=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=l.apply(e,t);function o(e){a(i,r,n,o,s,"next",e)}function s(e){a(i,r,n,o,s,"throw",e)}o(void 0)}))},function(e,t){return d.apply(this,arguments)})},{key:"stop",value:function(){this.decoder.terminate(),this.video&&this.video.srcObject.getTracks().forEach((function(e){return e.stop()}))}},{key:"render",value:function(){}},{key:"attemptQRDecode",value:function(){if(!this.isStreamInit)return 0;try{if(this.canvas.width=this.video.videoWidth,this.canvas.height=this.video.videoHeight,this.canvas_context.drawImage(this.video,0,0,this.canvas.width,this.canvas.height),0==this.canvas.width)return;var e=this.canvas_context.getImageData(0,0,this.canvas.width,this.canvas.height);return e.data&&this.decoder.postMessage(e),1}catch(e){return 0}return 0}},{key:"onDecoderMessage",value:function(e){var t=this;if("done"!=e.data){var r=e.data.payload_string,n=Date.now();r!=this.last_scanned_raw||this.last_scanned_at<n-this.debounce_timeout?(this.last_scanned_raw=r,this.last_scanned_at=n,this.handleDecodedMessage(r)):r==this.last_scanned_raw&&(this.last_scanned_at=n)}setTimeout((function(){t.attemptQRDecode()}),0)}},{key:"handleDecodedMessage",value:function(e){if(null!=this.scanner_callback)return this.decoder.terminate(),void this.scanner_callback(e);this.app.crypto.isPublicKey(e)?this.decoder.terminate():this.sendEvent("qrcode",e)}},{key:"decodeFromFile",value:function(e){var t=this,r=new FileReader;r.onload=function(e){t.canvas_context.clearRect(0,0,t.canvas.width,t.canvas.height)},r.readAsDataURL(e)}},{key:"handleSuccess",value:function(e){window.stream=e,this.video.srcObject=e,this.isStreamInit=!0}},{key:"handleError",value:function(e){console.log("navigator.MediaDevices.getUserMedia error: ",e.message,e.name)}},{key:"receiveEvent",value:function(e,t){"encrypt-key-exchange-confirm"===e&&document.getElementById("qr-canvas")&&this.initializing_key&&window.location.assign("/chat")}}])&&i(t.prototype,r),n&&i(t,n),p}(d));e.exports=h},function(e,t,r){var n=r(303);e.exports=RegistryAppspace={render:function(e,t){document.querySelector(".email-appspace").innerHTML=n()},attachEvents:function(e,t){document.querySelector(".registry-submit").addEventListener("click",(function(e){var r=document.getElementById("identifier-requested").value;t.registry.registerIdentifier(r)}))}}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){a(o,n,i,s,c,"next",e)}function c(e){a(o,n,i,s,c,"throw",e)}s(void 0)}))}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var a=d(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r(10),r(5);var h=r(19),p=r(304),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(m,e);var t,r,n,a,d,h,f=c(m);function m(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(t=f.call(this,e)).app=e,t.name="Registry",t.description="Adds support for the Saito DNS system, so that users can register user-generated names. Runs DNS server on core nodes.",t.categories="Core Utilities Messaging",t.publickey="zYCCXRZt2DyPD9UmxRfwFgLTNAqCd5VE8RuNneg4aNMK",l(t,u(t))}return t=m,(r=[{key:"returnServices",value:function(){var e=[];return e.push({service:"registry",domain:"saito"}),e}},{key:"respondTo",value:function(){var e,t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"do-registry-prompt"==r?{doRegistryPrompt:(e=i(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sprompt("Pick a handle or nickname. <br /><sub>Alphanumeric characters only - Do not include an @</sub.>");case 2:if(r=e.sent,e.prev=3,!t.tryRegisterIdentifier(r)){e.next=9;break}return e.abrupt("return",r);case 9:throw"Unknown error";case 10:e.next=19;break;case 12:if(e.prev=12,e.t0=e.catch(3),"Alphanumeric Characters only"!=e.t0.message){e.next=18;break}salert("Alphanumeric Characters only"),e.next=19;break;case 18:throw e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,12]])}))),function(){return e.apply(this,arguments)})}:null}},{key:"showModal",value:function(){p.render(this.app,this),p.attachEvents(this.app,this)}},{key:"tryRegisterIdentifier",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"@saito",r=this.app.wallet.createUnsignedTransaction(this.publickey,0,this.app.wallet.wallet.default_fee);if(null==r)throw console.log("NULL TX CREATED IN REGISTRY MODULE"),Error("NULL TX CREATED IN REGISTRY MODULE");if("string"==typeof e||e instanceof String){var n=/^[0-9A-Za-z]+$/;if(!n.test(e))throw Error("Alphanumeric Characters only");return r.msg.module="Registry",r.msg.identifier=e+t,r=this.app.wallet.signTransaction(r),this.app.network.propagateTransaction(r),!0}throw TypeError("identifier must be a string")}},{key:"registerIdentifier",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"@saito",r=this.app.wallet.createUnsignedTransaction(this.publickey,0,this.app.wallet.wallet.default_fee);if(null!=r){if("string"==typeof e||e instanceof String){var n=/^[0-9A-Za-z]+$/;return n.test(e)?(r.msg.module="Registry",r.msg.identifier=e+t,r=this.app.wallet.signTransaction(r),this.app.network.propagateTransaction(r),!0):(salert("Alphanumeric Characters only"),!1)}}else console.log("NULL TX CREATED IN REGISTRY MODULE")}},{key:"onPeerHandshakeComplete",value:function(e,t){var r=e.modules.returnModule("Registry");null!=r.app.options.server?r.publickey=r.app.wallet.returnPublicKey():r.publickey=t.peer.publickey}},{key:"onConfirmation",value:(h=i(regeneratorRuntime.mark((function e(t,r,n,a){var i,o,s,c,l,u,d,h,p,f,m,g,y,v,b,_,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a.modules.returnModule("Registry"),o=r.returnMessage(),0!=n){e.next=24;break}if("Registry"!==o.module){e.next=23;break}if(!r.isTo(i.publickey)||a.wallet.returnPublicKey()!==i.publickey){e.next=23;break}return console.log(i.publickey+" -- "+a.wallet.returnPublicKey()),o.request,s=o.identifier,c=r.transaction.from[0].add,l=(new Date).getTime(),u=t.block.id,d=t.returnHash(),h=s+c+u+d,p=i.app.wallet.signMessage(h),f=this.publickey,e.next=19,i.addRecord(s,c,l,u,d,0,p,f,1);case 19:return m=e.sent,g=r.returnPaymentTo(i.publickey),1==m?((y=i.app.wallet.createUnsignedTransaction(r.transaction.from[0].add,0,g)).msg.module="Email",y.msg.origin="Registry",y.msg.title="Address Registration Success!",y.msg.message="<p>You have successfully registered the identifier: <span class='boldred'>"+s+"</span></p>",y.msg.identifier=s,y.msg.signed_message=h,y.msg.sig=p,y=i.app.wallet.signTransaction(y),i.app.network.propagateTransaction(y)):((v=i.app.wallet.createUnsignedTransaction(r.transaction.from[0].add,0,g)).msg.module="Email",v.msg.title="Address Registration Failed!",v.msg.message="<p>The identifier you requested (<span class='boldred'>"+s+"</span>) has already been registered.</p>",v.msg.identifier=s,v.msg.signed_message="",v.msg.sig="",v=i.app.wallet.signTransaction(v),i.app.network.propagateTransaction(v)),e.abrupt("return");case 23:if("Email"==o.module&&r.transaction.from[0].add==i.publickey&&r.transaction.to[0].add==i.app.wallet.returnPublicKey()&&null!=r.msg.identifier&&null!=r.msg.signed_message&&null!=r.msg.sig){b=r.msg.identifier,_=r.msg.signed_message,w=r.msg.sig;try{console.log("a"),i.app.crypto.verifyMessage(_,w,i.publickey)&&(console.log("b"),i.app.keys.addKey(r.transaction.to[0].add,b,!0,"",t.block.id,t.returnHash(),1),console.log("c"))}catch(e){console.log("ERROR verifying username registration message: "+e)}}case 24:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return h.apply(this,arguments)})},{key:"addRecord",value:(d=i(regeneratorRuntime.mark((function e(){var t,r,n,a,i,o,s,c,l,u,d,h,p=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:"",r=p.length>1&&void 0!==p[1]?p[1]:"",n=p.length>2&&void 0!==p[2]?p[2]:0,a=p.length>3&&void 0!==p[3]?p[3]:0,i=p.length>4&&void 0!==p[4]?p[4]:"",o=p.length>5&&void 0!==p[5]?p[5]:0,s=p.length>6&&void 0!==p[6]?p[6]:"",c=p.length>7&&void 0!==p[7]?p[7]:"",l=p.length>8&&void 0!==p[8]?p[8]:1,u="INSERT INTO records (\n        identifier, \n        publickey, \n        unixtime, \n        bid, \n        bsh, \n        lock_block, \n        sig,\n        signer, \n        lc\n      ) VALUES (\n        $identifier, \n        $publickey,\n        $unixtime, \n        $bid, \n        $bsh, \n        $lock_block, \n        $sig, \n        $signer, \n        $lc\n      )",d={$identifier:t,$publickey:r,$unixtime:n,$bid:a,$bsh:i,$lock_block:o,$sig:s,$signer:c,$lc:l},e.next=13,this.app.storage.executeDatabase(u,d,"registry");case 13:return u="SELECT * FROM records WHERE identifier = $identifier AND publickey = $publickey AND unixtime = $unixtime AND bid = $bid AND bsh = $bsh AND lock_block = $lock_block AND sig = $sig AND signer = $signer AND lc = $lc",e.next=16,this.app.storage.queryDatabase(u,d,"registry");case 16:if(h=e.sent,console.log(u),console.log(d),console.log("\n\n\nRES: "+JSON.stringify(h)),0!=h.length){e.next=24;break}return e.abrupt("return",0);case 24:return e.abrupt("return",1);case 25:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"onChainReorganization",value:(a=i(regeneratorRuntime.mark((function e(t,r,n){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={$bid:t,$bsh:r},e.next=4,this.app.storage.executeDatabase("UPDATE records SET lc = $lc WHERE bid = $bid AND bsh = $bsh",a,"registry");case 4:return e.abrupt("return");case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return a.apply(this,arguments)})},{key:"shouldAffixCallbackToModule",value:function(e){return e==this.name||"Email"==e?1:0}},{key:"sendSuccessResponse",value:function(e){var t=e.returnPaymentTo(this.app.wallet.returnPublicKey()),r=registry_self.app.wallet.createUnsignedTransaction(to,0,t);null!=r?(r.msg.module="Email",r.msg.data="You have successfully registered your address",r.msg.title="Address Registration Success!",r=this.app.wallet.signTransaction(e),this.app.network.propagateTransaction(r)):console.log("NULL TX CREATED IN REGISTRY MODULE")}},{key:"sendFailureResponse",value:function(e){var t=e.returnPaymentTo(this.app.wallet.returnPublicKey()),r=registry_self.app.wallet.createUnsignedTransaction(to,0,t);null!=r?(r.msg.module="Email",r.msg.data="You have successfully registered your address",r.msg.title="Address Registration Success!",r=this.app.wallet.signTransaction(e),this.app.network.propagateTransaction(r)):console.log("NULL TX CREATED IN REGISTRY MODULE")}}])&&o(t.prototype,r),n&&o(t,n),m}(h);e.exports=f},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var a=u(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=r(5),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(f,e);var t,r,n,u,h,p=s(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=p.call(this,e)).app=e,t.name="Relay",t.description="Adds support for off-chain, realtime communications channels through relay servers, for mobile users and real-time gaming needs.",t.categories="Utilities Core",t.description="Simple Message Relay for Saito",t.categories="Utilities Communications",c(t,l(t))}return t=f,(r=[{key:"returnServices",value:function(){var e=[];return e.push({service:"relay"}),e}},{key:"sendRelayMessage",value:function(e,t,r){Array.isArray(e)||(recipient=e,(e=[]).push(recipient));var n=new d.transaction;n.transaction.from.push(new d.slip(this.app.wallet.returnPublicKey()));for(var a=0;a<e.length;a++)n.transaction.to.push(new d.slip(e[a]));n.transaction.ts=(new Date).getTime(),n.msg.request=t,n.msg.data=r;for(var i=n=this.app.wallet.signTransaction(n),o=0;o<this.app.network.peers.length;o++)if(this.app.network.peers[o].peer&&this.app.network.peers[o].peer.modules&&this.app.network.peers[o].peer.modules.length>0&&this.app.network.peers[o].peer.modules.includes(this.name)){var s=this.app.network.peers[o];if(!e.includes(s.peer.publickey)){var c=new d.transaction;c.transaction.from.push(new d.slip(this.app.wallet.returnPublicKey()));for(var l=0;l<e.length;l++)c.transaction.to.push(new d.slip(e[l]));c.transaction.ts=(new Date).getTime(),c.msg=n.transaction,c=this.app.wallet.signTransaction(c),(i=new d.transaction).transaction.from.push(new d.slip(this.app.wallet.returnPublicKey())),i.transaction.to.push(new d.slip(s.peer.publickey)),i.transaction.ts=(new Date).getTime(),i.msg=c.transaction,i=this.app.wallet.signTransaction(i)}s.sendRequest("relay peer message",i.transaction)}}},{key:"sendRelayMessageWithRetry",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t.request=e,this.app.network.peers[0].sendRequestWithCallbackAndRetry("relayPeerMessage2",t,r.bind(this))}},{key:"sendRelayMessageToRecipientWithRetry",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};r.request=e,r.recipient=t,this.app.network.peers[0].sendRequestWithCallbackAndRetry("relayPeerMessageToRecipient",r,n.bind(this))}},{key:"handlePeerRequest",value:(u=regeneratorRuntime.mark((function e(t,r,n){var a,i,o,s,c,l,u,h,p,f,m=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=m.length>3&&void 0!==m[3]?m[3]:null,e.prev=1,t.modules.returnModule("Relay"),"relayPeerMessageToRecipient"===r.request&&r.data&&r.data.request&&r.data.recipient&&(null!=(i=this.app.network.returnPeerByPublicKey(r.data.recipient))?null===a?i.sendRequest(r.data.request,r.data):i.sendRequestWithCallbackAndRetry(r.data.request,r.data,(function(e){a(e)})):a({err:"Peer not found"})),"relayPeerMessage2"===r.request&&r.data&&r.data.request&&(null===a?this.app.network.sendRequest(r.data.request,r.data):this.app.network.sendRequestWithCall(r.data.request,r.data,(function(e){a(e)}))),"relay peer message"!==r.request){e.next=36;break}if(r.data,!((o=new d.transaction(r.data)).transaction.to.length<=0)){e.next=10;break}return e.abrupt("return");case 10:if(null!=o.transaction.to[0].add){e.next=12;break}return e.abrupt("return");case 12:if(o.decryptMessage(this.app),!(s=o.returnMessage()).data){e.next=18;break}return t.modules.handlePeerRequest(s,n,a),null!=a&&a({err:"",success:1}),e.abrupt("return");case 18:if(!(c=new d.transaction(s)).isTo(t.wallet.returnPublicKey())){e.next=33;break}if(c.decryptMessage(t),!(l=c.returnMessage()).request){e.next=26;break}return t.modules.handlePeerRequest(h,n,a),null!=a&&a({err:"",success:1}),e.abrupt("return");case 26:(u=new d.transaction(l)).decryptMessage(t),h=u.returnMessage(),t.modules.handlePeerRequest(h,n,a),null!=a&&a({err:"",success:1}),e.next=36;break;case 33:for(p=0,f=0;f<t.network.peers.length;f++)c.isTo(t.network.peers[f].peer.publickey)&&(p=1,t.network.peers[f].sendRequest("relay peer message",r.data,(function(){null!=a&&a({err:"",success:1})})));0==p&&null!=a&&a({err:"ERROR 141423: peer not found in relay module",success:0});case 36:e.next=41;break;case 38:e.prev=38,e.t0=e.catch(1),console.log(e.t0);case 41:case"end":return e.stop()}}),e,this,[[1,38]])})),h=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=u.apply(e,t);function o(e){a(i,r,n,o,s,"next",e)}function s(e){a(i,r,n,o,s,"throw",e)}o(void 0)}))},function(e,t,r){return h.apply(this,arguments)})}])&&i(t.prototype,r),n&&i(t,n),f}(r(19));e.exports=h},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var a=l(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=r(307),d=(r(5),function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(d,e);var t,r,n,l=o(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=l.call(this,e)).app=e,t.name="Settings",t.description="Convenient Email plugin for managing Saito account settings",t.utilities="Core Utilities",t.link="/email?module=settings",t.description="User settings module.",t.categories="Admin Users",s(t,c(t))}return t=d,(r=[{key:"respondTo",value:function(e){if("email-appspace"==e){var t={render:function(e,t){u.render(e,t)},attachEvents:function(e,t){u.attachEvents(e,t)}};return t}return null}}])&&a(t.prototype,r),n&&a(t,n),d}(r(19)));e.exports=d},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var a=u(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r(5);var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,r,n,l,d,h=c(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=h.call(this,e)).name="Solitrio",t.description="Once you've started playing Solitrio, how can you go back to old-fashioned Solitaire? This one-player card game is the perfect way to pass a flight from Hong Kong to pretty much anywhere. Arrange the cards on the table from 2-10 ordered by suite. Harder than it looks.",t.categories="Arcade Games Entertainment",t.maxPlayers=1,t.minPlayers=1,t.type="Solitaire Cardgame",t.status="Beta",t.description="Solitaire card game made famous by the good folks at Cathay Pacific Information Technology Services.",t.categories="Cardgame Game Solitaire",t.boardgameWidth=5100,t}return t=p,(r=[{key:"toggleIntro",value:function(){this.overlay.showOverlay(this.app,this,'\n\n  <div class="intro">\n  <h1>Instrutions</h1>\n  <ul>\n  <li>Cards (2-10 in each suit) are randomly arranged in four rows of ten with four blank spaces.</li>\n  <li>The goal is to arrange the cards in sequential order with one suit per row.</li>\n\t<li>The 2 of any suit may be placed in the leftmost space of any row (if empty).</li>\n  <li>All other cards must match the suit of its left neighbor and be the next in sequence, e.g. the 8&spades; may be placed after (to the right of) the 7&spades;.</li>\n  <li>If you get stuck, you may reshuffle the board. Reshuffling will not move a 2 (or any connected sequence of cards) from its target position.</li>\n\t<li>You only have two chances to reshuffle the board and you lose if you cannot order the cards.</li>\n\t</ul>\n  </div>\n   ')}},{key:"initializeGame",value:function(e){this.updateStatus("loading game..."),this.loadGame(e),this.saveGame(),this.loadGame(this.game.id),""!=this.game.status&&this.updateStatus(this.game.status),""==this.game.dice&&this.initializeDice(),this.updateStatus("Generating the Game"),this.game.queue.push("round"),this.game.queue.push("DEAL\t1\t1\t40"),this.game.queue.push("SHUFFLE\t1\t1"),this.game.queue.push("DECK\t1\t"+JSON.stringify(this.returnDeck())),this.game.board={},this.game.state=this.returnState(),this.saveGame(e),$(".slot").css("min-height",$(".card").css("min-height"))}},{key:"initializeHTML",value:function(e){var t=this;o(u(p.prototype),"initializeHTML",this).call(this,e),this.app.modules.respondTo("chat-manager").forEach((function(r){r.respondTo("chat-manager").render(e,t),r.respondTo("chat-manager").attachEvents(e,t)})),this.menu.addMenuOption({text:"Game",id:"game-game",class:"game-game",callback:function(e,t){t.menu.showSubMenu("game-game")}}),this.menu.addSubMenuOption("game-game",{text:"Start New Game",id:"game-new",class:"game-new",callback:function(e,t){t.menu.hideSubMenus()}}),this.menu.addSubMenuOption("game-game",{text:"How to Play",id:"game-intro",class:"game-intro",callback:function(e,t){t.menu.hideSubMenus(),t.toggleIntro()}}),this.menu.addSubMenuOption("game-game",{text:"Exit",id:"game-exit",class:"game-exit",callback:function(e,t){window.location.href="/arcade"}}),this.menu.addMenuIcon({text:'<i class="fa fa-window-maximize" aria-hidden="true"></i>',id:"game-menu-fullscreen",callback:function(e,t){t.menu.hideSubMenus(),e.browser.requestFullscreen()}});for(var r=0;r<this.app.modules.mods.length;r++)"chat"===this.app.modules.mods[r].slug&&function(){var e=t.app.modules.mods[r];t.menu.addMenuOption({text:"Chat",id:"game-chat",class:"game-chat",callback:function(e,t){t.menu.showSubMenu("game-chat")}}),t.menu.addSubMenuOption("game-chat",{text:"Community",id:"game-chat-community",class:"game-chat-community",callback:function(t,r){r.menu.hideSubMenus(),e.mute_community_chat=0,e.sendEvent("chat-render-request",{}),e.openChatBox()}})}();this.menu.render(e,this),this.menu.attachEvents(e,this)}},{key:"requestInterface",value:function(e){return"arcade-sidebar"==e?{title:this.name}:null}},{key:"returnState",value:function(){var e={recycles_remaining:2};return e}},{key:"playerTurn",value:function(){this.displayBoard(),this.updateStatus("Play Solitrio like your life Depends on it!")}},{key:"attachEventsToBoard",value:function(){var e=this,t="";$(".slot").off(),$(".slot").on("click",(function(){var r=$(this).attr("id");if("E"!==r[0]){if(t===r)return e.untoggleCard(r),void(t="");if(""==t){if("E"===e.game.board[r].name[0])return;return t=r,void e.toggleCard(r)}if("E"!==e.game.board[r].name[0])return e.untoggleCard(t),e.toggleCard(r),void(t=r);if(e.canCardPlaceInSlot(t,r)){var n=JSON.stringify(e.game.board[t]),a=JSON.stringify(e.game.board[r]);return e.game.board[t]=JSON.parse(a),e.game.board[r]=JSON.parse(n),e.untoggleCard(r),e.untoggleCard(t),$("#"+t).html(e.returnCardImageHTML(e.game.board[t].name)),$("#"+r).html(e.returnCardImageHTML(e.game.board[r].name)),t="",void(e.scanBoard(!1)?(salert("Congratulations! You win!"),console.log("Game Over -- Winner!")):e.hasAvailableMoves()?console.log("Wait for next Move"):0==e.game.state.recycles_remaining?(salert("No More Available Moves, you lose!"),console.log("Game Over -- Loser!")):console.log("Need to shuffle"))}var i,o=e.getPredecessor(r);if(o){var s=parseInt(e.returnCardNumber(o))+1;i=s<11?"Hint: Try a "+s+" of "+e.cardSuitHTML(e.returnCardSuite(o)):"Unfortunately, no card can go there"}else i="Hint: Try a 2 of any suit";return salert("<p>Sorry, "+e.cardSuitHTML(e.returnCardSuite(t))+e.returnCardNumber(t)+" cannot go there... </p><p>"+i+"</p>"),e.untoggleCard(t),void(t="")}}))}},{key:"canCardPlaceInSlot",value:function(e,t){var r=this.returnCardNumber(e),n=this.returnCardSuite(e);console.log(e+"["+n+r+"] --\x3e "+t);var a=this.getPredecessor(t);if(a){var i=parseInt(this.returnCardNumber(a)),o=this.returnCardSuite(a);if(r==i+1&&n===o)return!0}else if("2"===r)return!0;return!1}},{key:"getPredecessor",value:function(e){var t=e.split("_slot");return"1"!==t[1]&&t[0]+"_slot"+(t[1]-1)}},{key:"hasAvailableMoves",value:function(){for(var e=1;e<=4;e++)for(var t="none",r=1;r<=10;r++){var n="row".concat(e,"_slot").concat(r);if("E"===this.returnCardSuite(n)){if("10"!=t)return!0;t="10"}else t=this.returnCardNumber(n)}return!1}},{key:"toggleCard",value:function(e){e="#"+e,$(e).css("opacity","0.75")}},{key:"untoggleCard",value:function(e){e="#"+e,$(e).css("opacity","1.0")}},{key:"hideCard",value:function(e){e="#"+e,$(e).css("opacity","0.0")}},{key:"handleGameLoop",value:function(){if(1==this.game.over)return this.updateStatus("Game Over: Player "+winner.toUpperCase()+" wins"),0;if(this.displayBoard(),this.game.queue.length>0){var e=this.game.queue.length-1,t=this.game.queue[e].split("\t"),r=1;if("turn"===t[0]&&(this.game.queue.splice(e,1),parseInt(t[1])==this.game.player&&this.playerTurn(),r=0),"round"===t[0]){this.displayUserInterface();for(var n=0,a=1;a<=4;a++)for(var i=1;i<=10;i++){var o="row".concat(a,"_slot").concat(i);this.game.board[o]=this.game.deck[0].cards[this.game.deck[0].hand[n++]]}this.displayBoard(),r=0}if("play"===t[0]&&this.game.queue.splice(e,1),"call"===t[0]&&this.game.queue.splice(e,1),"fold"===t[0]&&this.game.queue.splice(e,1),"raise"===t[0]&&this.game.queue.splice(e,1),0==r)return console.log("NOT CONTINUING"),0}return 1}},{key:"displayBoard",value:(l=regeneratorRuntime.mark((function e(){var t,r,n,a,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:0,0!=this.browser_active){e.next=3;break}return e.abrupt("return");case 3:e.prev=3,r=function(e){return new Promise((function(t){return setTimeout(t,e)}))},e.t0=regeneratorRuntime.keys(this.game.board);case 6:if((e.t1=e.t0()).done){e.next=15;break}return n=e.t1.value,e.next=10,r(t);case 10:a="#"+n,$(a).html(this.returnCardImageHTML(this.game.board[n].name)),this.untoggleCard(n),e.next=6;break;case 15:e.next=19;break;case 17:e.prev=17,e.t2=e.catch(3);case 19:this.attachEventsToBoard();case 20:case"end":return e.stop()}}),e,this,[[3,17]])})),d=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=l.apply(e,t);function o(e){a(i,r,n,o,s,"next",e)}function s(e){a(i,r,n,o,s,"throw",e)}o(void 0)}))},function(){return d.apply(this,arguments)})},{key:"returnCardImageHTML",value:function(e){return"E"==e[0]?"":'<img src="/solitrio/img/cards/'+e+'.png" />'}},{key:"returnDeck",value:function(){for(var e=["S","C","H","D","E"],t={},r=0;r<4;r++)for(var n=2;n<=10;n++)t[(10*r+n).toString()]={name:e[r]+n};for(var a=1;a<=4;a++)t[(40+a).toString()]={name:e[4]+a};return t}},{key:"endTurn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.updateStatus("Waiting for information from peers...."),$(".menu_option").off();var t={};t.target=this.returnNextPlayer(this.game.player),0!=e&&(t.target=e),this.game.turn=this.moves,this.moves=[],this.sendMessage("game",t)}},{key:"displayUserInterface",value:function(){var e=this,t="Order cards by suit from 2 to 10. You may randomize the unarranged cards ";2==this.game.state.recycles_remaining&&(t+="two more times.",$(".chances").text("two chances")),1==this.game.state.recycles_remaining&&(t+="one more time.",$(".chances").text("one chance")),0==this.game.state.recycles_remaining&&(t+="no more times.",$(".chances").text("no chances")),this.game.state.recycles_remaining>0&&(t+=' <p></p><div id="recycles_remaining">click here to cycle the board</div>'),this.updateStatus(t),$(".logobox").off(),$(".logobox").on("click",(function(){0!=e.game.state.recycles_remaining?(e.scanBoard(!0),e.game.state.recycles_remaining--,e.displayUserInterface()):salert("Sorry! No more chances!")})),$("#recycles_remaining").off(),$("#recycles_remaining").on("click",(function(){0!=e.game.state.recycles_remaining?(e.scanBoard(!0),e.game.state.recycles_remaining--,e.displayUserInterface()):salert("Sorry! No more chances!")}))}},{key:"scanBoard",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=new Array(4);t.fill(0);for(var r=[],n=0;n<4;n++)for(var a="none",i=1;i<11;i++){var o="row"+(n+1)+"_slot"+i,s=this.returnCardSuite(o),c=this.returnCardNumber(o);if(1==i&&2==c&&(a=s),a!==s||c!=i+1)break;t[n]=i,e&&this.toggleCard(o)}for(var l=0;l<4;l++)for(var u=t[l]+1;u<11;u++){var d="row".concat(l+1,"_slot").concat(u);e&&this.hideCard(d),r.push(this.game.board[d])}var h=0===r.length;if(e){r.sort((function(){return Math.random()-.5}));for(var p=0;p<4;p++)for(var f=t[p]+1;f<11;f++){var m="row".concat(p+1,"_slot").concat(f);this.game.board[m]=r.shift()}this.saveGame(this.game.id),this.displayBoard(100)}return h}},{key:"returnCardSuite",value:function(e){return this.game.board[e].name[0]}},{key:"cardSuitHTML",value:function(e){switch(e){case"D":return"&diams;";case"H":return"&hearts;";case"S":return"&spades;";case"C":return"&clubs;";default:return""}}},{key:"returnCardNumber",value:function(e){var t=this.game.board[e].name;return"E"===t[0]?11:t.substring(1)}},{key:"addMove",value:function(e){this.moves.push(e)}}])&&i(t.prototype,r),n&&i(t,n),p}(r(82));e.exports=d},function(e,t,r){var n=r(309);e.exports=WebsiteData={render:function(e){document.querySelector(".netstats")&&(document.querySelector(".netstats").innerHTML=n());var t=new Date(e.blockchain.last_ts),r=t.getHours()+":"+("0"+t.getMinutes()).substr(-2)+":"+("0"+t.getSeconds()).substr(-2),a=e.blockchain.last_bid;document.querySelector(".block-number")&&(document.querySelector(".block-number").innerHTML=a),document.querySelector(".block-time")&&(document.querySelector(".block-time").innerHTML=r)}}},function(e,t,r){(function(t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){a(o,n,i,s,c,"next",e)}function c(e){a(o,n,i,s,c,"throw",e)}s(void 0)}))}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var a=d(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=r(10),p=(r(5),r(19)),f=r(219),m=r(94),g=r(46),y=r(314),v=r(315),b=r(313),_=r(316),w=r(312),x=r(310),k=r(311),S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var r,n,a,d=c(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=d.call(this,e)).app=e,t.name="Website",t.description="Module that creates a root website on a Saito node.",t.categories="Utilities Communications",t.header=null,t.overlay=new g(e,u(t)),l(t,u(t))}return r=p,(n=[{key:"initializeHompage",value:function(e){var t=this;document.querySelectorAll("#weixin-link").forEach((function(r){r.onclick=function(r){t.overlay.showOverlay(e,t,'<div id=\'weixinqr-overlay\'><img src="/img/wechat/weixin.png" style="display: block;">\n        </div>',(function(){}))}})),document.querySelectorAll("#whitepaperLink").forEach((function(t){t.onclick=function(t){e.browser.logMatomoEvent("Navigation","HomepageNavigationClick","HomepageWhitepaperLink")}})),document.querySelectorAll("#litepaperLink").forEach((function(t){t.onclick=function(t){e.browser.logMatomoEvent("Navigation","HomepageNavigationClick","HomepageLitepaperLink")}})),document.querySelectorAll("#arcadeLink").forEach((function(t){t.onclick=function(t){e.browser.logMatomoEvent("Navigation","HomepageNavigationClick","HomepageArcadeLink")}})),document.querySelectorAll("#developersLink").forEach((function(t){t.onclick=function(t){e.browser.logMatomoEvent("Navigation","HomepageNavigationClick","HomepageDevelopersLink")}})),document.querySelectorAll(".left.desktop .logo").forEach((function(t){t.onclick=function(t){e.browser.logMatomoEvent("Navigation","HomepageNavigationClick","HeaderLogoHomepageLink")}})),document.querySelectorAll(".website-newsletter-subscribe").forEach((function(r){r.onclick=function(r){t.mre=new f(e),t.mre.render(t.app,t,f.MODES.NEWSLETTER),t.mre.attachEvents(t.app,t)}})),this.initializePrivateSaleOverlay()}},{key:"initializeTokenPage",value:function(e){document.title="SAITO ERC-20 Token Contract",e.browser.addElementToElement('<link rel="stylesheet" href="/subpagestyle/token/token.style.css" />',document.head),document.querySelector("#content").innerHTML=y(),document.querySelectorAll("#burnlink").forEach((function(e){e.onclick=function(){var e=i(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,sconfirm("WARNING: At this time the Saito Network is under active development and is subject to be reset at the team's discretion. Your Native SAITO balance will be reset in such a case.");case 3:if(!(r=e.sent)){e.next=8;break}return e.next=7,sconfirm("WARNING: It is strongly recommended that you do not burn your ERC20 SAITO at this time. If you are in need of tokens on the current SAITO network, please consider reaching out to us before proceeding to burn your ERC20 SAITO.");case 7:r=e.sent;case 8:if(!r){e.next=12;break}return e.next=11,sconfirm("Are you absolutely sure you want to know how to burn your ERC20 SAITO?");case 11:r=e.sent;case 12:r&&(window.location=document.querySelector("#burnlink").href);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))}},{key:"initializeTokenBurnPage",value:function(e){document.title="Burn SAITO Token",document.querySelector("#content").innerHTML=v()}},{key:"initializePoolsPage",value:function(e){document.title="IDO Pools",e.browser.addElementToElement('<link rel="stylesheet" href="/subpagestyle/token/pools.style.css" />',document.head),document.querySelector("#content").innerHTML=b()}},{key:"initializeWeb3Page",value:function(e){document.title="Web3.0",e.browser.addElementToElement('<link rel="stylesheet" href="/subpagestyle/web3/style.css" />',document.head),document.querySelector("#content").innerHTML=_(e)}},{key:"initializeTeamPage",value:function(e){document.title="Our Team",e.browser.addElementToElement('<link rel="stylesheet" href="/subpagestyle/team/style.css" />',document.head),document.querySelector("#content").innerHTML=w()}},{key:"initializeFAQPage",value:function(e){document.title="Frequently Asked Questions",e.browser.addElementToElement('<link rel="stylesheet" href="/subpagestyle/faq/style.css" />',document.head),document.querySelector("#content").innerHTML=x()}},{key:"initializeHowSaitoWorksPage",value:function(e){document.title="Welcome to the Saito Project",e.browser.addElementToElement('<link rel="stylesheet" href="/subpagestyle/howSaitoWorks/style.css" />',document.head),document.querySelector("#content").innerHTML=k()}},{key:"initializeHTML",value:function(e){null==this.header&&(this.header=new m(e,this)),this.header.render(e,this),this.header.attachEvents(e,this),document.querySelector(".header-icon-links")&&e.browser.prependElementToDom(document.querySelector("#header-icon-links-hidden").innerHTML,document.querySelector(".header-icon-links")),document.querySelector(".header-dropdown")&&e.browser.prependElementToDom(document.querySelector("#header-dropdown-hidden").innerHTML,document.querySelector(".header-dropdown")),document.location.pathname.startsWith("/website/tokenburn")?this.initializeTokenBurnPage(e):document.location.pathname.startsWith("/website/token")?this.initializeTokenPage(e):document.location.pathname.startsWith("/website/pools")||document.location.pathname.startsWith("/website/whitelist")?this.initializePoolsPage(e):document.location.pathname.startsWith("/website/web3")?this.initializeWeb3Page(e):document.location.pathname.startsWith("/website/team")?this.initializeTeamPage(e):document.location.pathname.startsWith("/website/faq")?this.initializeFAQPage(e):document.location.pathname.startsWith("/website/how-saito-works")?this.initializeHowSaitoWorksPage(e):this.initializeHompage(e)}},{key:"initialize",value:function(e){e.BROWSER&&this.initializeExpandSideBar()}},{key:"doPrivateSaleOverlay",value:function(){this.app.browser.parseHash(window.location.hash).private_sale&&(this.mre=new f(this.app),this.mre.render(this.app,this,f.MODES.PRIVATESALE),this.mre.attachEvents(this.app,this),window.location.hash=this.app.browser.removeFromHash(window.location.hash,"private_sale"))}},{key:"doExpandSideBar",value:function(){this.app.browser.parseHash(window.location.hash).side_bar&&(document.querySelector("#header-mini-wallet").click(),document.querySelector("#header-token-select").classList.add("pulsey"),window.location.hash=this.app.browser.removeFromHash(window.location.hash,"side_bar"))}},{key:"initializeExpandSideBar",value:function(){var e=this;window.addEventListener("hashchange",(function(){e.doExpandSideBar()}));var t=window.location.hash;window.location.hash="#",window.location.hash=t}},{key:"initializePrivateSaleOverlay",value:function(){var e=this;window.addEventListener("hashchange",(function(){e.doPrivateSaleOverlay()}));var t=window.location.hash;window.location.hash="#",window.location.hash=t}},{key:"triggerPrivateSaleOverlay",value:function(){window.location.hash=this.app.browser.modifyHash(window.location.hash,{private_sale:"1"})}},{key:"respondTo",value:function(e){if("private_sale_overlay"==e){var t={};return t.initializePrivateSaleOverlay=this.initializePrivateSaleOverlay.bind(this),t.triggerPrivateSaleOverlay=this.triggerPrivateSaleOverlay.bind(this),t}}},{key:"webServer",value:function(e,r,n){r.use("/",n.static("".concat(t,"/../../mods/website/web"))),r.use("/website/",n.static("".concat(t,"/../../mods/website/web"))),r.get("/l/:campaign/:channel/:subchannel",function(){var e=i(regeneratorRuntime.mark((function e(r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.sendFile(h.join(t+"/web/marketing/marketing.html"));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),r.get("/l/matomohelpers.js",function(){var e=i(regeneratorRuntime.mark((function e(r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.sendFile(h.join(t+"../../../mods/matomo/matomoHelpers.js"));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),r.get("/l/maketrackinglink",function(){var e=i(regeneratorRuntime.mark((function e(r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.sendFile(h.join(t+"/web/marketing/linkmakerform.html"));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),r.get("/weixin",function(){var e=i(regeneratorRuntime.mark((function e(r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.sendFile(h.join(t+"/web/weixininvite.html"));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),r.get("/subpagestyle/:subpage/:stylesheetfile",function(){var e=i(regeneratorRuntime.mark((function e(r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(r.params.stylesheetfile),n.sendFile(h.join(t+"/web/subpage/"+r.params.subpage+"/"+r.params.stylesheetfile));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),r.get("/website/*",function(){var e=i(regeneratorRuntime.mark((function e(r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.sendFile(h.join(t+"/web/subpage/index.html"));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())}}])&&o(r.prototype,n),a&&o(r,a),p}(p);e.exports=S}).call(this,"/")},function(module,exports,__webpack_require__){function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function asyncGeneratorStep(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){asyncGeneratorStep(i,n,a,o,s,"next",e)}function s(e){asyncGeneratorStep(i,n,a,o,s,"throw",e)}o(void 0)}))}}function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=_superPropBase(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var saito=__webpack_require__(5),GameTemplate=__webpack_require__(82),GameBoardSizer=__webpack_require__(1212),GameHammerMobile=__webpack_require__(1214),Wordblocks=function(_GameTemplate){_inherits(Wordblocks,_GameTemplate);var _super=_createSuper(Wordblocks),_addEventsToBoard,_calculateScore;function Wordblocks(e){var t;return _classCallCheck(this,Wordblocks),(t=_super.call(this,e)).name="Wordblocks",t.wordlist="",t.letterset={},t.mydeck={},t.score="",t.app=e,t.name="Wordblocks",t.description="Wordblocks is a word game in which two to four players score points by placing tiles bearing a single letter onto a board divided into a 15×15 grid of squares. The tiles must form words that, in crossword fashion, read left to right in rows or downward in columns, and be included in a standard dictionary or lexicon.",t.categories="Game Arcade Entertainment",t.minPlayers=2,t.maxPlayers=4,t.type="Wordgame",t.useHUD=1,t.gameboardWidth=2677,t.tileHeight=163,t.tileWidth=148,t.letters={},t.moves=[],t.firstmove=1,t.last_played_word={},_possibleConstructorReturn(t,_assertThisInitialized(t))}return _createClass(Wordblocks,[{key:"respondTo",value:function(e){if(null!=_get(_getPrototypeOf(Wordblocks.prototype),"respondTo",this).call(this,e))return _get(_getPrototypeOf(Wordblocks.prototype),"respondTo",this).call(this,e);if("arcade-carousel"==e){var t={background:"/wordblocks/img/arcade/arcade-banner-background.png",title:"Wordblocks"};return t}return null}},{key:"showTiles",value:function(){if(0!=this.game.deck.length){for(var e="",t=0;t<this.game.deck[0].hand.length;t++){var r=this.game.deck[0].cards[this.game.deck[0].hand[t]];null!=r&&(e+=this.returnTileHTML(r))}$(".tiles").html(e),$("#remainder").html("DECK: "+this.game.deck[0].crypt.length)}}},{key:"initializeHTML",value:function(e){var t=this;this.hud.mode=0,_get(_getPrototypeOf(Wordblocks.prototype),"initializeHTML",this).call(this,e),this.app.modules.respondTo("chat-manager").forEach((function(e){e.respondTo("chat-manager").render(t.app,t)})),this.menu.addMenuOption({text:"Game",id:"game-game",class:"game-game",callback:function(e,t){t.menu.showSubMenu("game-game")}}),this.menu.addSubMenuOption("game-game",{text:"How to Play",id:"game-intro",class:"game-intro",callback:function(e,t){t.menu.hideSubMenus(),t.overlay.showOverlay(t.app,t,t.returnRulesOverlay())}}),this.menu.addSubMenuOption("game-game",{text:"Stats",id:"game-stats",class:"game-stats",callback:function(e,t){t.menu.hideSubMenus(),t.overlay.showOverlay(t.app,t,t.returnStatsOverlay())}}),this.menu.addSubMenuOption("game-game",{text:"Exit",id:"game-exit",class:"game-exit",callback:function(e,t){window.location.href="/arcade"}});for(var r=0,n=0,a=0;a<this.app.modules.mods.length;a++)if("chat"===this.app.modules.mods[a].slug)for(var i=0;i<this.game.players.length;i++)this.game.players[i]!=this.app.wallet.returnPublicKey()&&function(){0==r&&(t.menu.addMenuOption({text:"Chat",id:"game-chat",class:"game-chat",callback:function(e,t){t.menu.showSubMenu("game-chat")}}),r=1),0==n&&(t.menu.addSubMenuOption("game-chat",{text:"Community",id:"game-chat-community",class:"game-chat-community",callback:function(e,t){t.menu.hideSubMenus(),c.mute_community_chat=0,c.sendEvent("chat-render-request",{}),c.openChatBox()}}),n=1);var e=[t.game.players[i],t.app.wallet.returnPublicKey()].sort(),o=t.app.crypto.hash(e.join("_")),s="Player "+(i+1),c=t.app.modules.mods[a];t.menu.addSubMenuOption("game-chat",{text:s,id:"game-chat-"+(i+1),class:"game-chat-"+(i+1),callback:function(t,r){r.menu.hideSubMenus(),c.createChatGroup(e,s),c.openChatBox(o),c.sendEvent("chat-render-request",{}),c.saveChat()}})}();this.menu.addMenuIcon({text:'<i class="fa fa-window-maximize" aria-hidden="true"></i>',id:"game-menu-fullscreen",callback:function(e,t){t.menu.hideSubMenus(),e.browser.requestFullscreen()}}),this.menu.render(e,this),this.menu.attachEvents(e,this),this.hud.render(e,this);try{e.browser.isMobileBrowser(navigator.userAgent)?(GameHammerMobile.render(this.app,this),GameHammerMobile.attachEvents(this.app,this,".gameboard")):(GameBoardSizer.render(this.app,this),GameBoardSizer.attachEvents(this.app,this,".gameboard"),$("#gameboard").draggable())}catch(e){}}},{key:"returnRulesOverlay",value:function(){return'<div class="intro">\n      <h1>Welcome to Wordblocks</h1>\n      <p>Game play is similar to the classic crossword puzzle boardgame. Players take turns spelling words using the seven letters in their tile rack and available space on the game board. The game ends when one player finishes all the letters in their rack and there are no remaining tiles to draw.</p>\n      <p>Players may discard any number of tiles from their rack in lieu of playing a word.</p>\n      <h2>Scoring</h2>\n      <p>Each letter is worth the number of points indicated on the tile. The score for the word is the sum of point values of its letters, which may be affected by playing the word over bonus spaces on the board. </p>\n      <p>If you use all 7 tiles in one play, you receive 10 additional points to the letter score and a +1 multiple on the overall word score.</p>\n      </div>'}},{key:"returnMath",value:function(e){var t,r=0,n='<div class="score-overlay"><table>\n              <thead><tr><td>Word</td><td>Calculation</td><td>Points</td></tr></thead><tbody>',a=_createForOfIteratorHelper(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;n+="<tr><td>".concat(i.word,"</td><td>").concat(i.math,"</td><td>").concat(i.score,"</td></tr>"),r+=i.score}}catch(e){a.e(e)}finally{a.f()}return n+='</tbody><tfoot><tr><td colspan="3"><hr></td></tr><tr><td>Total:</td><td></td><td>'.concat(r,"</td></tr></tfoot></table></div>")}},{key:"returnStatsOverlay",value:function(){for(var e='<div class="stats-overlay"><table cellspacing="10px" rowspacing="10px"><tr><th>Round</th>',t=0;t<this.game.opponents.length+1;t++)e+='<th colspan="2">Player '.concat(t+1,"</th>");var r=new Array(this.game.opponents.length+1);r.fill(0),console.log(this.game.opponents);for(var n=0;n<this.game.words_played[0].length;n++){e+="</tr><tr><td>".concat(n+1,"</td>");for(var a=0;a<this.game.opponents.length+1;a++)null!=this.game.words_played[a][n]&&(e+="<td>"+this.game.words_played[a][n].word+"</td><td>"+this.game.words_played[a][n].score+"</td>",r[a]+=this.game.words_played[a][n].score)}console.log(r),e+='</tr><tr><td colspan="10"><hr></td></tr><tfoot><tr><td>Totals</td>';for(var i=0,o=r;i<o.length;i++){var s=o[i];e+='<td colspan="2">'.concat(s,"</td>")}return e+="</tr></tfoot></table></div>"}},{key:"initializeGame",value:function initializeGame(game_id){var _this3=this;this.updateStatus("loading game..."),this.loadGame(game_id),""!=this.game.status&&this.updateStatus(this.game.status);var dictionary=this.game.options.dictionary,durl="/wordblocks/dictionaries/"+dictionary+"/"+dictionary+".js",xhr=new XMLHttpRequest;xhr.open("GET",durl,!1);try{xhr.send(),200!=xhr.status?salert("Network issues downloading dictionary -- ".concat(durl)):(eval(xhr.response),this.wordlist=wordlist)}catch(e){salert("Network issues downloading dictionary")}if(0==this.game.deck.length&&1==this.game.step.game){this.updateStatus("Generating the Game"),1==this.game.opponents.length&&(this.game.queue.push("READY"),this.game.queue.push("DEAL\t1\t2\t7"),this.game.queue.push("DEAL\t1\t1\t7"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1")),2==this.game.opponents.length&&(this.game.queue.push("READY"),this.game.queue.push("DEAL\t1\t3\t7"),this.game.queue.push("DEAL\t1\t2\t7"),this.game.queue.push("DEAL\t1\t1\t7"),this.game.queue.push("DECKENCRYPT\t1\t3"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t3"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1")),3==this.game.opponents.length&&(this.game.queue.push("READY"),this.game.queue.push("DEAL\t1\t4\t7"),this.game.queue.push("DEAL\t1\t3\t7"),this.game.queue.push("DEAL\t1\t2\t7"),this.game.queue.push("DEAL\t1\t1\t7"),this.game.queue.push("DECKENCRYPT\t1\t4"),this.game.queue.push("DECKENCRYPT\t1\t3"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t4"),this.game.queue.push("DECKXOR\t1\t3"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1"));var tmp_json=JSON.stringify(this.returnDeck());this.game.queue.push("DECK\t1\t"+tmp_json)}if(1!=this.game.initializing){resizeBoard=function(e){},responsive=function(){},this.showTiles();var html="",am_i_done=0,players=1;null!=this.game.opponents&&(players=this.game.opponents.length+1);var score=[];if(null==this.game.score){this.game.score=[];for(var _i3=0;_i3<players;_i3++)this.game.score[_i3]=0}if(null==this.game.words_played){this.game.words_played=[];for(var _i4=0;_i4<players;_i4++)this.game.words_played[_i4]=[]}for(var op=0,_i5=0;_i5<players;_i5++){var this_player=_i5+1;if(this.game.player==this_player)html+='\n          <div class="player">\n            <span class="player_name">Player '.concat(this.game.player,' (you)</span>\n            <span id="score_').concat(this_player,'"> ').concat(this.game.score[_i5]," </span>\n          </div>\n        ");else if(0!=this.game.player){var opponent=this.game.opponents[op];opponent=this.app.keys.returnIdentifierByPublicKey(opponent,!0),op++,html+='\n          <div class="player">\n            <span class="player_name">'.concat(opponent.substring(0,16),'</span>\n            <span id="score_').concat(this_player,'"> ').concat(this.game.score[_i5]," </span>\n          </div>\n        ")}}if(1==this.browser_active)try{$(".score").html(html)}catch(e){}if(this.game.target==this.game.player?(this.updateStatusWithTiles('YOUR GO: click board to place or <span class="link tosstiles">discard</span>.'),this.enableEvents()):(this.updateStatusWithTiles("Waiting for Player ".concat(this.game.target," to move.")),this.disableEvents()),this.letters=this.returnLetters(),resizeBoard(this.app),null==this.game.board)this.game.board=this.returnBoard();else for(var i in this.game.board){var divname="#"+i,letter=this.game.board[i].letter;if(this.addTile($(divname),letter),"_"!=letter&&""!=letter)try{$(divname).addClass("set")}catch(e){}}for(var _i6=1;_i6<16;_i6++)for(var k=1;k<16;k++){var _boardslot=_i6+"_"+k;"_"!=this.game.board[_boardslot].letter&&(this.firstmove=0)}this.game.target==this.game.player&&this.addEventsToBoard();try{$("#shuffle").on("click",(function(){for(var e=$("#tiles").children.length;e>=0;e--)$("#tiles")[0].appendChild($("#tiles")[0].childNodes[Math.random()*e|0])})),$("#tiles").sortable(),$("#tiles").disableSelection(),$(window).resize((function(){resizeBoard()}));var element=document.getElementById("gameboard");$("#game_status").on("click",(function(){$(".log").hide(),_this3.app.browser.isMobileBrowser(navigator.userAgent)&&window.matchMedia("(orientation: portrait)").matches||window.innerHeight>700?($("#sizer").switchClass("fa-caret-up","fa-caret-down"),$("#hud").switchClass("short","tall",150)):($("#sizer").switchClass("fa-caret-left","fa-caret-right"),$("#hud").switchClass("narrow","wide",150)),$(".hud_menu_overlay").hide(),$(".status").show()}))}catch(e){}}}},{key:"updateStatusWithTiles",value:function(e){try{for(var t,r="",n=0;n<this.game.deck[0].hand.length;n++)r+=this.returnTileHTML(this.game.deck[0].cards[this.game.deck[0].hand[n]].name);if(this.last_played_word.word){var a=this.game.player===this.last_played_word.player?"You":"Player ".concat(this.last_played_word.player);t=this.last_played_word.score>0?"".concat(a," played ").concat(this.last_played_word.word," for: ").concat(this.last_played_word.score," points (total: ").concat(this.last_played_word.totalscore,")"):"".concat(a,' discarded the tiles <span style="text-transform:uppercase;">[').concat(this.last_played_word.word.split("").join(),"</span>]")}else t="...";var i='\n      <div class="hud-status-update-message">'.concat(e,'</div>\n      <div class="status_container">\n        <div class="rack" id="rack">\n          <div class="tiles" id="tiles">\n            ').concat(r,'\n          </div>\n        </div>\n        <div class="subrack" id="subrack">\n          <div class="rack-controls">\n            <div>Shuffle: <img id="shuffle" class="shuffle" src="/wordblocks/img/reload.png"></div>\n            <div id="remainder" class="remainder">Remaining Tiles: ').concat(this.game.deck[0].crypt.length,'</div>\n        </div>\n        <div class="lastmove" id="lastmove">').concat(t,'</div>\n        <div class="score" id="score"></div>\n        </div>\n      </div\n    ');this.updateStatus(i),this.calculateScore(),this.enableEvents()}catch(e){console.log(e)}}},{key:"calculateScore",value:(_calculateScore=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,r,n,a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",r=1,null!=this.game.opponents&&(r=this.game.opponents.length+1),null==this.game.score)for(this.game.score=[],n=0;n<r;n++)this.game.score[n]=0;for(a=0,i=0;i<r;i++)o=i+1,this.game.player==o?t+='\n          <div class="player">\n            <span class="player_name">Player '.concat(this.game.player,' (you)</span>\n            <span class="player_score" id="score_').concat(o,'"> ').concat(this.game.score[i]," </span>\n          </div>\n        "):(s=this.game.opponents[a],s=this.app.keys.returnIdentifierByPublicKey(s,!0),a++,t+='\n          <div class="player">\n            <span class="player_name">'.concat(s.substring(0,16),'</span>\n            <span class="player_score" id="score_').concat(o,'"> ').concat(this.game.score[i]," </span>\n          </div>\n        "));1==this.browser_active&&(document.querySelector(".score").innerHTML=t);case 9:case"end":return e.stop()}}),e,this)}))),function(){return _calculateScore.apply(this,arguments)})},{key:"returnTileHTML",value:function(e){var t="",r=this.returnLetters();return r[e]&&(t='<div class="tile '+e+" sc"+r[e].score+'">'+e+"</div>"),t}},{key:"addTile",value:function(e,t){"_"!==t&&(e.find(".bonus").css("display","none"),e.append(this.returnTileHTML(t)))}},{key:"disableEvents",value:function(){1==this.browser_active&&$(".slot").off()}},{key:"enableEvents",value:function(){1==this.browser_active&&this.addEventsToBoard()}},{key:"addEventsToBoard",value:(_addEventsToBoard=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.browser_active){e.next=2;break}return e.abrupt("return");case 2:t=this;try{$(".tosstiles").off(),$(".tosstiles").on("click",_asyncToGenerator(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sprompt("Which tiles do you want to discard?");case 2:tiles=e.sent,tiles&&(salert("Tossed: "+tiles),t.removeTilesFromHand(tiles),t.addMove("turn\t"+t.game.player+"\t"+tiles),r=7,(r-=t.game.deck[0].hand.length)>t.game.deck[0].crypt.length&&(r=t.game.deck[0].crypt.length),r>0&&t.addMove("DEAL\t1\t"+t.game.player+"\t"+r),t.showTiles(),t.endTurn());case 4:case"end":return e.stop()}}),e)})))),$(".slot").off(),$(".slot").on("mousedown",(function(e){xpos=e.clientX,ypos=e.clientY})),$(".slot").on("mouseup",(function(e){if(!(Math.abs(xpos-e.clientX)>4||Math.abs(ypos-e.clientY)>4)){var r='\n        <div class="tile-placement-controls">\n          <span class="action" id="horizontally"><i class="fas fa-arrows-alt-h"></i> horizontally</span>\n          <span class="action" id="vertically"><i class="fas fa-arrows-alt-v"></i> vertically</span>\n          <span class="action" id="cancel"><i class="far fa-window-close"></i> cancel</span>\n        </div>',n=$(this).attr("id").split("_"),a=n[0],i=n[1],o="",s="",c=t.app.browser.isMobileBrowser(navigator.userAgent)?25:55,l=t.app.browser.isMobileBrowser(navigator.userAgent)?25:55,u=t.app.browser.isMobileBrowser(navigator.userAgent)?135:155,d=t.app.browser.isMobileBrowser(navigator.userAgent)?135:155,h=$(this).offset().left+c,p=$(this).offset().top+l;if(i>8&&(h-=u),a>8&&(p-=d),$(".tile-placement-controls").remove(),t.app.browser.isMobileBrowser(navigator.userAgent)){for(var f="",m=0;m<t.game.deck[0].hand.length;m++)f+=t.returnTileHTML(t.game.deck[0].cards[t.game.deck[0].hand[m]].name);var g='\n        <div class="rack" id="rack">\n          <div class="tiles" id="tiles">\n            '.concat(f,'\n          </div>\n          <img id="shuffle" class="shuffle" src="/wordblocks/img/reload.png">\n        </div>\n        ').concat(r,"\n        ");$(".status").html(g),t.enableEvents()}else $("body").append(r),$(".tile-placement-controls").addClass("active-status"),$(".tile-placement-controls").css({position:"absolute",top:p,left:h});$(".action").off(),$(".action").on("click",_asyncToGenerator(regeneratorRuntime.mark((function e(){var r,n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("horizontally"==(r=$(this).attr("id"))&&(o="horizontal"),"vertically"==r&&(o="vertical"),"cancel"!=r){e.next=8;break}return $(".action").off(),$(".tile-placement-controls").remove(),t.updateStatusWithTiles('Click on the board to place a letter from that square, or <span class="link tosstiles">discard tiles</span> if you cannot move.'),e.abrupt("return");case 8:return e.next=10,sprompt("Provide your word:");case 10:if(!(s=e.sent)){e.next=40;break}if(s=s.toUpperCase(),$(".tile-placement-controls").html(""),$(".status").html("Processing your turn."),1!=t.isEntryValid(s,o,i,a)){e.next=39;break}if(n=0,t.addWordToBoard(s,o,i,a),!((n=t.scorePlay(s,t.game.player,o,i,a))<=1)){e.next=24;break}t.removeWordFromBoard(s,o,i,a),t.updateStatusWithTiles('Try again! Click on the board to place a letter from that square, or\n                <span class="link tosstiles">discard tiles</span> if you cannot move.'),e.next=37;break;case 24:if(t.game.words_played[parseInt(t.game.player)-1].push({word:s,score:n}),t.addMove("place\t"+s+"\t"+t.game.player+"\t"+i+"\t"+a+"\t"+o),t.discardTiles(s,o,i,a),t.finalizeWord(s,o,i,a),t.addScoreToPlayer(t.game.player,n),c=7,(c-=t.game.deck[0].hand.length)>t.game.deck[0].crypt.length&&(c=t.game.deck[0].crypt.length),c>0&&t.addMove("DEAL\t1\t"+t.game.player+"\t"+c),1!=t.checkForEndGame()){e.next=35;break}return e.abrupt("return");case 35:$("#remainder").html("DECK: "+t.game.deck[0].crypt.length),t.endTurn();case 37:e.next=40;break;case 39:
//!isEntryValid
t.updateStatusWithTiles('Word is not valid, try again! Click on the board to place a word, or\n              <span class="link tosstiles">discard tiles</span>');case 40:case"end":return e.stop()}}),e,this)}))))}})),$("#lastmove").off(),$("#lastmove").on("click",(function(){t.overlay.showOverlay(t.app,t,t.returnMath(t.last_played_word.play))})),$("#shuffle").on("click",(function(){for(var e=$("#tiles").children.length;e>=0;e--)$("#tiles")[0].appendChild($("#tiles")[0].childNodes[Math.random()*e|0])})),$("#tiles").sortable(),$("#tiles").disableSelection()}catch(e){}case 4:case"end":return e.stop()}}),e,this)}))),function(){return _addEventsToBoard.apply(this,arguments)})},{key:"removeTilesFromHand",value:function(e){for(;e.length>0;){var t=e[0];t=t.toUpperCase();for(var r=0;r<this.game.deck[0].hand.length;r++)this.game.deck[0].cards[this.game.deck[0].hand[r]].name==t&&(this.game.deck[0].hand.splice(r,1),r=this.game.deck[0].hand.length);e=e.length>1?e.substring(1):""}}},{key:"isEntryValid",value:function(e,t,r,n){var a=1,i=JSON.parse(JSON.stringify(this.game.deck[0].hand));if(r=parseInt(r),n=parseInt(n),1==this.firstmove){if("vertical"==t){if(6!=r&&10!=r)return salert("First Word must be placed to cross a Star"),0;var o=n,s=n+e.length-1;if(!(o<=6&&s>=6||o<=10&&s>=6))return salert("First Word must be long enough to cross a Star"),0}if("horizontal"==t){if(6!=n&&10!=n)return salert("First Word must be placed to cross a Star"),0;var c=r,l=r+e.length-1;if(!(c<=6&&l>=6||c<=10&&l>=6))return salert("First Word must be long enough to cross a Star"),0}}else{var u,d,h=0,p=Math.max(1,r-1),f=Math.max(1,n-1);"horizontal"==t?(u=Math.min(15,r+e.length+1),d=Math.min(15,n+1)):(u=Math.min(15,r+1),d=Math.min(15,n+e.length+1));for(var m=p;m<=u;m++)for(var g=f;g<=d;g++){var y=g+"_"+m;if(0==this.game.board[y].fresh){h=1;break}}if(0==h)return salert("Word does not cross or touch an existing word."),0}for(var v=0;v<e.length;v++){var b="",_=e[v].toUpperCase();if("horizontal"==t&&(b=n+"_"+(r+v),r+v>15))return salert("Word must fit on board!"),0;if("vertical"==t&&(b=n+v+"_"+r,n+v>15))return salert("Word must fit on board!"),0;if("_"!=this.game.board[b].letter)this.game.board[b].letter!=_&&(a=0);else{for(var w=0,x=0;x<i.length;x++)this.game.deck[0].cards[i[x]].name==_&&(i.splice(x,1),w=1,x=i.length+1);if(0==w)return salert("INVALID: letter not in hand: "+_),0}}return 0==a&&salert("This is an invalid placement!"),a}},{key:"finalizeWord",value:function(e,t,r,n){r=parseInt(r),n=parseInt(n);for(var a=0;a<e.length;a++){var i="";e[a].toUpperCase();"horizontal"==t&&(i=n+"_"+(r+a)),"vertical"==t&&(i=n+a+"_"+r),1==this.game.board[i].fresh&&(this.game.board[i].fresh=0),$("#"+i).addClass("set")}}},{key:"discardTiles",value:function(e,t,r,n){r=parseInt(r),n=parseInt(n);for(var a=0;a<e.length;a++){var i="";e[a].toUpperCase();"horizontal"==t&&(i=n+"_"+(r+a)),"vertical"==t&&(i=n+a+"_"+r),1==this.game.board[i].fresh&&this.removeTilesFromHand(e[a])}}},{key:"addWordToBoard",value:function(e,t,r,n){r=parseInt(r),n=parseInt(n);for(var a=0;a<e.length;a++){var i,o="",s=e[a].toUpperCase();"horizontal"==t&&(o=n+"_"+(r+a)),"vertical"==t&&(o=n+a+"_"+r),i="#"+o,"_"!=this.game.board[o].letter?this.game.board[o].letter!=s&&(console.log(this.game.board[o].letter,s),this.game.board[o].letter=s,this.addTile($(i),s)):(this.game.board[o].letter=s,this.addTile($(i),s))}}},{key:"removeWordFromBoard",value:function(e,t,r,n){r=parseInt(r),n=parseInt(n);for(var a=0;a<e.length;a++){var i,o="";e[a].toUpperCase();"horizontal"==t&&(o=n+"_"+(r+a)),"vertical"==t&&(o=n+a+"_"+r),i="#"+o,1!=$(i).hasClass("set")&&(this.game.board[o].letter="_",$(i).find(".tile").remove(),$(i).find(".bonus").css("display","block"))}}},{key:"returnBoard",value:function(){for(var e={},t=1;t<=15;t++)for(var r=1;r<=15;r++){e[t+"_"+r]={letter:"_",fresh:1}}return e}},{key:"returnDeck",value:function(){var e=this.game.options.dictionary;if("twl"!==e&&"sowpods"!==e||(this.mydeck={1:{name:"A"},2:{name:"A"},3:{name:"A"},4:{name:"A"},5:{name:"A"},6:{name:"A"},7:{name:"A"},8:{name:"A"},9:{name:"A"},10:{name:"B"},11:{name:"B"},12:{name:"C"},13:{name:"C"},14:{name:"D"},15:{name:"D"},16:{name:"D"},17:{name:"D"},18:{name:"E"},19:{name:"E"},20:{name:"E"},21:{name:"E"},22:{name:"E"},23:{name:"E"},24:{name:"E"},25:{name:"E"},26:{name:"E"},27:{name:"E"},28:{name:"E"},29:{name:"E"},30:{name:"F"},41:{name:"F"},42:{name:"G"},43:{name:"G"},44:{name:"G"},45:{name:"H"},46:{name:"H"},47:{name:"I"},48:{name:"I"},49:{name:"I"},50:{name:"I"},51:{name:"I"},52:{name:"I"},53:{name:"I"},54:{name:"I"},55:{name:"I"},56:{name:"J"},57:{name:"K"},58:{name:"L"},59:{name:"L"},60:{name:"L"},61:{name:"L"},62:{name:"M"},63:{name:"M"},64:{name:"N"},65:{name:"N"},66:{name:"N"},67:{name:"N"},68:{name:"N"},69:{name:"N"},70:{name:"O"},71:{name:"O"},72:{name:"O"},73:{name:"O"},74:{name:"O"},75:{name:"O"},76:{name:"O"},77:{name:"O"},78:{name:"P"},79:{name:"P"},80:{name:"Q"},81:{name:"R"},82:{name:"R"},83:{name:"R"},84:{name:"R"},85:{name:"R"},86:{name:"R"},87:{name:"S"},88:{name:"S"},89:{name:"S"},90:{name:"S"},91:{name:"T"},92:{name:"T"},93:{name:"T"},94:{name:"T"},95:{name:"T"},96:{name:"T"},97:{name:"U"},98:{name:"U"},99:{name:"U"},100:{name:"U"},101:{name:"V"},102:{name:"V"},103:{name:"W"},104:{name:"W"},105:{name:"X"},106:{name:"U"},107:{name:"Y"},108:{name:"Y"},109:{name:"Z"}}),"fise"!==e&&"tagalog"!==e||(this.mydeck={1:{name:"A"},2:{name:"A"},3:{name:"A"},4:{name:"A"},5:{name:"A"},6:{name:"A"},7:{name:"A"},8:{name:"A"},9:{name:"A"},10:{name:"A"},11:{name:"A"},12:{name:"A"},13:{name:"B"},14:{name:"B"},15:{name:"C"},16:{name:"C"},17:{name:"C"},18:{name:"C"},19:{name:"C"},20:{name:"D"},21:{name:"D"},22:{name:"D"},23:{name:"D"},24:{name:"D"},25:{name:"E"},26:{name:"E"},27:{name:"E"},28:{name:"E"},29:{name:"E"},30:{name:"E"},31:{name:"E"},32:{name:"E"},33:{name:"E"},34:{name:"E"},35:{name:"E"},36:{name:"E"},37:{name:"E"},38:{name:"F"},39:{name:"G"},40:{name:"G"},41:{name:"H"},42:{name:"H"},43:{name:"H"},44:{name:"I"},45:{name:"I"},46:{name:"I"},47:{name:"I"},48:{name:"I"},49:{name:"I"},50:{name:"J"},51:{name:"L"},52:{name:"L"},53:{name:"L"},54:{name:"L"},55:{name:"L"},56:{name:"L"},57:{name:"M"},58:{name:"M"},59:{name:"N"},60:{name:"N"},61:{name:"N"},62:{name:"N"},63:{name:"N"},64:{name:"Ñ"},65:{name:"Ñ"},66:{name:"O"},67:{name:"O"},68:{name:"O"},69:{name:"O"},70:{name:"O"},71:{name:"O"},72:{name:"O"},73:{name:"O"},74:{name:"O"},75:{name:"O"},76:{name:"P"},77:{name:"P"},78:{name:"Q"},79:{name:"R"},80:{name:"R"},81:{name:"R"},82:{name:"R"},83:{name:"R"},84:{name:"R"},85:{name:"R"},86:{name:"S"},87:{name:"S"},88:{name:"S"},89:{name:"S"},90:{name:"S"},91:{name:"S"},92:{name:"S"},93:{name:"T"},94:{name:"T"},95:{name:"T"},96:{name:"T"},97:{name:"U"},98:{name:"U"},99:{name:"U"},100:{name:"U"},101:{name:"U"},102:{name:"V"},103:{name:"X"},104:{name:"Y"},105:{name:"Z"}}),"test"===e);return this.mydeck}},{key:"returnLetters",value:function(){var e=this.game.options.dictionary;if("twl"!==e&&"sowpods"!==e||(this.letterset={A:{score:1},B:{score:3},C:{score:2},D:{score:2},E:{score:1},F:{score:2},G:{score:2},H:{score:1},I:{score:1},J:{score:8},K:{score:4},L:{score:2},M:{score:2},N:{score:1},O:{score:1},P:{score:2},Q:{score:10},R:{score:1},S:{score:1},T:{score:1},U:{score:2},V:{score:3},W:{score:2},X:{score:8},Y:{score:2},Z:{score:10}}),"fise"!==e&&"tagalog"!==e||(this.letterset={A:{score:1},B:{score:2},C:{score:3},D:{score:2},E:{score:1},F:{score:4},G:{score:2},H:{score:4},I:{score:1},J:{score:8},L:{score:1},M:{score:3},N:{score:1},"Ñ":{score:8},O:{score:1},P:{score:3},Q:{score:6},R:{score:2},S:{score:1},T:{score:1},U:{score:1},V:{score:4},X:{score:8},Y:{score:4},Z:{score:10}}),"test"===e);return this.letterset}},{key:"checkWord",value:function(e){return!(e.length>=1&&void 0!==this.wordlist)||(!(this.wordlist.indexOf(e.toLowerCase())<=0)||(salert(e+" is not a playable word."),!1))}},{key:"returnBonus",value:function(e){return"1_1"==e||"1_15"==e||"3_8"==e||"8_3"==e||"8_13"==e||"13_8"==e||"15_1"==e||"15_15"==e?"3L":"2_2"==e||"2_14"==e||"8_8"==e||"14_2"==e||"14_14"==e?"3W":"1_5"==e||"1_11"==e||"3_4"==e||"3_12"==e||"4_3"==e||"4_13"==e||"5_8"==e||"5_1"==e||"5_15"==e||"8_5"==e||"8_11"==e||"11_1"==e||"11_8"==e||"11_15"==e||"12_3"==e||"12_13"==e||"13_4"===e||"13_12"===e||"15_5"==e||"15_11"==e?"2L":"1_8"==e||"4_6"==e||"4_10"==e||"6_4"==e||"6_12"==e||"8_1"==e||"8_15"==e||"10_4"==e||"10_12"==e||"12_6"==e||"12_10"==e||"15_8"==e?"2W":""}},{key:"getWordScope",value:function(e,t){for(var r,n=e,a=e,i=parseInt(e);i>=1&&(r=t.replace("#",i),"_"!=this.game.board[r].letter);i--)n=i;for(var o=parseInt(e);o<=15&&(r=t.replace("#",o),"_"!=this.game.board[r].letter);o++)a=o;return{start:n,end:a}}},{key:"scoreWord",value:function(e,t,r){for(var n=0,a=1,i="",o=0,s="",c=e;c<=t;c++){boardslot=r.replace("#",c);var l=1;if(1==this.game.board[boardslot].fresh){switch(this.returnBonus(boardslot)){case"3W":a*=3;break;case"2W":a*=2;break;case"3L":l=3;break;case"2L":l=2}n+=1}else touchesWord=1;var u=this.game.board[boardslot].letter;i+=u,o+=this.letters[u].score*l,s+=l>1?" + ".concat(this.letters[u].score," x").concat(l):" + "+this.letters[u].score}return this.checkWord(i)?(7==n&&(o+=10,a+=1,s+=" +10(!)"),o*=a,s=s.substring(3),a>1&&(s="("+s+") x "+a),console.log("word:",i,"score:",o),{word:i,score:o,math:s}):-1}},{key:"scorePlay",value:function(e,t,r,n,a){var i,o="horizontal"==r?n:a,s="horizontal"==r?a:n,c="horizontal"==r?s+"_#":"#_"+s;console.log(o,s,c);var l=this.getWordScope(o,c),u=this.scoreWord(l.start,l.end,c);if(-1==u)return-1;console.log(r,l,u);for(var d=new Array(u),h=u.score,p=l.start;p<=l.end;p++)if(i=c.replace("#",p),1==this.game.board[i].fresh){var f=c.replace(s,"@").replace("#",p).replace("@","#"),m=this.getWordScope(s,f);if(m.start!=m.end){if(console.log(s,f,m),-1==(u=this.scoreWord(m.start,m.end,f)))return-1;d.push(u),h+=u.score}}return this.firstmove=0,console.log(d),this.last_played_word={player:t,word:d[0].word,score:d[0].score,totalscore:h,play:d},h}},{key:"handleGameLoop",value:function(){var e=this;if(this.showTiles(),this.game.queue.length>0){e.saveGame(e.game.id);var t=this.game.queue.length-1,r=this.game.queue[t].split("\t"),n=1;if("gameover"===r[0]){for(var a=0,i=0,o=0;o<e.game.score.length;o++)e.game.score[o]>a&&(a=e.game.score[o],i=o);for(var s=0;s<e.game.score.length;s++)s!=i&&e.game.score[s]==e.game.score[i]&&(i=-1);if(e.game.winner=i+1,e.saveGame(e.game.id),1==e.browser_active){this.disableEvents();var c="Game Over -- Player ".concat(e.game.winner," Wins!");i<0&&(c="It's a tie! Well done everyone!"),e.updateStatusWithTiles(c),e.updateLog(c),this.game.winner==this.game.player&&this.resignGame()}return this.game.queue.splice(this.game.queue.length-1,1),0}if("endgame"===r[0])return this.game.queue.splice(this.game.queue.length-1,1),this.addMove("gameover"),1;if("place"===r[0]){var l=r[1],u=r[2],d=r[3],h=r[4],p=r[5],f=0;if(u!=e.game.player&&(this.addWordToBoard(l,p,d,h),f=this.scorePlay(l,u,p,d,h),this.finalizeWord(l,p,d,h),this.addScoreToPlayer(u,f),this.game.words_played[parseInt(u)-1].push({word:l,score:f})),1==e.game.over)return;if(e.game.player==e.returnNextPlayer(u)){if(1==e.checkForEndGame())return;e.updateStatusWithTiles('YOUR GO: click board to place or <span class="link tosstiles">discard</span>.'),e.enableEvents()}else e.updateStatusWithTiles("Player "+e.returnNextPlayer(u)+"'s turn"),e.disableEvents();return this.game.queue.splice(this.game.queue.length-1,1),1}if("turn"===r[0]){if(0==this.game.player)return this.game.queue.push("OBSERVER_CHECKPOINT"),this.game.queue.splice(this.game.queue.length-1,1),1;if(1==e.checkForEndGame())return;var m=r[1],g=r[2];return e.last_played_word={player:m,word:g,score:0},e.game.words_played[parseInt(m)-1].push({word:"---",score:0}),e.game.player==e.returnNextPlayer(m)?(e.updateStatusWithTiles('YOUR GO: click on board to place tiles, or <span class="link tosstiles">discard</span>.'),e.enableEvents()):(e.updateStatusWithTiles("Player "+e.returnNextPlayer(m)+"'s turn"),e.disableEvents()),this.game.queue.splice(this.game.queue.length-1,1),1}if(0==n)return 0}return 1}},{key:"checkForEndGame",value:function(){return 0==this.game.deck[0].hand.length&&0==this.game.deck[0].crypt.length?(this.addMove("endgame"),this.endTurn(),1):0}},{key:"addScoreToPlayer",value:function(e,t){if(0!=this.browser_active){var r="#score_"+e;this.game.score[e-1]=this.game.score[e-1]+t,$(r).html(parseInt($(r).html())+t)}}},{key:"addMove",value:function(e){this.moves.push(e)}},{key:"endTurn",value:function(){this.updateStatusWithTiles("Waiting for information from peers....");var e={};e.target=this.returnNextPlayer(this.game.player),this.game.turn=this.moves,this.moves=[],this.sendMessage("game",e)}},{key:"returnGameOptionsHTML",value:function(){var e="";return this.app.config&&"DEV"==this.app.config.currentEnv&&(e='<option value="test">Test Dictionary</option>'),'\n          <label for="dictionary">Dictionary:</label>\n          <select name="dictionary">\n            <option value="sowpods" title="A combination of the Official Scrabble Player Dictionary and Official Scrabble Words" selected>English: SOWPODS</option>\n            <option value="twl" title="Scrabble Tournament Word List">English: TWL06</option>\n            <option value="fise">Spanish: FISE</option>\n            <option value="tagalog">Tagalog</option>\n            '.concat(e,'\n          </select>\n\n          <label for="observer_mode">Observer Mode:</label>\n          <select name="observer">\n            <option value="enable" selected>enable</option>\n            <option value="disable">disable</option>\n          </select>\n\n\n          <div id="game-wizard-advanced-return-btn" class="game-wizard-advanced-return-btn button">accept</div>\n\n          ')}}]),Wordblocks}(GameTemplate);module.exports=Wordblocks},function(e,t,r){"use strict";r.r(t),r.d(t,"hash",(function(){return p})),r.d(t,"deriveKey",(function(){return f})),r.d(t,"keyedHash",(function(){return m})),r.d(t,"BrowserHasher",(function(){return w})),r.d(t,"createHash",(function(){return x})),r.d(t,"createKeyed",(function(){return k})),r.d(t,"defaultHashLength",(function(){return n})),r.d(t,"inputToArray",(function(){return a})),r.d(t,"maxHashBytes",(function(){return g})),r.d(t,"BaseHashReader",(function(){return y})),r.d(t,"BaseHash",(function(){return v})),r.d(t,"using",(function(){return b}));const n=32,a=e=>e instanceof Uint8Array?e:new Uint8Array(e),i=new TextDecoder,o={base64:e=>btoa(String.fromCharCode(...e)),hex:e=>{let t="";for(const r of e)r<16&&(t+="0"),t+=r.toString(16);return t},utf8:e=>i.decode(e)},s=e=>{const t=o[e];if(!t)throw new Error("Unknown encoding "+e);return t};class c extends Uint8Array{equals(e){if(!(e instanceof Uint8Array))return!1;if(e.length!==this.length)return!1;let t=0;for(let r=0;r<this.length;r++)t|=this[r]^e[r];return 0===t}toString(e="hex"){return s(e)(this)}}let l;const u=()=>{if(!l)throw new Error("BLAKE3 webassembly not loaded. Please import the module via `blake3/browser` or `blake3/browser-async`");return l},d=new TextEncoder,h=e=>a("string"==typeof e?d.encode(e):e);function p(e,{length:t=n}={}){const r=new c(t);return u().hash(h(e),r),r}function f(e,t,{length:r=n}={}){const a=u().create_derive(e);a.update(h(t));const i=new c(r);return a.digest(i),i}function m(e,t,{length:r=n}={}){if(32!==e.length)throw new Error("key provided to keyedHash must be 32 bytes, got "+e.length);const a=u().create_keyed(e);a.update(h(t));const i=new c(r);return a.digest(i),i}const g=BigInt("18446744073709551615");class y{constructor(e){this.pos=BigInt(0),this.reader=e}get position(){return this.pos}set position(e){var t;if("bigint"!=typeof e)throw new Error(`Got a ${typeof e} set in to reader.position, expected a bigint`);this.boundsCheck(e),this.pos=e,null===(t=this.reader)||void 0===t||t.set_position(e)}readInto(e){if(!this.reader)throw new Error("Cannot read from a hash after it was disposed");const t=this.pos+BigInt(e.length);this.boundsCheck(t),this.reader.fill(e),this.position=t}read(e){const t=this.alloc(e);return this.readInto(t),t}dispose(){var e,t;null===(t=null===(e=this.reader)||void 0===e?void 0:e.free)||void 0===t||t.call(e),this.reader=void 0}boundsCheck(e){if(e>g)throw new RangeError(`Cannot read past ${g} bytes in BLAKE3 hashes`);if(e<BigInt(0))throw new RangeError("Cannot read to a negative position")}}class v{constructor(e,t,r){this.alloc=t,this.getReader=r,this.hash=e}update(e){if(!this.hash)throw new Error("Cannot continue updating hashing after dispose() has been called");return this.hash.update(a(e)),this}digest({length:e=n,dispose:t=!0}={}){if(!this.hash)throw new Error("Cannot call digest() after dipose() has been called");const r=this.alloc(e);return this.hash.digest(r),t&&this.dispose(),r}reader({dispose:e=!0}={}){if(!this.hash)throw new Error("Cannot call reader() after dipose() has been called");const t=this.getReader(this.hash.reader());return e&&this.dispose(),t}dispose(){var e;null===(e=this.hash)||void 0===e||e.free(),this.hash=void 0}}const b=(e,t)=>{let r;try{r=t(e)}catch(t){throw e.dispose(),t}return"object"==typeof(n=r)&&n&&"then"in n?r.then(t=>(e.dispose(),t),t=>{throw e.dispose(),t}):(e.dispose(),r);var n};class _ extends y{toString(e="hex"){return this.toArray().toString(e)}toArray(){return this.position=BigInt(0),this.read(n)}alloc(e){return new c(e)}}class w extends v{update(e){return super.update(h(e))}digest(e,t){let r,n;e&&"object"==typeof e?(r=e,n=void 0):(r=t,n=e);const a=super.digest(r);return n?s(n)(a):a}}const x=()=>new w(u().create_hasher(),e=>new c(e),e=>new _(e)),k=e=>new w(u().create_keyed(e),e=>new c(e),e=>new _(e))},function(e,t,r){function n(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(a,i){var o=e.apply(t,r);function s(e){n(o,a,i,s,c,"next",e)}function c(e){n(o,a,i,s,c,"throw",e)}s(void 0)}))}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=r(5),c=r(10),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,e),this.BROWSER=1,this.SPVMODE=0,this.options=t,this.config={},this.newSaito(),this.modules=new s.modules(this,t.mod_paths),this}var t,n,l,u,d;return t=e,(n=[{key:"newSaito",value:function(){this.binary=new s.binary(this),this.crypto=new s.crypto(this),this.connection=new s.connection,this.browser=new s.browser(this),this.storage=new s.storage(this),this.goldenticket=new s.goldenticket(this),this.utxoset=new s.utxoset(this),this.mempool=new s.mempool(this),this.wallet=new s.wallet(this),this.miner=new s.miner(this),this.keys=new s.keychain(this),this.network=new s.network(this),this.networkApi=new s.networkApi(this),this.burnfee=new s.burnfee(this),this.blockchain=new s.blockchain(this),this.blockring=new s.blockring(this,this.blockchain.returnGenesisPeriod())}},{key:"init",value:(d=a(regeneratorRuntime.mark((function e(){var t,n,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.storage.initialize();case 3:return 0==this.BROWSER?(t=r(567),this.hash=function(e){return t.hash(e).toString("hex")}):(n=r(1039),this.hash=function(e){return n.newRegular().update(e).finalize()}),this.wallet.initialize(),this.mempool.initialize(),this.miner.initialize(),this.keys.initialize(),this.modules.mods=this.modules.mods_list.map((function(e){var t=new(r(1040)("./".concat(e)))(a);return t.dirname=c.dirname(e),t})),e.next=12,this.browser.initialize();case 12:return e.next=14,this.modules.initialize();case 14:return e.next=16,this.blockchain.initialize();case 16:this.network.initialize(),this.server&&this.server.initialize(),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),console.log("Error occured initializing your Saito install. The most likely cause of this is a module that is throwing an error on initialization. You can debug this by removing modules from your config file to test which ones are causing the problem and restarting."),console.log(e.t0);case 24:case"end":return e.stop()}}),e,this,[[0,20]])}))),function(){return d.apply(this,arguments)})},{key:"reset",value:(u=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.options=t,this.newSaito(),e.next=4,this.init();case 4:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"shutdown",value:function(){this.network.close()}}])&&o(t.prototype,n),l&&o(t,l),e}();e.exports.Saito=l,e.exports.saito_lib=s},function(e,t){e.exports={core:["arcade/arcade.js","archive/archive.js","blackjack/blackjack.js","chat/chat.js","chess/chess.js","email/email.js","encrypt/encrypt.js","explorer/explorer.js","imperium/imperium.js","myqrcode/myqrcode.js","post/post.js","poker/poker.js","qrscanner/qrscanner.js","relay/relay.js","settings/settings.js","solitrio/solitrio.js","wordblocks/wordblocks.js","website/website.js"],lite:["arcade/arcade.js","archive/archive.js","blackjack/blackjack.js","chess/chess.js","chat/chat.js","email/email.js","debug/debug.js","encrypt/encrypt.js","imperium/imperium.js","myqrcode/myqrcode.js","qrscanner/qrscanner.js","poker/poker.js","post/post.js","relay/relay.js","registry/registry.js","settings/settings.js","solitrio/solitrio.js","wordblocks/wordblocks.js","website/website.js"]}},function(e,t,r){r(571),e.exports=r(773)},function(e,t,r){"use strict";(function(e){if(r(572),r(769),r(770),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;function t(e,t,r){e[t]||Object.defineProperty(e,t,{writable:!0,configurable:!0,value:r})}t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach((function(e){[][e]&&t(Array,e,Function.call.bind([][e]))}))}).call(this,r(18))},function(e,t,r){r(573),r(576),r(577),r(578),r(579),r(580),r(581),r(582),r(583),r(584),r(585),r(586),r(587),r(588),r(589),r(590),r(591),r(592),r(593),r(594),r(595),r(596),r(597),r(598),r(599),r(600),r(601),r(602),r(603),r(604),r(605),r(606),r(607),r(608),r(609),r(610),r(611),r(612),r(613),r(614),r(615),r(616),r(617),r(618),r(619),r(620),r(621),r(622),r(623),r(624),r(625),r(626),r(627),r(628),r(629),r(630),r(631),r(632),r(633),r(634),r(635),r(636),r(637),r(638),r(639),r(640),r(641),r(642),r(643),r(644),r(645),r(646),r(647),r(648),r(649),r(650),r(651),r(653),r(654),r(656),r(657),r(658),r(659),r(660),r(661),r(662),r(664),r(665),r(666),r(667),r(668),r(669),r(670),r(671),r(672),r(673),r(674),r(675),r(676),r(165),r(677),r(336),r(678),r(337),r(679),r(680),r(681),r(682),r(683),r(340),r(342),r(343),r(684),r(685),r(686),r(687),r(688),r(689),r(690),r(691),r(692),r(693),r(694),r(695),r(696),r(697),r(698),r(699),r(700),r(701),r(702),r(703),r(704),r(705),r(706),r(707),r(708),r(709),r(710),r(711),r(712),r(713),r(714),r(715),r(716),r(717),r(718),r(719),r(720),r(721),r(722),r(723),r(724),r(725),r(726),r(727),r(728),r(729),r(730),r(731),r(732),r(733),r(734),r(735),r(736),r(737),r(738),r(739),r(740),r(741),r(742),r(743),r(744),r(745),r(746),r(747),r(748),r(749),r(750),r(751),r(752),r(753),r(754),r(755),r(756),r(757),r(758),r(759),r(760),r(761),r(762),r(763),r(764),r(765),r(766),r(767),r(768),e.exports=r(33)},function(e,t,r){"use strict";var n=r(6),a=r(26),i=r(13),o=r(0),s=r(22),c=r(48).KEY,l=r(7),u=r(83),d=r(70),h=r(55),p=r(11),f=r(318),m=r(146),g=r(575),y=r(104),v=r(3),b=r(8),_=r(15),w=r(27),x=r(38),k=r(54),S=r(58),E=r(321),A=r(28),P=r(103),C=r(14),D=r(56),T=A.f,O=C.f,M=E.f,I=n.Symbol,R=n.JSON,F=R&&R.stringify,B=p("_hidden"),j=p("toPrimitive"),N={}.propertyIsEnumerable,q=u("symbol-registry"),L=u("symbols"),U=u("op-symbols"),z=Object.prototype,H="function"==typeof I&&!!P.f,$=n.QObject,G=!$||!$.prototype||!$.prototype.findChild,K=i&&l((function(){return 7!=S(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=T(z,t);n&&delete z[t],O(e,t,r),n&&e!==z&&O(z,t,n)}:O,V=function(e){var t=L[e]=S(I.prototype);return t._k=e,t},W=H&&"symbol"==typeof I.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof I},Y=function(e,t,r){return e===z&&Y(U,t,r),v(e),t=x(t,!0),v(r),a(L,t)?(r.enumerable?(a(e,B)&&e[B][t]&&(e[B][t]=!1),r=S(r,{enumerable:k(0,!1)})):(a(e,B)||O(e,B,k(1,{})),e[B][t]=!0),K(e,t,r)):O(e,t,r)},J=function(e,t){v(e);for(var r,n=g(t=w(t)),a=0,i=n.length;i>a;)Y(e,r=n[a++],t[r]);return e},Q=function(e){var t=N.call(this,e=x(e,!0));return!(this===z&&a(L,e)&&!a(U,e))&&(!(t||!a(this,e)||!a(L,e)||a(this,B)&&this[B][e])||t)},X=function(e,t){if(e=w(e),t=x(t,!0),e!==z||!a(L,t)||a(U,t)){var r=T(e,t);return!r||!a(L,t)||a(e,B)&&e[B][t]||(r.enumerable=!0),r}},Z=function(e){for(var t,r=M(w(e)),n=[],i=0;r.length>i;)a(L,t=r[i++])||t==B||t==c||n.push(t);return n},ee=function(e){for(var t,r=e===z,n=M(r?U:w(e)),i=[],o=0;n.length>o;)!a(L,t=n[o++])||r&&!a(z,t)||i.push(L[t]);return i};H||(s((I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(r){this===z&&t.call(U,r),a(this,B)&&a(this[B],e)&&(this[B][e]=!1),K(this,e,k(1,r))};return i&&G&&K(z,e,{configurable:!0,set:t}),V(e)}).prototype,"toString",(function(){return this._k})),A.f=X,C.f=Y,r(59).f=E.f=Z,r(85).f=Q,P.f=ee,i&&!r(47)&&s(z,"propertyIsEnumerable",Q,!0),f.f=function(e){return V(p(e))}),o(o.G+o.W+o.F*!H,{Symbol:I});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;te.length>re;)p(te[re++]);for(var ne=D(p.store),ae=0;ne.length>ae;)m(ne[ae++]);o(o.S+o.F*!H,"Symbol",{for:function(e){return a(q,e+="")?q[e]:q[e]=I(e)},keyFor:function(e){if(!W(e))throw TypeError(e+" is not a symbol!");for(var t in q)if(q[t]===e)return t},useSetter:function(){G=!0},useSimple:function(){G=!1}}),o(o.S+o.F*!H,"Object",{create:function(e,t){return void 0===t?S(e):J(S(e),t)},defineProperty:Y,defineProperties:J,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});var ie=l((function(){P.f(1)}));o(o.S+o.F*ie,"Object",{getOwnPropertySymbols:function(e){return P.f(_(e))}}),R&&o(o.S+o.F*(!H||l((function(){var e=I();return"[null]"!=F([e])||"{}"!=F({a:e})||"{}"!=F(Object(e))}))),"JSON",{stringify:function(e){for(var t,r,n=[e],a=1;arguments.length>a;)n.push(arguments[a++]);if(r=t=n[1],(b(t)||void 0!==e)&&!W(e))return y(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!W(t))return t}),n[1]=t,F.apply(R,n)}}),I.prototype[j]||r(21)(I.prototype,j,I.prototype.valueOf),d(I,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},function(e,t,r){e.exports=r(83)("native-function-to-string",Function.toString)},function(e,t,r){var n=r(56),a=r(103),i=r(85);e.exports=function(e){var t=n(e),r=a.f;if(r)for(var o,s=r(e),c=i.f,l=0;s.length>l;)c.call(e,o=s[l++])&&t.push(o);return t}},function(e,t,r){var n=r(0);n(n.S,"Object",{create:r(58)})},function(e,t,r){var n=r(0);n(n.S+n.F*!r(13),"Object",{defineProperty:r(14).f})},function(e,t,r){var n=r(0);n(n.S+n.F*!r(13),"Object",{defineProperties:r(320)})},function(e,t,r){var n=r(27),a=r(28).f;r(40)("getOwnPropertyDescriptor",(function(){return function(e,t){return a(n(e),t)}}))},function(e,t,r){var n=r(15),a=r(29);r(40)("getPrototypeOf",(function(){return function(e){return a(n(e))}}))},function(e,t,r){var n=r(15),a=r(56);r(40)("keys",(function(){return function(e){return a(n(e))}}))},function(e,t,r){r(40)("getOwnPropertyNames",(function(){return r(321).f}))},function(e,t,r){var n=r(8),a=r(48).onFreeze;r(40)("freeze",(function(e){return function(t){return e&&n(t)?e(a(t)):t}}))},function(e,t,r){var n=r(8),a=r(48).onFreeze;r(40)("seal",(function(e){return function(t){return e&&n(t)?e(a(t)):t}}))},function(e,t,r){var n=r(8),a=r(48).onFreeze;r(40)("preventExtensions",(function(e){return function(t){return e&&n(t)?e(a(t)):t}}))},function(e,t,r){var n=r(8);r(40)("isFrozen",(function(e){return function(t){return!n(t)||!!e&&e(t)}}))},function(e,t,r){var n=r(8);r(40)("isSealed",(function(e){return function(t){return!n(t)||!!e&&e(t)}}))},function(e,t,r){var n=r(8);r(40)("isExtensible",(function(e){return function(t){return!!n(t)&&(!e||e(t))}}))},function(e,t,r){var n=r(0);n(n.S+n.F,"Object",{assign:r(322)})},function(e,t,r){var n=r(0);n(n.S,"Object",{is:r(323)})},function(e,t,r){var n=r(0);n(n.S,"Object",{setPrototypeOf:r(150).set})},function(e,t,r){"use strict";var n=r(71),a={};a[r(11)("toStringTag")]="z",a+""!="[object z]"&&r(22)(Object.prototype,"toString",(function(){return"[object "+n(this)+"]"}),!0)},function(e,t,r){var n=r(0);n(n.P,"Function",{bind:r(324)})},function(e,t,r){var n=r(14).f,a=Function.prototype,i=/^\s*function ([^ (]*)/;"name"in a||r(13)&&n(a,"name",{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})},function(e,t,r){"use strict";var n=r(8),a=r(29),i=r(11)("hasInstance"),o=Function.prototype;i in o||r(14).f(o,i,{value:function(e){if("function"!=typeof this||!n(e))return!1;if(!n(this.prototype))return e instanceof this;for(;e=a(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,r){var n=r(0),a=r(326);n(n.G+n.F*(parseInt!=a),{parseInt:a})},function(e,t,r){var n=r(0),a=r(327);n(n.G+n.F*(parseFloat!=a),{parseFloat:a})},function(e,t,r){"use strict";var n=r(6),a=r(26),i=r(35),o=r(152),s=r(38),c=r(7),l=r(59).f,u=r(28).f,d=r(14).f,h=r(72).trim,p=n.Number,f=p,m=p.prototype,g="Number"==i(r(58)(m)),y="trim"in String.prototype,v=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){var r,n,a,i=(t=y?t.trim():h(t,3)).charCodeAt(0);if(43===i||45===i){if(88===(r=t.charCodeAt(2))||120===r)return NaN}else if(48===i){switch(t.charCodeAt(1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+t}for(var o,c=t.slice(2),l=0,u=c.length;l<u;l++)if((o=c.charCodeAt(l))<48||o>a)return NaN;return parseInt(c,n)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof p&&(g?c((function(){m.valueOf.call(r)})):"Number"!=i(r))?o(new f(v(t)),r,p):v(t)};for(var b,_=r(13)?l(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;_.length>w;w++)a(f,b=_[w])&&!a(p,b)&&d(p,b,u(f,b));p.prototype=m,m.constructor=p,r(22)(n,"Number",p)}},function(e,t,r){"use strict";var n=r(0),a=r(36),i=r(328),o=r(153),s=1..toFixed,c=Math.floor,l=[0,0,0,0,0,0],u="Number.toFixed: incorrect invocation!",d=function(e,t){for(var r=-1,n=t;++r<6;)n+=e*l[r],l[r]=n%1e7,n=c(n/1e7)},h=function(e){for(var t=6,r=0;--t>=0;)r+=l[t],l[t]=c(r/e),r=r%e*1e7},p=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==l[e]){var r=String(l[e]);t=""===t?r:t+o.call("0",7-r.length)+r}return t},f=function(e,t,r){return 0===t?r:t%2==1?f(e,t-1,r*e):f(e*e,t/2,r)};n(n.P+n.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(7)((function(){s.call({})}))),"Number",{toFixed:function(e){var t,r,n,s,c=i(this,u),l=a(e),m="",g="0";if(l<0||l>20)throw RangeError(u);if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(m="-",c=-c),c>1e-21)if(r=(t=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t}(c*f(2,69,1))-69)<0?c*f(2,-t,1):c/f(2,t,1),r*=4503599627370496,(t=52-t)>0){for(d(0,r),n=l;n>=7;)d(1e7,0),n-=7;for(d(f(10,n,1),0),n=t-1;n>=23;)h(1<<23),n-=23;h(1<<n),d(1,1),h(2),g=p()}else d(0,r),d(1<<-t,0),g=p()+o.call("0",l);return g=l>0?m+((s=g.length)<=l?"0."+o.call("0",l-s)+g:g.slice(0,s-l)+"."+g.slice(s-l)):m+g}})},function(e,t,r){"use strict";var n=r(0),a=r(7),i=r(328),o=1..toPrecision;n(n.P+n.F*(a((function(){return"1"!==o.call(1,void 0)}))||!a((function(){o.call({})}))),"Number",{toPrecision:function(e){var t=i(this,"Number#toPrecision: incorrect invocation!");return void 0===e?o.call(t):o.call(t,e)}})},function(e,t,r){var n=r(0);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,r){var n=r(0),a=r(6).isFinite;n(n.S,"Number",{isFinite:function(e){return"number"==typeof e&&a(e)}})},function(e,t,r){var n=r(0);n(n.S,"Number",{isInteger:r(329)})},function(e,t,r){var n=r(0);n(n.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,r){var n=r(0),a=r(329),i=Math.abs;n(n.S,"Number",{isSafeInteger:function(e){return a(e)&&i(e)<=9007199254740991}})},function(e,t,r){var n=r(0);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,r){var n=r(0);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,r){var n=r(0),a=r(327);n(n.S+n.F*(Number.parseFloat!=a),"Number",{parseFloat:a})},function(e,t,r){var n=r(0),a=r(326);n(n.S+n.F*(Number.parseInt!=a),"Number",{parseInt:a})},function(e,t,r){var n=r(0),a=r(330),i=Math.sqrt,o=Math.acosh;n(n.S+n.F*!(o&&710==Math.floor(o(Number.MAX_VALUE))&&o(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:a(e-1+i(e-1)*i(e+1))}})},function(e,t,r){var n=r(0),a=Math.asinh;n(n.S+n.F*!(a&&1/a(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},function(e,t,r){var n=r(0),a=Math.atanh;n(n.S+n.F*!(a&&1/a(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,r){var n=r(0),a=r(154);n(n.S,"Math",{cbrt:function(e){return a(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,r){var n=r(0);n(n.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,r){var n=r(0),a=Math.exp;n(n.S,"Math",{cosh:function(e){return(a(e=+e)+a(-e))/2}})},function(e,t,r){var n=r(0),a=r(155);n(n.S+n.F*(a!=Math.expm1),"Math",{expm1:a})},function(e,t,r){var n=r(0);n(n.S,"Math",{fround:r(331)})},function(e,t,r){var n=r(0),a=Math.abs;n(n.S,"Math",{hypot:function(e,t){for(var r,n,i=0,o=0,s=arguments.length,c=0;o<s;)c<(r=a(arguments[o++]))?(i=i*(n=c/r)*n+1,c=r):i+=r>0?(n=r/c)*n:r;return c===1/0?1/0:c*Math.sqrt(i)}})},function(e,t,r){var n=r(0),a=Math.imul;n(n.S+n.F*r(7)((function(){return-5!=a(4294967295,5)||2!=a.length})),"Math",{imul:function(e,t){var r=+e,n=+t,a=65535&r,i=65535&n;return 0|a*i+((65535&r>>>16)*i+a*(65535&n>>>16)<<16>>>0)}})},function(e,t,r){var n=r(0);n(n.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,r){var n=r(0);n(n.S,"Math",{log1p:r(330)})},function(e,t,r){var n=r(0);n(n.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,r){var n=r(0);n(n.S,"Math",{sign:r(154)})},function(e,t,r){var n=r(0),a=r(155),i=Math.exp;n(n.S+n.F*r(7)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(a(e)-a(-e))/2:(i(e-1)-i(-e-1))*(Math.E/2)}})},function(e,t,r){var n=r(0),a=r(155),i=Math.exp;n(n.S,"Math",{tanh:function(e){var t=a(e=+e),r=a(-e);return t==1/0?1:r==1/0?-1:(t-r)/(i(e)+i(-e))}})},function(e,t,r){var n=r(0);n(n.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,r){var n=r(0),a=r(57),i=String.fromCharCode,o=String.fromCodePoint;n(n.S+n.F*(!!o&&1!=o.length),"String",{fromCodePoint:function(e){for(var t,r=[],n=arguments.length,o=0;n>o;){if(t=+arguments[o++],a(t,1114111)!==t)throw RangeError(t+" is not a valid code point");r.push(t<65536?i(t):i(55296+((t-=65536)>>10),t%1024+56320))}return r.join("")}})},function(e,t,r){var n=r(0),a=r(27),i=r(12);n(n.S,"String",{raw:function(e){for(var t=a(e.raw),r=i(t.length),n=arguments.length,o=[],s=0;r>s;)o.push(String(t[s++])),s<n&&o.push(String(arguments[s]));return o.join("")}})},function(e,t,r){"use strict";r(72)("trim",(function(e){return function(){return e(this,3)}}))},function(e,t,r){"use strict";var n=r(105)(!0);r(156)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})}))},function(e,t,r){"use strict";var n=r(0),a=r(105)(!1);n(n.P,"String",{codePointAt:function(e){return a(this,e)}})},function(e,t,r){"use strict";var n=r(0),a=r(12),i=r(158),o="".endsWith;n(n.P+n.F*r(159)("endsWith"),"String",{endsWith:function(e){var t=i(this,e,"endsWith"),r=arguments.length>1?arguments[1]:void 0,n=a(t.length),s=void 0===r?n:Math.min(a(r),n),c=String(e);return o?o.call(t,c,s):t.slice(s-c.length,s)===c}})},function(e,t,r){"use strict";var n=r(0),a=r(158);n(n.P+n.F*r(159)("includes"),"String",{includes:function(e){return!!~a(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,r){var n=r(0);n(n.P,"String",{repeat:r(153)})},function(e,t,r){"use strict";var n=r(0),a=r(12),i=r(158),o="".startsWith;n(n.P+n.F*r(159)("startsWith"),"String",{startsWith:function(e){var t=i(this,e,"startsWith"),r=a(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return o?o.call(t,n,r):t.slice(r,r+n.length)===n}})},function(e,t,r){"use strict";r(23)("anchor",(function(e){return function(t){return e(this,"a","name",t)}}))},function(e,t,r){"use strict";r(23)("big",(function(e){return function(){return e(this,"big","","")}}))},function(e,t,r){"use strict";r(23)("blink",(function(e){return function(){return e(this,"blink","","")}}))},function(e,t,r){"use strict";r(23)("bold",(function(e){return function(){return e(this,"b","","")}}))},function(e,t,r){"use strict";r(23)("fixed",(function(e){return function(){return e(this,"tt","","")}}))},function(e,t,r){"use strict";r(23)("fontcolor",(function(e){return function(t){return e(this,"font","color",t)}}))},function(e,t,r){"use strict";r(23)("fontsize",(function(e){return function(t){return e(this,"font","size",t)}}))},function(e,t,r){"use strict";r(23)("italics",(function(e){return function(){return e(this,"i","","")}}))},function(e,t,r){"use strict";r(23)("link",(function(e){return function(t){return e(this,"a","href",t)}}))},function(e,t,r){"use strict";r(23)("small",(function(e){return function(){return e(this,"small","","")}}))},function(e,t,r){"use strict";r(23)("strike",(function(e){return function(){return e(this,"strike","","")}}))},function(e,t,r){"use strict";r(23)("sub",(function(e){return function(){return e(this,"sub","","")}}))},function(e,t,r){"use strict";r(23)("sup",(function(e){return function(){return e(this,"sup","","")}}))},function(e,t,r){var n=r(0);n(n.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,r){"use strict";var n=r(0),a=r(15),i=r(38);n(n.P+n.F*r(7)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(e){var t=a(this),r=i(t);return"number"!=typeof r||isFinite(r)?t.toISOString():null}})},function(e,t,r){var n=r(0),a=r(652);n(n.P+n.F*(Date.prototype.toISOString!==a),"Date",{toISOString:a})},function(e,t,r){"use strict";var n=r(7),a=Date.prototype.getTime,i=Date.prototype.toISOString,o=function(e){return e>9?e:"0"+e};e.exports=n((function(){return"0385-07-25T07:06:39.999Z"!=i.call(new Date(-50000000000001))}))||!n((function(){i.call(new Date(NaN))}))?function(){if(!isFinite(a.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),r=e.getUTCMilliseconds(),n=t<0?"-":t>9999?"+":"";return n+("00000"+Math.abs(t)).slice(n?-6:-4)+"-"+o(e.getUTCMonth()+1)+"-"+o(e.getUTCDate())+"T"+o(e.getUTCHours())+":"+o(e.getUTCMinutes())+":"+o(e.getUTCSeconds())+"."+(r>99?r:"0"+o(r))+"Z"}:i},function(e,t,r){var n=Date.prototype,a=n.toString,i=n.getTime;new Date(NaN)+""!="Invalid Date"&&r(22)(n,"toString",(function(){var e=i.call(this);return e==e?a.call(this):"Invalid Date"}))},function(e,t,r){var n=r(11)("toPrimitive"),a=Date.prototype;n in a||r(21)(a,n,r(655))},function(e,t,r){"use strict";var n=r(3),a=r(38);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return a(n(this),"number"!=e)}},function(e,t,r){var n=r(0);n(n.S,"Array",{isArray:r(104)})},function(e,t,r){"use strict";var n=r(34),a=r(0),i=r(15),o=r(332),s=r(160),c=r(12),l=r(161),u=r(162);a(a.S+a.F*!r(107)((function(e){Array.from(e)})),"Array",{from:function(e){var t,r,a,d,h=i(e),p="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,g=void 0!==m,y=0,v=u(h);if(g&&(m=n(m,f>2?arguments[2]:void 0,2)),null==v||p==Array&&s(v))for(r=new p(t=c(h.length));t>y;y++)l(r,y,g?m(h[y],y):h[y]);else for(d=v.call(h),r=new p;!(a=d.next()).done;y++)l(r,y,g?o(d,m,[a.value,y],!0):a.value);return r.length=y,r}})},function(e,t,r){"use strict";var n=r(0),a=r(161);n(n.S+n.F*r(7)((function(){function e(){}return!(Array.of.call(e)instanceof e)})),"Array",{of:function(){for(var e=0,t=arguments.length,r=new("function"==typeof this?this:Array)(t);t>e;)a(r,e,arguments[e++]);return r.length=t,r}})},function(e,t,r){"use strict";var n=r(0),a=r(27),i=[].join;n(n.P+n.F*(r(84)!=Object||!r(37)(i)),"Array",{join:function(e){return i.call(a(this),void 0===e?",":e)}})},function(e,t,r){"use strict";var n=r(0),a=r(149),i=r(35),o=r(57),s=r(12),c=[].slice;n(n.P+n.F*r(7)((function(){a&&c.call(a)})),"Array",{slice:function(e,t){var r=s(this.length),n=i(this);if(t=void 0===t?r:t,"Array"==n)return c.call(this,e,t);for(var a=o(e,r),l=o(t,r),u=s(l-a),d=new Array(u),h=0;h<u;h++)d[h]="String"==n?this.charAt(a+h):this[a+h];return d}})},function(e,t,r){"use strict";var n=r(0),a=r(20),i=r(15),o=r(7),s=[].sort,c=[1,2,3];n(n.P+n.F*(o((function(){c.sort(void 0)}))||!o((function(){c.sort(null)}))||!r(37)(s)),"Array",{sort:function(e){return void 0===e?s.call(i(this)):s.call(i(this),a(e))}})},function(e,t,r){"use strict";var n=r(0),a=r(41)(0),i=r(37)([].forEach,!0);n(n.P+n.F*!i,"Array",{forEach:function(e){return a(this,e,arguments[1])}})},function(e,t,r){var n=r(8),a=r(104),i=r(11)("species");e.exports=function(e){var t;return a(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!a(t.prototype)||(t=void 0),n(t)&&null===(t=t[i])&&(t=void 0)),void 0===t?Array:t}},function(e,t,r){"use strict";var n=r(0),a=r(41)(1);n(n.P+n.F*!r(37)([].map,!0),"Array",{map:function(e){return a(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(0),a=r(41)(2);n(n.P+n.F*!r(37)([].filter,!0),"Array",{filter:function(e){return a(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(0),a=r(41)(3);n(n.P+n.F*!r(37)([].some,!0),"Array",{some:function(e){return a(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(0),a=r(41)(4);n(n.P+n.F*!r(37)([].every,!0),"Array",{every:function(e){return a(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(0),a=r(333);n(n.P+n.F*!r(37)([].reduce,!0),"Array",{reduce:function(e){return a(this,e,arguments.length,arguments[1],!1)}})},function(e,t,r){"use strict";var n=r(0),a=r(333);n(n.P+n.F*!r(37)([].reduceRight,!0),"Array",{reduceRight:function(e){return a(this,e,arguments.length,arguments[1],!0)}})},function(e,t,r){"use strict";var n=r(0),a=r(102)(!1),i=[].indexOf,o=!!i&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(o||!r(37)(i)),"Array",{indexOf:function(e){return o?i.apply(this,arguments)||0:a(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(0),a=r(27),i=r(36),o=r(12),s=[].lastIndexOf,c=!!s&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(c||!r(37)(s)),"Array",{lastIndexOf:function(e){if(c)return s.apply(this,arguments)||0;var t=a(this),r=o(t.length),n=r-1;for(arguments.length>1&&(n=Math.min(n,i(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in t&&t[n]===e)return n||0;return-1}})},function(e,t,r){var n=r(0);n(n.P,"Array",{copyWithin:r(334)}),r(49)("copyWithin")},function(e,t,r){var n=r(0);n(n.P,"Array",{fill:r(164)}),r(49)("fill")},function(e,t,r){"use strict";var n=r(0),a=r(41)(5),i=!0;"find"in[]&&Array(1).find((function(){i=!1})),n(n.P+n.F*i,"Array",{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),r(49)("find")},function(e,t,r){"use strict";var n=r(0),a=r(41)(6),i="findIndex",o=!0;i in[]&&Array(1)[i]((function(){o=!1})),n(n.P+n.F*o,"Array",{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),r(49)(i)},function(e,t,r){r(60)("Array")},function(e,t,r){var n=r(6),a=r(152),i=r(14).f,o=r(59).f,s=r(106),c=r(86),l=n.RegExp,u=l,d=l.prototype,h=/a/g,p=/a/g,f=new l(h)!==h;if(r(13)&&(!f||r(7)((function(){return p[r(11)("match")]=!1,l(h)!=h||l(p)==p||"/a/i"!=l(h,"i")})))){l=function(e,t){var r=this instanceof l,n=s(e),i=void 0===t;return!r&&n&&e.constructor===l&&i?e:a(f?new u(n&&!i?e.source:e,t):u((n=e instanceof l)?e.source:e,n&&i?c.call(e):t),r?this:d,l)};for(var m=function(e){e in l||i(l,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},g=o(u),y=0;g.length>y;)m(g[y++]);d.constructor=l,l.prototype=d,r(22)(n,"RegExp",l)}r(60)("RegExp")},function(e,t,r){"use strict";r(337);var n=r(3),a=r(86),i=r(13),o=/./.toString,s=function(e){r(22)(RegExp.prototype,"toString",e,!0)};r(7)((function(){return"/a/b"!=o.call({source:"a",flags:"b"})}))?s((function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!i&&e instanceof RegExp?a.call(e):void 0)})):"toString"!=o.name&&s((function(){return o.call(this)}))},function(e,t,r){"use strict";var n=r(3),a=r(12),i=r(167),o=r(108);r(109)("match",1,(function(e,t,r,s){return[function(r){var n=e(this),a=null==r?void 0:r[t];return void 0!==a?a.call(r,n):new RegExp(r)[t](String(n))},function(e){var t=s(r,e,this);if(t.done)return t.value;var c=n(e),l=String(this);if(!c.global)return o(c,l);var u=c.unicode;c.lastIndex=0;for(var d,h=[],p=0;null!==(d=o(c,l));){var f=String(d[0]);h[p]=f,""===f&&(c.lastIndex=i(l,a(c.lastIndex),u)),p++}return 0===p?null:h}]}))},function(e,t,r){"use strict";var n=r(3),a=r(15),i=r(12),o=r(36),s=r(167),c=r(108),l=Math.max,u=Math.min,d=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;r(109)("replace",2,(function(e,t,r,f){return[function(n,a){var i=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,a):r.call(String(i),n,a)},function(e,t){var a=f(r,e,this,t);if(a.done)return a.value;var d=n(e),h=String(this),p="function"==typeof t;p||(t=String(t));var g=d.global;if(g){var y=d.unicode;d.lastIndex=0}for(var v=[];;){var b=c(d,h);if(null===b)break;if(v.push(b),!g)break;""===String(b[0])&&(d.lastIndex=s(h,i(d.lastIndex),y))}for(var _,w="",x=0,k=0;k<v.length;k++){b=v[k];for(var S=String(b[0]),E=l(u(o(b.index),h.length),0),A=[],P=1;P<b.length;P++)A.push(void 0===(_=b[P])?_:String(_));var C=b.groups;if(p){var D=[S].concat(A,E,h);void 0!==C&&D.push(C);var T=String(t.apply(void 0,D))}else T=m(S,h,E,A,C,t);E>=x&&(w+=h.slice(x,E)+T,x=E+S.length)}return w+h.slice(x)}];function m(e,t,n,i,o,s){var c=n+e.length,l=i.length,u=p;return void 0!==o&&(o=a(o),u=h),r.call(s,u,(function(r,a){var s;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(c);case"<":s=o[a.slice(1,-1)];break;default:var u=+a;if(0===u)return r;if(u>l){var h=d(u/10);return 0===h?r:h<=l?void 0===i[h-1]?a.charAt(1):i[h-1]+a.charAt(1):r}s=i[u-1]}return void 0===s?"":s}))}}))},function(e,t,r){"use strict";var n=r(3),a=r(323),i=r(108);r(109)("search",1,(function(e,t,r,o){return[function(r){var n=e(this),a=null==r?void 0:r[t];return void 0!==a?a.call(r,n):new RegExp(r)[t](String(n))},function(e){var t=o(r,e,this);if(t.done)return t.value;var s=n(e),c=String(this),l=s.lastIndex;a(l,0)||(s.lastIndex=0);var u=i(s,c);return a(s.lastIndex,l)||(s.lastIndex=l),null===u?-1:u.index}]}))},function(e,t,r){"use strict";var n=r(106),a=r(3),i=r(87),o=r(167),s=r(12),c=r(108),l=r(166),u=r(7),d=Math.min,h=[].push,p="length",f=!u((function(){RegExp(4294967295,"y")}));r(109)("split",2,(function(e,t,r,u){var m;return m="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[p]||2!="ab".split(/(?:ab)*/)[p]||4!=".".split(/(.?)(.?)/)[p]||".".split(/()()/)[p]>1||"".split(/.?/)[p]?function(e,t){var a=String(this);if(void 0===e&&0===t)return[];if(!n(e))return r.call(a,e,t);for(var i,o,s,c=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,f=void 0===t?4294967295:t>>>0,m=new RegExp(e.source,u+"g");(i=l.call(m,a))&&!((o=m.lastIndex)>d&&(c.push(a.slice(d,i.index)),i[p]>1&&i.index<a[p]&&h.apply(c,i.slice(1)),s=i[0][p],d=o,c[p]>=f));)m.lastIndex===i.index&&m.lastIndex++;return d===a[p]?!s&&m.test("")||c.push(""):c.push(a.slice(d)),c[p]>f?c.slice(0,f):c}:"0".split(void 0,0)[p]?function(e,t){return void 0===e&&0===t?[]:r.call(this,e,t)}:r,[function(r,n){var a=e(this),i=null==r?void 0:r[t];return void 0!==i?i.call(r,a,n):m.call(String(a),r,n)},function(e,t){var n=u(m,e,this,t,m!==r);if(n.done)return n.value;var l=a(e),h=String(this),p=i(l,RegExp),g=l.unicode,y=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(f?"y":"g"),v=new p(f?l:"^(?:"+l.source+")",y),b=void 0===t?4294967295:t>>>0;if(0===b)return[];if(0===h.length)return null===c(v,h)?[h]:[];for(var _=0,w=0,x=[];w<h.length;){v.lastIndex=f?w:0;var k,S=c(v,f?h:h.slice(w));if(null===S||(k=d(s(v.lastIndex+(f?0:w)),h.length))===_)w=o(h,w,g);else{if(x.push(h.slice(_,w)),x.length===b)return x;for(var E=1;E<=S.length-1;E++)if(x.push(S[E]),x.length===b)return x;w=_=k}}return x.push(h.slice(_)),x}]}))},function(e,t,r){"use strict";var n,a,i,o,s=r(47),c=r(6),l=r(34),u=r(71),d=r(0),h=r(8),p=r(20),f=r(61),m=r(62),g=r(87),y=r(168).set,v=r(169)(),b=r(170),_=r(338),w=r(110),x=r(339),k=c.TypeError,S=c.process,E=S&&S.versions,A=E&&E.v8||"",P=c.Promise,C="process"==u(S),D=function(){},T=a=b.f,O=!!function(){try{var e=P.resolve(1),t=(e.constructor={})[r(11)("species")]=function(e){e(D,D)};return(C||"function"==typeof PromiseRejectionEvent)&&e.then(D)instanceof t&&0!==A.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(e){}}(),M=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},I=function(e,t){if(!e._n){e._n=!0;var r=e._c;v((function(){for(var n=e._v,a=1==e._s,i=0,o=function(t){var r,i,o,s=a?t.ok:t.fail,c=t.resolve,l=t.reject,u=t.domain;try{s?(a||(2==e._h&&B(e),e._h=1),!0===s?r=n:(u&&u.enter(),r=s(n),u&&(u.exit(),o=!0)),r===t.promise?l(k("Promise-chain cycle")):(i=M(r))?i.call(r,c,l):c(r)):l(n)}catch(e){u&&!o&&u.exit(),l(e)}};r.length>i;)o(r[i++]);e._c=[],e._n=!1,t&&!e._h&&R(e)}))}},R=function(e){y.call(c,(function(){var t,r,n,a=e._v,i=F(e);if(i&&(t=_((function(){C?S.emit("unhandledRejection",a,e):(r=c.onunhandledrejection)?r({promise:e,reason:a}):(n=c.console)&&n.error&&n.error("Unhandled promise rejection",a)})),e._h=C||F(e)?2:1),e._a=void 0,i&&t.e)throw t.v}))},F=function(e){return 1!==e._h&&0===(e._a||e._c).length},B=function(e){y.call(c,(function(){var t;C?S.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})}))},j=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),I(t,!0))},N=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw k("Promise can't be resolved itself");(t=M(e))?v((function(){var n={_w:r,_d:!1};try{t.call(e,l(N,n,1),l(j,n,1))}catch(e){j.call(n,e)}})):(r._v=e,r._s=1,I(r,!1))}catch(e){j.call({_w:r,_d:!1},e)}}};O||(P=function(e){f(this,P,"Promise","_h"),p(e),n.call(this);try{e(l(N,this,1),l(j,this,1))}catch(e){j.call(this,e)}},(n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(63)(P.prototype,{then:function(e,t){var r=T(g(this,P));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=C?S.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&I(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new n;this.promise=e,this.resolve=l(N,e,1),this.reject=l(j,e,1)},b.f=T=function(e){return e===P||e===o?new i(e):a(e)}),d(d.G+d.W+d.F*!O,{Promise:P}),r(70)(P,"Promise"),r(60)("Promise"),o=r(33).Promise,d(d.S+d.F*!O,"Promise",{reject:function(e){var t=T(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(s||!O),"Promise",{resolve:function(e){return x(s&&this===o?P:this,e)}}),d(d.S+d.F*!(O&&r(107)((function(e){P.all(e).catch(D)}))),"Promise",{all:function(e){var t=this,r=T(t),n=r.resolve,a=r.reject,i=_((function(){var r=[],i=0,o=1;m(e,!1,(function(e){var s=i++,c=!1;r.push(void 0),o++,t.resolve(e).then((function(e){c||(c=!0,r[s]=e,--o||n(r))}),a)})),--o||n(r)}));return i.e&&a(i.v),r.promise},race:function(e){var t=this,r=T(t),n=r.reject,a=_((function(){m(e,!1,(function(e){t.resolve(e).then(r.resolve,n)}))}));return a.e&&n(a.v),r.promise}})},function(e,t,r){"use strict";var n=r(344),a=r(64);r(111)("WeakSet",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return n.def(a(this,"WeakSet"),e,!0)}},n,!1,!0)},function(e,t,r){"use strict";var n=r(0),a=r(112),i=r(171),o=r(3),s=r(57),c=r(12),l=r(8),u=r(6).ArrayBuffer,d=r(87),h=i.ArrayBuffer,p=i.DataView,f=a.ABV&&u.isView,m=h.prototype.slice,g=a.VIEW;n(n.G+n.W+n.F*(u!==h),{ArrayBuffer:h}),n(n.S+n.F*!a.CONSTR,"ArrayBuffer",{isView:function(e){return f&&f(e)||l(e)&&g in e}}),n(n.P+n.U+n.F*r(7)((function(){return!new h(2).slice(1,void 0).byteLength})),"ArrayBuffer",{slice:function(e,t){if(void 0!==m&&void 0===t)return m.call(o(this),e);for(var r=o(this).byteLength,n=s(e,r),a=s(void 0===t?r:t,r),i=new(d(this,h))(c(a-n)),l=new p(this),u=new p(i),f=0;n<a;)u.setUint8(f++,l.getUint8(n++));return i}}),r(60)("ArrayBuffer")},function(e,t,r){var n=r(0);n(n.G+n.W+n.F*!r(112).ABV,{DataView:r(171).DataView})},function(e,t,r){r(43)("Int8",1,(function(e){return function(t,r,n){return e(this,t,r,n)}}))},function(e,t,r){r(43)("Uint8",1,(function(e){return function(t,r,n){return e(this,t,r,n)}}))},function(e,t,r){r(43)("Uint8",1,(function(e){return function(t,r,n){return e(this,t,r,n)}}),!0)},function(e,t,r){r(43)("Int16",2,(function(e){return function(t,r,n){return e(this,t,r,n)}}))},function(e,t,r){r(43)("Uint16",2,(function(e){return function(t,r,n){return e(this,t,r,n)}}))},function(e,t,r){r(43)("Int32",4,(function(e){return function(t,r,n){return e(this,t,r,n)}}))},function(e,t,r){r(43)("Uint32",4,(function(e){return function(t,r,n){return e(this,t,r,n)}}))},function(e,t,r){r(43)("Float32",4,(function(e){return function(t,r,n){return e(this,t,r,n)}}))},function(e,t,r){r(43)("Float64",8,(function(e){return function(t,r,n){return e(this,t,r,n)}}))},function(e,t,r){var n=r(0),a=r(20),i=r(3),o=(r(6).Reflect||{}).apply,s=Function.apply;n(n.S+n.F*!r(7)((function(){o((function(){}))})),"Reflect",{apply:function(e,t,r){var n=a(e),c=i(r);return o?o(n,t,c):s.call(n,t,c)}})},function(e,t,r){var n=r(0),a=r(58),i=r(20),o=r(3),s=r(8),c=r(7),l=r(324),u=(r(6).Reflect||{}).construct,d=c((function(){function e(){}return!(u((function(){}),[],e)instanceof e)})),h=!c((function(){u((function(){}))}));n(n.S+n.F*(d||h),"Reflect",{construct:function(e,t){i(e),o(t);var r=arguments.length<3?e:i(arguments[2]);if(h&&!d)return u(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(l.apply(e,n))}var c=r.prototype,p=a(s(c)?c:Object.prototype),f=Function.apply.call(e,p,t);return s(f)?f:p}})},function(e,t,r){var n=r(14),a=r(0),i=r(3),o=r(38);a(a.S+a.F*r(7)((function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(e,t,r){i(e),t=o(t,!0),i(r);try{return n.f(e,t,r),!0}catch(e){return!1}}})},function(e,t,r){var n=r(0),a=r(28).f,i=r(3);n(n.S,"Reflect",{deleteProperty:function(e,t){var r=a(i(e),t);return!(r&&!r.configurable)&&delete e[t]}})},function(e,t,r){"use strict";var n=r(0),a=r(3),i=function(e){this._t=a(e),this._i=0;var t,r=this._k=[];for(t in e)r.push(t)};r(157)(i,"Object",(function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}})),n(n.S,"Reflect",{enumerate:function(e){return new i(e)}})},function(e,t,r){var n=r(28),a=r(29),i=r(26),o=r(0),s=r(8),c=r(3);o(o.S,"Reflect",{get:function e(t,r){var o,l,u=arguments.length<3?t:arguments[2];return c(t)===u?t[r]:(o=n.f(t,r))?i(o,"value")?o.value:void 0!==o.get?o.get.call(u):void 0:s(l=a(t))?e(l,r,u):void 0}})},function(e,t,r){var n=r(28),a=r(0),i=r(3);a(a.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return n.f(i(e),t)}})},function(e,t,r){var n=r(0),a=r(29),i=r(3);n(n.S,"Reflect",{getPrototypeOf:function(e){return a(i(e))}})},function(e,t,r){var n=r(0);n(n.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,r){var n=r(0),a=r(3),i=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(e){return a(e),!i||i(e)}})},function(e,t,r){var n=r(0);n(n.S,"Reflect",{ownKeys:r(346)})},function(e,t,r){var n=r(0),a=r(3),i=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(e){a(e);try{return i&&i(e),!0}catch(e){return!1}}})},function(e,t,r){var n=r(14),a=r(28),i=r(29),o=r(26),s=r(0),c=r(54),l=r(3),u=r(8);s(s.S,"Reflect",{set:function e(t,r,s){var d,h,p=arguments.length<4?t:arguments[3],f=a.f(l(t),r);if(!f){if(u(h=i(t)))return e(h,r,s,p);f=c(0)}if(o(f,"value")){if(!1===f.writable||!u(p))return!1;if(d=a.f(p,r)){if(d.get||d.set||!1===d.writable)return!1;d.value=s,n.f(p,r,d)}else n.f(p,r,c(0,s));return!0}return void 0!==f.set&&(f.set.call(p,s),!0)}})},function(e,t,r){var n=r(0),a=r(150);a&&n(n.S,"Reflect",{setPrototypeOf:function(e,t){a.check(e,t);try{return a.set(e,t),!0}catch(e){return!1}}})},function(e,t,r){"use strict";var n=r(0),a=r(102)(!0);n(n.P,"Array",{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),r(49)("includes")},function(e,t,r){"use strict";var n=r(0),a=r(347),i=r(15),o=r(12),s=r(20),c=r(163);n(n.P,"Array",{flatMap:function(e){var t,r,n=i(this);return s(e),t=o(n.length),r=c(n,0),a(r,n,n,t,0,1,e,arguments[1]),r}}),r(49)("flatMap")},function(e,t,r){"use strict";var n=r(0),a=r(347),i=r(15),o=r(12),s=r(36),c=r(163);n(n.P,"Array",{flatten:function(){var e=arguments[0],t=i(this),r=o(t.length),n=c(t,0);return a(n,t,t,r,0,void 0===e?1:s(e)),n}}),r(49)("flatten")},function(e,t,r){"use strict";var n=r(0),a=r(105)(!0),i=r(7)((function(){return"𠮷"!=="𠮷".at(0)}));n(n.P+n.F*i,"String",{at:function(e){return a(this,e)}})},function(e,t,r){"use strict";var n=r(0),a=r(348),i=r(110),o=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i);n(n.P+n.F*o,"String",{padStart:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,r){"use strict";var n=r(0),a=r(348),i=r(110),o=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i);n(n.P+n.F*o,"String",{padEnd:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,r){"use strict";r(72)("trimLeft",(function(e){return function(){return e(this,1)}}),"trimStart")},function(e,t,r){"use strict";r(72)("trimRight",(function(e){return function(){return e(this,2)}}),"trimEnd")},function(e,t,r){"use strict";var n=r(0),a=r(39),i=r(12),o=r(106),s=r(86),c=RegExp.prototype,l=function(e,t){this._r=e,this._s=t};r(157)(l,"RegExp String",(function(){var e=this._r.exec(this._s);return{value:e,done:null===e}})),n(n.P,"String",{matchAll:function(e){if(a(this),!o(e))throw TypeError(e+" is not a regexp!");var t=String(this),r="flags"in c?String(e.flags):s.call(e),n=new RegExp(e.source,~r.indexOf("g")?r:"g"+r);return n.lastIndex=i(e.lastIndex),new l(n,t)}})},function(e,t,r){r(146)("asyncIterator")},function(e,t,r){r(146)("observable")},function(e,t,r){var n=r(0),a=r(346),i=r(27),o=r(28),s=r(161);n(n.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,r,n=i(e),c=o.f,l=a(n),u={},d=0;l.length>d;)void 0!==(r=c(n,t=l[d++]))&&s(u,t,r);return u}})},function(e,t,r){var n=r(0),a=r(349)(!1);n(n.S,"Object",{values:function(e){return a(e)}})},function(e,t,r){var n=r(0),a=r(349)(!0);n(n.S,"Object",{entries:function(e){return a(e)}})},function(e,t,r){"use strict";var n=r(0),a=r(15),i=r(20),o=r(14);r(13)&&n(n.P+r(113),"Object",{__defineGetter__:function(e,t){o.f(a(this),e,{get:i(t),enumerable:!0,configurable:!0})}})},function(e,t,r){"use strict";var n=r(0),a=r(15),i=r(20),o=r(14);r(13)&&n(n.P+r(113),"Object",{__defineSetter__:function(e,t){o.f(a(this),e,{set:i(t),enumerable:!0,configurable:!0})}})},function(e,t,r){"use strict";var n=r(0),a=r(15),i=r(38),o=r(29),s=r(28).f;r(13)&&n(n.P+r(113),"Object",{__lookupGetter__:function(e){var t,r=a(this),n=i(e,!0);do{if(t=s(r,n))return t.get}while(r=o(r))}})},function(e,t,r){"use strict";var n=r(0),a=r(15),i=r(38),o=r(29),s=r(28).f;r(13)&&n(n.P+r(113),"Object",{__lookupSetter__:function(e){var t,r=a(this),n=i(e,!0);do{if(t=s(r,n))return t.set}while(r=o(r))}})},function(e,t,r){var n=r(0);n(n.P+n.R,"Map",{toJSON:r(350)("Map")})},function(e,t,r){var n=r(0);n(n.P+n.R,"Set",{toJSON:r(350)("Set")})},function(e,t,r){r(114)("Map")},function(e,t,r){r(114)("Set")},function(e,t,r){r(114)("WeakMap")},function(e,t,r){r(114)("WeakSet")},function(e,t,r){r(115)("Map")},function(e,t,r){r(115)("Set")},function(e,t,r){r(115)("WeakMap")},function(e,t,r){r(115)("WeakSet")},function(e,t,r){var n=r(0);n(n.G,{global:r(6)})},function(e,t,r){var n=r(0);n(n.S,"System",{global:r(6)})},function(e,t,r){var n=r(0),a=r(35);n(n.S,"Error",{isError:function(e){return"Error"===a(e)}})},function(e,t,r){var n=r(0);n(n.S,"Math",{clamp:function(e,t,r){return Math.min(r,Math.max(t,e))}})},function(e,t,r){var n=r(0);n(n.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(e,t,r){var n=r(0),a=180/Math.PI;n(n.S,"Math",{degrees:function(e){return e*a}})},function(e,t,r){var n=r(0),a=r(352),i=r(331);n(n.S,"Math",{fscale:function(e,t,r,n,o){return i(a(e,t,r,n,o))}})},function(e,t,r){var n=r(0);n(n.S,"Math",{iaddh:function(e,t,r,n){var a=e>>>0,i=r>>>0;return(t>>>0)+(n>>>0)+((a&i|(a|i)&~(a+i>>>0))>>>31)|0}})},function(e,t,r){var n=r(0);n(n.S,"Math",{isubh:function(e,t,r,n){var a=e>>>0,i=r>>>0;return(t>>>0)-(n>>>0)-((~a&i|~(a^i)&a-i>>>0)>>>31)|0}})},function(e,t,r){var n=r(0);n(n.S,"Math",{imulh:function(e,t){var r=+e,n=+t,a=65535&r,i=65535&n,o=r>>16,s=n>>16,c=(o*i>>>0)+(a*i>>>16);return o*s+(c>>16)+((a*s>>>0)+(65535&c)>>16)}})},function(e,t,r){var n=r(0);n(n.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(e,t,r){var n=r(0),a=Math.PI/180;n(n.S,"Math",{radians:function(e){return e*a}})},function(e,t,r){var n=r(0);n(n.S,"Math",{scale:r(352)})},function(e,t,r){var n=r(0);n(n.S,"Math",{umulh:function(e,t){var r=+e,n=+t,a=65535&r,i=65535&n,o=r>>>16,s=n>>>16,c=(o*i>>>0)+(a*i>>>16);return o*s+(c>>>16)+((a*s>>>0)+(65535&c)>>>16)}})},function(e,t,r){var n=r(0);n(n.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:e>0}})},function(e,t,r){"use strict";var n=r(0),a=r(33),i=r(6),o=r(87),s=r(339);n(n.P+n.R,"Promise",{finally:function(e){var t=o(this,a.Promise||i.Promise),r="function"==typeof e;return this.then(r?function(r){return s(t,e()).then((function(){return r}))}:e,r?function(r){return s(t,e()).then((function(){throw r}))}:e)}})},function(e,t,r){"use strict";var n=r(0),a=r(170),i=r(338);n(n.S,"Promise",{try:function(e){var t=a.f(this),r=i(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},function(e,t,r){var n=r(44),a=r(3),i=n.key,o=n.set;n.exp({defineMetadata:function(e,t,r,n){o(e,t,a(r),i(n))}})},function(e,t,r){var n=r(44),a=r(3),i=n.key,o=n.map,s=n.store;n.exp({deleteMetadata:function(e,t){var r=arguments.length<3?void 0:i(arguments[2]),n=o(a(t),r,!1);if(void 0===n||!n.delete(e))return!1;if(n.size)return!0;var c=s.get(t);return c.delete(r),!!c.size||s.delete(t)}})},function(e,t,r){var n=r(44),a=r(3),i=r(29),o=n.has,s=n.get,c=n.key,l=function(e,t,r){if(o(e,t,r))return s(e,t,r);var n=i(t);return null!==n?l(e,n,r):void 0};n.exp({getMetadata:function(e,t){return l(e,a(t),arguments.length<3?void 0:c(arguments[2]))}})},function(e,t,r){var n=r(342),a=r(351),i=r(44),o=r(3),s=r(29),c=i.keys,l=i.key,u=function(e,t){var r=c(e,t),i=s(e);if(null===i)return r;var o=u(i,t);return o.length?r.length?a(new n(r.concat(o))):o:r};i.exp({getMetadataKeys:function(e){return u(o(e),arguments.length<2?void 0:l(arguments[1]))}})},function(e,t,r){var n=r(44),a=r(3),i=n.get,o=n.key;n.exp({getOwnMetadata:function(e,t){return i(e,a(t),arguments.length<3?void 0:o(arguments[2]))}})},function(e,t,r){var n=r(44),a=r(3),i=n.keys,o=n.key;n.exp({getOwnMetadataKeys:function(e){return i(a(e),arguments.length<2?void 0:o(arguments[1]))}})},function(e,t,r){var n=r(44),a=r(3),i=r(29),o=n.has,s=n.key,c=function(e,t,r){if(o(e,t,r))return!0;var n=i(t);return null!==n&&c(e,n,r)};n.exp({hasMetadata:function(e,t){return c(e,a(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,r){var n=r(44),a=r(3),i=n.has,o=n.key;n.exp({hasOwnMetadata:function(e,t){return i(e,a(t),arguments.length<3?void 0:o(arguments[2]))}})},function(e,t,r){var n=r(44),a=r(3),i=r(20),o=n.key,s=n.set;n.exp({metadata:function(e,t){return function(r,n){s(e,t,(void 0!==n?a:i)(r),o(n))}}})},function(e,t,r){var n=r(0),a=r(169)(),i=r(6).process,o="process"==r(35)(i);n(n.G,{asap:function(e){var t=o&&i.domain;a(t?t.bind(e):e)}})},function(e,t,r){"use strict";var n=r(0),a=r(6),i=r(33),o=r(169)(),s=r(11)("observable"),c=r(20),l=r(3),u=r(61),d=r(63),h=r(21),p=r(62),f=p.RETURN,m=function(e){return null==e?void 0:c(e)},g=function(e){var t=e._c;t&&(e._c=void 0,t())},y=function(e){return void 0===e._o},v=function(e){y(e)||(e._o=void 0,g(e))},b=function(e,t){l(e),this._c=void 0,this._o=e,e=new _(this);try{var r=t(e),n=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){n.unsubscribe()}:c(r),this._c=r)}catch(t){return void e.error(t)}y(this)&&g(this)};b.prototype=d({},{unsubscribe:function(){v(this)}});var _=function(e){this._s=e};_.prototype=d({},{next:function(e){var t=this._s;if(!y(t)){var r=t._o;try{var n=m(r.next);if(n)return n.call(r,e)}catch(e){try{v(t)}finally{throw e}}}},error:function(e){var t=this._s;if(y(t))throw e;var r=t._o;t._o=void 0;try{var n=m(r.error);if(!n)throw e;e=n.call(r,e)}catch(e){try{g(t)}finally{throw e}}return g(t),e},complete:function(e){var t=this._s;if(!y(t)){var r=t._o;t._o=void 0;try{var n=m(r.complete);e=n?n.call(r,e):void 0}catch(e){try{g(t)}finally{throw e}}return g(t),e}}});var w=function(e){u(this,w,"Observable","_f")._f=c(e)};d(w.prototype,{subscribe:function(e){return new b(e,this._f)},forEach:function(e){var t=this;return new(i.Promise||a.Promise)((function(r,n){c(e);var a=t.subscribe({next:function(t){try{return e(t)}catch(e){n(e),a.unsubscribe()}},error:n,complete:r})}))}}),d(w,{from:function(e){var t="function"==typeof this?this:w,r=m(l(e)[s]);if(r){var n=l(r.call(e));return n.constructor===t?n:new t((function(e){return n.subscribe(e)}))}return new t((function(t){var r=!1;return o((function(){if(!r){try{if(p(e,!1,(function(e){if(t.next(e),r)return f}))===f)return}catch(e){if(r)throw e;return void t.error(e)}t.complete()}})),function(){r=!0}}))},of:function(){for(var e=0,t=arguments.length,r=new Array(t);e<t;)r[e]=arguments[e++];return new("function"==typeof this?this:w)((function(e){var t=!1;return o((function(){if(!t){for(var n=0;n<r.length;++n)if(e.next(r[n]),t)return;e.complete()}})),function(){t=!0}}))}}),h(w.prototype,s,(function(){return this})),n(n.G,{Observable:w}),r(60)("Observable")},function(e,t,r){var n=r(6),a=r(0),i=r(110),o=[].slice,s=/MSIE .\./.test(i),c=function(e){return function(t,r){var n=arguments.length>2,a=!!n&&o.call(arguments,2);return e(n?function(){("function"==typeof t?t:Function(t)).apply(this,a)}:t,r)}};a(a.G+a.B+a.F*s,{setTimeout:c(n.setTimeout),setInterval:c(n.setInterval)})},function(e,t,r){var n=r(0),a=r(168);n(n.G+n.B,{setImmediate:a.set,clearImmediate:a.clear})},function(e,t,r){for(var n=r(165),a=r(56),i=r(22),o=r(6),s=r(21),c=r(73),l=r(11),u=l("iterator"),d=l("toStringTag"),h=c.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=a(p),m=0;m<f.length;m++){var g,y=f[m],v=p[y],b=o[y],_=b&&b.prototype;if(_&&(_[u]||s(_,u,h),_[d]||s(_,d,y),c[y]=h,v))for(g in n)_[g]||i(_,g,n[g],!0)}},function(e,t,r){(function(t){!function(t){"use strict";var r=Object.prototype,n=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag",c="object"==typeof e,l=t.regeneratorRuntime;if(l)c&&(e.exports=l);else{(l=t.regeneratorRuntime=c?e.exports:{}).wrap=m;var u={},d={};d[i]=function(){return this};var h=Object.getPrototypeOf,p=h&&h(h(A([])));p&&p!==r&&n.call(p,i)&&(d=p);var f=b.prototype=y.prototype=Object.create(d);v.prototype=f.constructor=b,b.constructor=v,b[s]=v.displayName="GeneratorFunction",l.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},l.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(f),e},l.awrap=function(e){return{__await:e}},_(w.prototype),w.prototype[o]=function(){return this},l.AsyncIterator=w,l.async=function(e,t,r,n){var a=new w(m(e,t,r,n));return l.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(f),f[s]="Generator",f[i]=function(){return this},f.toString=function(){return"[object Generator]"},l.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},l.values=A,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return o.type="throw",o.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}}}function m(e,t,r,n){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),o=new E(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return P()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var s=x(o,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=g(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,o),i}function g(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function y(){}function v(){}function b(){}function _(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function w(e){function r(t,a,i,o){var s=g(e[t],e,a);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==typeof l&&n.call(l,"__await")?Promise.resolve(l.__await).then((function(e){r("next",e,i,o)}),(function(e){r("throw",e,i,o)})):Promise.resolve(l).then((function(e){c.value=e,i(c)}),o)}o(s.arg)}var a;"object"==typeof t.process&&t.process.domain&&(r=t.process.domain.bind(r)),this._invoke=function(e,t){function n(){return new Promise((function(n,a){r(e,t,n,a)}))}return a=a?a.then(n,n):n()}}function x(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=g(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function A(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:P}}function P(){return{value:void 0,done:!0}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,r(18))},function(e,t,r){r(771),e.exports=r(33).RegExp.escape},function(e,t,r){var n=r(0),a=r(772)(/[\\^$*+?.()|[\]{}]/g,"\\$&");n(n.S,"RegExp",{escape:function(e){return a(e)}})},function(e,t){e.exports=function(e,t){var r=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,r)}}},function(e,t,r){"use strict";r.r(t);var n=r(568),a=r(569),i=r.n(a);function o(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}function c(){return(c=s(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new n.Saito({mod_paths:i.a.lite})).BROWSER=1,e.next=4,t.init();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){c.apply(this,arguments)}()},function(e,t,r){(function(t){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r(5),r(172).set;var a=r(24),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t}var r,i,o;return r=e,(i=[{key:"u64FromBytes",value:function(e){var t=new a(this.u32FromBytes(e.slice(0,4))),r=new a(this.u32FromBytes(e.slice(4,8))),n=new a(4294967296);return t.times(n).plus(r)}},{key:"u64AsBytes",value:function(e){e=new a(e);var r=new a(4294967296),n=e.div(r).round(0,a.roundDown),i=e.minus(r.mul(n)),o=this.u32AsBytes(Number(n)),s=this.u32AsBytes(Number(i));return t.concat([new Uint8Array(o),new Uint8Array(s)])}},{key:"u32FromBytes",value:function(e){for(var t=0,r=0;r<e.length;++r)t+=e[r],r<e.length-1&&(t<<=8);return t}},{key:"u32AsBytes",value:function(e){var t=[],r=4;do{t[--r]=255&e,e>>=8}while(r);return t}},{key:"u8FromByte",value:function(e){return 0+e}},{key:"u8AsByte",value:function(e){return 255&e}}])&&n(r.prototype,i),o&&n(r,o),e}();e.exports=i}).call(this,r(4).Buffer)},function(e,t,r){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=l(e),o=n[0],s=n[1],c=new i(function(e,t,r){return 3*(t+r)/4-r}(0,o,s)),u=0,d=s>0?o-4:o;for(r=0;r<d;r+=4)t=a[e.charCodeAt(r)]<<18|a[e.charCodeAt(r+1)]<<12|a[e.charCodeAt(r+2)]<<6|a[e.charCodeAt(r+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;2===s&&(t=a[e.charCodeAt(r)]<<2|a[e.charCodeAt(r+1)]>>4,c[u++]=255&t);1===s&&(t=a[e.charCodeAt(r)]<<10|a[e.charCodeAt(r+1)]<<4|a[e.charCodeAt(r+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t);return c},t.fromByteArray=function(e){for(var t,r=e.length,a=r%3,i=[],o=0,s=r-a;o<s;o+=16383)i.push(u(e,o,o+16383>s?s:o+16383));1===a?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===a&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return i.join("")};for(var n=[],a=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=o.length;s<c;++s)n[s]=o[s],a[o.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function u(e,t,r){for(var a,i,o=[],s=t;s<r;s+=3)a=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(n[(i=a)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return o.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,r,n,a){var i,o,s=8*a-n-1,c=(1<<s)-1,l=c>>1,u=-7,d=r?a-1:0,h=r?-1:1,p=e[t+d];for(d+=h,i=p&(1<<-u)-1,p>>=-u,u+=s;u>0;i=256*i+e[t+d],d+=h,u-=8);for(o=i&(1<<-u)-1,i>>=-u,u+=n;u>0;o=256*o+e[t+d],d+=h,u-=8);if(0===i)i=1-l;else{if(i===c)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,n),i-=l}return(p?-1:1)*o*Math.pow(2,i-n)},t.write=function(e,t,r,n,a,i){var o,s,c,l=8*i-a-1,u=(1<<l)-1,d=u>>1,h=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),(t+=o+d>=1?h/c:h*Math.pow(2,1-d))*c>=2&&(o++,c/=2),o+d>=u?(s=0,o=u):o+d>=1?(s=(t*c-1)*Math.pow(2,a),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,a),o=0));a>=8;e[r+p]=255&s,p+=f,s/=256,a-=8);for(o=o<<a|s,l+=a;l>0;e[r+p]=255&o,p+=f,o/=256,l-=8);e[r+p-f]|=128*m}},function(e,t,r){(function(t){function n(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){i(o,n,a,s,c,"next",e)}function c(e){i(o,n,a,s,c,"throw",e)}s(void 0)}))}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=r(24),u=r(5),d={Ghost:0,Header:1,Pruned:2,Full:3},h=function(){function e(t){s(this,e),this.app=t||{},this.block={},this.block.id=0,this.block.timestamp=0,this.block.previous_block_hash="",this.block.merkle="",this.block.creator="",this.block.burnfee=BigInt(0),this.block.difficulty=0,this.block.treasury=BigInt(0),this.block.staking_treasury=BigInt(0),this.block.signature="",this.lc=0,this.transactions=[],this.block_type=d.Full,this.hash="",this.prehash="",this.filename="",this.total_fees=BigInt(0),this.total_work=BigInt(0),this.routing_work_for_creator=BigInt(0),this.is_valid=1,this.has_golden_ticket=!1,this.has_fee_transaction=!1,this.ft_idx=0,this.gt_idx=0,this.has_issuance_transaction=!1,this.has_hashmap_of_slips_spent_this_block=!1,this.slips_spent_this_block={},this.rebroadcast_hash="",this.total_rebroadcast_slips=0,this.total_rebroadcast_nolan=BigInt(0)}var r,a,i,h,p,f,m,g;return r=e,(a=[{key:"deserialize",value:function(e){var r=this.app.binary.u32FromBytes(e.slice(0,4));this.block.id=parseInt(this.app.binary.u64FromBytes(e.slice(4,12)).toString()),this.block.timestamp=parseInt(this.app.binary.u64FromBytes(e.slice(12,20)).toString()),this.block.previous_block_hash=t.from(e.slice(20,52)).toString("hex"),this.block.creator=t.from(e.slice(52,85)).toString("hex"),this.block.merkle=t.from(e.slice(85,117)).toString("hex"),this.block.signature=t.from(e.slice(117,181)).toString("hex"),this.block.treasury=BigInt(this.app.binary.u64FromBytes(e.slice(181,189))),this.block.staking_treasury=BigInt(this.app.binary.u64FromBytes(e.slice(189,197))),this.block.burnfee=BigInt(this.app.binary.u64FromBytes(e.slice(197,205))),this.block.difficulty=parseInt(this.app.binary.u64FromBytes(e.slice(205,213)));var n=213;"0000000000000000000000000000000000000000000000000000000000000000"===this.block.previous_block_hash&&(this.block.previous_block_hash=""),"0000000000000000000000000000000000000000000000000000000000000000"===this.block.merkle&&(this.block.merkle=""),"000000000000000000000000000000000000000000000000000000000000000000"===this.block.creator&&(this.block.creator=""),"00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"===this.block.signature&&(this.block.signature="");for(var a=0;a<r;a++){var i=this.app.binary.u32FromBytes(e.slice(n,n+4)),o=this.app.binary.u32FromBytes(e.slice(n+4,n+8)),s=this.app.binary.u32FromBytes(e.slice(n+8,n+12)),c=this.app.binary.u32FromBytes(e.slice(n+12,n+16)),l=n+u.transaction.TRANSACTION_SIZE+(i+o)*u.transaction.SLIP_SIZE+s+c*u.transaction.HOP_SIZE,d=new u.transaction(this.app);d.deserialize(this.app,e,n),this.transactions.push(d),n=l}}},{key:"downgradeBlockToBlockType",value:(g=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isType(t)){e.next=2;break}return e.abrupt("return",!0);case 2:if("Pruned"!==t){e.next=6;break}return this.block.transactions=[],this.block_type=d.Pruned,e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"deserializeFromNet",value:function(e){return this.deserialize()}},{key:"findWinningRouter",value:function(e){var t=BigInt("0x"+e),r=BigInt(this.returnFeesTotal());if(0==r)return"";var n=t%r;winning_tx=this.transactions[0];for(var a=0;a<this.transactions.length&&!(this.transactions[a].transaction.cumulative_fees>n);a++)winning_tx=this.transactions[a];if(winning_tx.returnTransactionType==u.transaction.TransactionType.ATR){var i=winning_tx.returnMessage(),o=new u.transaction;o.deserialize(i),winning_tx=o}var s=this.app.crypto.hash(e);return winning_tx.returnWinningRoutingNode(s)}},{key:"isType",value:function(e){return"Ghost"==e?this.block_type===d.Ghost:"Pruned"==e?this.block_type===d.Pruned:"Header"==e?this.block_type===d.Header:"Full"==e?this.block_type===d.Full:void 0}},{key:"generateConsensusValues",value:(m=o(regeneratorRuntime.mark((function e(){var t,r,n,a,i,o,s,c,l,d,h,p,f,m,g,y,v,b,_,w,x,k,S,E,A,P,C,D,T,O,M,I,R,F,B,j,N,q,L,U,z,H,$;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=3,(r={}).total_fees=BigInt(0),r.ft_num=0,r.gt_num=0,r.it_num=0,r.ft_idx=0,r.gt_idx=0,r.it_idx=0,r.expected_difficulty=1,r.total_rebroadcast_nolan=BigInt(0),r.total_rebroadcast_fees_nolan=BigInt(0),r.total_rebroadcast_slips=0,r.nolan_falling_off_chain=BigInt(0),r.rebroadcast_hash="",r.staking_treasury=BigInt(0),r.rebroadcasts=[],r.block_payouts=[],r.fee_transaction=null,n=0;n<this.transactions.length;n++)this.transactions[n].isFeeTransaction()?(r.ft_num+=1,r.ft_idx=n,this.has_fee_transaction=!0,this.ft_idx=n):r.total_fees+=this.transactions[n].returnFeesTotal(),this.transactions[n].isGoldenTicket()&&(r.gt_num+=1,r.gt_idx=n,this.has_golden_ticket=!0,this.gt_idx=n),this.transactions[n].isIssuanceTransaction()&&(r.it_num+=1,r.it_idx=n,this.has_issuance_transaction=!0);return e.next=22,this.app.blockchain.loadBlockAsync(this.block.previous_block_hash);case 22:if((a=e.sent)&&(i=a.returnDifficulty(),a.hasGoldenTicket()&&0==r.gt_num?i>0&&(r.expected_difficulty=a.returnDifficulty()-1):a.hasGoldenTicket()&&r.gt_num>0?r.expected_difficulty=i+1:r.expected_difficulty=i),!(this.block.id>this.app.blockchain.returnGenesisPeriod())){e.next=31;break}return o=this.block.id-this.app.blockchain.returnGenesisPeriod(),s=this.app.blockring.returnLongestChainBlockHashByBlockId(o),e.next=29,this.blockchain.loadBlockAync(s);case 29:if(c=e.sent)for(l=0;l<c.transactions.length;l++)for(d=c.transactions[l],h=0;h<d.to.length;h++)p=d.to[h],f=BigInt(2e8),p.validate(this.app)&&(p.returnAmount()>f?(r.total_rebroadcast_nolan+=p.returnAmount(),r.total_rebroadcast_fees_nolan+=f,r.total_rebroadcast_slips+=1,(m=new u.transaction).generateRebroadcastTransaction(this.app,p,f),r.rebroadcast_hash=this.app.crypto.hash(r.rebroadcast_hash+m.serialize_for_signature())):r.total_rebroadcast_fees_nolan+=p.returnAmount());case 31:if(!(r.gt_idx>0)){e.next=94;break}if(g=this.transactions[r.gt_idx],y=this.app.goldenticket.deserialize(g.transaction.m),v=this.app.crypto.hash(y.random_bytes),b=y.creator,!a){e.next=89;break}_=a.returnFeesTotal()/BigInt(2),w=a.returnFeesTotal()/BigInt(2),(x={miner:"",staker:"",router:"",miner_payout:BigInt(0),staker_payout:BigInt(0),router_payout:BigInt(0),staking_treasury:BigInt(0),staker_slip:null,random_number:v}).router=a.findWinningRouter(v),x.miner=b,x.miner_payout=_,x.router_payout=w,v=this.app.crypto.hash(v),v=this.app.crypto.hash(v),r.block_payouts.push(x),k=1,S=0,E=a.hasGoldenTicket(),A=a.returnPreviousBlockHash();case 51:if(1!=k){e.next=89;break}if(!((S+=1)>=t)){e.next=57;break}k=0,e.next=87;break;case 57:return e.next=59,this.app.blockchain.loadBlockAsync(A);case 59:if(!(P=e.sent)){e.next=87;break}if(A=P.returnPreviousBlockHash(),E){e.next=87;break}if(E=P.hasGoldenTicket(),C=P.returnFeesTotal()/BigInt(2),D=P.returnFeesTotal()-C,(T={miner:"",staker:"",router:"",miner_payout:BigInt(0),staker_payout:BigInt(0),router_payout:BigInt(0),staking_treasury:BigInt(0),staker_slip:null,random_number:v}).router=P.findWinningRouter(v),T.router_payout=D,T.staking_treasury=C,v=this.app.crypto.hash(v),v=this.app.crypto.hash(v),!(O=this.app.staking.findWinningStaker(v))){e.next=87;break}M=0,I=0;case 76:if(!(I<r.block_payouts.length)){e.next=83;break}if(r.block_payouts[I].staker_slip.returnKey()!==O.returnKey()){e.next=80;break}return M=1,e.abrupt("break",83);case 80:I++,e.next=76;break;case 83:this.slips_spent_this_block.includes(O.returnKey())&&(M=1),0==M&&(T.staker=O.returnPublicKey(),T.staker_payout=O.returnAmount()+O.returnPayout(),T.staker_slip=O.clone()),v=this.app.crypto.hash(v),r.block_payouts.push(T);case 87:e.next=51;break;case 89:for(R=0,(F=new u.transaction).transaction.type=u.transaction.TransactionType.Fee,B=0;B<r.block_payouts.length;B++)""!==r.block_payout[B].miner&&((j=new u.slip).add=r.block_payout[B].miner,j.amt=r.block_payout[B].miner_payout,j.type=u.slip.SlipType.MinerOutput,j.sid=R,F.addOutput(j.clone()),R+=1),""!==r.block_payout[B].router&&((N=new u.slip).add=r.block_payout[B].router,N.amt=r.block_payout[B].router_payout,N.type=u.slip.SlipType.RouterOutput,N.sid=R,F.addOutput(N.clone()),R+=1),""!==r.block_payout[B].router&&((q=new u.slip).add=r.block_payout[B].router,q.amt=r.block_payout[B].router_payout,q.type=u.slip.SlipType.RouterOutput,q.sid=R,F.addOutput(q.clone()),R+=1),""!==r.block_payout[B].staker&&((L=new u.slip).add=r.block_payout[B].staker,L.amt=r.block_payout[B].staker_payout,L.type=u.slip.SlipType.StakerOutput,L.sid=R,F.addOutput(L.clone()),R+=1,r.staking_treasury+=r.block_payout[B].staking_treasury,r.staking_treasury-=r.block_payout[B].staker_payout);r.fee_transaction=F;case 94:if(0!=r.gt_num){e.next=114;break}U=1;case 96:if(!(U<=t)){e.next=114;break}if(!(U>=this.returnId())){e.next=99;break}return e.abrupt("break",114);case 99:if(z=this.returnId()-U,""==(H=this.app.blockring.returnLongestChainBlockHashByBlockId(z))){e.next=111;break}return e.next=104,this.app.blockchain.loadBlockAsync(H);case 104:if(!($=e.sent)){e.next=111;break}if(!$.hasGoldenTicket()){e.next=110;break}return e.abrupt("break",114);case 110:U==t&&(r.nolan_falling_off_chain=$.returnFeesTotal());case 111:U++,e.next=96;break;case 114:return e.abrupt("return",r);case 115:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"generate",value:(f=o(regeneratorRuntime.mark((function e(t){var r,n,a,i,o,s,c,l,u,d,h,p,f,m,g,y,v,b,_=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_.length>1&&void 0!==_[1]?_[1]:null,n=0,a=0,i=0,o=BigInt(0),s=BigInt(0),c=BigInt(0),l=(new Date).getTime(),e.next=10,r.app.blockchain.loadBlockAsync(t);case 10:for((u=e.sent)&&(n=u.block.id,o=u.block.burnfee,a=u.block.timestamp,i=u.block.difficulty,s=u.block.treasury,c=u.block.staking_treasury),d=this.app.burnfee.returnBurnFeeForBlockProducedAtCurrentTimestampInNolan(o,l,a),this.block.id=n+1,this.block.previous_block_hash=t,this.block.burnfee=d,this.block.timestamp=l,this.block.difficulty=i,this.transactions=r.mempool.transactions,r.mempool.transactions=[],h=0;h<r.mempool.golden_tickets.length;h++)r.golden_tickets[h].returnMessage()===t&&(this.transactions.unshift(r.golden_tickets[h]),this.has_golden_ticket=1,r.golden_tickets.splice(h,1),h=r.mempool.golden_tickets.length+2);return e.next=23,this.generateConsensusValues(this.app);case 23:for(p=e.sent,f=p.rebroadcasts.length,m=0;m<f;m++)p.rebroadcasts[m].generateMetadata(this.app.wallet.returnPublicKey()),this.transactions.push(p.rebroadcasts[m]);for(null!=p.fee_transaction&&(p.fee_transaction.sign(this.app),this.add_transaction(p.fee_transaction)),g=0;g<this.transactions.length;g++)if(!this.transactions[g].isFeeTransaction())for(y=0;y<this.transactions[g].transaction.from.length;y++)this.slips_spent_this_block[this.transactions[g].transaction.from[y].returnKey()]=1;this.created_hashmap_of_slips_spent_this_block=!0,this.block.difficulty=p.expected_difficulty,0!=p.nolan_falling_off_chain&&this.block.treasury(s+p.nolan_falling_off_chain),0!=p.staking_treasury&&(v=c,p.staking_treasury<0?(b=-1*p.staking_treasury,v>b?v-=b:v=0):v+=p.staking_treasury),this.block.merkle=this.generateMerkleRoot(),this.sign(this.app.wallet.returnPublicKey(),this.app.wallet.returnPrivateKey()),this.bundling_active=!1;case 35:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"generateMetadata",value:function(){this.generateHashes();var e=this.returnCreator();this.transactions.map((function(t){return t.generateMetadata(e)}));for(var t=0,r=0,a=!1,i=!1,o=!1,s=0,c=0,l=0,d=0;d<this.transactions.length;d++){var h=this.transactions[d];if(t=h.generateMetadataCumulativeFees(t),r=h.generateMetadataCumulativeWork(r),!this.has_hashmap_of_slips_spent_this_block&&h.transaction.type!==u.transaction.TransactionType.Fee){for(var p=0;p<h.transaction.from.length;p++){var f=h.transaction.from[p].returnKey();this.slips_spent_this_block[f]=1}this.has_hashmap_of_slips_spent_this_block=!0}switch(h.transaction.type){case u.transaction.TransactionType.Issuance:o=!0,s=d;break;case u.transaction.TransactionType.Fee:i=!0,l=d;break;case u.transaction.TransactionType.GoldenTicket:a=!0,c=d;break;case u.transaction.TransactionType.ATR:var m=new Uint8Array([].concat(n(this.rebroadcast_hash),n(h.serializeForSignature(this.app))));this.rebroadcast_hash=this.app.crypto.hash(m);for(var g=0;g<h.transaction.from.length;g++){var y=h.transaction.from[g];this.total_rebroadcast_slips+=1,this.total_rebroadcast_nolan+=y.returnAmount()}}}return this.has_fee_tranasction=i,this.has_golden_ticket=a,this.has_issuance_transaction=o,this.fee_transaction_idx=l,this.golden_ticket_idx=c,this.issuance_transaction_idx=s,this.total_fees=t,this.routing_work_for_creator=r,!0}},{key:"generateHashes",value:function(){this.hash=this.returnHash()}},{key:"hasFeeTransaction",value:function(){return this.has_fee_transaction}},{key:"hasGoldenTicket",value:function(){return this.has_golden_ticket}},{key:"hasIssuanceTransaction",value:function(){return this.has_issuance_transaction}},{key:"onChainReorganization",value:function(e){for(var t=this.returnId(),r=0;r<this.transactions.length;r++)this.transactions[r].onChainReorganization(this.app,e,t)}},{key:"asReadableString",value:function(){var e="";e+="\n Block ".concat(this.block.id," - ").concat(this.returnHash(),"\n   timestamp:   ").concat(this.block.timestamp,"\n   prevblock:   ").concat(this.block.previous_block_hash,"\n   merkle:      ").concat(this.block.merkle,"\n   burnfee:     ").concat(this.block.burnfee.toString(),"\n   difficulty:  ").concat(this.block.difficulty,"\n   streasury:   ").concat(this.block.staking_treasury.toString(),"\n   *** transactions ***\n");for(var t=0;t<this.transactions.length;t++)e+=this.transactions[t].asReadableString(),e+="\n";return e}},{key:"returnBurnFee",value:function(){return this.block.burnfee}},{key:"returnCreator",value:function(){return this.block.creator}},{key:"returnFeeTransaction",value:function(){return this.has_fee_transaction?0==this.transactions.length?null:this.transactions[this.ft_idx]:null}},{key:"returnGoldenTicketTransaction",value:function(){return this.has_golden_ticket?0==this.transactions.length?null:this.transactions[this.gt_idx]:null}},{key:"returnDifficulty",value:function(){return this.block.difficulty}},{key:"returnFilename",value:function(){return this.filename}},{key:"returnHash",value:function(){return this.hash||(this.prehash=this.app.crypto.hash(this.serializeForSignature()),this.hash=this.app.crypto.hash(this.prehash+this.block.previous_block_hash)),this.hash}},{key:"returnId",value:function(){return this.block.id}},{key:"generateMerkleRoot",value:function(){if(0==this.transactions.length&&(1==this.app.BROWSER||1==this.app.SPVMODE))return this.block.merkle;for(var e="",t=[],r=0;r<this.transactions.length;r++)this.transactions[r].transaction.type==u.transaction.TransactionType.SPV?t.push(this.transactions[r].transaction.sig):t.push(this.app.crypto.hash(this.transactions[r].serializeForSignature(this.app)));for(;""==e;){var n=[];if(t.length<=2)e=1==t.length?t[0]:this.app.crypto.hash(""+t[0]+t[1]);else{for(var a=0;a<t.length;a++)a<=t.length-2?(n.push(this.app.crypto.hash(""+t[a]+t[a+1])),a++):n.push(t[a]);t=n}}return e}},{key:"returnPreviousBlockHash",value:function(){return this.block.previous_block_hash}},{key:"returnStakingTreasury",value:function(){return this.block.staking_treasury}},{key:"returnTreasury",value:function(){return this.block.treasury}},{key:"returnTimestamp",value:function(){return this.block.timestamp}},{key:"serialize",value:function(){var e=this.block.previous_block_hash,t=this.block.merkle,r=this.block.creator,a=this.block.signature,i=this.app.binary.u32AsBytes(0);this.transactions.length>0&&(i=this.app.binary.u32AsBytes(this.transactions.length));for(var o=this.app.binary.u64AsBytes(this.block.id),s=this.app.binary.u64AsBytes(this.block.timestamp),c=this.app.crypto.toSizedArray(e,32),u=this.app.crypto.toSizedArray(r,33),d=this.app.crypto.toSizedArray(t,32),h=this.app.crypto.toSizedArray(a,64),p=this.app.binary.u64AsBytes(this.block.treasury.toString()),f=this.app.binary.u64AsBytes(this.block.staking_treasury.toString()),m=this.app.binary.u64AsBytes(this.block.burnfee.toString()),g=this.app.binary.u64AsBytes(new l(this.block.difficulty)),y=new Uint8Array([].concat(n(i),n(o),n(s),n(c),n(u),n(d),n(h),n(p),n(f),n(m),n(g))),v=0,b=[],_=0;_<this.transactions.length;_++){var w=this.transactions[_].serialize(this.app);v+=w.length,b.push(w)}var x=new Uint8Array(213+v);x.set(y,0);for(var k=213,S=0;S<b.length;S++)x.set(b[S],k),k+=b[S].length;return x}},{key:"serializeForNet",value:function(){return this.serialize()}},{key:"serializeForSignature",value:function(){return Uint8Array.from(t.concat([this.app.binary.u64AsBytes(this.block.id),this.app.binary.u64AsBytes(this.block.timestamp),this.app.crypto.toSizedArray(this.block.previous_block_hash,32),this.app.crypto.toSizedArray(this.block.creator,33),this.app.crypto.toSizedArray(this.block.merkle,32),this.app.binary.u64AsBytes(this.block.treasury.toString()),this.app.binary.u64AsBytes(new l(this.block.staking_treasury.toString())),this.app.binary.u64AsBytes(new l(this.block.burnfee.toString())),this.app.binary.u64AsBytes(new l(this.block.difficulty))]))}},{key:"sign",value:function(e,r){this.block.creator=e,this.block.signature=this.app.crypto.signBuffer(this.app.crypto.hash(t.from(this.serializeForSignature())),r)}},{key:"validate",value:(p=o(regeneratorRuntime.mark((function e(){var t,r,n,a,i,o,s,c,u,d,h,p,f,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.transactions.length){e.next=3;break}return console.log("ERROR 582034: no transactions in blocks, thus invalid"),e.abrupt("return",!1);case 3:if(this.app.crypto.verifyHash(this.app.crypto.hash(this.serializeForSignature()),this.block.signature,this.block.creator)){e.next=6;break}return console.log("ERROR 582039: block is not signed by creator or signature does not validate"),e.abrupt("return",!1);case 6:return e.next=8,this.generateConsensusValues(this.app);case 8:if(!((t=e.sent).it_num>0&&this.get_id()>1)){e.next=12;break}return console.log("ERROR 712923: blockchain contains issuance after block 1 in chain"),e.abrupt("return",!1);case 12:return e.next=14,this.app.blockchain.loadBlockAsync(this.block.previous_block_hash);case 14:if(!(r=e.sent)){e.next=42;break}if(l(this.returnTreasury()).toString()===l(r.returnTreasury()).plus(l(t.nolan_falling_off_chain)).toString()){e.next=19;break}return console.log("ERROR 123243: treasury is not calculated properly"),e.abrupt("return",!1);case 19:if(n=l(r.returnStakingTreasury()),(a=l(t.staking_treasury)).lt(0)?(i=a.times(-1),n=n.lt(i)?n.minus(i):l(0)):(o=a,n=n.plus(o)),this.returnStakingTreasury()==n.toString()){e.next=25;break}return console.log("ERROR 820391: staking treasury does not validate"),e.abrupt("return",!1);case 25:if(this.app.burnfee.returnBurnFeeForBlockProducedAtCurrentTimestampInNolan(r.returnBurnFee(),this.returnTimestamp(),r.returnTimestamp())==this.returnBurnFee()){e.next=29;break}return console.log("ERROR 182085: burn fee not calculated properly thus invalid"),e.abrupt("return",!1);case 29:if(s=this.app.burnfee.returnRoutingWorkNeededToProduceBlockInNolan(r.returnBurnFee(),this.returnTimestamp(),r.returnTimestamp()),!(this.routing_work_for_creator<s)){e.next=33;break}return console.log("ERROR 510293: block lacking adequate routing work from creator"),e.abrupt("return",!1);case 33:if(!(t.gt_idx>0)){e.next=40;break}if(c=this.transactions[t.gt_idx],u=this.app.goldenticket.deserialize(c.transaction.m),d=this.app.goldenticket.generateSolution(r.returnHash(),u.target_hash,u.random_bytes,u.creator),this.app.goldenticket.isValidSolution(d,r.returnDifficulty())){e.next=40;break}return console.log("ERROR 801923: golden ticket included in block is invalid"),e.abrupt("return",!1);case 40:e.next=42;break;case 42:if(t.total_rebroadcast_slips==this.total_rebroadcast_slips){e.next=45;break}return console.log("ERROR 624442: rebroadcast slips total incorrect"),e.abrupt("return",!1);case 45:if(t.total_rebroadcast_nolan==this.total_rebroadcast_nolan){e.next=48;break}return console.log("ERROR 294018: rebroadcast nolan amount incorrect: ".concat(t.total_rebroadcast_nolan," - ").concat(this.total_rebroadcast_nolan)),e.abrupt("return",!1);case 48:if(t.rebroadcast_hash==this.rebroadcast_hash){e.next=51;break}return console.log("ERROR 123422: hash of rebroadcast transactions incorrect"),e.abrupt("return",!1);case 51:if(this.block.merkle==this.generateMerkleRoot()){e.next=54;break}return console.log("merkle root is unset or is invalid false 1"),e.abrupt("return",!1);case 54:if(!(t.ft_num>0)){e.next=65;break}if(0!=t.gt_num){e.next=58;break}return console.log("ERROR 48203: fee transaction exists but no golden ticket, thus invalid"),e.abrupt("return",!1);case 58:if(h=this.transactions[t.ft_idx],t.fee_transaction.generateMetadata(this.returnCreator()),p=this.app.crypto.hash(h.serializeForSignature()),f=this.app.crypto.hash(t.fee_transaction.serialize_for_signature()),p==f){e.next=65;break}return console.log("ERROR 892032: block {} fee transaction doesn't match cv fee transaction"),e.abrupt("return",!1);case 65:if(t.expected_difficulty==this.returnDifficulty()){e.next=68;break}return console.log("ERROR 202392: difficulty is invalid - "+t.expected_difficulty+" versus "+this.returnDifficulty()),e.abrupt("return",!1);case 68:m=0;case 69:if(!(m<this.transactions.length)){e.next=77;break}if(this.transactions[m].validate(this.app)){e.next=74;break}return console.log("ERROR 579128: transaction is invalid"),e.abrupt("return",!1);case 74:m++,e.next=69;break;case 77:return e.abrupt("return",!0);case 78:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"upgradeBlockToBlockType",value:(h=o(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isType(t)){e.next=2;break}return e.abrupt("return",!0);case 2:if("Full"!==t){e.next=11;break}return e.next=5,this.app.storage.loadBlockByFilename(this.app.storage.generateBlockFilename(this));case 5:return(r=e.sent).generateHashes(),this.transactions=r.transactions,this.generateMetadata(),this.block_type=d.Full,e.abrupt("return",!0);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})}])&&c(r.prototype,a),i&&c(r,i),e}();h.BlockType=d,e.exports=h}).call(this,r(4).Buffer)},function(e,t,r){function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=i(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw o}}}}function i(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){s(i,n,a,o,c,"next",e)}function c(e){s(i,n,a,o,c,"throw",e)}o(void 0)}))}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}saito=r(5);r(24);var u=r(354),d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t||{},this.blockchain={},this.blockchain.fork_id="",this.blockchain.last_block_hash="",this.blockchain.last_block_id="",this.blockchain.last_timestamp=(new Date).getTime(),this.blockchain.last_burnfee=0,this.blockchain.genesis_period=10,this.blockchain.genesis_block_id=0,this.blockchain.genesis_timestamp=0,this.blockchain.lowest_acceptable_timestamp=0,this.blockchain.lowest_acceptable_block_hash="",this.blockchain.lowest_acceptable_block_id=0,this.blockring=new saito.blockring(this.app,this.blockchain.genesis_period),this.staking=new saito.staking(this.app),this.blocks={},this.utxoset=new u,this.prune_after_blocks=20,this.indexing_active=!0}var t,r,i,o,s,d,h,p,f,m,g,y,v,b,_,w;return t=e,(r=[{key:"addBlockToBlockchain",value:(w=c(regeneratorRuntime.mark((function e(t){var r,n,a,i,o,s,c,l,u,d,h=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.length>1&&void 0!==h[1]&&h[1],this.indexing_active=!0,t.generateHashes(),r=t.returnHash(),n=t.returnId(),a=t.returnDifficulty(),i=this.app.blockring.returnLatestBlockHash(),!this.isBlockIndexed(r)){e.next=11;break}return console.log("ERROR 581023: block exists in blockchain index"),this.indexing_active=!1,e.abrupt("return");case 11:this.app.blockring.containsBlockHashAtBlockId(n,r)||this.app.blockring.addBlock(t),this.isBlockIndexed(r)||(this.blocks[r]=t),o=[],s=[],c=!1,l=r,u=i;case 18:if(c){e.next=34;break}if(!this.blocks[l]){e.next=31;break}if(1!=this.blocks[l].lc){e.next=25;break}return c=!0,e.abrupt("break",34);case 25:if(""!==l){e.next=27;break}return e.abrupt("break",34);case 27:o.push(l),l=this.blocks[l].block.previous_block_hash,e.next=32;break;case 31:return e.abrupt("break",34);case 32:e.next=18;break;case 34:if(!c){e.next=49;break}case 35:if(l!==u){e.next=38;break}return e.abrupt("break",47);case 38:if(!this.blocks[u]){e.next=45;break}if(s.push(u),""!==(u=this.blocks[u].block.previous_block_hash)){e.next=43;break}return e.abrupt("break",47);case 43:if(l!==u){e.next=45;break}return e.abrupt("break",47);case 45:e.next=35;break;case 47:e.next=50;break;case 49:this.app.blockring.isEmpty()||console.log("potential edge case requires handling: blocks received out-of-order");case 50:if(d=this.isNewChainTheLongestChain(o,s),this.app.blockring.is_empty=!1,!d){e.next=73;break}return e.next=55,this.validate(o,s);case 55:if(!e.sent){e.next=66;break}return e.next=59,this.addBlockSuccess(t);case 59:return this.blocks[r].lc=1,this.app.connection.emit("BlockchainAddBlockSuccess",r),this.app.connection.emit("BlockchainNewLongestChainBlock",{block_hash:r,block_difficulty:a}),this.indexing_active=!1,e.abrupt("return",1);case 66:return e.next=68,this.addBlockFailure(t);case 68:return this.app.connection.emit("BlockchainAddBlockFailure",r),this.indexing_active=!1,e.abrupt("return",0);case 71:e.next=78;break;case 73:return e.next=75,this.addBlockSuccess(t);case 75:return this.app.connection.emit("BlockchainAddBlockSuccess",r),this.indexing_active=!1,e.abrupt("return",1);case 78:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"addBlockSuccess",value:(_=c(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.returnId(),t.isType("Header")){e.next=4;break}return e.next=4,this.app.storage.saveBlock(t);case 4:console.log("is our block indexed now? "+this.isBlockIndexed(t.returnHash())),this.app.mempool.removeBlockAndTransactions(t),console.log(t.asReadableString());case 7:case"end":return e.stop()}}),e,this)}))),function(e){return _.apply(this,arguments)})},{key:"addBlockFailure",value:(b=c(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.app.mempool.removeBlockAndTransactions(t);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"deleteBlocks",value:(v=c(regeneratorRuntime.mark((function e(t){var r,i,o,s,c,l,u,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],i=this.blockring.returnBlockHashesAtBlockId(t),o=a(i);try{for(o.s();!(s=o.n()).done;)c=s.value,r.push(n(c))}catch(e){o.e(e)}finally{o.f()}l=0,u=r;case 5:if(!(l<u.length)){e.next=12;break}return d=u[l],e.next=9,this.deleteBlock(t,d);case 9:l++,e.next=5;break;case 12:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"deleteBlock",value:(y=c(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.blocks[r],a=this.app.storage.generateBlockFilename(n),this.app.wallet.deleteBlock(n),e.next=6,n.delete(this.utxoset);case 6:this.app.storage.deleteBlockFromDisk(a),this.blockring.deleteBlock(t,r),this.isBlockIndexed(r)&&delete this.blocks[r];case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return y.apply(this,arguments)})},{key:"downgradeBlockchainData",value:(g=c(regeneratorRuntime.mark((function e(){var t,r,i,o,s,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.prune_after_blocks>this.app.blockring.returnLatestBlockId())){e.next=2;break}return e.abrupt("return");case 2:this.app.blockring.returnLatestBlockId(),this.prune_after_blocks,t=this.blockring.returnBlockHashesAtBlockId(pruneBlocksAtBlockId),r=a(t);try{for(r.s();!(i=r.n()).done;)o=i.value,blockHashesCopy.push(n(o))}catch(e){r.e(e)}finally{r.f()}s=a(blockHashesCopy),e.prev=8,s.s();case 10:if((c=s.n()).done){e.next=16;break}return l=c.value,e.next=14,this.blocks[l].downgradeBlockToBlockType(Block.BlockType.Pruned);case 14:e.next=10;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(8),s.e(e.t0);case 21:return e.prev=21,s.f(),e.finish(21);case 24:case"end":return e.stop()}}),e,this,[[8,18,21,24]])}))),function(){return g.apply(this,arguments)})},{key:"generateForkId",value:function(e){for(var t=new Array(32).fill(0).toString(),r=e,n=0;n<10;n++)(r-n)%10==0&&(r-=n);for(var a=[0,10,10,10,10,10,25,25,100,300,500,4e3,1e4,2e4,5e4,1e5],i=0;i<16&&!((r-=a[i])>e||0===r);++i){var o=2*i;this.blockring.returnLongestChainBlockHashByBlockId(r),forkId[o]=blockHash[o],forkId[o+1]=blockHash[o+1]}return t}},{key:"updateGenesisPeriod",value:(m=c(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=t.returnId())>=2*this.returnGenesisPeriod()+1)){e.next=10;break}return n=r-2*this.returnGenesisPeriod(),this.blockchain.genesis_block_id=r-this.returnGenesisPeriod(),e.next=6,this.deleteBlocks(n);case 6:this.blockchain.genesis_block_id=n+1,this.blockchain.genesis_block_hash=this.app.blockring.returnLongestChainBlockHashAtBlockId(n+1),(a=this.blocks[this.blockchain.genesis_block_hash])&&(this.blockchain.genesis_timestamp=a.returnTimestamp());case 10:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"generateLastSharedAncestor",value:function(e,t){var r=this.app.blockring.returnLatestBlockId(),n=e,a=r,i=[0,10,10,10,10,10,25,25,100,300,500,4e3,1e4,2e4,5e4,1e5];if(e>=r){for(var o=0;o<10;o++)if((n-o)%10==0){n-=o;break}for(var s=n,c=0;c<16;++c)if((s-=i[c])<a&&s>0){var l=2*c,u=this.app.blockring.returnLongestChainBlockHashByBlockId(n);if(t[l]==u[l]&&t[l+1]==u[l+1])return s}return 0}for(var d=0;d<10;d++)if((a-d)%10==0){a-=d;break}for(var h=a,p=0;p<16;++p)if((h-=i[p])<=e&&h>0){var f=2*p,m=this.app.blockring.returnLongestChainBlockHashByBlockId(h);if(t[f]==m[f]&&t[f+1]==m[f+1])return h}return 0}},{key:"initialize",value:(f=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.app.mempool.bundling_active=!0,this.indexing_active=!1,e.next=4,this.app.storage.loadBlocksFromDisk();case 4:this.app.miner.startMining(this.returnLatestBlockHash(),this.returnDifficulty()),this.app.mempool.bundling_active=!1;case 6:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"isNewChainTheLongestChain",value:function(e,t){if(this.app.blockring.isEmpty())return!0;if(t.length>e.length)return!1;if(this.app.blockring.returnLatestBlockId()>=this.blocks[e[0]].block.id)return!1;for(var r=BigInt(0),n=BigInt(0),a=0;a<t.length;a++)r+=this.blocks[t[a]].block.burnfee;for(var i=0;i<e.length;i++)n+=this.blocks[e[i]].block.burnfee;return t.length<e.length&&r<=n}},{key:"isBlockIndexed",value:function(e){return!!this.blocks[e]}},{key:"loadBlockAsync",value:(p=c(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.blocks[t]){e.next=2;break}return e.abrupt("return",this.blocks[t]);case 2:return e.abrupt("return",null);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"onChainReorganization",value:(h=c(regeneratorRuntime.mark((function e(t){var r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>1&&void 0!==r[1]&&r[1])){e.next=11;break}return this.blockchain.last_block_hash=t.returnHash(),this.blockchain.last_block_id=t.returnId(),this.blockchain.last_timestamp=t.returnTimestamp(),this.blockchain.last_burnfee=t.returnBurnFee(),0==this.blockchain.lowest_acceptable_timestamp&&(this.blockchain.lowest_acceptable_timestamp=t.returnTimestamp(),this.blockchain.lowest_acceptable_block_hash=t.returnHash(),this.blockchain.lowest_acceptable_block_id=t.returnId()),e.next=9,this.updateGenesisPeriod(t);case 9:this.blockchain.fork_id=this.generateForkId(t.returnId()),this.saveBlockchain();case 11:return e.next=13,this.downgradeBlockchainData();case 13:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"resetBlockchain",value:function(){this.blockchain.last_block_hash="",this.blockchain.last_block_id="",this.blockchain.last_timestamp=(new Date).getTime(),this.blockchain.last_burnfee=0,this.blockchain.genesis_block_id=0,this.blockchain.genesis_timestamp=0,this.blockchain.lowest_acceptable_timestamp=0,this.blockchain.lowest_acceptable_block_hash="",this.blockchain.lowest_acceptable_block_id=0,this.saveBlockchain()}},{key:"returnDifficulty",value:function(){return 1}},{key:"returnGenesisPeriod",value:function(){return this.blockchain.genesis_period}},{key:"returnLowestSpendableBlock",value:function(){return 0}},{key:"returnLatestBlock",value:function(){return this.app.blockring.returnLatestBlock()}},{key:"returnLatestBlockHash",value:function(){return this.app.blockring.returnLatestBlockHash()}},{key:"returnLatestBlockId",value:function(){return this.app.blockring.returnLatestBlockId()}},{key:"saveBlockchain",value:function(){this.app.options.blockchain=this.blockchain,this.app.storage.saveOptions()}},{key:"unwindChain",value:(d=c(regeneratorRuntime.mark((function e(t,r,n,a){var i,o,s,c,l,u,d,h,p,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadBlockAsync(r[current_unwind_index]);case 2:return(i=e.sent).onChainReorganization(!1),this.app.blockring.onChainReorganization(i.returnId(),i.returnHash(),!1),o=this.staking.onChainReorganization(i,!1),s=o.res_spend,c=o.res_unspend,l=o.res_delete,e.next=9,this.onChainReorganization(i,!1);case 9:for(u=0;u<s.length;u++);for(d=0;d<c.length;d++);for(h=0;h<l.length;h++);if(current_unwind_index!=r.length-1){e.next=19;break}return e.next=15,this.windChain(t,r,t.length-1,a);case 15:return p=e.sent,e.abrupt("return",p);case 19:return e.next=21,this.unwindChain(t,r,current_unwind_index+1,a);case 21:return f=e.sent,e.abrupt("return",f);case 23:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return d.apply(this,arguments)})},{key:"validate",value:(s=c(regeneratorRuntime.mark((function e(t,r){var n,a,i,o,s,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0,a=0,i=t[0],o=2,s=6,c=0;case 6:if(!(c<s)){e.next=22;break}if(a+=1,!this.blocks[i]){e.next=18;break}if(l=this.blocks[i],0!=c){e.next=14;break}if(!(l.returnId()<s)){e.next=14;break}return n=s,e.abrupt("break",22);case 14:l.hasGoldenTicket()&&(n+=1),i=l.returnPreviousBlockHash(),e.next=19;break;case 18:return e.abrupt("break",22);case 19:c++,e.next=6;break;case 22:if(n<o&&a>=s&&this.blocks[t[0]]&&this.blocks[t[0]].hasGoldenTicket()&&n++,!(n<o)){e.next=25;break}return e.abrupt("return",!1);case 25:if(0!=r.length){e.next=31;break}return e.next=28,this.windChain(t,r,t.length-1,!1);case 28:return e.abrupt("return",e.sent);case 31:if(!(t.length>0)){e.next=37;break}return e.next=34,this.unwindChain(t,r,0,!0);case 34:return e.abrupt("return",e.sent);case 37:return e.abrupt("return",!1);case 38:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"windChain",value:(o=c(regeneratorRuntime.mark((function e(t,r,n,a){var i,o,s,c,l,u,d,h,p,f,m,g,y,v,b,_,w,x,k,S;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=a||0!=t.length){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,this.loadBlockAsync(t[n]);case 4:i=e.sent,o=i.returnId(),s=3,c=0;case 8:if(!(c<s)){e.next=22;break}if(!(c>=o)){e.next=11;break}return e.abrupt("break",22);case 11:if(l=o-c,u=this.app.blockring.returnLongestChainBlockHashByBlockId(l),!this.isBlockIndexed(u)){e.next=19;break}return e.next=16,this.loadBlockAsync(u);case 16:return d=e.sent,e.next=19,d.upgradeBlockToBlockType("Full");case 19:c++,e.next=8;break;case 22:return e.next=24,i.validate();case 24:if(h=e.sent,console.log("does block validate? "+h),!h){e.next=44;break}return this.app.blockring.onChainReorganization(i.returnId(),i.returnHash(),!0),p=this.staking.onChainReorganization(i,!0),f=p.res_spend,m=p.res_unspend,g=p.res_delete,e.next=31,this.onChainReorganization(i,!0);case 31:for(y=0;y<f.length;y++);for(v=0;v<m.length;v++);for(b=0;b<g.length;b++);if(0!=n){e.next=38;break}if(!a){e.next=37;break}return e.abrupt("return",!1);case 37:return e.abrupt("return",!0);case 38:return e.next=40,self.windChain(t,r,n-1,!1);case 40:return _=e.sent,e.abrupt("return",_);case 44:if(n!=t.length-1){e.next=55;break}if(!(r.length>0)){e.next=52;break}return e.next=48,this.windChain(r,t,r.len()-1,!0);case 48:return w=e.sent,e.abrupt("return",w);case 52:return e.abrupt("return",!1);case 53:e.next=61;break;case 55:for(x=[],k=n+1;k<t.length;k++)x.push(t[k]);return e.next=59,this.unwindChain(r,x,0,!0);case 59:return S=e.sent,e.abrupt("return",S);case 61:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return o.apply(this,arguments)})}])&&l(t.prototype,r),i&&l(t,i),e}();e.exports=d},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r(5);var a=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t||{},this.ring_buffer_length=2*r,this.ring=[this.ring_buffer_length];for(var n=0;n<this.ring_buffer_length;n++)this.ring[n]={},this.ring[n].block_hashes=[],this.ring[n].block_ids=[],this.ring[n].lc_pos=0;this.is_empty=!0,this.lc_pos=0}var t,r,a;return t=e,(r=[{key:"addBlock",value:function(e){var t=e.returnId()%this.ring_buffer_length,r=e.returnId(),n=e.returnHash();this.containsBlockHashAtBlockId(r,n)||(this.ring[t].block_hashes.push(n),this.ring[t].block_ids.push(r))}},{key:"containsBlockHashAtBlockId",value:function(e,t){var r=e%this.ring_buffer_length;return this.ring[r].block_hashes.includes(t)}},{key:"deleteBlock",value:function(e){var t=e.returnId()%this.ring_buffer_length,r=e.returnId(),n=e.returnHash();if(this.containsBlockHashAtBlockId(r,n)){for(var a=[],i=[],o=0,s=0,c=0;c<this.ring[t].block_hashes.length;c++)this.ring[t].block_ids[c]==r&&this.ringp[t].block_hashes[c]==hash||(a.push(this.ring[t].block_hashes[c]),i.push(this.ring[t].block_ids[c]),this.lc_pos==c&&(s=o),o+=1);this.ring[t].block_hashes=a,this.ring[t].block_ids=i,this.ring[t].lc_pos=s}}},{key:"isEmpty",value:function(){return this.is_empty}},{key:"onChainReorganization",value:function(e,t,r){for(var n=e%this.ring_buffer_length,a=0;a<this.ring[n].block_hashes.length;a++)this.ring[n].block_hashes[a]===t&&(this.ring[n].lc_pos=a);if(r)this.lc_pos=n;else{var i=n-1;i<0&&this.ring_buffer_length,this.ring[i].block_hashes.length>0&&(this.lc_pos=i)}}},{key:"returnBlockHashesAtBlockId",value:function(e){for(var t=e%this.ring_buffer_length,r=[],n=0;n<this.ring[t].block_hashes.length;n++)r.push(this.ring[t].block_hashes[n]);return r}},{key:"returnLongestChainBlockHashAtBlockId",value:function(e){var t=e%this.ring_buffer_length;return this.ring[t].lc_pos>this.ring[t].block_hashes.length?this.ring[t].block_hashes[this.ring[t].lc_pos]:""}},{key:"returnLatestBlockHash",value:function(){return 0==this.lc_pos?"":this.ring[this.lc_pos].block_hashes.length>this.ring[this.lc_pos].lc_pos?this.ring[this.lc_pos].block_hashes[this.ring[this.lc_pos].lc_pos]:""}},{key:"returnLatestBlockId",value:function(){return 0==this.lc_pos?0:this.ring[this.lc_pos].block_ids.length>this.ring[this.lc_pos].lc_pos?this.ring[this.lc_pos].block_ids[this.ring[this.lc_pos].lc_pos]:0}},{key:"returnLatestBlock",value:function(){var e=this.returnLatestBlockHash();return this.app.blockchain.isBlockIndexed(e)?this.app.blockchain.blocks[e]:null}},{key:"returnLongestChainBlockHashByBlockId",value:function(e){var t=e%this.ring_buffer_length;return this.ring[t].block_hashes.length>this.ring[t].lc_pos?this.ring[t].block_hashes[this.ring[t].lc_pos]:""}}])&&n(t.prototype,r),a&&n(t,a),e}();e.exports=a},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r(781);var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t||{}}var t,r,a;return t=e,(r=[{key:"initialize",value:function(){}}])&&n(t.prototype,r),a&&n(t,a),e}();e.exports=a},function(e,t,r){
/*!
* screenfull
* v5.1.0 - 2020-12-24
* (c) Sindre Sorhus; MIT License
*/
!function(){"use strict";var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},r=e.exports,n=function(){for(var e,r=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,a=r.length,i={};n<a;n++)if((e=r[n])&&e[1]in t){for(n=0;n<e.length;n++)i[r[0][n]]=e[n];return i}return!1}(),a={change:n.fullscreenchange,error:n.fullscreenerror},i={request:function(e,r){return new Promise(function(a,i){var o=function(){this.off("change",o),a()}.bind(this);this.on("change",o);var s=(e=e||t.documentElement)[n.requestFullscreen](r);s instanceof Promise&&s.then(o).catch(i)}.bind(this))},exit:function(){return new Promise(function(e,r){if(this.isFullscreen){var a=function(){this.off("change",a),e()}.bind(this);this.on("change",a);var i=t[n.exitFullscreen]();i instanceof Promise&&i.then(a).catch(r)}else e()}.bind(this))},toggle:function(e,t){return this.isFullscreen?this.exit():this.request(e,t)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,r){var n=a[e];n&&t.addEventListener(n,r,!1)},off:function(e,r){var n=a[e];n&&t.removeEventListener(n,r,!1)},raw:n};n?(Object.defineProperties(i,{isFullscreen:{get:function(){return Boolean(t[n.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[n.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(t[n.fullscreenEnabled])}}}),r?e.exports=i:window.screenfull=i):r?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}()},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r(24);var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.heartbeat=3e4}var t,r,a;return t=e,(r=[{key:"returnRoutingWorkNeededToProduceBlockInNolan",value:function(e,t,r){if(r>=t)return 1e19;var n=t-r;if(0==n&&(n=1),n>=2*this.heartbeat)return 0;var a=parseFloat(n),i=parseFloat(e.toString())/1e8/a;return BigInt(Math.round(1e8*i))}},{key:"returnBurnFeeForBlockProducedAtCurrentTimestampInNolan",value:function(e,t,r){if(r>=t)return 1e19;var n=t-r;if(0==n&&(n=1),e==BigInt(0))return 5e7;var a=parseFloat(e.toString())/1e8*Math.sqrt(parseFloat(this.heartbeat)/parseFloat(n));return BigInt(Math.round(1e8*a))}}])&&n(t.prototype,r),a&&n(t,a),e}();e.exports=a},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var a=s(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return o(this,r)}}function o(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(r,e);var t=i(r);function r(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(e=t.call(this)).setMaxListeners(200),e}return r}(r(50));e.exports=c},function(e,t,r){"use strict";(function(t){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(116),i=(r(868),r(871)),o=r(116).randomBytes,s=r(191),c=i.CryptoJS,l=i.JsonFormatter,u=r(123),d=r(883),h=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t||{},this}var r,i,h;return r=e,(i=[{key:"hash",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.app.hash(e)}},{key:"xor",value:function(e,r){t.isBuffer(e)||(e=new t(e)),t.isBuffer(r)||(r=new t(r));var n=[];if(e.length>r.length)for(var a=0;a<r.length;a++)n.push(e[a]^r[a]);else for(a=0;a<e.length;a++)n.push(e[a]^r[a]);return new t(n)}},{key:"encodeXOR",value:function(e,r){for(;e.length>r.length;)r+=r;return this.xor(t.from(e,"hex"),t.from(r,"hex")).toString("hex")}},{key:"decodeXOR",value:function(e,r){for(;e.length>r.length;)r+=r;return this.xor(t.from(e,"hex"),t.from(r,"hex")).toString("hex")}},{key:"toSizedArray",value:function(e,r){var n=t.from(e,"hex"),a=t.alloc(r);return console.assert(r>=n.length,"unhandled value ranges found"),n.copy(a,r-n.length),a}},{key:"stringToHex",value:function(e){return t.from(e,"utf-8").toString("hex")}},{key:"hexToString",value:function(e){return t.from(e,"hex").toString("utf-8")}},{key:"stringToBase64",value:function(e){return t.from(e,"utf-8").toString("base64")}},{key:"base64ToString",value:function(e){return t.from(e,"base64").toString("utf-8")}},{key:"compressPublicKey",value:function(e){return this.toBase58(s.publicKeyConvert(t.from(e,"hex"),!0).toString("hex"))}},{key:"fromBase58",value:function(e){return t.from(u.decode(e),"Uint8Array").toString("hex")}},{key:"toBase58",value:function(e){return u.encode(t.from(e,"hex"))}},{key:"generateKeys",value:function(){var e;do{e=o(32)}while(!s.privateKeyVerify(e,!1));return e.toString("hex")}},{key:"generateRandomNumber",value:function(){return o(32).toString("hex")}},{key:"returnPublicKey",value:function(e){return this.compressPublicKey(s.publicKeyCreate(t.from(e,"hex"),!1).toString("hex"))}},{key:"signMessage",value:function(e,r){return this.toBase58(s.sign(t.from(this.hash(t.from(e,"utf-8").toString("base64")),"hex"),t.from(r,"hex")).signature.toString("hex"))}},{key:"signBuffer",value:function(e,r){return s.sign(t.from(e,"hex"),t.from(r,"hex")).signature.toString("hex")}},{key:"verifyHash",value:function(e,r,n){try{return s.verify(t.from(e,"hex"),t.from(r,"hex"),t.from(this.fromBase58(n),"hex"))}catch(e){return console.log(e),!1}}},{key:"uncompressPublicKey",value:function(e){return s.publicKeyConvert(t.from(this.fromBase58(e),"hex"),!1).toString("hex")}},{key:"verifySignatureSource",value:function(e,r,n){try{return s.verify(t.from(e,"hex"),t.from(this.fromBase58(r),"hex"),t.from(this.uncompressPublicKey(n),"hex"))}catch(e){return console.log(e),!1}}},{key:"verifyMessage",value:function(e,r,n){try{return s.verify(t.from(this.hash(t.from(e,"utf-8").toString("base64")),"hex"),t.from(this.fromBase58(r),"hex"),t.from(this.uncompressPublicKey(n),"hex"))}catch(e){return console.log(e),!1}}},{key:"fastVerifyMessage",value:function(e,r,n){try{return s.verify(t.from(e,"hex"),t.from(this.fromBase58(r),"hex"),t.from(this.uncompressPublicKey(n),"hex"))}catch(e){return console.log(e),!1}}},{key:"isPublicKey",value:function(e){return 44!=e.length&&45!=e.length||e.indexOf("@")>0?0:1}},{key:"createDiffieHellman",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=a.createECDH("secp256k1");return r.generateKeys(),""!=e&&r.setPublicKey(e),""!=t&&r.setPrivateKey(t),r}},{key:"returnDiffieHellmanKeys",value:function(e){var t={};return t.pubkey=e.getPublicKey(null,"compressed"),t.privkey=e.getPrivateKey(null,"compressed"),t}},{key:"createDiffieHellmanSecret",value:function(e,t){return e.computeSecret(t)}},{key:"aesEncrypt",value:function(e,t){var r=t.toString("hex");return c.AES.encrypt(e,r,{format:l}).toString()}},{key:"aesDecrypt",value:function(e,t){var r=t.toString("hex"),n=c.AES.decrypt(e,r,{format:l});return c.enc.Utf8.stringify(n)}},{key:"fastSerialize",value:function(e){return d(e)}}])&&n(r.prototype,i),h&&n(r,h),e}();e.exports=h}).call(this,r(4).Buffer)},function(e,t,r){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var n=r(4),a=n.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return a(e,t,r)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=o),o.prototype=Object.create(a.prototype),i(a,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=a(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t){},function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=r(4).Buffer,s=r(788).inspect,c=s&&s.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,l;return t=e,(r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return o.alloc(0);for(var t,r,n,a=o.allocUnsafe(e>>>0),i=this.head,s=0;i;)t=i.data,r=a,n=s,o.prototype.copy.call(t,r,n),s+=i.data.length,i=i.next;return a}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var a=t.data,i=e>a.length?a.length:e;if(i===a.length?n+=a:n+=a.slice(0,e),0==(e-=i)){i===a.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=a.slice(i));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=o.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var a=r.data,i=e>a.length?a.length:e;if(a.copy(t,t.length-e,0,i),0==(e-=i)){i===a.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=a.slice(i));break}++n}return this.length-=n,t}},{key:c,value:function(e,t){return s(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}])&&i(t.prototype,r),l&&i(t,l),e}()},function(e,t){},function(e,t,r){"use strict";(function(t){var n;function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(174),o=Symbol("lastResolve"),s=Symbol("lastReject"),c=Symbol("error"),l=Symbol("ended"),u=Symbol("lastPromise"),d=Symbol("handlePromise"),h=Symbol("stream");function p(e,t){return{value:e,done:t}}function f(e){var t=e[o];if(null!==t){var r=e[h].read();null!==r&&(e[u]=null,e[o]=null,e[s]=null,t(p(r,!1)))}}function m(e){t.nextTick(f,e)}var g=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((a(n={get stream(){return this[h]},next:function(){var e=this,r=this[c];if(null!==r)return Promise.reject(r);if(this[l])return Promise.resolve(p(void 0,!0));if(this[h].destroyed)return new Promise((function(r,n){t.nextTick((function(){e[c]?n(e[c]):r(p(void 0,!0))}))}));var n,a=this[u];if(a)n=new Promise(function(e,t){return function(r,n){e.then((function(){t[l]?r(p(void 0,!0)):t[d](r,n)}),n)}}(a,this));else{var i=this[h].read();if(null!==i)return Promise.resolve(p(i,!1));n=new Promise(this[d])}return this[u]=n,n}},Symbol.asyncIterator,(function(){return this})),a(n,"return",(function(){var e=this;return new Promise((function(t,r){e[h].destroy(null,(function(e){e?r(e):t(p(void 0,!0))}))}))})),n),g);e.exports=function(e){var t,r=Object.create(y,(a(t={},h,{value:e,writable:!0}),a(t,o,{value:null,writable:!0}),a(t,s,{value:null,writable:!0}),a(t,c,{value:null,writable:!0}),a(t,l,{value:e._readableState.endEmitted,writable:!0}),a(t,d,{value:function(e,t){var n=r[h].read();n?(r[u]=null,r[o]=null,r[s]=null,e(p(n,!1))):(r[o]=e,r[s]=t)},writable:!0}),t));return r[u]=null,i(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[s];return null!==t&&(r[u]=null,r[o]=null,r[s]=null,t(e)),void(r[c]=e)}var n=r[o];null!==n&&(r[u]=null,r[o]=null,r[s]=null,n(p(void 0,!0))),r[l]=!0})),e.on("readable",m.bind(null,r)),r}}).call(this,r(9))},function(e,t){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(e,t,r){"use strict";e.exports=a;var n=r(363);function a(e){if(!(this instanceof a))return new a(e);n.call(this,e)}r(1)(a,n),a.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){"use strict";var n;var a=r(76).codes,i=a.ERR_MISSING_ARGS,o=a.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function c(e,t,a,i){i=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(i);var s=!1;e.on("close",(function(){s=!0})),void 0===n&&(n=r(174)),n(e,{readable:t,writable:a},(function(e){if(e)return i(e);s=!0,i()}));var c=!1;return function(t){if(!s&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void i(t||new o("pipe"))}}function l(e){e()}function u(e,t){return e.pipe(t)}function d(e){return e.length?"function"!=typeof e[e.length-1]?s:e.pop():s}e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,a=d(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new i("streams");var o=t.map((function(e,r){var i=r<t.length-1;return c(e,i,r>0,(function(e){n||(n=e),e&&o.forEach(l),i||(o.forEach(l),a(n))}))}));return t.reduce(u)}},function(e,t,r){var n=r(1),a=r(79),i=r(2).Buffer,o=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function c(){this.init(),this._w=s,a.call(this,64,56)}function l(e){return e<<30|e>>>2}function u(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}n(c,a),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},c.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,a=0|this._b,i=0|this._c,s=0|this._d,c=0|this._e,d=0;d<16;++d)r[d]=e.readInt32BE(4*d);for(;d<80;++d)r[d]=r[d-3]^r[d-8]^r[d-14]^r[d-16];for(var h=0;h<80;++h){var p=~~(h/20),f=0|((t=n)<<5|t>>>27)+u(p,a,i,s)+c+r[h]+o[p];c=s,s=i,i=l(a),a=n,n=f}this._a=n+this._a|0,this._b=a+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=c+this._e|0},c.prototype._hash=function(){var e=i.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=c},function(e,t,r){var n=r(1),a=r(79),i=r(2).Buffer,o=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function c(){this.init(),this._w=s,a.call(this,64,56)}function l(e){return e<<5|e>>>27}function u(e){return e<<30|e>>>2}function d(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}n(c,a),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},c.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,a=0|this._b,i=0|this._c,s=0|this._d,c=0|this._e,h=0;h<16;++h)r[h]=e.readInt32BE(4*h);for(;h<80;++h)r[h]=(t=r[h-3]^r[h-8]^r[h-14]^r[h-16])<<1|t>>>31;for(var p=0;p<80;++p){var f=~~(p/20),m=l(n)+d(f,a,i,s)+c+r[p]+o[f]|0;c=s,s=i,i=u(a),a=n,n=m}this._a=n+this._a|0,this._b=a+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=c+this._e|0},c.prototype._hash=function(){var e=i.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=c},function(e,t,r){var n=r(1),a=r(364),i=r(79),o=r(2).Buffer,s=new Array(64);function c(){this.init(),this._w=s,i.call(this,64,56)}n(c,a),c.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},c.prototype._hash=function(){var e=o.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},e.exports=c},function(e,t,r){var n=r(1),a=r(365),i=r(79),o=r(2).Buffer,s=new Array(160);function c(){this.init(),this._w=s,i.call(this,128,112)}n(c,a),c.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},c.prototype._hash=function(){var e=o.allocUnsafe(48);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},e.exports=c},function(e,t){},function(e,t,r){"use strict";var n=r(2).Buffer,a=r(799);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t,r,a,i=n.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=o.data,r=i,a=s,t.copy(r,a),s+=o.data.length,o=o.next;return i},e}(),a&&a.inspect&&a.inspect.custom&&(e.exports.prototype[a.inspect.custom]=function(){var e=a.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(a.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new i(a.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(801),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(18))},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,a,i,o,s=1,c={},l=!1,u=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick((function(){p(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?(i="setImmediate$"+Math.random()+"$",o=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&p(+t.data.slice(i.length))},e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent("onmessage",o),n=function(t){e.postMessage(i+t,"*")}):e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){p(e.data)},n=function(e){a.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?function(){var e=u.documentElement;n=function(t){var r=u.createElement("script");r.onreadystatechange=function(){p(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():n=function(e){setTimeout(p,0,e)},d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var a={callback:e,args:t};return c[s]=a,n(s),s++},d.clearImmediate=h}function h(e){delete c[e]}function p(e){if(l)setTimeout(p,0,e);else{var t=c[e];if(t){l=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{h(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(18),r(9))},function(e,t,r){"use strict";e.exports=i;var n=r(370),a=Object.create(r(88));function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}a.inherits=r(1),a.inherits(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){e.exports=r(178)},function(e,t,r){e.exports=r(65)},function(e,t,r){e.exports=r(177).Transform},function(e,t,r){e.exports=r(177).PassThrough},function(e,t,r){"use strict";var n=r(1),a=r(2).Buffer,i=r(51),o=a.alloc(128);function s(e,t){i.call(this,"digest"),"string"==typeof t&&(t=a.from(t)),this._alg=e,this._key=t,t.length>64?t=e(t):t.length<64&&(t=a.concat([t,o],64));for(var r=this._ipad=a.allocUnsafe(64),n=this._opad=a.allocUnsafe(64),s=0;s<64;s++)r[s]=54^t[s],n[s]=92^t[s];this._hash=[r]}n(s,i),s.prototype._update=function(e){this._hash.push(e)},s.prototype._final=function(){var e=this._alg(a.concat(this._hash));return this._alg(a.concat([this._opad,e]))},e.exports=s},function(e,t,r){e.exports=r(373)},function(e,t,r){(function(t){var n,a,i=r(2).Buffer,o=r(375),s=r(376),c=r(377),l=r(378),u=t.crypto&&t.crypto.subtle,d={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},h=[];function p(){return a||(a=t.process&&t.process.nextTick?t.process.nextTick:t.queueMicrotask?t.queueMicrotask:t.setImmediate?t.setImmediate:t.setTimeout)}function f(e,t,r,n,a){return u.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]).then((function(e){return u.deriveBits({name:"PBKDF2",salt:t,iterations:r,hash:{name:a}},e,n<<3)})).then((function(e){return i.from(e)}))}e.exports=function(e,r,a,m,g,y){"function"==typeof g&&(y=g,g=void 0);var v=d[(g=g||"sha1").toLowerCase()];if(v&&"function"==typeof t.Promise){if(o(a,m),e=l(e,s,"Password"),r=l(r,s,"Salt"),"function"!=typeof y)throw new Error("No callback provided to pbkdf2");!function(e,t){e.then((function(e){p()((function(){t(null,e)}))}),(function(e){p()((function(){t(e)}))}))}(function(e){if(t.process&&!t.process.browser)return Promise.resolve(!1);if(!u||!u.importKey||!u.deriveBits)return Promise.resolve(!1);if(void 0!==h[e])return h[e];var r=f(n=n||i.alloc(8),n,10,128,e).then((function(){return!0})).catch((function(){return!1}));return h[e]=r,r}(v).then((function(t){return t?f(e,r,a,m,v):c(e,r,a,m,g)})),y)}else p()((function(){var t;try{t=c(e,r,a,m,g)}catch(e){return y(e)}y(null,t)}))}}).call(this,r(18))},function(e,t,r){var n=r(811),a=r(180),i=r(181),o=r(824),s=r(119);function c(e,t,r){if(e=e.toLowerCase(),i[e])return a.createCipheriv(e,t,r);if(o[e])return new n({key:t,iv:r,mode:e});throw new TypeError("invalid suite type")}function l(e,t,r){if(e=e.toLowerCase(),i[e])return a.createDecipheriv(e,t,r);if(o[e])return new n({key:t,iv:r,mode:e,decrypt:!0});throw new TypeError("invalid suite type")}t.createCipher=t.Cipher=function(e,t){var r,n;if(e=e.toLowerCase(),i[e])r=i[e].key,n=i[e].iv;else{if(!o[e])throw new TypeError("invalid suite type");r=8*o[e].key,n=o[e].iv}var a=s(t,!1,r,n);return c(e,a.key,a.iv)},t.createCipheriv=t.Cipheriv=c,t.createDecipher=t.Decipher=function(e,t){var r,n;if(e=e.toLowerCase(),i[e])r=i[e].key,n=i[e].iv;else{if(!o[e])throw new TypeError("invalid suite type");r=8*o[e].key,n=o[e].iv}var a=s(t,!1,r,n);return l(e,a.key,a.iv)},t.createDecipheriv=t.Decipheriv=l,t.listCiphers=t.getCiphers=function(){return Object.keys(o).concat(a.getCiphers())}},function(e,t,r){var n=r(51),a=r(812),i=r(1),o=r(2).Buffer,s={"des-ede3-cbc":a.CBC.instantiate(a.EDE),"des-ede3":a.EDE,"des-ede-cbc":a.CBC.instantiate(a.EDE),"des-ede":a.EDE,"des-cbc":a.CBC.instantiate(a.DES),"des-ecb":a.DES};function c(e){n.call(this);var t,r=e.mode.toLowerCase(),a=s[r];t=e.decrypt?"decrypt":"encrypt";var i=e.key;o.isBuffer(i)||(i=o.from(i)),"des-ede"!==r&&"des-ede-cbc"!==r||(i=o.concat([i,i.slice(0,8)]));var c=e.iv;o.isBuffer(c)||(c=o.from(c)),this._des=a.create({key:i,iv:c,type:t})}s.des=s["des-cbc"],s.des3=s["des-ede3-cbc"],e.exports=c,i(c,n),c.prototype._update=function(e){return o.from(this._des.update(e))},c.prototype._final=function(){return o.from(this._des.final())}},function(e,t,r){"use strict";t.utils=r(379),t.Cipher=r(179),t.DES=r(380),t.CBC=r(813),t.EDE=r(814)},function(e,t,r){"use strict";var n=r(30),a=r(1),i={};function o(e){n.equal(e.length,8,"Invalid IV length"),this.iv=new Array(8);for(var t=0;t<this.iv.length;t++)this.iv[t]=e[t]}t.instantiate=function(e){function t(t){e.call(this,t),this._cbcInit()}a(t,e);for(var r=Object.keys(i),n=0;n<r.length;n++){var o=r[n];t.prototype[o]=i[o]}return t.create=function(e){return new t(e)},t},i._cbcInit=function(){var e=new o(this.options.iv);this._cbcState=e},i._update=function(e,t,r,n){var a=this._cbcState,i=this.constructor.super_.prototype,o=a.iv;if("encrypt"===this.type){for(var s=0;s<this.blockSize;s++)o[s]^=e[t+s];i._update.call(this,o,0,r,n);for(s=0;s<this.blockSize;s++)o[s]=r[n+s]}else{i._update.call(this,e,t,r,n);for(s=0;s<this.blockSize;s++)r[n+s]^=o[s];for(s=0;s<this.blockSize;s++)o[s]=e[t+s]}}},function(e,t,r){"use strict";var n=r(30),a=r(1),i=r(179),o=r(380);function s(e,t){n.equal(t.length,24,"Invalid key length");var r=t.slice(0,8),a=t.slice(8,16),i=t.slice(16,24);this.ciphers="encrypt"===e?[o.create({type:"encrypt",key:r}),o.create({type:"decrypt",key:a}),o.create({type:"encrypt",key:i})]:[o.create({type:"decrypt",key:i}),o.create({type:"encrypt",key:a}),o.create({type:"decrypt",key:r})]}function c(e){i.call(this,e);var t=new s(this.type,this.options.key);this._edeState=t}a(c,i),e.exports=c,c.create=function(e){return new c(e)},c.prototype._update=function(e,t,r,n){var a=this._edeState;a.ciphers[0]._update(e,t,r,n),a.ciphers[1]._update(r,n,r,n),a.ciphers[2]._update(r,n,r,n)},c.prototype._pad=o.prototype._pad,c.prototype._unpad=o.prototype._unpad},function(e,t,r){var n=r(181),a=r(384),i=r(2).Buffer,o=r(385),s=r(51),c=r(118),l=r(119);function u(e,t,r){s.call(this),this._cache=new h,this._cipher=new c.AES(t),this._prev=i.from(r),this._mode=e,this._autopadding=!0}r(1)(u,s),u.prototype._update=function(e){var t,r;this._cache.add(e);for(var n=[];t=this._cache.get();)r=this._mode.encrypt(this,t),n.push(r);return i.concat(n)};var d=i.alloc(16,16);function h(){this.cache=i.allocUnsafe(0)}function p(e,t,r){var s=n[e.toLowerCase()];if(!s)throw new TypeError("invalid suite type");if("string"==typeof t&&(t=i.from(t)),t.length!==s.key/8)throw new TypeError("invalid key length "+t.length);if("string"==typeof r&&(r=i.from(r)),"GCM"!==s.mode&&r.length!==s.iv)throw new TypeError("invalid iv length "+r.length);return"stream"===s.type?new o(s.module,t,r):"auth"===s.type?new a(s.module,t,r):new u(s.module,t,r)}u.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if(!e.equals(d))throw this._cipher.scrub(),new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},h.prototype.add=function(e){this.cache=i.concat([this.cache,e])},h.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},h.prototype.flush=function(){for(var e=16-this.cache.length,t=i.allocUnsafe(e),r=-1;++r<e;)t.writeUInt8(e,r);return i.concat([this.cache,t])},t.createCipheriv=p,t.createCipher=function(e,t){var r=n[e.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var a=l(t,!1,r.key,r.iv);return p(e,a.key,a.iv)}},function(e,t){t.encrypt=function(e,t){return e._cipher.encryptBlock(t)},t.decrypt=function(e,t){return e._cipher.decryptBlock(t)}},function(e,t,r){var n=r(89);t.encrypt=function(e,t){var r=n(t,e._prev);return e._prev=e._cipher.encryptBlock(r),e._prev},t.decrypt=function(e,t){var r=e._prev;e._prev=t;var a=e._cipher.decryptBlock(t);return n(a,r)}},function(e,t,r){var n=r(2).Buffer,a=r(89);function i(e,t,r){var i=t.length,o=a(t,e._cache);return e._cache=e._cache.slice(i),e._prev=n.concat([e._prev,r?t:o]),o}t.encrypt=function(e,t,r){for(var a,o=n.allocUnsafe(0);t.length;){if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=n.allocUnsafe(0)),!(e._cache.length<=t.length)){o=n.concat([o,i(e,t,r)]);break}a=e._cache.length,o=n.concat([o,i(e,t.slice(0,a),r)]),t=t.slice(a)}return o}},function(e,t,r){var n=r(2).Buffer;function a(e,t,r){var a=e._cipher.encryptBlock(e._prev)[0]^t;return e._prev=n.concat([e._prev.slice(1),n.from([r?t:a])]),a}t.encrypt=function(e,t,r){for(var i=t.length,o=n.allocUnsafe(i),s=-1;++s<i;)o[s]=a(e,t[s],r);return o}},function(e,t,r){var n=r(2).Buffer;function a(e,t,r){for(var n,a,o=-1,s=0;++o<8;)n=t&1<<7-o?128:0,s+=(128&(a=e._cipher.encryptBlock(e._prev)[0]^n))>>o%8,e._prev=i(e._prev,r?n:a);return s}function i(e,t){var r=e.length,a=-1,i=n.allocUnsafe(e.length);for(e=n.concat([e,n.from([t])]);++a<r;)i[a]=e[a]<<1|e[a+1]>>7;return i}t.encrypt=function(e,t,r){for(var i=t.length,o=n.allocUnsafe(i),s=-1;++s<i;)o[s]=a(e,t[s],r);return o}},function(e,t,r){(function(e){var n=r(89);function a(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}t.encrypt=function(t,r){for(;t._cache.length<r.length;)t._cache=e.concat([t._cache,a(t)]);var i=t._cache.slice(0,r.length);return t._cache=t._cache.slice(r.length),n(r,i)}}).call(this,r(4).Buffer)},function(e,t,r){var n=r(2).Buffer,a=n.alloc(16,0);function i(e){var t=n.allocUnsafe(16);return t.writeUInt32BE(e[0]>>>0,0),t.writeUInt32BE(e[1]>>>0,4),t.writeUInt32BE(e[2]>>>0,8),t.writeUInt32BE(e[3]>>>0,12),t}function o(e){this.h=e,this.state=n.alloc(16,0),this.cache=n.allocUnsafe(0)}o.prototype.ghash=function(e){for(var t=-1;++t<e.length;)this.state[t]^=e[t];this._multiply()},o.prototype._multiply=function(){for(var e,t,r,n=[(e=this.h).readUInt32BE(0),e.readUInt32BE(4),e.readUInt32BE(8),e.readUInt32BE(12)],a=[0,0,0,0],o=-1;++o<128;){for(0!=(this.state[~~(o/8)]&1<<7-o%8)&&(a[0]^=n[0],a[1]^=n[1],a[2]^=n[2],a[3]^=n[3]),r=0!=(1&n[3]),t=3;t>0;t--)n[t]=n[t]>>>1|(1&n[t-1])<<31;n[0]=n[0]>>>1,r&&(n[0]=n[0]^225<<24)}this.state=i(a)},o.prototype.update=function(e){var t;for(this.cache=n.concat([this.cache,e]);this.cache.length>=16;)t=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(t)},o.prototype.final=function(e,t){return this.cache.length&&this.ghash(n.concat([this.cache,a],16)),this.ghash(i([0,e,0,t])),this.state},e.exports=o},function(e,t,r){var n=r(384),a=r(2).Buffer,i=r(181),o=r(385),s=r(51),c=r(118),l=r(119);function u(e,t,r){s.call(this),this._cache=new d,this._last=void 0,this._cipher=new c.AES(t),this._prev=a.from(r),this._mode=e,this._autopadding=!0}function d(){this.cache=a.allocUnsafe(0)}function h(e,t,r){var s=i[e.toLowerCase()];if(!s)throw new TypeError("invalid suite type");if("string"==typeof r&&(r=a.from(r)),"GCM"!==s.mode&&r.length!==s.iv)throw new TypeError("invalid iv length "+r.length);if("string"==typeof t&&(t=a.from(t)),t.length!==s.key/8)throw new TypeError("invalid key length "+t.length);return"stream"===s.type?new o(s.module,t,r,!0):"auth"===s.type?new n(s.module,t,r,!0):new u(s.module,t,r)}r(1)(u,s),u.prototype._update=function(e){var t,r;this._cache.add(e);for(var n=[];t=this._cache.get(this._autopadding);)r=this._mode.decrypt(this,t),n.push(r);return a.concat(n)},u.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return function(e){var t=e[15];if(t<1||t>16)throw new Error("unable to decrypt data");var r=-1;for(;++r<t;)if(e[r+(16-t)]!==t)throw new Error("unable to decrypt data");if(16===t)return;return e.slice(0,16-t)}(this._mode.decrypt(this,e));if(e)throw new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},d.prototype.add=function(e){this.cache=a.concat([this.cache,e])},d.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},d.prototype.flush=function(){if(this.cache.length)return this.cache},t.createDecipher=function(e,t){var r=i[e.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var n=l(t,!1,r.key,r.iv);return h(e,n.key,n.iv)},t.createDecipheriv=h},function(e,t){t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}},function(e,t,r){(function(e){var n=r(386),a=r(828),i=r(829);var o={binary:!0,hex:!0,base64:!0};t.DiffieHellmanGroup=t.createDiffieHellmanGroup=t.getDiffieHellman=function(t){var r=new e(a[t].prime,"hex"),n=new e(a[t].gen,"hex");return new i(r,n)},t.createDiffieHellman=t.DiffieHellman=function t(r,a,s,c){return e.isBuffer(a)||void 0===o[a]?t(r,"binary",a,s):(a=a||"binary",c=c||"binary",s=s||new e([2]),e.isBuffer(s)||(s=new e(s,c)),"number"==typeof r?new i(n(r,s),s,!0):(e.isBuffer(r)||(r=new e(r,a)),new i(r,s,!0)))}}).call(this,r(4).Buffer)},function(e,t){},function(e,t){},function(e){e.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},function(e,t,r){(function(t){var n=r(16),a=new(r(387)),i=new n(24),o=new n(11),s=new n(10),c=new n(3),l=new n(7),u=r(386),d=r(74);function h(e,r){return r=r||"utf8",t.isBuffer(e)||(e=new t(e,r)),this._pub=new n(e),this}function p(e,r){return r=r||"utf8",t.isBuffer(e)||(e=new t(e,r)),this._priv=new n(e),this}e.exports=m;var f={};function m(e,t,r){this.setGenerator(t),this.__prime=new n(e),this._prime=n.mont(this.__prime),this._primeLen=e.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,r?(this.setPublicKey=h,this.setPrivateKey=p):this._primeCode=8}function g(e,r){var n=new t(e.toArray());return r?n.toString(r):n}Object.defineProperty(m.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(e,t){var r=t.toString("hex"),n=[r,e.toString(16)].join("_");if(n in f)return f[n];var d,h=0;if(e.isEven()||!u.simpleSieve||!u.fermatTest(e)||!a.test(e))return h+=1,h+="02"===r||"05"===r?8:4,f[n]=h,h;switch(a.test(e.shrn(1))||(h+=2),r){case"02":e.mod(i).cmp(o)&&(h+=8);break;case"05":(d=e.mod(s)).cmp(c)&&d.cmp(l)&&(h+=8);break;default:h+=4}return f[n]=h,h}(this.__prime,this.__gen)),this._primeCode}}),m.prototype.generateKeys=function(){return this._priv||(this._priv=new n(d(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},m.prototype.computeSecret=function(e){var r=(e=(e=new n(e)).toRed(this._prime)).redPow(this._priv).fromRed(),a=new t(r.toArray()),i=this.getPrime();if(a.length<i.length){var o=new t(i.length-a.length);o.fill(0),a=t.concat([o,a])}return a},m.prototype.getPublicKey=function(e){return g(this._pub,e)},m.prototype.getPrivateKey=function(e){return g(this._priv,e)},m.prototype.getPrime=function(e){return g(this.__prime,e)},m.prototype.getGenerator=function(e){return g(this._gen,e)},m.prototype.setGenerator=function(e,r){return r=r||"utf8",t.isBuffer(e)||(e=new t(e,r)),this.__gen=e,this._gen=new n(e),this}}).call(this,r(4).Buffer)},function(e,t,r){var n=r(183).Buffer,a=r(75),i=r(356),o=r(1),s=r(831),c=r(862),l=r(373);function u(e){i.Writable.call(this);var t=l[e];if(!t)throw new Error("Unknown message digest");this._hashType=t.hash,this._hash=a(t.hash),this._tag=t.id,this._signType=t.sign}function d(e){i.Writable.call(this);var t=l[e];if(!t)throw new Error("Unknown message digest");this._hash=a(t.hash),this._tag=t.id,this._signType=t.sign}function h(e){return new u(e)}function p(e){return new d(e)}Object.keys(l).forEach((function(e){l[e].id=n.from(l[e].id,"hex"),l[e.toLowerCase()]=l[e]})),o(u,i.Writable),u.prototype._write=function(e,t,r){this._hash.update(e),r()},u.prototype.update=function(e,t){return"string"==typeof e&&(e=n.from(e,t)),this._hash.update(e),this},u.prototype.sign=function(e,t){this.end();var r=this._hash.digest(),n=s(r,e,this._hashType,this._signType,this._tag);return t?n.toString(t):n},o(d,i.Writable),d.prototype._write=function(e,t,r){this._hash.update(e),r()},d.prototype.update=function(e,t){return"string"==typeof e&&(e=n.from(e,t)),this._hash.update(e),this},d.prototype.verify=function(e,t,r){"string"==typeof t&&(t=n.from(t,r)),this.end();var a=this._hash.digest();return c(t,a,e,this._signType,this._tag)},e.exports={Sign:h,Verify:p,createSign:h,createVerify:p}},function(e,t,r){var n=r(183).Buffer,a=r(371),i=r(184),o=r(120).ec,s=r(393),c=r(122),l=r(399);function u(e,t,r,i){if((e=n.from(e.toArray())).length<t.byteLength()){var o=n.alloc(t.byteLength()-e.length);e=n.concat([o,e])}var s=r.length,c=function(e,t){e=(e=d(e,t)).mod(t);var r=n.from(e.toArray());if(r.length<t.byteLength()){var a=n.alloc(t.byteLength()-r.length);r=n.concat([a,r])}return r}(r,t),l=n.alloc(s);l.fill(1);var u=n.alloc(s);return u=a(i,u).update(l).update(n.from([0])).update(e).update(c).digest(),l=a(i,u).update(l).digest(),{k:u=a(i,u).update(l).update(n.from([1])).update(e).update(c).digest(),v:l=a(i,u).update(l).digest()}}function d(e,t){var r=new s(e),n=(e.length<<3)-t.bitLength();return n>0&&r.ishrn(n),r}function h(e,t,r){var i,o;do{for(i=n.alloc(0);8*i.length<e.bitLength();)t.v=a(r,t.k).update(t.v).digest(),i=n.concat([i,t.v]);o=d(i,e),t.k=a(r,t.k).update(t.v).update(n.from([0])).digest(),t.v=a(r,t.k).update(t.v).digest()}while(-1!==o.cmp(e));return o}function p(e,t,r,n){return e.toRed(s.mont(r)).redPow(t).fromRed().mod(n)}e.exports=function(e,t,r,a,f){var m=c(t);if(m.curve){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw new Error("wrong private key type");return function(e,t){var r=l[t.curve.join(".")];if(!r)throw new Error("unknown curve "+t.curve.join("."));var a=new o(r).keyFromPrivate(t.privateKey).sign(e);return n.from(a.toDER())}(e,m)}if("dsa"===m.type){if("dsa"!==a)throw new Error("wrong private key type");return function(e,t,r){var a,i=t.params.priv_key,o=t.params.p,c=t.params.q,l=t.params.g,f=new s(0),m=d(e,c).mod(c),g=!1,y=u(i,c,e,r);for(;!1===g;)a=h(c,y,r),f=p(l,a,o,c),0===(g=a.invm(c).imul(m.add(i.mul(f))).mod(c)).cmpn(0)&&(g=!1,f=new s(0));return function(e,t){e=e.toArray(),t=t.toArray(),128&e[0]&&(e=[0].concat(e));128&t[0]&&(t=[0].concat(t));var r=[48,e.length+t.length+4,2,e.length];return r=r.concat(e,[2,t.length],t),n.from(r)}(f,g)}(e,m,r)}if("rsa"!==a&&"ecdsa/rsa"!==a)throw new Error("wrong private key type");e=n.concat([f,e]);for(var g=m.modulus.byteLength(),y=[0,1];e.length+y.length+1<g;)y.push(255);y.push(0);for(var v=-1;++v<e.length;)y.push(e[v]);return i(y,m)},e.exports.getKey=u,e.exports.makeKey=h},function(e,t,r){(function(e){!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function a(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function i(e,t,r){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(833).Buffer}catch(e){}function s(e,t){var r=e.charCodeAt(t);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+e)}function c(e,t,r){var n=s(e,r);return r-1>=t&&(n|=s(e,r-1)<<4),n}function l(e,t,r,a){for(var i=0,o=0,s=Math.min(e.length,r),c=t;c<s;c++){var l=e.charCodeAt(c)-48;i*=a,o=l>=49?l-49+10:l>=17?l-17+10:l,n(l>=0&&o<a,"Invalid character"),i+=o}return i}function u(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var a=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(a++,this.negative=1),a<e.length&&(16===t?this._parseHex(e,a,r):(this._parseBase(e,t,a),"le"===r&&this._initArray(this.toArray(),t,r)))},i.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},i.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var i,o,s=0;if("be"===r)for(a=e.length-1,i=0;a>=0;a-=3)o=e[a]|e[a-1]<<8|e[a-2]<<16,this.words[i]|=o<<s&67108863,this.words[i+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,i++);else if("le"===r)for(a=0,i=0;a<e.length;a+=3)o=e[a]|e[a+1]<<8|e[a+2]<<16,this.words[i]|=o<<s&67108863,this.words[i+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,i++);return this._strip()},i.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var a,i=0,o=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)a=c(e,t,n)<<i,this.words[o]|=67108863&a,i>=18?(i-=18,o+=1,this.words[o]|=a>>>26):i+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)a=c(e,t,n)<<i,this.words[o]|=67108863&a,i>=18?(i-=18,o+=1,this.words[o]|=a>>>26):i+=8;this._strip()},i.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,a=1;a<=67108863;a*=t)n++;n--,a=a/t|0;for(var i=e.length-r,o=i%n,s=Math.min(i,i-o)+r,c=0,u=r;u<s;u+=n)c=l(e,u,u+n,t),this.imuln(a),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==o){var d=1;for(c=l(e,u,e.length,t),u=0;u<o;u++)d*=t;this.imuln(d),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype._move=function(e){u(e,this)},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch(e){i.prototype.inspect=d}else i.prototype.inspect=d;function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var a=0,i=0,o=0;o<this.length;o++){var s=this.words[o],c=(16777215&(s<<a|i)).toString(16);r=0!==(i=s>>>24-a&16777215)||o!==this.length-1?h[6-c.length]+c+r:c+r,(a+=2)>=26&&(a-=26,o--)}for(0!==i&&(r=i.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var l=p[e],u=f[e];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modrn(u).toString(e);r=(d=d.idivn(u)).isZero()?m+r:h[l-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(e,t){return this.toArrayLike(o,e,t)}),i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function m(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var a=0|e.words[0],i=0|t.words[0],o=a*i,s=67108863&o,c=o/67108864|0;r.words[0]=s;for(var l=1;l<n;l++){for(var u=c>>>26,d=67108863&c,h=Math.min(l,t.length-1),p=Math.max(0,l-e.length+1);p<=h;p++){var f=l-p|0;u+=(o=(a=0|e.words[f])*(i=0|t.words[p])+d)/67108864|0,d=67108863&o}r.words[l]=0|d,c=0|u}return 0!==c?r.words[l]=0|c:r.length--,r._strip()}i.prototype.toArrayLike=function(e,t,r){this._strip();var a=this.byteLength(),i=r||Math.max(1,a);n(a<=i,"byte array longer than desired length"),n(i>0,"Requested array length <= 0");var o=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,i);return this["_toArrayLike"+("le"===t?"LE":"BE")](o,a),o},i.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,a=0,i=0;a<this.length;a++){var o=this.words[a]<<i|n;e[r++]=255&o,r<e.length&&(e[r++]=o>>8&255),r<e.length&&(e[r++]=o>>16&255),6===i?(r<e.length&&(e[r++]=o>>24&255),n=0,i=0):(n=o>>>24,i+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},i.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,a=0,i=0;a<this.length;a++){var o=this.words[a]<<i|n;e[r--]=255&o,r>=0&&(e[r--]=o>>8&255),r>=0&&(e[r--]=o>>16&255),6===i?(r>=0&&(e[r--]=o>>24&255),n=0,i=0):(n=o>>>24,i+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},i.prototype.ior=function(e){return n(0==(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},i.prototype.iand=function(e){return n(0==(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},i.prototype.ixor=function(e){return n(0==(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var a=0;a<t;a++)this.words[a]=67108863&~this.words[a];return r>0&&(this.words[a]=~this.words[a]&67108863>>26-r),this._strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,a=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<a:this.words[r]&~(1<<a),this._strip()},i.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var a=0,i=0;i<n.length;i++)t=(0|r.words[i])+(0|n.words[i])+a,this.words[i]=67108863&t,a=t>>>26;for(;0!==a&&i<r.length;i++)t=(0|r.words[i])+a,this.words[i]=67108863&t,a=t>>>26;if(this.length=r.length,0!==a)this.words[this.length]=a,this.length++;else if(r!==this)for(;i<r.length;i++)this.words[i]=r.words[i];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,a=this.cmp(e);if(0===a)return this.negative=0,this.length=1,this.words[0]=0,this;a>0?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)i=(t=(0|r.words[o])-(0|n.words[o])+i)>>26,this.words[o]=67108863&t;for(;0!==i&&o<r.length;o++)i=(t=(0|r.words[o])+i)>>26,this.words[o]=67108863&t;if(0===i&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var g=function(e,t,r){var n,a,i,o=e.words,s=t.words,c=r.words,l=0,u=0|o[0],d=8191&u,h=u>>>13,p=0|o[1],f=8191&p,m=p>>>13,g=0|o[2],y=8191&g,v=g>>>13,b=0|o[3],_=8191&b,w=b>>>13,x=0|o[4],k=8191&x,S=x>>>13,E=0|o[5],A=8191&E,P=E>>>13,C=0|o[6],D=8191&C,T=C>>>13,O=0|o[7],M=8191&O,I=O>>>13,R=0|o[8],F=8191&R,B=R>>>13,j=0|o[9],N=8191&j,q=j>>>13,L=0|s[0],U=8191&L,z=L>>>13,H=0|s[1],$=8191&H,G=H>>>13,K=0|s[2],V=8191&K,W=K>>>13,Y=0|s[3],J=8191&Y,Q=Y>>>13,X=0|s[4],Z=8191&X,ee=X>>>13,te=0|s[5],re=8191&te,ne=te>>>13,ae=0|s[6],ie=8191&ae,oe=ae>>>13,se=0|s[7],ce=8191&se,le=se>>>13,ue=0|s[8],de=8191&ue,he=ue>>>13,pe=0|s[9],fe=8191&pe,me=pe>>>13;r.negative=e.negative^t.negative,r.length=19;var ge=(l+(n=Math.imul(d,U))|0)+((8191&(a=(a=Math.imul(d,z))+Math.imul(h,U)|0))<<13)|0;l=((i=Math.imul(h,z))+(a>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(f,U),a=(a=Math.imul(f,z))+Math.imul(m,U)|0,i=Math.imul(m,z);var ye=(l+(n=n+Math.imul(d,$)|0)|0)+((8191&(a=(a=a+Math.imul(d,G)|0)+Math.imul(h,$)|0))<<13)|0;l=((i=i+Math.imul(h,G)|0)+(a>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(y,U),a=(a=Math.imul(y,z))+Math.imul(v,U)|0,i=Math.imul(v,z),n=n+Math.imul(f,$)|0,a=(a=a+Math.imul(f,G)|0)+Math.imul(m,$)|0,i=i+Math.imul(m,G)|0;var ve=(l+(n=n+Math.imul(d,V)|0)|0)+((8191&(a=(a=a+Math.imul(d,W)|0)+Math.imul(h,V)|0))<<13)|0;l=((i=i+Math.imul(h,W)|0)+(a>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(_,U),a=(a=Math.imul(_,z))+Math.imul(w,U)|0,i=Math.imul(w,z),n=n+Math.imul(y,$)|0,a=(a=a+Math.imul(y,G)|0)+Math.imul(v,$)|0,i=i+Math.imul(v,G)|0,n=n+Math.imul(f,V)|0,a=(a=a+Math.imul(f,W)|0)+Math.imul(m,V)|0,i=i+Math.imul(m,W)|0;var be=(l+(n=n+Math.imul(d,J)|0)|0)+((8191&(a=(a=a+Math.imul(d,Q)|0)+Math.imul(h,J)|0))<<13)|0;l=((i=i+Math.imul(h,Q)|0)+(a>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(k,U),a=(a=Math.imul(k,z))+Math.imul(S,U)|0,i=Math.imul(S,z),n=n+Math.imul(_,$)|0,a=(a=a+Math.imul(_,G)|0)+Math.imul(w,$)|0,i=i+Math.imul(w,G)|0,n=n+Math.imul(y,V)|0,a=(a=a+Math.imul(y,W)|0)+Math.imul(v,V)|0,i=i+Math.imul(v,W)|0,n=n+Math.imul(f,J)|0,a=(a=a+Math.imul(f,Q)|0)+Math.imul(m,J)|0,i=i+Math.imul(m,Q)|0;var _e=(l+(n=n+Math.imul(d,Z)|0)|0)+((8191&(a=(a=a+Math.imul(d,ee)|0)+Math.imul(h,Z)|0))<<13)|0;l=((i=i+Math.imul(h,ee)|0)+(a>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(A,U),a=(a=Math.imul(A,z))+Math.imul(P,U)|0,i=Math.imul(P,z),n=n+Math.imul(k,$)|0,a=(a=a+Math.imul(k,G)|0)+Math.imul(S,$)|0,i=i+Math.imul(S,G)|0,n=n+Math.imul(_,V)|0,a=(a=a+Math.imul(_,W)|0)+Math.imul(w,V)|0,i=i+Math.imul(w,W)|0,n=n+Math.imul(y,J)|0,a=(a=a+Math.imul(y,Q)|0)+Math.imul(v,J)|0,i=i+Math.imul(v,Q)|0,n=n+Math.imul(f,Z)|0,a=(a=a+Math.imul(f,ee)|0)+Math.imul(m,Z)|0,i=i+Math.imul(m,ee)|0;var we=(l+(n=n+Math.imul(d,re)|0)|0)+((8191&(a=(a=a+Math.imul(d,ne)|0)+Math.imul(h,re)|0))<<13)|0;l=((i=i+Math.imul(h,ne)|0)+(a>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(D,U),a=(a=Math.imul(D,z))+Math.imul(T,U)|0,i=Math.imul(T,z),n=n+Math.imul(A,$)|0,a=(a=a+Math.imul(A,G)|0)+Math.imul(P,$)|0,i=i+Math.imul(P,G)|0,n=n+Math.imul(k,V)|0,a=(a=a+Math.imul(k,W)|0)+Math.imul(S,V)|0,i=i+Math.imul(S,W)|0,n=n+Math.imul(_,J)|0,a=(a=a+Math.imul(_,Q)|0)+Math.imul(w,J)|0,i=i+Math.imul(w,Q)|0,n=n+Math.imul(y,Z)|0,a=(a=a+Math.imul(y,ee)|0)+Math.imul(v,Z)|0,i=i+Math.imul(v,ee)|0,n=n+Math.imul(f,re)|0,a=(a=a+Math.imul(f,ne)|0)+Math.imul(m,re)|0,i=i+Math.imul(m,ne)|0;var xe=(l+(n=n+Math.imul(d,ie)|0)|0)+((8191&(a=(a=a+Math.imul(d,oe)|0)+Math.imul(h,ie)|0))<<13)|0;l=((i=i+Math.imul(h,oe)|0)+(a>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(M,U),a=(a=Math.imul(M,z))+Math.imul(I,U)|0,i=Math.imul(I,z),n=n+Math.imul(D,$)|0,a=(a=a+Math.imul(D,G)|0)+Math.imul(T,$)|0,i=i+Math.imul(T,G)|0,n=n+Math.imul(A,V)|0,a=(a=a+Math.imul(A,W)|0)+Math.imul(P,V)|0,i=i+Math.imul(P,W)|0,n=n+Math.imul(k,J)|0,a=(a=a+Math.imul(k,Q)|0)+Math.imul(S,J)|0,i=i+Math.imul(S,Q)|0,n=n+Math.imul(_,Z)|0,a=(a=a+Math.imul(_,ee)|0)+Math.imul(w,Z)|0,i=i+Math.imul(w,ee)|0,n=n+Math.imul(y,re)|0,a=(a=a+Math.imul(y,ne)|0)+Math.imul(v,re)|0,i=i+Math.imul(v,ne)|0,n=n+Math.imul(f,ie)|0,a=(a=a+Math.imul(f,oe)|0)+Math.imul(m,ie)|0,i=i+Math.imul(m,oe)|0;var ke=(l+(n=n+Math.imul(d,ce)|0)|0)+((8191&(a=(a=a+Math.imul(d,le)|0)+Math.imul(h,ce)|0))<<13)|0;l=((i=i+Math.imul(h,le)|0)+(a>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(F,U),a=(a=Math.imul(F,z))+Math.imul(B,U)|0,i=Math.imul(B,z),n=n+Math.imul(M,$)|0,a=(a=a+Math.imul(M,G)|0)+Math.imul(I,$)|0,i=i+Math.imul(I,G)|0,n=n+Math.imul(D,V)|0,a=(a=a+Math.imul(D,W)|0)+Math.imul(T,V)|0,i=i+Math.imul(T,W)|0,n=n+Math.imul(A,J)|0,a=(a=a+Math.imul(A,Q)|0)+Math.imul(P,J)|0,i=i+Math.imul(P,Q)|0,n=n+Math.imul(k,Z)|0,a=(a=a+Math.imul(k,ee)|0)+Math.imul(S,Z)|0,i=i+Math.imul(S,ee)|0,n=n+Math.imul(_,re)|0,a=(a=a+Math.imul(_,ne)|0)+Math.imul(w,re)|0,i=i+Math.imul(w,ne)|0,n=n+Math.imul(y,ie)|0,a=(a=a+Math.imul(y,oe)|0)+Math.imul(v,ie)|0,i=i+Math.imul(v,oe)|0,n=n+Math.imul(f,ce)|0,a=(a=a+Math.imul(f,le)|0)+Math.imul(m,ce)|0,i=i+Math.imul(m,le)|0;var Se=(l+(n=n+Math.imul(d,de)|0)|0)+((8191&(a=(a=a+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;l=((i=i+Math.imul(h,he)|0)+(a>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(N,U),a=(a=Math.imul(N,z))+Math.imul(q,U)|0,i=Math.imul(q,z),n=n+Math.imul(F,$)|0,a=(a=a+Math.imul(F,G)|0)+Math.imul(B,$)|0,i=i+Math.imul(B,G)|0,n=n+Math.imul(M,V)|0,a=(a=a+Math.imul(M,W)|0)+Math.imul(I,V)|0,i=i+Math.imul(I,W)|0,n=n+Math.imul(D,J)|0,a=(a=a+Math.imul(D,Q)|0)+Math.imul(T,J)|0,i=i+Math.imul(T,Q)|0,n=n+Math.imul(A,Z)|0,a=(a=a+Math.imul(A,ee)|0)+Math.imul(P,Z)|0,i=i+Math.imul(P,ee)|0,n=n+Math.imul(k,re)|0,a=(a=a+Math.imul(k,ne)|0)+Math.imul(S,re)|0,i=i+Math.imul(S,ne)|0,n=n+Math.imul(_,ie)|0,a=(a=a+Math.imul(_,oe)|0)+Math.imul(w,ie)|0,i=i+Math.imul(w,oe)|0,n=n+Math.imul(y,ce)|0,a=(a=a+Math.imul(y,le)|0)+Math.imul(v,ce)|0,i=i+Math.imul(v,le)|0,n=n+Math.imul(f,de)|0,a=(a=a+Math.imul(f,he)|0)+Math.imul(m,de)|0,i=i+Math.imul(m,he)|0;var Ee=(l+(n=n+Math.imul(d,fe)|0)|0)+((8191&(a=(a=a+Math.imul(d,me)|0)+Math.imul(h,fe)|0))<<13)|0;l=((i=i+Math.imul(h,me)|0)+(a>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(N,$),a=(a=Math.imul(N,G))+Math.imul(q,$)|0,i=Math.imul(q,G),n=n+Math.imul(F,V)|0,a=(a=a+Math.imul(F,W)|0)+Math.imul(B,V)|0,i=i+Math.imul(B,W)|0,n=n+Math.imul(M,J)|0,a=(a=a+Math.imul(M,Q)|0)+Math.imul(I,J)|0,i=i+Math.imul(I,Q)|0,n=n+Math.imul(D,Z)|0,a=(a=a+Math.imul(D,ee)|0)+Math.imul(T,Z)|0,i=i+Math.imul(T,ee)|0,n=n+Math.imul(A,re)|0,a=(a=a+Math.imul(A,ne)|0)+Math.imul(P,re)|0,i=i+Math.imul(P,ne)|0,n=n+Math.imul(k,ie)|0,a=(a=a+Math.imul(k,oe)|0)+Math.imul(S,ie)|0,i=i+Math.imul(S,oe)|0,n=n+Math.imul(_,ce)|0,a=(a=a+Math.imul(_,le)|0)+Math.imul(w,ce)|0,i=i+Math.imul(w,le)|0,n=n+Math.imul(y,de)|0,a=(a=a+Math.imul(y,he)|0)+Math.imul(v,de)|0,i=i+Math.imul(v,he)|0;var Ae=(l+(n=n+Math.imul(f,fe)|0)|0)+((8191&(a=(a=a+Math.imul(f,me)|0)+Math.imul(m,fe)|0))<<13)|0;l=((i=i+Math.imul(m,me)|0)+(a>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(N,V),a=(a=Math.imul(N,W))+Math.imul(q,V)|0,i=Math.imul(q,W),n=n+Math.imul(F,J)|0,a=(a=a+Math.imul(F,Q)|0)+Math.imul(B,J)|0,i=i+Math.imul(B,Q)|0,n=n+Math.imul(M,Z)|0,a=(a=a+Math.imul(M,ee)|0)+Math.imul(I,Z)|0,i=i+Math.imul(I,ee)|0,n=n+Math.imul(D,re)|0,a=(a=a+Math.imul(D,ne)|0)+Math.imul(T,re)|0,i=i+Math.imul(T,ne)|0,n=n+Math.imul(A,ie)|0,a=(a=a+Math.imul(A,oe)|0)+Math.imul(P,ie)|0,i=i+Math.imul(P,oe)|0,n=n+Math.imul(k,ce)|0,a=(a=a+Math.imul(k,le)|0)+Math.imul(S,ce)|0,i=i+Math.imul(S,le)|0,n=n+Math.imul(_,de)|0,a=(a=a+Math.imul(_,he)|0)+Math.imul(w,de)|0,i=i+Math.imul(w,he)|0;var Pe=(l+(n=n+Math.imul(y,fe)|0)|0)+((8191&(a=(a=a+Math.imul(y,me)|0)+Math.imul(v,fe)|0))<<13)|0;l=((i=i+Math.imul(v,me)|0)+(a>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(N,J),a=(a=Math.imul(N,Q))+Math.imul(q,J)|0,i=Math.imul(q,Q),n=n+Math.imul(F,Z)|0,a=(a=a+Math.imul(F,ee)|0)+Math.imul(B,Z)|0,i=i+Math.imul(B,ee)|0,n=n+Math.imul(M,re)|0,a=(a=a+Math.imul(M,ne)|0)+Math.imul(I,re)|0,i=i+Math.imul(I,ne)|0,n=n+Math.imul(D,ie)|0,a=(a=a+Math.imul(D,oe)|0)+Math.imul(T,ie)|0,i=i+Math.imul(T,oe)|0,n=n+Math.imul(A,ce)|0,a=(a=a+Math.imul(A,le)|0)+Math.imul(P,ce)|0,i=i+Math.imul(P,le)|0,n=n+Math.imul(k,de)|0,a=(a=a+Math.imul(k,he)|0)+Math.imul(S,de)|0,i=i+Math.imul(S,he)|0;var Ce=(l+(n=n+Math.imul(_,fe)|0)|0)+((8191&(a=(a=a+Math.imul(_,me)|0)+Math.imul(w,fe)|0))<<13)|0;l=((i=i+Math.imul(w,me)|0)+(a>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(N,Z),a=(a=Math.imul(N,ee))+Math.imul(q,Z)|0,i=Math.imul(q,ee),n=n+Math.imul(F,re)|0,a=(a=a+Math.imul(F,ne)|0)+Math.imul(B,re)|0,i=i+Math.imul(B,ne)|0,n=n+Math.imul(M,ie)|0,a=(a=a+Math.imul(M,oe)|0)+Math.imul(I,ie)|0,i=i+Math.imul(I,oe)|0,n=n+Math.imul(D,ce)|0,a=(a=a+Math.imul(D,le)|0)+Math.imul(T,ce)|0,i=i+Math.imul(T,le)|0,n=n+Math.imul(A,de)|0,a=(a=a+Math.imul(A,he)|0)+Math.imul(P,de)|0,i=i+Math.imul(P,he)|0;var De=(l+(n=n+Math.imul(k,fe)|0)|0)+((8191&(a=(a=a+Math.imul(k,me)|0)+Math.imul(S,fe)|0))<<13)|0;l=((i=i+Math.imul(S,me)|0)+(a>>>13)|0)+(De>>>26)|0,De&=67108863,n=Math.imul(N,re),a=(a=Math.imul(N,ne))+Math.imul(q,re)|0,i=Math.imul(q,ne),n=n+Math.imul(F,ie)|0,a=(a=a+Math.imul(F,oe)|0)+Math.imul(B,ie)|0,i=i+Math.imul(B,oe)|0,n=n+Math.imul(M,ce)|0,a=(a=a+Math.imul(M,le)|0)+Math.imul(I,ce)|0,i=i+Math.imul(I,le)|0,n=n+Math.imul(D,de)|0,a=(a=a+Math.imul(D,he)|0)+Math.imul(T,de)|0,i=i+Math.imul(T,he)|0;var Te=(l+(n=n+Math.imul(A,fe)|0)|0)+((8191&(a=(a=a+Math.imul(A,me)|0)+Math.imul(P,fe)|0))<<13)|0;l=((i=i+Math.imul(P,me)|0)+(a>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(N,ie),a=(a=Math.imul(N,oe))+Math.imul(q,ie)|0,i=Math.imul(q,oe),n=n+Math.imul(F,ce)|0,a=(a=a+Math.imul(F,le)|0)+Math.imul(B,ce)|0,i=i+Math.imul(B,le)|0,n=n+Math.imul(M,de)|0,a=(a=a+Math.imul(M,he)|0)+Math.imul(I,de)|0,i=i+Math.imul(I,he)|0;var Oe=(l+(n=n+Math.imul(D,fe)|0)|0)+((8191&(a=(a=a+Math.imul(D,me)|0)+Math.imul(T,fe)|0))<<13)|0;l=((i=i+Math.imul(T,me)|0)+(a>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(N,ce),a=(a=Math.imul(N,le))+Math.imul(q,ce)|0,i=Math.imul(q,le),n=n+Math.imul(F,de)|0,a=(a=a+Math.imul(F,he)|0)+Math.imul(B,de)|0,i=i+Math.imul(B,he)|0;var Me=(l+(n=n+Math.imul(M,fe)|0)|0)+((8191&(a=(a=a+Math.imul(M,me)|0)+Math.imul(I,fe)|0))<<13)|0;l=((i=i+Math.imul(I,me)|0)+(a>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul(N,de),a=(a=Math.imul(N,he))+Math.imul(q,de)|0,i=Math.imul(q,he);var Ie=(l+(n=n+Math.imul(F,fe)|0)|0)+((8191&(a=(a=a+Math.imul(F,me)|0)+Math.imul(B,fe)|0))<<13)|0;l=((i=i+Math.imul(B,me)|0)+(a>>>13)|0)+(Ie>>>26)|0,Ie&=67108863;var Re=(l+(n=Math.imul(N,fe))|0)+((8191&(a=(a=Math.imul(N,me))+Math.imul(q,fe)|0))<<13)|0;return l=((i=Math.imul(q,me))+(a>>>13)|0)+(Re>>>26)|0,Re&=67108863,c[0]=ge,c[1]=ye,c[2]=ve,c[3]=be,c[4]=_e,c[5]=we,c[6]=xe,c[7]=ke,c[8]=Se,c[9]=Ee,c[10]=Ae,c[11]=Pe,c[12]=Ce,c[13]=De,c[14]=Te,c[15]=Oe,c[16]=Me,c[17]=Ie,c[18]=Re,0!==l&&(c[19]=l,r.length++),r};function y(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,a=0,i=0;i<r.length-1;i++){var o=a;a=0;for(var s=67108863&n,c=Math.min(i,t.length-1),l=Math.max(0,i-e.length+1);l<=c;l++){var u=i-l,d=(0|e.words[u])*(0|t.words[l]),h=67108863&d;s=67108863&(h=h+s|0),a+=(o=(o=o+(d/67108864|0)|0)+(h>>>26)|0)>>>26,o&=67108863}r.words[i]=s,n=o,o=a}return 0!==n?r.words[i]=n:r.length--,r._strip()}function v(e,t,r){return y(e,t,r)}function b(e,t){this.x=e,this.y=t}Math.imul||(g=m),i.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?g(this,e,t):r<63?m(this,e,t):r<1024?y(this,e,t):v(this,e,t)},b.prototype.makeRBT=function(e){for(var t=new Array(e),r=i.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},b.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,a=0;a<t;a++)n|=(1&e)<<t-a-1,e>>=1;return n},b.prototype.permute=function(e,t,r,n,a,i){for(var o=0;o<i;o++)n[o]=t[e[o]],a[o]=r[e[o]]},b.prototype.transform=function(e,t,r,n,a,i){this.permute(i,e,t,r,n,a);for(var o=1;o<a;o<<=1)for(var s=o<<1,c=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),u=0;u<a;u+=s)for(var d=c,h=l,p=0;p<o;p++){var f=r[u+p],m=n[u+p],g=r[u+p+o],y=n[u+p+o],v=d*g-h*y;y=d*y+h*g,g=v,r[u+p]=f+g,n[u+p]=m+y,r[u+p+o]=f-g,n[u+p+o]=m-y,p!==s&&(v=c*d-l*h,h=c*h+l*d,d=v)}},b.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,a=0;for(r=r/2|0;r;r>>>=1)a++;return 1<<a+1+n},b.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var a=e[n];e[n]=e[r-n-1],e[r-n-1]=a,a=t[n],t[n]=-t[r-n-1],t[r-n-1]=-a}},b.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var a=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&a,r=a<67108864?0:a/67108864|0}return e},b.prototype.convert13b=function(e,t,r,a){for(var i=0,o=0;o<t;o++)i+=0|e[o],r[2*o]=8191&i,i>>>=13,r[2*o+1]=8191&i,i>>>=13;for(o=2*t;o<a;++o)r[o]=0;n(0===i),n(0==(-8192&i))},b.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},b.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),a=this.makeRBT(n),i=this.stub(n),o=new Array(n),s=new Array(n),c=new Array(n),l=new Array(n),u=new Array(n),d=new Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,o,n),this.convert13b(t.words,t.length,l,n),this.transform(o,i,s,c,n,a),this.transform(l,i,u,d,n,a);for(var p=0;p<n;p++){var f=s[p]*u[p]-c[p]*d[p];c[p]=s[p]*d[p]+c[p]*u[p],s[p]=f}return this.conjugate(s,c,n),this.transform(s,c,h,i,n,a),this.conjugate(h,i,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),v(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){var t=e<0;t&&(e=-e),n("number"==typeof e),n(e<67108864);for(var r=0,a=0;a<this.length;a++){var i=(0|this.words[a])*e,o=(67108863&i)+(67108863&r);r>>=26,r+=i/67108864|0,r+=o>>>26,this.words[a]=67108863&o}return 0!==r&&(this.words[a]=r,this.length++),t?this.ineg():this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,a=r%26;t[r]=e.words[n]>>>a&1}return t}(e);if(0===t.length)return new i(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var a=r.sqr();n<t.length;n++,a=a.sqr())0!==t[n]&&(r=r.mul(a));return r},i.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,a=(e-r)/26,i=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(t=0;t<this.length;t++){var s=this.words[t]&i,c=(0|this.words[t])-s<<r;this.words[t]=c|o,o=s>>>26-r}o&&(this.words[t]=o,this.length++)}if(0!==a){for(t=this.length-1;t>=0;t--)this.words[t+a]=this.words[t];for(t=0;t<a;t++)this.words[t]=0;this.length+=a}return this._strip()},i.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,r){var a;n("number"==typeof e&&e>=0),a=t?(t-t%26)/26:0;var i=e%26,o=Math.min((e-i)/26,this.length),s=67108863^67108863>>>i<<i,c=r;if(a-=o,a=Math.max(0,a),c){for(var l=0;l<o;l++)c.words[l]=this.words[l];c.length=o}if(0===o);else if(this.length>o)for(this.length-=o,l=0;l<this.length;l++)this.words[l]=this.words[l+o];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=a);l--){var d=0|this.words[l];this.words[l]=u<<26-i|d>>>i,u=d&s}return c&&0!==u&&(c.words[c.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,a=1<<t;return!(this.length<=r)&&!!(this.words[r]&a)},i.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var a=67108863^67108863>>>t<<t;this.words[this.length-1]&=a}return this._strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,r){var a,i,o=e.length+r;this._expand(o);var s=0;for(a=0;a<e.length;a++){i=(0|this.words[a+r])+s;var c=(0|e.words[a])*t;s=((i-=67108863&c)>>26)-(c/67108864|0),this.words[a+r]=67108863&i}for(;a<this.length-r;a++)s=(i=(0|this.words[a+r])+s)>>26,this.words[a+r]=67108863&i;if(0===s)return this._strip();for(n(-1===s),s=0,a=0;a<this.length;a++)s=(i=-(0|this.words[a])+s)>>26,this.words[a]=67108863&i;return this.negative=1,this._strip()},i.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),a=e,o=0|a.words[a.length-1];0!==(r=26-this._countBits(o))&&(a=a.ushln(r),n.iushln(r),o=0|a.words[a.length-1]);var s,c=n.length-a.length;if("mod"!==t){(s=new i(null)).length=c+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var u=n.clone()._ishlnsubmul(a,1,c);0===u.negative&&(n=u,s&&(s.words[c]=1));for(var d=c-1;d>=0;d--){var h=67108864*(0|n.words[a.length+d])+(0|n.words[a.length+d-1]);for(h=Math.min(h/o|0,67108863),n._ishlnsubmul(a,h,d);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(a,1,d),n.isZero()||(n.negative^=1);s&&(s.words[d]=h)}return s&&s._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},i.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(a=s.div.neg()),"div"!==t&&(o=s.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:a,mod:o}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(a=s.div.neg()),{div:a,mod:s.mod}):0!=(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(o=s.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:s.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modrn(e.words[0]))}:this._wordDiv(e,t);var a,o,s},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),a=e.andln(1),i=r.cmp(n);return i<0||1===a&&0===i?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modrn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=(1<<26)%e,a=0,i=this.length-1;i>=0;i--)a=(r*a+(0|this.words[i]))%e;return t?-a:a},i.prototype.modn=function(e){return this.modrn(e)},i.prototype.idivn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=0,a=this.length-1;a>=0;a--){var i=(0|this.words[a])+67108864*r;this.words[a]=i/e|0,r=i%e}return this._strip(),t?this.ineg():this},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a=new i(1),o=new i(0),s=new i(0),c=new i(1),l=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++l;for(var u=r.clone(),d=t.clone();!t.isZero();){for(var h=0,p=1;0==(t.words[0]&p)&&h<26;++h,p<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(a.isOdd()||o.isOdd())&&(a.iadd(u),o.isub(d)),a.iushrn(1),o.iushrn(1);for(var f=0,m=1;0==(r.words[0]&m)&&f<26;++f,m<<=1);if(f>0)for(r.iushrn(f);f-- >0;)(s.isOdd()||c.isOdd())&&(s.iadd(u),c.isub(d)),s.iushrn(1),c.iushrn(1);t.cmp(r)>=0?(t.isub(r),a.isub(s),o.isub(c)):(r.isub(t),s.isub(a),c.isub(o))}return{a:s,b:c,gcd:r.iushln(l)}},i.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a,o=new i(1),s=new i(0),c=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var l=0,u=1;0==(t.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(t.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);for(var d=0,h=1;0==(r.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(r.iushrn(d);d-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);t.cmp(r)>=0?(t.isub(r),o.isub(s)):(r.isub(t),s.isub(o))}return(a=0===t.cmpn(1)?o:s).cmpn(0)<0&&a.iadd(e),a},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var a=t.cmp(r);if(a<0){var i=t;t=r,r=i}else if(0===a||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,a=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=a,this;for(var i=a,o=r;0!==i&&o<this.length;o++){var s=0|this.words[o];i=(s+=i)>>>26,s&=67108863,this.words[o]=s}return 0!==i&&(this.words[o]=i,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var a=0|this.words[0];t=a===e?0:a<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],a=0|e.words[r];if(n!==a){n<a?t=-1:n>a&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new A(e)},i.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var _={k256:null,p224:null,p192:null,p25519:null};function w(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function x(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function k(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function A(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function P(e){A.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},w.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},w.prototype.split=function(e,t){e.iushrn(this.n,0,t)},w.prototype.imulK=function(e){return e.imul(this.k)},a(x,w),x.prototype.split=function(e,t){for(var r=Math.min(e.length,9),n=0;n<r;n++)t.words[n]=e.words[n];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=4194303&a,n=10;n<e.length;n++){var i=0|e.words[n];e.words[n-10]=(4194303&i)<<4|a>>>22,a=i}a>>>=22,e.words[n-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},x.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},a(k,w),a(S,w),a(E,w),E.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,a=67108863&n;n>>>=26,e.words[r]=a,t=n}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(_[e])return _[e];var t;if("k256"===e)t=new x;else if("p224"===e)t=new k;else if("p192"===e)t=new S;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new E}return _[e]=t,t},A.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},A.prototype._verify2=function(e,t){n(0==(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},A.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(u(e,e.umod(this.m)._forceRed(this)),e)},A.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},A.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},A.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},A.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},A.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},A.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},A.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},A.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},A.prototype.isqr=function(e){return this.imul(e,e.clone())},A.prototype.sqr=function(e){return this.mul(e,e)},A.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new i(1)).iushrn(2);return this.pow(e,r)}for(var a=this.m.subn(1),o=0;!a.isZero()&&0===a.andln(1);)o++,a.iushrn(1);n(!a.isZero());var s=new i(1).toRed(this),c=s.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new i(2*u*u).toRed(this);0!==this.pow(u,l).cmp(c);)u.redIAdd(c);for(var d=this.pow(u,a),h=this.pow(e,a.addn(1).iushrn(1)),p=this.pow(e,a),f=o;0!==p.cmp(s);){for(var m=p,g=0;0!==m.cmp(s);g++)m=m.redSqr();n(g<f);var y=this.pow(d,new i(1).iushln(f-g-1));h=h.redMul(y),d=y.redSqr(),p=p.redMul(d),f=g}return h},A.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},A.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new i(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var a=r[0],o=0,s=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var l=t.words[n],u=c-1;u>=0;u--){var d=l>>u&1;a!==r[0]&&(a=this.sqr(a)),0!==d||0!==o?(o<<=1,o|=d,(4===++s||0===n&&0===u)&&(a=this.mul(a,r[o]),s=0,o=0)):s=0}c=26}return a},A.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},A.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new P(e)},a(P,A),P.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},P.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},P.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=r.isub(n).iushrn(this.shift),i=a;return a.cmp(this.m)>=0?i=a.isub(this.m):a.cmpn(0)<0&&(i=a.iadd(this.m)),i._forceRed(this)},P.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=r.isub(n).iushrn(this.shift),o=a;return a.cmp(this.m)>=0?o=a.isub(this.m):a.cmpn(0)<0&&(o=a.iadd(this.m)),o._forceRed(this)},P.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,r(66)(e))},function(e,t){},function(e){e.exports=JSON.parse('{"_from":"elliptic@^6.5.2","_id":"elliptic@6.5.4","_inBundle":false,"_integrity":"sha512-iLhC6ULemrljPZb+QutR5TQGB+pdW6KGD5RSegS+8sorOZT+rdQFbsQFJgvN3eRqNALqJer4oQ16YvJHlU8hzQ==","_location":"/elliptic","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"elliptic@^6.5.2","name":"elliptic","escapedName":"elliptic","rawSpec":"^6.5.2","saveSpec":null,"fetchSpec":"^6.5.2"},"_requiredBy":["/browserify-sign","/create-ecdh","/secp256k1"],"_resolved":"https://registry.npmjs.org/elliptic/-/elliptic-6.5.4.tgz","_shasum":"da37cebd31e79a1367e941b592ed1fbebd58abbb","_spec":"elliptic@^6.5.2","_where":"/Users/david/Programming/saito-lite-rust/node_modules/secp256k1","author":{"name":"Fedor Indutny","email":"fedor@indutny.com"},"bugs":{"url":"https://github.com/indutny/elliptic/issues"},"bundleDependencies":false,"dependencies":{"bn.js":"^4.11.9","brorand":"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1","inherits":"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},"deprecated":false,"description":"EC cryptography","devDependencies":{"brfs":"^2.0.2","coveralls":"^3.1.0","eslint":"^7.6.0","grunt":"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1","istanbul":"^0.4.5","mocha":"^8.0.1"},"files":["lib"],"homepage":"https://github.com/indutny/elliptic","keywords":["EC","Elliptic","curve","Cryptography"],"license":"MIT","main":"lib/elliptic.js","name":"elliptic","repository":{"type":"git","url":"git+ssh://git@github.com/indutny/elliptic.git"},"scripts":{"lint":"eslint lib test","lint:fix":"npm run lint -- --fix","test":"npm run lint && npm run unit","unit":"istanbul test _mocha --reporter=spec test/index.js","version":"grunt dist && git add dist/"},"version":"6.5.4"}')},function(e,t,r){"use strict";var n=r(31),a=r(16),i=r(1),o=r(121),s=n.assert;function c(e){o.call(this,"short",e),this.a=new a(e.a,16).toRed(this.red),this.b=new a(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function l(e,t,r,n){o.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new a(t,16),this.y=new a(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function u(e,t,r,n){o.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new a(0)):(this.x=new a(t,16),this.y=new a(r,16),this.z=new a(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}i(c,o),e.exports=c,c.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new a(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new a(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?r=i[0]:(r=i[1],s(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map((function(e){return{a:new a(e.a,16),b:new a(e.b,16)}})):this._getEndoBasis(r)}}},c.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:a.mont(e),r=new a(2).toRed(t).redInvm(),n=r.redNeg(),i=new a(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},c.prototype._getEndoBasis=function(e){for(var t,r,n,i,o,s,c,l,u,d=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=e,p=this.n.clone(),f=new a(1),m=new a(0),g=new a(0),y=new a(1),v=0;0!==h.cmpn(0);){var b=p.div(h);l=p.sub(b.mul(h)),u=g.sub(b.mul(f));var _=y.sub(b.mul(m));if(!n&&l.cmp(d)<0)t=c.neg(),r=f,n=l.neg(),i=u;else if(n&&2==++v)break;c=l,p=h,h=l,g=f,f=u,y=m,m=_}o=l.neg(),s=u;var w=n.sqr().add(i.sqr());return o.sqr().add(s.sqr()).cmp(w)>=0&&(o=t,s=r),n.negative&&(n=n.neg(),i=i.neg()),o.negative&&(o=o.neg(),s=s.neg()),[{a:n,b:i},{a:o,b:s}]},c.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],a=n.b.mul(e).divRound(this.n),i=r.b.neg().mul(e).divRound(this.n),o=a.mul(r.a),s=i.mul(n.a),c=a.mul(r.b),l=i.mul(n.b);return{k1:e.sub(o).sub(s),k2:c.add(l).neg()}},c.prototype.pointFromX=function(e,t){(e=new a(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(t&&!i||!t&&i)&&(n=n.redNeg()),this.point(e,n)},c.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),a=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(a).cmpn(0)},c.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,a=this._endoWnafT2,i=0;i<e.length;i++){var o=this._endoSplit(t[i]),s=e[i],c=s._getBeta();o.k1.negative&&(o.k1.ineg(),s=s.neg(!0)),o.k2.negative&&(o.k2.ineg(),c=c.neg(!0)),n[2*i]=s,n[2*i+1]=c,a[2*i]=o.k1,a[2*i+1]=o.k2}for(var l=this._wnafMulAdd(1,n,a,2*i,r),u=0;u<2*i;u++)n[u]=null,a[u]=null;return l},i(l,o.BasePoint),c.prototype.point=function(e,t,r){return new l(this,e,t,r)},c.prototype.pointFromJSON=function(e,t){return l.fromJSON(this,e,t)},l.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},l.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},l.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function a(t){return e.point(t[0],t[1],r)}var i=t[2];return n.precomputed={beta:null,doubles:i.doubles&&{step:i.doubles.step,points:[n].concat(i.doubles.points.map(a))},naf:i.naf&&{wnd:i.naf.wnd,points:[n].concat(i.naf.points.map(a))}},n},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return this.inf},l.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},l.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),a=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),i=a.redSqr().redISub(this.x.redAdd(this.x)),o=a.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,o)},l.prototype.getX=function(){return this.x.fromRed()},l.prototype.getY=function(){return this.y.fromRed()},l.prototype.mul=function(e){return e=new a(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},l.prototype.mulAdd=function(e,t,r){var n=[this,t],a=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,a):this.curve._wnafMulAdd(1,n,a,2)},l.prototype.jmulAdd=function(e,t,r){var n=[this,t],a=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,a,!0):this.curve._wnafMulAdd(1,n,a,2,!0)},l.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},l.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},l.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},i(u,o.BasePoint),c.prototype.jpoint=function(e,t,r){return new u(this,e,t,r)},u.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},u.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},u.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),a=e.x.redMul(r),i=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(r.redMul(this.z)),s=n.redSub(a),c=i.redSub(o);if(0===s.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=s.redSqr(),u=l.redMul(s),d=n.redMul(l),h=c.redSqr().redIAdd(u).redISub(d).redISub(d),p=c.redMul(d.redISub(h)).redISub(i.redMul(u)),f=this.z.redMul(e.z).redMul(s);return this.curve.jpoint(h,p,f)},u.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),a=this.y,i=e.y.redMul(t).redMul(this.z),o=r.redSub(n),s=a.redSub(i);if(0===o.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),l=c.redMul(o),u=r.redMul(c),d=s.redSqr().redIAdd(l).redISub(u).redISub(u),h=s.redMul(u.redISub(d)).redISub(a.redMul(l)),p=this.z.redMul(o);return this.curve.jpoint(d,h,p)},u.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,a=this.curve.tinv,i=this.x,o=this.y,s=this.z,c=s.redSqr().redSqr(),l=o.redAdd(o);for(t=0;t<e;t++){var u=i.redSqr(),d=l.redSqr(),h=d.redSqr(),p=u.redAdd(u).redIAdd(u).redIAdd(n.redMul(c)),f=i.redMul(d),m=p.redSqr().redISub(f.redAdd(f)),g=f.redISub(m),y=p.redMul(g);y=y.redIAdd(y).redISub(h);var v=l.redMul(s);t+1<e&&(c=c.redMul(h)),i=m,s=v,l=y}return this.curve.jpoint(i,l.redMul(a),s)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},u.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),a=this.y.redSqr(),i=a.redSqr(),o=this.x.redAdd(a).redSqr().redISub(n).redISub(i);o=o.redIAdd(o);var s=n.redAdd(n).redIAdd(n),c=s.redSqr().redISub(o).redISub(o),l=i.redIAdd(i);l=(l=l.redIAdd(l)).redIAdd(l),e=c,t=s.redMul(o.redISub(c)).redISub(l),r=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),d=this.y.redSqr(),h=d.redSqr(),p=this.x.redAdd(d).redSqr().redISub(u).redISub(h);p=p.redIAdd(p);var f=u.redAdd(u).redIAdd(u),m=f.redSqr(),g=h.redIAdd(h);g=(g=g.redIAdd(g)).redIAdd(g),e=m.redISub(p).redISub(p),t=f.redMul(p.redISub(e)).redISub(g),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},u.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),a=this.y.redSqr(),i=a.redSqr(),o=this.x.redAdd(a).redSqr().redISub(n).redISub(i);o=o.redIAdd(o);var s=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),c=s.redSqr().redISub(o).redISub(o);e=c;var l=i.redIAdd(i);l=(l=l.redIAdd(l)).redIAdd(l),t=s.redMul(o.redISub(c)).redISub(l),r=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),d=this.y.redSqr(),h=this.x.redMul(d),p=this.x.redSub(u).redMul(this.x.redAdd(u));p=p.redAdd(p).redIAdd(p);var f=h.redIAdd(h),m=(f=f.redIAdd(f)).redAdd(f);e=p.redSqr().redISub(m),r=this.y.redAdd(this.z).redSqr().redISub(d).redISub(u);var g=d.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=p.redMul(f.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,r)},u.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,a=n.redSqr().redSqr(),i=t.redSqr(),o=r.redSqr(),s=i.redAdd(i).redIAdd(i).redIAdd(e.redMul(a)),c=t.redAdd(t),l=(c=c.redIAdd(c)).redMul(o),u=s.redSqr().redISub(l.redAdd(l)),d=l.redISub(u),h=o.redSqr();h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var p=s.redMul(d).redISub(h),f=r.redAdd(r).redMul(n);return this.curve.jpoint(u,p,f)},u.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),a=e.redAdd(e).redIAdd(e),i=a.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(n),s=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(i)).redSqr(),c=n.redIAdd(n);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var l=a.redIAdd(o).redSqr().redISub(i).redISub(s).redISub(c),u=t.redMul(l);u=(u=u.redIAdd(u)).redIAdd(u);var d=this.x.redMul(s).redISub(u);d=(d=d.redIAdd(d)).redIAdd(d);var h=this.y.redMul(l.redMul(c.redISub(l)).redISub(o.redMul(s)));h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var p=this.z.redAdd(o).redSqr().redISub(r).redISub(s);return this.curve.jpoint(d,h,p)},u.prototype.mul=function(e,t){return e=new a(e,t),this.curve._wnafMul(this,e)},u.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),a=r.redMul(e.z);return 0===this.y.redMul(a).redISub(e.y.redMul(n)).cmpn(0)},u.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),a=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(a),0===this.x.cmp(r))return!0}},u.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(e,t,r){"use strict";var n=r(16),a=r(1),i=r(121),o=r(31);function s(e){i.call(this,"mont",e),this.a=new n(e.a,16).toRed(this.red),this.b=new n(e.b,16).toRed(this.red),this.i4=new n(4).toRed(this.red).redInvm(),this.two=new n(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function c(e,t,r){i.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new n(t,16),this.z=new n(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}a(s,i),e.exports=s,s.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),n=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===n.redSqrt().redSqr().cmp(n)},a(c,i.BasePoint),s.prototype.decodePoint=function(e,t){return this.point(o.toArray(e,t),1)},s.prototype.point=function(e,t){return new c(this,e,t)},s.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},c.prototype.precompute=function(){},c.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},c.fromJSON=function(e,t){return new c(e,t[0],t[1]||e.one)},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},c.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),n=e.redMul(t),a=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(n,a)},c.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),a=e.x.redAdd(e.z),i=e.x.redSub(e.z).redMul(r),o=a.redMul(n),s=t.z.redMul(i.redAdd(o).redSqr()),c=t.x.redMul(i.redISub(o).redSqr());return this.curve.point(s,c)},c.prototype.mul=function(e){for(var t=e.clone(),r=this,n=this.curve.point(null,null),a=[];0!==t.cmpn(0);t.iushrn(1))a.push(t.andln(1));for(var i=a.length-1;i>=0;i--)0===a[i]?(r=r.diffAdd(n,this),n=n.dbl()):(n=r.diffAdd(n,this),r=r.dbl());return n},c.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},c.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(e,t,r){"use strict";var n=r(31),a=r(16),i=r(1),o=r(121),s=n.assert;function c(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,o.call(this,"edwards",e),this.a=new a(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new a(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new a(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),s(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function l(e,t,r,n,i){o.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new a(t,16),this.y=new a(r,16),this.z=n?new a(n,16):this.curve.one,this.t=i&&new a(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}i(c,o),e.exports=c,c.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},c.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},c.prototype.jpoint=function(e,t,r,n){return this.point(e,t,r,n)},c.prototype.pointFromX=function(e,t){(e=new a(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=this.c2.redSub(this.a.redMul(r)),i=this.one.redSub(this.c2.redMul(this.d).redMul(r)),o=n.redMul(i.redInvm()),s=o.redSqrt();if(0!==s.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");var c=s.fromRed().isOdd();return(t&&!c||!t&&c)&&(s=s.redNeg()),this.point(e,s)},c.prototype.pointFromY=function(e,t){(e=new a(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=r.redSub(this.c2),i=r.redMul(this.d).redMul(this.c2).redSub(this.a),o=n.redMul(i.redInvm());if(0===o.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var s=o.redSqrt();if(0!==s.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");return s.fromRed().isOdd()!==t&&(s=s.redNeg()),this.point(s,e)},c.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),n=t.redMul(this.a).redAdd(r),a=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===n.cmp(a)},i(l,o.BasePoint),c.prototype.pointFromJSON=function(e){return l.fromJSON(this,e)},c.prototype.point=function(e,t,r,n){return new l(this,e,t,r,n)},l.fromJSON=function(e,t){return new l(e,t[0],t[1],t[2])},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},l.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(e),a=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),i=n.redAdd(t),o=i.redSub(r),s=n.redSub(t),c=a.redMul(o),l=i.redMul(s),u=a.redMul(s),d=o.redMul(i);return this.curve.point(c,l,d,u)},l.prototype._projDbl=function(){var e,t,r,n,a,i,o=this.x.redAdd(this.y).redSqr(),s=this.x.redSqr(),c=this.y.redSqr();if(this.curve.twisted){var l=(n=this.curve._mulA(s)).redAdd(c);this.zOne?(e=o.redSub(s).redSub(c).redMul(l.redSub(this.curve.two)),t=l.redMul(n.redSub(c)),r=l.redSqr().redSub(l).redSub(l)):(a=this.z.redSqr(),i=l.redSub(a).redISub(a),e=o.redSub(s).redISub(c).redMul(i),t=l.redMul(n.redSub(c)),r=l.redMul(i))}else n=s.redAdd(c),a=this.curve._mulC(this.z).redSqr(),i=n.redSub(a).redSub(a),e=this.curve._mulC(o.redISub(n)).redMul(i),t=this.curve._mulC(n).redMul(s.redISub(c)),r=n.redMul(i);return this.curve.point(e,t,r)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},l.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),a=this.z.redMul(e.z.redAdd(e.z)),i=r.redSub(t),o=a.redSub(n),s=a.redAdd(n),c=r.redAdd(t),l=i.redMul(o),u=s.redMul(c),d=i.redMul(c),h=o.redMul(s);return this.curve.point(l,u,h,d)},l.prototype._projAdd=function(e){var t,r,n=this.z.redMul(e.z),a=n.redSqr(),i=this.x.redMul(e.x),o=this.y.redMul(e.y),s=this.curve.d.redMul(i).redMul(o),c=a.redSub(s),l=a.redAdd(s),u=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(o),d=n.redMul(c).redMul(u);return this.curve.twisted?(t=n.redMul(l).redMul(o.redSub(this.curve._mulA(i))),r=c.redMul(l)):(t=n.redMul(l).redMul(o.redSub(i)),r=this.curve._mulC(c).redMul(l)),this.curve.point(d,t,r)},l.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},l.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},l.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},l.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},l.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},l.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()},l.prototype.getY=function(){return this.normalize(),this.y.fromRed()},l.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},l.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(n),0===this.x.cmp(t))return!0}},l.prototype.toP=l.prototype.normalize,l.prototype.mixedAdd=l.prototype.add},function(e,t,r){"use strict";t.sha1=r(839),t.sha224=r(840),t.sha256=r(391),t.sha384=r(841),t.sha512=r(392)},function(e,t,r){"use strict";var n=r(42),a=r(90),i=r(390),o=n.rotl32,s=n.sum32,c=n.sum32_5,l=i.ft_1,u=a.BlockHash,d=[1518500249,1859775393,2400959708,3395469782];function h(){if(!(this instanceof h))return new h;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(h,u),e.exports=h,h.blockSize=512,h.outSize=160,h.hmacStrength=80,h.padLength=64,h.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=o(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var a=this.h[0],i=this.h[1],u=this.h[2],h=this.h[3],p=this.h[4];for(n=0;n<r.length;n++){var f=~~(n/20),m=c(o(a,5),l(f,i,u,h),p,r[n],d[f]);p=h,h=u,u=o(i,30),i=a,a=m}this.h[0]=s(this.h[0],a),this.h[1]=s(this.h[1],i),this.h[2]=s(this.h[2],u),this.h[3]=s(this.h[3],h),this.h[4]=s(this.h[4],p)},h.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(e,t,r){"use strict";var n=r(42),a=r(391);function i(){if(!(this instanceof i))return new i;a.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(i,a),e.exports=i,i.blockSize=512,i.outSize=224,i.hmacStrength=192,i.padLength=64,i.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},function(e,t,r){"use strict";var n=r(42),a=r(392);function i(){if(!(this instanceof i))return new i;a.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(i,a),e.exports=i,i.blockSize=1024,i.outSize=384,i.hmacStrength=192,i.padLength=128,i.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},function(e,t,r){"use strict";var n=r(42),a=r(90),i=n.rotl32,o=n.sum32,s=n.sum32_3,c=n.sum32_4,l=a.BlockHash;function u(){if(!(this instanceof u))return new u;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function d(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function h(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function p(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}n.inherits(u,l),t.ripemd160=u,u.blockSize=512,u.outSize=160,u.hmacStrength=192,u.padLength=64,u.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],a=this.h[2],l=this.h[3],u=this.h[4],v=r,b=n,_=a,w=l,x=u,k=0;k<80;k++){var S=o(i(c(r,d(k,n,a,l),e[f[k]+t],h(k)),g[k]),u);r=u,u=l,l=i(a,10),a=n,n=S,S=o(i(c(v,d(79-k,b,_,w),e[m[k]+t],p(k)),y[k]),x),v=x,x=w,w=i(_,10),_=b,b=S}S=s(this.h[1],a,w),this.h[1]=s(this.h[2],l,x),this.h[2]=s(this.h[3],u,v),this.h[3]=s(this.h[4],r,b),this.h[4]=s(this.h[0],n,_),this.h[0]=S},u.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var f=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],y=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(e,t,r){"use strict";var n=r(42),a=r(30);function i(e,t,r){if(!(this instanceof i))return new i(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(t,r))}e.exports=i,i.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),a(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},i.prototype.update=function(e,t){return this.inner.update(e,t),this},i.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},function(e,t){e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(e,t,r){"use strict";var n=r(16),a=r(846),i=r(31),o=r(185),s=r(182),c=i.assert,l=r(847),u=r(848);function d(e){if(!(this instanceof d))return new d(e);"string"==typeof e&&(c(Object.prototype.hasOwnProperty.call(o,e),"Unknown curve "+e),e=o[e]),e instanceof o.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=d,d.prototype.keyPair=function(e){return new l(this,e)},d.prototype.keyFromPrivate=function(e,t){return l.fromPrivate(this,e,t)},d.prototype.keyFromPublic=function(e,t){return l.fromPublic(this,e,t)},d.prototype.genKeyPair=function(e){e||(e={});for(var t=new a({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||s(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),i=this.n.sub(new n(2));;){var o=new n(t.generate(r));if(!(o.cmp(i)>0))return o.iaddn(1),this.keyFromPrivate(o)}},d.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},d.prototype.sign=function(e,t,r,i){"object"==typeof r&&(i=r,r=null),i||(i={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new n(e,16));for(var o=this.n.byteLength(),s=t.getPrivate().toArray("be",o),c=e.toArray("be",o),l=new a({hash:this.hash,entropy:s,nonce:c,pers:i.pers,persEnc:i.persEnc||"utf8"}),d=this.n.sub(new n(1)),h=0;;h++){var p=i.k?i.k(h):new n(l.generate(this.n.byteLength()));if(!((p=this._truncateToN(p,!0)).cmpn(1)<=0||p.cmp(d)>=0)){var f=this.g.mul(p);if(!f.isInfinity()){var m=f.getX(),g=m.umod(this.n);if(0!==g.cmpn(0)){var y=p.invm(this.n).mul(g.mul(t.getPrivate()).iadd(e));if(0!==(y=y.umod(this.n)).cmpn(0)){var v=(f.getY().isOdd()?1:0)|(0!==m.cmp(g)?2:0);return i.canonical&&y.cmp(this.nh)>0&&(y=this.n.sub(y),v^=1),new u({r:g,s:y,recoveryParam:v})}}}}}},d.prototype.verify=function(e,t,r,a){e=this._truncateToN(new n(e,16)),r=this.keyFromPublic(r,a);var i=(t=new u(t,"hex")).r,o=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var s,c=o.invm(this.n),l=c.mul(e).umod(this.n),d=c.mul(i).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(l,r.getPublic(),d)).isInfinity()&&s.eqXToP(i):!(s=this.g.mulAdd(l,r.getPublic(),d)).isInfinity()&&0===s.getX().umod(this.n).cmp(i)},d.prototype.recoverPubKey=function(e,t,r,a){c((3&r)===r,"The recovery param is more than two bits"),t=new u(t,a);var i=this.n,o=new n(e),s=t.r,l=t.s,d=1&r,h=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&h)throw new Error("Unable to find sencond key candinate");s=h?this.curve.pointFromX(s.add(this.curve.n),d):this.curve.pointFromX(s,d);var p=t.r.invm(i),f=i.sub(o).mul(p).umod(i),m=l.mul(p).umod(i);return this.g.mulAdd(f,s,m)},d.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new u(t,n)).recoveryParam)return t.recoveryParam;for(var a=0;a<4;a++){var i;try{i=this.recoverPubKey(e,t,a)}catch(e){continue}if(i.eq(r))return a}throw new Error("Unable to find valid recovery factor")}},function(e,t,r){"use strict";var n=r(186),a=r(388),i=r(30);function o(e){if(!(this instanceof o))return new o(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=a.toArray(e.entropy,e.entropyEnc||"hex"),r=a.toArray(e.nonce,e.nonceEnc||"hex"),n=a.toArray(e.pers,e.persEnc||"hex");i(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}e.exports=o,o.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var a=0;a<this.V.length;a++)this.K[a]=0,this.V[a]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},o.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},o.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},o.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=a.toArray(e,t),r=a.toArray(r,n),i(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},o.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=a.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,e);return this._update(r),this._reseed++,a.encode(o,t)}},function(e,t,r){"use strict";var n=r(16),a=r(31).assert;function i(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=i,i.fromPublic=function(e,t,r){return t instanceof i?t:new i(e,{pub:t,pubEnc:r})},i.fromPrivate=function(e,t,r){return t instanceof i?t:new i(e,{priv:t,privEnc:r})},i.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},i.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},i.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},i.prototype._importPrivate=function(e,t){this.priv=new n(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},i.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?a(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||a(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},i.prototype.derive=function(e){return e.validate()||a(e.validate(),"public point not validated"),e.mul(this.priv).getX()},i.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},i.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},i.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(e,t,r){"use strict";var n=r(16),a=r(31),i=a.assert;function o(e,t){if(e instanceof o)return e;this._importDER(e,t)||(i(e.r&&e.s,"Signature without r or s"),this.r=new n(e.r,16),this.s=new n(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function s(){this.place=0}function c(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var a=0,i=0,o=t.place;i<n;i++,o++)a<<=8,a|=e[o],a>>>=0;return!(a<=127)&&(t.place=o,a)}function l(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function u(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}e.exports=o,o.prototype._importDER=function(e,t){e=a.toArray(e,t);var r=new s;if(48!==e[r.place++])return!1;var i=c(e,r);if(!1===i)return!1;if(i+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var o=c(e,r);if(!1===o)return!1;var l=e.slice(r.place,o+r.place);if(r.place+=o,2!==e[r.place++])return!1;var u=c(e,r);if(!1===u)return!1;if(e.length!==u+r.place)return!1;var d=e.slice(r.place,u+r.place);if(0===l[0]){if(!(128&l[1]))return!1;l=l.slice(1)}if(0===d[0]){if(!(128&d[1]))return!1;d=d.slice(1)}return this.r=new n(l),this.s=new n(d),this.recoveryParam=null,!0},o.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=l(t),r=l(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];u(n,t.length),(n=n.concat(t)).push(2),u(n,r.length);var i=n.concat(r),o=[48];return u(o,i.length),o=o.concat(i),a.encode(o,e)}},function(e,t,r){"use strict";var n=r(186),a=r(185),i=r(31),o=i.assert,s=i.parseBytes,c=r(850),l=r(851);function u(e){if(o("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof u))return new u(e);e=a[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=n.sha512}e.exports=u,u.prototype.sign=function(e,t){e=s(e);var r=this.keyFromSecret(t),n=this.hashInt(r.messagePrefix(),e),a=this.g.mul(n),i=this.encodePoint(a),o=this.hashInt(i,r.pubBytes(),e).mul(r.priv()),c=n.add(o).umod(this.curve.n);return this.makeSignature({R:a,S:c,Rencoded:i})},u.prototype.verify=function(e,t,r){e=s(e),t=this.makeSignature(t);var n=this.keyFromPublic(r),a=this.hashInt(t.Rencoded(),n.pubBytes(),e),i=this.g.mul(t.S());return t.R().add(n.pub().mul(a)).eq(i)},u.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return i.intFromLE(e.digest()).umod(this.curve.n)},u.prototype.keyFromPublic=function(e){return c.fromPublic(this,e)},u.prototype.keyFromSecret=function(e){return c.fromSecret(this,e)},u.prototype.makeSignature=function(e){return e instanceof l?e:new l(this,e)},u.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},u.prototype.decodePoint=function(e){var t=(e=i.parseBytes(e)).length-1,r=e.slice(0,t).concat(-129&e[t]),n=0!=(128&e[t]),a=i.intFromLE(r);return this.curve.pointFromY(a,n)},u.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},u.prototype.decodeInt=function(e){return i.intFromLE(e)},u.prototype.isPoint=function(e){return e instanceof this.pointClass}},function(e,t,r){"use strict";var n=r(31),a=n.assert,i=n.parseBytes,o=n.cachedProperty;function s(e,t){this.eddsa=e,this._secret=i(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=i(t.pub)}s.fromPublic=function(e,t){return t instanceof s?t:new s(e,{pub:t})},s.fromSecret=function(e,t){return t instanceof s?t:new s(e,{secret:t})},s.prototype.secret=function(){return this._secret},o(s,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),o(s,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),o(s,"privBytes",(function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,n=t.slice(0,e.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n})),o(s,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),o(s,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),o(s,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),s.prototype.sign=function(e){return a(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},s.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},s.prototype.getSecret=function(e){return a(this._secret,"KeyPair is public only"),n.encode(this.secret(),e)},s.prototype.getPublic=function(e){return n.encode(this.pubBytes(),e)},e.exports=s},function(e,t,r){"use strict";var n=r(16),a=r(31),i=a.assert,o=a.cachedProperty,s=a.parseBytes;function c(e,t){this.eddsa=e,"object"!=typeof t&&(t=s(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),i(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof n&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}o(c,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),o(c,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),o(c,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),o(c,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),c.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},c.prototype.toHex=function(){return a.encode(this.toBytes(),"hex").toUpperCase()},e.exports=c},function(e,t){},function(e,t,r){"use strict";var n=r(394);t.certificate=r(859);var a=n.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));t.RSAPrivateKey=a;var i=n.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));t.RSAPublicKey=i;var o=n.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())}));t.PublicKey=o;var s=n.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),c=n.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(s),this.key("subjectPrivateKey").octstr())}));t.PrivateKey=c;var l=n.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));t.EncryptedPrivateKey=l;var u=n.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));t.DSAPrivateKey=u,t.DSAparam=n.define("DSAparam",(function(){this.int()}));var d=n.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(h),this.key("publicKey").optional().explicit(1).bitstr())}));t.ECPrivateKey=d;var h=n.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));t.signature=n.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},function(e,t,r){"use strict";const n=r(395),a=r(397),i=r(1);function o(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}t.define=function(e,t){return new o(e,t)},o.prototype._createNamed=function(e){const t=this.name;function r(e){this._initNamed(e,t)}return i(r,e),r.prototype._initNamed=function(t,r){e.call(this,t,r)},new r(this)},o.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(a[e])),this.decoders[e]},o.prototype.decode=function(e,t,r){return this._getDecoder(t).decode(e,r)},o.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(n[e])),this.encoders[e]},o.prototype.encode=function(e,t,r){return this._getEncoder(t).encode(e,r)}},function(e,t,r){"use strict";const n=r(1),a=r(396);function i(e){a.call(this,e),this.enc="pem"}n(i,a),e.exports=i,i.prototype.encode=function(e,t){const r=a.prototype.encode.call(this,e).toString("base64"),n=["-----BEGIN "+t.label+"-----"];for(let e=0;e<r.length;e+=64)n.push(r.slice(e,e+64));return n.push("-----END "+t.label+"-----"),n.join("\n")}},function(e,t,r){"use strict";const n=r(1),a=r(187).Buffer,i=r(398);function o(e){i.call(this,e),this.enc="pem"}n(o,i),e.exports=o,o.prototype.decode=function(e,t){const r=e.toString().split(/[\r\n]+/g),n=t.label.toUpperCase(),o=/^-----(BEGIN|END) ([^-]+)-----$/;let s=-1,c=-1;for(let e=0;e<r.length;e++){const t=r[e].match(o);if(null!==t&&t[2]===n){if(-1!==s){if("END"!==t[1])break;c=e;break}if("BEGIN"!==t[1])break;s=e}}if(-1===s||-1===c)throw new Error("PEM section not found for: "+n);const l=r.slice(s+1,c).join("");l.replace(/[^a-z0-9+/=]+/gi,"");const u=a.from(l,"base64");return i.prototype.decode.call(this,u,t)}},function(e,t,r){"use strict";const n=t;n.Reporter=r(189).Reporter,n.DecoderBuffer=r(91).DecoderBuffer,n.EncoderBuffer=r(91).EncoderBuffer,n.Node=r(188)},function(e,t,r){"use strict";const n=t;n._reverse=function(e){const t={};return Object.keys(e).forEach((function(r){(0|r)==r&&(r|=0);const n=e[r];t[n]=r})),t},n.der=r(190)},function(e,t,r){"use strict";var n=r(394),a=n.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),i=n.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),o=n.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),s=n.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(o),this.key("subjectPublicKey").bitstr())})),c=n.define("RelativeDistinguishedName",(function(){this.setof(i)})),l=n.define("RDNSequence",(function(){this.seqof(c)})),u=n.define("Name",(function(){this.choice({rdnSequence:this.use(l)})})),d=n.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(a),this.key("notAfter").use(a))})),h=n.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),p=n.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(o),this.key("issuer").use(u),this.key("validity").use(d),this.key("subject").use(u),this.key("subjectPublicKeyInfo").use(s),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(h).optional())})),f=n.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(p),this.key("signatureAlgorithm").use(o),this.key("signatureValue").bitstr())}));e.exports=f},function(e){e.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')},function(e,t,r){var n=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,a=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,i=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,o=r(119),s=r(180),c=r(2).Buffer;e.exports=function(e,t){var r,l=e.toString(),u=l.match(n);if(u){var d="aes"+u[1],h=c.from(u[2],"hex"),p=c.from(u[3].replace(/[\r\n]/g,""),"base64"),f=o(t,h.slice(0,8),parseInt(u[1],10)).key,m=[],g=s.createDecipheriv(d,f,h);m.push(g.update(p)),m.push(g.final()),r=c.concat(m)}else{var y=l.match(i);r=c.from(y[2].replace(/[\r\n]/g,""),"base64")}return{tag:l.match(a)[1],data:r}}},function(e,t,r){var n=r(183).Buffer,a=r(393),i=r(120).ec,o=r(122),s=r(399);function c(e,t){if(e.cmpn(0)<=0)throw new Error("invalid sig");if(e.cmp(t)>=t)throw new Error("invalid sig")}e.exports=function(e,t,r,l,u){var d=o(r);if("ec"===d.type){if("ecdsa"!==l&&"ecdsa/rsa"!==l)throw new Error("wrong public key type");return function(e,t,r){var n=s[r.data.algorithm.curve.join(".")];if(!n)throw new Error("unknown curve "+r.data.algorithm.curve.join("."));var a=new i(n),o=r.data.subjectPrivateKey.data;return a.verify(t,e,o)}(e,t,d)}if("dsa"===d.type){if("dsa"!==l)throw new Error("wrong public key type");return function(e,t,r){var n=r.data.p,i=r.data.q,s=r.data.g,l=r.data.pub_key,u=o.signature.decode(e,"der"),d=u.s,h=u.r;c(d,i),c(h,i);var p=a.mont(n),f=d.invm(i);return 0===s.toRed(p).redPow(new a(t).mul(f).mod(i)).fromRed().mul(l.toRed(p).redPow(h.mul(f).mod(i)).fromRed()).mod(n).mod(i).cmp(h)}(e,t,d)}if("rsa"!==l&&"ecdsa/rsa"!==l)throw new Error("wrong public key type");t=n.concat([u,t]);for(var h=d.modulus.byteLength(),p=[1],f=0;t.length+p.length+2<h;)p.push(255),f++;p.push(0);for(var m=-1;++m<t.length;)p.push(t[m]);p=n.from(p);var g=a.mont(d.modulus);e=(e=new a(e).toRed(g)).redPow(new a(d.publicExponent)),e=n.from(e.fromRed().toArray());var y=f<8?1:0;for(h=Math.min(e.length,p.length),e.length!==p.length&&(y=1),m=-1;++m<h;)y|=e[m]^p[m];return 0===y}},function(e,t,r){(function(t){var n=r(120),a=r(16);e.exports=function(e){return new o(e)};var i={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function o(e){this.curveType=i[e],this.curveType||(this.curveType={name:e}),this.curve=new n.ec(this.curveType.name),this.keys=void 0}function s(e,r,n){Array.isArray(e)||(e=e.toArray());var a=new t(e);if(n&&a.length<n){var i=new t(n-a.length);i.fill(0),a=t.concat([i,a])}return r?a.toString(r):a}i.p224=i.secp224r1,i.p256=i.secp256r1=i.prime256v1,i.p192=i.secp192r1=i.prime192v1,i.p384=i.secp384r1,i.p521=i.secp521r1,o.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},o.prototype.computeSecret=function(e,r,n){return r=r||"utf8",t.isBuffer(e)||(e=new t(e,r)),s(this.curve.keyFromPublic(e).getPublic().mul(this.keys.getPrivate()).getX(),n,this.curveType.byteLength)},o.prototype.getPublicKey=function(e,t){var r=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(r[r.length-1]%2?r[0]=7:r[0]=6),s(r,e)},o.prototype.getPrivateKey=function(e){return s(this.keys.getPrivate(),e)},o.prototype.setPublicKey=function(e,r){return r=r||"utf8",t.isBuffer(e)||(e=new t(e,r)),this.keys._importPublic(e),this},o.prototype.setPrivateKey=function(e,r){r=r||"utf8",t.isBuffer(e)||(e=new t(e,r));var n=new a(e);return n=n.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(n),this}}).call(this,r(4).Buffer)},function(e,t,r){t.publicEncrypt=r(865),t.privateDecrypt=r(866),t.privateEncrypt=function(e,r){return t.publicEncrypt(e,r,!0)},t.publicDecrypt=function(e,r){return t.privateDecrypt(e,r,!0)}},function(e,t,r){var n=r(122),a=r(74),i=r(75),o=r(400),s=r(401),c=r(16),l=r(402),u=r(184),d=r(2).Buffer;e.exports=function(e,t,r){var h;h=e.padding?e.padding:r?1:4;var p,f=n(e);if(4===h)p=function(e,t){var r=e.modulus.byteLength(),n=t.length,l=i("sha1").update(d.alloc(0)).digest(),u=l.length,h=2*u;if(n>r-h-2)throw new Error("message too long");var p=d.alloc(r-n-h-2),f=r-u-1,m=a(u),g=s(d.concat([l,p,d.alloc(1,1),t],f),o(m,f)),y=s(m,o(g,u));return new c(d.concat([d.alloc(1),y,g],r))}(f,t);else if(1===h)p=function(e,t,r){var n,i=t.length,o=e.modulus.byteLength();if(i>o-11)throw new Error("message too long");n=r?d.alloc(o-i-3,255):function(e){var t,r=d.allocUnsafe(e),n=0,i=a(2*e),o=0;for(;n<e;)o===i.length&&(i=a(2*e),o=0),(t=i[o++])&&(r[n++]=t);return r}(o-i-3);return new c(d.concat([d.from([0,r?1:2]),n,d.alloc(1),t],o))}(f,t,r);else{if(3!==h)throw new Error("unknown padding");if((p=new c(t)).cmp(f.modulus)>=0)throw new Error("data too long for modulus")}return r?u(p,f):l(p,f)}},function(e,t,r){var n=r(122),a=r(400),i=r(401),o=r(16),s=r(184),c=r(75),l=r(402),u=r(2).Buffer;e.exports=function(e,t,r){var d;d=e.padding?e.padding:r?1:4;var h,p=n(e),f=p.modulus.byteLength();if(t.length>f||new o(t).cmp(p.modulus)>=0)throw new Error("decryption error");h=r?l(new o(t),p):s(t,p);var m=u.alloc(f-h.length);if(h=u.concat([m,h],f),4===d)return function(e,t){var r=e.modulus.byteLength(),n=c("sha1").update(u.alloc(0)).digest(),o=n.length;if(0!==t[0])throw new Error("decryption error");var s=t.slice(1,o+1),l=t.slice(o+1),d=i(s,a(l,o)),h=i(l,a(d,r-o-1));if(function(e,t){e=u.from(e),t=u.from(t);var r=0,n=e.length;e.length!==t.length&&(r++,n=Math.min(e.length,t.length));var a=-1;for(;++a<n;)r+=e[a]^t[a];return r}(n,h.slice(0,o)))throw new Error("decryption error");var p=o;for(;0===h[p];)p++;if(1!==h[p++])throw new Error("decryption error");return h.slice(p)}(p,h);if(1===d)return function(e,t,r){var n=t.slice(0,2),a=2,i=0;for(;0!==t[a++];)if(a>=t.length){i++;break}var o=t.slice(2,a-1);("0002"!==n.toString("hex")&&!r||"0001"!==n.toString("hex")&&r)&&i++;o.length<8&&i++;if(i)throw new Error("decryption error");return t.slice(a)}(0,h,r);if(3===d)return h;throw new Error("unknown padding")}},function(e,t,r){"use strict";(function(e,n){function a(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var i=r(2),o=r(74),s=i.Buffer,c=i.kMaxLength,l=e.crypto||e.msCrypto,u=Math.pow(2,32)-1;function d(e,t){if("number"!=typeof e||e!=e)throw new TypeError("offset must be a number");if(e>u||e<0)throw new TypeError("offset must be a uint32");if(e>c||e>t)throw new RangeError("offset out of range")}function h(e,t,r){if("number"!=typeof e||e!=e)throw new TypeError("size must be a number");if(e>u||e<0)throw new TypeError("size must be a uint32");if(e+t>r||e>c)throw new RangeError("buffer too small")}function p(e,t,r,a){if(n.browser){var i=e.buffer,s=new Uint8Array(i,t,r);return l.getRandomValues(s),a?void n.nextTick((function(){a(null,e)})):e}if(!a)return o(r).copy(e,t),e;o(r,(function(r,n){if(r)return a(r);n.copy(e,t),a(null,e)}))}l&&l.getRandomValues||!n.browser?(t.randomFill=function(t,r,n,a){if(!(s.isBuffer(t)||t instanceof e.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof r)a=r,r=0,n=t.length;else if("function"==typeof n)a=n,n=t.length-r;else if("function"!=typeof a)throw new TypeError('"cb" argument must be a function');return d(r,t.length),h(n,r,t.length),p(t,r,n,a)},t.randomFillSync=function(t,r,n){void 0===r&&(r=0);if(!(s.isBuffer(t)||t instanceof e.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');d(r,t.length),void 0===n&&(n=t.length-r);return h(n,r,t.length),p(t,r,n)}):(t.randomFill=a,t.randomFillSync=a)}).call(this,r(18),r(9))},function(e,t,r){!function(t){"use strict";var n={};e.exports?(n.bytesToHex=r(869).bytesToHex,n.convertString=r(870),e.exports=s):(n.bytesToHex=t.convertHex.bytesToHex,n.convertString=t.convertString,t.sha256=s);var a=[];!function(){function e(e){for(var t=Math.sqrt(e),r=2;r<=t;r++)if(!(e%r))return!1;return!0}function t(e){return 4294967296*(e-(0|e))|0}for(var r=2,n=0;n<64;)e(r)&&(a[n]=t(Math.pow(r,1/3)),n++),r++}();var i=[],o=function(e,t,r){for(var n=e[0],o=e[1],s=e[2],c=e[3],l=e[4],u=e[5],d=e[6],h=e[7],p=0;p<64;p++){if(p<16)i[p]=0|t[r+p];else{var f=i[p-15],m=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,g=i[p-2],y=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;i[p]=m+i[p-7]+y+i[p-16]}var v=n&o^n&s^o&s,b=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),_=h+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&u^~l&d)+a[p]+i[p];h=d,d=u,u=l,l=c+_|0,c=s,s=o,o=n,n=_+(b+v)|0}e[0]=e[0]+n|0,e[1]=e[1]+o|0,e[2]=e[2]+s|0,e[3]=e[3]+c|0,e[4]=e[4]+l|0,e[5]=e[5]+u|0,e[6]=e[6]+d|0,e[7]=e[7]+h|0};function s(e,t){e.constructor===String&&(e=n.convertString.UTF8.stringToBytes(e));var r=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],a=function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t}(e),i=8*e.length;a[i>>5]|=128<<24-i%32,a[15+(i+64>>9<<4)]=i;for(var s=0;s<a.length;s+=16)o(r,a,s);var c=function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t}(r);return t&&t.asBytes?c:t&&t.asString?n.convertString.bytesToString(c):n.bytesToHex(c)}s.x2=function(e,t){return s(s(e,{asBytes:!0}),t)}}(this)},function(e,t,r){!function(t){"use strict";var r={bytesToHex:function(e){return function(e){return e.map((function(e){return t=e.toString(16),r=2,t.length>r?t:Array(r-t.length+1).join("0")+t;var t,r})).join("")}(e)},hexToBytes:function(e){if(e.length%2==1)throw new Error("hexToBytes can't have a string with an odd number of characters.");return 0===e.indexOf("0x")&&(e=e.slice(2)),e.match(/../g).map((function(e){return parseInt(e,16)}))}};e.exports?e.exports=r:t.convertHex=r}(this)},function(e,t,r){!function(t){"use strict";var r={bytesToString:function(e){return e.map((function(e){return String.fromCharCode(e)})).join("")},stringToBytes:function(e){return e.split("").map((function(e){return e.charCodeAt(0)}))}};r.UTF8={bytesToString:function(e){return decodeURIComponent(escape(r.bytesToString(e)))},stringToBytes:function(e){return r.stringToBytes(unescape(encodeURIComponent(e)))}},e.exports?e.exports=r:t.convertString=r}(this)},function(e,t,r){var n=r(67).CryptoJS;r(872),r(873),r(874),r(875),r(876);var a=r(877).JsonFormatter;t.CryptoJS=n,t.JsonFormatter=a},function(e,t,r){var n,a,i=r(67).CryptoJS;a=(n=i).lib.WordArray,n.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp();for(var a=[],i=0;i<r;i+=3)for(var o=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;s<4&&i+.75*s<r;s++)a.push(n.charAt(o>>>6*(3-s)&63));var c=n.charAt(64);if(c)for(;a.length%4;)a.push(c);return a.join("")},parse:function(e){var t=e.length,r=this._map,n=r.charAt(64);if(n){var i=e.indexOf(n);-1!=i&&(t=i)}for(var o=[],s=0,c=0;c<t;c++)if(c%4){var l=r.indexOf(e.charAt(c-1))<<c%4*2,u=r.indexOf(e.charAt(c))>>>6-c%4*2;o[s>>>2]|=(l|u)<<24-s%4*8,s++}return a.create(o,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},function(e,t,r){var n=r(67).CryptoJS;!function(e){var t=n,r=t.lib,a=r.WordArray,i=r.Hasher,o=t.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=o.MD5=i.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=t+r,a=e[n];e[n]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var i=this._hash.words,o=e[t+0],c=e[t+1],p=e[t+2],f=e[t+3],m=e[t+4],g=e[t+5],y=e[t+6],v=e[t+7],b=e[t+8],_=e[t+9],w=e[t+10],x=e[t+11],k=e[t+12],S=e[t+13],E=e[t+14],A=e[t+15],P=i[0],C=i[1],D=i[2],T=i[3];P=l(P,C,D,T,o,7,s[0]),T=l(T,P,C,D,c,12,s[1]),D=l(D,T,P,C,p,17,s[2]),C=l(C,D,T,P,f,22,s[3]),P=l(P,C,D,T,m,7,s[4]),T=l(T,P,C,D,g,12,s[5]),D=l(D,T,P,C,y,17,s[6]),C=l(C,D,T,P,v,22,s[7]),P=l(P,C,D,T,b,7,s[8]),T=l(T,P,C,D,_,12,s[9]),D=l(D,T,P,C,w,17,s[10]),C=l(C,D,T,P,x,22,s[11]),P=l(P,C,D,T,k,7,s[12]),T=l(T,P,C,D,S,12,s[13]),D=l(D,T,P,C,E,17,s[14]),P=u(P,C=l(C,D,T,P,A,22,s[15]),D,T,c,5,s[16]),T=u(T,P,C,D,y,9,s[17]),D=u(D,T,P,C,x,14,s[18]),C=u(C,D,T,P,o,20,s[19]),P=u(P,C,D,T,g,5,s[20]),T=u(T,P,C,D,w,9,s[21]),D=u(D,T,P,C,A,14,s[22]),C=u(C,D,T,P,m,20,s[23]),P=u(P,C,D,T,_,5,s[24]),T=u(T,P,C,D,E,9,s[25]),D=u(D,T,P,C,f,14,s[26]),C=u(C,D,T,P,b,20,s[27]),P=u(P,C,D,T,S,5,s[28]),T=u(T,P,C,D,p,9,s[29]),D=u(D,T,P,C,v,14,s[30]),P=d(P,C=u(C,D,T,P,k,20,s[31]),D,T,g,4,s[32]),T=d(T,P,C,D,b,11,s[33]),D=d(D,T,P,C,x,16,s[34]),C=d(C,D,T,P,E,23,s[35]),P=d(P,C,D,T,c,4,s[36]),T=d(T,P,C,D,m,11,s[37]),D=d(D,T,P,C,v,16,s[38]),C=d(C,D,T,P,w,23,s[39]),P=d(P,C,D,T,S,4,s[40]),T=d(T,P,C,D,o,11,s[41]),D=d(D,T,P,C,f,16,s[42]),C=d(C,D,T,P,y,23,s[43]),P=d(P,C,D,T,_,4,s[44]),T=d(T,P,C,D,k,11,s[45]),D=d(D,T,P,C,A,16,s[46]),P=h(P,C=d(C,D,T,P,p,23,s[47]),D,T,o,6,s[48]),T=h(T,P,C,D,v,10,s[49]),D=h(D,T,P,C,E,15,s[50]),C=h(C,D,T,P,g,21,s[51]),P=h(P,C,D,T,k,6,s[52]),T=h(T,P,C,D,f,10,s[53]),D=h(D,T,P,C,w,15,s[54]),C=h(C,D,T,P,c,21,s[55]),P=h(P,C,D,T,b,6,s[56]),T=h(T,P,C,D,A,10,s[57]),D=h(D,T,P,C,y,15,s[58]),C=h(C,D,T,P,S,21,s[59]),P=h(P,C,D,T,m,6,s[60]),T=h(T,P,C,D,x,10,s[61]),D=h(D,T,P,C,p,15,s[62]),C=h(C,D,T,P,_,21,s[63]),i[0]=i[0]+P|0,i[1]=i[1]+C|0,i[2]=i[2]+D|0,i[3]=i[3]+T|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,a=8*t.sigBytes;r[a>>>5]|=128<<24-a%32;var i=e.floor(n/4294967296),o=n;r[15+(a+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),r[14+(a+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t.sigBytes=4*(r.length+1),this._process();for(var s=this._hash,c=s.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return s},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,r,n,a,i,o){var s=e+(t&r|~t&n)+a+o;return(s<<i|s>>>32-i)+t}function u(e,t,r,n,a,i,o){var s=e+(t&n|r&~n)+a+o;return(s<<i|s>>>32-i)+t}function d(e,t,r,n,a,i,o){var s=e+(t^r^n)+a+o;return(s<<i|s>>>32-i)+t}function h(e,t,r,n,a,i,o){var s=e+(r^(t|~n))+a+o;return(s<<i|s>>>32-i)+t}t.MD5=i._createHelper(c),t.HmacMD5=i._createHmacHelper(c)}(Math)},function(e,t,r){var n,a,i,o,s,c,l,u=r(67).CryptoJS;a=(n=u).lib,i=a.Base,o=a.WordArray,s=n.algo,c=s.MD5,l=s.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,n=r.hasher.create(),a=o.create(),i=a.words,s=r.keySize,c=r.iterations;i.length<s;){l&&n.update(l);var l=n.update(e).finalize(t);n.reset();for(var u=1;u<c;u++)l=n.finalize(l),n.reset();a.concat(l)}return a.sigBytes=4*s,a}}),n.EvpKDF=function(e,t,r){return l.create(r).compute(e,t)}},function(e,t,r){var n,a,i,o,s,c,l,u,d,h,p,f,m,g,y,v,b,_,w=r(67).CryptoJS;w.lib.Cipher||(a=(n=w).lib,i=a.Base,o=a.WordArray,s=a.BufferedBlockAlgorithm,(c=n.enc).Utf8,l=c.Base64,u=n.algo.EvpKDF,d=a.Cipher=s.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?_:v}return function(t){return{encrypt:function(r,n,a){return e(n).encrypt(t,r,n,a)},decrypt:function(r,n,a){return e(n).decrypt(t,r,n,a)}}}}()}),a.StreamCipher=d.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),h=n.mode={},p=a.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=h.CBC=function(){var e=p.extend();function t(e,t,r){var n=this._iv;if(n){var a=n;this._iv=void 0}else a=this._prevBlock;for(var i=0;i<r;i++)e[t+i]^=a[i]}return e.Encryptor=e.extend({processBlock:function(e,r){var n=this._cipher,a=n.blockSize;t.call(this,e,r,a),n.encryptBlock(e,r),this._prevBlock=e.slice(r,r+a)}}),e.Decryptor=e.extend({processBlock:function(e,r){var n=this._cipher,a=n.blockSize,i=e.slice(r,r+a);n.decryptBlock(e,r),t.call(this,e,r,a),this._prevBlock=i}}),e}(),m=(n.pad={}).Pkcs7={pad:function(e,t){for(var r=4*t,n=r-e.sigBytes%r,a=n<<24|n<<16|n<<8|n,i=[],s=0;s<n;s+=4)i.push(a);var c=o.create(i,n);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},a.BlockCipher=d.extend({cfg:d.cfg.extend({mode:f,padding:m}),reset:function(){d.reset.call(this);var e=this.cfg,t=e.iv,r=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=r.createEncryptor;else n=r.createDecryptor,this._minBufferSize=1;this._mode=n.call(r,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4}),g=a.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),y=(n.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,r=e.salt;if(r)var n=o.create([1398893684,1701076831]).concat(r).concat(t);else n=t;return n.toString(l)},parse:function(e){var t=l.parse(e),r=t.words;if(1398893684==r[0]&&1701076831==r[1]){var n=o.create(r.slice(2,4));r.splice(0,4),t.sigBytes-=16}return g.create({ciphertext:t,salt:n})}},v=a.SerializableCipher=i.extend({cfg:i.extend({format:y}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var a=e.createEncryptor(r,n),i=a.finalize(t),o=a.cfg;return g.create({ciphertext:i,key:r,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),b=(n.kdf={}).OpenSSL={execute:function(e,t,r,n){n||(n=o.random(8));var a=u.create({keySize:t+r}).compute(e,n),i=o.create(a.words.slice(t),4*r);return a.sigBytes=4*t,g.create({key:a,iv:i,salt:n})}},_=a.PasswordBasedCipher=v.extend({cfg:v.cfg.extend({kdf:b}),encrypt:function(e,t,r,n){var a=(n=this.cfg.extend(n)).kdf.execute(r,e.keySize,e.ivSize);n.iv=a.iv;var i=v.encrypt.call(this,e,t,a.key,n);return i.mixIn(a),i},decrypt:function(e,t,r,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var a=n.kdf.execute(r,e.keySize,e.ivSize,t.salt);return n.iv=a.iv,v.decrypt.call(this,e,t,a.key,n)}}))},function(e,t,r){var n=r(67).CryptoJS;!function(){var e=n,t=e.lib.BlockCipher,r=e.algo,a=[],i=[],o=[],s=[],c=[],l=[],u=[],d=[],h=[],p=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var r=0,n=0;for(t=0;t<256;t++){var f=n^n<<1^n<<2^n<<3^n<<4;f=f>>>8^255&f^99,a[r]=f,i[f]=r;var m=e[r],g=e[m],y=e[g],v=257*e[f]^16843008*f;o[r]=v<<24|v>>>8,s[r]=v<<16|v>>>16,c[r]=v<<8|v>>>24,l[r]=v;v=16843009*y^65537*g^257*m^16843008*r;u[f]=v<<24|v>>>8,d[f]=v<<16|v>>>16,h[f]=v<<8|v>>>24,p[f]=v,r?(r=m^e[e[e[y^m]]],n^=e[e[n]]):r=n=1}}();var f=[0,1,2,4,8,16,32,64,128,27,54],m=r.AES=t.extend({_doReset:function(){for(var e=this._key,t=e.words,r=e.sigBytes/4,n=4*((this._nRounds=r+6)+1),i=this._keySchedule=[],o=0;o<n;o++)if(o<r)i[o]=t[o];else{var s=i[o-1];o%r?r>6&&o%r==4&&(s=a[s>>>24]<<24|a[s>>>16&255]<<16|a[s>>>8&255]<<8|a[255&s]):(s=a[(s=s<<8|s>>>24)>>>24]<<24|a[s>>>16&255]<<16|a[s>>>8&255]<<8|a[255&s],s^=f[o/r|0]<<24),i[o]=i[o-r]^s}for(var c=this._invKeySchedule=[],l=0;l<n;l++){o=n-l;if(l%4)s=i[o];else s=i[o-4];c[l]=l<4||o<=4?s:u[a[s>>>24]]^d[a[s>>>16&255]]^h[a[s>>>8&255]]^p[a[255&s]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,s,c,l,a)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,u,d,h,p,i);r=e[t+1];e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,a,i,o,s){for(var c=this._nRounds,l=e[t]^r[0],u=e[t+1]^r[1],d=e[t+2]^r[2],h=e[t+3]^r[3],p=4,f=1;f<c;f++){var m=n[l>>>24]^a[u>>>16&255]^i[d>>>8&255]^o[255&h]^r[p++],g=n[u>>>24]^a[d>>>16&255]^i[h>>>8&255]^o[255&l]^r[p++],y=n[d>>>24]^a[h>>>16&255]^i[l>>>8&255]^o[255&u]^r[p++],v=n[h>>>24]^a[l>>>16&255]^i[u>>>8&255]^o[255&d]^r[p++];l=m,u=g,d=y,h=v}m=(s[l>>>24]<<24|s[u>>>16&255]<<16|s[d>>>8&255]<<8|s[255&h])^r[p++],g=(s[u>>>24]<<24|s[d>>>16&255]<<16|s[h>>>8&255]<<8|s[255&l])^r[p++],y=(s[d>>>24]<<24|s[h>>>16&255]<<16|s[l>>>8&255]<<8|s[255&u])^r[p++],v=(s[h>>>24]<<24|s[l>>>16&255]<<16|s[u>>>8&255]<<8|s[255&d])^r[p++];e[t]=m,e[t+1]=g,e[t+2]=y,e[t+3]=v},keySize:8});e.AES=t._createHelper(m)}()},function(e,t,r){var n=r(67).CryptoJS,a={stringify:function(e){var t={ct:e.ciphertext.toString(n.enc.Base64)};return e.iv&&(t.iv=e.iv.toString()),e.salt&&(t.s=e.salt.toString()),JSON.stringify(t)},parse:function(e){var t=JSON.parse(e),r=n.lib.CipherParams.create({ciphertext:n.enc.Base64.parse(t.ct)});return t.iv&&(r.iv=n.enc.Hex.parse(t.iv)),t.s&&(r.salt=n.enc.Hex.parse(t.s)),r}};t.JsonFormatter=a},function(e,t,r){"use strict";var n=r(879),a=r(880),i=r(403);function o(e,t){return void 0===e?t:(n.isBoolean(e,i.COMPRESSED_TYPE_INVALID),e)}e.exports=function(e){return{privateKeyVerify:function(t){return n.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),32===t.length&&e.privateKeyVerify(t)},privateKeyExport:function(t,r){n.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),r=o(r,!0);var s=e.privateKeyExport(t,r);return a.privateKeyExport(t,s,r)},privateKeyImport:function(t){if(n.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),(t=a.privateKeyImport(t))&&32===t.length&&e.privateKeyVerify(t))return t;throw new Error(i.EC_PRIVATE_KEY_IMPORT_DER_FAIL)},privateKeyNegate:function(t){return n.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyNegate(t)},privateKeyModInverse:function(t){return n.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyModInverse(t)},privateKeyTweakAdd:function(t,r){return n.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),n.isBuffer(r,i.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,i.TWEAK_LENGTH_INVALID),e.privateKeyTweakAdd(t,r)},privateKeyTweakMul:function(t,r){return n.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),n.isBuffer(r,i.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,i.TWEAK_LENGTH_INVALID),e.privateKeyTweakMul(t,r)},publicKeyCreate:function(t,r){return n.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),r=o(r,!0),e.publicKeyCreate(t,r)},publicKeyConvert:function(t,r){return n.isBuffer(t,i.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID),r=o(r,!0),e.publicKeyConvert(t,r)},publicKeyVerify:function(t){return n.isBuffer(t,i.EC_PUBLIC_KEY_TYPE_INVALID),e.publicKeyVerify(t)},publicKeyTweakAdd:function(t,r,a){return n.isBuffer(t,i.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,i.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,i.TWEAK_LENGTH_INVALID),a=o(a,!0),e.publicKeyTweakAdd(t,r,a)},publicKeyTweakMul:function(t,r,a){return n.isBuffer(t,i.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,i.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,i.TWEAK_LENGTH_INVALID),a=o(a,!0),e.publicKeyTweakMul(t,r,a)},publicKeyCombine:function(t,r){n.isArray(t,i.EC_PUBLIC_KEYS_TYPE_INVALID),n.isLengthGTZero(t,i.EC_PUBLIC_KEYS_LENGTH_INVALID);for(var a=0;a<t.length;++a)n.isBuffer(t[a],i.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t[a],33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID);return r=o(r,!0),e.publicKeyCombine(t,r)},signatureNormalize:function(t){return n.isBuffer(t,i.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(t,64,i.ECDSA_SIGNATURE_LENGTH_INVALID),e.signatureNormalize(t)},signatureExport:function(t){n.isBuffer(t,i.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(t,64,i.ECDSA_SIGNATURE_LENGTH_INVALID);var r=e.signatureExport(t);return a.signatureExport(r)},signatureImport:function(t){n.isBuffer(t,i.ECDSA_SIGNATURE_TYPE_INVALID),n.isLengthGTZero(t,i.ECDSA_SIGNATURE_LENGTH_INVALID);var r=a.signatureImport(t);if(r)return e.signatureImport(r);throw new Error(i.ECDSA_SIGNATURE_PARSE_DER_FAIL)},signatureImportLax:function(t){n.isBuffer(t,i.ECDSA_SIGNATURE_TYPE_INVALID),n.isLengthGTZero(t,i.ECDSA_SIGNATURE_LENGTH_INVALID);var r=a.signatureImportLax(t);if(r)return e.signatureImport(r);throw new Error(i.ECDSA_SIGNATURE_PARSE_DER_FAIL)},sign:function(t,r,a){n.isBuffer(t,i.MSG32_TYPE_INVALID),n.isBufferLength(t,32,i.MSG32_LENGTH_INVALID),n.isBuffer(r,i.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,i.EC_PRIVATE_KEY_LENGTH_INVALID);var o=null,s=null;return void 0!==a&&(n.isObject(a,i.OPTIONS_TYPE_INVALID),void 0!==a.data&&(n.isBuffer(a.data,i.OPTIONS_DATA_TYPE_INVALID),n.isBufferLength(a.data,32,i.OPTIONS_DATA_LENGTH_INVALID),o=a.data),void 0!==a.noncefn&&(n.isFunction(a.noncefn,i.OPTIONS_NONCEFN_TYPE_INVALID),s=a.noncefn)),e.sign(t,r,s,o)},verify:function(t,r,a){return n.isBuffer(t,i.MSG32_TYPE_INVALID),n.isBufferLength(t,32,i.MSG32_LENGTH_INVALID),n.isBuffer(r,i.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(r,64,i.ECDSA_SIGNATURE_LENGTH_INVALID),n.isBuffer(a,i.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(a,33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID),e.verify(t,r,a)},recover:function(t,r,a,s){return n.isBuffer(t,i.MSG32_TYPE_INVALID),n.isBufferLength(t,32,i.MSG32_LENGTH_INVALID),n.isBuffer(r,i.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(r,64,i.ECDSA_SIGNATURE_LENGTH_INVALID),n.isNumber(a,i.RECOVERY_ID_TYPE_INVALID),n.isNumberInInterval(a,-1,4,i.RECOVERY_ID_VALUE_INVALID),s=o(s,!0),e.recover(t,r,a,s)},ecdh:function(t,r){return n.isBuffer(t,i.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,i.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),e.ecdh(t,r)},ecdhUnsafe:function(t,r,a){return n.isBuffer(t,i.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,i.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),a=o(a,!0),e.ecdhUnsafe(t,r,a)}}}},function(e,t,r){"use strict";(function(e){var r=Object.prototype.toString;t.isArray=function(e,t){if(!Array.isArray(e))throw TypeError(t)},t.isBoolean=function(e,t){if("[object Boolean]"!==r.call(e))throw TypeError(t)},t.isBuffer=function(t,r){if(!e.isBuffer(t))throw TypeError(r)},t.isFunction=function(e,t){if("[object Function]"!==r.call(e))throw TypeError(t)},t.isNumber=function(e,t){if("[object Number]"!==r.call(e))throw TypeError(t)},t.isObject=function(e,t){if("[object Object]"!==r.call(e))throw TypeError(t)},t.isBufferLength=function(e,t,r){if(e.length!==t)throw RangeError(r)},t.isBufferLength2=function(e,t,r,n){if(e.length!==t&&e.length!==r)throw RangeError(n)},t.isLengthGTZero=function(e,t){if(0===e.length)throw RangeError(t)},t.isNumberInInterval=function(e,t,r,n){if(e<=t||e>=r)throw RangeError(n)}}).call(this,r(4).Buffer)},function(e,t,r){"use strict";var n=r(2).Buffer,a=r(881),i=n.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),o=n.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);t.privateKeyExport=function(e,t,r){var a=n.from(r?i:o);return e.copy(a,r?8:9),t.copy(a,r?181:214),a},t.privateKeyImport=function(e){var t=e.length,r=0;if(!(t<r+1||48!==e[r])&&!(t<(r+=1)+1)&&128&e[r]){var n=127&e[r];if(r+=1,!(n<1||n>2||t<r+n)){var a=e[r+n-1]|(n>1?e[r+n-2]<<8:0);if(!(t<(r+=n)+a||t<r+3||2!==e[r]||1!==e[r+1]||1!==e[r+2]||t<(r+=3)+2||4!==e[r]||e[r+1]>32||t<r+2+e[r+1]))return e.slice(r+2,r+2+e[r+1])}}},t.signatureExport=function(e){for(var t=n.concat([n.from([0]),e.r]),r=33,i=0;r>1&&0===t[i]&&!(128&t[i+1]);--r,++i);for(var o=n.concat([n.from([0]),e.s]),s=33,c=0;s>1&&0===o[c]&&!(128&o[c+1]);--s,++c);return a.encode(t.slice(i),o.slice(c))},t.signatureImport=function(e){var t=n.alloc(32,0),r=n.alloc(32,0);try{var i=a.decode(e);if(33===i.r.length&&0===i.r[0]&&(i.r=i.r.slice(1)),i.r.length>32)throw new Error("R length is too long");if(33===i.s.length&&0===i.s[0]&&(i.s=i.s.slice(1)),i.s.length>32)throw new Error("S length is too long")}catch(e){return}return i.r.copy(t,32-i.r.length),i.s.copy(r,32-i.s.length),{r:t,s:r}},t.signatureImportLax=function(e){var t=n.alloc(32,0),r=n.alloc(32,0),a=e.length,i=0;if(48===e[i++]){var o=e[i++];if(!(128&o&&(i+=o-128)>a)&&2===e[i++]){var s=e[i++];if(128&s){if(i+(o=s-128)>a)return;for(;o>0&&0===e[i];i+=1,o-=1);for(s=0;o>0;i+=1,o-=1)s=(s<<8)+e[i]}if(!(s>a-i)){var c=i;if(i+=s,2===e[i++]){var l=e[i++];if(128&l){if(i+(o=l-128)>a)return;for(;o>0&&0===e[i];i+=1,o-=1);for(l=0;o>0;i+=1,o-=1)l=(l<<8)+e[i]}if(!(l>a-i)){var u=i;for(i+=l;s>0&&0===e[c];s-=1,c+=1);if(!(s>32)){var d=e.slice(c,c+s);for(d.copy(t,32-d.length);l>0&&0===e[u];l-=1,u+=1);if(!(l>32)){var h=e.slice(u,u+l);return h.copy(r,32-h.length),{r:t,s:r}}}}}}}}}},function(e,t,r){var n=r(2).Buffer;e.exports={check:function(e){if(e.length<8)return!1;if(e.length>72)return!1;if(48!==e[0])return!1;if(e[1]!==e.length-2)return!1;if(2!==e[2])return!1;var t=e[3];if(0===t)return!1;if(5+t>=e.length)return!1;if(2!==e[4+t])return!1;var r=e[5+t];return 0!==r&&(6+t+r===e.length&&(!(128&e[4])&&(!(t>1&&0===e[4]&&!(128&e[5]))&&(!(128&e[t+6])&&!(r>1&&0===e[t+6]&&!(128&e[t+7]))))))},decode:function(e){if(e.length<8)throw new Error("DER sequence length is too short");if(e.length>72)throw new Error("DER sequence length is too long");if(48!==e[0])throw new Error("Expected DER sequence");if(e[1]!==e.length-2)throw new Error("DER sequence length is invalid");if(2!==e[2])throw new Error("Expected DER integer");var t=e[3];if(0===t)throw new Error("R length is zero");if(5+t>=e.length)throw new Error("R length is too long");if(2!==e[4+t])throw new Error("Expected DER integer (2)");var r=e[5+t];if(0===r)throw new Error("S length is zero");if(6+t+r!==e.length)throw new Error("S length is invalid");if(128&e[4])throw new Error("R value is negative");if(t>1&&0===e[4]&&!(128&e[5]))throw new Error("R value excessively padded");if(128&e[t+6])throw new Error("S value is negative");if(r>1&&0===e[t+6]&&!(128&e[t+7]))throw new Error("S value excessively padded");return{r:e.slice(4,4+t),s:e.slice(6+t)}},encode:function(e,t){var r=e.length,a=t.length;if(0===r)throw new Error("R length is zero");if(0===a)throw new Error("S length is zero");if(r>33)throw new Error("R length is too long");if(a>33)throw new Error("S length is too long");if(128&e[0])throw new Error("R value is negative");if(128&t[0])throw new Error("S value is negative");if(r>1&&0===e[0]&&!(128&e[1]))throw new Error("R value excessively padded");if(a>1&&0===t[0]&&!(128&t[1]))throw new Error("S value excessively padded");var i=n.allocUnsafe(6+r+a);return i[0]=48,i[1]=i.length-2,i[2]=2,i[3]=e.length,e.copy(i,4),i[4+r]=2,i[5+r]=t.length,t.copy(i,6+r),i}}},function(e,t,r){"use strict";var n=r(2).Buffer,a=r(75),i=r(16),o=r(120).ec,s=r(403),c=new o("secp256k1"),l=c.curve;function u(e){var t=e[0];switch(t){case 2:case 3:return 33!==e.length?null:function(e,t){var r=new i(t);if(r.cmp(l.p)>=0)return null;var n=(r=r.toRed(l.red)).redSqr().redIMul(r).redIAdd(l.b).redSqrt();return 3===e!==n.isOdd()&&(n=n.redNeg()),c.keyPair({pub:{x:r,y:n}})}(t,e.slice(1,33));case 4:case 6:case 7:return 65!==e.length?null:function(e,t,r){var n=new i(t),a=new i(r);if(n.cmp(l.p)>=0||a.cmp(l.p)>=0)return null;if(n=n.toRed(l.red),a=a.toRed(l.red),(6===e||7===e)&&a.isOdd()!==(7===e))return null;var o=n.redSqr().redIMul(n);return a.redSqr().redISub(o.redIAdd(l.b)).isZero()?c.keyPair({pub:{x:n,y:a}}):null}(t,e.slice(1,33),e.slice(33,65));default:return null}}t.privateKeyVerify=function(e){var t=new i(e);return t.cmp(l.n)<0&&!t.isZero()},t.privateKeyExport=function(e,t){var r=new i(e);if(r.cmp(l.n)>=0||r.isZero())throw new Error(s.EC_PRIVATE_KEY_EXPORT_DER_FAIL);return n.from(c.keyFromPrivate(e).getPublic(t,!0))},t.privateKeyNegate=function(e){var t=new i(e);return t.isZero()?n.alloc(32):l.n.sub(t).umod(l.n).toArrayLike(n,"be",32)},t.privateKeyModInverse=function(e){var t=new i(e);if(t.cmp(l.n)>=0||t.isZero())throw new Error(s.EC_PRIVATE_KEY_RANGE_INVALID);return t.invm(l.n).toArrayLike(n,"be",32)},t.privateKeyTweakAdd=function(e,t){var r=new i(t);if(r.cmp(l.n)>=0)throw new Error(s.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);if(r.iadd(new i(e)),r.cmp(l.n)>=0&&r.isub(l.n),r.isZero())throw new Error(s.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);return r.toArrayLike(n,"be",32)},t.privateKeyTweakMul=function(e,t){var r=new i(t);if(r.cmp(l.n)>=0||r.isZero())throw new Error(s.EC_PRIVATE_KEY_TWEAK_MUL_FAIL);return r.imul(new i(e)),r.cmp(l.n)&&(r=r.umod(l.n)),r.toArrayLike(n,"be",32)},t.publicKeyCreate=function(e,t){var r=new i(e);if(r.cmp(l.n)>=0||r.isZero())throw new Error(s.EC_PUBLIC_KEY_CREATE_FAIL);return n.from(c.keyFromPrivate(e).getPublic(t,!0))},t.publicKeyConvert=function(e,t){var r=u(e);if(null===r)throw new Error(s.EC_PUBLIC_KEY_PARSE_FAIL);return n.from(r.getPublic(t,!0))},t.publicKeyVerify=function(e){return null!==u(e)},t.publicKeyTweakAdd=function(e,t,r){var a=u(e);if(null===a)throw new Error(s.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new i(t)).cmp(l.n)>=0)throw new Error(s.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);var o=l.g.mul(t).add(a.pub);if(o.isInfinity())throw new Error(s.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);return n.from(o.encode(!0,r))},t.publicKeyTweakMul=function(e,t,r){var a=u(e);if(null===a)throw new Error(s.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new i(t)).cmp(l.n)>=0||t.isZero())throw new Error(s.EC_PUBLIC_KEY_TWEAK_MUL_FAIL);return n.from(a.pub.mul(t).encode(!0,r))},t.publicKeyCombine=function(e,t){for(var r=new Array(e.length),a=0;a<e.length;++a)if(r[a]=u(e[a]),null===r[a])throw new Error(s.EC_PUBLIC_KEY_PARSE_FAIL);for(var i=r[0].pub,o=1;o<r.length;++o)i=i.add(r[o].pub);if(i.isInfinity())throw new Error(s.EC_PUBLIC_KEY_COMBINE_FAIL);return n.from(i.encode(!0,t))},t.signatureNormalize=function(e){var t=new i(e.slice(0,32)),r=new i(e.slice(32,64));if(t.cmp(l.n)>=0||r.cmp(l.n)>=0)throw new Error(s.ECDSA_SIGNATURE_PARSE_FAIL);var a=n.from(e);return 1===r.cmp(c.nh)&&l.n.sub(r).toArrayLike(n,"be",32).copy(a,32),a},t.signatureExport=function(e){var t=e.slice(0,32),r=e.slice(32,64);if(new i(t).cmp(l.n)>=0||new i(r).cmp(l.n)>=0)throw new Error(s.ECDSA_SIGNATURE_PARSE_FAIL);return{r:t,s:r}},t.signatureImport=function(e){var t=new i(e.r);t.cmp(l.n)>=0&&(t=new i(0));var r=new i(e.s);return r.cmp(l.n)>=0&&(r=new i(0)),n.concat([t.toArrayLike(n,"be",32),r.toArrayLike(n,"be",32)])},t.sign=function(e,t,r,a){if("function"==typeof r){var o=r;r=function(r){var c=o(e,t,null,a,r);if(!n.isBuffer(c)||32!==c.length)throw new Error(s.ECDSA_SIGN_FAIL);return new i(c)}}var u=new i(t);if(u.cmp(l.n)>=0||u.isZero())throw new Error(s.ECDSA_SIGN_FAIL);var d=c.sign(e,t,{canonical:!0,k:r,pers:a});return{signature:n.concat([d.r.toArrayLike(n,"be",32),d.s.toArrayLike(n,"be",32)]),recovery:d.recoveryParam}},t.verify=function(e,t,r){var n={r:t.slice(0,32),s:t.slice(32,64)},a=new i(n.r),o=new i(n.s);if(a.cmp(l.n)>=0||o.cmp(l.n)>=0)throw new Error(s.ECDSA_SIGNATURE_PARSE_FAIL);if(1===o.cmp(c.nh)||a.isZero()||o.isZero())return!1;var d=u(r);if(null===d)throw new Error(s.EC_PUBLIC_KEY_PARSE_FAIL);return c.verify(e,n,{x:d.pub.x,y:d.pub.y})},t.recover=function(e,t,r,a){var o={r:t.slice(0,32),s:t.slice(32,64)},u=new i(o.r),d=new i(o.s);if(u.cmp(l.n)>=0||d.cmp(l.n)>=0)throw new Error(s.ECDSA_SIGNATURE_PARSE_FAIL);try{if(u.isZero()||d.isZero())throw new Error;var h=c.recoverPubKey(e,o,r);return n.from(h.encode(!0,a))}catch(e){throw new Error(s.ECDSA_RECOVER_FAIL)}},t.ecdh=function(e,r){var n=t.ecdhUnsafe(e,r,!0);return a("sha256").update(n).digest()},t.ecdhUnsafe=function(e,t,r){var a=u(e);if(null===a)throw new Error(s.EC_PUBLIC_KEY_PARSE_FAIL);var o=new i(t);if(o.cmp(l.n)>=0||o.isZero())throw new Error(s.ECDH_FAIL);return n.from(a.pub.mul(o).encode(!0,r))}},function(e,t,r){"use strict";var n=Object.keys,a=JSON.stringify;e.exports=function(e){return""+function e(t,r){var i,o,s,c,l,u,d;if("string"===(d=typeof t))return a(t);if(!0===t)return"true";if(!1===t)return"false";if(null===t)return"null";if(t instanceof Array){for(s="[",o=t.length-1,i=0;i<o;i++)s+=e(t[i],!1)+",";return o>-1&&(s+=e(t[i],!1)),s+"]"}if(t instanceof Object){if("function"==typeof t.toJSON)return e(t.toJSON(),r);for(o=(c=n(t).sort()).length,s="",i=0;i<o;)void 0!==(u=e(t[l=c[i]],!0))&&(i&&""!==s&&(s+=","),s+=a(l)+":"+u),i++;return"{"+s+"}"}switch(d){case"function":case"undefined":return r?void 0:null;default:return isFinite(t)?t:null}}(e,!1)}},function(e,t,r){(function(t){function n(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r(5),r(24);var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t||{}}var r,a,o;return r=e,(a=[{key:"validate",value:function(e,t,r,n){""===e&&(e="00000000000000000000000000000000");for(var a=this.app.crypto.hash(e+t+r),i=Math.floor(n/16),o=15-n%16,s="",c=0;c<64;c++)s+=c<i?"0":c==i?o.toString(16):"F";for(var l=0;l<i+1&&l<64;l++)if(parseInt(a[l],16)>parseInt(s[l],16))return!1;return!0}},{key:"serialize",value:function(e,r){var a=t.from(e,"hex"),i=t.from(r,"hex"),o=t.from(this.app.wallet.returnPublicKey(),"hex");return new Uint8Array([].concat(n(a),n(i),n(o)))}},{key:"deserialize",value:function(e){return{target_hash:e.slice(0,32).toString("hex"),random_hash:e.slice(32,64).toString("hex"),creator:e.slice(64,97).toString("hex")}}},{key:"deserializeFromTransaction",value:function(e){return this.deserialize(e.transaction.m)}}])&&i(r.prototype,a),o&&i(r,o),e}();e.exports=o}).call(this,r(4).Buffer)},function(e,t,r){(function(t){function r(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";a(this,e),this.from=t,this.to=r,this.sig=n}var n,o,s;return n=e,(o=[{key:"serialize",value:function(e){var t=e.crypto.toSizedArray(hop.from,33),n=e.crypto.toSizedArray(hop.to,32),a=e.crypto.toSizedArray(hop.sig,64);return new Uint8Array([].concat(r(t),r(n),r(a)))}},{key:"deserialize",value:function(e,r){return{from:t.from(r.slice(0,33)).toString("hex"),to:t.from(r.slice(33,66)).toString("hex"),sig:t.from(r.slice(66,130)).toString("hex")}}},{key:"returnFrom",value:function(){return this.from}},{key:"returnSig",value:function(){return this.sig}},{key:"returnTo",value:function(){return this.to}}])&&i(n.prototype,o),s&&i(n,s),e}();e.exports=o}).call(this,r(4).Buffer)},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r(5);var a=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!(this instanceof e))return new e;this.publickey="",this.tags=[],this.identifiers=[],this.watched=!1,this.lock_block=!1,this.aes_publickey="",this.aes_privatekey="",this.aes_secret="",this.identifiers=[],this.data={}}var t,r,a;return t=e,(r=[{key:"addTag",value:function(e){this.isTagged(e)||this.tags.push(e)}},{key:"addIdentifier",value:function(e){this.isIdentifier(e)||this.identifiers.push(e)}},{key:"hasSharedSecret",value:function(){return""!=this.aes_secret}},{key:"isIdentifier",value:function(e){for(var t=0;t<this.identifiers.length;t++)if(this.identifiers[t]==e)return!0;return!1}},{key:"isPublicKey",value:function(e){return this.publickey==e}},{key:"isWatched",value:function(e){return this.watched}},{key:"isTagged",value:function(e){for(var t=0;t<this.tags.length;t++)if(this.tags[t]==e)return!0;return!1}},{key:"removeIdentifier",value:function(e){if(this.isIdentifier(e))for(var t=this.identifiers.length-1;t>=0;t++)this.identifiers[t]==e&&this.identifiers.splice(t,1)}},{key:"removeTag",value:function(e){if(this.isTagged(e))for(var t=this.tags.length-1;t>=0;t++)this.tags[t]==e&&this.tags.splice(t,1)}}])&&n(t.prototype,r),a&&n(t,a),e}();e.exports=a},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(5),i=r(19),o=r(969),s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t||{},this.keys=[],this.groups=[],this.modtemplate=new i(this.app),this.fetched_keys={}}var t,r,s;return t=e,(r=[{key:"initialize",value:function(){null==this.app.options.keys&&(this.app.options.keys=[]);for(var e=0;e<this.app.options.keys.length;e++){var t=this.app.options.keys[e],r=new a.key(this.app);r.publickey=t.publickey,r.watched=t.watched,r.bid=t.bid,r.bsh=t.bsh,r.lc=t.lc,r.aes_publickey=t.aes_publickey,r.aes_privatekey=t.aes_privatekey,r.aes_secret=t.aes_secret,r.data=t.data;for(var n=0;n<t.identifiers.length;n++)r.identifiers[n]=t.identifiers[n],0==n&&(r.name=t.identifiers[n]);for(var i=0;i<t.tags.length;i++)r.tags[i]=t.tags[i];this.keys.push(r)}0==this.app.options.keys.length&&this.addKey(this.app.wallet.returnPublicKey(),"",!0)}},{key:"addKey",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;if(""!=e){e=e.trim();var c=this.findByPublicKey(e),l=0,u=0;null==c?((c=new a.key(this.app)).publickey=e,c.watched=r,c.bid=i,c.bsh=o,c.lc=s,c.name="",""!=t&&(c.identifiers.includes(t)||(l=1,c.addIdentifier(t),c.name=t)),""!=n&&(c.tags.includes(n)||(u=1,c.addTag(n))),this.keys.push(c)):""!=i&&""!=o?(c.bsh!=o&&c.bid,c.publickey=e,c.watched=r,c.bid=i,c.bsh=o,c.lc=s,c.identifiers.includes(t)||(l=1,c.addIdentifier(t)),c.tags.includes(n)||(u=1,c.addTag(n))):(c.identifiers.includes(t)||(l=1,c.addIdentifier(t)),c.tags.includes(n)||(u=1,c.addTag(n)),r&&(c.watched=!0)),this.saveKeys(),1==l&&this.app.connection.emit("update_identifier",c),1==u&&this.app.connection.emit("update_tag",c)}}},{key:"decryptMessage",value:function(e,t){for(var r=0;r<this.keys.length;r++)if(this.keys[r].publickey==e&&""!=this.keys[r].aes_secret){var n=this.app.crypto.aesDecrypt(t,this.keys[r].aes_secret);if(null!=n){var a=JSON.parse(n);if(null!=a.module)return a}}return t}},{key:"decryptString",value:function(e,t){for(var r=0;r<this.keys.length;r++)if(this.keys[r].publickey==e&&""!=this.keys[r].aes_secret)return this.app.crypto.aesDecrypt(t,this.keys[r].aes_secret);return t}},{key:"encryptMessage",value:function(e,t){for(var r=JSON.stringify(t),n=0;n<this.keys.length;n++)if(this.keys[n].publickey==e&&""!=this.keys[n].aes_secret)return this.app.crypto.aesEncrypt(r,this.keys[n].aes_secret);return t}},{key:"findByPublicKey",value:function(e){for(var t=0;t<this.keys.length;t++)if(this.keys[t].publickey==e)return this.keys[t];return null}},{key:"findByIdentifier",value:function(e){for(var t=0;t<this.keys.length;t++)if(1==this.keys[t].isIdentifier(e))return this.keys[t];return null}},{key:"hasSharedSecret",value:function(e){for(var t=0;t<this.keys.length;t++)if((this.keys[t].publickey==e||1==this.keys[t].isIdentifier(e))&&1==this.keys[t].hasSharedSecret())return!0;return!1}},{key:"isWatched",value:function(e){for(var t=0;t<this.keys.length;t++)if((this.keys[t].publickey==e||this.keys[t].isIdentifier(e))&&this.keys[t].isWatched())return!0;return!1}},{key:"initializeKeyExchange",value:function(e){var t=this.app.crypto.createDiffieHellman(),r=t.getPublicKey(null,"compressed").toString("hex"),n=t.getPrivateKey(null,"compressed").toString("hex");return this.updateCryptoByPublicKey(e,r,n,""),r}},{key:"isTagged",value:function(e,t){var r=this.findByPublicKey(e);return null!=r&&r.isTagged(t)}},{key:"saveKeys",value:function(){this.app.options.keys=this.keys,this.app.storage.saveOptions()}},{key:"saveGrouos",value:function(){this.app.options.groups=this.groups,this.app.storage.saveOptions()}},{key:"removeKey",value:function(e){for(var t=this.keys.length-1;t>=0;t--)this.keys[t].publickey==e&&this.keys.splice(t,1)}},{key:"returnKeys",value:function(){for(var e=[],t=0;t<this.keys.length;t++)1==this.keys[t].lc&&this.keys[t].publickey!=this.app.wallet.returnPublicKey()&&(e[e.length]=this.keys[t]);return e}},{key:"returnGroups",value:function(){return this.groups}},{key:"returnKeychainByTag",value:function(e){for(var t=[],r=0;r<this.keys.length;r++)this.keys[r].isTagged(e)&&(t[t.length]=this.keys[r]);return t}},{key:"updateEmail",value:function(e,t){var r=0;if(null!=this.keys)for(var n=0;n<this.keys.length;n++)this.keys[n].publickey===e&&(this.keys[n].data||(this.keys[n].data={}),r=1,this.keys[n].data.email=t,this.app.connection.emit("update_email",this.keys[n]));0==r&&(this.addKey(e),this.updateEmail(e,t)),this.saveKeys()}},{key:"returnEmail",value:function(e){if(null!=this.keys)for(var t=0;t<this.keys.length;t++)if(this.keys[t].publickey===e&&""!=this.keys[t].data.email&&void 0!==this.keys[t].data.email)return this.keys[t].data.email;return""}},{key:"updateIdenticon",value:function(e,t){if(null!=this.keys)for(var r=0;r<this.keys.length;r++)this.keys[r].publickey===e&&(this.keys[r].data||(this.keys[r].data={}),this.keys[r].data.identicon=t);this.saveKeys()}},{key:"returnIdenticon",value:function(e){if(null!=this.keys)for(var t=0;t<this.keys.length;t++)if(this.keys[t].publickey===e&&""!=this.keys[t].data.identicon&&void 0!==this.keys[t].data.identicon)return this.keys[t].data.identicon;return"data:image/svg+xml;base64,"+new o(this.app.crypto.hash(e),{margin:0,size:420,format:"svg"}).toString()}},{key:"returnIdenticonColor",value:function(e){var t=parseInt(this.app.crypto.hash(e).substr(-7),16)/268435455,r=this.hsl2rgb(t,.7,.5).map(Math.round);return"rgba(".concat(r.join(","),")")}},{key:"hsl2rgb",value:function(e,t,r){return[255*(t=[r+=t*=r<.5?r:1-r,r-(e*=6)%1*t*2,r-=t*=2,r,r+e%1*t,r+t])[~~e%6],255*t[(16|e)%6],255*t[(8|e)%6]]}},{key:"fetchIdentifierPromise",value:function(e){var t=this;return new Promise((function(r,n){t.fetchIdentifier(e,(function(e){r(e)}))}))}},{key:"fetchManyIdentifiersPromise",value:function(e){var t=this;return new Promise((function(r,n){t.fetchManyIdentifiers(e,(function(e){r(e)}))}))}},{key:"fetchIdentifier",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,n="",a=[];""==t&&r(n),n=this.returnIdentifierByPublicKey(t),1==this.fetched_keys[t]&&r(n),n||r(n),this.modtemplate.sendPeerDatabaseRequestWithFilter("Registry",'SELECT * FROM records WHERE publickey = "'+t+'"',(function(t){var n=[];null==t.rows&&r(n),t.err&&r(n),null==t.rows&&r(n),0==t.rows.length&&r(n),n=t.rows.map((function(t){var r=t.publickey,n=t.identifier,i=t.bid,o=t.bsh,s=t.lc;e.fetched_keys[r]=1,e.addKey(r,n,!1,"",i,o,s),a.includes(r)||(a[r]=n)})),r(a)}),(function(e){for(var t=0;t<e.peer.services.length;t++)if("registry"===e.peer.services[t].service)return 1}))}},{key:"fetchManyIdentifiers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,n=[],a=[];if(t.forEach((function(t){var r=e.returnIdentifierByPublicKey(t);r.length>0?n[t]=r:a.push("'".concat(t,"'"))})),0!=a.length){var i="publickey in (".concat(a.join(","),")"),o="select * from records where ".concat(i);this.modtemplate.sendPeerDatabaseRequestWithFilter("Registry",o,(function(t){try{var a=[];if(void 0===t.rows)return void r(a);if(t.err)return void r(a);if(0==t.rows.length)return void r(a);a=t.rows.map((function(t){var r=t.publickey,a=t.identifier,i=t.bid,o=t.bsh,s=t.lc;e.addKey(r,a,!1,"",i,o,s),n.includes(r)||(n[r]=a)})),r(n)}catch(e){console.log(e)}}),(function(e){if(e.peer.services)for(var t=0;t<e.peer.services.length;t++)if("registry"===e.peer.services[t].service)return 1}))}else r(n)}},{key:"fetchPublicKeyPromise",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise((function(r,n){e.fetchPublicKey(t,(function(e){r(e)}))}))}},{key:"fetchPublicKey",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;if(!t)return null;this.app.crypto.isPublicKey(t)&&r(t);var n=this.returnPublicKeyByIdentifier(t);""!=n&&r({err:"",rows:[n]}),this.modtemplate.sendPeerDatabaseRequest("registry","records","*","identifier = '".concat(t,"'"),null,(function(t){null==t.rows&&r([]),t.rows.forEach((function(t){var r=t.publickey,n=t.identifier,a=t.bid,i=t.bsh,o=t.lc;e.addKey(r,n,!1,"",a,i,o)})),r(t)}))}},{key:"returnPublicKeyByIdentifier",value:function(e){for(var t=0;t<this.keys.length;t++){var r=this.keys[t];if(1==r.lc&&r.isIdentifier(e))return r.publickey}return""}},{key:"returnIdentifierByPublicKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null!=this.keys)for(var r=0;r<this.keys.length;r++){var n=this.keys[r];if(n.publickey===e&&null!=n.identifiers&&1==n.lc&&n.identifiers.length>0)return n.identifiers[0]}return t?e:""}},{key:"returnUsername",value:function(e){var t=this.returnIdentifierByPublicKey(e,!0);return""!=t&&t!=e?t:t.length>12?t.substr(0,12)+"...":t[0]&&t[0].length>12?t[0].substr(0,12)+"...":t}},{key:"returnWatchedPublicKeys",value:function(){for(var e=[],t=0;t<this.keys.length;t++)this.keys[t].isWatched()&&1==this.keys[t].lc&&e.push(this.keys[t].publickey);return e}},{key:"addWatchedPublicKey",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.addKey(e,"",!0),this.saveKeys(),this.app.network.updatePeersWithWatchedPublicKeys()}},{key:"updateCryptoByPublicKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(""!=e){this.addKey(e);for(var a=0;a<this.keys.length;a++)this.keys[a].publickey==e&&1==this.keys[a].lc&&(this.keys[a].aes_publickey=t,this.keys[a].aes_privatekey=r,this.keys[a].aes_secret=n);return this.saveKeys(),!0}}},{key:"alreadyHaveSharedSecret",value:function(e){for(var t=0;t<this.keys.length;t++)if(this.keys[t].publickey==e&&1==this.keys[t].lc&&""!=this.keys[t].aes_secret)return!0;return!1}},{key:"clean",value:function(){for(var e=0;e<this.keys.length;e++)0==this.keys[e].isWatched()&&""!=this.keys[e].aes_secret&&(console.log("purging key records: "+this.keys[e].publickey+" "+JSON.stringify(this.keys[e].identifiers)),this.keys.splice(e,1),e--)}}])&&n(t.prototype,r),s&&n(t,s),e}();e.exports=s},function(e,t,r){r(889).call;if("undefined"!=typeof window){var n=function(e){if(!e.classList.contains("treated")){e.addEventListener("change",(function(e){var r="";(r=this.files&&this.files.length>1?this.files.length+" files selected.":e.target.value.split("\\").pop())?(t.style.border="none",t.innerHTML=r):t.innerHTML=labelVal})),e.classList.add("treated");var t=document.createElement("label");t.classList.add("treated"),t.innerHTML="Choose File",t.htmlFor=e.id,t.id=e.id+"-label",e.parentNode.appendChild(t)}},a=function(e){var t=document.createElement("div");t.classList.add("saito-select"),e.classList.add("saito-slct"),e.parentNode.insertBefore(t,e),t.appendChild(e)};new MutationObserver((function(e){e.forEach((function(e){e.addedNodes.length>0&&function e(t){for(var r=0;r<t.length;r++)t[r].files&&n(t[r]),"SELECT"===t[r].tagName&&(t[r].classList.contains("saito-slct")||a(t[r])),t[r].childNodes.length>=1&&e(t[r].childNodes)}(e.addedNodes)}))})).observe(document.documentElement,{attributes:!0,characterData:!0,childList:!0,subtree:!0,attributeOldValue:!0}),window.salert=function(e){if(!document.getElementById("alert-wrapper")){var t=document.createElement("div");t.id="alert-wrapper";var r='<div id="alert-shim">';r+='<div id="alert-box">',r+='<p class="alert-message">'+e+"</p>",r+='<div id="alert-buttons"><button id="alert-ok">OK</button>',r+="</div></div></div>",t.innerHTML=r,document.body.appendChild(t),setTimeout((function(){document.querySelector("#alert-box").style.top="0"}),100),document.querySelector("#alert-ok").focus(),document.querySelector("#alert-shim").addEventListener("keyup",(function(e){13===e.keyCode&&(e.preventDefault(),document.querySelector("#alert-ok").click())})),document.querySelector("#alert-ok").addEventListener("click",(function(){t.remove()}),!1)}},window.sconfirm=function(e){if(!document.getElementById("alert-wrapper"))return new Promise((function(t,r){var n=document.createElement("div");n.id="alert-wrapper";var a='<div id="alert-shim">';a+='<div id="alert-box">',a+='<p class="alert-message">'+e+"</p>",a+='<div id="alert-buttons"><button id="alert-cancel">Cancel</button><button id="alert-ok">OK</button>',a+="</div></div></div>",n.innerHTML=a,document.body.appendChild(n),setTimeout((function(){document.getElementById("alert-box").style.top="0"}),100),document.getElementById("alert-ok").focus(),document.getElementById("alert-shim").onclick=function(e){13===e.keyCode&&(e.preventDefault(),document.getElementById("alert-ok").click())},document.getElementById("alert-ok").onclick=function(){n.remove(),t(!0)},document.getElementById("alert-cancel").onclick=function(){n.remove(),t(!1)}}))},window.sprompt=function(e){if(!document.getElementById("alert-wrapper"))return new Promise((function(t,r){var n=document.createElement("div");n.id="alert-wrapper";var a='<div id="alert-shim">';a+='<div id="alert-box">',a+='<p class="alert-message">'+e+"</p>",a+='<div class="alert-prompt"><input type="text" id="promptval" class="promptval" /></div>',a+='<div id="alert-buttons"><button id="alert-cancel">Cancel</button><button id="alert-ok">OK</button>',a+="</div></div></div>",n.innerHTML=a,document.body.appendChild(n),document.querySelector("#promptval").focus(),document.querySelector("#promptval").select(),setTimeout((function(){document.querySelector("#alert-box").style.top="0"}),100),document.querySelector("#alert-shim").addEventListener("keyup",(function(e){13===e.keyCode&&(e.preventDefault(),document.querySelector("#alert-ok").click())})),document.querySelector("#alert-ok").addEventListener("click",(function(){var e=document.querySelector("#promptval").value;n.remove(),t(e)}),!1),document.querySelector("#alert-cancel").addEventListener("click",(function(){n.remove(),t(!1)}),!1)}))},window.siteMessage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9999999;document.getElementById("message-wrapper")&&document.getElementById("message-wrapper").remove();var r=document.createElement("div");r.id="message-wrapper";var n='<div id="message-box">';n+='<p class="message-message">'+e+"</p>",n+="</div>",r.innerHTML=n,document.body.appendChild(r),setTimeout((function(){r.remove()}),t),document.querySelector("#message-wrapper").addEventListener("click",(function(){r.remove()}),!1)},window.imgPop=function(e){e.style.cursor="pointer",e.addEventListener("click",(function(t){var r=document.createElement("div");r.id="alert-wrapper";var n='<div id="alert-shim">';n+='<img class="imgpop" src="'.concat(e.src,'" />'),n+="</div>",r.innerHTML=n,document.body.appendChild(r),document.querySelector("img.imgpop").addEventListener("click",(function(t){try{window.open("").document.body.innerHTML='<img src="'+e.src+'" />'}catch(e){}})),r.addEventListener("click",(function(e){document.getElementById("alert-wrapper").remove()}))}))},window.scopy=function(e){var t=document.createElement("div");t.innerHTML=e,t.style.position="fixed",t.style.pointerEvents="none",t.style.opacity=0;var r=Array.prototype.slice.call(document.styleSheets).filter((function(e){return!e.disabled}));document.body.appendChild(t),window.getSelection().removeAllRanges();var n=document.createRange();n.selectNode(t),window.getSelection().addRange(n),document.execCommand("copy");for(var a=0;a<r.length;a++)r[a].disabled=!0;document.execCommand("copy");for(a=0;a<r.length;a++)r[a].disabled=!1;document.body.removeChild(t)},window.sWord=function(e,t){var r=new Blob(["\ufeff",e],{type:"application/msword"}),n="data:application/vnd.ms-word;charset=utf-8,"+encodeURIComponent(e),a=document.createElement("a");document.body.appendChild(a),navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(r,t):(a.href=n,a.download=t,a.click()),document.body.removeChild(a)},window.s2Number=function(e){if(void 0!==e)return e=e.toString().replace(/,/g,""),"number"!=typeof Number(e)?e:Number(e).toLocaleString()},window.addStyleSheet=function(e){var t=document.head,r=document.createElement("link");r.type="text/css",r.rel="stylesheet",r.href=e,t.appendChild(r)},HTMLElement.prototype.toggleClass=function(e){this.classList.contains(e)?this.classList.remove(e):this.classList.add(e)},HTMLElement.prototype.destroy=function(){try{this.parentNode.removeChild(this)}catch(e){console.log(e)}},window.setPreference=function(e,t){void 0===this.localStorage.profile&&(this.localStorage.profile=JSON.stringify({}));var r=JSON.parse(localStorage.profile);r[e]=t,localStorage.profile=JSON.stringify(r)},window.getPreference=function(e){if(void 0!==this.localStorage.profile&&(profile=JSON.parse(localStorage.profile),void 0!==profile[e]))return profile[e]},window.handlePasteImage=function(e,t){e.onpaste=function(e){var r=(e.clipboardData||e.originalEvent.clipboardData).items;console.log(JSON.stringify(r));for(var n=null,a=0;a<r.length;a++)0===r[a].type.indexOf("image")&&(n=r[a].getAsFile());if(null!==n){if(document.getElementById("alert-wrapper"))return;return new Promise((function(e,r){var a=document.createElement("div");a.id="alert-wrapper";a.innerHTML='<div id="alert-shim"><div id="alert-box"><p class="alert-message"><img class="img-prev" src="" /></p><div id="alert-buttons"><button id="alert-cancel">Cancel</button><button id="alert-ok">OK</button></div></div></div>',document.body.appendChild(a),setTimeout((function(){document.getElementById("alert-box").style.top="0"}),100),document.getElementById("alert-ok").focus();var i=new FileReader;i.onload=function(e){var t=new Image;t.onload=function(){var e,r,n=t.src.split(";")[0].split(":")[1],a=1,i=document.createElement("canvas");t.width>1e3&&(a=1e3/t.width),a*t.height>1e3&&(a=1e3/t.height),e=t.width*a,r=t.height*a,i.width=e,i.height=r,i.getContext("2d").drawImage(t,0,0,e,r);var o=1,s=i.toDataURL(n,o);console.log(s.length),s.length>25e4&&(s=i.toDataURL("image/jpeg",1)).length>25e4&&(o=Math.pow(25e4/s.length,1.33),s=i.toDataURL("image/jpeg",o)),console.log(s.length),document.querySelector(".alert-message img").src=s},t.src=e.target.result},i.readAsDataURL(n),document.getElementById("alert-shim").onclick=function(e){13===e.keyCode&&(e.preventDefault(),document.getElementById("alert-ok").click())},document.getElementById("alert-ok").onclick=function(){t(document.querySelector(".alert-message").innerHTML),a.remove(),e(!0)},document.getElementById("alert-cancel").onclick=function(){a.remove(),e(!1)}}))}}}}},function(e,t,r){"use strict";const n=r(890);e.exports=n.default,e.exports.raw=n.raw},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,a.getOptions)(this);(0,i.validate)(o.default,t,{name:"File Loader",baseDataPath:"options"});const r=t.context||this.rootContext,c=t.name||"[contenthash].[ext]",l=(0,a.interpolateName)(this,c,{context:r,content:e,regExp:t.regExp});let u=l;t.outputPath&&(u="function"==typeof t.outputPath?t.outputPath(l,this.resourcePath,r):n.default.posix.join(t.outputPath,l));let d="__webpack_public_path__ + "+JSON.stringify(u);t.publicPath&&(d="function"==typeof t.publicPath?t.publicPath(l,this.resourcePath,r):`${t.publicPath.endsWith("/")?t.publicPath:t.publicPath+"/"}${l}`,d=JSON.stringify(d));t.postTransformPublicPath&&(d=t.postTransformPublicPath(d));if(void 0===t.emitFile||t.emitFile){const t={};if("string"==typeof c){let e=c;const r=e.indexOf("?");r>=0&&(e=e.substr(0,r));!0===/\[([^:\]]+:)?(hash|contenthash)(:[^\]]+)?]/gi.test(e)&&(t.immutable=!0)}t.sourceFilename=(0,s.normalizePath)(n.default.relative(this.rootContext,this.resourcePath)),this.emitFile(u,e,null,t)}return`${void 0===t.esModule||t.esModule?"export default":"module.exports ="} ${d};`},t.raw=void 0;var n=c(r(10)),a=r(891),i=r(904),o=c(r(967)),s=r(968);function c(e){return e&&e.__esModule?e:{default:e}}t.raw=!0},function(e,t,r){"use strict";const n=r(892),a=r(404),i=r(894),o=r(895),s=r(896),c=r(897),l=r(898),u=r(899),d=r(405),h=r(902);t.getOptions=n,t.parseQuery=a,t.stringifyRequest=i,t.getRemainingRequest=o,t.getCurrentRequest=s,t.isUrlRequest=c,t.urlToRequest=l,t.parseString=u,t.getHashDigest=d,t.interpolateName=h},function(e,t,r){"use strict";const n=r(404);e.exports=function(e){const t=e.query;return"string"==typeof t&&""!==t?n(e.query):t&&"object"==typeof t?t:{}}},function(e,t,r){e.exports=function(){"use strict";function e(e,t){return e(t={exports:{}},t.exports),t.exports}var t=e((function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)})),r=e((function(e){var t=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=t)})),n=(r.version,function(e){return"object"==typeof e?null!==e:"function"==typeof e}),a=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e},i=function(e){try{return!!e()}catch(e){return!0}},o=!i((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),s=t.document,c=n(s)&&n(s.createElement),l=!o&&!i((function(){return 7!=Object.defineProperty((e="div",c?s.createElement(e):{}),"a",{get:function(){return 7}}).a;var e})),u=Object.defineProperty,d={f:o?Object.defineProperty:function(e,t,r){if(a(e),t=function(e,t){if(!n(e))return e;var r,a;if(t&&"function"==typeof(r=e.toString)&&!n(a=r.call(e)))return a;if("function"==typeof(r=e.valueOf)&&!n(a=r.call(e)))return a;if(!t&&"function"==typeof(r=e.toString)&&!n(a=r.call(e)))return a;throw TypeError("Can't convert object to primitive value")}(t,!0),a(r),l)try{return u(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},h=o?function(e,t,r){return d.f(e,t,function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}(1,r))}:function(e,t,r){return e[t]=r,e},p={}.hasOwnProperty,f=function(e,t){return p.call(e,t)},m=0,g=Math.random(),y=e((function(e){var n=t["__core-js_shared__"]||(t["__core-js_shared__"]={});(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}))("native-function-to-string",Function.toString),v=e((function(e){var n=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++m+g).toString(36))}("src"),a=(""+y).split("toString");r.inspectSource=function(e){return y.call(e)},(e.exports=function(e,r,i,o){var s="function"==typeof i;s&&(f(i,"name")||h(i,"name",r)),e[r]!==i&&(s&&(f(i,n)||h(i,n,e[r]?""+e[r]:a.join(String(r)))),e===t?e[r]=i:o?e[r]?e[r]=i:h(e,r,i):(delete e[r],h(e,r,i)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[n]||y.call(this)}))})),b=function(e,t,r){if(function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,a){return e.call(t,r,n,a)}}return function(){return e.apply(t,arguments)}},_=function(e,n,a){var i,o,s,c,l=e&_.F,u=e&_.G,d=e&_.S,p=e&_.P,f=e&_.B,m=u?t:d?t[n]||(t[n]={}):(t[n]||{}).prototype,g=u?r:r[n]||(r[n]={}),y=g.prototype||(g.prototype={});for(i in u&&(a=n),a)s=((o=!l&&m&&void 0!==m[i])?m:a)[i],c=f&&o?b(s,t):p&&"function"==typeof s?b(Function.call,s):s,m&&v(m,i,s,e&_.U),g[i]!=s&&h(g,i,c),p&&y[i]!=s&&(y[i]=s)};t.core=r,_.F=1,_.G=2,_.S=4,_.P=8,_.B=16,_.W=32,_.U=64,_.R=128;var w,x=_,k=Math.ceil,S=Math.floor,E=function(e){return isNaN(e=+e)?0:(e>0?S:k)(e)},A=(w=!1,function(e,t){var r,n,a=String(function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}(e)),i=E(t),o=a.length;return i<0||i>=o?w?"":void 0:(r=a.charCodeAt(i))<55296||r>56319||i+1===o||(n=a.charCodeAt(i+1))<56320||n>57343?w?a.charAt(i):r:w?a.slice(i,i+2):n-56320+(r-55296<<10)+65536});x(x.P,"String",{codePointAt:function(e){return A(this,e)}}),r.String.codePointAt;var P=Math.max,C=Math.min,D=function(e,t){return(e=E(e))<0?P(e+t,0):C(e,t)},T=String.fromCharCode,O=String.fromCodePoint;x(x.S+x.F*(!!O&&1!=O.length),"String",{fromCodePoint:function(e){for(var t,r=arguments,n=[],a=arguments.length,i=0;a>i;){if(t=+r[i++],D(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?T(t):T(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}}),r.String.fromCodePoint;var M,I,R,F,B,j,N,q,L,U,z,H,$,G,K={Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},V=function(e){return"string"==typeof e&&K.Space_Separator.test(e)},W=function(e){return"string"==typeof e&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||"$"===e||"_"===e||K.ID_Start.test(e))},Y=function(e){return"string"==typeof e&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||"$"===e||"_"===e||"‌"===e||"‍"===e||K.ID_Continue.test(e))},J=function(e){return"string"==typeof e&&/[0-9]/.test(e)},Q=function(e){return"string"==typeof e&&/[0-9A-Fa-f]/.test(e)};function X(){for(U="default",z="",H=!1,$=1;;){G=Z();var e=te[U]();if(e)return e}}function Z(){if(M[F])return String.fromCodePoint(M.codePointAt(F))}function ee(){var e=Z();return"\n"===e?(B++,j=0):e?j+=e.length:j++,e&&(F+=e.length),e}var te={default:function(){switch(G){case"\t":case"\v":case"\f":case" ":case" ":case"\ufeff":case"\n":case"\r":case"\u2028":case"\u2029":return void ee();case"/":return ee(),void(U="comment");case void 0:return ee(),re("eof")}if(!V(G))return te[I]();ee()},comment:function(){switch(G){case"*":return ee(),void(U="multiLineComment");case"/":return ee(),void(U="singleLineComment")}throw ce(ee())},multiLineComment:function(){switch(G){case"*":return ee(),void(U="multiLineCommentAsterisk");case void 0:throw ce(ee())}ee()},multiLineCommentAsterisk:function(){switch(G){case"*":return void ee();case"/":return ee(),void(U="default");case void 0:throw ce(ee())}ee(),U="multiLineComment"},singleLineComment:function(){switch(G){case"\n":case"\r":case"\u2028":case"\u2029":return ee(),void(U="default");case void 0:return ee(),re("eof")}ee()},value:function(){switch(G){case"{":case"[":return re("punctuator",ee());case"n":return ee(),ne("ull"),re("null",null);case"t":return ee(),ne("rue"),re("boolean",!0);case"f":return ee(),ne("alse"),re("boolean",!1);case"-":case"+":return"-"===ee()&&($=-1),void(U="sign");case".":return z=ee(),void(U="decimalPointLeading");case"0":return z=ee(),void(U="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return z=ee(),void(U="decimalInteger");case"I":return ee(),ne("nfinity"),re("numeric",1/0);case"N":return ee(),ne("aN"),re("numeric",NaN);case'"':case"'":return H='"'===ee(),z="",void(U="string")}throw ce(ee())},identifierNameStartEscape:function(){if("u"!==G)throw ce(ee());ee();var e=ae();switch(e){case"$":case"_":break;default:if(!W(e))throw ue()}z+=e,U="identifierName"},identifierName:function(){switch(G){case"$":case"_":case"‌":case"‍":return void(z+=ee());case"\\":return ee(),void(U="identifierNameEscape")}if(!Y(G))return re("identifier",z);z+=ee()},identifierNameEscape:function(){if("u"!==G)throw ce(ee());ee();var e=ae();switch(e){case"$":case"_":case"‌":case"‍":break;default:if(!Y(e))throw ue()}z+=e,U="identifierName"},sign:function(){switch(G){case".":return z=ee(),void(U="decimalPointLeading");case"0":return z=ee(),void(U="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return z=ee(),void(U="decimalInteger");case"I":return ee(),ne("nfinity"),re("numeric",$*(1/0));case"N":return ee(),ne("aN"),re("numeric",NaN)}throw ce(ee())},zero:function(){switch(G){case".":return z+=ee(),void(U="decimalPoint");case"e":case"E":return z+=ee(),void(U="decimalExponent");case"x":case"X":return z+=ee(),void(U="hexadecimal")}return re("numeric",0*$)},decimalInteger:function(){switch(G){case".":return z+=ee(),void(U="decimalPoint");case"e":case"E":return z+=ee(),void(U="decimalExponent")}if(!J(G))return re("numeric",$*Number(z));z+=ee()},decimalPointLeading:function(){if(J(G))return z+=ee(),void(U="decimalFraction");throw ce(ee())},decimalPoint:function(){switch(G){case"e":case"E":return z+=ee(),void(U="decimalExponent")}return J(G)?(z+=ee(),void(U="decimalFraction")):re("numeric",$*Number(z))},decimalFraction:function(){switch(G){case"e":case"E":return z+=ee(),void(U="decimalExponent")}if(!J(G))return re("numeric",$*Number(z));z+=ee()},decimalExponent:function(){switch(G){case"+":case"-":return z+=ee(),void(U="decimalExponentSign")}if(J(G))return z+=ee(),void(U="decimalExponentInteger");throw ce(ee())},decimalExponentSign:function(){if(J(G))return z+=ee(),void(U="decimalExponentInteger");throw ce(ee())},decimalExponentInteger:function(){if(!J(G))return re("numeric",$*Number(z));z+=ee()},hexadecimal:function(){if(Q(G))return z+=ee(),void(U="hexadecimalInteger");throw ce(ee())},hexadecimalInteger:function(){if(!Q(G))return re("numeric",$*Number(z));z+=ee()},string:function(){switch(G){case"\\":return ee(),void(z+=function(){switch(Z()){case"b":return ee(),"\b";case"f":return ee(),"\f";case"n":return ee(),"\n";case"r":return ee(),"\r";case"t":return ee(),"\t";case"v":return ee(),"\v";case"0":if(ee(),J(Z()))throw ce(ee());return"\0";case"x":return ee(),function(){var e="",t=Z();if(!Q(t))throw ce(ee());if(e+=ee(),t=Z(),!Q(t))throw ce(ee());return e+=ee(),String.fromCodePoint(parseInt(e,16))}();case"u":return ee(),ae();case"\n":case"\u2028":case"\u2029":return ee(),"";case"\r":return ee(),"\n"===Z()&&ee(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case void 0:throw ce(ee())}return ee()}());case'"':return H?(ee(),re("string",z)):void(z+=ee());case"'":return H?void(z+=ee()):(ee(),re("string",z));case"\n":case"\r":throw ce(ee());case"\u2028":case"\u2029":!function(e){console.warn("JSON5: '"+de(e)+"' in strings is not valid ECMAScript; consider escaping")}(G);break;case void 0:throw ce(ee())}z+=ee()},start:function(){switch(G){case"{":case"[":return re("punctuator",ee())}U="value"},beforePropertyName:function(){switch(G){case"$":case"_":return z=ee(),void(U="identifierName");case"\\":return ee(),void(U="identifierNameStartEscape");case"}":return re("punctuator",ee());case'"':case"'":return H='"'===ee(),void(U="string")}if(W(G))return z+=ee(),void(U="identifierName");throw ce(ee())},afterPropertyName:function(){if(":"===G)return re("punctuator",ee());throw ce(ee())},beforePropertyValue:function(){U="value"},afterPropertyValue:function(){switch(G){case",":case"}":return re("punctuator",ee())}throw ce(ee())},beforeArrayValue:function(){if("]"===G)return re("punctuator",ee());U="value"},afterArrayValue:function(){switch(G){case",":case"]":return re("punctuator",ee())}throw ce(ee())},end:function(){throw ce(ee())}};function re(e,t){return{type:e,value:t,line:B,column:j}}function ne(e){for(var t=0,r=e;t<r.length;t+=1){var n=r[t];if(Z()!==n)throw ce(ee());ee()}}function ae(){for(var e="",t=4;t-- >0;){var r=Z();if(!Q(r))throw ce(ee());e+=ee()}return String.fromCodePoint(parseInt(e,16))}var ie={start:function(){if("eof"===N.type)throw le();oe()},beforePropertyName:function(){switch(N.type){case"identifier":case"string":return q=N.value,void(I="afterPropertyName");case"punctuator":return void se();case"eof":throw le()}},afterPropertyName:function(){if("eof"===N.type)throw le();I="beforePropertyValue"},beforePropertyValue:function(){if("eof"===N.type)throw le();oe()},beforeArrayValue:function(){if("eof"===N.type)throw le();"punctuator"!==N.type||"]"!==N.value?oe():se()},afterPropertyValue:function(){if("eof"===N.type)throw le();switch(N.value){case",":return void(I="beforePropertyName");case"}":se()}},afterArrayValue:function(){if("eof"===N.type)throw le();switch(N.value){case",":return void(I="beforeArrayValue");case"]":se()}},end:function(){}};function oe(){var e;switch(N.type){case"punctuator":switch(N.value){case"{":e={};break;case"[":e=[]}break;case"null":case"boolean":case"numeric":case"string":e=N.value}if(void 0===L)L=e;else{var t=R[R.length-1];Array.isArray(t)?t.push(e):t[q]=e}if(null!==e&&"object"==typeof e)R.push(e),I=Array.isArray(e)?"beforeArrayValue":"beforePropertyName";else{var r=R[R.length-1];I=null==r?"end":Array.isArray(r)?"afterArrayValue":"afterPropertyValue"}}function se(){R.pop();var e=R[R.length-1];I=null==e?"end":Array.isArray(e)?"afterArrayValue":"afterPropertyValue"}function ce(e){return he(void 0===e?"JSON5: invalid end of input at "+B+":"+j:"JSON5: invalid character '"+de(e)+"' at "+B+":"+j)}function le(){return he("JSON5: invalid end of input at "+B+":"+j)}function ue(){return he("JSON5: invalid identifier character at "+B+":"+(j-=5))}function de(e){var t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(t[e])return t[e];if(e<" "){var r=e.charCodeAt(0).toString(16);return"\\x"+("00"+r).substring(r.length)}return e}function he(e){var t=new SyntaxError(e);return t.lineNumber=B,t.columnNumber=j,t}return{parse:function(e,t){M=String(e),I="start",R=[],F=0,B=1,j=0,N=void 0,q=void 0,L=void 0;do{N=X(),ie[I]()}while("eof"!==N.type);return"function"==typeof t?function e(t,r,n){var a=t[r];if(null!=a&&"object"==typeof a)for(var i in a){var o=e(a,i,n);void 0===o?delete a[i]:a[i]=o}return n.call(t,r,a)}({"":L},"",t):L},stringify:function(e,t,r){var n,a,i,o=[],s="",c="";if(null==t||"object"!=typeof t||Array.isArray(t)||(r=t.space,i=t.quote,t=t.replacer),"function"==typeof t)a=t;else if(Array.isArray(t)){n=[];for(var l=0,u=t;l<u.length;l+=1){var d=u[l],h=void 0;"string"==typeof d?h=d:("number"==typeof d||d instanceof String||d instanceof Number)&&(h=String(d)),void 0!==h&&n.indexOf(h)<0&&n.push(h)}}return r instanceof Number?r=Number(r):r instanceof String&&(r=String(r)),"number"==typeof r?r>0&&(r=Math.min(10,Math.floor(r)),c="          ".substr(0,r)):"string"==typeof r&&(c=r.substr(0,10)),p("",{"":e});function p(e,t){var r=t[e];switch(null!=r&&("function"==typeof r.toJSON5?r=r.toJSON5(e):"function"==typeof r.toJSON&&(r=r.toJSON(e))),a&&(r=a.call(t,e,r)),r instanceof Number?r=Number(r):r instanceof String?r=String(r):r instanceof Boolean&&(r=r.valueOf()),r){case null:return"null";case!0:return"true";case!1:return"false"}return"string"==typeof r?f(r):"number"==typeof r?String(r):"object"==typeof r?Array.isArray(r)?function(e){if(o.indexOf(e)>=0)throw TypeError("Converting circular structure to JSON5");o.push(e);var t=s;s+=c;for(var r,n=[],a=0;a<e.length;a++){var i=p(String(a),e);n.push(void 0!==i?i:"null")}if(0===n.length)r="[]";else if(""===c){var l=n.join(",");r="["+l+"]"}else{var u=",\n"+s,d=n.join(u);r="[\n"+s+d+",\n"+t+"]"}return o.pop(),s=t,r}(r):function(e){if(o.indexOf(e)>=0)throw TypeError("Converting circular structure to JSON5");o.push(e);var t=s;s+=c;for(var r,a,i=n||Object.keys(e),l=[],u=0,d=i;u<d.length;u+=1){var h=d[u],f=p(h,e);if(void 0!==f){var g=m(h)+":";""!==c&&(g+=" "),g+=f,l.push(g)}}if(0===l.length)r="{}";else if(""===c)a=l.join(","),r="{"+a+"}";else{var y=",\n"+s;a=l.join(y),r="{\n"+s+a+",\n"+t+"}"}return o.pop(),s=t,r}(r):void 0}function f(e){for(var t={"'":.1,'"':.2},r={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},n="",a=0;a<e.length;a++){var o=e[a];switch(o){case"'":case'"':t[o]++,n+=o;continue;case"\0":if(J(e[a+1])){n+="\\x00";continue}}if(r[o])n+=r[o];else if(o<" "){var s=o.charCodeAt(0).toString(16);n+="\\x"+("00"+s).substring(s.length)}else n+=o}var c=i||Object.keys(t).reduce((function(e,r){return t[e]<t[r]?e:r}));return c+(n=n.replace(new RegExp(c,"g"),r[c]))+c}function m(e){if(0===e.length)return f(e);var t=String.fromCodePoint(e.codePointAt(0));if(!W(t))return f(e);for(var r=t.length;r<e.length;r++)if(!Y(String.fromCodePoint(e.codePointAt(r))))return f(e);return e}}}}()},function(e,t,r){"use strict";const n=r(10),a=/^\.\.?[/\\]/;function i(e){return n.posix.isAbsolute(e)||n.win32.isAbsolute(e)}e.exports=function(e,t){const r=t.split("!"),o=e.context||e.options&&e.options.context;return JSON.stringify(r.map(e=>{const t=e.match(/^(.*?)(\?.*)/),r=t?t[2]:"";let s=t?t[1]:e;if(i(s)&&o){if(s=n.relative(o,s),i(s))return s+r;!1===(c=s,a.test(c))&&(s="./"+s)}var c;return s.replace(/\\/g,"/")+r}).join("!"))}},function(e,t,r){"use strict";e.exports=function(e){return e.remainingRequest?e.remainingRequest:e.loaders.slice(e.loaderIndex+1).map(e=>e.request).concat([e.resource]).join("!")}},function(e,t,r){"use strict";e.exports=function(e){return e.currentRequest?e.currentRequest:e.loaders.slice(e.loaderIndex).map(e=>e.request).concat([e.resource]).join("!")}},function(e,t,r){"use strict";const n=r(10);e.exports=function(e,t){return!(/^[a-z][a-z0-9+.-]*:/i.test(e)&&!n.win32.isAbsolute(e))&&(!/^\/\//.test(e)&&(!/^[{}[\]#*;,'§$%&(=?`´^°<>]/.test(e)&&(void 0!==t&&!1!==t||!/^\//.test(e))))}},function(e,t,r){"use strict";const n=/^[A-Z]:[/\\]|^\\\\/i;e.exports=function(e,t){if(""===e)return"";const r=/^[^?]*~/;let a;if(n.test(e))a=e;else if(void 0!==t&&!1!==t&&/^\//.test(e))switch(typeof t){case"string":a=r.test(t)?t.replace(/([^~/])$/,"$1/")+e.slice(1):t+e;break;case"boolean":a=e;break;default:throw new Error("Unexpected parameters to loader-utils 'urlToRequest': url = "+e+", root = "+t+".")}else a=/^\.\.?\//.test(e)?e:"./"+e;return r.test(a)&&(a=a.replace(r,"")),a}},function(e,t,r){"use strict";e.exports=function e(t){try{return'"'===t[0]?JSON.parse(t):"'"===t[0]&&"'"===t.substr(t.length-1)?e(t.replace(/\\.|"/g,e=>'"'===e?'\\"':e).replace(/^'|'$/g,'"')):JSON.parse('"'+t+'"')}catch(e){return t}}},function(e,t,r){"use strict";(function(t){const n=r(901),a=new WebAssembly.Module(t.from("AGFzbQEAAAABCAJgAX8AYAAAAwUEAQAAAAUDAQABBhoFfwFBAAt/AUEAC38BQQALfwFBAAt/AUEACwciBARpbml0AAAGdXBkYXRlAAIFZmluYWwAAwZtZW1vcnkCAAqFEAQmAEGBxpS6BiQBQYnXtv5+JAJB/rnrxXkkA0H2qMmBASQEQQAkAAvMCgEYfyMBIQojAiEGIwMhByMEIQgDQCAAIAVLBEAgBSgCCCINIAcgBiAFKAIEIgsgCCAHIAUoAgAiDCAKIAggBiAHIAhzcXNqakEDdyIDIAYgB3Nxc2pqQQd3IgEgAyAGc3FzampBC3chAiAFKAIUIg8gASACIAUoAhAiCSADIAEgBSgCDCIOIAYgAyACIAEgA3Nxc2pqQRN3IgQgASACc3FzampBA3ciAyACIARzcXNqakEHdyEBIAUoAiAiEiADIAEgBSgCHCIRIAQgAyAFKAIYIhAgAiAEIAEgAyAEc3FzampBC3ciAiABIANzcXNqakETdyIEIAEgAnNxc2pqQQN3IQMgBSgCLCIVIAQgAyAFKAIoIhQgAiAEIAUoAiQiEyABIAIgAyACIARzcXNqakEHdyIBIAMgBHNxc2pqQQt3IgIgASADc3FzampBE3chBCAPIBAgCSAVIBQgEyAFKAI4IhYgAiAEIAUoAjQiFyABIAIgBSgCMCIYIAMgASAEIAEgAnNxc2pqQQN3IgEgAiAEc3FzampBB3ciAiABIARzcXNqakELdyIDIAkgAiAMIAEgBSgCPCIJIAQgASADIAEgAnNxc2pqQRN3IgEgAiADcnEgAiADcXJqakGZ84nUBWpBA3ciAiABIANycSABIANxcmpqQZnzidQFakEFdyIEIAEgAnJxIAEgAnFyaiASakGZ84nUBWpBCXciAyAPIAQgCyACIBggASADIAIgBHJxIAIgBHFyampBmfOJ1AVqQQ13IgEgAyAEcnEgAyAEcXJqakGZ84nUBWpBA3ciAiABIANycSABIANxcmpqQZnzidQFakEFdyIEIAEgAnJxIAEgAnFyampBmfOJ1AVqQQl3IgMgECAEIAIgFyABIAMgAiAEcnEgAiAEcXJqakGZ84nUBWpBDXciASADIARycSADIARxcmogDWpBmfOJ1AVqQQN3IgIgASADcnEgASADcXJqakGZ84nUBWpBBXciBCABIAJycSABIAJxcmpqQZnzidQFakEJdyIDIBEgBCAOIAIgFiABIAMgAiAEcnEgAiAEcXJqakGZ84nUBWpBDXciASADIARycSADIARxcmpqQZnzidQFakEDdyICIAEgA3JxIAEgA3FyampBmfOJ1AVqQQV3IgQgASACcnEgASACcXJqakGZ84nUBWpBCXciAyAMIAIgAyAJIAEgAyACIARycSACIARxcmpqQZnzidQFakENdyIBcyAEc2pqQaHX5/YGakEDdyICIAQgASACcyADc2ogEmpBodfn9gZqQQl3IgRzIAFzampBodfn9gZqQQt3IgMgAiADIBggASADIARzIAJzampBodfn9gZqQQ93IgFzIARzaiANakGh1+f2BmpBA3ciAiAUIAQgASACcyADc2pqQaHX5/YGakEJdyIEcyABc2pqQaHX5/YGakELdyIDIAsgAiADIBYgASADIARzIAJzampBodfn9gZqQQ93IgFzIARzampBodfn9gZqQQN3IgIgEyAEIAEgAnMgA3NqakGh1+f2BmpBCXciBHMgAXNqakGh1+f2BmpBC3chAyAKIA4gAiADIBcgASADIARzIAJzampBodfn9gZqQQ93IgFzIARzampBodfn9gZqQQN3IgJqIQogBiAJIAEgESADIAIgFSAEIAEgAnMgA3NqakGh1+f2BmpBCXciBHMgAXNqakGh1+f2BmpBC3ciAyAEcyACc2pqQaHX5/YGakEPd2ohBiADIAdqIQcgBCAIaiEIIAVBQGshBQwBCwsgCiQBIAYkAiAHJAMgCCQECw0AIAAQASMAIABqJAAL/wQCA38BfiMAIABqrUIDhiEEIABByABqQUBxIgJBCGshAyAAIgFBAWohACABQYABOgAAA0AgACACSUEAIABBB3EbBEAgAEEAOgAAIABBAWohAAwBCwsDQCAAIAJJBEAgAEIANwMAIABBCGohAAwBCwsgAyAENwMAIAIQAUEAIwGtIgRC//8DgyAEQoCA/P8Pg0IQhoQiBEL/gYCA8B+DIARCgP6DgIDgP4NCCIaEIgRCj4C8gPCBwAeDQgiGIARC8IHAh4CegPgAg0IEiIQiBEKGjJiw4MCBgwZ8QgSIQoGChIiQoMCAAYNCJ34gBEKw4MCBg4aMmDCEfDcDAEEIIwKtIgRC//8DgyAEQoCA/P8Pg0IQhoQiBEL/gYCA8B+DIARCgP6DgIDgP4NCCIaEIgRCj4C8gPCBwAeDQgiGIARC8IHAh4CegPgAg0IEiIQiBEKGjJiw4MCBgwZ8QgSIQoGChIiQoMCAAYNCJ34gBEKw4MCBg4aMmDCEfDcDAEEQIwOtIgRC//8DgyAEQoCA/P8Pg0IQhoQiBEL/gYCA8B+DIARCgP6DgIDgP4NCCIaEIgRCj4C8gPCBwAeDQgiGIARC8IHAh4CegPgAg0IEiIQiBEKGjJiw4MCBgwZ8QgSIQoGChIiQoMCAAYNCJ34gBEKw4MCBg4aMmDCEfDcDAEEYIwStIgRC//8DgyAEQoCA/P8Pg0IQhoQiBEL/gYCA8B+DIARCgP6DgIDgP4NCCIaEIgRCj4C8gPCBwAeDQgiGIARC8IHAh4CegPgAg0IEiIQiBEKGjJiw4MCBgwZ8QgSIQoGChIiQoMCAAYNCJ34gBEKw4MCBg4aMmDCEfDcDAAs=","base64"));e.exports=n.bind(null,a,[],64,32)}).call(this,r(4).Buffer)},function(e,t,r){"use strict";(function(t){const r=-4&Math.floor(16368);class n{constructor(e,r,n,a){const i=e.exports;i.init(),this.exports=i,this.mem=t.from(i.memory.buffer,0,65536),this.buffered=0,this.instancesPool=r,this.chunkSize=n,this.digestSize=a}reset(){this.buffered=0,this.exports.init()}update(e,t){if("string"==typeof e){for(;e.length>r;)this._updateWithShortString(e.slice(0,r),t),e=e.slice(r);return this._updateWithShortString(e,t),this}return this._updateWithBuffer(e),this}_updateWithShortString(e,t){const{exports:r,buffered:n,mem:a,chunkSize:i}=this;let o;if(e.length<70)if(t&&"utf-8"!==t&&"utf8"!==t)if("latin1"===t){o=n;for(let t=0;t<e.length;t++){const r=e.charCodeAt(t);a[o++]=r}}else o=n+a.write(e,n,t);else{o=n;for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);if(n<128)a[o++]=n;else{if(!(n<2048)){o+=a.write(e.slice(o),o,t);break}a[o]=n>>6|192,a[o+1]=63&n|128,o+=2}}}else o=n+a.write(e,n,t);if(o<i)this.buffered=o;else{const e=o&~(this.chunkSize-1);r.update(e);const t=o-e;this.buffered=t,t>0&&a.copyWithin(0,e,o)}}_updateWithBuffer(e){const{exports:t,buffered:r,mem:n}=this,a=e.length;if(r+a<this.chunkSize)e.copy(n,r,0,a),this.buffered+=a;else{const i=r+a&~(this.chunkSize-1);if(i>65536){let a=65536-r;e.copy(n,r,0,a),t.update(65536);const o=i-r-65536;for(;a<o;)e.copy(n,0,a,a+65536),t.update(65536),a+=65536;e.copy(n,0,a,i-r),t.update(i-r-a)}else e.copy(n,r,0,i-r),t.update(i);const o=a+r-i;this.buffered=o,o>0&&e.copy(n,0,a-o,a)}}digest(e){const{exports:r,buffered:n,mem:a,digestSize:i}=this;r.final(n),this.instancesPool.push(this);const o=a.toString("latin1",0,i);return"hex"===e?o:"binary"!==e&&e?t.from(o,"hex").toString(e):t.from(o,"hex")}}e.exports=(e,t,r,a)=>{if(t.length>0){const e=t.pop();return e.reset(),e}return new n(new WebAssembly.Instance(e),t,r,a)},e.exports.MAX_SHORT_STRING=r}).call(this,r(4).Buffer)},function(e,t,r){"use strict";const n=r(10),a=r(903),i=r(405),o=/[\uD800-\uDFFF]./,s=a.filter(e=>o.test(e)),c={};e.exports=function(e,t,r){let a;const o=e.resourceQuery&&e.resourceQuery.length>1;a="function"==typeof t?t(e.resourcePath,o?e.resourceQuery:void 0):t||"[hash].[ext]";const l=r.context,u=r.content,d=r.regExp;let h="bin",p="file",f="",m="",g="";if(e.resourcePath){const t=n.parse(e.resourcePath);let r=e.resourcePath;t.ext&&(h=t.ext.substr(1)),t.dir&&(p=t.name,r=t.dir+n.sep),void 0!==l?(f=n.relative(l,r+"_").replace(/\\/g,"/").replace(/\.\.(\/)?/g,"_$1"),f=f.substr(0,f.length-1)):f=r.replace(/\\/g,"/").replace(/\.\.(\/)?/g,"_$1"),1===f.length?f="":f.length>1&&(m=n.basename(f))}if(e.resourceQuery&&e.resourceQuery.length>1){g=e.resourceQuery;const t=g.indexOf("#");t>=0&&(g=g.substr(0,t))}let y=a;if(u&&(y=y.replace(/\[(?:([^:\]]+):)?(?:hash|contenthash)(?::([a-z]+\d*))?(?::(\d+))?\]/gi,(e,t,r,n)=>i(u,t,r,parseInt(n,10))).replace(/\[emoji(?::(\d+))?\]/gi,(e,t)=>function(e,t){if(c[e])return c[e];t=t||1;const r=[];do{if(!s.length)throw new Error("Ran out of emoji");const e=Math.floor(Math.random()*s.length);r.push(s[e]),s.splice(e,1)}while(--t>0);const n=r.join("");return c[e]=n,n}(u,parseInt(t,10)))),y=y.replace(/\[ext\]/gi,()=>h).replace(/\[name\]/gi,()=>p).replace(/\[path\]/gi,()=>f).replace(/\[folder\]/gi,()=>m).replace(/\[query\]/gi,()=>g),d&&e.resourcePath){const t=e.resourcePath.match(new RegExp(d));t&&t.forEach((e,t)=>{y=y.replace(new RegExp("\\["+t+"\\]","ig"),e)})}return"object"==typeof e.options&&"function"==typeof e.options.customInterpolateName&&(y=e.options.customInterpolateName.call(e,y,t,r)),y}},function(e,t){e.exports=["🀄️","🃏","🅰️","🅱️","🅾️","🅿️","🆎","🆑","🆒","🆓","🆔","🆕","🆖","🆗","🆘","🆙","🆚","🇦🇨","🇦🇩","🇦🇪","🇦🇫","🇦🇬","🇦🇮","🇦🇱","🇦🇲","🇦🇴","🇦🇶","🇦🇷","🇦🇸","🇦🇹","🇦🇺","🇦🇼","🇦🇽","🇦🇿","🇦","🇧🇦","🇧🇧","🇧🇩","🇧🇪","🇧🇫","🇧🇬","🇧🇭","🇧🇮","🇧🇯","🇧🇱","🇧🇲","🇧🇳","🇧🇴","🇧🇶","🇧🇷","🇧🇸","🇧🇹","🇧🇻","🇧🇼","🇧🇾","🇧🇿","🇧","🇨🇦","🇨🇨","🇨🇩","🇨🇫","🇨🇬","🇨🇭","🇨🇮","🇨🇰","🇨🇱","🇨🇲","🇨🇳","🇨🇴","🇨🇵","🇨🇷","🇨🇺","🇨🇻","🇨🇼","🇨🇽","🇨🇾","🇨🇿","🇨","🇩🇪","🇩🇬","🇩🇯","🇩🇰","🇩🇲","🇩🇴","🇩🇿","🇩","🇪🇦","🇪🇨","🇪🇪","🇪🇬","🇪🇭","🇪🇷","🇪🇸","🇪🇹","🇪🇺","🇪","🇫🇮","🇫🇯","🇫🇰","🇫🇲","🇫🇴","🇫🇷","🇫","🇬🇦","🇬🇧","🇬🇩","🇬🇪","🇬🇫","🇬🇬","🇬🇭","🇬🇮","🇬🇱","🇬🇲","🇬🇳","🇬🇵","🇬🇶","🇬🇷","🇬🇸","🇬🇹","🇬🇺","🇬🇼","🇬🇾","🇬","🇭🇰","🇭🇲","🇭🇳","🇭🇷","🇭🇹","🇭🇺","🇭","🇮🇨","🇮🇩","🇮🇪","🇮🇱","🇮🇲","🇮🇳","🇮🇴","🇮🇶","🇮🇷","🇮🇸","🇮🇹","🇮","🇯🇪","🇯🇲","🇯🇴","🇯🇵","🇯","🇰🇪","🇰🇬","🇰🇭","🇰🇮","🇰🇲","🇰🇳","🇰🇵","🇰🇷","🇰🇼","🇰🇾","🇰🇿","🇰","🇱🇦","🇱🇧","🇱🇨","🇱🇮","🇱🇰","🇱🇷","🇱🇸","🇱🇹","🇱🇺","🇱🇻","🇱🇾","🇱","🇲🇦","🇲🇨","🇲🇩","🇲🇪","🇲🇫","🇲🇬","🇲🇭","🇲🇰","🇲🇱","🇲🇲","🇲🇳","🇲🇴","🇲🇵","🇲🇶","🇲🇷","🇲🇸","🇲🇹","🇲🇺","🇲🇻","🇲🇼","🇲🇽","🇲🇾","🇲🇿","🇲","🇳🇦","🇳🇨","🇳🇪","🇳🇫","🇳🇬","🇳🇮","🇳🇱","🇳🇴","🇳🇵","🇳🇷","🇳🇺","🇳🇿","🇳","🇴🇲","🇴","🇵🇦","🇵🇪","🇵🇫","🇵🇬","🇵🇭","🇵🇰","🇵🇱","🇵🇲","🇵🇳","🇵🇷","🇵🇸","🇵🇹","🇵🇼","🇵🇾","🇵","🇶🇦","🇶","🇷🇪","🇷🇴","🇷🇸","🇷🇺","🇷🇼","🇷","🇸🇦","🇸🇧","🇸🇨","🇸🇩","🇸🇪","🇸🇬","🇸🇭","🇸🇮","🇸🇯","🇸🇰","🇸🇱","🇸🇲","🇸🇳","🇸🇴","🇸🇷","🇸🇸","🇸🇹","🇸🇻","🇸🇽","🇸🇾","🇸🇿","🇸","🇹🇦","🇹🇨","🇹🇩","🇹🇫","🇹🇬","🇹🇭","🇹🇯","🇹🇰","🇹🇱","🇹🇲","🇹🇳","🇹🇴","🇹🇷","🇹🇹","🇹🇻","🇹🇼","🇹🇿","🇹","🇺🇦","🇺🇬","🇺🇲","🇺🇳","🇺🇸","🇺🇾","🇺🇿","🇺","🇻🇦","🇻🇨","🇻🇪","🇻🇬","🇻🇮","🇻🇳","🇻🇺","🇻","🇼🇫","🇼🇸","🇼","🇽🇰","🇽","🇾🇪","🇾🇹","🇾","🇿🇦","🇿🇲","🇿🇼","🇿","🈁","🈂️","🈚️","🈯️","🈲","🈳","🈴","🈵","🈶","🈷️","🈸","🈹","🈺","🉐","🉑","🌀","🌁","🌂","🌃","🌄","🌅","🌆","🌇","🌈","🌉","🌊","🌋","🌌","🌍","🌎","🌏","🌐","🌑","🌒","🌓","🌔","🌕","🌖","🌗","🌘","🌙","🌚","🌛","🌜","🌝","🌞","🌟","🌠","🌡️","🌤️","🌥️","🌦️","🌧️","🌨️","🌩️","🌪️","🌫️","🌬️","🌭","🌮","🌯","🌰","🌱","🌲","🌳","🌴","🌵","🌶️","🌷","🌸","🌹","🌺","🌻","🌼","🌽","🌾","🌿","🍀","🍁","🍂","🍃","🍄","🍅","🍆","🍇","🍈","🍉","🍊","🍋","🍌","🍍","🍎","🍏","🍐","🍑","🍒","🍓","🍔","🍕","🍖","🍗","🍘","🍙","🍚","🍛","🍜","🍝","🍞","🍟","🍠","🍡","🍢","🍣","🍤","🍥","🍦","🍧","🍨","🍩","🍪","🍫","🍬","🍭","🍮","🍯","🍰","🍱","🍲","🍳","🍴","🍵","🍶","🍷","🍸","🍹","🍺","🍻","🍼","🍽️","🍾","🍿","🎀","🎁","🎂","🎃","🎄","🎅🏻","🎅🏼","🎅🏽","🎅🏾","🎅🏿","🎅","🎆","🎇","🎈","🎉","🎊","🎋","🎌","🎍","🎎","🎏","🎐","🎑","🎒","🎓","🎖️","🎗️","🎙️","🎚️","🎛️","🎞️","🎟️","🎠","🎡","🎢","🎣","🎤","🎥","🎦","🎧","🎨","🎩","🎪","🎫","🎬","🎭","🎮","🎯","🎰","🎱","🎲","🎳","🎴","🎵","🎶","🎷","🎸","🎹","🎺","🎻","🎼","🎽","🎾","🎿","🏀","🏁","🏂🏻","🏂🏼","🏂🏽","🏂🏾","🏂🏿","🏂","🏃🏻‍♀️","🏃🏻‍♂️","🏃🏻","🏃🏼‍♀️","🏃🏼‍♂️","🏃🏼","🏃🏽‍♀️","🏃🏽‍♂️","🏃🏽","🏃🏾‍♀️","🏃🏾‍♂️","🏃🏾","🏃🏿‍♀️","🏃🏿‍♂️","🏃🏿","🏃‍♀️","🏃‍♂️","🏃","🏄🏻‍♀️","🏄🏻‍♂️","🏄🏻","🏄🏼‍♀️","🏄🏼‍♂️","🏄🏼","🏄🏽‍♀️","🏄🏽‍♂️","🏄🏽","🏄🏾‍♀️","🏄🏾‍♂️","🏄🏾","🏄🏿‍♀️","🏄🏿‍♂️","🏄🏿","🏄‍♀️","🏄‍♂️","🏄","🏅","🏆","🏇🏻","🏇🏼","🏇🏽","🏇🏾","🏇🏿","🏇","🏈","🏉","🏊🏻‍♀️","🏊🏻‍♂️","🏊🏻","🏊🏼‍♀️","🏊🏼‍♂️","🏊🏼","🏊🏽‍♀️","🏊🏽‍♂️","🏊🏽","🏊🏾‍♀️","🏊🏾‍♂️","🏊🏾","🏊🏿‍♀️","🏊🏿‍♂️","🏊🏿","🏊‍♀️","🏊‍♂️","🏊","🏋🏻‍♀️","🏋🏻‍♂️","🏋🏻","🏋🏼‍♀️","🏋🏼‍♂️","🏋🏼","🏋🏽‍♀️","🏋🏽‍♂️","🏋🏽","🏋🏾‍♀️","🏋🏾‍♂️","🏋🏾","🏋🏿‍♀️","🏋🏿‍♂️","🏋🏿","🏋️‍♀️","🏋️‍♂️","🏋️","🏌🏻‍♀️","🏌🏻‍♂️","🏌🏻","🏌🏼‍♀️","🏌🏼‍♂️","🏌🏼","🏌🏽‍♀️","🏌🏽‍♂️","🏌🏽","🏌🏾‍♀️","🏌🏾‍♂️","🏌🏾","🏌🏿‍♀️","🏌🏿‍♂️","🏌🏿","🏌️‍♀️","🏌️‍♂️","🏌️","🏍️","🏎️","🏏","🏐","🏑","🏒","🏓","🏔️","🏕️","🏖️","🏗️","🏘️","🏙️","🏚️","🏛️","🏜️","🏝️","🏞️","🏟️","🏠","🏡","🏢","🏣","🏤","🏥","🏦","🏧","🏨","🏩","🏪","🏫","🏬","🏭","🏮","🏯","🏰","🏳️‍🌈","🏳️","🏴‍☠️","🏴󠁧󠁢󠁥󠁮󠁧󠁿","🏴󠁧󠁢󠁳󠁣󠁴󠁿","🏴󠁧󠁢󠁷󠁬󠁳󠁿","🏴","🏵️","🏷️","🏸","🏹","🏺","🏻","🏼","🏽","🏾","🏿","🐀","🐁","🐂","🐃","🐄","🐅","🐆","🐇","🐈","🐉","🐊","🐋","🐌","🐍","🐎","🐏","🐐","🐑","🐒","🐓","🐔","🐕‍🦺","🐕","🐖","🐗","🐘","🐙","🐚","🐛","🐜","🐝","🐞","🐟","🐠","🐡","🐢","🐣","🐤","🐥","🐦","🐧","🐨","🐩","🐪","🐫","🐬","🐭","🐮","🐯","🐰","🐱","🐲","🐳","🐴","🐵","🐶","🐷","🐸","🐹","🐺","🐻","🐼","🐽","🐾","🐿️","👀","👁‍🗨","👁️","👂🏻","👂🏼","👂🏽","👂🏾","👂🏿","👂","👃🏻","👃🏼","👃🏽","👃🏾","👃🏿","👃","👄","👅","👆🏻","👆🏼","👆🏽","👆🏾","👆🏿","👆","👇🏻","👇🏼","👇🏽","👇🏾","👇🏿","👇","👈🏻","👈🏼","👈🏽","👈🏾","👈🏿","👈","👉🏻","👉🏼","👉🏽","👉🏾","👉🏿","👉","👊🏻","👊🏼","👊🏽","👊🏾","👊🏿","👊","👋🏻","👋🏼","👋🏽","👋🏾","👋🏿","👋","👌🏻","👌🏼","👌🏽","👌🏾","👌🏿","👌","👍🏻","👍🏼","👍🏽","👍🏾","👍🏿","👍","👎🏻","👎🏼","👎🏽","👎🏾","👎🏿","👎","👏🏻","👏🏼","👏🏽","👏🏾","👏🏿","👏","👐🏻","👐🏼","👐🏽","👐🏾","👐🏿","👐","👑","👒","👓","👔","👕","👖","👗","👘","👙","👚","👛","👜","👝","👞","👟","👠","👡","👢","👣","👤","👥","👦🏻","👦🏼","👦🏽","👦🏾","👦🏿","👦","👧🏻","👧🏼","👧🏽","👧🏾","👧🏿","👧","👨🏻‍🌾","👨🏻‍🍳","👨🏻‍🎓","👨🏻‍🎤","👨🏻‍🎨","👨🏻‍🏫","👨🏻‍🏭","👨🏻‍💻","👨🏻‍💼","👨🏻‍🔧","👨🏻‍🔬","👨🏻‍🚀","👨🏻‍🚒","👨🏻‍🦯","👨🏻‍🦰","👨🏻‍🦱","👨🏻‍🦲","👨🏻‍🦳","👨🏻‍🦼","👨🏻‍🦽","👨🏻‍⚕️","👨🏻‍⚖️","👨🏻‍✈️","👨🏻","👨🏼‍🌾","👨🏼‍🍳","👨🏼‍🎓","👨🏼‍🎤","👨🏼‍🎨","👨🏼‍🏫","👨🏼‍🏭","👨🏼‍💻","👨🏼‍💼","👨🏼‍🔧","👨🏼‍🔬","👨🏼‍🚀","👨🏼‍🚒","👨🏼‍🤝‍👨🏻","👨🏼‍🦯","👨🏼‍🦰","👨🏼‍🦱","👨🏼‍🦲","👨🏼‍🦳","👨🏼‍🦼","👨🏼‍🦽","👨🏼‍⚕️","👨🏼‍⚖️","👨🏼‍✈️","👨🏼","👨🏽‍🌾","👨🏽‍🍳","👨🏽‍🎓","👨🏽‍🎤","👨🏽‍🎨","👨🏽‍🏫","👨🏽‍🏭","👨🏽‍💻","👨🏽‍💼","👨🏽‍🔧","👨🏽‍🔬","👨🏽‍🚀","👨🏽‍🚒","👨🏽‍🤝‍👨🏻","👨🏽‍🤝‍👨🏼","👨🏽‍🦯","👨🏽‍🦰","👨🏽‍🦱","👨🏽‍🦲","👨🏽‍🦳","👨🏽‍🦼","👨🏽‍🦽","👨🏽‍⚕️","👨🏽‍⚖️","👨🏽‍✈️","👨🏽","👨🏾‍🌾","👨🏾‍🍳","👨🏾‍🎓","👨🏾‍🎤","👨🏾‍🎨","👨🏾‍🏫","👨🏾‍🏭","👨🏾‍💻","👨🏾‍💼","👨🏾‍🔧","👨🏾‍🔬","👨🏾‍🚀","👨🏾‍🚒","👨🏾‍🤝‍👨🏻","👨🏾‍🤝‍👨🏼","👨🏾‍🤝‍👨🏽","👨🏾‍🦯","👨🏾‍🦰","👨🏾‍🦱","👨🏾‍🦲","👨🏾‍🦳","👨🏾‍🦼","👨🏾‍🦽","👨🏾‍⚕️","👨🏾‍⚖️","👨🏾‍✈️","👨🏾","👨🏿‍🌾","👨🏿‍🍳","👨🏿‍🎓","👨🏿‍🎤","👨🏿‍🎨","👨🏿‍🏫","👨🏿‍🏭","👨🏿‍💻","👨🏿‍💼","👨🏿‍🔧","👨🏿‍🔬","👨🏿‍🚀","👨🏿‍🚒","👨🏿‍🤝‍👨🏻","👨🏿‍🤝‍👨🏼","👨🏿‍🤝‍👨🏽","👨🏿‍🤝‍👨🏾","👨🏿‍🦯","👨🏿‍🦰","👨🏿‍🦱","👨🏿‍🦲","👨🏿‍🦳","👨🏿‍🦼","👨🏿‍🦽","👨🏿‍⚕️","👨🏿‍⚖️","👨🏿‍✈️","👨🏿","👨‍🌾","👨‍🍳","👨‍🎓","👨‍🎤","👨‍🎨","👨‍🏫","👨‍🏭","👨‍👦‍👦","👨‍👦","👨‍👧‍👦","👨‍👧‍👧","👨‍👧","👨‍👨‍👦‍👦","👨‍👨‍👦","👨‍👨‍👧‍👦","👨‍👨‍👧‍👧","👨‍👨‍👧","👨‍👩‍👦‍👦","👨‍👩‍👦","👨‍👩‍👧‍👦","👨‍👩‍👧‍👧","👨‍👩‍👧","👨‍💻","👨‍💼","👨‍🔧","👨‍🔬","👨‍🚀","👨‍🚒","👨‍🦯","👨‍🦰","👨‍🦱","👨‍🦲","👨‍🦳","👨‍🦼","👨‍🦽","👨‍⚕️","👨‍⚖️","👨‍✈️","👨‍❤️‍👨","👨‍❤️‍💋‍👨","👨","👩🏻‍🌾","👩🏻‍🍳","👩🏻‍🎓","👩🏻‍🎤","👩🏻‍🎨","👩🏻‍🏫","👩🏻‍🏭","👩🏻‍💻","👩🏻‍💼","👩🏻‍🔧","👩🏻‍🔬","👩🏻‍🚀","👩🏻‍🚒","👩🏻‍🤝‍👨🏼","👩🏻‍🤝‍👨🏽","👩🏻‍🤝‍👨🏾","👩🏻‍🤝‍👨🏿","👩🏻‍🦯","👩🏻‍🦰","👩🏻‍🦱","👩🏻‍🦲","👩🏻‍🦳","👩🏻‍🦼","👩🏻‍🦽","👩🏻‍⚕️","👩🏻‍⚖️","👩🏻‍✈️","👩🏻","👩🏼‍🌾","👩🏼‍🍳","👩🏼‍🎓","👩🏼‍🎤","👩🏼‍🎨","👩🏼‍🏫","👩🏼‍🏭","👩🏼‍💻","👩🏼‍💼","👩🏼‍🔧","👩🏼‍🔬","👩🏼‍🚀","👩🏼‍🚒","👩🏼‍🤝‍👨🏻","👩🏼‍🤝‍👨🏽","👩🏼‍🤝‍👨🏾","👩🏼‍🤝‍👨🏿","👩🏼‍🤝‍👩🏻","👩🏼‍🦯","👩🏼‍🦰","👩🏼‍🦱","👩🏼‍🦲","👩🏼‍🦳","👩🏼‍🦼","👩🏼‍🦽","👩🏼‍⚕️","👩🏼‍⚖️","👩🏼‍✈️","👩🏼","👩🏽‍🌾","👩🏽‍🍳","👩🏽‍🎓","👩🏽‍🎤","👩🏽‍🎨","👩🏽‍🏫","👩🏽‍🏭","👩🏽‍💻","👩🏽‍💼","👩🏽‍🔧","👩🏽‍🔬","👩🏽‍🚀","👩🏽‍🚒","👩🏽‍🤝‍👨🏻","👩🏽‍🤝‍👨🏼","👩🏽‍🤝‍👨🏾","👩🏽‍🤝‍👨🏿","👩🏽‍🤝‍👩🏻","👩🏽‍🤝‍👩🏼","👩🏽‍🦯","👩🏽‍🦰","👩🏽‍🦱","👩🏽‍🦲","👩🏽‍🦳","👩🏽‍🦼","👩🏽‍🦽","👩🏽‍⚕️","👩🏽‍⚖️","👩🏽‍✈️","👩🏽","👩🏾‍🌾","👩🏾‍🍳","👩🏾‍🎓","👩🏾‍🎤","👩🏾‍🎨","👩🏾‍🏫","👩🏾‍🏭","👩🏾‍💻","👩🏾‍💼","👩🏾‍🔧","👩🏾‍🔬","👩🏾‍🚀","👩🏾‍🚒","👩🏾‍🤝‍👨🏻","👩🏾‍🤝‍👨🏼","👩🏾‍🤝‍👨🏽","👩🏾‍🤝‍👨🏿","👩🏾‍🤝‍👩🏻","👩🏾‍🤝‍👩🏼","👩🏾‍🤝‍👩🏽","👩🏾‍🦯","👩🏾‍🦰","👩🏾‍🦱","👩🏾‍🦲","👩🏾‍🦳","👩🏾‍🦼","👩🏾‍🦽","👩🏾‍⚕️","👩🏾‍⚖️","👩🏾‍✈️","👩🏾","👩🏿‍🌾","👩🏿‍🍳","👩🏿‍🎓","👩🏿‍🎤","👩🏿‍🎨","👩🏿‍🏫","👩🏿‍🏭","👩🏿‍💻","👩🏿‍💼","👩🏿‍🔧","👩🏿‍🔬","👩🏿‍🚀","👩🏿‍🚒","👩🏿‍🤝‍👨🏻","👩🏿‍🤝‍👨🏼","👩🏿‍🤝‍👨🏽","👩🏿‍🤝‍👨🏾","👩🏿‍🤝‍👩🏻","👩🏿‍🤝‍👩🏼","👩🏿‍🤝‍👩🏽","👩🏿‍🤝‍👩🏾","👩🏿‍🦯","👩🏿‍🦰","👩🏿‍🦱","👩🏿‍🦲","👩🏿‍🦳","👩🏿‍🦼","👩🏿‍🦽","👩🏿‍⚕️","👩🏿‍⚖️","👩🏿‍✈️","👩🏿","👩‍🌾","👩‍🍳","👩‍🎓","👩‍🎤","👩‍🎨","👩‍🏫","👩‍🏭","👩‍👦‍👦","👩‍👦","👩‍👧‍👦","👩‍👧‍👧","👩‍👧","👩‍👩‍👦‍👦","👩‍👩‍👦","👩‍👩‍👧‍👦","👩‍👩‍👧‍👧","👩‍👩‍👧","👩‍💻","👩‍💼","👩‍🔧","👩‍🔬","👩‍🚀","👩‍🚒","👩‍🦯","👩‍🦰","👩‍🦱","👩‍🦲","👩‍🦳","👩‍🦼","👩‍🦽","👩‍⚕️","👩‍⚖️","👩‍✈️","👩‍❤️‍👨","👩‍❤️‍👩","👩‍❤️‍💋‍👨","👩‍❤️‍💋‍👩","👩","👪","👫🏻","👫🏼","👫🏽","👫🏾","👫🏿","👫","👬🏻","👬🏼","👬🏽","👬🏾","👬🏿","👬","👭🏻","👭🏼","👭🏽","👭🏾","👭🏿","👭","👮🏻‍♀️","👮🏻‍♂️","👮🏻","👮🏼‍♀️","👮🏼‍♂️","👮🏼","👮🏽‍♀️","👮🏽‍♂️","👮🏽","👮🏾‍♀️","👮🏾‍♂️","👮🏾","👮🏿‍♀️","👮🏿‍♂️","👮🏿","👮‍♀️","👮‍♂️","👮","👯‍♀️","👯‍♂️","👯","👰🏻","👰🏼","👰🏽","👰🏾","👰🏿","👰","👱🏻‍♀️","👱🏻‍♂️","👱🏻","👱🏼‍♀️","👱🏼‍♂️","👱🏼","👱🏽‍♀️","👱🏽‍♂️","👱🏽","👱🏾‍♀️","👱🏾‍♂️","👱🏾","👱🏿‍♀️","👱🏿‍♂️","👱🏿","👱‍♀️","👱‍♂️","👱","👲🏻","👲🏼","👲🏽","👲🏾","👲🏿","👲","👳🏻‍♀️","👳🏻‍♂️","👳🏻","👳🏼‍♀️","👳🏼‍♂️","👳🏼","👳🏽‍♀️","👳🏽‍♂️","👳🏽","👳🏾‍♀️","👳🏾‍♂️","👳🏾","👳🏿‍♀️","👳🏿‍♂️","👳🏿","👳‍♀️","👳‍♂️","👳","👴🏻","👴🏼","👴🏽","👴🏾","👴🏿","👴","👵🏻","👵🏼","👵🏽","👵🏾","👵🏿","👵","👶🏻","👶🏼","👶🏽","👶🏾","👶🏿","👶","👷🏻‍♀️","👷🏻‍♂️","👷🏻","👷🏼‍♀️","👷🏼‍♂️","👷🏼","👷🏽‍♀️","👷🏽‍♂️","👷🏽","👷🏾‍♀️","👷🏾‍♂️","👷🏾","👷🏿‍♀️","👷🏿‍♂️","👷🏿","👷‍♀️","👷‍♂️","👷","👸🏻","👸🏼","👸🏽","👸🏾","👸🏿","👸","👹","👺","👻","👼🏻","👼🏼","👼🏽","👼🏾","👼🏿","👼","👽","👾","👿","💀","💁🏻‍♀️","💁🏻‍♂️","💁🏻","💁🏼‍♀️","💁🏼‍♂️","💁🏼","💁🏽‍♀️","💁🏽‍♂️","💁🏽","💁🏾‍♀️","💁🏾‍♂️","💁🏾","💁🏿‍♀️","💁🏿‍♂️","💁🏿","💁‍♀️","💁‍♂️","💁","💂🏻‍♀️","💂🏻‍♂️","💂🏻","💂🏼‍♀️","💂🏼‍♂️","💂🏼","💂🏽‍♀️","💂🏽‍♂️","💂🏽","💂🏾‍♀️","💂🏾‍♂️","💂🏾","💂🏿‍♀️","💂🏿‍♂️","💂🏿","💂‍♀️","💂‍♂️","💂","💃🏻","💃🏼","💃🏽","💃🏾","💃🏿","💃","💄","💅🏻","💅🏼","💅🏽","💅🏾","💅🏿","💅","💆🏻‍♀️","💆🏻‍♂️","💆🏻","💆🏼‍♀️","💆🏼‍♂️","💆🏼","💆🏽‍♀️","💆🏽‍♂️","💆🏽","💆🏾‍♀️","💆🏾‍♂️","💆🏾","💆🏿‍♀️","💆🏿‍♂️","💆🏿","💆‍♀️","💆‍♂️","💆","💇🏻‍♀️","💇🏻‍♂️","💇🏻","💇🏼‍♀️","💇🏼‍♂️","💇🏼","💇🏽‍♀️","💇🏽‍♂️","💇🏽","💇🏾‍♀️","💇🏾‍♂️","💇🏾","💇🏿‍♀️","💇🏿‍♂️","💇🏿","💇‍♀️","💇‍♂️","💇","💈","💉","💊","💋","💌","💍","💎","💏","💐","💑","💒","💓","💔","💕","💖","💗","💘","💙","💚","💛","💜","💝","💞","💟","💠","💡","💢","💣","💤","💥","💦","💧","💨","💩","💪🏻","💪🏼","💪🏽","💪🏾","💪🏿","💪","💫","💬","💭","💮","💯","💰","💱","💲","💳","💴","💵","💶","💷","💸","💹","💺","💻","💼","💽","💾","💿","📀","📁","📂","📃","📄","📅","📆","📇","📈","📉","📊","📋","📌","📍","📎","📏","📐","📑","📒","📓","📔","📕","📖","📗","📘","📙","📚","📛","📜","📝","📞","📟","📠","📡","📢","📣","📤","📥","📦","📧","📨","📩","📪","📫","📬","📭","📮","📯","📰","📱","📲","📳","📴","📵","📶","📷","📸","📹","📺","📻","📼","📽️","📿","🔀","🔁","🔂","🔃","🔄","🔅","🔆","🔇","🔈","🔉","🔊","🔋","🔌","🔍","🔎","🔏","🔐","🔑","🔒","🔓","🔔","🔕","🔖","🔗","🔘","🔙","🔚","🔛","🔜","🔝","🔞","🔟","🔠","🔡","🔢","🔣","🔤","🔥","🔦","🔧","🔨","🔩","🔪","🔫","🔬","🔭","🔮","🔯","🔰","🔱","🔲","🔳","🔴","🔵","🔶","🔷","🔸","🔹","🔺","🔻","🔼","🔽","🕉️","🕊️","🕋","🕌","🕍","🕎","🕐","🕑","🕒","🕓","🕔","🕕","🕖","🕗","🕘","🕙","🕚","🕛","🕜","🕝","🕞","🕟","🕠","🕡","🕢","🕣","🕤","🕥","🕦","🕧","🕯️","🕰️","🕳️","🕴🏻‍♀️","🕴🏻‍♂️","🕴🏻","🕴🏼‍♀️","🕴🏼‍♂️","🕴🏼","🕴🏽‍♀️","🕴🏽‍♂️","🕴🏽","🕴🏾‍♀️","🕴🏾‍♂️","🕴🏾","🕴🏿‍♀️","🕴🏿‍♂️","🕴🏿","🕴️‍♀️","🕴️‍♂️","🕴️","🕵🏻‍♀️","🕵🏻‍♂️","🕵🏻","🕵🏼‍♀️","🕵🏼‍♂️","🕵🏼","🕵🏽‍♀️","🕵🏽‍♂️","🕵🏽","🕵🏾‍♀️","🕵🏾‍♂️","🕵🏾","🕵🏿‍♀️","🕵🏿‍♂️","🕵🏿","🕵️‍♀️","🕵️‍♂️","🕵️","🕶️","🕷️","🕸️","🕹️","🕺🏻","🕺🏼","🕺🏽","🕺🏾","🕺🏿","🕺","🖇️","🖊️","🖋️","🖌️","🖍️","🖐🏻","🖐🏼","🖐🏽","🖐🏾","🖐🏿","🖐️","🖕🏻","🖕🏼","🖕🏽","🖕🏾","🖕🏿","🖕","🖖🏻","🖖🏼","🖖🏽","🖖🏾","🖖🏿","🖖","🖤","🖥️","🖨️","🖱️","🖲️","🖼️","🗂️","🗃️","🗄️","🗑️","🗒️","🗓️","🗜️","🗝️","🗞️","🗡️","🗣️","🗨️","🗯️","🗳️","🗺️","🗻","🗼","🗽","🗾","🗿","😀","😁","😂","😃","😄","😅","😆","😇","😈","😉","😊","😋","😌","😍","😎","😏","😐","😑","😒","😓","😔","😕","😖","😗","😘","😙","😚","😛","😜","😝","😞","😟","😠","😡","😢","😣","😤","😥","😦","😧","😨","😩","😪","😫","😬","😭","😮","😯","😰","😱","😲","😳","😴","😵","😶","😷","😸","😹","😺","😻","😼","😽","😾","😿","🙀","🙁","🙂","🙃","🙄","🙅🏻‍♀️","🙅🏻‍♂️","🙅🏻","🙅🏼‍♀️","🙅🏼‍♂️","🙅🏼","🙅🏽‍♀️","🙅🏽‍♂️","🙅🏽","🙅🏾‍♀️","🙅🏾‍♂️","🙅🏾","🙅🏿‍♀️","🙅🏿‍♂️","🙅🏿","🙅‍♀️","🙅‍♂️","🙅","🙆🏻‍♀️","🙆🏻‍♂️","🙆🏻","🙆🏼‍♀️","🙆🏼‍♂️","🙆🏼","🙆🏽‍♀️","🙆🏽‍♂️","🙆🏽","🙆🏾‍♀️","🙆🏾‍♂️","🙆🏾","🙆🏿‍♀️","🙆🏿‍♂️","🙆🏿","🙆‍♀️","🙆‍♂️","🙆","🙇🏻‍♀️","🙇🏻‍♂️","🙇🏻","🙇🏼‍♀️","🙇🏼‍♂️","🙇🏼","🙇🏽‍♀️","🙇🏽‍♂️","🙇🏽","🙇🏾‍♀️","🙇🏾‍♂️","🙇🏾","🙇🏿‍♀️","🙇🏿‍♂️","🙇🏿","🙇‍♀️","🙇‍♂️","🙇","🙈","🙉","🙊","🙋🏻‍♀️","🙋🏻‍♂️","🙋🏻","🙋🏼‍♀️","🙋🏼‍♂️","🙋🏼","🙋🏽‍♀️","🙋🏽‍♂️","🙋🏽","🙋🏾‍♀️","🙋🏾‍♂️","🙋🏾","🙋🏿‍♀️","🙋🏿‍♂️","🙋🏿","🙋‍♀️","🙋‍♂️","🙋","🙌🏻","🙌🏼","🙌🏽","🙌🏾","🙌🏿","🙌","🙍🏻‍♀️","🙍🏻‍♂️","🙍🏻","🙍🏼‍♀️","🙍🏼‍♂️","🙍🏼","🙍🏽‍♀️","🙍🏽‍♂️","🙍🏽","🙍🏾‍♀️","🙍🏾‍♂️","🙍🏾","🙍🏿‍♀️","🙍🏿‍♂️","🙍🏿","🙍‍♀️","🙍‍♂️","🙍","🙎🏻‍♀️","🙎🏻‍♂️","🙎🏻","🙎🏼‍♀️","🙎🏼‍♂️","🙎🏼","🙎🏽‍♀️","🙎🏽‍♂️","🙎🏽","🙎🏾‍♀️","🙎🏾‍♂️","🙎🏾","🙎🏿‍♀️","🙎🏿‍♂️","🙎🏿","🙎‍♀️","🙎‍♂️","🙎","🙏🏻","🙏🏼","🙏🏽","🙏🏾","🙏🏿","🙏","🚀","🚁","🚂","🚃","🚄","🚅","🚆","🚇","🚈","🚉","🚊","🚋","🚌","🚍","🚎","🚏","🚐","🚑","🚒","🚓","🚔","🚕","🚖","🚗","🚘","🚙","🚚","🚛","🚜","🚝","🚞","🚟","🚠","🚡","🚢","🚣🏻‍♀️","🚣🏻‍♂️","🚣🏻","🚣🏼‍♀️","🚣🏼‍♂️","🚣🏼","🚣🏽‍♀️","🚣🏽‍♂️","🚣🏽","🚣🏾‍♀️","🚣🏾‍♂️","🚣🏾","🚣🏿‍♀️","🚣🏿‍♂️","🚣🏿","🚣‍♀️","🚣‍♂️","🚣","🚤","🚥","🚦","🚧","🚨","🚩","🚪","🚫","🚬","🚭","🚮","🚯","🚰","🚱","🚲","🚳","🚴🏻‍♀️","🚴🏻‍♂️","🚴🏻","🚴🏼‍♀️","🚴🏼‍♂️","🚴🏼","🚴🏽‍♀️","🚴🏽‍♂️","🚴🏽","🚴🏾‍♀️","🚴🏾‍♂️","🚴🏾","🚴🏿‍♀️","🚴🏿‍♂️","🚴🏿","🚴‍♀️","🚴‍♂️","🚴","🚵🏻‍♀️","🚵🏻‍♂️","🚵🏻","🚵🏼‍♀️","🚵🏼‍♂️","🚵🏼","🚵🏽‍♀️","🚵🏽‍♂️","🚵🏽","🚵🏾‍♀️","🚵🏾‍♂️","🚵🏾","🚵🏿‍♀️","🚵🏿‍♂️","🚵🏿","🚵‍♀️","🚵‍♂️","🚵","🚶🏻‍♀️","🚶🏻‍♂️","🚶🏻","🚶🏼‍♀️","🚶🏼‍♂️","🚶🏼","🚶🏽‍♀️","🚶🏽‍♂️","🚶🏽","🚶🏾‍♀️","🚶🏾‍♂️","🚶🏾","🚶🏿‍♀️","🚶🏿‍♂️","🚶🏿","🚶‍♀️","🚶‍♂️","🚶","🚷","🚸","🚹","🚺","🚻","🚼","🚽","🚾","🚿","🛀🏻","🛀🏼","🛀🏽","🛀🏾","🛀🏿","🛀","🛁","🛂","🛃","🛄","🛅","🛋️","🛌🏻","🛌🏼","🛌🏽","🛌🏾","🛌🏿","🛌","🛍️","🛎️","🛏️","🛐","🛑","🛒","🛕","🛠️","🛡️","🛢️","🛣️","🛤️","🛥️","🛩️","🛫","🛬","🛰️","🛳️","🛴","🛵","🛶","🛷","🛸","🛹","🛺","🟠","🟡","🟢","🟣","🟤","🟥","🟦","🟧","🟨","🟩","🟪","🟫","🤍","🤎","🤏🏻","🤏🏼","🤏🏽","🤏🏾","🤏🏿","🤏","🤐","🤑","🤒","🤓","🤔","🤕","🤖","🤗","🤘🏻","🤘🏼","🤘🏽","🤘🏾","🤘🏿","🤘","🤙🏻","🤙🏼","🤙🏽","🤙🏾","🤙🏿","🤙","🤚🏻","🤚🏼","🤚🏽","🤚🏾","🤚🏿","🤚","🤛🏻","🤛🏼","🤛🏽","🤛🏾","🤛🏿","🤛","🤜🏻","🤜🏼","🤜🏽","🤜🏾","🤜🏿","🤜","🤝","🤞🏻","🤞🏼","🤞🏽","🤞🏾","🤞🏿","🤞","🤟🏻","🤟🏼","🤟🏽","🤟🏾","🤟🏿","🤟","🤠","🤡","🤢","🤣","🤤","🤥","🤦🏻‍♀️","🤦🏻‍♂️","🤦🏻","🤦🏼‍♀️","🤦🏼‍♂️","🤦🏼","🤦🏽‍♀️","🤦🏽‍♂️","🤦🏽","🤦🏾‍♀️","🤦🏾‍♂️","🤦🏾","🤦🏿‍♀️","🤦🏿‍♂️","🤦🏿","🤦‍♀️","🤦‍♂️","🤦","🤧","🤨","🤩","🤪","🤫","🤬","🤭","🤮","🤯","🤰🏻","🤰🏼","🤰🏽","🤰🏾","🤰🏿","🤰","🤱🏻","🤱🏼","🤱🏽","🤱🏾","🤱🏿","🤱","🤲🏻","🤲🏼","🤲🏽","🤲🏾","🤲🏿","🤲","🤳🏻","🤳🏼","🤳🏽","🤳🏾","🤳🏿","🤳","🤴🏻","🤴🏼","🤴🏽","🤴🏾","🤴🏿","🤴","🤵🏻‍♀️","🤵🏻‍♂️","🤵🏻","🤵🏼‍♀️","🤵🏼‍♂️","🤵🏼","🤵🏽‍♀️","🤵🏽‍♂️","🤵🏽","🤵🏾‍♀️","🤵🏾‍♂️","🤵🏾","🤵🏿‍♀️","🤵🏿‍♂️","🤵🏿","🤵‍♀️","🤵‍♂️","🤵","🤶🏻","🤶🏼","🤶🏽","🤶🏾","🤶🏿","🤶","🤷🏻‍♀️","🤷🏻‍♂️","🤷🏻","🤷🏼‍♀️","🤷🏼‍♂️","🤷🏼","🤷🏽‍♀️","🤷🏽‍♂️","🤷🏽","🤷🏾‍♀️","🤷🏾‍♂️","🤷🏾","🤷🏿‍♀️","🤷🏿‍♂️","🤷🏿","🤷‍♀️","🤷‍♂️","🤷","🤸🏻‍♀️","🤸🏻‍♂️","🤸🏻","🤸🏼‍♀️","🤸🏼‍♂️","🤸🏼","🤸🏽‍♀️","🤸🏽‍♂️","🤸🏽","🤸🏾‍♀️","🤸🏾‍♂️","🤸🏾","🤸🏿‍♀️","🤸🏿‍♂️","🤸🏿","🤸‍♀️","🤸‍♂️","🤸","🤹🏻‍♀️","🤹🏻‍♂️","🤹🏻","🤹🏼‍♀️","🤹🏼‍♂️","🤹🏼","🤹🏽‍♀️","🤹🏽‍♂️","🤹🏽","🤹🏾‍♀️","🤹🏾‍♂️","🤹🏾","🤹🏿‍♀️","🤹🏿‍♂️","🤹🏿","🤹‍♀️","🤹‍♂️","🤹","🤺","🤼‍♀️","🤼‍♂️","🤼","🤽🏻‍♀️","🤽🏻‍♂️","🤽🏻","🤽🏼‍♀️","🤽🏼‍♂️","🤽🏼","🤽🏽‍♀️","🤽🏽‍♂️","🤽🏽","🤽🏾‍♀️","🤽🏾‍♂️","🤽🏾","🤽🏿‍♀️","🤽🏿‍♂️","🤽🏿","🤽‍♀️","🤽‍♂️","🤽","🤾🏻‍♀️","🤾🏻‍♂️","🤾🏻","🤾🏼‍♀️","🤾🏼‍♂️","🤾🏼","🤾🏽‍♀️","🤾🏽‍♂️","🤾🏽","🤾🏾‍♀️","🤾🏾‍♂️","🤾🏾","🤾🏿‍♀️","🤾🏿‍♂️","🤾🏿","🤾‍♀️","🤾‍♂️","🤾","🤿","🥀","🥁","🥂","🥃","🥄","🥅","🥇","🥈","🥉","🥊","🥋","🥌","🥍","🥎","🥏","🥐","🥑","🥒","🥓","🥔","🥕","🥖","🥗","🥘","🥙","🥚","🥛","🥜","🥝","🥞","🥟","🥠","🥡","🥢","🥣","🥤","🥥","🥦","🥧","🥨","🥩","🥪","🥫","🥬","🥭","🥮","🥯","🥰","🥱","🥳","🥴","🥵","🥶","🥺","🥻","🥼","🥽","🥾","🥿","🦀","🦁","🦂","🦃","🦄","🦅","🦆","🦇","🦈","🦉","🦊","🦋","🦌","🦍","🦎","🦏","🦐","🦑","🦒","🦓","🦔","🦕","🦖","🦗","🦘","🦙","🦚","🦛","🦜","🦝","🦞","🦟","🦠","🦡","🦢","🦥","🦦","🦧","🦨","🦩","🦪","🦮","🦯","🦰","🦱","🦲","🦳","🦴","🦵🏻","🦵🏼","🦵🏽","🦵🏾","🦵🏿","🦵","🦶🏻","🦶🏼","🦶🏽","🦶🏾","🦶🏿","🦶","🦷","🦸🏻‍♀️","🦸🏻‍♂️","🦸🏻","🦸🏼‍♀️","🦸🏼‍♂️","🦸🏼","🦸🏽‍♀️","🦸🏽‍♂️","🦸🏽","🦸🏾‍♀️","🦸🏾‍♂️","🦸🏾","🦸🏿‍♀️","🦸🏿‍♂️","🦸🏿","🦸‍♀️","🦸‍♂️","🦸","🦹🏻‍♀️","🦹🏻‍♂️","🦹🏻","🦹🏼‍♀️","🦹🏼‍♂️","🦹🏼","🦹🏽‍♀️","🦹🏽‍♂️","🦹🏽","🦹🏾‍♀️","🦹🏾‍♂️","🦹🏾","🦹🏿‍♀️","🦹🏿‍♂️","🦹🏿","🦹‍♀️","🦹‍♂️","🦹","🦺","🦻🏻","🦻🏼","🦻🏽","🦻🏾","🦻🏿","🦻","🦼","🦽","🦾","🦿","🧀","🧁","🧂","🧃","🧄","🧅","🧆","🧇","🧈","🧉","🧊","🧍🏻‍♀️","🧍🏻‍♂️","🧍🏻","🧍🏼‍♀️","🧍🏼‍♂️","🧍🏼","🧍🏽‍♀️","🧍🏽‍♂️","🧍🏽","🧍🏾‍♀️","🧍🏾‍♂️","🧍🏾","🧍🏿‍♀️","🧍🏿‍♂️","🧍🏿","🧍‍♀️","🧍‍♂️","🧍","🧎🏻‍♀️","🧎🏻‍♂️","🧎🏻","🧎🏼‍♀️","🧎🏼‍♂️","🧎🏼","🧎🏽‍♀️","🧎🏽‍♂️","🧎🏽","🧎🏾‍♀️","🧎🏾‍♂️","🧎🏾","🧎🏿‍♀️","🧎🏿‍♂️","🧎🏿","🧎‍♀️","🧎‍♂️","🧎","🧏🏻‍♀️","🧏🏻‍♂️","🧏🏻","🧏🏼‍♀️","🧏🏼‍♂️","🧏🏼","🧏🏽‍♀️","🧏🏽‍♂️","🧏🏽","🧏🏾‍♀️","🧏🏾‍♂️","🧏🏾","🧏🏿‍♀️","🧏🏿‍♂️","🧏🏿","🧏‍♀️","🧏‍♂️","🧏","🧐","🧑🏻‍🤝‍🧑🏻","🧑🏻","🧑🏼‍🤝‍🧑🏻","🧑🏼‍🤝‍🧑🏼","🧑🏼","🧑🏽‍🤝‍🧑🏻","🧑🏽‍🤝‍🧑🏼","🧑🏽‍🤝‍🧑🏽","🧑🏽","🧑🏾‍🤝‍🧑🏻","🧑🏾‍🤝‍🧑🏼","🧑🏾‍🤝‍🧑🏽","🧑🏾‍🤝‍🧑🏾","🧑🏾","🧑🏿‍🤝‍🧑🏻","🧑🏿‍🤝‍🧑🏼","🧑🏿‍🤝‍🧑🏽","🧑🏿‍🤝‍🧑🏾","🧑🏿‍🤝‍🧑🏿","🧑🏿","🧑‍🤝‍🧑","🧑","🧒🏻","🧒🏼","🧒🏽","🧒🏾","🧒🏿","🧒","🧓🏻","🧓🏼","🧓🏽","🧓🏾","🧓🏿","🧓","🧔🏻","🧔🏼","🧔🏽","🧔🏾","🧔🏿","🧔","🧕🏻","🧕🏼","🧕🏽","🧕🏾","🧕🏿","🧕","🧖🏻‍♀️","🧖🏻‍♂️","🧖🏻","🧖🏼‍♀️","🧖🏼‍♂️","🧖🏼","🧖🏽‍♀️","🧖🏽‍♂️","🧖🏽","🧖🏾‍♀️","🧖🏾‍♂️","🧖🏾","🧖🏿‍♀️","🧖🏿‍♂️","🧖🏿","🧖‍♀️","🧖‍♂️","🧖","🧗🏻‍♀️","🧗🏻‍♂️","🧗🏻","🧗🏼‍♀️","🧗🏼‍♂️","🧗🏼","🧗🏽‍♀️","🧗🏽‍♂️","🧗🏽","🧗🏾‍♀️","🧗🏾‍♂️","🧗🏾","🧗🏿‍♀️","🧗🏿‍♂️","🧗🏿","🧗‍♀️","🧗‍♂️","🧗","🧘🏻‍♀️","🧘🏻‍♂️","🧘🏻","🧘🏼‍♀️","🧘🏼‍♂️","🧘🏼","🧘🏽‍♀️","🧘🏽‍♂️","🧘🏽","🧘🏾‍♀️","🧘🏾‍♂️","🧘🏾","🧘🏿‍♀️","🧘🏿‍♂️","🧘🏿","🧘‍♀️","🧘‍♂️","🧘","🧙🏻‍♀️","🧙🏻‍♂️","🧙🏻","🧙🏼‍♀️","🧙🏼‍♂️","🧙🏼","🧙🏽‍♀️","🧙🏽‍♂️","🧙🏽","🧙🏾‍♀️","🧙🏾‍♂️","🧙🏾","🧙🏿‍♀️","🧙🏿‍♂️","🧙🏿","🧙‍♀️","🧙‍♂️","🧙","🧚🏻‍♀️","🧚🏻‍♂️","🧚🏻","🧚🏼‍♀️","🧚🏼‍♂️","🧚🏼","🧚🏽‍♀️","🧚🏽‍♂️","🧚🏽","🧚🏾‍♀️","🧚🏾‍♂️","🧚🏾","🧚🏿‍♀️","🧚🏿‍♂️","🧚🏿","🧚‍♀️","🧚‍♂️","🧚","🧛🏻‍♀️","🧛🏻‍♂️","🧛🏻","🧛🏼‍♀️","🧛🏼‍♂️","🧛🏼","🧛🏽‍♀️","🧛🏽‍♂️","🧛🏽","🧛🏾‍♀️","🧛🏾‍♂️","🧛🏾","🧛🏿‍♀️","🧛🏿‍♂️","🧛🏿","🧛‍♀️","🧛‍♂️","🧛","🧜🏻‍♀️","🧜🏻‍♂️","🧜🏻","🧜🏼‍♀️","🧜🏼‍♂️","🧜🏼","🧜🏽‍♀️","🧜🏽‍♂️","🧜🏽","🧜🏾‍♀️","🧜🏾‍♂️","🧜🏾","🧜🏿‍♀️","🧜🏿‍♂️","🧜🏿","🧜‍♀️","🧜‍♂️","🧜","🧝🏻‍♀️","🧝🏻‍♂️","🧝🏻","🧝🏼‍♀️","🧝🏼‍♂️","🧝🏼","🧝🏽‍♀️","🧝🏽‍♂️","🧝🏽","🧝🏾‍♀️","🧝🏾‍♂️","🧝🏾","🧝🏿‍♀️","🧝🏿‍♂️","🧝🏿","🧝‍♀️","🧝‍♂️","🧝","🧞‍♀️","🧞‍♂️","🧞","🧟‍♀️","🧟‍♂️","🧟","🧠","🧡","🧢","🧣","🧤","🧥","🧦","🧧","🧨","🧩","🧪","🧫","🧬","🧭","🧮","🧯","🧰","🧱","🧲","🧳","🧴","🧵","🧶","🧷","🧸","🧹","🧺","🧻","🧼","🧽","🧾","🧿","🩰","🩱","🩲","🩳","🩸","🩹","🩺","🪀","🪁","🪂","🪐","🪑","🪒","🪓","🪔","🪕","‼️","⁉️","™️","ℹ️","↔️","↕️","↖️","↗️","↘️","↙️","↩️","↪️","#⃣","⌚️","⌛️","⌨️","⏏️","⏩","⏪","⏫","⏬","⏭️","⏮️","⏯️","⏰","⏱️","⏲️","⏳","⏸️","⏹️","⏺️","Ⓜ️","▪️","▫️","▶️","◀️","◻️","◼️","◽️","◾️","☀️","☁️","☂️","☃️","☄️","☎️","☑️","☔️","☕️","☘️","☝🏻","☝🏼","☝🏽","☝🏾","☝🏿","☝️","☠️","☢️","☣️","☦️","☪️","☮️","☯️","☸️","☹️","☺️","♀️","♂️","♈️","♉️","♊️","♋️","♌️","♍️","♎️","♏️","♐️","♑️","♒️","♓️","♟️","♠️","♣️","♥️","♦️","♨️","♻️","♾","♿️","⚒️","⚓️","⚔️","⚕️","⚖️","⚗️","⚙️","⚛️","⚜️","⚠️","⚡️","⚪️","⚫️","⚰️","⚱️","⚽️","⚾️","⛄️","⛅️","⛈️","⛎","⛏️","⛑️","⛓️","⛔️","⛩️","⛪️","⛰️","⛱️","⛲️","⛳️","⛴️","⛵️","⛷🏻","⛷🏼","⛷🏽","⛷🏾","⛷🏿","⛷️","⛸️","⛹🏻‍♀️","⛹🏻‍♂️","⛹🏻","⛹🏼‍♀️","⛹🏼‍♂️","⛹🏼","⛹🏽‍♀️","⛹🏽‍♂️","⛹🏽","⛹🏾‍♀️","⛹🏾‍♂️","⛹🏾","⛹🏿‍♀️","⛹🏿‍♂️","⛹🏿","⛹️‍♀️","⛹️‍♂️","⛹️","⛺️","⛽️","✂️","✅","✈️","✉️","✊🏻","✊🏼","✊🏽","✊🏾","✊🏿","✊","✋🏻","✋🏼","✋🏽","✋🏾","✋🏿","✋","✌🏻","✌🏼","✌🏽","✌🏾","✌🏿","✌️","✍🏻","✍🏼","✍🏽","✍🏾","✍🏿","✍️","✏️","✒️","✔️","✖️","✝️","✡️","✨","✳️","✴️","❄️","❇️","❌","❎","❓","❔","❕","❗️","❣️","❤️","➕","➖","➗","➡️","➰","➿","⤴️","⤵️","*⃣","⬅️","⬆️","⬇️","⬛️","⬜️","⭐️","⭕️","0⃣","〰️","〽️","1⃣","2⃣","㊗️","㊙️","3⃣","4⃣","5⃣","6⃣","7⃣","8⃣","9⃣","©️","®️",""]},function(e,t,r){"use strict";const{validate:n,ValidationError:a}=r(905);e.exports={validate:n,ValidationError:a}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validate=function(e,t,r){let n=[];Array.isArray(t)?(n=Array.from(t,t=>l(e,t)),n.forEach((e,t)=>{const r=e=>{e.dataPath=`[${t}]${e.dataPath}`,e.children&&e.children.forEach(r)};e.forEach(r)}),n=n.reduce((e,t)=>(e.push(...t),e),[])):n=l(e,t);if(n.length>0)throw new a.default(n,e,r)},Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return a.default}});var n=i(r(906)),a=i(r(907));function i(e){return e&&e.__esModule?e:{default:e}}const o=r(910),s=r(944),c=new o({allErrors:!0,verbose:!0,$data:!0});function l(e,t){const r=c.compile(e);return r(t)?[]:r.errors?function(e){let t=[];for(const r of e){const{dataPath:e}=r;let n=[];t=t.filter(t=>!t.dataPath.includes(e)||(t.children&&(n=n.concat(t.children.slice(0))),t.children=void 0,n.push(t),!1)),n.length&&(r.children=n),t.push(r)}return t}(r.errors):[]}s(c,["instanceof","formatMinimum","formatMaximum","patternRequired"]),(0,n.default)(c)},function(e,t,r){"use strict";function n(e,t,r){return{dataPath:void 0,schemaPath:void 0,keyword:"absolutePath",params:{absolutePath:r},message:e,parentSchema:t}}function a(e,t,r){return n(e?`The provided value ${JSON.stringify(r)} is not an absolute path!`:`A relative path is expected. However, the provided value ${JSON.stringify(r)} is an absolute path!`,t,r)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e.addKeyword("absolutePath",{errors:!0,type:"string",compile(e,t){const r=i=>{let o=!0;i.includes("!")&&(r.errors=[n(`The provided value ${JSON.stringify(i)} contains exclamation mark (!) which is not allowed because it's reserved for loader syntax.`,t,i)],o=!1);return e===/^(?:[A-Za-z]:(\\|\/)|\\\\|\/)/.test(i)||(r.errors=[a(e,t,i)],o=!1),o};return r.errors=[],r}}),e};t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const{stringHints:n,numberHints:a}=r(908),i={type:1,not:1,oneOf:1,anyOf:1,if:1,enum:1,const:1,instanceof:1,required:2,pattern:2,patternRequired:2,format:2,formatMinimum:2,formatMaximum:2,minimum:2,exclusiveMinimum:2,maximum:2,exclusiveMaximum:2,multipleOf:2,uniqueItems:2,contains:2,minLength:2,maxLength:2,minItems:2,maxItems:2,minProperties:2,maxProperties:2,dependencies:2,propertyNames:2,additionalItems:2,additionalProperties:2,absolutePath:2};function o(e,t){const r=e.reduce((e,r)=>Math.max(e,t(r)),0);return e.filter(e=>t(e)===r)}function s(e,t){let r=e.length-1;const n=t=>0!==e[r].schemaPath.indexOf(t);for(;r>-1&&!t.every(n);)if("anyOf"===e[r].keyword||"oneOf"===e[r].keyword){const t=c(e[r]),n=s(e.slice(0,r),t.concat(e[r].schemaPath));r=n-1}else r-=1;return r+1}function c(e){const{schema:t}=e;return Array.isArray(t)?t.map(({$ref:e})=>e).filter(e=>e):[]}function l(e,t){return e.replace(/\n(?!$)/g,"\n"+t)}function u(e){return!!e.not}function d(e){const t=function e(t){return u(t)?e(t.not):t}(e);return p(t)||f(t)||m(t)||b(t)||g(t)}function h(e){return"object"==typeof e&&null!==e}function p(e){return"number"===e.type||void 0!==e.minimum||void 0!==e.exclusiveMinimum||void 0!==e.maximum||void 0!==e.exclusiveMaximum||void 0!==e.multipleOf}function f(e){return"integer"===e.type||void 0!==e.minimum||void 0!==e.exclusiveMinimum||void 0!==e.maximum||void 0!==e.exclusiveMaximum||void 0!==e.multipleOf}function m(e){return"string"===e.type||void 0!==e.minLength||void 0!==e.maxLength||void 0!==e.pattern||void 0!==e.format||void 0!==e.formatMinimum||void 0!==e.formatMaximum}function g(e){return"boolean"===e.type}function y(e){return"array"===e.type||"number"==typeof e.minItems||"number"==typeof e.maxItems||void 0!==e.uniqueItems||void 0!==e.items||void 0!==e.additionalItems||void 0!==e.contains}function v(e){return"object"===e.type||void 0!==e.minProperties||void 0!==e.maxProperties||void 0!==e.required||void 0!==e.properties||void 0!==e.patternProperties||void 0!==e.additionalProperties||void 0!==e.dependencies||void 0!==e.propertyNames||void 0!==e.patternRequired}function b(e){return"null"===e.type}function _(e){if(!e)return"";if(!e.type){if(p(e)||f(e))return" | should be any non-number";if(m(e))return" | should be any non-string";if(y(e))return" | should be any non-array";if(v(e))return" | should be any non-object"}return""}function w(e){return e.length>0?`(${e.join(", ")})`:""}function x(e,t){return p(e)||f(e)?a(e,t):m(e)?n(e,t):[]}class k extends Error{constructor(e,t,r={}){let n,a;if(super(),this.name="ValidationError",this.errors=e,this.schema=t,t.title&&(!r.name||!r.baseDataPath)){const e=t.title.match(/^(.+) (.+)$/);e&&(r.name||([,n]=e),r.baseDataPath||([,,a]=e))}this.headerName=r.name||n||"Object",this.baseDataPath=r.baseDataPath||a||"configuration",this.postFormatter=r.postFormatter||null;const i=`Invalid ${this.baseDataPath} object. ${this.headerName} has been initialized using ${o=this.baseDataPath,/^[aeiou]/i.test(o)?"an":"a"} ${this.baseDataPath} object that does not match the API schema.\n`;var o;this.message=`${i}${this.formatValidationErrors(e)}`,Error.captureStackTrace(this,this.constructor)}getSchemaPart(e){const t=e.split("/");let r=this.schema;for(let e=1;e<t.length;e++){const n=r[t[e]];if(!n)break;r=n}return r}formatSchema(e,t=!0,r=[]){let n=t;const a=(t,a)=>a?r.includes(t)?"(recursive)":this.formatSchema(t,n,r.concat(e)):this.formatSchema(t,n,r);if(u(e)&&!v(e)){if(d(e.not))return n=!t,a(e.not);const r=!e.not.not,i=t?"":"non ";return n=!t,r?i+a(e.not):a(e.not)}if(e.instanceof){const{instanceof:t}=e;return(Array.isArray(t)?t:[t]).map(e=>"Function"===e?"function":e).join(" | ")}if(e.enum)return e.enum.map(e=>JSON.stringify(e)).join(" | ");if(void 0!==e.const)return JSON.stringify(e.const);if(e.oneOf)return e.oneOf.map(e=>a(e,!0)).join(" | ");if(e.anyOf)return e.anyOf.map(e=>a(e,!0)).join(" | ");if(e.allOf)return e.allOf.map(e=>a(e,!0)).join(" & ");if(e.if){const{if:t,then:r,else:n}=e;return`${t?"if "+a(t):""}${r?" then "+a(r):""}${n?" else "+a(n):""}`}if(e.$ref)return a(this.getSchemaPart(e.$ref),!0);if(p(e)||f(e)){const[r,...n]=x(e,t),a=`${r}${n.length>0?" "+w(n):""}`;return t?a:n.length>0?`non-${r} | ${a}`:"non-"+r}if(m(e)){const[r,...n]=x(e,t),a=`${r}${n.length>0?" "+w(n):""}`;return t?a:"string"===a?"non-string":"non-string | "+a}if(g(e))return(t?"":"non-")+"boolean";if(y(e)){n=!0;const t=[];"number"==typeof e.minItems&&t.push(`should not have fewer than ${e.minItems} item${e.minItems>1?"s":""}`),"number"==typeof e.maxItems&&t.push(`should not have more than ${e.maxItems} item${e.maxItems>1?"s":""}`),e.uniqueItems&&t.push("should not have duplicate items");const r=void 0===e.additionalItems||Boolean(e.additionalItems);let i="";return e.items?Array.isArray(e.items)&&e.items.length>0?(i=""+e.items.map(e=>a(e)).join(", "),r&&e.additionalItems&&h(e.additionalItems)&&Object.keys(e.additionalItems).length>0&&t.push("additional items should be "+a(e.additionalItems))):i=e.items&&Object.keys(e.items).length>0?""+a(e.items):"any":i="any",e.contains&&Object.keys(e.contains).length>0&&t.push(`should contains at least one ${this.formatSchema(e.contains)} item`),`[${i}${r?", ...":""}]${t.length>0?` (${t.join(", ")})`:""}`}if(v(e)){n=!0;const t=[];if("number"==typeof e.minProperties&&t.push(`should not have fewer than ${e.minProperties} ${e.minProperties>1?"properties":"property"}`),"number"==typeof e.maxProperties&&t.push(`should not have more than ${e.maxProperties} ${e.minProperties&&e.minProperties>1?"properties":"property"}`),e.patternProperties&&Object.keys(e.patternProperties).length>0){const r=Object.keys(e.patternProperties);t.push(`additional property names should match pattern${r.length>1?"s":""} ${r.map(e=>JSON.stringify(e)).join(" | ")}`)}const r=e.properties?Object.keys(e.properties):[],i=e.required?e.required:[],o=[...new Set([].concat(i).concat(r))].map(e=>`${e}${i.includes(e)?"":"?"}`).concat(void 0===e.additionalProperties||Boolean(e.additionalProperties)?e.additionalProperties&&h(e.additionalProperties)?["<key>: "+a(e.additionalProperties)]:["…"]:[]).join(", "),{dependencies:s,propertyNames:c,patternRequired:l}=e;return s&&Object.keys(s).forEach(e=>{const r=s[e];Array.isArray(r)?t.push(`should have ${r.length>1?"properties":"property"} ${r.map(e=>`'${e}'`).join(", ")} when property '${e}' is present`):t.push(`should be valid according to the schema ${a(r)} when property '${e}' is present`)}),c&&Object.keys(c).length>0&&t.push("each property name should match format "+JSON.stringify(e.propertyNames.format)),l&&l.length>0&&t.push("should have property matching pattern "+l.map(e=>JSON.stringify(e))),`object {${o?` ${o} `:""}}${t.length>0?` (${t.join(", ")})`:""}`}return b(e)?(t?"":"non-")+"null":Array.isArray(e.type)?""+e.type.join(" | "):JSON.stringify(e,null,2)}getSchemaPartText(e,t,r=!1,n=!0){if(!e)return"";if(Array.isArray(t))for(let r=0;r<t.length;r++){const n=e[t[r]];if(!n)break;e=n}for(;e.$ref;)e=this.getSchemaPart(e.$ref);let a=`${this.formatSchema(e,n)}${r?".":""}`;return e.description&&(a+="\n-> "+e.description),e.link&&(a+="\n-> Read more at "+e.link),a}getSchemaPartDescription(e){if(!e)return"";for(;e.$ref;)e=this.getSchemaPart(e.$ref);let t="";return e.description&&(t+="\n-> "+e.description),e.link&&(t+="\n-> Read more at "+e.link),t}formatValidationError(e){const{keyword:t,dataPath:r}=e,n=`${this.baseDataPath}${r}`;switch(t){case"type":{const{parentSchema:t,params:r}=e;switch(r.type){case"number":return`${n} should be a ${this.getSchemaPartText(t,!1,!0)}`;case"integer":return`${n} should be an ${this.getSchemaPartText(t,!1,!0)}`;case"string":case"boolean":return`${n} should be a ${this.getSchemaPartText(t,!1,!0)}`;case"array":return`${n} should be an array:\n${this.getSchemaPartText(t)}`;case"object":return`${n} should be an object:\n${this.getSchemaPartText(t)}`;case"null":return`${n} should be a ${this.getSchemaPartText(t,!1,!0)}`;default:return`${n} should be:\n${this.getSchemaPartText(t)}`}}case"instanceof":{const{parentSchema:t}=e;return`${n} should be an instance of ${this.getSchemaPartText(t,!1,!0)}`}case"pattern":{const{params:t,parentSchema:r}=e,{pattern:a}=t;return`${n} should match pattern ${JSON.stringify(a)}${_(r)}.${this.getSchemaPartDescription(r)}`}case"format":{const{params:t,parentSchema:r}=e,{format:a}=t;return`${n} should match format ${JSON.stringify(a)}${_(r)}.${this.getSchemaPartDescription(r)}`}case"formatMinimum":case"formatMaximum":{const{params:t,parentSchema:r}=e,{comparison:a,limit:i}=t;return`${n} should be ${a} ${JSON.stringify(i)}${_(r)}.${this.getSchemaPartDescription(r)}`}case"minimum":case"maximum":case"exclusiveMinimum":case"exclusiveMaximum":{const{parentSchema:t,params:r}=e,{comparison:a,limit:i}=r,[,...o]=x(t,!0);return 0===o.length&&o.push(`should be ${a} ${i}`),`${n} ${o.join(" ")}${_(t)}.${this.getSchemaPartDescription(t)}`}case"multipleOf":{const{params:t,parentSchema:r}=e,{multipleOf:a}=t;return`${n} should be multiple of ${a}${_(r)}.${this.getSchemaPartDescription(r)}`}case"patternRequired":{const{params:t,parentSchema:r}=e,{missingPattern:a}=t;return`${n} should have property matching pattern ${JSON.stringify(a)}${_(r)}.${this.getSchemaPartDescription(r)}`}case"minLength":{const{params:t,parentSchema:r}=e,{limit:a}=t;if(1===a)return`${n} should be a non-empty string${_(r)}.${this.getSchemaPartDescription(r)}`;const i=a-1;return`${n} should be longer than ${i} character${i>1?"s":""}${_(r)}.${this.getSchemaPartDescription(r)}`}case"minItems":{const{params:t,parentSchema:r}=e,{limit:a}=t;return 1===a?`${n} should be a non-empty array${_(r)}.${this.getSchemaPartDescription(r)}`:`${n} should not have fewer than ${a} items${_(r)}.${this.getSchemaPartDescription(r)}`}case"minProperties":{const{params:t,parentSchema:r}=e,{limit:a}=t;return 1===a?`${n} should be a non-empty object${_(r)}.${this.getSchemaPartDescription(r)}`:`${n} should not have fewer than ${a} properties${_(r)}.${this.getSchemaPartDescription(r)}`}case"maxLength":{const{params:t,parentSchema:r}=e,{limit:a}=t,i=a+1;return`${n} should be shorter than ${i} character${i>1?"s":""}${_(r)}.${this.getSchemaPartDescription(r)}`}case"maxItems":{const{params:t,parentSchema:r}=e,{limit:a}=t;return`${n} should not have more than ${a} items${_(r)}.${this.getSchemaPartDescription(r)}`}case"maxProperties":{const{params:t,parentSchema:r}=e,{limit:a}=t;return`${n} should not have more than ${a} properties${_(r)}.${this.getSchemaPartDescription(r)}`}case"uniqueItems":{const{params:t,parentSchema:r}=e,{i:a}=t;return`${n} should not contain the item '${e.data[a]}' twice${_(r)}.${this.getSchemaPartDescription(r)}`}case"additionalItems":{const{params:t,parentSchema:r}=e,{limit:a}=t;return`${n} should not have more than ${a} items${_(r)}. These items are valid:\n${this.getSchemaPartText(r)}`}case"contains":{const{parentSchema:t}=e;return`${n} should contains at least one ${this.getSchemaPartText(t,["contains"])} item${_(t)}.`}case"required":{const{parentSchema:t,params:r}=e,a=r.missingProperty.replace(/^\./,""),i=t&&Boolean(t.properties&&t.properties[a]);return`${n} misses the property '${a}'${_(t)}.${i?" Should be:\n"+this.getSchemaPartText(t,["properties",a]):this.getSchemaPartDescription(t)}`}case"additionalProperties":{const{params:t,parentSchema:r}=e,{additionalProperty:a}=t;return`${n} has an unknown property '${a}'${_(r)}. These properties are valid:\n${this.getSchemaPartText(r)}`}case"dependencies":{const{params:t,parentSchema:r}=e,{property:a,deps:i}=t;return`${n} should have properties ${i.split(",").map(e=>`'${e.trim()}'`).join(", ")} when property '${a}' is present${_(r)}.${this.getSchemaPartDescription(r)}`}case"propertyNames":{const{params:t,parentSchema:r,schema:a}=e,{propertyName:i}=t;return`${n} property name '${i}' is invalid${_(r)}. Property names should be match format ${JSON.stringify(a.format)}.${this.getSchemaPartDescription(r)}`}case"enum":{const{parentSchema:t}=e;return t&&t.enum&&1===t.enum.length?`${n} should be ${this.getSchemaPartText(t,!1,!0)}`:`${n} should be one of these:\n${this.getSchemaPartText(t)}`}case"const":{const{parentSchema:t}=e;return`${n} should be equal to constant ${this.getSchemaPartText(t,!1,!0)}`}case"not":{const t=v(e.parentSchema)?"\n"+this.getSchemaPartText(e.parentSchema):"",r=this.getSchemaPartText(e.schema,!1,!1,!1);if(d(e.schema))return`${n} should be any ${r}${t}.`;const{schema:a,parentSchema:i}=e;return`${n} should not be ${this.getSchemaPartText(a,!1,!0)}${i&&v(i)?"\n"+this.getSchemaPartText(i):""}`}case"oneOf":case"anyOf":{const{parentSchema:t,children:r}=e;if(r&&r.length>0){if(1===e.schema.length){const e=r[r.length-1],n=r.slice(0,r.length-1);return this.formatValidationError(Object.assign({},e,{children:n,parentSchema:Object.assign({},t,e.parentSchema)}))}let a=function(e){let t=e;return t=o(t,e=>e.dataPath?e.dataPath.length:0),t=o(t,e=>i[e.keyword]||2),t}(r);return 1===a.length?this.formatValidationError(a[0]):(a=function(e){const t=[];let r=e.length-1;for(;r>0;){const n=e[r];if("anyOf"===n.keyword||"oneOf"===n.keyword){const a=c(n),i=s(e.slice(0,r),a.concat(n.schemaPath));i!==r?(t.push(Object.assign({},n,{children:e.slice(i,r)})),r=i):t.push(n)}else t.push(n);r-=1}return 0===r&&t.push(e[r]),t.reverse()}(a),`${n} should be one of these:\n${this.getSchemaPartText(t)}\nDetails:\n${a.map(e=>" * "+l(this.formatValidationError(e),"   ")).join("\n")}`)}return`${n} should be one of these:\n${this.getSchemaPartText(t)}`}case"if":{const{params:t,parentSchema:r}=e,{failingKeyword:a}=t;return`${n} should match "${a}" schema:\n${this.getSchemaPartText(r,[a])}`}case"absolutePath":{const{message:t,parentSchema:r}=e;return`${n}: ${t}${this.getSchemaPartDescription(r)}`}default:{const{message:t,parentSchema:r}=e;return`${n} ${t} (${JSON.stringify(e,null,2)}).\n${this.getSchemaPartText(r,!1)}`}}}formatValidationErrors(e){return e.map(e=>{let t=this.formatValidationError(e);return this.postFormatter&&(t=this.postFormatter(t,e))," - "+l(t,"   ")}).join("\n")}}var S=k;t.default=S},function(e,t,r){"use strict";const n=r(909);e.exports.stringHints=function(e,t){const r=[];let n="string";const a={...e};if(!t){const e=a.minLength,t=a.formatMinimum,r=a.formatExclusiveMaximum;a.minLength=a.maxLength,a.maxLength=e,a.formatMinimum=a.formatMaximum,a.formatMaximum=t,a.formatExclusiveMaximum=!a.formatExclusiveMinimum,a.formatExclusiveMinimum=!r}if("number"==typeof a.minLength)if(1===a.minLength)n="non-empty string";else{const e=Math.max(a.minLength-1,0);r.push(`should be longer than ${e} character${e>1?"s":""}`)}if("number"==typeof a.maxLength)if(0===a.maxLength)n="empty string";else{const e=a.maxLength+1;r.push(`should be shorter than ${e} character${e>1?"s":""}`)}return a.pattern&&r.push(`should${t?"":" not"} match pattern ${JSON.stringify(a.pattern)}`),a.format&&r.push(`should${t?"":" not"} match format ${JSON.stringify(a.format)}`),a.formatMinimum&&r.push(`should be ${a.formatExclusiveMinimum?">":">="} ${JSON.stringify(a.formatMinimum)}`),a.formatMaximum&&r.push(`should be ${a.formatExclusiveMaximum?"<":"<="} ${JSON.stringify(a.formatMaximum)}`),[n].concat(r)},e.exports.numberHints=function(e,t){const r=["integer"===e.type?"integer":"number"],a=new n;"number"==typeof e.minimum&&a.left(e.minimum),"number"==typeof e.exclusiveMinimum&&a.left(e.exclusiveMinimum,!0),"number"==typeof e.maximum&&a.right(e.maximum),"number"==typeof e.exclusiveMaximum&&a.right(e.exclusiveMaximum,!0);const i=a.format(t);return i&&r.push(i),"number"==typeof e.multipleOf&&r.push(`should${t?"":" not"} be multiple of ${e.multipleOf}`),r}},function(e,t,r){"use strict";class n{static getOperator(e,t){return"left"===e?t?">":">=":t?"<":"<="}static formatRight(e,t,r){return!1===t?n.formatLeft(e,!t,!r):`should be ${n.getOperator("right",r)} ${e}`}static formatLeft(e,t,r){return!1===t?n.formatRight(e,!t,!r):`should be ${n.getOperator("left",r)} ${e}`}static formatRange(e,t,r,a,i){let o="should be";return o+=` ${n.getOperator(i?"left":"right",i?r:!r)} ${e} `,o+=i?"and":"or",o+=` ${n.getOperator(i?"right":"left",i?a:!a)} ${t}`,o}static getRangeValue(e,t){let r=t?1/0:-1/0,n=-1;const a=t?([e])=>e<=r:([e])=>e>=r;for(let t=0;t<e.length;t++)a(e[t])&&([r]=e[t],n=t);return n>-1?e[n]:[1/0,!0]}constructor(){this._left=[],this._right=[]}left(e,t=!1){this._left.push([e,t])}right(e,t=!1){this._right.push([e,t])}format(e=!0){const[t,r]=n.getRangeValue(this._left,e),[a,i]=n.getRangeValue(this._right,!e);if(!Number.isFinite(t)&&!Number.isFinite(a))return"";const o=r?t+1:t;return o===(i?a-1:a)?`should be ${e?"":"!"}= ${o}`:Number.isFinite(t)&&!Number.isFinite(a)?n.formatLeft(t,e,r):!Number.isFinite(t)&&Number.isFinite(a)?n.formatRight(a,e,i):n.formatRange(t,a,r,i,e)}}e.exports=n},function(e,t,r){"use strict";var n=r(911),a=r(192),i=r(915),o=r(406),s=r(407),c=r(916),l=r(917),u=r(938),d=r(80);e.exports=y,y.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var n=this._addSchema(e);r=n.validate||this._compile(n)}var a=r(t);!0!==r.$async&&(this.errors=r.errors);return a},y.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},y.prototype.addSchema=function(e,t,r,n){if(Array.isArray(e)){for(var i=0;i<e.length;i++)this.addSchema(e[i],void 0,r,n);return this}var o=this._getId(e);if(void 0!==o&&"string"!=typeof o)throw new Error("schema id must be string");return k(this,t=a.normalizeId(t||o)),this._schemas[t]=this._addSchema(e,r,n,!0),this},y.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},y.prototype.validateSchema=function(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(f)?f:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n=this.validate(r,e);if(!n&&t){var a="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(a);this.logger.error(a)}return n},y.prototype.getSchema=function(e){var t=v(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var r=a.schema.call(e,{schema:{}},t);if(r){var i=r.schema,s=r.root,c=r.baseId,l=n.call(e,i,s,void 0,c);return e._fragments[t]=new o({ref:t,fragment:!0,schema:i,root:s,baseId:c,validate:l}),l}}(this,e)}},y.prototype.removeSchema=function(e){if(e instanceof RegExp)return b(this,this._schemas,e),b(this,this._refs,e),this;switch(typeof e){case"undefined":return b(this,this._schemas),b(this,this._refs),this._cache.clear(),this;case"string":var t=v(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,n=r?r(e):e;this._cache.del(n);var i=this._getId(e);i&&(i=a.normalizeId(i),delete this._schemas[i],delete this._refs[i])}return this},y.prototype.addFormat=function(e,t){"string"==typeof t&&(t=new RegExp(t));return this._formats[e]=t,this},y.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,n=void 0===t.dataVar?"data":t.dataVar,a="",i=0;i<e.length;i++){var o=e[i];o&&(a+=n+o.dataPath+" "+o.message+r)}return a.slice(0,-r.length)},y.prototype._addSchema=function(e,t,r,n){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var i=this._opts.serialize,s=i?i(e):e,c=this._cache.get(s);if(c)return c;n=n||!1!==this._opts.addUsedSchema;var l=a.normalizeId(this._getId(e));l&&n&&k(this,l);var u,d=!1!==this._opts.validateSchema&&!t;d&&!(u=l&&l==a.normalizeId(e.$schema))&&this.validateSchema(e,!0);var h=a.ids.call(this,e),p=new o({id:l,schema:e,localRefs:h,cacheKey:s,meta:r});"#"!=l[0]&&n&&(this._refs[l]=p);this._cache.put(s,p),d&&u&&this.validateSchema(e,!0);return p},y.prototype._compile=function(e,t){if(e.compiling)return e.validate=i,i.schema=e.schema,i.errors=null,i.root=t||i,!0===e.schema.$async&&(i.$async=!0),i;var r,a;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{a=n.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=a,e.refs=a.refs,e.refVal=a.refVal,e.root=a.root,a;function i(){var t=e.validate,r=t.apply(this,arguments);return i.errors=t.errors,r}},y.prototype.compileAsync=r(939);var h=r(940);y.prototype.addKeyword=h.add,y.prototype.getKeyword=h.get,y.prototype.removeKeyword=h.remove,y.prototype.validateKeyword=h.validate;var p=r(194);y.ValidationError=p.Validation,y.MissingRefError=p.MissingRef,y.$dataMetaSchema=u;var f="http://json-schema.org/draft-07/schema",m=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],g=["/properties"];function y(e){if(!(this instanceof y))return new y(e);e=this._opts=d.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:S,warn:S,error:S};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=c(e.format),this._cache=e.cache||new i,this._loadingSchemas={},this._compilations=[],this.RULES=l(),this._getId=function(e){switch(e.schemaId){case"auto":return x;case"id":return _;default:return w}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=s),this._metaOpts=function(e){for(var t=d.copy(e._opts),r=0;r<m.length;r++)delete t[m[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),e.keywords&&function(e){for(var t in e._opts.keywords){var r=e._opts.keywords[t];e.addKeyword(t,r)}}(this),function(e){var t;e._opts.$data&&(t=r(943),e.addMetaSchema(t,t.$id,!0));if(!1===e._opts.meta)return;var n=r(413);e._opts.$data&&(n=u(n,g));e.addMetaSchema(n,f,!0),e._refs["http://json-schema.org/schema"]=f}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(!t)return;if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function v(e,t){return t=a.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function b(e,t,r){for(var n in t){var a=t[n];a.meta||r&&!r.test(n)||(e._cache.del(a.cacheKey),delete t[n])}}function _(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function w(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function x(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function k(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function S(){}},function(e,t,r){"use strict";var n=r(192),a=r(80),i=r(194),o=r(407),s=r(408),c=a.ucs2length,l=r(193),u=i.Validation;function d(e,t,r){var n=p.call(this,e,t,r);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:e,root:t,baseId:r},{index:n,compiling:!1})}function h(e,t,r){var n=p.call(this,e,t,r);n>=0&&this._compilations.splice(n,1)}function p(e,t,r){for(var n=0;n<this._compilations.length;n++){var a=this._compilations[n];if(a.schema==e&&a.root==t&&a.baseId==r)return n}return-1}function f(e,t){return"var pattern"+e+" = new RegExp("+a.toQuotedString(t[e])+");"}function m(e){return"var default"+e+" = defaults["+e+"];"}function g(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function y(e){return"var customRule"+e+" = customRules["+e+"];"}function v(e,t){if(!e.length)return"";for(var r="",n=0;n<e.length;n++)r+=t(n,e);return r}e.exports=function e(t,r,p,b){var _=this,w=this._opts,x=[void 0],k={},S=[],E={},A=[],P={},C=[];r=r||{schema:t,refVal:x,refs:k};var D=d.call(this,t,r,b),T=this._compilations[D.index];if(D.compiling)return T.callValidate=function e(){var t=T.validate,r=t.apply(this,arguments);return e.errors=t.errors,r};var O=this._formats,M=this.RULES;try{var I=F(t,r,p,b);T.validate=I;var R=T.callValidate;return R&&(R.schema=I.schema,R.errors=null,R.refs=I.refs,R.refVal=I.refVal,R.root=I.root,R.$async=I.$async,w.sourceCode&&(R.source=I.source)),I}finally{h.call(this,t,r,b)}function F(t,o,d,h){var p=!o||o&&o.schema==t;if(o.schema!=r.schema)return e.call(_,t,o,d,h);var b,E=!0===t.$async,P=s({isTop:!0,schema:t,isRoot:p,baseId:h,root:o,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:i.MissingRef,RULES:M,validate:s,util:a,resolve:n,resolveRef:B,usePattern:q,useDefault:L,useCustomRule:U,opts:w,formats:O,logger:_.logger,self:_});P=v(x,g)+v(S,f)+v(A,m)+v(C,y)+P,w.processCode&&(P=w.processCode(P,t));try{b=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",P)(_,M,O,r,x,A,C,l,c,u),x[0]=b}catch(e){throw _.logger.error("Error compiling schema, function code:",P),e}return b.schema=t,b.errors=null,b.refs=k,b.refVal=x,b.root=p?b:o,E&&(b.$async=!0),!0===w.sourceCode&&(b.source={code:P,patterns:S,defaults:A}),b}function B(t,a,i){a=n.url(t,a);var o,s,c=k[a];if(void 0!==c)return N(o=x[c],s="refVal["+c+"]");if(!i&&r.refs){var l=r.refs[a];if(void 0!==l)return N(o=r.refVal[l],s=j(a,o))}s=j(a);var u=n.call(_,F,r,a);if(void 0===u){var d=p&&p[a];d&&(u=n.inlineRef(d,w.inlineRefs)?d:e.call(_,d,r,p,t))}if(void 0!==u)return function(e,t){var r=k[e];x[r]=t}(a,u),N(u,s);!function(e){delete k[e]}(a)}function j(e,t){var r=x.length;return x[r]=t,k[e]=r,"refVal"+r}function N(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function q(e){var t=E[e];return void 0===t&&(t=E[e]=S.length,S[t]=e),"pattern"+t}function L(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return a.toQuotedString(e);case"object":if(null===e)return"null";var t=o(e),r=P[t];return void 0===r&&(r=P[t]=A.length,A[r]=e),"default"+r}}function U(e,t,r,n){if(!1!==_._opts.validateSchema){var a=e.definition.dependencies;if(a&&!a.every((function(e){return Object.prototype.hasOwnProperty.call(r,e)})))throw new Error("parent schema must have all required keywords: "+a.join(","));var i=e.definition.validateSchema;if(i)if(!i(t)){var o="keyword schema is invalid: "+_.errorsText(i.errors);if("log"!=_._opts.validateSchema)throw new Error(o);_.logger.error(o)}}var s,c=e.definition.compile,l=e.definition.inline,u=e.definition.macro;if(c)s=c.call(_,t,r,n);else if(u)s=u.call(_,t,r,n),!1!==w.validateSchema&&_.validateSchema(s,!0);else if(l)s=l.call(_,n,e.keyword,t,r);else if(!(s=e.definition.validate))return;if(void 0===s)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var d=C.length;return C[d]=s,{code:"customRule"+d,validate:s}}}},function(e,t,r){
/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var n=t.length-1,a=1;a<n;++a)t[a]=t[a].slice(1,-1);return t[n]=t[n].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function n(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function a(e){return e.toUpperCase()}function i(e){var n=t("[0-9]","[A-Fa-f]"),a=r(r("%[EFef]"+n+"%"+n+n+"%"+n+n)+"|"+r("%[89A-Fa-f]"+n+"%"+n+n)+"|"+r("%"+n+n)),i="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",o=t("[\\:\\/\\?\\#\\[\\]\\@]",i),s=e?"[\\uE000-\\uF8FF]":"[]",c=t("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),l=r("[A-Za-z]"+t("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),u=r(r(a+"|"+t(c,i,"[\\:]"))+"*"),d=(r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("[1-9][0-9]")+"|[0-9]"),r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("0?[1-9][0-9]")+"|0?0?[0-9]")),h=r(d+"\\."+d+"\\."+d+"\\."+d),p=r(n+"{1,4}"),f=r(r(p+"\\:"+p)+"|"+h),m=r(r(p+"\\:")+"{6}"+f),g=r("\\:\\:"+r(p+"\\:")+"{5}"+f),y=r(r(p)+"?\\:\\:"+r(p+"\\:")+"{4}"+f),v=r(r(r(p+"\\:")+"{0,1}"+p)+"?\\:\\:"+r(p+"\\:")+"{3}"+f),b=r(r(r(p+"\\:")+"{0,2}"+p)+"?\\:\\:"+r(p+"\\:")+"{2}"+f),_=r(r(r(p+"\\:")+"{0,3}"+p)+"?\\:\\:"+p+"\\:"+f),w=r(r(r(p+"\\:")+"{0,4}"+p)+"?\\:\\:"+f),x=r(r(r(p+"\\:")+"{0,5}"+p)+"?\\:\\:"+p),k=r(r(r(p+"\\:")+"{0,6}"+p)+"?\\:\\:"),S=r([m,g,y,v,b,_,w,x,k].join("|")),E=r(r(c+"|"+a)+"+"),A=(r(S+"\\%25"+E),r(S+r("\\%25|\\%(?!"+n+"{2})")+E)),P=r("[vV]"+n+"+\\."+t(c,i,"[\\:]")+"+"),C=r("\\["+r(A+"|"+S+"|"+P)+"\\]"),D=r(r(a+"|"+t(c,i))+"*"),T=r(C+"|"+h+"(?!"+D+")|"+D),O=r("[0-9]*"),M=r(r(u+"@")+"?"+T+r("\\:"+O)+"?"),I=r(a+"|"+t(c,i,"[\\:\\@]")),R=r(I+"*"),F=r(I+"+"),B=r(r(a+"|"+t(c,i,"[\\@]"))+"+"),j=r(r("\\/"+R)+"*"),N=r("\\/"+r(F+j)+"?"),q=r(B+j),L=r(F+j),U="(?!"+I+")",z=(r(j+"|"+N+"|"+q+"|"+L+"|"+U),r(r(I+"|"+t("[\\/\\?]",s))+"*")),H=r(r(I+"|[\\/\\?]")+"*"),$=r(r("\\/\\/"+M+j)+"|"+N+"|"+L+"|"+U),G=r(l+"\\:"+$+r("\\?"+z)+"?"+r("\\#"+H)+"?"),K=r(r("\\/\\/"+M+j)+"|"+N+"|"+q+"|"+U),V=r(K+r("\\?"+z)+"?"+r("\\#"+H)+"?");return r(G+"|"+V),r(l+"\\:"+$+r("\\?"+z)+"?"),r(r("\\/\\/("+r("("+u+")@")+"?("+T+")"+r("\\:("+O+")")+"?)")+"?("+j+"|"+N+"|"+L+"|"+U+")"),r("\\?("+z+")"),r("\\#("+H+")"),r(r("\\/\\/("+r("("+u+")@")+"?("+T+")"+r("\\:("+O+")")+"?)")+"?("+j+"|"+N+"|"+q+"|"+U+")"),r("\\?("+z+")"),r("\\#("+H+")"),r(r("\\/\\/("+r("("+u+")@")+"?("+T+")"+r("\\:("+O+")")+"?)")+"?("+j+"|"+N+"|"+L+"|"+U+")"),r("\\?("+z+")"),r("\\#("+H+")"),r("("+u+")@"),r("\\:("+O+")"),{NOT_SCHEME:new RegExp(t("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",c,i),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",c,i),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",c,i),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",c,i),"g"),NOT_QUERY:new RegExp(t("[^\\%]",c,i,"[\\:\\@\\/\\?]",s),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",c,i,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",c,i),"g"),UNRESERVED:new RegExp(c,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",c,o),"g"),PCT_ENCODED:new RegExp(a,"g"),IPV4ADDRESS:new RegExp("^("+h+")$"),IPV6ADDRESS:new RegExp("^\\[?("+S+")"+r(r("\\%25|\\%(?!"+n+"{2})")+"("+E+")")+"?\\]?$")}}var o=i(!1),s=i(!0),c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=2147483647,u=/^xn--/,d=/[^\0-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,m=String.fromCharCode;function g(e){throw new RangeError(p[e])}function y(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]);var a=function(e,t){for(var r=[],n=e.length;n--;)r[n]=t(e[n]);return r}((e=e.replace(h,".")).split("."),t).join(".");return n+a}function v(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var i=e.charCodeAt(r++);56320==(64512&i)?t.push(((1023&a)<<10)+(1023&i)+65536):(t.push(a),r--)}else t.push(a)}return t}var b=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},_=function(e,t,r){var n=0;for(e=r?f(e/700):e>>1,e+=f(e/t);e>455;n+=36)e=f(e/35);return f(n+36*e/(e+38))},w=function(e){var t,r=[],n=e.length,a=0,i=128,o=72,s=e.lastIndexOf("-");s<0&&(s=0);for(var c=0;c<s;++c)e.charCodeAt(c)>=128&&g("not-basic"),r.push(e.charCodeAt(c));for(var u=s>0?s+1:0;u<n;){for(var d=a,h=1,p=36;;p+=36){u>=n&&g("invalid-input");var m=(t=e.charCodeAt(u++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36;(m>=36||m>f((l-a)/h))&&g("overflow"),a+=m*h;var y=p<=o?1:p>=o+26?26:p-o;if(m<y)break;var v=36-y;h>f(l/v)&&g("overflow"),h*=v}var b=r.length+1;o=_(a-d,b,0==d),f(a/b)>l-i&&g("overflow"),i+=f(a/b),a%=b,r.splice(a++,0,i)}return String.fromCodePoint.apply(String,r)},x=function(e){var t=[],r=(e=v(e)).length,n=128,a=0,i=72,o=!0,s=!1,c=void 0;try{for(var u,d=e[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var h=u.value;h<128&&t.push(m(h))}}catch(e){s=!0,c=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw c}}var p=t.length,y=p;for(p&&t.push("-");y<r;){var w=l,x=!0,k=!1,S=void 0;try{for(var E,A=e[Symbol.iterator]();!(x=(E=A.next()).done);x=!0){var P=E.value;P>=n&&P<w&&(w=P)}}catch(e){k=!0,S=e}finally{try{!x&&A.return&&A.return()}finally{if(k)throw S}}var C=y+1;w-n>f((l-a)/C)&&g("overflow"),a+=(w-n)*C,n=w;var D=!0,T=!1,O=void 0;try{for(var M,I=e[Symbol.iterator]();!(D=(M=I.next()).done);D=!0){var R=M.value;if(R<n&&++a>l&&g("overflow"),R==n){for(var F=a,B=36;;B+=36){var j=B<=i?1:B>=i+26?26:B-i;if(F<j)break;var N=F-j,q=36-j;t.push(m(b(j+N%q,0))),F=f(N/q)}t.push(m(b(F,0))),i=_(a,C,y==p),a=0,++y}}}catch(e){T=!0,O=e}finally{try{!D&&I.return&&I.return()}finally{if(T)throw O}}++a,++n}return t.join("")},k=function(e){return y(e,(function(e){return d.test(e)?"xn--"+x(e):e}))},S=function(e){return y(e,(function(e){return u.test(e)?w(e.slice(4).toLowerCase()):e}))},E={};function A(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function P(e){for(var t="",r=0,n=e.length;r<n;){var a=parseInt(e.substr(r+1,2),16);if(a<128)t+=String.fromCharCode(a),r+=3;else if(a>=194&&a<224){if(n-r>=6){var i=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&a)<<6|63&i)}else t+=e.substr(r,6);r+=6}else if(a>=224){if(n-r>=9){var o=parseInt(e.substr(r+4,2),16),s=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&a)<<12|(63&o)<<6|63&s)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function C(e,t){function r(e){var r=P(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,A).replace(t.PCT_ENCODED,a)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,A).replace(t.PCT_ENCODED,a)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,A).replace(t.PCT_ENCODED,a)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,A).replace(t.PCT_ENCODED,a)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,A).replace(t.PCT_ENCODED,a)),e}function D(e){return e.replace(/^0*(.*)/,"$1")||"0"}function T(e,t){var r=e.match(t.IPV4ADDRESS)||[],n=c(r,2)[1];return n?n.split(".").map(D).join("."):e}function O(e,t){var r=e.match(t.IPV6ADDRESS)||[],n=c(r,3),a=n[1],i=n[2];if(a){for(var o=a.toLowerCase().split("::").reverse(),s=c(o,2),l=s[0],u=s[1],d=u?u.split(":").map(D):[],h=l.split(":").map(D),p=t.IPV4ADDRESS.test(h[h.length-1]),f=p?7:8,m=h.length-f,g=Array(f),y=0;y<f;++y)g[y]=d[y]||h[m+y]||"";p&&(g[f-1]=T(g[f-1],t));var v=g.reduce((function(e,t,r){if(!t||"0"===t){var n=e[e.length-1];n&&n.index+n.length===r?n.length++:e.push({index:r,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],b=void 0;if(v&&v.length>1){var _=g.slice(0,v.index),w=g.slice(v.index+v.length);b=_.join(":")+"::"+w.join(":")}else b=g.join(":");return i&&(b+="%"+i),b}return e}var M=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,I=void 0==="".match(/(){0}/)[1];function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},n=!1!==t.iri?s:o;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var a=e.match(M);if(a){I?(r.scheme=a[1],r.userinfo=a[3],r.host=a[4],r.port=parseInt(a[5],10),r.path=a[6]||"",r.query=a[7],r.fragment=a[8],isNaN(r.port)&&(r.port=a[5])):(r.scheme=a[1]||void 0,r.userinfo=-1!==e.indexOf("@")?a[3]:void 0,r.host=-1!==e.indexOf("//")?a[4]:void 0,r.port=parseInt(a[5],10),r.path=a[6]||"",r.query=-1!==e.indexOf("?")?a[7]:void 0,r.fragment=-1!==e.indexOf("#")?a[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?a[4]:void 0)),r.host&&(r.host=O(T(r.host,n),n)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var i=E[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||i&&i.unicodeSupport)C(r,n);else{if(r.host&&(t.domainHost||i&&i.domainHost))try{r.host=k(r.host.replace(n.PCT_ENCODED,P).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}C(r,o)}i&&i.parse&&i.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}function F(e,t){var r=!1!==t.iri?s:o,n=[];return void 0!==e.userinfo&&(n.push(e.userinfo),n.push("@")),void 0!==e.host&&n.push(O(T(String(e.host),r),r).replace(r.IPV6ADDRESS,(function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(n.push(":"),n.push(String(e.port))),n.length?n.join(""):void 0}var B=/^\.\.?\//,j=/^\/\.(\/|$)/,N=/^\/\.\.(\/|$)/,q=/^\/?(?:.|\n)*?(?=\/|$)/;function L(e){for(var t=[];e.length;)if(e.match(B))e=e.replace(B,"");else if(e.match(j))e=e.replace(j,"/");else if(e.match(N))e=e.replace(N,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(q);if(!r)throw new Error("Unexpected dot segment condition");var n=r[0];e=e.slice(n.length),t.push(n)}return t.join("")}function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?s:o,n=[],a=E[(t.scheme||e.scheme||"").toLowerCase()];if(a&&a.serialize&&a.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||a&&a.domainHost)try{e.host=t.iri?S(e.host):k(e.host.replace(r.PCT_ENCODED,P).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}C(e,r),"suffix"!==t.reference&&e.scheme&&(n.push(e.scheme),n.push(":"));var i=F(e,t);if(void 0!==i&&("suffix"!==t.reference&&n.push("//"),n.push(i),e.path&&"/"!==e.path.charAt(0)&&n.push("/")),void 0!==e.path){var c=e.path;t.absolutePath||a&&a.absolutePath||(c=L(c)),void 0===i&&(c=c.replace(/^\/\//,"/%2F")),n.push(c)}return void 0!==e.query&&(n.push("?"),n.push(e.query)),void 0!==e.fragment&&(n.push("#"),n.push(e.fragment)),n.join("")}function z(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],a={};return n||(e=R(U(e,r),r),t=R(U(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(a.scheme=t.scheme,a.userinfo=t.userinfo,a.host=t.host,a.port=t.port,a.path=L(t.path||""),a.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(a.userinfo=t.userinfo,a.host=t.host,a.port=t.port,a.path=L(t.path||""),a.query=t.query):(t.path?("/"===t.path.charAt(0)?a.path=L(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?a.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:a.path=t.path:a.path="/"+t.path,a.path=L(a.path)),a.query=t.query):(a.path=e.path,void 0!==t.query?a.query=t.query:a.query=e.query),a.userinfo=e.userinfo,a.host=e.host,a.port=e.port),a.scheme=e.scheme),a.fragment=t.fragment,a}function H(e,t){return e&&e.toString().replace(t&&t.iri?s.PCT_ENCODED:o.PCT_ENCODED,P)}var $={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var r="https"===String(e.scheme).toLowerCase();return e.port!==(r?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},G={scheme:"https",domainHost:$.domainHost,parse:$.parse,serialize:$.serialize};function K(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var V={scheme:"ws",domainHost:!0,parse:function(e,t){var r=e;return r.secure=K(r),r.resourceName=(r.path||"/")+(r.query?"?"+r.query:""),r.path=void 0,r.query=void 0,r},serialize:function(e,t){if(e.port!==(K(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var r=e.resourceName.split("?"),n=c(r,2),a=n[0],i=n[1];e.path=a&&"/"!==a?a:void 0,e.query=i,e.resourceName=void 0}return e.fragment=void 0,e}},W={scheme:"wss",domainHost:V.domainHost,parse:V.parse,serialize:V.serialize},Y={},J="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Q="[0-9A-Fa-f]",X=r(r("%[EFef]"+Q+"%"+Q+Q+"%"+Q+Q)+"|"+r("%[89A-Fa-f]"+Q+"%"+Q+Q)+"|"+r("%"+Q+Q)),Z=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),ee=new RegExp(J,"g"),te=new RegExp(X,"g"),re=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',Z),"g"),ne=new RegExp(t("[^]",J,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),ae=ne;function ie(e){var t=P(e);return t.match(ee)?t:e}var oe={scheme:"mailto",parse:function(e,t){var r=e,n=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var a=!1,i={},o=r.query.split("&"),s=0,c=o.length;s<c;++s){var l=o[s].split("=");switch(l[0]){case"to":for(var u=l[1].split(","),d=0,h=u.length;d<h;++d)n.push(u[d]);break;case"subject":r.subject=H(l[1],t);break;case"body":r.body=H(l[1],t);break;default:a=!0,i[H(l[0],t)]=H(l[1],t)}}a&&(r.headers=i)}r.query=void 0;for(var p=0,f=n.length;p<f;++p){var m=n[p].split("@");if(m[0]=H(m[0]),t.unicodeSupport)m[1]=H(m[1],t).toLowerCase();else try{m[1]=k(H(m[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}n[p]=m.join("@")}return r},serialize:function(e,t){var r,n=e,i=null!=(r=e.to)?r instanceof Array?r:"number"!=typeof r.length||r.split||r.setInterval||r.call?[r]:Array.prototype.slice.call(r):[];if(i){for(var o=0,s=i.length;o<s;++o){var c=String(i[o]),l=c.lastIndexOf("@"),u=c.slice(0,l).replace(te,ie).replace(te,a).replace(re,A),d=c.slice(l+1);try{d=t.iri?S(d):k(H(d,t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}i[o]=u+"@"+d}n.path=i.join(",")}var h=e.headers=e.headers||{};e.subject&&(h.subject=e.subject),e.body&&(h.body=e.body);var p=[];for(var f in h)h[f]!==Y[f]&&p.push(f.replace(te,ie).replace(te,a).replace(ne,A)+"="+h[f].replace(te,ie).replace(te,a).replace(ae,A));return p.length&&(n.query=p.join("&")),n}},se=/^([^\:]+)\:(.*)/,ce={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(se),n=e;if(r){var a=t.scheme||n.scheme||"urn",i=r[1].toLowerCase(),o=r[2],s=a+":"+(t.nid||i),c=E[s];n.nid=i,n.nss=o,n.path=void 0,c&&(n=c.parse(n,t))}else n.error=n.error||"URN can not be parsed.";return n},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",n=e.nid,a=r+":"+(t.nid||n),i=E[a];i&&(e=i.serialize(e,t));var o=e,s=e.nss;return o.path=(n||t.nid)+":"+s,o}},le=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ue={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(le)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};E[$.scheme]=$,E[G.scheme]=G,E[V.scheme]=V,E[W.scheme]=W,E[oe.scheme]=oe,E[ce.scheme]=ce,E[ue.scheme]=ue,e.SCHEMES=E,e.pctEncChar=A,e.pctDecChars=P,e.parse=R,e.removeDotSegments=L,e.serialize=U,e.resolveComponents=z,e.resolve=function(e,t,r){var n=function(e,t){var r=e;if(t)for(var n in t)r[n]=t[n];return r}({scheme:"null"},r);return U(z(R(e,n),R(t,n),n,!0),n)},e.normalize=function(e,t){return"string"==typeof e?e=U(R(e,t),t):"object"===n(e)&&(e=R(U(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=U(R(e,r),r):"object"===n(e)&&(e=U(e,r)),"string"==typeof t?t=U(R(t,r),r):"object"===n(t)&&(t=U(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?s.ESCAPE:o.ESCAPE,A)},e.unescapeComponent=H,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,r){"use strict";e.exports=function(e){for(var t,r=0,n=e.length,a=0;a<n;)r++,(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<n&&56320==(64512&(t=e.charCodeAt(a)))&&a++;return r}},function(e,t,r){"use strict";var n=e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),function e(t,r,a,i,o,s,c,l,u,d){if(i&&"object"==typeof i&&!Array.isArray(i)){for(var h in r(i,o,s,c,l,u,d),i){var p=i[h];if(Array.isArray(p)){if(h in n.arrayKeywords)for(var f=0;f<p.length;f++)e(t,r,a,p[f],o+"/"+h+"/"+f,s,o,h,i,f)}else if(h in n.propsKeywords){if(p&&"object"==typeof p)for(var m in p)e(t,r,a,p[m],o+"/"+h+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),s,o,h,i,m)}else(h in n.keywords||t.allKeys&&!(h in n.skipKeywords))&&e(t,r,a,p,o+"/"+h,s,o,h,i)}a(i,o,s,c,l,u,d)}}(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};n.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},n.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},n.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},n.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},function(e,t,r){"use strict";var n=e.exports=function(){this._cache={}};n.prototype.put=function(e,t){this._cache[e]=t},n.prototype.get=function(e){return this._cache[e]},n.prototype.del=function(e){delete this._cache[e]},n.prototype.clear=function(){this._cache={}}},function(e,t,r){"use strict";var n=r(80),a=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,i=[0,31,28,31,30,31,30,31,31,30,31,30,31],o=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,s=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,c=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,l=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,u=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,d=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,h=/^(?:\/(?:[^~/]|~0|~1)*)*$/,p=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,f=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function m(e){return e="full"==e?"full":"fast",n.copy(m[e])}function g(e){var t=e.match(a);if(!t)return!1;var r=+t[1],n=+t[2],o=+t[3];return n>=1&&n<=12&&o>=1&&o<=(2==n&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:i[n])}function y(e,t){var r=e.match(o);if(!r)return!1;var n=r[1],a=r[2],i=r[3],s=r[5];return(n<=23&&a<=59&&i<=59||23==n&&59==a&&60==i)&&(!t||s)}e.exports=m,m.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":l,url:u,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:w,uuid:d,"json-pointer":h,"json-pointer-uri-fragment":p,"relative-json-pointer":f},m.full={date:g,time:y,"date-time":function(e){var t=e.split(v);return 2==t.length&&g(t[0])&&y(t[1],!0)},uri:function(e){return b.test(e)&&c.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":l,url:u,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:w,uuid:d,"json-pointer":h,"json-pointer-uri-fragment":p,"relative-json-pointer":f};var v=/t|\s/i;var b=/\/|:/;var _=/[^\\]\\Z/;function w(e){if(_.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}},function(e,t,r){"use strict";var n=r(918),a=r(80).toHash;e.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=a(t),e.types=a(["number","integer","string","array","object","boolean","null"]),e.forEach((function(r){r.rules=r.rules.map((function(r){var a;if("object"==typeof r){var i=Object.keys(r)[0];a=r[i],r=i,a.forEach((function(r){t.push(r),e.all[r]=!0}))}return t.push(r),e.all[r]={keyword:r,code:n[r],implements:a}})),e.all.$comment={keyword:"$comment",code:n.$comment},r.type&&(e.types[r.type]=r)})),e.keywords=a(t.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e}},function(e,t,r){"use strict";e.exports={$ref:r(919),allOf:r(920),anyOf:r(921),$comment:r(922),const:r(923),contains:r(924),dependencies:r(925),enum:r(926),format:r(927),if:r(928),items:r(929),maximum:r(409),minimum:r(409),maxItems:r(410),minItems:r(410),maxLength:r(411),minLength:r(411),maxProperties:r(412),minProperties:r(412),multipleOf:r(930),not:r(931),oneOf:r(932),pattern:r(933),properties:r(934),propertyNames:r(935),required:r(936),uniqueItems:r(937),validate:r(408)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,a,i=" ",o=e.level,s=e.dataLevel,c=e.schema[t],l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),h="valid"+o;if("#"==c||"#/"==c)e.isRoot?(n=e.async,a="validate"):(n=!0===e.root.schema.$async,a="root.refVal[0]");else{var p=e.resolveRef(e.baseId,c,e.isRoot);if(void 0===p){var f=e.MissingRefError.message(e.baseId,c);if("fail"==e.opts.missingRefs){e.logger.error(f),(v=v||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { ref: '"+e.util.escapeQuotes(c)+"' } ",!1!==e.opts.messages&&(i+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(c)+"' "),e.opts.verbose&&(i+=" , schema: "+e.util.toQuotedString(c)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var m=i;i=v.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(i+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,c,f);e.logger.warn(f),u&&(i+=" if (true) { ")}}else if(p.inline){var g=e.util.copy(e);g.level++;var y="valid"+g.level;g.schema=p.schema,g.schemaPath="",g.errSchemaPath=c,i+=" "+e.validate(g).replace(/validate\.schema/g,p.code)+" ",u&&(i+=" if ("+y+") { ")}else n=!0===p.$async||e.async&&!1!==p.$async,a=p.code}if(a){var v;(v=v||[]).push(i),i="",e.opts.passContext?i+=" "+a+".call(this, ":i+=" "+a+"( ",i+=" "+d+", (dataPath || '')",'""'!=e.errorPath&&(i+=" + "+e.errorPath);var b=i+=" , "+(s?"data"+(s-1||""):"parentData")+" , "+(s?e.dataPathArr[s]:"parentDataProperty")+", rootData)  ";if(i=v.pop(),n){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(i+=" var "+h+"; "),i+=" try { await "+b+"; ",u&&(i+=" "+h+" = true; "),i+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(i+=" "+h+" = false; "),i+=" } ",u&&(i+=" if ("+h+") { ")}else i+=" if (!"+b+") { if (vErrors === null) vErrors = "+a+".errors; else vErrors = vErrors.concat("+a+".errors); errors = vErrors.length; } ",u&&(i+=" else { ")}return i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",a=e.schema[t],i=e.schemaPath+e.util.getProperty(t),o=e.errSchemaPath+"/"+t,s=!e.opts.allErrors,c=e.util.copy(e),l="";c.level++;var u="valid"+c.level,d=c.baseId,h=!0,p=a;if(p)for(var f,m=-1,g=p.length-1;m<g;)f=p[m+=1],(e.opts.strictKeywords?"object"==typeof f&&Object.keys(f).length>0||!1===f:e.util.schemaHasRules(f,e.RULES.all))&&(h=!1,c.schema=f,c.schemaPath=i+"["+m+"]",c.errSchemaPath=o+"/"+m,n+="  "+e.validate(c)+" ",c.baseId=d,s&&(n+=" if ("+u+") { ",l+="}"));return s&&(n+=h?" if (true) { ":" "+l.slice(0,-1)+" "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+a,h="errs__"+a,p=e.util.copy(e),f="";p.level++;var m="valid"+p.level;if(o.every((function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0||!1===t:e.util.schemaHasRules(t,e.RULES.all)}))){var g=p.baseId;n+=" var "+h+" = errors; var "+d+" = false;  ";var y=e.compositeRule;e.compositeRule=p.compositeRule=!0;var v=o;if(v)for(var b,_=-1,w=v.length-1;_<w;)b=v[_+=1],p.schema=b,p.schemaPath=s+"["+_+"]",p.errSchemaPath=c+"/"+_,n+="  "+e.validate(p)+" ",p.baseId=g,n+=" "+d+" = "+d+" || "+m+"; if (!"+d+") { ",f+="}";e.compositeRule=p.compositeRule=y,n+=" "+f+" if (!"+d+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } ")}else l&&(n+=" if (true) { ");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",a=e.schema[t],i=e.errSchemaPath+"/"+t,o=(e.opts.allErrors,e.util.toQuotedString(a));return!0===e.opts.$comment?n+=" console.log("+o+");":"function"==typeof e.opts.$comment&&(n+=" self._opts.$comment("+o+", "+e.util.toQuotedString(i)+", validate.root.schema);"),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+a,h=e.opts.$data&&o&&o.$data;h&&(n+=" var schema"+a+" = "+e.util.getData(o.$data,i,e.dataPathArr)+"; "),h||(n+=" var schema"+a+" = validate.schema"+s+";"),n+="var "+d+" = equal("+u+", schema"+a+"); if (!"+d+") {   ";var p=p||[];p.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValue: schema"+a+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to constant' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var f=n;return n=p.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+f+"]); ":n+=" validate.errors = ["+f+"]; return false; ":n+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",l&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+a,h="errs__"+a,p=e.util.copy(e);p.level++;var f="valid"+p.level,m="i"+a,g=p.dataLevel=e.dataLevel+1,y="data"+g,v=e.baseId,b=e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0||!1===o:e.util.schemaHasRules(o,e.RULES.all);if(n+="var "+h+" = errors;var "+d+";",b){var _=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=o,p.schemaPath=s,p.errSchemaPath=c,n+=" var "+f+" = false; for (var "+m+" = 0; "+m+" < "+u+".length; "+m+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);var w=u+"["+m+"]";p.dataPathArr[g]=m;var x=e.validate(p);p.baseId=v,e.util.varOccurences(x,y)<2?n+=" "+e.util.varReplace(x,y,w)+" ":n+=" var "+y+" = "+w+"; "+x+" ",n+=" if ("+f+") break; }  ",e.compositeRule=p.compositeRule=_,n+="  if (!"+f+") {"}else n+=" if ("+u+".length == 0) {";var k=k||[];k.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should contain a valid item' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var S=n;return n=k.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+S+"]); ":n+=" validate.errors = ["+S+"]; return false; ":n+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { ",b&&(n+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } "),e.opts.allErrors&&(n+=" } "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="errs__"+a,h=e.util.copy(e),p="";h.level++;var f="valid"+h.level,m={},g={},y=e.opts.ownProperties;for(w in o)if("__proto__"!=w){var v=o[w],b=Array.isArray(v)?g:m;b[w]=v}n+="var "+d+" = errors;";var _=e.errorPath;for(var w in n+="var missing"+a+";",g)if((b=g[w]).length){if(n+=" if ( "+u+e.util.getProperty(w)+" !== undefined ",y&&(n+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(w)+"') "),l){n+=" && ( ";var x=b;if(x)for(var k=-1,S=x.length-1;k<S;){T=x[k+=1],k&&(n+=" || "),n+=" ( ( "+(R=u+(I=e.util.getProperty(T)))+" === undefined ",y&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(T)+"') "),n+=") && (missing"+a+" = "+e.util.toQuotedString(e.opts.jsonPointers?T:I)+") ) "}n+=")) {  ";var E="missing"+a,A="' + "+E+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(_,E,!0):_+" + "+E);var P=P||[];P.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+A+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",1==b.length?n+="property "+e.util.escapeQuotes(b[0]):n+="properties "+e.util.escapeQuotes(b.join(", ")),n+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var C=n;n=P.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+C+"]); ":n+=" validate.errors = ["+C+"]; return false; ":n+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{n+=" ) { ";var D=b;if(D)for(var T,O=-1,M=D.length-1;O<M;){T=D[O+=1];var I=e.util.getProperty(T),R=(A=e.util.escapeQuotes(T),u+I);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(_,T,e.opts.jsonPointers)),n+=" if ( "+R+" === undefined ",y&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(T)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+A+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",1==b.length?n+="property "+e.util.escapeQuotes(b[0]):n+="properties "+e.util.escapeQuotes(b.join(", ")),n+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}n+=" }   ",l&&(p+="}",n+=" else { ")}e.errorPath=_;var F=h.baseId;for(var w in m){v=m[w];(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0||!1===v:e.util.schemaHasRules(v,e.RULES.all))&&(n+=" "+f+" = true; if ( "+u+e.util.getProperty(w)+" !== undefined ",y&&(n+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(w)+"') "),n+=") { ",h.schema=v,h.schemaPath=s+e.util.getProperty(w),h.errSchemaPath=c+"/"+e.util.escapeFragment(w),n+="  "+e.validate(h)+" ",h.baseId=F,n+=" }  ",l&&(n+=" if ("+f+") { ",p+="}"))}return l&&(n+="   "+p+" if ("+d+" == errors) {"),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+a,h=e.opts.$data&&o&&o.$data;h&&(n+=" var schema"+a+" = "+e.util.getData(o.$data,i,e.dataPathArr)+"; ");var p="i"+a,f="schema"+a;h||(n+=" var "+f+" = validate.schema"+s+";"),n+="var "+d+";",h&&(n+=" if (schema"+a+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+a+")) "+d+" = false; else {"),n+=d+" = false;for (var "+p+"=0; "+p+"<"+f+".length; "+p+"++) if (equal("+u+", "+f+"["+p+"])) { "+d+" = true; break; }",h&&(n+="  }  "),n+=" if (!"+d+") {   ";var m=m||[];m.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValues: schema"+a+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var g=n;return n=m.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",l&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||"");if(!1===e.opts.format)return l&&(n+=" if (true) { "),n;var d,h=e.opts.$data&&o&&o.$data;h?(n+=" var schema"+a+" = "+e.util.getData(o.$data,i,e.dataPathArr)+"; ",d="schema"+a):d=o;var p=e.opts.unknownFormats,f=Array.isArray(p);if(h){n+=" var "+(m="format"+a)+" = formats["+d+"]; var "+(g="isObject"+a)+" = typeof "+m+" == 'object' && !("+m+" instanceof RegExp) && "+m+".validate; var "+(y="formatType"+a)+" = "+g+" && "+m+".type || 'string'; if ("+g+") { ",e.async&&(n+=" var async"+a+" = "+m+".async; "),n+=" "+m+" = "+m+".validate; } if (  ",h&&(n+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),n+=" (","ignore"!=p&&(n+=" ("+d+" && !"+m+" ",f&&(n+=" && self._opts.unknownFormats.indexOf("+d+") == -1 "),n+=") || "),n+=" ("+m+" && "+y+" == '"+r+"' && !(typeof "+m+" == 'function' ? ",e.async?n+=" (async"+a+" ? await "+m+"("+u+") : "+m+"("+u+")) ":n+=" "+m+"("+u+") ",n+=" : "+m+".test("+u+"))))) {"}else{var m;if(!(m=e.formats[o])){if("ignore"==p)return e.logger.warn('unknown format "'+o+'" ignored in schema at path "'+e.errSchemaPath+'"'),l&&(n+=" if (true) { "),n;if(f&&p.indexOf(o)>=0)return l&&(n+=" if (true) { "),n;throw new Error('unknown format "'+o+'" is used in schema at path "'+e.errSchemaPath+'"')}var g,y=(g="object"==typeof m&&!(m instanceof RegExp)&&m.validate)&&m.type||"string";if(g){var v=!0===m.async;m=m.validate}if(y!=r)return l&&(n+=" if (true) { "),n;if(v){if(!e.async)throw new Error("async format in sync schema");n+=" if (!(await "+(b="formats"+e.util.getProperty(o)+".validate")+"("+u+"))) { "}else{n+=" if (! ";var b="formats"+e.util.getProperty(o);g&&(b+=".validate"),n+="function"==typeof m?" "+b+"("+u+") ":" "+b+".test("+u+") ",n+=") { "}}var _=_||[];_.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { format:  ",n+=h?""+d:""+e.util.toQuotedString(o),n+="  } ",!1!==e.opts.messages&&(n+=" , message: 'should match format \"",n+=h?"' + "+d+" + '":""+e.util.escapeQuotes(o),n+="\"' "),e.opts.verbose&&(n+=" , schema:  ",n+=h?"validate.schema"+s:""+e.util.toQuotedString(o),n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var w=n;return n=_.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+w+"]); ":n+=" validate.errors = ["+w+"]; return false; ":n+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",l&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+a,h="errs__"+a,p=e.util.copy(e);p.level++;var f="valid"+p.level,m=e.schema.then,g=e.schema.else,y=void 0!==m&&(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0||!1===m:e.util.schemaHasRules(m,e.RULES.all)),v=void 0!==g&&(e.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0||!1===g:e.util.schemaHasRules(g,e.RULES.all)),b=p.baseId;if(y||v){var _;p.createErrors=!1,p.schema=o,p.schemaPath=s,p.errSchemaPath=c,n+=" var "+h+" = errors; var "+d+" = true;  ";var w=e.compositeRule;e.compositeRule=p.compositeRule=!0,n+="  "+e.validate(p)+" ",p.baseId=b,p.createErrors=!0,n+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }  ",e.compositeRule=p.compositeRule=w,y?(n+=" if ("+f+") {  ",p.schema=e.schema.then,p.schemaPath=e.schemaPath+".then",p.errSchemaPath=e.errSchemaPath+"/then",n+="  "+e.validate(p)+" ",p.baseId=b,n+=" "+d+" = "+f+"; ",y&&v?n+=" var "+(_="ifClause"+a)+" = 'then'; ":_="'then'",n+=" } ",v&&(n+=" else { ")):n+=" if (!"+f+") { ",v&&(p.schema=e.schema.else,p.schemaPath=e.schemaPath+".else",p.errSchemaPath=e.errSchemaPath+"/else",n+="  "+e.validate(p)+" ",p.baseId=b,n+=" "+d+" = "+f+"; ",y&&v?n+=" var "+(_="ifClause"+a)+" = 'else'; ":_="'else'",n+=" } "),n+=" if (!"+d+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { failingKeyword: "+_+" } ",!1!==e.opts.messages&&(n+=" , message: 'should match \"' + "+_+" + '\" schema' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" }   ",l&&(n+=" else { ")}else l&&(n+=" if (true) { ");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+a,h="errs__"+a,p=e.util.copy(e),f="";p.level++;var m="valid"+p.level,g="i"+a,y=p.dataLevel=e.dataLevel+1,v="data"+y,b=e.baseId;if(n+="var "+h+" = errors;var "+d+";",Array.isArray(o)){var _=e.schema.additionalItems;if(!1===_){n+=" "+d+" = "+u+".length <= "+o.length+"; ";var w=c;c=e.errSchemaPath+"/additionalItems",n+="  if (!"+d+") {   ";var x=x||[];x.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+o.length+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have more than "+o.length+" items' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var k=n;n=x.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+k+"]); ":n+=" validate.errors = ["+k+"]; return false; ":n+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",c=w,l&&(f+="}",n+=" else { ")}var S=o;if(S)for(var E,A=-1,P=S.length-1;A<P;)if(E=S[A+=1],e.opts.strictKeywords?"object"==typeof E&&Object.keys(E).length>0||!1===E:e.util.schemaHasRules(E,e.RULES.all)){n+=" "+m+" = true; if ("+u+".length > "+A+") { ";var C=u+"["+A+"]";p.schema=E,p.schemaPath=s+"["+A+"]",p.errSchemaPath=c+"/"+A,p.errorPath=e.util.getPathExpr(e.errorPath,A,e.opts.jsonPointers,!0),p.dataPathArr[y]=A;var D=e.validate(p);p.baseId=b,e.util.varOccurences(D,v)<2?n+=" "+e.util.varReplace(D,v,C)+" ":n+=" var "+v+" = "+C+"; "+D+" ",n+=" }  ",l&&(n+=" if ("+m+") { ",f+="}")}if("object"==typeof _&&(e.opts.strictKeywords?"object"==typeof _&&Object.keys(_).length>0||!1===_:e.util.schemaHasRules(_,e.RULES.all))){p.schema=_,p.schemaPath=e.schemaPath+".additionalItems",p.errSchemaPath=e.errSchemaPath+"/additionalItems",n+=" "+m+" = true; if ("+u+".length > "+o.length+") {  for (var "+g+" = "+o.length+"; "+g+" < "+u+".length; "+g+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);C=u+"["+g+"]";p.dataPathArr[y]=g;D=e.validate(p);p.baseId=b,e.util.varOccurences(D,v)<2?n+=" "+e.util.varReplace(D,v,C)+" ":n+=" var "+v+" = "+C+"; "+D+" ",l&&(n+=" if (!"+m+") break; "),n+=" } }  ",l&&(n+=" if ("+m+") { ",f+="}")}}else if(e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0||!1===o:e.util.schemaHasRules(o,e.RULES.all)){p.schema=o,p.schemaPath=s,p.errSchemaPath=c,n+="  for (var "+g+" = 0; "+g+" < "+u+".length; "+g+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);C=u+"["+g+"]";p.dataPathArr[y]=g;D=e.validate(p);p.baseId=b,e.util.varOccurences(D,v)<2?n+=" "+e.util.varReplace(D,v,C)+" ":n+=" var "+v+" = "+C+"; "+D+" ",l&&(n+=" if (!"+m+") break; "),n+=" }"}return l&&(n+=" "+f+" if ("+h+" == errors) {"),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,a=" ",i=e.level,o=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),h=e.opts.$data&&s&&s.$data;if(h?(a+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",n="schema"+i):n=s,!h&&"number"!=typeof s)throw new Error(t+" must be number");a+="var division"+i+";if (",h&&(a+=" "+n+" !== undefined && ( typeof "+n+" != 'number' || "),a+=" (division"+i+" = "+d+" / "+n+", ",e.opts.multipleOfPrecision?a+=" Math.abs(Math.round(division"+i+") - division"+i+") > 1e-"+e.opts.multipleOfPrecision+" ":a+=" division"+i+" !== parseInt(division"+i+") ",a+=" ) ",h&&(a+="  )  "),a+=" ) {   ";var p=p||[];p.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { multipleOf: "+n+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be multiple of ",a+=h?"' + "+n:n+"'"),e.opts.verbose&&(a+=" , schema:  ",a+=h?"validate.schema"+c:""+s,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var f=a;return a=p.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+f+"]); ":a+=" validate.errors = ["+f+"]; return false; ":a+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",u&&(a+=" else { "),a}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="errs__"+a,h=e.util.copy(e);h.level++;var p="valid"+h.level;if(e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0||!1===o:e.util.schemaHasRules(o,e.RULES.all)){h.schema=o,h.schemaPath=s,h.errSchemaPath=c,n+=" var "+d+" = errors;  ";var f,m=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.createErrors=!1,h.opts.allErrors&&(f=h.opts.allErrors,h.opts.allErrors=!1),n+=" "+e.validate(h)+" ",h.createErrors=!0,f&&(h.opts.allErrors=f),e.compositeRule=h.compositeRule=m,n+=" if ("+p+") {   ";var g=g||[];g.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var y=n;n=g.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } ")}else n+="  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(n+=" if (false) { ");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+a,h="errs__"+a,p=e.util.copy(e),f="";p.level++;var m="valid"+p.level,g=p.baseId,y="prevValid"+a,v="passingSchemas"+a;n+="var "+h+" = errors , "+y+" = false , "+d+" = false , "+v+" = null; ";var b=e.compositeRule;e.compositeRule=p.compositeRule=!0;var _=o;if(_)for(var w,x=-1,k=_.length-1;x<k;)w=_[x+=1],(e.opts.strictKeywords?"object"==typeof w&&Object.keys(w).length>0||!1===w:e.util.schemaHasRules(w,e.RULES.all))?(p.schema=w,p.schemaPath=s+"["+x+"]",p.errSchemaPath=c+"/"+x,n+="  "+e.validate(p)+" ",p.baseId=g):n+=" var "+m+" = true; ",x&&(n+=" if ("+m+" && "+y+") { "+d+" = false; "+v+" = ["+v+", "+x+"]; } else { ",f+="}"),n+=" if ("+m+") { "+d+" = "+y+" = true; "+v+" = "+x+"; }";return e.compositeRule=p.compositeRule=b,n+=f+"if (!"+d+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { passingSchemas: "+v+" } ",!1!==e.opts.messages&&(n+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+="} else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }",e.opts.allErrors&&(n+=" } "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,a=" ",i=e.level,o=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),h=e.opts.$data&&s&&s.$data;h?(a+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",n="schema"+i):n=s,a+="if ( ",h&&(a+=" ("+n+" !== undefined && typeof "+n+" != 'string') || "),a+=" !"+(h?"(new RegExp("+n+"))":e.usePattern(s))+".test("+d+") ) {   ";var p=p||[];p.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { pattern:  ",a+=h?""+n:""+e.util.toQuotedString(s),a+="  } ",!1!==e.opts.messages&&(a+=" , message: 'should match pattern \"",a+=h?"' + "+n+" + '":""+e.util.escapeQuotes(s),a+="\"' "),e.opts.verbose&&(a+=" , schema:  ",a+=h?"validate.schema"+c:""+e.util.toQuotedString(s),a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var f=a;return a=p.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+f+"]); ":a+=" validate.errors = ["+f+"]; return false; ":a+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",u&&(a+=" else { "),a}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="errs__"+a,h=e.util.copy(e),p="";h.level++;var f="valid"+h.level,m="key"+a,g="idx"+a,y=h.dataLevel=e.dataLevel+1,v="data"+y,b="dataProperties"+a,_=Object.keys(o||{}).filter(I),w=e.schema.patternProperties||{},x=Object.keys(w).filter(I),k=e.schema.additionalProperties,S=_.length||x.length,E=!1===k,A="object"==typeof k&&Object.keys(k).length,P=e.opts.removeAdditional,C=E||A||P,D=e.opts.ownProperties,T=e.baseId,O=e.schema.required;if(O&&(!e.opts.$data||!O.$data)&&O.length<e.opts.loopRequired)var M=e.util.toHash(O);function I(e){return"__proto__"!==e}if(n+="var "+d+" = errors;var "+f+" = true;",D&&(n+=" var "+b+" = undefined;"),C){if(n+=D?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+g+"=0; "+g+"<"+b+".length; "+g+"++) { var "+m+" = "+b+"["+g+"]; ":" for (var "+m+" in "+u+") { ",S){if(n+=" var isAdditional"+a+" = !(false ",_.length)if(_.length>8)n+=" || validate.schema"+s+".hasOwnProperty("+m+") ";else{var R=_;if(R)for(var F=-1,B=R.length-1;F<B;)Y=R[F+=1],n+=" || "+m+" == "+e.util.toQuotedString(Y)+" "}if(x.length){var j=x;if(j)for(var N=-1,q=j.length-1;N<q;)ie=j[N+=1],n+=" || "+e.usePattern(ie)+".test("+m+") "}n+=" ); if (isAdditional"+a+") { "}if("all"==P)n+=" delete "+u+"["+m+"]; ";else{var L=e.errorPath,U="' + "+m+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers)),E)if(P)n+=" delete "+u+"["+m+"]; ";else{n+=" "+f+" = false; ";var z=c;c=e.errSchemaPath+"/additionalProperties",(re=re||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { additionalProperty: '"+U+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is an invalid additional property":n+="should NOT have additional properties",n+="' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var H=n;n=re.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+H+"]); ":n+=" validate.errors = ["+H+"]; return false; ":n+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=z,l&&(n+=" break; ")}else if(A)if("failing"==P){n+=" var "+d+" = errors;  ";var $=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=k,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var G=u+"["+m+"]";h.dataPathArr[y]=m;var K=e.validate(h);h.baseId=T,e.util.varOccurences(K,v)<2?n+=" "+e.util.varReplace(K,v,G)+" ":n+=" var "+v+" = "+G+"; "+K+" ",n+=" if (!"+f+") { errors = "+d+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+u+"["+m+"]; }  ",e.compositeRule=h.compositeRule=$}else{h.schema=k,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);G=u+"["+m+"]";h.dataPathArr[y]=m;K=e.validate(h);h.baseId=T,e.util.varOccurences(K,v)<2?n+=" "+e.util.varReplace(K,v,G)+" ":n+=" var "+v+" = "+G+"; "+K+" ",l&&(n+=" if (!"+f+") break; ")}e.errorPath=L}S&&(n+=" } "),n+=" }  ",l&&(n+=" if ("+f+") { ",p+="}")}var V=e.opts.useDefaults&&!e.compositeRule;if(_.length){var W=_;if(W)for(var Y,J=-1,Q=W.length-1;J<Q;){var X=o[Y=W[J+=1]];if(e.opts.strictKeywords?"object"==typeof X&&Object.keys(X).length>0||!1===X:e.util.schemaHasRules(X,e.RULES.all)){var Z=e.util.getProperty(Y),ee=(G=u+Z,V&&void 0!==X.default);h.schema=X,h.schemaPath=s+Z,h.errSchemaPath=c+"/"+e.util.escapeFragment(Y),h.errorPath=e.util.getPath(e.errorPath,Y,e.opts.jsonPointers),h.dataPathArr[y]=e.util.toQuotedString(Y);K=e.validate(h);if(h.baseId=T,e.util.varOccurences(K,v)<2){K=e.util.varReplace(K,v,G);var te=G}else{te=v;n+=" var "+v+" = "+G+"; "}if(ee)n+=" "+K+" ";else{if(M&&M[Y]){n+=" if ( "+te+" === undefined ",D&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(Y)+"') "),n+=") { "+f+" = false; ";L=e.errorPath,z=c;var re,ne=e.util.escapeQuotes(Y);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(L,Y,e.opts.jsonPointers)),c=e.errSchemaPath+"/required",(re=re||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+ne+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+ne+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";H=n;n=re.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+H+"]); ":n+=" validate.errors = ["+H+"]; return false; ":n+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=z,e.errorPath=L,n+=" } else { "}else l?(n+=" if ( "+te+" === undefined ",D&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(Y)+"') "),n+=") { "+f+" = true; } else { "):(n+=" if ("+te+" !== undefined ",D&&(n+=" &&   Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(Y)+"') "),n+=" ) { ");n+=" "+K+" } "}}l&&(n+=" if ("+f+") { ",p+="}")}}if(x.length){var ae=x;if(ae)for(var ie,oe=-1,se=ae.length-1;oe<se;){X=w[ie=ae[oe+=1]];if(e.opts.strictKeywords?"object"==typeof X&&Object.keys(X).length>0||!1===X:e.util.schemaHasRules(X,e.RULES.all)){h.schema=X,h.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(ie),h.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(ie),n+=D?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+g+"=0; "+g+"<"+b+".length; "+g+"++) { var "+m+" = "+b+"["+g+"]; ":" for (var "+m+" in "+u+") { ",n+=" if ("+e.usePattern(ie)+".test("+m+")) { ",h.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);G=u+"["+m+"]";h.dataPathArr[y]=m;K=e.validate(h);h.baseId=T,e.util.varOccurences(K,v)<2?n+=" "+e.util.varReplace(K,v,G)+" ":n+=" var "+v+" = "+G+"; "+K+" ",l&&(n+=" if (!"+f+") break; "),n+=" } ",l&&(n+=" else "+f+" = true; "),n+=" }  ",l&&(n+=" if ("+f+") { ",p+="}")}}}return l&&(n+=" "+p+" if ("+d+" == errors) {"),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="errs__"+a,h=e.util.copy(e);h.level++;var p="valid"+h.level;if(n+="var "+d+" = errors;",e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0||!1===o:e.util.schemaHasRules(o,e.RULES.all)){h.schema=o,h.schemaPath=s,h.errSchemaPath=c;var f="key"+a,m="idx"+a,g="i"+a,y="' + "+f+" + '",v="data"+(h.dataLevel=e.dataLevel+1),b="dataProperties"+a,_=e.opts.ownProperties,w=e.baseId;_&&(n+=" var "+b+" = undefined; "),n+=_?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+m+"=0; "+m+"<"+b+".length; "+m+"++) { var "+f+" = "+b+"["+m+"]; ":" for (var "+f+" in "+u+") { ",n+=" var startErrs"+a+" = errors; ";var x=f,k=e.compositeRule;e.compositeRule=h.compositeRule=!0;var S=e.validate(h);h.baseId=w,e.util.varOccurences(S,v)<2?n+=" "+e.util.varReplace(S,v,x)+" ":n+=" var "+v+" = "+x+"; "+S+" ",e.compositeRule=h.compositeRule=k,n+=" if (!"+p+") { for (var "+g+"=startErrs"+a+"; "+g+"<errors; "+g+"++) { vErrors["+g+"].propertyName = "+f+"; }   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { propertyName: '"+y+"' } ",!1!==e.opts.messages&&(n+=" , message: 'property name \\'"+y+"\\' is invalid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),l&&(n+=" break; "),n+=" } }"}return l&&(n+="  if ("+d+" == errors) {"),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+a,h=e.opts.$data&&o&&o.$data;h&&(n+=" var schema"+a+" = "+e.util.getData(o.$data,i,e.dataPathArr)+"; ");var p="schema"+a;if(!h)if(o.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var f=[],m=o;if(m)for(var g,y=-1,v=m.length-1;y<v;){g=m[y+=1];var b=e.schema.properties[g];b&&(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0||!1===b:e.util.schemaHasRules(b,e.RULES.all))||(f[f.length]=g)}}else f=o;if(h||f.length){var _=e.errorPath,w=h||f.length>=e.opts.loopRequired,x=e.opts.ownProperties;if(l)if(n+=" var missing"+a+"; ",w){h||(n+=" var "+p+" = validate.schema"+s+"; ");var k="' + "+(D="schema"+a+"["+(A="i"+a)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(_,D,e.opts.jsonPointers)),n+=" var "+d+" = true; ",h&&(n+=" if (schema"+a+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+a+")) "+d+" = false; else {"),n+=" for (var "+A+" = 0; "+A+" < "+p+".length; "+A+"++) { "+d+" = "+u+"["+p+"["+A+"]] !== undefined ",x&&(n+=" &&   Object.prototype.hasOwnProperty.call("+u+", "+p+"["+A+"]) "),n+="; if (!"+d+") break; } ",h&&(n+="  }  "),n+="  if (!"+d+") {   ",(C=C||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+k+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var S=n;n=C.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+S+"]); ":n+=" validate.errors = ["+S+"]; return false; ":n+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else{n+=" if ( ";var E=f;if(E)for(var A=-1,P=E.length-1;A<P;){O=E[A+=1],A&&(n+=" || "),n+=" ( ( "+(F=u+(R=e.util.getProperty(O)))+" === undefined ",x&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(O)+"') "),n+=") && (missing"+a+" = "+e.util.toQuotedString(e.opts.jsonPointers?O:R)+") ) "}n+=") {  ";var C;k="' + "+(D="missing"+a)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(_,D,!0):_+" + "+D),(C=C||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+k+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";S=n;n=C.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+S+"]); ":n+=" validate.errors = ["+S+"]; return false; ":n+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else if(w){h||(n+=" var "+p+" = validate.schema"+s+"; ");var D;k="' + "+(D="schema"+a+"["+(A="i"+a)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(_,D,e.opts.jsonPointers)),h&&(n+=" if ("+p+" && !Array.isArray("+p+")) {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+k+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+p+" !== undefined) { "),n+=" for (var "+A+" = 0; "+A+" < "+p+".length; "+A+"++) { if ("+u+"["+p+"["+A+"]] === undefined ",x&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", "+p+"["+A+"]) "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+k+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",h&&(n+="  }  ")}else{var T=f;if(T)for(var O,M=-1,I=T.length-1;M<I;){O=T[M+=1];var R=e.util.getProperty(O),F=(k=e.util.escapeQuotes(O),u+R);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(_,O,e.opts.jsonPointers)),n+=" if ( "+F+" === undefined ",x&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(O)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+k+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=_}else l&&(n+=" if (true) {");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,a=" ",i=e.level,o=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),h="valid"+i,p=e.opts.$data&&s&&s.$data;if(p?(a+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",n="schema"+i):n=s,(s||p)&&!1!==e.opts.uniqueItems){p&&(a+=" var "+h+"; if ("+n+" === false || "+n+" === undefined) "+h+" = true; else if (typeof "+n+" != 'boolean') "+h+" = false; else { "),a+=" var i = "+d+".length , "+h+" = true , j; if (i > 1) { ";var f=e.schema.items&&e.schema.items.type,m=Array.isArray(f);if(!f||"object"==f||"array"==f||m&&(f.indexOf("object")>=0||f.indexOf("array")>=0))a+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+d+"[i], "+d+"[j])) { "+h+" = false; break outer; } } } ";else{a+=" var itemIndices = {}, item; for (;i--;) { var item = "+d+"[i]; ";var g="checkDataType"+(m?"s":"");a+=" if ("+e.util[g](f,"item",e.opts.strictNumbers,!0)+") continue; ",m&&(a+=" if (typeof item == 'string') item = '\"' + item; "),a+=" if (typeof itemIndices[item] == 'number') { "+h+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}a+=" } ",p&&(a+="  }  "),a+=" if (!"+h+") {   ";var y=y||[];y.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(a+=" , schema:  ",a+=p?"validate.schema"+c:""+s,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var v=a;a=y.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+v+"]); ":a+=" validate.errors = ["+v+"]; return false; ":a+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",u&&(a+=" else { ")}else u&&(a+=" if (true) { ");return a}},function(e,t,r){"use strict";var n=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];e.exports=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var a,i=t[r].split("/"),o=e;for(a=1;a<i.length;a++)o=o[i[a]];for(a=0;a<n.length;a++){var s=n[a],c=o[s];c&&(o[s]={anyOf:[c,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e}},function(e,t,r){"use strict";var n=r(194).MissingRef;e.exports=function e(t,r,a){var i=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(a=r,r=void 0);var o=s(t).then((function(){var e=i._addSchema(t,void 0,r);return e.validate||function e(t){try{return i._compile(t)}catch(e){if(e instanceof n)return a(e);throw e}function a(n){var a=n.missingSchema;if(l(a))throw new Error("Schema "+a+" is loaded but "+n.missingRef+" cannot be resolved");var o=i._loadingSchemas[a];return o||(o=i._loadingSchemas[a]=i._opts.loadSchema(a)).then(c,c),o.then((function(e){if(!l(a))return s(e).then((function(){l(a)||i.addSchema(e,a,void 0,r)}))})).then((function(){return e(t)}));function c(){delete i._loadingSchemas[a]}function l(e){return i._refs[e]||i._schemas[e]}}}(e)}));a&&o.then((function(e){a(null,e)}),a);return o;function s(t){var r=t.$schema;return r&&!i.getSchema(r)?e.call(i,{$ref:r},!0):Promise.resolve()}}},function(e,t,r){"use strict";var n=/^[a-z_$][a-z0-9_$-]*$/i,a=r(941),i=r(942);e.exports={add:function(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!n.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var i=t.type;if(Array.isArray(i))for(var o=0;o<i.length;o++)c(e,i[o],t);else c(e,i,t);var s=t.metaSchema;s&&(t.$data&&this._opts.$data&&(s={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(s,!0))}function c(e,t,n){for(var i,o=0;o<r.length;o++){var s=r[o];if(s.type==t){i=s;break}}i||(i={type:t,rules:[]},r.push(i));var c={keyword:e,definition:n,custom:!0,code:a,implements:n.implements};i.rules.push(c),r.custom[e]=c}return r.keywords[e]=r.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var n=t[r].rules,a=0;a<n.length;a++)if(n[a].keyword==e){n.splice(a,1);break}return this},validate:function e(t,r){e.errors=null;var n=this._validateKeyword=this._validateKeyword||this.compile(i,!0);if(n(t))return!0;if(e.errors=n.errors,r)throw new Error("custom keyword definition is invalid: "+this.errorsText(n.errors));return!1}}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,a,i=" ",o=e.level,s=e.dataLevel,c=e.schema[t],l=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,h="data"+(s||""),p="valid"+o,f="errs__"+o,m=e.opts.$data&&c&&c.$data;m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,s,e.dataPathArr)+"; ",a="schema"+o):a=c;var g,y,v,b,_,w="definition"+o,x=this.definition,k="";if(m&&x.$data){_="keywordValidate"+o;var S=x.validateSchema;i+=" var "+w+" = RULES.custom['"+t+"'].definition; var "+_+" = "+w+".validate;"}else{if(!(b=e.useCustomRule(this,c,e.schema,e)))return;a="validate.schema"+l,_=b.code,g=x.compile,y=x.inline,v=x.macro}var E=_+".errors",A="i"+o,P="ruleErr"+o,C=x.async;if(C&&!e.async)throw new Error("async keyword in sync schema");if(y||v||(i+=E+" = null;"),i+="var "+f+" = errors;var "+p+";",m&&x.$data&&(k+="}",i+=" if ("+a+" === undefined) { "+p+" = true; } else { ",S&&(k+="}",i+=" "+p+" = "+w+".validateSchema("+a+"); if ("+p+") { ")),y)x.statements?i+=" "+b.validate+" ":i+=" "+p+" = "+b.validate+"; ";else if(v){var D=e.util.copy(e);k="";D.level++;var T="valid"+D.level;D.schema=b.validate,D.schemaPath="";var O=e.compositeRule;e.compositeRule=D.compositeRule=!0;var M=e.validate(D).replace(/validate\.schema/g,_);e.compositeRule=D.compositeRule=O,i+=" "+M}else{(B=B||[]).push(i),i="",i+="  "+_+".call( ",e.opts.passContext?i+="this":i+="self",g||!1===x.schema?i+=" , "+h+" ":i+=" , "+a+" , "+h+" , validate.schema"+e.schemaPath+" ",i+=" , (dataPath || '')",'""'!=e.errorPath&&(i+=" + "+e.errorPath);var I=s?"data"+(s-1||""):"parentData",R=s?e.dataPathArr[s]:"parentDataProperty",F=i+=" , "+I+" , "+R+" , rootData )  ";i=B.pop(),!1===x.errors?(i+=" "+p+" = ",C&&(i+="await "),i+=F+"; "):i+=C?" var "+(E="customErrors"+o)+" = null; try { "+p+" = await "+F+"; } catch (e) { "+p+" = false; if (e instanceof ValidationError) "+E+" = e.errors; else throw e; } ":" "+E+" = null; "+p+" = "+F+"; "}if(x.modifying&&(i+=" if ("+I+") "+h+" = "+I+"["+R+"];"),i+=""+k,x.valid)d&&(i+=" if (true) { ");else{var B;i+=" if ( ",void 0===x.valid?(i+=" !",i+=v?""+T:""+p):i+=" "+!x.valid+" ",i+=") { ",n=this.keyword,(B=B||[]).push(i),i="",(B=B||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var j=i;i=B.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+j+"]); ":i+=" validate.errors = ["+j+"]; return false; ":i+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var N=i;i=B.pop(),y?x.errors?"full"!=x.errors&&(i+="  for (var "+A+"="+f+"; "+A+"<errors; "+A+"++) { var "+P+" = vErrors["+A+"]; if ("+P+".dataPath === undefined) "+P+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+P+".schemaPath === undefined) { "+P+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(i+=" "+P+".schema = "+a+"; "+P+".data = "+h+"; "),i+=" } "):!1===x.errors?i+=" "+N+" ":(i+=" if ("+f+" == errors) { "+N+" } else {  for (var "+A+"="+f+"; "+A+"<errors; "+A+"++) { var "+P+" = vErrors["+A+"]; if ("+P+".dataPath === undefined) "+P+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+P+".schemaPath === undefined) { "+P+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(i+=" "+P+".schema = "+a+"; "+P+".data = "+h+"; "),i+=" } } "):v?(i+="   var err =   ",!1!==e.createErrors?(i+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; ")):!1===x.errors?i+=" "+N+" ":(i+=" if (Array.isArray("+E+")) { if (vErrors === null) vErrors = "+E+"; else vErrors = vErrors.concat("+E+"); errors = vErrors.length;  for (var "+A+"="+f+"; "+A+"<errors; "+A+"++) { var "+P+" = vErrors["+A+"]; if ("+P+".dataPath === undefined) "+P+".dataPath = (dataPath || '') + "+e.errorPath+";  "+P+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(i+=" "+P+".schema = "+a+"; "+P+".data = "+h+"; "),i+=" } } else { "+N+" } "),i+=" } ",d&&(i+=" else { ")}return i}},function(e,t,r){"use strict";var n=r(413);e.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:n.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:n.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON Schema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},function(e,t,r){"use strict";var n=r(945);function a(e,t){if(Array.isArray(t)){for(var r=0;r<t.length;r++)i(t[r])(e);return e}if(t)return i(t)(e),e;for(t in n)i(t)(e);return e}function i(e){var t=n[e];if(!t)throw new Error("Unknown keyword "+e);return t}e.exports=a,a.get=i},function(e,t,r){"use strict";e.exports={instanceof:r(946),range:r(947),regexp:r(948),typeof:r(949),dynamicDefaults:r(950),allRequired:r(951),anyRequired:r(952),oneRequired:r(953),prohibited:r(954),uniqueItemProperties:r(955),deepProperties:r(956),deepRequired:r(957),formatMinimum:r(958),formatMaximum:r(960),patternRequired:r(961),switch:r(963),select:r(965),transform:r(966)}},function(e,t,r){"use strict";(function(t){var r={Object:Object,Array:Array,Function:Function,Number:Number,String:String,Date:Date,RegExp:RegExp};e.exports=function e(n){return void 0!==t&&(r.Buffer=t),"undefined"!=typeof Promise&&(r.Promise=Promise),e.definition={compile:function(e){if("string"==typeof e){var t=a(e);return function(e){return e instanceof t}}var r=e.map(a);return function(e){for(var t=0;t<r.length;t++)if(e instanceof r[t])return!0;return!1}},CONSTRUCTORS:r,metaSchema:{anyOf:[{type:"string"},{type:"array",items:{type:"string"}}]}},n.addKeyword("instanceof",e.definition),n;function a(e){var t=r[e];if(t)return t;throw new Error('invalid "instanceof" keyword value '+e)}}}).call(this,r(4).Buffer)},function(e,t,r){"use strict";e.exports=function e(t){return e.definition={type:"number",macro:function(e,t){var r=e[0],n=e[1],a=t.exclusiveRange;return function(e,t,r){if(void 0!==r&&"boolean"!=typeof r)throw new Error("Invalid schema for exclusiveRange keyword, should be boolean");if(e>t||r&&e==t)throw new Error("There are no numbers in range")}(r,n,a),!0===a?{exclusiveMinimum:r,exclusiveMaximum:n}:{minimum:r,maximum:n}},metaSchema:{type:"array",minItems:2,maxItems:2,items:{type:"number"}}},t.addKeyword("range",e.definition),t.addKeyword("exclusiveRange"),t}},function(e,t,r){"use strict";e.exports=function e(t){return e.definition={type:"string",inline:function(e,t,r){return function(){try{if("object"==typeof r)return new RegExp(r.pattern,r.flags);var e=r.match(/^\/(.*)\/([gimuy]*)$/);if(e)return new RegExp(e[1],e[2]);throw new Error("cannot parse string into RegExp")}catch(e){throw console.error("regular expression",r,"is invalid"),e}}()+".test(data"+(e.dataLevel||"")+")"},metaSchema:{type:["string","object"],properties:{pattern:{type:"string"},flags:{type:"string"}},required:["pattern"],additionalProperties:!1}},t.addKeyword("regexp",e.definition),t}},function(e,t,r){"use strict";var n=["undefined","string","number","object","function","boolean","symbol"];e.exports=function e(t){return e.definition={inline:function(e,t,r){var n="data"+(e.dataLevel||"");return"string"==typeof r?"typeof "+n+' == "'+r+'"':(r="validate.schema"+e.schemaPath+"."+t)+".indexOf(typeof "+n+") >= 0"},metaSchema:{anyOf:[{type:"string",enum:n},{type:"array",items:{type:"string",enum:n}}]}},t.addKeyword("typeof",e.definition),t}},function(e,t,r){"use strict";var n={},a={timestamp:function(){return Date.now()},datetime:function(){return(new Date).toISOString()},date:function(){return(new Date).toISOString().slice(0,10)},time:function(){return(new Date).toISOString().slice(11)},random:function(){return Math.random()},randomint:function(e){var t=e&&e.max||2;return function(){return Math.floor(Math.random()*t)}},seq:function(e){var t=e&&e.name||"";return n[t]=n[t]||0,function(){return n[t]++}}};e.exports=function e(t){return e.definition={compile:function(e,t,n){var a={};for(var i in e){var o=e[i],s=r("string"==typeof o?o:o.func);a[i]=s.length?s(o.args):s}return n.opts.useDefaults&&!n.compositeRule?function(t){for(var r in e)void 0!==t[r]&&("empty"!=n.opts.useDefaults||null!==t[r]&&""!==t[r])||(t[r]=a[r]());return!0}:function(){return!0}},DEFAULTS:a,metaSchema:{type:"object",additionalProperties:{type:["string","object"],additionalProperties:!1,required:["func","args"],properties:{func:{type:"string"},args:{type:"object"}}}}},t.addKeyword("dynamicDefaults",e.definition),t;function r(e){var t=a[e];if(t)return t;throw new Error('invalid "dynamicDefaults" keyword property value: '+e)}}},function(e,t,r){"use strict";e.exports=function e(t){return e.definition={type:"object",macro:function(e,t){if(!e)return!0;var r=Object.keys(t.properties);return 0==r.length||{required:r}},metaSchema:{type:"boolean"},dependencies:["properties"]},t.addKeyword("allRequired",e.definition),t}},function(e,t,r){"use strict";e.exports=function e(t){return e.definition={type:"object",macro:function(e){return 0==e.length||(1==e.length?{required:e}:{anyOf:e.map((function(e){return{required:[e]}}))})},metaSchema:{type:"array",items:{type:"string"}}},t.addKeyword("anyRequired",e.definition),t}},function(e,t,r){"use strict";e.exports=function e(t){return e.definition={type:"object",macro:function(e){return 0==e.length||(1==e.length?{required:e}:{oneOf:e.map((function(e){return{required:[e]}}))})},metaSchema:{type:"array",items:{type:"string"}}},t.addKeyword("oneRequired",e.definition),t}},function(e,t,r){"use strict";e.exports=function e(t){return e.definition={type:"object",macro:function(e){return 0==e.length||(1==e.length?{not:{required:e}}:{not:{anyOf:e.map((function(e){return{required:[e]}}))}})},metaSchema:{type:"array",items:{type:"string"}}},t.addKeyword("prohibited",e.definition),t}},function(e,t,r){"use strict";var n=["number","integer","string","boolean","null"];e.exports=function e(t){return e.definition={type:"array",compile:function(e,t,r){var a=r.util.equal,i=function(e,t){return e.map((function(e){var r=t.items&&t.items.properties,a=r&&r[e]&&r[e].type;return Array.isArray(a)?a.indexOf("object")<0&&a.indexOf("array")<0:n.indexOf(a)>=0}))}(e,t);return function(t){if(t.length>1)for(var r=0;r<e.length;r++){var n,o=e[r];if(i[r]){var s={};for(n=t.length;n--;)if(t[n]&&"object"==typeof t[n]){var c=t[n][o];if(!c||"object"!=typeof c){if("string"==typeof c&&(c='"'+c),s[c])return!1;s[c]=!0}}}else for(n=t.length;n--;)if(t[n]&&"object"==typeof t[n])for(var l=n;l--;)if(t[l]&&"object"==typeof t[l]&&a(t[n][o],t[l][o]))return!1}return!0}},metaSchema:{type:"array",items:{type:"string"}}},t.addKeyword("uniqueItemProperties",e.definition),t}},function(e,t,r){"use strict";var n=r(195);function a(e,t){for(var r=e.split("/"),n={},a=n,i=1;i<r.length;i++){var o=r[i],s=i==r.length-1;o=o.replace(/~1/g,"/").replace(/~0/g,"~");var c=a.properties={},l=void 0;if(/[0-9]+/.test(o)){var u=+o;for(l=a.items=[];u--;)l.push({})}a=s?t:{},c[o]=a,l&&l.push(a)}return n}e.exports=function e(t){return e.definition={type:"object",macro:function(e){var t=[];for(var r in e)t.push(a(r,e[r]));return{allOf:t}},metaSchema:{type:"object",propertyNames:{type:"string",format:"json-pointer"},additionalProperties:n.metaSchemaRef(t)}},t.addKeyword("deepProperties",e.definition),t}},function(e,t,r){"use strict";function n(e,t){var r="data"+(t||"");if(!e)return r;for(var n,s=r,c=e.split("/"),l=1;l<c.length;l++){var u=c[l];s+=" && "+(r+=(n=u.replace(/~1/g,"/").replace(/~0/g,"~"),i.test(n)?"["+n+"]":a.test(n)?"."+n:"['"+n.replace(o,"\\$&")+"']"))}return s}e.exports=function e(t){return e.definition={type:"object",inline:function(e,t,r){for(var a="",i=0;i<r.length;i++)i&&(a+=" && "),a+="("+n(r[i],e.dataLevel)+" !== undefined)";return a},metaSchema:{type:"array",items:{type:"string",format:"json-pointer"}}},t.addKeyword("deepRequired",e.definition),t};var a=/^[a-z$_][a-z$_0-9]*$/i,i=/^[0-9]+$/,o=/'|\\/g},function(e,t,r){"use strict";e.exports=r(414)("Minimum")},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+a;if(n+="var "+d+" = undefined;",!1===e.opts.format)return n+=" "+d+" = true; ";var h=e.schema.format,p=e.opts.$data&&h.$data,f="";if(p){n+=" var "+(m="format"+a)+" = formats["+e.util.getData(h.$data,i,e.dataPathArr)+"] , "+(g="compare"+a)+" = "+m+" && "+m+".compare;"}else{var m;if(!(m=e.formats[h])||!m.compare)return n+="  "+d+" = true; ";var g="formats"+e.util.getProperty(h)+".compare"}var y,v="formatMaximum"==t,b="formatExclusive"+(v?"Maximum":"Minimum"),_=e.schema[b],w=e.opts.$data&&_&&_.$data,x=v?"<":">",k="result"+a,S=e.opts.$data&&o&&o.$data;if(S?(n+=" var schema"+a+" = "+e.util.getData(o.$data,i,e.dataPathArr)+"; ",y="schema"+a):y=o,w){var E=e.util.getData(_.$data,i,e.dataPathArr),A="exclusive"+a,P="' + "+(T="op"+a)+" + '";n+=" var schemaExcl"+a+" = "+E+"; ",n+=" if (typeof "+(E="schemaExcl"+a)+" != 'boolean' && "+E+" !== undefined) { "+d+" = false; ";var C=b;(O=O||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(C||"_formatExclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: '"+b+" should be boolean' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var D=n;n=O.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+D+"]); ":n+=" validate.errors = ["+D+"]; return false; ":n+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }  ",l&&(f+="}",n+=" else { "),S&&(n+=" if ("+y+" === undefined) "+d+" = true; else if (typeof "+y+" != 'string') "+d+" = false; else { ",f+="}"),p&&(n+=" if (!"+g+") "+d+" = true; else { ",f+="}"),n+=" var "+k+" = "+g+"("+u+",  ",n+=S?""+y:""+e.util.toQuotedString(o),n+=" ); if ("+k+" === undefined) "+d+" = false; var "+A+" = "+E+" === true; if ("+d+" === undefined) { "+d+" = "+A+" ? "+k+" "+x+" 0 : "+k+" "+x+"= 0; } if (!"+d+") var op"+a+" = "+A+" ? '"+x+"' : '"+x+"=';"}else{P=x;(A=!0===_)||(P+="=");var T="'"+P+"'";S&&(n+=" if ("+y+" === undefined) "+d+" = true; else if (typeof "+y+" != 'string') "+d+" = false; else { ",f+="}"),p&&(n+=" if (!"+g+") "+d+" = true; else { ",f+="}"),n+=" var "+k+" = "+g+"("+u+",  ",n+=S?""+y:""+e.util.toQuotedString(o),n+=" ); if ("+k+" === undefined) "+d+" = false; if ("+d+" === undefined) "+d+" = "+k+" "+x,A||(n+="="),n+=" 0;"}n+=f+"if (!"+d+") { ";var O;C=t;(O=O||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(C||"_formatLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { comparison: "+T+", limit:  ",n+=S?""+y:""+e.util.toQuotedString(o),n+=" , exclusive: "+A+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be "+P+' "',n+=S?"' + "+y+" + '":""+e.util.escapeQuotes(o),n+="\"' "),e.opts.verbose&&(n+=" , schema:  ",n+=S?"validate.schema"+s:""+e.util.toQuotedString(o),n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";D=n;return n=O.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+D+"]); ":n+=" validate.errors = ["+D+"]; return false; ":n+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="}"}},function(e,t,r){"use strict";e.exports=r(414)("Maximum")},function(e,t,r){"use strict";e.exports=function e(t){return e.definition={type:"object",inline:r(962),statements:!0,errors:"full",metaSchema:{type:"array",items:{type:"string",format:"regex"},uniqueItems:!0}},t.addKeyword("patternRequired",e.definition),t}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+a,h="key"+a,p="idx"+a,f="patternMatched"+a,m="dataProperties"+a,g="",y=e.opts.ownProperties;n+="var "+d+" = true;",y&&(n+=" var "+m+" = undefined;");var v=o;if(v)for(var b,_=-1,w=v.length-1;_<w;){b=v[_+=1],n+=" var "+f+" = false;  ",n+=y?" "+m+" = "+m+" || Object.keys("+u+"); for (var "+p+"=0; "+p+"<"+m+".length; "+p+"++) { var "+h+" = "+m+"["+p+"]; ":" for (var "+h+" in "+u+") { ",n+=" "+f+" = "+e.usePattern(b)+".test("+h+"); if ("+f+") break; } ";var x=e.util.escapeQuotes(b);n+=" if (!"+f+") { "+d+" = false;  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'patternRequired' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingPattern: '"+x+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have property matching pattern \\'"+x+"\\'' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; }   ",l&&(g+="}",n+=" else { ")}return n+=""+g}},function(e,t,r){"use strict";var n=r(195);e.exports=function e(t){if(!t.RULES.keywords.switch||!t.RULES.keywords.if){var a=n.metaSchemaRef(t);return e.definition={inline:r(964),statements:!0,errors:"full",metaSchema:{type:"array",items:{required:["then"],properties:{if:a,then:{anyOf:[{type:"boolean"},a]},continue:{type:"boolean"}},additionalProperties:!1,dependencies:{continue:["if"]}}}},t.addKeyword("switch",e.definition),t}}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",a=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+a,h="errs__"+a,p=e.util.copy(e),f="";p.level++;var m,g="valid"+p.level,y="ifPassed"+e.level,v=p.baseId;n+="var "+y+";";var b=o;if(b)for(var _,w=-1,x=b.length-1;w<x;){if(_=b[w+=1],w&&!m&&(n+=" if (!"+y+") { ",f+="}"),_.if&&(e.opts.strictKeywords?"object"==typeof _.if&&Object.keys(_.if).length>0:e.util.schemaHasRules(_.if,e.RULES.all))){n+=" var "+h+" = errors;   ";var k=e.compositeRule;if(e.compositeRule=p.compositeRule=!0,p.createErrors=!1,p.schema=_.if,p.schemaPath=s+"["+w+"].if",p.errSchemaPath=c+"/"+w+"/if",n+="  "+e.validate(p)+" ",p.baseId=v,p.createErrors=!0,e.compositeRule=p.compositeRule=k,n+=" "+y+" = "+g+"; if ("+y+") {  ","boolean"==typeof _.then){if(!1===_.then){(E=E||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'switch' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { caseIndex: "+w+" } ",!1!==e.opts.messages&&(n+=" , message: 'should pass \"switch\" keyword validation' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var S=n;n=E.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+S+"]); ":n+=" validate.errors = ["+S+"]; return false; ":n+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}n+=" var "+g+" = "+_.then+"; "}else p.schema=_.then,p.schemaPath=s+"["+w+"].then",p.errSchemaPath=c+"/"+w+"/then",n+="  "+e.validate(p)+" ",p.baseId=v;n+="  } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } } "}else if(n+=" "+y+" = true;  ","boolean"==typeof _.then){if(!1===_.then){var E;(E=E||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'switch' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { caseIndex: "+w+" } ",!1!==e.opts.messages&&(n+=" , message: 'should pass \"switch\" keyword validation' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";S=n;n=E.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+S+"]); ":n+=" validate.errors = ["+S+"]; return false; ":n+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}n+=" var "+g+" = "+_.then+"; "}else p.schema=_.then,p.schemaPath=s+"["+w+"].then",p.errSchemaPath=c+"/"+w+"/then",n+="  "+e.validate(p)+" ",p.baseId=v;m=_.continue}return n+=f+"var "+d+" = "+g+";"}},function(e,t,r){"use strict";var n=r(195);e.exports=function e(t){if(!t._opts.$data)return console.warn("keyword select requires $data option"),t;var r=n.metaSchemaRef(t),a=[];return e.definition={validate:function e(t,r,n){if(void 0===n.selectCases)throw new Error('keyword "selectCases" is absent');var a=i(n,!1),o=a.cases[t];if(void 0===o&&(o=a.default),"boolean"==typeof o)return o;var s=o(r);return s||(e.errors=o.errors),s},$data:!0,metaSchema:{type:["string","number","boolean","null"]}},t.addKeyword("select",e.definition),t.addKeyword("selectCases",{compile:function(e,t){var r=i(t);for(var n in e)r.cases[n]=o(e[n]);return function(){return!0}},valid:!0,metaSchema:{type:"object",additionalProperties:r}}),t.addKeyword("selectDefault",{compile:function(e,t){return i(t).default=o(e),function(){return!0}},valid:!0,metaSchema:r}),t;function i(e,t){var r;return a.some((function(t){if(t.parentSchema===e)return r=t,!0})),r||!1===t||(r={parentSchema:e,cases:{},default:!0},a.push(r)),r}function o(e){return"boolean"==typeof e?e:t.compile(e)}}},function(e,t,r){"use strict";e.exports=function e(t){var r={trimLeft:function(e){return e.replace(/^[\s]+/,"")},trimRight:function(e){return e.replace(/[\s]+$/,"")},trim:function(e){return e.trim()},toLowerCase:function(e){return e.toLowerCase()},toUpperCase:function(e){return e.toUpperCase()},toEnumCase:function(e,t){return t.hash[n(e)]||e}};return e.definition={type:"string",errors:!1,modifying:!0,valid:!0,compile:function(e,t){var a;if(-1!==e.indexOf("toEnumCase")){if(a={hash:{}},!t.enum)throw new Error('Missing enum. To use `transform:["toEnumCase"]`, `enum:[...]` is required.');for(var i=t.enum.length;i--;i){var o=t.enum[i];if("string"==typeof o){var s=n(o);if(a.hash[s])throw new Error('Invalid enum uniqueness. To use `transform:["toEnumCase"]`, all values must be unique when case insensitive.');a.hash[s]=o}}}return function(t,n,i,o){if(i){for(var s=0,c=e.length;s<c;s++)t=r[e[s]](t,a);i[o]=t}}},metaSchema:{type:"array",items:{type:"string",enum:["trimLeft","trimRight","trim","toLowerCase","toUpperCase","toEnumCase"]}}},t.addKeyword("transform",e.definition),t;function n(e){return e.toLowerCase()}}},function(e){e.exports=JSON.parse('{"additionalProperties":true,"properties":{"name":{"description":"The filename template for the target file(s) (https://github.com/webpack-contrib/file-loader#name).","anyOf":[{"type":"string"},{"instanceof":"Function"}]},"outputPath":{"description":"A filesystem path where the target file(s) will be placed (https://github.com/webpack-contrib/file-loader#outputpath).","anyOf":[{"type":"string"},{"instanceof":"Function"}]},"publicPath":{"description":"A custom public path for the target file(s) (https://github.com/webpack-contrib/file-loader#publicpath).","anyOf":[{"type":"string"},{"instanceof":"Function"}]},"postTransformPublicPath":{"description":"A custom transformation function for post-processing the publicPath (https://github.com/webpack-contrib/file-loader#posttransformpublicpath).","instanceof":"Function"},"context":{"description":"A custom file context (https://github.com/webpack-contrib/file-loader#context).","type":"string"},"emitFile":{"description":"Enables/Disables emit files (https://github.com/webpack-contrib/file-loader#emitfile).","type":"boolean"},"regExp":{"description":"A Regular Expression to one or many parts of the target file path. The capture groups can be reused in the name property using [N] placeholder (https://github.com/webpack-contrib/file-loader#regexp).","anyOf":[{"type":"string"},{"instanceof":"RegExp"}]},"esModule":{"description":"By default, file-loader generates JS modules that use the ES modules syntax.","type":"boolean"}},"type":"object"}')},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizePath=function(e,t){if("\\"===e||"/"===e)return"/";const r=e.length;if(r<=1)return e;let n="";if(r>4&&"\\"===e[3]){const t=e[2];"?"!==t&&"."!==t||"\\\\"!==e.slice(0,2)||(e=e.slice(2),n="//")}const a=e.split(/[/\\]+/);!1!==t&&""===a[a.length-1]&&a.pop();return n+a.join("/")}},function(e,t,r){(function(t){!function(){var n;n=void 0!==e.exports?r(970):window.PNGlib;var a=function(e,t){if("string"!=typeof e||e.length<15)throw"A hash of at least 15 characters is required.";this.defaults={background:[240,240,240,255],margin:.08,size:64,saturation:.7,brightness:.5,format:"png"},this.options="object"==typeof t?t:this.defaults,"number"==typeof arguments[1]&&(this.options.size=arguments[1]),arguments[2]&&(this.options.margin=arguments[2]),this.hash=e,this.background=this.options.background||this.defaults.background,this.size=this.options.size||this.defaults.size,this.format=this.options.format||this.defaults.format,this.margin=void 0!==this.options.margin?this.options.margin:this.defaults.margin;var r=parseInt(this.hash.substr(-7),16)/268435455,n=this.options.saturation||this.defaults.saturation,a=this.options.brightness||this.defaults.brightness;this.foreground=this.options.foreground||this.hsl2rgb(r,n,a)};a.prototype={background:null,foreground:null,hash:null,margin:null,size:null,format:null,image:function(){return this.isSvg()?new i(this.size,this.foreground,this.background):new n(this.size,this.size,256)},render:function(){var e,t,r=this.image(),n=this.size,a=Math.floor(n*this.margin),i=Math.floor((n-2*a)/5),o=Math.floor((n-5*i)/2),s=r.color.apply(r,this.background),c=r.color.apply(r,this.foreground);for(e=0;e<15;e++)t=parseInt(this.hash.charAt(e),16)%2?s:c,e<5?this.rectangle(2*i+o,e*i+o,i,i,t,r):e<10?(this.rectangle(1*i+o,(e-5)*i+o,i,i,t,r),this.rectangle(3*i+o,(e-5)*i+o,i,i,t,r)):e<15&&(this.rectangle(0*i+o,(e-10)*i+o,i,i,t,r),this.rectangle(4*i+o,(e-10)*i+o,i,i,t,r));return r},rectangle:function(e,t,r,n,a,i){var o,s;if(this.isSvg())i.rectangles.push({x:e,y:t,w:r,h:n,color:a});else for(o=e;o<e+r;o++)for(s=t;s<t+n;s++)i.buffer[i.index(o,s)]=a},hsl2rgb:function(e,t,r){return[255*(t=[r+=t*=r<.5?r:1-r,r-(e*=6)%1*t*2,r-=t*=2,r,r+e%1*t,r+t])[~~e%6],255*t[(16|e)%6],255*t[(8|e)%6]]},toString:function(e){return e?this.render().getDump():this.render().getBase64()},isSvg:function(){return this.format.match(/svg/i)}};var i=function(e,t,r){this.size=e,this.foreground=this.color.apply(this,t),this.background=this.color.apply(this,r),this.rectangles=[]};i.prototype={size:null,foreground:null,background:null,rectangles:null,color:function(e,t,r,n){var a=[e,t,r].map(Math.round);return a.push(n>=0&&n<=255?n/255:1),"rgba("+a.join(",")+")"},getDump:function(){var e,t,r,n=this.foreground,a=this.background,i=.005*this.size;for(t="<svg xmlns='http://www.w3.org/2000/svg' width='"+this.size+"' height='"+this.size+"' style='background-color:"+a+";'><g style='fill:"+n+"; stroke:"+n+"; stroke-width:"+i+";'>",e=0;e<this.rectangles.length;e++)(r=this.rectangles[e]).color!=a&&(t+="<rect  x='"+r.x+"' y='"+r.y+"' width='"+r.w+"' height='"+r.h+"'/>");return t+="</g></svg>"},getBase64:function(){if("function"==typeof btoa)return btoa(this.getDump());if(t)return new t(this.getDump(),"binary").toString("base64");throw"Cannot generate base64 output"}},void 0!==e.exports?e.exports=a:window.Identicon=a}()}).call(this,r(4).Buffer)},function(e,t,r){
/**
* A handy class to calculate color values.
*
* @version 1.0
* @author Robert Eisele <robert@xarg.org>
* @copyright Copyright (c) 2010, Robert Eisele
* @link http://www.xarg.org/2010/03/generate-client-side-png-files-using-javascript/
* @license http://www.opensource.org/licenses/bsd-license.php BSD License
*
*/
!function(){function t(e,t){for(var r=2;r<arguments.length;r++)for(var n=0;n<arguments[r].length;n++)e[t++]=arguments[r].charAt(n)}function r(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function n(e){return String.fromCharCode(255&e,e>>8&255)}var a=function(e,a,i){this.width=e,this.height=a,this.depth=i,this.pix_size=a*(e+1),this.data_size=2+this.pix_size+5*Math.floor((65534+this.pix_size)/65535)+4,this.ihdr_offs=0,this.ihdr_size=25,this.plte_offs=this.ihdr_offs+this.ihdr_size,this.plte_size=8+3*i+4,this.trns_offs=this.plte_offs+this.plte_size,this.trns_size=8+i+4,this.idat_offs=this.trns_offs+this.trns_size,this.idat_size=8+this.data_size+4,this.iend_offs=this.idat_offs+this.idat_size,this.iend_size=12,this.buffer_size=this.iend_offs+this.iend_size,this.buffer=new Array,this.palette=new Object,this.pindex=0;for(var o=new Array,s=0;s<this.buffer_size;s++)this.buffer[s]="\0";t(this.buffer,this.ihdr_offs,r(this.ihdr_size-12),"IHDR",r(e),r(a),"\b"),t(this.buffer,this.plte_offs,r(this.plte_size-12),"PLTE"),t(this.buffer,this.trns_offs,r(this.trns_size-12),"tRNS"),t(this.buffer,this.idat_offs,r(this.idat_size-12),"IDAT"),t(this.buffer,this.iend_offs,r(this.iend_size-12),"IEND");var c,l=30912;l+=31-l%31,t(this.buffer,this.idat_offs+8,(c=l,String.fromCharCode(c>>8&255,255&c)));for(s=0;(s<<16)-1<this.pix_size;s++){var u,d;s+65535<this.pix_size?(u=65535,d="\0"):(u=this.pix_size-(s<<16)-s,d=""),t(this.buffer,this.idat_offs+8+2+(s<<16)+(s<<2),d,n(u),n(~u))}for(s=0;s<256;s++){for(var h=s,p=0;p<8;p++)h=1&h?-306674912^h>>1&2147483647:h>>1&2147483647;o[s]=h}this.index=function(e,t){var r=t*(this.width+1)+e+1;return this.idat_offs+8+2+5*Math.floor(r/65535+1)+r},this.color=function(e,t,r,n){var a=(((n=n>=0?n:255)<<8|e)<<8|t)<<8|r;if(void 0===this.palette[a]){if(this.pindex==this.depth)return"\0";var i=this.plte_offs+8+3*this.pindex;this.buffer[i+0]=String.fromCharCode(e),this.buffer[i+1]=String.fromCharCode(t),this.buffer[i+2]=String.fromCharCode(r),this.buffer[this.trns_offs+8+this.pindex]=String.fromCharCode(n),this.palette[a]=String.fromCharCode(this.pindex++)}return this.palette[a]},this.getBase64=function(){var e,t,r,n,a,i,o,s=this.getDump(),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=s.length,u=0,d="";do{n=(e=s.charCodeAt(u))>>2,a=(3&e)<<4|(t=s.charCodeAt(u+1))>>4,r=s.charCodeAt(u+2),i=l<u+2?64:(15&t)<<2|r>>6,o=l<u+3?64:63&r,d+=c.charAt(n)+c.charAt(a)+c.charAt(i)+c.charAt(o)}while((u+=3)<l);return d},this.getDump=function(){for(var e=1,n=0,a=5552,i=0;i<this.height;i++)for(var s=-1;s<this.width;s++)n+=e+=this.buffer[this.index(s,i)].charCodeAt(0),0==(a-=1)&&(e%=65521,n%=65521,a=5552);function c(e,n,a){for(var i=-1,s=4;s<a-4;s+=1)i=o[255&(i^e[n+s].charCodeAt(0))]^i>>8&16777215;t(e,n+a-4,r(-1^i))}return e%=65521,n%=65521,t(this.buffer,this.idat_offs+this.idat_size-8,r(n<<16|e)),c(this.buffer,this.ihdr_offs,this.ihdr_size),c(this.buffer,this.plte_offs,this.plte_size),c(this.buffer,this.trns_offs,this.trns_size),c(this.buffer,this.idat_offs,this.idat_size),c(this.buffer,this.iend_offs,this.iend_size),"PNG\r\n\n"+this.buffer.join("")}};void 0!==e.exports?e.exports=a:window.PNGlib=a}()},function(e,t,r){"use strict";function n(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(a,i){var o=e.apply(t,r);function s(e){n(o,a,i,s,c,"next",e)}function c(e){n(o,a,i,s,c,"throw",e)}s(void 0)}))}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r(5),r(24);var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t||{},this.mining_active=!1,this.mining_speed=100,this.mining_timer=null,this.target="",this.difficulty=1}var t,r,n,o;return t=e,(r=[{key:"initialize",value:function(){var e=this;this.app.connection.on("BlockchainNewLongestChainBlock",(function(t){e.stopMining(),e.startMining(t.block_hash,t.difficulty)}))}},{key:"startMining",value:function(e,t){var r=this;this.target=e,this.difficulty=t,this.mining_active&&clearInterval(this.mining_timer),this.mining_active=!0,this.mining_timer=setInterval(a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.mine();case 2:case"end":return e.stop()}}),e)}))),this.mining_speed)}},{key:"stopMining",value:function(){this.mining_active=!1,clearInterval(this.mining_timer)}},{key:"mine",value:(o=a(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.mining_active&&(t=this.app.crypto.generateRandomNumber(),this.app.goldenticket.validate(this.target,t,this.app.wallet.returnPublicKey(),this.difficulty)&&((r=this.app.wallet.createUnsignedTransaction()).msg=this.app.goldenticket.serialize(this.target,t),r.sign(this.app),this.app.mempool.addTransaction(r),console.log("we found a valid golden ticket!"),this.stopMining()));case 1:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})}])&&i(t.prototype,r),n&&i(t,n),e}();e.exports=o},function(e,t){function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.mods=[],this.uimods=[],this.mods_list=r,this.lowest_sync_bid=-1}var t,r,a,s,c;return t=e,(r=[{key:"isModuleActive",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=0;t<this.mods.length;t++)if(1==this.mods[t].browser_active&&e==this.mods[t].name)return 1;return 0}},{key:"returnActiveModule",value:function(){for(var e=0;e<this.mods.length;e++)if(1==this.mods[e].browser_active)return this.mods[e];return null}},{key:"attachEvents",value:function(){for(var e=0;e<this.mods.length;e++)1==this.mods[e].browser_active&&this.mods[e].attachEvents(this.app);return null}},{key:"affixCallbacks",value:function(e,t,r,n,a){if(9!=e.transaction.type)for(var i=0;i<this.mods.length;i++)null!=r.module?1==this.mods[i].shouldAffixCallbackToModule(r.module,e)&&(n.push(this.mods[i].onConfirmation.bind(this.mods[i])),a.push(t)):1==this.mods[i].shouldAffixCallbackToModule("",e)&&(n.push(this.mods[i].onConfirmation.bind(this.mods[i])),a.push(t))}},{key:"handlePeerRequest",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=0;n<this.mods.length;n++)try{this.mods[n].handlePeerRequest(this.app,e,t,r)}catch(e){console.log("handlePeerRequest Unknown Error: \n"+e)}}},{key:"initialize",value:(s=regeneratorRuntime.mark((function e(){var t,r,n,a,i,o,s,c,l,u,d,h=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.app.options&&this.app.options.modules)for(t=0;t<this.app.options.modules.length;t++)if(0==this.app.options.modules[t].active)for(r=0;r<this.mods.length;r++)this.mods[r].name===this.app.options.modules[t].name&&(this.mods.splice(r,1),r=this.mods.length+1);n=0,null==this.app.options.modules?this.app.options.modules=[]:(this.app.options.modules.length,this.mods.length),a=0;case 6:if(!(a<this.mods.length)){e.next=20;break}for(i=0,o=-1,s=0,c=0;c<this.app.options.modules.length;c++)this.mods[a].name==this.app.options.modules[c].name&&(i=1,o=c);if((0==i||0==this.app.options.modules[o].installed)&&(s=1),1!=s){e.next=17;break}return n=1,e.next=16,this.mods[a].installModule(this.app);case 16:-1!=o?(this.app.options.modules[o].installed=1,null==this.app.options.modules[o].version&&this.app.options.modules[o].version,null==this.app.options.modules[o].publisher&&this.app.options.modules[o].publisher,this.app.options.modules[o].active=1):this.app.options.modules.push({name:this.mods[a].name,installed:1,version:"",publisher:"",active:1});case 17:a++,e.next=6;break;case 20:1==n&&this.app.storage.saveOptions();case 21:if(l={},this.mods.forEach((function(e,t){l[e.name]&&(console.log("*****************************************************************"),console.log("***** WARNING: mod ".concat(e.name," is installed more than once! *****")),console.log("*****************************************************************")),l[e.name]=!0})),1==this.app.BROWSER)for(u=0;u<this.uimods.length;u++)this.mods.push(this.uimods[u]);d=0;case 25:if(!(d<this.mods.length)){e.next=31;break}return e.next=28,this.mods[d].initialize(this.app);case 28:d++,e.next=25;break;case 31:if(this.app.connection.on("handshake_complete",(function(e){h.onPeerHandshakeComplete(e)})),this.app.connection.on("connection_dropped",(function(e){h.onConnectionUnstable(e)})),this.app.connection.on("connection_up",(function(e){h.onConnectionStable(e)})),!this.app.BROWSER){e.next=41;break}return e.next=37,this.app.modules.initializeHTML();case 37:return e.next=39,this.app.modules.attachEvents();case 39:return e.next=41,this.app.modules.render();case 41:case"end":return e.stop()}}),e,this)})),c=function(){var e=this,t=arguments;return new Promise((function(r,n){var a=s.apply(e,t);function o(e){i(a,r,n,o,c,"next",e)}function c(e){i(a,r,n,o,c,"throw",e)}o(void 0)}))},function(){return c.apply(this,arguments)})},{key:"render",value:function(){for(var e=0;e<this.mods.length;e++)1==this.mods[e].browser_active&&this.mods[e].render(this.app);return null}},{key:"initializeHTML",value:function(){for(var e=0;e<this.mods.length;e++)1==this.mods[e].browser_active&&this.mods[e].initializeHTML(this.app);return null}},{key:"respondTo",value:function(e){return this.mods.filter((function(t){return null!=t.respondTo(e)}))}},{key:"getRespondTos",value:function(e){var t=[];return this.mods.forEach((function(r){var a=r.respondTo(e);null!=a&&t.push(n(n({},a),{},{modname:r.name}))})),t}},{key:"returnModulesBySubType",value:function(e){var t=[];return this.mods.forEach((function(r){r instanceof e&&t.push(r)})),t}},{key:"returnFirstModulBySubType",value:function(e){for(var t=0;t<this.mods.length;t++)if(this.mods[t]instanceof e)return this.mods[t];return null}},{key:"returnModulesByTypeName",value:function(e){}},{key:"returnFirstModuleByTypeName",value:function(e){for(var t=0;t<this.mods.length;t++)if(this.mods[t].constructor.name===e)return this.mods[t];return null}},{key:"returnFirstRespondTo",value:function(e){for(var t=0;t<this.mods.length;t++)if(this.mods[t].respondTo(e))return this.mods[t].respondTo(e);throw"Module responding to "+e+" not found"}},{key:"onNewBlock",value:function(e,t){for(var r=0;r<this.mods.length;r++)this.mods[r].onNewBlock(e,t)}},{key:"onChainReorganization",value:function(e,t,r,n){for(var a=0;a<this.mods.length;a++)this.mods[a].onChainReorganization(e,t,r,n);return null}},{key:"onPeerHandshakeComplete",value:function(e){for(var t=0;t<this.mods.length;t++)this.mods[t].onPeerHandshakeComplete(this.app,e)}},{key:"onConnectionStable",value:function(e){for(var t=0;t<this.mods.length;t++)this.mods[t].onConnectionStable(this.app,e)}},{key:"onConnectionUnstable",value:function(e){for(var t=0;t<this.mods.length;t++)this.mods[t].onConnectionUnstable(this.app,e)}},{key:"onWalletReset",value:function(){for(var e=0;e<this.mods.length;e++)this.mods[e].onWalletReset()}},{key:"returnModuleBySlug",value:function(e){for(var t=0;t<this.mods.length;t++)if(e===this.mods[t].returnSlug())return this.mods[t];return null}},{key:"returnModule",value:function(e){for(var t=0;t<this.mods.length;t++)if(e===this.mods[t].name)return this.mods[t];return null}},{key:"returnModuleIndex",value:function(e){for(var t=0;t<this.mods.length;t++)if(e===this.mods[t].name.toLowerCase())return t;return-1}},{key:"updateBlockchainSync",value:function(e,t){-1==this.lowest_sync_bid&&(this.lowest_sync_bid=e),(t-=this.lowest_sync_bid-1)<1&&(t=1),(e-=this.lowest_sync_bid-1)<1&&(e=1);var r=100;t>e&&(r=Math.floor(e/t*100));for(var n=0;n<this.mods.length;n++)this.mods[n].updateBlockchainSync(this.app,r);return null}},{key:"webServer",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=0;r<this.mods.length;r++)this.mods[r].webServer(this.app,e,t);return null}}])&&o(t.prototype,r),a&&o(t,a),e}();e.exports=s},function(e,t,r){"use strict";function n(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(a,i){var o=e.apply(t,r);function s(e){n(o,a,i,s,c,"next",e)}function c(e){n(o,a,i,s,c,"throw",e)}s(void 0)}))}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r(24);var o=r(5),s=(r(10),function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t||{},this.mempool={},this.mempool.blocks=[],this.mempool.transactions=[],this.mempool.golden_tickets=[],this.routing_work_needed=BigInt(0),this.routing_work_in_mempool=BigInt(0),this.transaction_size_cap=256e5,this.transaction_size_current=0,this.block_size_cap=1024e6,this.block_size_current=0,this.clearing_active=!1,this.accept_zero_fee_txs=!0,this.processing_active=!1,this.processing_speed=10,this.processing_timer=null,this.bundling_active=!1,this.bundling_speed=1e3,this.bundling_timer=null,this.blocks_hmap=[],this.transactions_hmap=[],this.transactions_inputs_hmap=[],this.downloads={},this.downloads_hmap={},this.downloading_active=0,this.transaction_size_limit=0,this.transaction_size_current=0,this.block_size_limit=0,this.block_size_current=0}var t,r,n,s,c;return t=e,(r=[{key:"addBlock",value:function(e){var t=this;if(null==e)return!1;if(!e.is_valid)return!1;for(var r=e.returnHash(),n=!0,i=0;i<this.mempool.blocks.length;i++)this.mempool.blocks[i].returnHash()==r&&(n=!1);if(!n)return!1;if(this.mempool.blocks.push(e),1!=this.processing_active){this.processing_active=1,this.mempool.blocks.sort((function(e,t){return e.block.id-t.block.id}));try{this.processing_timer=setInterval(a(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.mempool.blocks.length>0)){e.next=7;break}if(0!=t.app.blockchain.indexing_active){e.next=5;break}return r=t.mempool.blocks.shift(),e.next=5,t.app.blockchain.addBlockToBlockchain(r);case 5:e.next=9;break;case 7:t.processing_active=0,clearInterval(t.processing_timer);case 9:case"end":return e.stop()}}),e)}))),this.processing_speed)}catch(e){console.log(e)}}}},{key:"addTransaction",value:function(e){for(var t=0;t<this.mempool.transactions.length;t++)if(this.mempool.transactions[t].transaction.sig===e.transaction.sig)return;this.mempool.transactions.push(e)}},{key:"bundleBlock",value:(c=a(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=this.bundling_active){e.next=3;break}return console.log("ERROR 850293: mempool already bundling a block, not bundling another"),e.abrupt("return");case 3:if(0!=this.mempool.transactions.length){e.next=8;break}if(this.app.network.isPrivateNetwork()){e.next=8;break}if(!this.app.network.isProductionNetwork()){e.next=8;break}return console.log("WARNING 582034: refusing to spam public network with no-tx blocks."),e.abrupt("return");case 8:return this.bundling_active=!0,e.prev=9,t=new o.block(this.app),r=this.app.blockring.returnLatestBlockHash(),e.next=14,t.generate(r,this.app.mempool);case 14:this.addBlock(t),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(9),console.log("ERROR 781029: unexpected problem bundling block in mempool: "+e.t0);case 20:this.bundling_active=!1;case 21:case"end":return e.stop()}}),e,this,[[9,17]])}))),function(){return c.apply(this,arguments)})},{key:"canBundleBlock",value:function(){if(0==this.app.mempool.mempool.transactions.length)return console.log("CANNOT PRODUCE AS MEMPOOL PROCESSING ACTIVE"),!1;if(1==this.app.mempool.processing_active)return console.log("CANNOT PRODUCE AS MEMPOOL PROCESSING ACTIVE"),!1;if(1==this.app.mempool.clearing_active)return console.log("CANNOT PRODUCE AS MEMPOOL CLEARING ACTIVE"),!1;if(this.mempool.blocks.length>!0)return console.log("CANNOT PRODUCE AS MEMPOOL BLOCKS WAITING FOR PROCESSING"),!1;if(1==this.app.mempool.bundling_active)return console.log("CANNOT PRODUCE AS MEMPOOL BUNDLING ACTIVE"),!1;if(0==this.mempool.transactions.length&&this.app.blockchain.last_bid>1)return console.log("CANNOT PRODUCE AS MEMPOLL HAS NO TXS AND LAST_BID > 1"),!1;if(1==this.app.blockchain.indexing_active)return console.log("CANNOT PRODUCE AS BLOCKCHAIN ACTIVELY INDEXING BLOCK"),!1;if(1==this.app.blockchain.loading_blocks_from_disk_active)return console.log("CANNOT PRODUCE AS BLOCKCHAIN LOADING FROM DISK"),!1;if(1==this.app.network.downloading_active)return console.log("CANNOT PRODUCE AS NETWORK DOWNLOADING BLOCKS"),!1;if(this.app.options){if(this.app.options.wallet&&"number"==typeof this.app.options.wallet.bundleBlocks&&0==this.app.options.wallet.bundleBlocks)return!1;if(this.app.options.peers&&this.app.options.peers.length>0&&0==this.app.blockchain.index.blocks.length)return console.log("ERROR: 502843: REFUSING TO SELF-GENERATE BLOCK #1 on PEER CHAIN..."),!1}var e=this.app.blockchain.returnLatestBlock();return this.routing_work_needed=null!=e?this.app.burnfee.returnRoutingWorkNeededToProduceBlockInNolan(e.block.burnfee,(new Date).getTime(),e.block.timestamp):BigInt(0),this.routing_work_in_mempool=this.returnRoutingWorkAvailable(),console.log("Total Work Needed: "+this.routing_work_needed.toString()+" ---- available ---\x3e "+this.routing_work_in_mempool.toString()+"     ("+this.app.wallet.returnBalance()+")"),this.routing_work_in_mempool>=this.routing_work_needed?1:0}},{key:"containsBlock",value:function(e){return null==e||null==e.block||0==e.is_valid?0:1==this.blocks_hmap[e.block.sig]}},{key:"containsTransaction",value:function(e){if(null==e)return 0;if(null==e.transaction)return 0;if(null==e.transaction.from)return 0;if(1==this.transactions_hmap[e.transaction.sig])return!0;for(var t=0;t<e.transaction.from.length;t++)if(e.transaction.from[t].isNonZeroAmount()){var r=e.transaction.from[t].returnKey();if(1==this.transactions_inputs_hmap[r])return!0}return!1}},{key:"containsGoldenTicket",value:function(){return this.mempool.goldentickets.length>0}},{key:"initialize",value:(s=a(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=this.app.BROWSER){e.next=2;break}return e.abrupt("return");case 2:if(1!=this.app.SPVMODE){e.next=4;break}return e.abrupt("return");case 4:try{this.bundling_timer=setInterval(a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.canBundleBlock()){e.next=3;break}return e.next=3,t.bundleBlock();case 3:case"end":return e.stop()}}),e)}))),this.bundling_speed)}catch(e){console.log(e),this.bundling_active=!1,this.bundling_speed=1e3,this.bundling_timer=null}case 5:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"removeBlock",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null!=e){this.clearing_active=!0;for(var t=this.mempool.blocks.length-1;t>=0;t--)this.mempool.blocks[t].returnHash()==e.returnHash()&&(this.block_size_current-=this.blocks[t].size,this.blocks.splice(t,1));this.clearing_active=!1}}},{key:"removeBlockAndTransactions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null!=e){this.clearing_active=!0;for(var t=[],r=[],n=0;n<this.mempool.transactions.length;n++)t[this.mempool.transactions[n].transaction.sig]=n;for(var a=0;a<e.transactions.length;a++){var i=t[e.transactions[a].transaction.sig];null!=i&&(t[e.transactions[a].transaction.sig]=-1,this.transaction_size_current-=this.transactions[i].size)}this.mempool.goldentickets=[];for(var o=0;o<this.mempool.transactions.length;o++)t[this.mempool.transactions[o].transaction.sig]>-1&&r.push(this.mempool.transactions[o]);this.mempool.transactions=r;for(var s=0;s<e.transactions.length;s++){delete this.transactions_hmap[e.transactions[s].transaction.sig];for(var c=0;c<e.transactions[s].transaction.from.length;c++)delete this.transactions_inputs_hmap[e.transactions[s].transaction.from[c].returnKey()]}this.removeBlock(e),this.clearing_active=!1}}},{key:"returnRoutingWorkAvailable",value:function(){for(var e=BigInt(0),t=0;t<this.mempool.transactions.length;t++)1==this.mempool.transactions[t].is_valid&&(e+=this.mempool.transactions[t].returnRoutingWorkAvailableToPublicKey(this.app,this.app.wallet.returnPublicKey()));return e}}])&&i(t.prototype,r),n&&i(t,n),e}());e.exports=s},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r(5),r(125),r(172).set,r(123),r(191);var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t||{},this.peers=[]}var t,r,a;return t=e,(r=[{key:"initialize",value:function(){}},{key:"isPrivateNetwork",value:function(){for(var e=0;e<this.peers.length;e++)if(this.peers[e].isConnected())return!1;return null==this.app.options.peers}},{key:"isProductionNetwork",value:function(){return 0===this.app.BROWSER&&0==this.peers.length}}])&&n(t.prototype,r),a&&n(t,a),e}();e.exports=a},function(e,t,r){(function(t){function n(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(a,i){var o=e.apply(t,r);function s(e){n(o,a,i,s,c,"next",e)}function c(e){n(o,a,i,s,c,"throw",e)}s(void 0)}))}}function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=r(5),l=(r(125),r(172).set,r(123)),u=r(191),d=r(567),h=r(24),p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.api_call_index=0,this.api_callbacks={}}var n,o,p,f,m;return n=e,(o=[{key:"initialize",value:function(){this.app.BROWSER||(console.log("Connect to Rust client!"),this.wsConnectToRustPeer(),console.log("Connect to Rust client!"),this.getDemoBlockFromRust(),console.log("Connect to Rust client!"))}},{key:"u64FromBytes",value:function(e){var t=new h(this.u32FromBytes(e.slice(0,4))),r=new h(this.u32FromBytes(e.slice(4,8))),n=new h(4294967296);return t.times(n).plus(r)}},{key:"u64AsBytes",value:function(e){var r=new h(4294967296),n=e.div(r).round(0,h.roundDown),a=e.minus(n),i=this.u32AsBytes(Number(n)),o=this.u32AsBytes(Number(a));return t.concat([new Uint8Array(i),new Uint8Array(o)])}},{key:"u32FromBytes",value:function(e){for(var t=0,r=0;r<e.length;++r)t+=e[r],r<e.length-1&&(t<<=8);return t}},{key:"u32AsBytes",value:function(e){var t=[],r=4;do{t[--r]=255&e,e>>=8}while(r);return t}},{key:"u8FromByte",value:function(e){return 0+e}},{key:"u8AsByte",value:function(e){return 255&e}},{key:"sendAPICall",value:function(e,t,r){var n=this;return new Promise((function(a,i){n.api_callbacks[n.api_call_index]={resolve:a,reject:i};var o=n.serializeAPIMessage(t,n.api_call_index,r);n.api_call_index+=1,e.send(o)}))}},{key:"receiveAPIResponse",value:function(e){if(!this.api_callbacks[e.index])throw"response callback not found";this.api_callbacks[e.index].resolve(e.raw_message)}},{key:"receiveAPIError",value:function(e){var t=this.u32FromBytes(e.slice(8,12));if(!this.api_callbacks[t])throw"error callback not found";this.api_callbacks[t].reject(e.slice(12))}},{key:"serializeAPIMessage",value:function(e,t,r){var n=(new TextEncoder).encode(e),a=new Uint8Array(r),o=this.u32AsBytes(t);return new Uint8Array([].concat(i(n),i(o),i(a)))}},{key:"deserializeAPIMessage",value:function(e){return{command:"".concat(e.slice(0,8)),index:this.u32FromBytes(e.slice(8,12)),raw_message:e.slice(12)}}},{key:"deserializeHandshakeChallenge",value:function(e){var t=[];t[0]=e.readUInt8(0),t[1]=e.readUInt8(1),t[2]=e.readUInt8(2),t[3]=e.readUInt8(3);var r=[];return r[0]=e.readUInt8(4),r[1]=e.readUInt8(5),r[2]=e.readUInt8(6),r[3]=e.readUInt8(7),{their_ip_octets:t,my_ip_octets:r,their_address:e.slice(8,41),my_address:e.slice(41,74),timestamp:e.slice(74,82),their_sig:e.slice(82,146)}}},{key:"wsConnectToRustPeer",value:(m=a(regeneratorRuntime.mark((function e(){var n,i,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r(976),(i=new n("http://127.0.0.1:3000/wsopen")).on("open",function(){var e=a(regeneratorRuntime.mark((function e(r){var n,a,s,c,h,p,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.concat([new Uint8Array([127,0,0,1]),l.decode(o.app.wallet.returnPublicKey())]),e.next=3,o.sendAPICall(i,"SHAKINIT",n);case 3:return a=e.sent,s=o.deserializeHandshakeChallenge(a),console.log("".concat(s.their_ip_octets[0],".").concat(s.their_ip_octets[1],".").concat(s.their_ip_octets[2],".").concat(s.their_ip_octets[3])),console.log("".concat(s.my_ip_octets[0],".").concat(s.my_ip_octets[1],".").concat(s.my_ip_octets[2],".").concat(s.my_ip_octets[3])),console.log(o.app.crypto.compressPublicKey(s.their_address)),console.log(o.app.crypto.compressPublicKey(s.my_address)),console.log(o.app.crypto.toBase58(s.their_sig)),c=u.verify(t.from(d.hash(t.from(a.slice(0,82),"hex")),"hex"),s.their_sig,s.their_address),console.log(c),h=u.sign(t.from(d.hash(a),"hex"),t.from(o.app.wallet.returnPrivateKey(),"hex")),p=h.signature,h.recovery,f=t.concat([a,p]),e.next=16,o.sendAPICall(i,"SHAKCOMP",f);case 16:e.sent;case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i.on("message",(function(e){var t=o.deserializeAPIMessage(e);"RESULT__"===t.command?o.receiveAPIResponse(t):"ERROR___"===t.command&&o.receiveAPIError(t)})),i.on("error",(function(e){console.log("[error] ".concat(e.message))})),i.on("close",(function(e){console.log("[close] Connection closed cleanly, code=".concat(e.code," reason=").concat(e.reason))}));case 6:case"end":return e.stop()}}),e)}))),function(){return m.apply(this,arguments)})},{key:"getDemoBlockFromRust",value:(f=a(regeneratorRuntime.mark((function e(){var t,n,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r(125),e.prev=1,e.next=5,t("http://127.0.0.1:3000/block/403fa38a30aa0028f3d7020c4856474eaaf4e6e9b8346142ee83624352ae069d");case 5:if(!(n=e.sent).ok){e.next=15;break}return e.next=9,n.buffer();case 9:a=e.sent,(i=new c.block(this.app)).deserialize(a),console.log("GOT BLOCK ".concat(i.id," ").concat(i.timestamp)),e.next=16;break;case 15:console.log("Error fetching block: Status ".concat(n.status," -- ").concat(n.statusText));case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),console.log("Error fetching block: ".concat(e.t0));case 21:case"end":return e.stop()}}),e,this,[[1,18]])}))),function(){return f.apply(this,arguments)})}])&&s(n.prototype,o),p&&s(n,p),e}();e.exports=p}).call(this,r(4).Buffer)},function(e,t,r){"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r(978),r(5);e.exports=function e(t){n(this,e),this.app=t||{}}},function(e,t,r){var n=r(979),a=r(196),i=r(419),o=r(92)("socket.io-client");e.exports=t=c;var s=t.managers={};function c(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,a=n(e),c=a.source,l=a.id,u=a.path,d=s[l]&&u in s[l].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||d?(o("ignoring socket cache for %s",c),r=i(c,t)):(s[l]||(o("new io instance for %s",c),s[l]=i(c,t)),r=s[l]),a.query&&!t.query&&(t.query=a.query),r.socket(a.path,t)}t.protocol=a.protocol,t.connect=c,t.Manager=r(419),t.Socket=r(425)},function(e,t,r){var n=r(415),a=r(92)("socket.io-client:url");e.exports=function(e,t){var r=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host);"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(a("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),a("parse %s",e),r=n(e));r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443"));r.path=r.path||"/";var i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port,r.href=r.protocol+"://"+i+(t&&t.port===r.port?"":":"+r.port),r}},function(e,t,r){function n(e){var r;function n(){if(n.enabled){var e=n,a=+new Date,i=a-(r||a);e.diff=i,e.prev=r,e.curr=a,r=a;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var c=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(r,n){if("%%"===r)return r;c++;var a=t.formatters[n];if("function"==typeof a){var i=o[c];r=a.call(e,i),o.splice(c,1),c--}return r})),t.formatArgs.call(e,o);var l=n.log||t.log||console.log.bind(console);l.apply(e,o)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),n.destroy=a,"function"==typeof t.init&&t.init(n),t.instances.push(n),n}function a(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var r;t.save(e),t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),a=n.length;for(r=0;r<a;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(r=0;r<t.instances.length;r++){var i=t.instances[r];i.enabled=t.enabled(i.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(416),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,r){var n=r(417),a=r(418),i=Object.prototype.toString,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===i.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===i.call(File);t.deconstructPacket=function(e){var t=[],r=e.data,i=e;return i.data=function e(t,r){if(!t)return t;if(a(t)){var i={_placeholder:!0,num:r.length};return r.push(t),i}if(n(t)){for(var o=new Array(t.length),s=0;s<t.length;s++)o[s]=e(t[s],r);return o}if("object"==typeof t&&!(t instanceof Date)){o={};for(var c in t)o[c]=e(t[c],r);return o}return t}(r,t),i.attachments=t.length,{packet:i,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function e(t,r){if(!t)return t;if(t&&t._placeholder)return r[t.num];if(n(t))for(var a=0;a<t.length;a++)t[a]=e(t[a],r);else if("object"==typeof t)for(var i in t)t[i]=e(t[i],r);return t}(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){var r=0,i=e;!function e(c,l,u){if(!c)return c;if(o&&c instanceof Blob||s&&c instanceof File){r++;var d=new FileReader;d.onload=function(){u?u[l]=this.result:i=this.result,--r||t(i)},d.readAsArrayBuffer(c)}else if(n(c))for(var h=0;h<c.length;h++)e(c[h],h,c);else if("object"==typeof c&&!a(c))for(var p in c)e(c[p],p,c)}(i),r||t(i)}},function(e,t,r){e.exports=r(983),e.exports.parser=r(81)},function(e,t,r){var n=r(420),a=r(68),i=r(128)("engine.io-client:socket"),o=r(424),s=r(81),c=r(415),l=r(126);function u(e,t){if(!(this instanceof u))return new u(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=c(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=c(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=l.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=!1!==t.withCredentials,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||void 0,this.key=t.key||void 0,this.passphrase=t.passphrase||void 0,this.cert=t.cert||void 0,this.ca=t.ca||void 0,this.ciphers=t.ciphers||void 0,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}e.exports=u,u.priorWebsocketSuccess=!1,a(u.prototype),u.protocol=s.protocol,u.Socket=u,u.Transport=r(199),u.transports=r(420),u.parser=r(81),u.prototype.createTransport=function(e){i('creating transport "%s"',e);var t=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}(this.query);t.EIO=s.protocol,t.transport=e;var r=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new n[e]({query:t,socket:this,agent:r.agent||this.agent,hostname:r.hostname||this.hostname,port:r.port||this.port,secure:r.secure||this.secure,path:r.path||this.path,forceJSONP:r.forceJSONP||this.forceJSONP,jsonp:r.jsonp||this.jsonp,forceBase64:r.forceBase64||this.forceBase64,enablesXDR:r.enablesXDR||this.enablesXDR,withCredentials:r.withCredentials||this.withCredentials,timestampRequests:r.timestampRequests||this.timestampRequests,timestampParam:r.timestampParam||this.timestampParam,policyPort:r.policyPort||this.policyPort,pfx:r.pfx||this.pfx,key:r.key||this.key,passphrase:r.passphrase||this.passphrase,cert:r.cert||this.cert,ca:r.ca||this.ca,ciphers:r.ciphers||this.ciphers,rejectUnauthorized:r.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:r.perMessageDeflate||this.perMessageDeflate,extraHeaders:r.extraHeaders||this.extraHeaders,forceNode:r.forceNode||this.forceNode,localAddress:r.localAddress||this.localAddress,requestTimeout:r.requestTimeout||this.requestTimeout,protocols:r.protocols||void 0,isReactNative:this.isReactNative})},u.prototype.open=function(){var e;if(this.rememberUpgrade&&u.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},u.prototype.setTransport=function(e){i("setting transport %s",e.name);var t=this;this.transport&&(i("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))},u.prototype.probe=function(e){i('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),r=!1,n=this;function a(){if(n.onlyBinaryUpgrades){var a=!this.supportsBinary&&n.transport.supportsBinary;r=r||a}r||(i('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(a){if(!r)if("pong"===a.type&&"probe"===a.data){if(i('probe transport "%s" pong',e),n.upgrading=!0,n.emit("upgrading",t),!t)return;u.priorWebsocketSuccess="websocket"===t.name,i('pausing current transport "%s"',n.transport.name),n.transport.pause((function(){r||"closed"!==n.readyState&&(i("changing transport and sending upgrade packet"),h(),n.setTransport(t),t.send([{type:"upgrade"}]),n.emit("upgrade",t),t=null,n.upgrading=!1,n.flush())}))}else{i('probe transport "%s" failed',e);var o=new Error("probe error");o.transport=t.name,n.emit("upgradeError",o)}})))}function o(){r||(r=!0,h(),t.close(),t=null)}function s(r){var a=new Error("probe error: "+r);a.transport=t.name,o(),i('probe transport "%s" failed because of error: %s',e,r),n.emit("upgradeError",a)}function c(){s("transport closed")}function l(){s("socket closed")}function d(e){t&&e.name!==t.name&&(i('"%s" works - aborting "%s"',e.name,t.name),o())}function h(){t.removeListener("open",a),t.removeListener("error",s),t.removeListener("close",c),n.removeListener("close",l),n.removeListener("upgrading",d)}u.priorWebsocketSuccess=!1,t.once("open",a),t.once("error",s),t.once("close",c),this.once("close",l),this.once("upgrading",d),t.open()},u.prototype.onOpen=function(){if(i("socket open"),this.readyState="open",u.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){i("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},u.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(i('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else i('packet received with socket readyState "%s"',this.readyState)},u.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},u.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){"closed"!==t.readyState&&t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)},u.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout((function(){i("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)}),e.pingInterval)},u.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))},u.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},u.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(i("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},u.prototype.write=u.prototype.send=function(e,t,r){return this.sendPacket("message",e,t,r),this},u.prototype.sendPacket=function(e,t,r,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof r&&(n=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState){(r=r||{}).compress=!1!==r.compress;var a={type:e,data:t,options:r};this.emit("packetCreate",a),this.writeBuffer.push(a),n&&this.once("flush",n),this.flush()}},u.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?n():t()})):this.upgrading?n():t()}function t(){e.onClose("forced close"),i("socket closing - telling transport to close"),e.transport.close()}function r(){e.removeListener("upgrade",r),e.removeListener("upgradeError",r),t()}function n(){e.once("upgrade",r),e.once("upgradeError",r)}return this},u.prototype.onError=function(e){i("socket error %j",e),u.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},u.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){i('socket close with reason: "%s"',e);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0}},u.prototype.filterUpgrades=function(e){for(var t=[],r=0,n=e.length;r<n;r++)~o(this.transports,e[r])&&t.push(e[r]);return t}},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,r){var n=r(197),a=r(421),i=r(68),o=r(127),s=r(128)("engine.io-client:polling-xhr"),c=r(198);function l(){}function u(e){if(a.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!=typeof location){var t="https:"===location.protocol,r=location.port;r||(r=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||r!==e.port,this.xs=e.secure!==t}}function d(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}if(e.exports=u,e.exports.Request=d,o(u,a),u.prototype.supportsBinary=!0,u.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new d(e)},u.prototype.doWrite=function(e,t){var r="string"!=typeof e&&void 0!==e,n=this.request({method:"POST",data:e,isBinary:r}),a=this;n.on("success",t),n.on("error",(function(e){a.onError("xhr post error",e)})),this.sendXhr=n},u.prototype.doPoll=function(){s("xhr poll");var e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e},i(d.prototype),d.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new n(e),r=this;try{s("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var a in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(a)&&t.setRequestHeader(a,this.extraHeaders[a])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){r.onLoad()},t.onerror=function(){r.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");(r.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?r.onLoad():setTimeout((function(){r.onError("number"==typeof t.status?t.status:0)}),0))},s("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout((function(){r.onError(e)}),0)}"undefined"!=typeof document&&(this.index=d.requestsCount++,d.requests[this.index]=this)},d.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},d.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},d.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},d.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=l:this.xhr.onreadystatechange=l,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete d.requests[this.index],this.xhr=null}},d.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e=("application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},d.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},d.prototype.abort=function(){this.cleanup()},d.requestsCount=0,d.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",h);else if("function"==typeof addEventListener){addEventListener("onpagehide"in c?"pagehide":"unload",h,!1)}function h(){for(var e in d.requests)d.requests.hasOwnProperty(e)&&d.requests[e].abort()}},function(e,t){e.exports=Object.keys||function(e){var t=[],r=Object.prototype.hasOwnProperty;for(var n in e)r.call(e,n)&&t.push(n);return t}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t){e.exports=function(e,t,r){var n=e.byteLength;if(t=t||0,r=r||n,e.slice)return e.slice(t,r);if(t<0&&(t+=n),r<0&&(r+=n),r>n&&(r=n),t>=n||t>=r||0===n)return new ArrayBuffer(0);for(var a=new Uint8Array(e),i=new Uint8Array(r-t),o=t,s=0;o<r;o++,s++)i[s]=a[o];return i.buffer}},function(e,t){function r(){}e.exports=function(e,t,n){var a=!1;return n=n||r,i.count=e,0===e?t():i;function i(e,r){if(i.count<=0)throw new Error("after called too many times");--i.count,e?(a=!0,t(e),t=n):0!==i.count||a||t(null,r)}}},function(e,t){
/*! https://mths.be/utf8js v2.1.2 by @mathias */
var r,n,a,i=String.fromCharCode;function o(e){for(var t,r,n=[],a=0,i=e.length;a<i;)(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<i?56320==(64512&(r=e.charCodeAt(a++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),a--):n.push(t);return n}function s(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function c(e,t){return i(e>>t&63|128)}function l(e,t){if(0==(4294967168&e))return i(e);var r="";return 0==(4294965248&e)?r=i(e>>6&31|192):0==(4294901760&e)?(s(e,t)||(e=65533),r=i(e>>12&15|224),r+=c(e,6)):0==(4292870144&e)&&(r=i(e>>18&7|240),r+=c(e,12),r+=c(e,6)),r+=i(63&e|128)}function u(){if(a>=n)throw Error("Invalid byte index");var e=255&r[a];if(a++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function d(e){var t,i;if(a>n)throw Error("Invalid byte index");if(a==n)return!1;if(t=255&r[a],a++,0==(128&t))return t;if(192==(224&t)){if((i=(31&t)<<6|u())>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&t)){if((i=(15&t)<<12|u()<<6|u())>=2048)return s(i,e)?i:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(i=(7&t)<<18|u()<<12|u()<<6|u())>=65536&&i<=1114111)return i;throw Error("Invalid UTF-8 detected")}e.exports={version:"2.1.2",encode:function(e,t){for(var r=!1!==(t=t||{}).strict,n=o(e),a=n.length,i=-1,s="";++i<a;)s+=l(n[i],r);return s},decode:function(e,t){var s=!1!==(t=t||{}).strict;r=o(e),n=r.length,a=0;for(var c,l=[];!1!==(c=d(s));)l.push(c);return function(e){for(var t,r=e.length,n=-1,a="";++n<r;)(t=e[n])>65535&&(a+=i((t-=65536)>>>10&1023|55296),t=56320|1023&t),a+=i(t);return a}(l)}}},function(e,t){!function(e){"use strict";t.encode=function(t){var r,n=new Uint8Array(t),a=n.length,i="";for(r=0;r<a;r+=3)i+=e[n[r]>>2],i+=e[(3&n[r])<<4|n[r+1]>>4],i+=e[(15&n[r+1])<<2|n[r+2]>>6],i+=e[63&n[r+2]];return a%3==2?i=i.substring(0,i.length-1)+"=":a%3==1&&(i=i.substring(0,i.length-2)+"=="),i},t.decode=function(t){var r,n,a,i,o,s=.75*t.length,c=t.length,l=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var u=new ArrayBuffer(s),d=new Uint8Array(u);for(r=0;r<c;r+=4)n=e.indexOf(t[r]),a=e.indexOf(t[r+1]),i=e.indexOf(t[r+2]),o=e.indexOf(t[r+3]),d[l++]=n<<2|a>>4,d[l++]=(15&a)<<4|i>>2,d[l++]=(3&i)<<6|63&o;return u}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},function(e,t){var r=void 0!==r?r:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,n=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),a=n&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),i=r&&r.prototype.append&&r.prototype.getBlob;function o(e){return e.map((function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var r=new Uint8Array(e.byteLength);r.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=r.buffer}return t}return e}))}function s(e,t){t=t||{};var n=new r;return o(e).forEach((function(e){n.append(e)})),t.type?n.getBlob(t.type):n.getBlob()}function c(e,t){return new Blob(o(e),t||{})}"undefined"!=typeof Blob&&(s.prototype=Blob.prototype,c.prototype=Blob.prototype),e.exports=n?a?Blob:c:i?s:void 0},function(e,t,r){function n(e){var r;function n(){if(n.enabled){var e=n,a=+new Date,i=a-(r||a);e.diff=i,e.prev=r,e.curr=a,r=a;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var c=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(r,n){if("%%"===r)return r;c++;var a=t.formatters[n];if("function"==typeof a){var i=o[c];r=a.call(e,i),o.splice(c,1),c--}return r})),t.formatArgs.call(e,o);var l=n.log||t.log||console.log.bind(console);l.apply(e,o)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),n.destroy=a,"function"==typeof t.init&&t.init(n),t.instances.push(n),n}function a(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var r;t.save(e),t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),a=n.length;for(r=0;r<a;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(r=0;r<t.instances.length;r++){var i=t.instances[r];i.enabled=t.enabled(i.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(416),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,r){var n=r(421),a=r(127),i=r(198);e.exports=u;var o,s=/\n/g,c=/\\n/g;function l(){}function u(e){n.call(this,e),this.query=this.query||{},o||(o=i.___eio=i.___eio||[]),this.index=o.length;var t=this;o.push((function(e){t.onData(e)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){t.script&&(t.script.onerror=l)}),!1)}a(u,n),u.prototype.supportsBinary=!1,u.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),n.prototype.doClose.call(this)},u.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(t,r):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)},u.prototype.doWrite=function(e,t){var r=this;if(!this.form){var n,a=document.createElement("form"),i=document.createElement("textarea"),o=this.iframeId="eio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=o,a.method="POST",a.setAttribute("accept-charset","utf-8"),i.name="d",a.appendChild(i),document.body.appendChild(a),this.form=a,this.area=i}function l(){u(),t()}function u(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(e){r.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+r.iframeId+'">';n=document.createElement(e)}catch(e){(n=document.createElement("iframe")).name=r.iframeId,n.src="javascript:0"}n.id=r.iframeId,r.form.appendChild(n),r.iframe=n}this.form.action=this.uri(),u(),e=e.replace(c,"\\\n"),this.area.value=e.replace(s,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===r.iframe.readyState&&l()}:this.iframe.onload=l}},function(e,t,r){(function(t){var n,a,i=r(199),o=r(81),s=r(126),c=r(127),l=r(423),u=r(128)("engine.io-client:websocket");if("undefined"!=typeof WebSocket?n=WebSocket:"undefined"!=typeof self&&(n=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{a=r(996)}catch(e){}var d=n||a;function h(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=n&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(d=a),i.call(this,e)}e.exports=h,c(h,i),h.prototype.name="websocket",h.prototype.supportsBinary=!0,h.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,r={};this.isReactNative||(r.agent=this.agent,r.perMessageDeflate=this.perMessageDeflate,r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(r.headers=this.extraHeaders),this.localAddress&&(r.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new d(e,t):new d(e):new d(e,t,r)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},h.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},h.prototype.write=function(e){var r=this;this.writable=!1;for(var n=e.length,a=0,i=n;a<i;a++)!function(e){o.encodePacket(e,r.supportsBinary,(function(a){if(!r.usingBrowserWebSocket){var i={};if(e.options&&(i.compress=e.options.compress),r.perMessageDeflate)("string"==typeof a?t.byteLength(a):a.length)<r.perMessageDeflate.threshold&&(i.compress=!1)}try{r.usingBrowserWebSocket?r.ws.send(a):r.ws.send(a,i)}catch(e){u("websocket closed before onclose event")}--n||s()}))}(e[a]);function s(){r.emit("flush"),setTimeout((function(){r.writable=!0,r.emit("drain")}),0)}},h.prototype.onClose=function(){i.prototype.onClose.call(this)},h.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},h.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",r="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(r=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=l()),this.supportsBinary||(e.b64=1),(e=s.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+r+this.path+e},h.prototype.check=function(){return!(!d||"__initialize"in d&&this.name===h.prototype.name)}}).call(this,r(4).Buffer)},function(e,t){},function(e,t){e.exports=function(e,t){for(var r=[],n=(t=t||0)||0;n<e.length;n++)r[n-t]=e[n];return r}},function(e,t){function r(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=r,r.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-r:e+r}return 0|Math.min(e,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(e){this.ms=e},r.prototype.setMax=function(e){this.max=e},r.prototype.setJitter=function(e){this.jitter=e}},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(5),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t||{},this.deposits=[],this.stakers=[],this.pending=[]}var t,r,i;return t=e,(r=[{key:"findWinningStaker",value:function(e){if(0==this.stakers.length)return null;var t=BigInt("0x"+e)%BigInt(this.stakers.length);return this.stakers[parseInt(t.toString())].clone()}},{key:"onChainReorganization",value:function(e,t){for(var r=[],n=[],i=[],o=0;o<e.transactions.length;o++){var s=e.transactions[o];if(s.transaction.type===a.transaction.TransactionType.StakerWithdrawal&&(t?(s.transaction.from[0].type==a.slip.SlipType.StakerWithdrawalPending&&this.removePending(s.transaction.from[0]),s.transaction.from[0].type==a.slip.SlipType.StakerWithdrawalStaking&&this.removeStaker(s.transaction.from[0])):(s.transaction.from[0].type==a.slip.SlipType.StakerWithdrawalPending&&this.addPending(s.transaction.from[0]),s.transaction.from[0].type==a.slip.SlipType.StakerWithdrawalStaking&&this.addStaker(s.transaction.from[0]))),s.transaction.type===a.transaction.TransactionType.StakerDeposit)for(var c=0;c<s.transaction.to.length;c++)s.transaction.to[c].type==a.slip.SlipType.StakerDeposit&&(t?this.addDeposit(s.transaction.to[c]):this.removeDeposit(s.transaction.to[c]))}if(t){if(0==this.stakers.length){var l=this.resetStakerTable(e.returnStakingTreasury());r=l.res_spend,n=l.res_unspend,i=l.res_delete}}else if(0==this.pending.length){this.pending=[],this.deposits=[];for(var u=0;u<this.stakers.length;u++)this.stakers[u].type==a.slip.SlipType.StakerOutput&&this.pending.push(this.stakers[u]),this.stakers[u].type==a.slip.SlipType.StakerDeposit&&this.deposits.push(this.stakers[u]);this.stakers=[]}if(e.hasFeeTransaction()&&e.hasGoldenTicket()){var d=e.returnFeeTransaction(),h=e.returnGoldenTicketTransaction(),p=this.app.goldenticket.deserializeFromTransaction(h),f=(p.target_hash,p.random_hash);p.creator,f=this.app.crypto.hash(f),f=this.app.crypto.hash(f);for(var m=!1,g=0;g<d.transaction.to.length;g++)d.transaction.to[g].type==a.slip.SlipType.StakerOutput&&(m=!0);if(0==m||0==fee.transaction.transaction.from.length)return{res_spend:r,res_unspend:n,res_delete:i};if(t){if(0==this.stakers.length){var y=this.resetStakerTable(e.returnStakingTreasury());r=y.res_spend,n=y.res_unspend,i=y.res_delete;for(var v=[],b=[],_=0,w=0;w<d.transaction.to.length;w++){var x=d.transaction.to[w].clone();if(d.transaction.from.length<=_)break;if(x.type==a.slip.SlipType.StakerOutput){f=this.app.crypto.hash(f),f=this.app.crypto.hash(f);var k=this.findWinningStaker(f);v.push(k.clone()),b.push(x.clone())}_+=1,f=this.app.crypto.hash(f)}}for(var S=0;S<slips_to_remove_from_staking.length;S++)1==this.removeStaker(slips_to_remove_from_staking[S].clone())&&this.addPending(slips_to_add_to_pending[S].clone());if(0==this.stakers.length){var E=this.resetStakerTable(e.returnStakingTreasury());r=E.res_spend,n=E.res_unspend,i=E.res_delete}}else{if(0==this.pending.length){this.pending=[],this.deposits=[];for(var A=0;A<this.stakers.length;A++)this.stakers[A].type==a.slip.SlipType.StakerOutput&&this.pending.push(this.stakers[A].clone()),this.stakers[A].type==a.slip.SlipType.StakerDeposit&&this.deposits.push(this.stakers[A].clone());self.stakers=[]}for(var P=0,C=0;C<d.transaction.to.length;C++){var D=d.transaction.to[C].clone();if(d.transaction.from.length<P)break;var T=d.transaction.from[P].clone();if(D.type==a.slip.SlipType.StakerOutput){this.removePending(D.clone());var O=T.type;O==a.slip.SlipType.StakerDeposit&&this.addDeposit(T.clone()),O==a.slip.SlipType.StakerOutput&&this.addStaker(T.clone()),P+=1}}if(0==this.pending.length){this.pending=[],this.deposits=[];for(var M=0;M<this.stakers.length;M++)this.stakers[M].type==a.slip.SlipType.StakerOutput&&this.pending.push(this.stakers[M].clone()),this.stakers[M].type==a.slip.SlipType.StakerDeposit&&this.deposits.push(this.stakers[M].clone());this.stakers=[]}}}return{res_spend:r,res_unspend:n,res_delete:i}}},{key:"resetStakerTable",value:function(e){console.log("==========================="),console.log("=== RESET STAKING TABLE ==="),console.log("===========================");for(var t=0;t<this.pending.length;t++)this.addStaker(this.pending[t].clone());for(var r=0;r<this.deposits.length;r++)this.addStaker(this.deposits[r].clone());if(this.pending=[],this.deposits=[],this.stakers.length==[])return{res_spend:[],res_unspend:[],res_delete:[]};for(var n=e/BigInt(this.app.blockchain.blockchain.genesis_period),a=BigInt(0),i=0;i<this.stakers.length;i++)a+=this.stakers[i].returnAmount();for(var o=a/BigInt(this.stakers.length),s=n/BigInt(this.stakers.length),c=0;c<this.stakers.length;c++){var l=this.stakers[c].returnAmount(),u=BigInt(l)*BigInt(s)/o;this.stakers[c].setPayout(u)}return{res_spend:[],res_unspend:[],res_delete:[]}}},{key:"validateSlipInDeposits",value:function(e){for(var t=0;t<this.deposits.length;t++)if(e.returnKey()==this.deposits[t].returnKey())return!0;return!1}},{key:"validateSlipInStakers",value:function(e){for(var t=0;t<this.stakers.length;t++)if(e.returnKey()==this.stakers[t].returnKey())return!0;return!1}},{key:"validateSlipInPending",value:function(e){for(var t=0;t<this.pending.length;t++)if(e.returnKey()==this.pending[t].returnKey())return!0;return!1}},{key:"addDeposit",value:function(e){this.deposits.push(e)}},{key:"addStaker",value:function(e){if(0==this.stakers.length)return this.stakers.push(e),!0;for(var t=0;t<this.stakers.length;t++){var r=e.compare(self.stakers[t]);if(2==r){if(this.stakers.length==t+1)return this.stakers.push(e),!0}else{if(1==r)return this.stakers.insert(t,e),!0;if(3==r)return!1}}return this.stakers.push(e),!0}},{key:"addPending",value:function(e){this.pending.push(e)}},{key:"removeDeposit",value:function(e){for(var t=0;t<this.deposits.length;t++)if(e.returnKey()==this.deposits[t].returnKey())return this.deposits.splice(t,1),!0;return!1}},{key:"removeStaker",value:function(e){for(var t=0;t<this.stakers.length;t++)if(e.returnKey()==this.stakers[t].returnKey())return this.stakers.splice(t,1),!0;return!1}},{key:"removePending",value:function(e){for(var t=0;t<this.pending.length;t++)if(e.returnKey()==this.pending[t].returnKey())return this.pending.splice(t,1),!0;return!1}}])&&n(t.prototype,r),i&&n(t,i),e}();e.exports=i},function(e,t,r){"use strict";e.exports=Object.assign({},r(429),r(432),r(435),r(1014),r(1016),r(1022),r(32),r(1026),r(1028),r(1030),r(45),r(130));const n=r(124);Object.getOwnPropertyDescriptor(n,"promises")&&Object.defineProperty(e.exports,"promises",{get:()=>n.promises})},function(e,t,r){(function(t){var n=r(1002),a=t.cwd,i=null,o=t.env.GRACEFUL_FS_PLATFORM||t.platform;t.cwd=function(){return i||(i=a.call(t)),i};try{t.cwd()}catch(e){}if("function"==typeof t.chdir){var s=t.chdir;t.chdir=function(e){i=null,s.call(t,e)},Object.setPrototypeOf&&Object.setPrototypeOf(t.chdir,s)}e.exports=function(e){n.hasOwnProperty("O_SYMLINK")&&t.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(e){e.lchmod=function(t,r,a){e.open(t,n.O_WRONLY|n.O_SYMLINK,r,(function(t,n){t?a&&a(t):e.fchmod(n,r,(function(t){e.close(n,(function(e){a&&a(t||e)}))}))}))},e.lchmodSync=function(t,r){var a,i=e.openSync(t,n.O_WRONLY|n.O_SYMLINK,r),o=!0;try{a=e.fchmodSync(i,r),o=!1}finally{if(o)try{e.closeSync(i)}catch(e){}else e.closeSync(i)}return a}}(e);e.lutimes||function(e){n.hasOwnProperty("O_SYMLINK")?(e.lutimes=function(t,r,a,i){e.open(t,n.O_SYMLINK,(function(t,n){t?i&&i(t):e.futimes(n,r,a,(function(t){e.close(n,(function(e){i&&i(t||e)}))}))}))},e.lutimesSync=function(t,r,a){var i,o=e.openSync(t,n.O_SYMLINK),s=!0;try{i=e.futimesSync(o,r,a),s=!1}finally{if(s)try{e.closeSync(o)}catch(e){}else e.closeSync(o)}return i}):(e.lutimes=function(e,r,n,a){a&&t.nextTick(a)},e.lutimesSync=function(){})}(e);e.chown=s(e.chown),e.fchown=s(e.fchown),e.lchown=s(e.lchown),e.chmod=a(e.chmod),e.fchmod=a(e.fchmod),e.lchmod=a(e.lchmod),e.chownSync=c(e.chownSync),e.fchownSync=c(e.fchownSync),e.lchownSync=c(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=l(e.stat),e.fstat=l(e.fstat),e.lstat=l(e.lstat),e.statSync=u(e.statSync),e.fstatSync=u(e.fstatSync),e.lstatSync=u(e.lstatSync),e.lchmod||(e.lchmod=function(e,r,n){n&&t.nextTick(n)},e.lchmodSync=function(){});e.lchown||(e.lchown=function(e,r,n,a){a&&t.nextTick(a)},e.lchownSync=function(){});"win32"===o&&(e.rename=(r=e.rename,function(t,n,a){var i=Date.now(),o=0;r(t,n,(function s(c){if(c&&("EACCES"===c.code||"EPERM"===c.code)&&Date.now()-i<6e4)return setTimeout((function(){e.stat(n,(function(e,i){e&&"ENOENT"===e.code?r(t,n,s):a(c)}))}),o),void(o<100&&(o+=10));a&&a(c)}))}));var r;function a(t){return t?function(r,n,a){return t.call(e,r,n,(function(e){d(e)&&(e=null),a&&a.apply(this,arguments)}))}:t}function i(t){return t?function(r,n){try{return t.call(e,r,n)}catch(e){if(!d(e))throw e}}:t}function s(t){return t?function(r,n,a,i){return t.call(e,r,n,a,(function(e){d(e)&&(e=null),i&&i.apply(this,arguments)}))}:t}function c(t){return t?function(r,n,a){try{return t.call(e,r,n,a)}catch(e){if(!d(e))throw e}}:t}function l(t){return t?function(r,n,a){function i(e,t){t&&(t.uid<0&&(t.uid+=4294967296),t.gid<0&&(t.gid+=4294967296)),a&&a.apply(this,arguments)}return"function"==typeof n&&(a=n,n=null),n?t.call(e,r,n,i):t.call(e,r,i)}:t}function u(t){return t?function(r,n){var a=n?t.call(e,r,n):t.call(e,r);return a.uid<0&&(a.uid+=4294967296),a.gid<0&&(a.gid+=4294967296),a}:t}function d(e){return!e||("ENOSYS"===e.code||!(t.getuid&&0===t.getuid()||"EINVAL"!==e.code&&"EPERM"!==e.code))}e.read=function(t){function r(r,n,a,i,o,s){var c;if(s&&"function"==typeof s){var l=0;c=function(u,d,h){if(u&&"EAGAIN"===u.code&&l<10)return l++,t.call(e,r,n,a,i,o,c);s.apply(this,arguments)}}return t.call(e,r,n,a,i,o,c)}return Object.setPrototypeOf&&Object.setPrototypeOf(r,t),r}(e.read),e.readSync=(h=e.readSync,function(t,r,n,a,i){for(var o=0;;)try{return h.call(e,t,r,n,a,i)}catch(e){if("EAGAIN"===e.code&&o<10){o++;continue}throw e}});var h}}).call(this,r(9))},function(e){e.exports=JSON.parse('{"O_RDONLY":0,"O_WRONLY":1,"O_RDWR":2,"S_IFMT":61440,"S_IFREG":32768,"S_IFDIR":16384,"S_IFCHR":8192,"S_IFBLK":24576,"S_IFIFO":4096,"S_IFLNK":40960,"S_IFSOCK":49152,"O_CREAT":512,"O_EXCL":2048,"O_NOCTTY":131072,"O_TRUNC":1024,"O_APPEND":8,"O_DIRECTORY":1048576,"O_NOFOLLOW":256,"O_SYNC":128,"O_SYMLINK":2097152,"O_NONBLOCK":4,"S_IRWXU":448,"S_IRUSR":256,"S_IWUSR":128,"S_IXUSR":64,"S_IRWXG":56,"S_IRGRP":32,"S_IWGRP":16,"S_IXGRP":8,"S_IRWXO":7,"S_IROTH":4,"S_IWOTH":2,"S_IXOTH":1,"E2BIG":7,"EACCES":13,"EADDRINUSE":48,"EADDRNOTAVAIL":49,"EAFNOSUPPORT":47,"EAGAIN":35,"EALREADY":37,"EBADF":9,"EBADMSG":94,"EBUSY":16,"ECANCELED":89,"ECHILD":10,"ECONNABORTED":53,"ECONNREFUSED":61,"ECONNRESET":54,"EDEADLK":11,"EDESTADDRREQ":39,"EDOM":33,"EDQUOT":69,"EEXIST":17,"EFAULT":14,"EFBIG":27,"EHOSTUNREACH":65,"EIDRM":90,"EILSEQ":92,"EINPROGRESS":36,"EINTR":4,"EINVAL":22,"EIO":5,"EISCONN":56,"EISDIR":21,"ELOOP":62,"EMFILE":24,"EMLINK":31,"EMSGSIZE":40,"EMULTIHOP":95,"ENAMETOOLONG":63,"ENETDOWN":50,"ENETRESET":52,"ENETUNREACH":51,"ENFILE":23,"ENOBUFS":55,"ENODATA":96,"ENODEV":19,"ENOENT":2,"ENOEXEC":8,"ENOLCK":77,"ENOLINK":97,"ENOMEM":12,"ENOMSG":91,"ENOPROTOOPT":42,"ENOSPC":28,"ENOSR":98,"ENOSTR":99,"ENOSYS":78,"ENOTCONN":57,"ENOTDIR":20,"ENOTEMPTY":66,"ENOTSOCK":38,"ENOTSUP":45,"ENOTTY":25,"ENXIO":6,"EOPNOTSUPP":102,"EOVERFLOW":84,"EPERM":1,"EPIPE":32,"EPROTO":100,"EPROTONOSUPPORT":43,"EPROTOTYPE":41,"ERANGE":34,"EROFS":30,"ESPIPE":29,"ESRCH":3,"ESTALE":70,"ETIME":101,"ETIMEDOUT":60,"ETXTBSY":26,"EWOULDBLOCK":35,"EXDEV":18,"SIGHUP":1,"SIGINT":2,"SIGQUIT":3,"SIGILL":4,"SIGTRAP":5,"SIGABRT":6,"SIGIOT":6,"SIGBUS":10,"SIGFPE":8,"SIGKILL":9,"SIGUSR1":30,"SIGSEGV":11,"SIGUSR2":31,"SIGPIPE":13,"SIGALRM":14,"SIGTERM":15,"SIGCHLD":20,"SIGCONT":19,"SIGSTOP":17,"SIGTSTP":18,"SIGTTIN":21,"SIGTTOU":22,"SIGURG":16,"SIGXCPU":24,"SIGXFSZ":25,"SIGVTALRM":26,"SIGPROF":27,"SIGWINCH":28,"SIGIO":23,"SIGSYS":12,"SSL_OP_ALL":2147486719,"SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION":262144,"SSL_OP_CIPHER_SERVER_PREFERENCE":4194304,"SSL_OP_CISCO_ANYCONNECT":32768,"SSL_OP_COOKIE_EXCHANGE":8192,"SSL_OP_CRYPTOPRO_TLSEXT_BUG":2147483648,"SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS":2048,"SSL_OP_EPHEMERAL_RSA":0,"SSL_OP_LEGACY_SERVER_CONNECT":4,"SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER":32,"SSL_OP_MICROSOFT_SESS_ID_BUG":1,"SSL_OP_MSIE_SSLV2_RSA_PADDING":0,"SSL_OP_NETSCAPE_CA_DN_BUG":536870912,"SSL_OP_NETSCAPE_CHALLENGE_BUG":2,"SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG":1073741824,"SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG":8,"SSL_OP_NO_COMPRESSION":131072,"SSL_OP_NO_QUERY_MTU":4096,"SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION":65536,"SSL_OP_NO_SSLv2":16777216,"SSL_OP_NO_SSLv3":33554432,"SSL_OP_NO_TICKET":16384,"SSL_OP_NO_TLSv1":67108864,"SSL_OP_NO_TLSv1_1":268435456,"SSL_OP_NO_TLSv1_2":134217728,"SSL_OP_PKCS1_CHECK_1":0,"SSL_OP_PKCS1_CHECK_2":0,"SSL_OP_SINGLE_DH_USE":1048576,"SSL_OP_SINGLE_ECDH_USE":524288,"SSL_OP_SSLEAY_080_CLIENT_DH_BUG":128,"SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG":0,"SSL_OP_TLS_BLOCK_PADDING_BUG":512,"SSL_OP_TLS_D5_BUG":256,"SSL_OP_TLS_ROLLBACK_BUG":8388608,"ENGINE_METHOD_DSA":2,"ENGINE_METHOD_DH":4,"ENGINE_METHOD_RAND":8,"ENGINE_METHOD_ECDH":16,"ENGINE_METHOD_ECDSA":32,"ENGINE_METHOD_CIPHERS":64,"ENGINE_METHOD_DIGESTS":128,"ENGINE_METHOD_STORE":256,"ENGINE_METHOD_PKEY_METHS":512,"ENGINE_METHOD_PKEY_ASN1_METHS":1024,"ENGINE_METHOD_ALL":65535,"ENGINE_METHOD_NONE":0,"DH_CHECK_P_NOT_SAFE_PRIME":2,"DH_CHECK_P_NOT_PRIME":1,"DH_UNABLE_TO_CHECK_GENERATOR":4,"DH_NOT_SUITABLE_GENERATOR":8,"NPN_ENABLED":1,"RSA_PKCS1_PADDING":1,"RSA_SSLV23_PADDING":2,"RSA_NO_PADDING":3,"RSA_PKCS1_OAEP_PADDING":4,"RSA_X931_PADDING":5,"RSA_PKCS1_PSS_PADDING":6,"POINT_CONVERSION_COMPRESSED":2,"POINT_CONVERSION_UNCOMPRESSED":4,"POINT_CONVERSION_HYBRID":6,"F_OK":0,"R_OK":4,"W_OK":2,"X_OK":1,"UV_UDP_REUSEADDR":4}')},function(e,t,r){(function(t){var n=r(366).Stream;e.exports=function(e){return{ReadStream:function r(a,i){if(!(this instanceof r))return new r(a,i);n.call(this);var o=this;this.path=a,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,i=i||{};for(var s=Object.keys(i),c=0,l=s.length;c<l;c++){var u=s[c];this[u]=i[u]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void t.nextTick((function(){o._read()}));e.open(this.path,this.flags,this.mode,(function(e,t){if(e)return o.emit("error",e),void(o.readable=!1);o.fd=t,o.emit("open",t),o._read()}))},WriteStream:function t(r,a){if(!(this instanceof t))return new t(r,a);n.call(this),this.path=r,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,a=a||{};for(var i=Object.keys(a),o=0,s=i.length;o<s;o++){var c=i[o];this[c]=a[c]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}}).call(this,r(9))},function(e,t,r){"use strict";e.exports=function(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Object)var t={__proto__:n(e)};else t=Object.create(null);return Object.getOwnPropertyNames(e).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})),t};var n=Object.getPrototypeOf||function(e){return e.__proto__}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,s,c=o(e),l=1;l<arguments.length;l++){for(var u in r=Object(arguments[l]))a.call(r,u)&&(c[u]=r[u]);if(n){s=n(r);for(var d=0;d<s.length;d++)i.call(r,s[d])&&(c[s[d]]=r[s[d]])}}return c}},function(e,t,r){"use strict";(function(t){const n=r(17),a=r(10),i=r(32).mkdirsSync,o=r(434).utimesMillisSync,s=r(129);function c(e,r,i,o){if(!o.filter||o.filter(r,i))return function(e,r,i,o){const c=(o.dereference?n.statSync:n.lstatSync)(r);if(c.isDirectory())return function(e,t,r,a,i){if(!t)return function(e,t,r,a){return n.mkdirSync(r),u(t,r,a),n.chmodSync(r,e.mode)}(e,r,a,i);if(t&&!t.isDirectory())throw new Error(`Cannot overwrite non-directory '${a}' with directory '${r}'.`);return u(r,a,i)}(c,e,r,i,o);if(c.isFile()||c.isCharacterDevice()||c.isBlockDevice())return function(e,t,r,a,i){return t?function(e,t,r,a){if(a.overwrite)return n.unlinkSync(r),l(e,t,r,a);if(a.errorOnExist)throw new Error(`'${r}' already exists`)}(e,r,a,i):l(e,r,a,i)}(c,e,r,i,o);if(c.isSymbolicLink())return function(e,r,i,o){let c=n.readlinkSync(r);o.dereference&&(c=a.resolve(t.cwd(),c));if(e){let e;try{e=n.readlinkSync(i)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return n.symlinkSync(c,i);throw e}if(o.dereference&&(e=a.resolve(t.cwd(),e)),s.isSrcSubdir(c,e))throw new Error(`Cannot copy '${c}' to a subdirectory of itself, '${e}'.`);if(n.statSync(i).isDirectory()&&s.isSrcSubdir(e,c))throw new Error(`Cannot overwrite '${e}' with '${c}'.`);return function(e,t){return n.unlinkSync(t),n.symlinkSync(e,t)}(c,i)}return n.symlinkSync(c,i)}(e,r,i,o)}(e,r,i,o)}function l(e,t,a,i){return"function"==typeof n.copyFileSync?(n.copyFileSync(t,a),n.chmodSync(a,e.mode),i.preserveTimestamps?o(a,e.atime,e.mtime):void 0):function(e,t,a,i){const o=r(1012)(65536),s=n.openSync(t,"r"),c=n.openSync(a,"w",e.mode);let l=0;for(;l<e.size;){const e=n.readSync(s,o,0,65536,l);n.writeSync(c,o,0,e),l+=e}i.preserveTimestamps&&n.futimesSync(c,e.atime,e.mtime);n.closeSync(s),n.closeSync(c)}(e,t,a,i)}function u(e,t,r){n.readdirSync(e).forEach(n=>function(e,t,r,n){const i=a.join(t,e),o=a.join(r,e),{destStat:l}=s.checkPathsSync(i,o,"copy");return c(l,i,o,n)}(n,e,t,r))}e.exports=function(e,r,o){"function"==typeof o&&(o={filter:o}),(o=o||{}).clobber=!("clobber"in o)||!!o.clobber,o.overwrite="overwrite"in o?!!o.overwrite:o.clobber,o.preserveTimestamps&&"ia32"===t.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269");const{srcStat:l,destStat:u}=s.checkPathsSync(e,r,"copy");return s.checkParentPathsSync(e,l,r,"copy"),function(e,t,r,o){if(o.filter&&!o.filter(t,r))return;const s=a.dirname(r);n.existsSync(s)||i(s);return c(e,t,r,o)}(u,e,r,o)}}).call(this,r(9))},function(e,t,r){"use strict";(function(t){const n=r(17),a=r(10),i=r(433).invalidWin32Path,o=parseInt("0777",8);e.exports=function e(r,s,c,l){if("function"==typeof s?(c=s,s={}):s&&"object"==typeof s||(s={mode:s}),"win32"===t.platform&&i(r)){const e=new Error(r+" contains invalid WIN32 path characters.");return e.code="EINVAL",c(e)}let u=s.mode;const d=s.fs||n;void 0===u&&(u=o&~t.umask()),l||(l=null),c=c||function(){},r=a.resolve(r),d.mkdir(r,u,t=>{if(!t)return c(null,l=l||r);switch(t.code){case"ENOENT":if(a.dirname(r)===r)return c(t);e(a.dirname(r),s,(t,n)=>{t?c(t,n):e(r,s,c,n)});break;default:d.stat(r,(e,r)=>{e||!r.isDirectory()?c(t,l):c(null,l)})}})}}).call(this,r(9))},function(e,t,r){"use strict";(function(t){const n=r(17),a=r(10),i=r(433).invalidWin32Path,o=parseInt("0777",8);e.exports=function e(r,s,c){s&&"object"==typeof s||(s={mode:s});let l=s.mode;const u=s.fs||n;if("win32"===t.platform&&i(r)){const e=new Error(r+" contains invalid WIN32 path characters.");throw e.code="EINVAL",e}void 0===l&&(l=o&~t.umask()),c||(c=null),r=a.resolve(r);try{u.mkdirSync(r,l),c=c||r}catch(t){if("ENOENT"===t.code){if(a.dirname(r)===r)throw t;c=e(a.dirname(r),s,c),e(r,s,c)}else{let e;try{e=u.statSync(r)}catch(e){throw t}if(!e.isDirectory())throw t}}return c}}).call(this,r(9))},function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},function(e,t,r){"use strict";(function(t){e.exports=function(e){if("function"==typeof t.allocUnsafe)try{return t.allocUnsafe(e)}catch(r){return new t(e)}return new t(e)}}).call(this,r(4).Buffer)},function(e,t,r){"use strict";(function(t){const n=r(17),a=r(10),i=r(32).mkdirs,o=r(45).pathExists,s=r(434).utimesMillis,c=r(129);function l(e,t,r,n,s){const c=a.dirname(r);o(c,(a,o)=>a?s(a):o?d(e,t,r,n,s):void i(c,a=>a?s(a):d(e,t,r,n,s)))}function u(e,t,r,n,a,i){Promise.resolve(a.filter(r,n)).then(o=>o?e(t,r,n,a,i):i(),e=>i(e))}function d(e,t,r,n,a){return n.filter?u(h,e,t,r,n,a):h(e,t,r,n,a)}function h(e,t,r,a,i){(a.dereference?n.stat:n.lstat)(t,(o,s)=>o?i(o):s.isDirectory()?function(e,t,r,a,i,o){if(!t)return function(e,t,r,a,i){n.mkdir(r,o=>{if(o)return i(o);m(t,r,a,t=>t?i(t):n.chmod(r,e.mode,i))})}(e,r,a,i,o);if(t&&!t.isDirectory())return o(new Error(`Cannot overwrite non-directory '${a}' with directory '${r}'.`));return m(r,a,i,o)}(s,e,t,r,a,i):s.isFile()||s.isCharacterDevice()||s.isBlockDevice()?function(e,t,r,a,i,o){return t?function(e,t,r,a,i){if(!a.overwrite)return a.errorOnExist?i(new Error(`'${r}' already exists`)):i();n.unlink(r,n=>n?i(n):p(e,t,r,a,i))}(e,r,a,i,o):p(e,r,a,i,o)}(s,e,t,r,a,i):s.isSymbolicLink()?y(e,t,r,a,i):void 0)}function p(e,t,r,a,i){return"function"==typeof n.copyFile?n.copyFile(t,r,t=>t?i(t):f(e,r,a,i)):function(e,t,r,a,i){const o=n.createReadStream(t);o.on("error",e=>i(e)).once("open",()=>{const t=n.createWriteStream(r,{mode:e.mode});t.on("error",e=>i(e)).on("open",()=>o.pipe(t)).once("close",()=>f(e,r,a,i))})}(e,t,r,a,i)}function f(e,t,r,a){n.chmod(t,e.mode,n=>n?a(n):r.preserveTimestamps?s(t,e.atime,e.mtime,a):a())}function m(e,t,r,a){n.readdir(e,(n,i)=>n?a(n):g(i,e,t,r,a))}function g(e,t,r,n,i){const o=e.pop();return o?function(e,t,r,n,i,o){const s=a.join(r,t),l=a.join(n,t);c.checkPaths(s,l,"copy",(t,a)=>{if(t)return o(t);const{destStat:c}=a;d(c,s,l,i,t=>t?o(t):g(e,r,n,i,o))})}(e,o,t,r,n,i):i()}function y(e,r,i,o,s){n.readlink(r,(r,l)=>r?s(r):(o.dereference&&(l=a.resolve(t.cwd(),l)),e?void n.readlink(i,(r,u)=>r?"EINVAL"===r.code||"UNKNOWN"===r.code?n.symlink(l,i,s):s(r):(o.dereference&&(u=a.resolve(t.cwd(),u)),c.isSrcSubdir(l,u)?s(new Error(`Cannot copy '${l}' to a subdirectory of itself, '${u}'.`)):e.isDirectory()&&c.isSrcSubdir(u,l)?s(new Error(`Cannot overwrite '${u}' with '${l}'.`)):function(e,t,r){n.unlink(t,a=>a?r(a):n.symlink(e,t,r))}(l,i,s))):n.symlink(l,i,s)))}e.exports=function(e,r,n,a){"function"!=typeof n||a?"function"==typeof n&&(n={filter:n}):(a=n,n={}),a=a||function(){},(n=n||{}).clobber=!("clobber"in n)||!!n.clobber,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===t.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269"),c.checkPaths(e,r,"copy",(t,i)=>{if(t)return a(t);const{srcStat:o,destStat:s}=i;c.checkParentPaths(e,o,r,"copy",t=>t?a(t):n.filter?u(l,s,e,r,n,a):l(s,e,r,n,a))})}}).call(this,r(9))},function(e,t,r){"use strict";const n=r(25).fromCallback,a=r(17),i=r(10),o=r(32),s=r(130),c=n((function(e,t){t=t||function(){},a.readdir(e,(r,n)=>{if(r)return o.mkdirs(e,t);n=n.map(t=>i.join(e,t)),function e(){const r=n.pop();if(!r)return t();s.remove(r,r=>{if(r)return t(r);e()})}()})}));function l(e){let t;try{t=a.readdirSync(e)}catch(t){return o.mkdirsSync(e)}t.forEach(t=>{t=i.join(e,t),s.removeSync(t)})}e.exports={emptyDirSync:l,emptydirSync:l,emptyDir:c,emptydir:c}},function(e,t,r){"use strict";(function(t){const n=r(17),a=r(10),i=r(431),o="win32"===t.platform;function s(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(t=>{e[t]=e[t]||n[t],e[t+="Sync"]=e[t]||n[t]}),e.maxBusyTries=e.maxBusyTries||3}function c(e,t,r){let n=0;"function"==typeof t&&(r=t,t={}),i(e,"rimraf: missing path"),i.strictEqual(typeof e,"string","rimraf: path should be a string"),i.strictEqual(typeof r,"function","rimraf: callback function required"),i(t,"rimraf: invalid options argument provided"),i.strictEqual(typeof t,"object","rimraf: options should be object"),s(t),l(e,t,(function a(i){if(i){if(("EBUSY"===i.code||"ENOTEMPTY"===i.code||"EPERM"===i.code)&&n<t.maxBusyTries){n++;return setTimeout(()=>l(e,t,a),100*n)}"ENOENT"===i.code&&(i=null)}r(i)}))}function l(e,t,r){i(e),i(t),i("function"==typeof r),t.lstat(e,(n,a)=>n&&"ENOENT"===n.code?r(null):n&&"EPERM"===n.code&&o?u(e,t,n,r):a&&a.isDirectory()?h(e,t,n,r):void t.unlink(e,n=>{if(n){if("ENOENT"===n.code)return r(null);if("EPERM"===n.code)return o?u(e,t,n,r):h(e,t,n,r);if("EISDIR"===n.code)return h(e,t,n,r)}return r(n)}))}function u(e,t,r,n){i(e),i(t),i("function"==typeof n),r&&i(r instanceof Error),t.chmod(e,438,a=>{a?n("ENOENT"===a.code?null:r):t.stat(e,(a,i)=>{a?n("ENOENT"===a.code?null:r):i.isDirectory()?h(e,t,r,n):t.unlink(e,n)})})}function d(e,t,r){let n;i(e),i(t),r&&i(r instanceof Error);try{t.chmodSync(e,438)}catch(e){if("ENOENT"===e.code)return;throw r}try{n=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw r}n.isDirectory()?f(e,t,r):t.unlinkSync(e)}function h(e,t,r,n){i(e),i(t),r&&i(r instanceof Error),i("function"==typeof n),t.rmdir(e,o=>{!o||"ENOTEMPTY"!==o.code&&"EEXIST"!==o.code&&"EPERM"!==o.code?o&&"ENOTDIR"===o.code?n(r):n(o):function(e,t,r){i(e),i(t),i("function"==typeof r),t.readdir(e,(n,i)=>{if(n)return r(n);let o,s=i.length;if(0===s)return t.rmdir(e,r);i.forEach(n=>{c(a.join(e,n),t,n=>{if(!o)return n?r(o=n):void(0==--s&&t.rmdir(e,r))})})})}(e,t,n)})}function p(e,t){let r;s(t=t||{}),i(e,"rimraf: missing path"),i.strictEqual(typeof e,"string","rimraf: path should be a string"),i(t,"rimraf: missing options"),i.strictEqual(typeof t,"object","rimraf: options should be object");try{r=t.lstatSync(e)}catch(r){if("ENOENT"===r.code)return;"EPERM"===r.code&&o&&d(e,t,r)}try{r&&r.isDirectory()?f(e,t,null):t.unlinkSync(e)}catch(r){if("ENOENT"===r.code)return;if("EPERM"===r.code)return o?d(e,t,r):f(e,t,r);if("EISDIR"!==r.code)throw r;f(e,t,r)}}function f(e,t,r){i(e),i(t),r&&i(r instanceof Error);try{t.rmdirSync(e)}catch(n){if("ENOTDIR"===n.code)throw r;if("ENOTEMPTY"===n.code||"EEXIST"===n.code||"EPERM"===n.code)!function(e,t){if(i(e),i(t),t.readdirSync(e).forEach(r=>p(a.join(e,r),t)),!o){return t.rmdirSync(e,t)}{const r=Date.now();do{try{return t.rmdirSync(e,t)}catch(e){}}while(Date.now()-r<500)}}(e,t);else if("ENOENT"!==n.code)throw n}}e.exports=c,c.sync=p}).call(this,r(9))},function(e,t,r){"use strict";const n=r(1017),a=r(1018),i=r(1019);e.exports={createFile:n.createFile,createFileSync:n.createFileSync,ensureFile:n.createFile,ensureFileSync:n.createFileSync,createLink:a.createLink,createLinkSync:a.createLinkSync,ensureLink:a.createLink,ensureLinkSync:a.createLinkSync,createSymlink:i.createSymlink,createSymlinkSync:i.createSymlinkSync,ensureSymlink:i.createSymlink,ensureSymlinkSync:i.createSymlinkSync}},function(e,t,r){"use strict";const n=r(25).fromCallback,a=r(10),i=r(17),o=r(32),s=r(45).pathExists;e.exports={createFile:n((function(e,t){function r(){i.writeFile(e,"",e=>{if(e)return t(e);t()})}i.stat(e,(n,i)=>{if(!n&&i.isFile())return t();const c=a.dirname(e);s(c,(e,n)=>e?t(e):n?r():void o.mkdirs(c,e=>{if(e)return t(e);r()}))})})),createFileSync:function(e){let t;try{t=i.statSync(e)}catch(e){}if(t&&t.isFile())return;const r=a.dirname(e);i.existsSync(r)||o.mkdirsSync(r),i.writeFileSync(e,"")}}},function(e,t,r){"use strict";const n=r(25).fromCallback,a=r(10),i=r(17),o=r(32),s=r(45).pathExists;e.exports={createLink:n((function(e,t,r){function n(e,t){i.link(e,t,e=>{if(e)return r(e);r(null)})}s(t,(c,l)=>c?r(c):l?r(null):void i.lstat(e,i=>{if(i)return i.message=i.message.replace("lstat","ensureLink"),r(i);const c=a.dirname(t);s(c,(a,i)=>a?r(a):i?n(e,t):void o.mkdirs(c,a=>{if(a)return r(a);n(e,t)}))}))})),createLinkSync:function(e,t){if(i.existsSync(t))return;try{i.lstatSync(e)}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}const r=a.dirname(t);return i.existsSync(r)||o.mkdirsSync(r),i.linkSync(e,t)}}},function(e,t,r){"use strict";const n=r(25).fromCallback,a=r(10),i=r(17),o=r(32),s=o.mkdirs,c=o.mkdirsSync,l=r(1020),u=l.symlinkPaths,d=l.symlinkPathsSync,h=r(1021),p=h.symlinkType,f=h.symlinkTypeSync,m=r(45).pathExists;e.exports={createSymlink:n((function(e,t,r,n){n="function"==typeof r?r:n,r="function"!=typeof r&&r,m(t,(o,c)=>o?n(o):c?n(null):void u(e,t,(o,c)=>{if(o)return n(o);e=c.toDst,p(c.toCwd,r,(r,o)=>{if(r)return n(r);const c=a.dirname(t);m(c,(r,a)=>r?n(r):a?i.symlink(e,t,o,n):void s(c,r=>{if(r)return n(r);i.symlink(e,t,o,n)}))})}))})),createSymlinkSync:function(e,t,r){if(i.existsSync(t))return;const n=d(e,t);e=n.toDst,r=f(n.toCwd,r);const o=a.dirname(t);return i.existsSync(o)||c(o),i.symlinkSync(e,t,r)}}},function(e,t,r){"use strict";const n=r(10),a=r(17),i=r(45).pathExists;e.exports={symlinkPaths:function(e,t,r){if(n.isAbsolute(e))return a.lstat(e,t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),r(t)):r(null,{toCwd:e,toDst:e}));{const o=n.dirname(t),s=n.join(o,e);return i(s,(t,i)=>t?r(t):i?r(null,{toCwd:s,toDst:e}):a.lstat(e,t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),r(t)):r(null,{toCwd:e,toDst:n.relative(o,e)})))}},symlinkPathsSync:function(e,t){let r;if(n.isAbsolute(e)){if(r=a.existsSync(e),!r)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}{const i=n.dirname(t),o=n.join(i,e);if(r=a.existsSync(o),r)return{toCwd:o,toDst:e};if(r=a.existsSync(e),!r)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:n.relative(i,e)}}}}},function(e,t,r){"use strict";const n=r(17);e.exports={symlinkType:function(e,t,r){if(r="function"==typeof t?t:r,t="function"!=typeof t&&t)return r(null,t);n.lstat(e,(e,n)=>{if(e)return r(null,"file");t=n&&n.isDirectory()?"dir":"file",r(null,t)})},symlinkTypeSync:function(e,t){let r;if(t)return t;try{r=n.lstatSync(e)}catch(e){return"file"}return r&&r.isDirectory()?"dir":"file"}}},function(e,t,r){"use strict";const n=r(25).fromCallback,a=r(200);a.outputJson=n(r(1024)),a.outputJsonSync=r(1025),a.outputJSON=a.outputJson,a.outputJSONSync=a.outputJsonSync,a.writeJSON=a.writeJson,a.writeJSONSync=a.writeJsonSync,a.readJSON=a.readJson,a.readJSONSync=a.readJsonSync,e.exports=a},function(e,t,r){(function(t){var n;try{n=r(17)}catch(e){n=r(124)}function a(e,t){var r,n="\n";return"object"==typeof t&&null!==t&&(t.spaces&&(r=t.spaces),t.EOL&&(n=t.EOL)),JSON.stringify(e,t?t.replacer:null,r).replace(/\n/g,n)+n}function i(e){return t.isBuffer(e)&&(e=e.toString("utf8")),e=e.replace(/^\uFEFF/,"")}var o={readFile:function(e,t,r){null==r&&(r=t,t={}),"string"==typeof t&&(t={encoding:t});var a=(t=t||{}).fs||n,o=!0;"throws"in t&&(o=t.throws),a.readFile(e,t,(function(n,a){if(n)return r(n);var s;a=i(a);try{s=JSON.parse(a,t?t.reviver:null)}catch(t){return o?(t.message=e+": "+t.message,r(t)):r(null,null)}r(null,s)}))},readFileSync:function(e,t){"string"==typeof(t=t||{})&&(t={encoding:t});var r=t.fs||n,a=!0;"throws"in t&&(a=t.throws);try{var o=r.readFileSync(e,t);return o=i(o),JSON.parse(o,t.reviver)}catch(t){if(a)throw t.message=e+": "+t.message,t;return null}},writeFile:function(e,t,r,i){null==i&&(i=r,r={});var o=(r=r||{}).fs||n,s="";try{s=a(t,r)}catch(e){return void(i&&i(e,null))}o.writeFile(e,s,r,i)},writeFileSync:function(e,t,r){var i=(r=r||{}).fs||n,o=a(t,r);return i.writeFileSync(e,o,r)}};e.exports=o}).call(this,r(4).Buffer)},function(e,t,r){"use strict";const n=r(10),a=r(32),i=r(45).pathExists,o=r(200);e.exports=function(e,t,r,s){"function"==typeof r&&(s=r,r={});const c=n.dirname(e);i(c,(n,i)=>n?s(n):i?o.writeJson(e,t,r,s):void a.mkdirs(c,n=>{if(n)return s(n);o.writeJson(e,t,r,s)}))}},function(e,t,r){"use strict";const n=r(17),a=r(10),i=r(32),o=r(200);e.exports=function(e,t,r){const s=a.dirname(e);n.existsSync(s)||i.mkdirsSync(s),o.writeJsonSync(e,t,r)}},function(e,t,r){"use strict";e.exports={moveSync:r(1027)}},function(e,t,r){"use strict";const n=r(17),a=r(10),i=r(432).copySync,o=r(130).removeSync,s=r(32).mkdirpSync,c=r(129);function l(e,t,r){try{n.renameSync(e,t)}catch(n){if("EXDEV"!==n.code)throw n;return function(e,t,r){return i(e,t,{overwrite:r,errorOnExist:true}),o(e)}(e,t,r)}}e.exports=function(e,t,r){const i=(r=r||{}).overwrite||r.clobber||!1,{srcStat:u}=c.checkPathsSync(e,t,"move");return c.checkParentPathsSync(e,u,t,"move"),s(a.dirname(t)),function(e,t,r){if(r)return o(t),l(e,t,r);if(n.existsSync(t))throw new Error("dest already exists.");return l(e,t,r)}(e,t,i)}},function(e,t,r){"use strict";const n=r(25).fromCallback;e.exports={move:n(r(1029))}},function(e,t,r){"use strict";const n=r(17),a=r(10),i=r(435).copy,o=r(130).remove,s=r(32).mkdirp,c=r(45).pathExists,l=r(129);function u(e,t,r,a){n.rename(e,t,n=>n?"EXDEV"!==n.code?a(n):function(e,t,r,n){i(e,t,{overwrite:r,errorOnExist:!0},t=>t?n(t):o(e,n))}(e,t,r,a):a())}e.exports=function(e,t,r,n){"function"==typeof r&&(n=r,r={});const i=r.overwrite||r.clobber||!1;l.checkPaths(e,t,"move",(r,d)=>{if(r)return n(r);const{srcStat:h}=d;l.checkParentPaths(e,h,t,"move",r=>{if(r)return n(r);s(a.dirname(t),r=>r?n(r):function(e,t,r,n){if(r)return o(t,a=>a?n(a):u(e,t,r,n));c(t,(a,i)=>a?n(a):i?n(new Error("dest already exists.")):u(e,t,r,n))}(e,t,i,n))})})}},function(e,t,r){"use strict";const n=r(25).fromCallback,a=r(17),i=r(10),o=r(32),s=r(45).pathExists;e.exports={outputFile:n((function(e,t,r,n){"function"==typeof r&&(n=r,r="utf8");const c=i.dirname(e);s(c,(i,s)=>i?n(i):s?a.writeFile(e,t,r,n):void o.mkdirs(c,i=>{if(i)return n(i);a.writeFile(e,t,r,n)}))})),outputFileSync:function(e,...t){const r=i.dirname(e);if(a.existsSync(r))return a.writeFileSync(e,...t);o.mkdirsSync(r),a.writeFileSync(e,...t)}}},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t||{}}var t,n,a;return t=e,(n=[{key:"initialize",value:function(){}}])&&r(t.prototype,n),a&&r(t,a),e}();e.exports=n},function(e,t,r){"use strict";(function(t){function n(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=r(5),c={Normal:0,ATR:1,VipInput:2,VipOutput:3,MinerInput:4,MinerOutput:5,RouterInput:6,RouterOutput:7,StakerOutput:8,StakerDeposit:9,StakerWithdrawalPending:10,StakerWithdrawalStaking:11,Other:12},l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.Normal,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;i(this,e),this.add=t,this.amt=BigInt(r),this.type=n,this.uuid=a,this.sid=o,this.lc=l,this.timestamp=0,this.payout=BigInt(s),this.key=""}var r,a,l;return r=e,(a=[{key:"returnAmount",value:function(){return this.amt}},{key:"compare",value:function(e){var t=BigInt("0x"+this.returnPublicKey()),r=BigInt("0x"+e.returnPublicKey());if(t>r)return 1;if(r>t)return 2;var n=BigInt(this.returnKey().substring(42,74)),a=BigInt(e.returnKey().substring(42,74));return n>a?1:a>n?2:3}},{key:"clone",value:function(){return new s.slip(this.add,this.amt.toString(),this.type,this.uuid,this.sid,this.payout,this.lc)}},{key:"deserialize",value:function(e,r){this.add=t.from(r.slice(0,33)).toString("hex"),this.uuid=t.from(r.slice(33,65)).toString("hex"),this.amt=e.binary.u64FromBytes(r.slice(65,73)).toString(),this.sid=e.binary.u8FromByte(r[73]),this.type=e.binary.u32FromBytes(r.slice(74,78)),this.amt=BigInt(this.amt)}},{key:"isNonZeroAmount",value:function(){return this.amt==BigInt(0)?0:1}},{key:"onChainReorganization",value:function(e,t,r){this.isNonZeroAmount()&&e.utxoset.update(self.returnKey(),r)}},{key:"asReadableString",value:function(){return"         ".concat(this.sid," | ").concat(this.add," | ").concat(this.amt.toString())}},{key:"returnKey",value:function(){return this.add+this.uuid+this.amt.toString()+this.sid}},{key:"returnPublicKey",value:function(){return this.add}},{key:"returnPayout",value:function(){return this.payout}},{key:"serialize",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";""===r&&(r=this.uuid);var a=e.crypto.toSizedArray(this.add,33),i=e.crypto.toSizedArray(t.from(r,"hex"),32),o=e.binary.u64AsBytes(this.amt.toString()),s=e.binary.u8AsByte(this.sid),c=e.binary.u32AsBytes(this.type);return new Uint8Array([].concat(n(a),n(i),n(o),[s],n(c)))}},{key:"serializeInputForSignature",value:function(e){return this.serialize(e,this.uuid)}},{key:"serializeOutputForSignature",value:function(e){return this.serialize(e,new Array(32).fill(0).toString())}},{key:"setPayout",value:function(e){this.payout=e}},{key:"validate",value:function(e){return!(this.amt>0&&!e.utxoset.isSpendable(this.returnKey()))}}])&&o(r.prototype,a),l&&o(r,l),e}();l.SlipType=c,e.exports=l}).call(this,r(4).Buffer)},function(e,t,r){(function(t){function n(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r(24);var s=r(5),c={Normal:0,Fee:1,GoldenTicket:2,ATR:3,Vip:4,StakerDeposit:5,StakerWithdrawal:6,Other:7,Issuance:8,SPV:9},l=function(){function e(){return i(this,e),this.transaction={},this.transaction.to=[],this.transaction.from=[],this.transaction.ts=0,this.transaction.sig="",this.transaction.path=[],this.transaction.r=1,this.transaction.type=c.Normal,this.transaction.m="",this.fees_total=BigInt(0),this.work_available_to_me=BigInt(0),this.work_available_to_creator=BigInt(0),this.work_cumulative=BigInt(0),this.msg={},this.dmsg="",this.size=0,this.is_valid=1,this}var r,a,l;return r=e,(a=[{key:"addInput",value:function(e){this.transaction.from.push(e)}},{key:"addOutput",value:function(e){this.transaction.fto.push(e)}},{key:"decryptMessage",value:function(e){if(this.transaction.from[0].add==e.wallet.returnPublicKey())try{this.dmsg=e.keys.decryptMessage(this.transaction.to[0].add,this.msg)}catch(e){}else try{var t=this.msg;this.dmsg=e.keys.decryptMessage(this.transaction.from[0].add,t)}catch(e){console.log("ERROR: "+e)}}},{key:"deserialize",value:function(e,t,r){for(var n=e.binary.u32FromBytes(t.slice(r,r+4)),a=e.binary.u32FromBytes(t.slice(r+4,r+8)),i=e.binary.u32FromBytes(t.slice(r+8,r+12)),o=e.binary.u32FromBytes(t.slice(r+12,r+16)),c=e.crypto.stringToHex(t.slice(r+16,r+80)),l=e.binary.u64FromBytes(t.slice(r+80,r+88)).toString(),u=t[r+88],d=r+89,h=d+75*n,p=h+75*a,f=p+i,m=[],g=0;g<n;g++){var y=d+75*g,v=y+75,b=new s.slip;b.deserialize(e,t.slice(y,v)),m.push(b)}for(var _=[],w=0;w<a;w++){var x=h+75*w,k=x+75,S=new s.slip;S.deserialize(e,t.slice(x,k)),_.push(S)}for(var E=t.slice(p,p+i),A=[],P=0;P<o;P++){var C=f+130*P,D=C+130,T=new s.hop;T.deserialize(e,t.slice(C,D)),A.push(T)}this.transaction.from=m,this.transaction.to=_,this.transaction.ts=l,this.transaction.sig=c,this.transaction.path=A,this.transaction.type=u,this.transaction.m=E}},{key:"generateRebroadcastTransaction",value:function(e,t,r){var n=s.transaction(),a=BigInt(0);output_slip_to_rebroadcast.returnAmount()>r&&(a=output_slip_to_rebroadcast.returnAmount()-r),n.transaction.type=s.transaction.TransactionType.ATR;var i=s.slip();return i.add=output_slip_to_rebroadcast.add,i.amt=a,i.type=s.slip.SlipType.ATR,i.uuid=output_slip_to_rebroadcast.uuid,output_slip_to_rebroadcast.type==s.slip.SlipType.ATR?n.transaction.m=transaction_to_rebroadcast.transaction.m:n.transaction.m=transaction_to_rebroadcast.serialize(e),n.addOutput(i),n.sign(e),n}},{key:"isGoldenTicket",value:function(){return this.transaction.type==c.GoldenTicket}},{key:"isFeeTransaction",value:function(){return this.transaction.type==c.Fee}},{key:"isIssuanceTransaction",value:function(){return this.transaction.type==c.Issuance}},{key:"isFrom",value:function(e){return 0!=this.returnSlipsFrom(e).length}},{key:"isTo",value:function(e){return this.returnSlipsTo(e).length>0}},{key:"onChainReorganization",value:function(e,t,r){var n=1,a=0;t&&(n=r,a=1);for(var i=0;i<this.transaction.from.length;i++)this.transaction.from[i].onChainReorganization(e,t,n);for(var o=0;o<this.transaction.to.length;o++)this.transaction.to[o].onChainReorganization(e,t,a)}},{key:"asReadableString",value:function(){var e="";e+="\n      timestamp:   ".concat(this.transaction.ts,"\n      signature:   ").concat(this.transaction.sig,"\n      type:        ").concat(this.transaction.type,"\n      message:     ").concat(this.transaction.m,"\n      === from slips ==\n");for(var t=0;t<this.transaction.from.length;t++)e+=this.transaction.from[t].asReadableString(),e+="\n";e+="      === to slips ==\n";for(var r=0;r<this.transaction.to.length;r++)e+=this.transaction.to[r].asReadableString(),e+="\n";return e+="\n"}},{key:"returnFeesTotal",value:function(e){if(this.fees_total==BigInt(0)){var t=BigInt(0);if(null!=this.transaction.from)for(var r=0;r<this.transaction.from.length;r++)t+=this.transaction.from[r].returnAmount();for(var n=BigInt(0),a=0;a<this.transaction.to.length;a++)this.transaction.to[a].type!=s.transaction.TransactionType.Fee&&this.transaction.to[a].type!=s.transaction.TransactionType.GoldenTicket&&(n+=this.transaction.to[a].returnAmount());this.fees_total=t-n}return this.fees_total}},{key:"returnMessage",value:function(){return""!=this.dmsg?this.dmsg:(this.msg,this.msg)}},{key:"returnRoutingWorkAvailableToPublicKey",value:function(e){for(var t=this.returnFeesTotal(e),r=0;r<this.transaction.path.length;r++){for(var n=1,a=r;a>0;a--)n*=2;t/=BigInt(n)}return t}},{key:"returnSignature",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return""!=this.transaction.sig&&1!=t||this.sign(e),this.transaction.sig}},{key:"returnSlipsFrom",value:function(e){var t=[];if(null!=this.transaction.from)for(var r=0;r<this.transaction.from.length;r++)this.transaction.from[r].add===e&&t.push(this.transaction.from[r]);return t}},{key:"returnSlipsToAndFrom",value:function(e){var t={from:[],to:[]};if(null!=this.transaction.from)for(var r=0;r<this.transaction.from.length;r++)this.transaction.from[r].add===e&&t.from.push(this.transaction.from[r]);if(null!=this.transaction.to)for(var n=0;n<this.transaction.to.length;n++)this.transaction.to[n].add===e&&t.to.push(this.transaction.to[n]);return t}},{key:"returnSlipsTo",value:function(e){var t=[];if(null!=this.transaction.to)for(var r=0;r<this.transaction.to.length;r++)this.transaction.to[r].add===e&&t.push(this.transaction.to[r]);return t}},{key:"returnWinningRoutingNode",value:function(e){if(0==this.path.length&&0!=this.transaction.from.length)return this.transaction.from[0].returnPublicKey();if(this.returnFeesTotal()==BigInt(0))return"";var t=this.returnTotalFees(),r=t,n=[];n.push(t);for(var a=0;a<this.path.length;a++){var i=r/BigInt(2);t+=i,r=i,n.push(t)}for(var o=BigInt("0x"+e)%BigInt("0x"+t),s=0;s<n.length;s++)if(o<=n[s])return this.path[s].returnTo();return""}},{key:"serialize",value:function(e){var t=e.binary.u32AsBytes(this.transaction.from.length),r=e.binary.u32AsBytes(this.transaction.to.length),a=e.binary.u32AsBytes(this.transaction.m.length),i=e.binary.u32AsBytes(this.transaction.path.length),o=e.crypto.toSizedArray(this.transaction.sig,64),s=e.binary.u64AsBytes(this.transaction.ts),c=e.binary.u8AsByte(this.transaction.type),l=[],u=[],d=[],h=89+75*this.transaction.from.length,p=89+75*(this.transaction.from.length+this.transaction.to.length),f=89+75*(this.transaction.from.length+this.transaction.to.length)+this.transaction.m.length,m=89+75*(this.transaction.from.length+this.transaction.to.length)+this.transaction.m.length+130*this.transaction.path.length,g=new Uint8Array(m);g.set(new Uint8Array([].concat(n(t),n(r),n(a),n(i),n(o),n(s),[c])),0);for(var y=0;y<this.transaction.from.length;y++)l.push(this.transaction.from[y].serialize(e));for(var v=89,b=0;b<l.length;b++)g.set(l[b],v),v+=75;for(var _=0;_<this.transaction.to.length;_++)u.push(this.transaction.to[_].serialize(e));for(var w=h,x=0;x<u.length;x++)g.set(u[x],w),w+=75;g.set(this.transaction.m,p);for(var k=0;k<this.transaction.path.length;k++){var S=this.transaction.path[k].serialize(e);d.push(S)}for(var E=f,A=0;A<d.length;A++)g.set(d[A],E),E+=130;return g}},{key:"serializeForSignature",value:function(e){for(var r=t.from(e.binary.u64AsBytes(this.transaction.ts)),n=0;n<this.transaction.from.length;n++)r=t.concat([r,this.transaction.from[n].serializeInputForSignature(e)]);for(var a=0;a<this.transaction.to.length;a++)r=t.concat([r,this.transaction.to[a].serializeOutputForSignature(e)]);return this.transaction.m=t.from(JSON.stringify(this.msg),"utf-8").toString("hex"),r=t.concat([r,t.from(e.binary.u32AsBytes(this.transaction.type)),t.from(this.transaction.m,"hex")]),Uint8Array.from(r)}},{key:"sign",value:function(e){for(var r=0;r<this.transaction.to.length;r++)this.transaction.to[r].sid=r;this.transaction.sig=e.crypto.signBuffer(e.crypto.hash(t.from(this.serializeForSignature(e))),e.wallet.returnPrivateKey())}},{key:"validate",value:function(e){if(this.transaction.type==c.Fee)return!0;if(this.transaction.type!=c.Fee&&this.transaction.type!=c.ATR&&this.transaction.type!=c.Vip&&this.transaction.type!=c.Issuance){if(this.transaction.from.length<1)return console.log("ERROR 582039: less than 1 input in transaction"),!1;if(!e.crypto.verifyHash(e.crypto.hash(this.serializeForSignature(e)),this.transaction.sig,this.transaction.from[0].add))return console.log("ERROR:382029: transaction signature does not validate"),!1;if(!this.validateRoutingPath())return console.log("ERROR 482033: routing paths do not validate, transaction invalid"),!1;for(var t=BigInt(0),r=BigInt(0),n=0;n<this.transaction.from.length;n++)t+=this.transaction.from[n].returnAmount();for(var a=0;a<this.transaction.to.length;a++)r+=this.transaction.to[a].returnAmount();if(r>t&&this.transaction.type!=c.Fee&&this.transaction.type!=c.Vip)return console.log("ERROR 802394: transaction spends more than it has available"),!1}if(this.transaction.type,this.transaction.type,this.transaction.type,this.transaction.type,this.transaction.type==c.StakerWithdrawal)for(var i=0;i<this.transaction.from.length;i++){if(this.transaction.from[i].type==s.slip.SlipType.StakerWithdrawalPending&&!e.staking.validateSlipInPending(this.transaction.from[i]))return console.log("ERROR 089231: Staking Withdrawal Pending input slip is not in Pending thus transaction invalid!"),!1;if(this.transaction.from[i].type==s.slip.SlipType.StakerWithdrawalStaking&&!e.staking.validateSlipInStakers(this.transaction.from[i]))return console.log("ERROR 089231: Staking Withdrawal Staking input slip is not in Stakers thus transaction invalid!"),!1}if(this.transaction.type,0==this.transaction.to.length)return console.log("ERROR 582039: transaction does not have a single output"),!1;for(var o=0;o<this.transaction.from.length;o++)if(1!=this.transaction.from[o].validate(e))return console.log("ERROR 858043: transaction does not have valid slips"),!1;return!0}},{key:"validateRoutingPath",value:function(){return console.log("JS needs to validate routing paths still..."),!0}},{key:"generateMetadata",value:function(){}},{key:"generateMetadataCumulativeFees",value:function(){return BigInt(0)}},{key:"generateMetadataCumulativeWork",value:function(){return BigInt(0)}}])&&o(r.prototype,a),l&&o(r,l),e}();l.TransactionType=c,l.TRANSACTION_SIZE=89,l.SLIP_SIZE=75,l.HOP_SIZE=130,e.exports=l}).call(this,r(4).Buffer)},function(e,t,r){"use strict";function n(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r(5),o=r(24),s=(r(1035),r(1036),function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!(this instanceof e))return new e(t);this.app=t||{},this.wallet={},this.wallet.balance="0",this.wallet.publickey="",this.wallet.privatekey="",this.wallet.inputs=[],this.wallet.outputs=[],this.wallet.spends=[],this.wallet.pending=[],this.wallet.default_fee=2,this.wallet.version=3.443,this.wallet.preferred_crypto="SAITO",this.wallet.preferred_txs=[],this.inputs_hmap=[],this.inputs_hmap_counter=0,this.inputs_hmap_counter_limit=1e4,this.outputs_hmap=[],this.outputs_hmap_counter=0,this.outputs_hmap_counter_limit=1e4,this.outputs_prune_limit=100,this.recreate_pending_transactions=0}var t,r,s,c,l;return t=e,(r=[{key:"addInput",value:function(e){for(var t=this.wallet.inputs.length;t>0&&this.wallet.inputs[t-1].bid>e.bid;)t--;-1==t&&(t=0),this.wallet.inputs.splice(t,0,e),this.wallet.spends.splice(t,0,0);var r=e.returnKey();if(this.inputs_hmap[r]=1,this.inputs_hmap_counter++,this.inputs_hmap_counter>this.inputs_hmap_counter_limit){this.inputs_hmap=[],this.outputs_hmap=[],this.inputs_hmap_counter=0,this.outputs_hmap_counter=0;for(var n=0;n<this.wallet.inputs.length;n++){var a=this.wallet.inputs[n].returnKey();this.inputs_hmap[a]=1}for(var i=0;i<this.wallet.outputs.length;i++){var o=this.wallet.outputs[i].returnKey();this.outputs_hmap[o]=1}}}},{key:"addOutput",value:function(e){this.wallet.outputs.push(e);var t=e.returnKey();if(this.outputs_hmap[t]=1,this.outputs_hmap_counter++,this.wallet.outputs.length>this.outputs_prune_limit){console.log("Deleting Excessive outputs from heavy-spend wallet...");var r=this.wallet.outputs.length-this.outputs_prune_limit;r+=10,this.wallet.outputs.splice(0,r),this.outputs_hmap_counter=0}}},{key:"containsInput",value:function(e){var t=e.returnKey();return 1==this.inputs_hmap[t]}},{key:"containsOutput",value:function(e){var t=e.returnKey();return 1==this.outputs_hmap[t]}},{key:"createUnsignedTransactionWithDefaultFee",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return""==e&&(e=this.returnPublicKey()),this.createUnsignedTransaction(e,t,0)}},{key:"createUnsignedTransaction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=BigInt(1e8*t),r=BigInt(1e8*r),""===e&&(e=this.returnPublicKey());var n=this.calculateBalance();r>n&&(r=BigInt(0));var a=t+r;if(a>n)throw"Inadequate SAITO to make requested transaction";var o=new i.transaction;if(!this.app.crypto.isPublicKey(e))throw"Invalid address "+e;a==BigInt(0)?(o.transaction.from=[],o.transaction.from.push(new i.slip(this.returnPublicKey()))):o.transaction.from=this.returnAdequateInputs(a),o.transaction.ts=(new Date).getTime(),o.transaction.to.push(new i.slip(e,t)),o.transaction.to[o.transaction.to.length-1].type=i.slip.SlipType.Normal,null==o.transaction.from&&(o.transaction.from=[],o.transaction.from.push(new i.slip(this.returnPublicKey(),BigInt(0)))),null==o.transaction.to&&(o.transaction.to=[],o.transaction.to.push(new i.slip(e,BigInt(0))));for(var s=BigInt(0),c=0;c<o.transaction.from.length;c++)s+=o.transaction.from[c].returnAmount();var l=s-a;if(l>BigInt(0))if(this.wallet.inputs.length<8){var u=l/BigInt(2),d=l-u;o.transaction.to.push(new i.slip(this.returnPublicKey(),u)),o.transaction.to[o.transaction.to.length-1].type=i.slip.SlipType.Normal,o.transaction.to.push(new i.slip(this.returnPublicKey(),d)),o.transaction.to[o.transaction.to.length-1].type=i.slip.SlipType.Normal}else o.transaction.to.push(new i.slip(this.returnPublicKey(),l)),o.transaction.to[o.transaction.to.length-1].type=i.slip.SlipType.Normal;return this.saveWallet(),o}},{key:"initialize",value:function(){if(""==this.wallet.privatekey&&null!=this.app.options.wallet){if(this.app.options.wallet.version<this.wallet.version)if(1==this.app.BROWSER){var e=this.app.options.wallet.privatekey,t=this.app.options.wallet.publickey;this.wallet.publickey=t,this.wallet.privatekey=e,this.app.modules.onWalletReset(),this.app.storage.resetOptions(),this.app.storage.saveOptions(),this.wallet.publickey=t,this.wallet.privatekey=e,this.app.options.wallet=this.wallet,this.app.options.wallet.inputs=[],this.app.options.wallet.outputs=[],this.app.options.wallet.spends=[],this.app.options.wallet.pending=[],this.app.options.wallet.balance="0.0",this.app.options.wallet.version=this.wallet.version,this.saveWallet(),salert("Saito Upgrade: Wallet Reset")}else this.app.options.wallet.version=this.wallet.version,this.app.options.wallet.inputs=[],this.app.options.wallet.outputs=[],this.app.options.wallet.pending=[],this.app.options.wallet.balance="0.0",this.app.storage.saveOptions();this.wallet=Object.assign(this.wallet,this.app.options.wallet)}""==this.wallet.privatekey&&this.resetWallet()}},{key:"isSlipValid",value:function(e,t){var r=this.wallet.spends[t],n=1==e.lc,a=e.bid>=this.app.blockchain.returnLowestValidBlock(),i=1!=this.app.mempool.transactions_inputs_hmap[e.returnSignatureSource()];return!r&&n&&a&&i}},{key:"onChainReorganization",value:function(e,t){for(var r=e.returnId(),n=(e.returnHash(),this.wallet.inputs.length-1);n>=0;n--)if(this.wallet.inputs[n].bid==bid&&this.wallet.inputs[n].bsh===bsh)this.wallet.inputs[n].lc=t;else if(this.wallet.inputs[n].bid<bid)break;if(t){if(0==r)for(var a=0;a<this.wallet.inputs.length;a++)0==this.isSlipInPendingTransactions(this.wallet.inputs[a])&&(this.wallet.spends[a]=0);else{this.app.blockchain.returnLatestBlockId();for(var o=0;o<this.wallet.inputs.length;o++)this.wallet.inputs[o].bid<=target_bid&&0==this.isSlipInPendingTransactions(this.wallet.inputs[o])&&(this.wallet.spends[o]=0)}for(var s=this.app.blockchain.blockchain.genesis_block_id,c=this.wallet.inputs.length-1;c>=0;c--)this.wallet.inputs[c].bid<s&&(this.wallet.inputs.splice(c,1),this.wallet.spends.splice(c,1));for(var l=this.wallet.outputs.length-1;l>=0;l--)this.wallet.outputs[l].bid<s&&this.wallet.outputs.splice(l,1);for(var u=0;u<e.transactions.length;u++){for(var d=e.transactions[u],h=d.returnSlipsToAndFrom(this.returnPublicKey()),p=[],f=[],m=0;m<h.to.length;m++)p.push(h.to[m].clone());for(var g=0;g<h.from.length;g++)f.push(h.from[g].clone());for(var y=0;y<p.length;y++)p[y].uuid=e.returnHash(),p[y].lc=t,p[y].ts=e.returnTimestamp(),p[y].from=JSON.parse(JSON.stringify(d.transaction.from));for(var v=0;v<f.length;v++)f[v].ts=e.returnTimestamp();var b=0;if(this.wallet.pending.length>0)for(var _=0;_<this.wallet.pending.length;_++){var w=new i.transaction(JSON.parse(this.wallet.pending[_]));this.wallet.pending[_].indexOf(d.transaction.sig)>0?(this.wallet.pending.splice(_,1),_--,b=1):w.transaction.type==i.transaction.TransactionType.GoldenTicket?(this.wallet.pending.splice(_,1),this.unspendInputSlips(w),_--,b=1):Math.random()<=.1&&w.transaction.ts+12e6<blk.block.ts&&(this.wallet.pending.splice(_,1),this.unspendInputSlips(w),b=1,_--)}if(1==b&&this.saveWallet(),p.length>0)for(var x=0;x<p.length;x++)if(p[x].isNonZeroAmount())if(0==this.containsInput(p[x]))0==this.containsOutput(p[x])&&(p[x].type==i.slip.SlipType.StakerOutput&&p[x].type==i.slip.SlipType.StakerWithdrawal||this.addInput(p[x]));else for(var k=p[x].returnKey(),S=this.wallet.inputs.length-1;S>=0;S--)this.wallet.inputs[S].returnKey()===k&&(this.wallet.inputs[S].lc=t);if(f.length>0)for(var E=0;E<f.length;E++)for(var A=f[E],P=0;P<this.wallet.inputs.length;P++){var C=this.wallet.inputs[P];A.uuid==C.uuid&&A.sid==C.sid&&A.amt.toString()==C.amt.toString()&&A.add==C.add&&(0==this.containsOutput(A)&&this.addOutput(A),this.wallet.inputs.splice(P,1),this.wallet.spends.splice(P,1),P=this.wallet.inputs.length+2)}}}this.updateBalance(),this.app.options.wallet=this.wallet,this.app.storage.saveOptions()}},{key:"returnAdequateInputs",value:function(e){var t=[],r=BigInt(0),n=BigInt(e)*BigInt(1e8),a=this.app.blockchain.blockchain.last_block_id-this.app.blockchain.blockchain.genesis_period+2;if(this.wallet.pending.length>0)for(var o=0;o<this.wallet.pending.length;o++)for(var s=new i.transaction(JSON.parse(this.wallet.pending[o])),c=0;c<s.transaction.from.length;c++)for(var l=s.transaction.from[c].returnKey(),u=0;u<this.wallet.inputs;u++)if(this.wallet.inputs[u].returnKey()===l){for(;this.wallet.spends.length<u;)this.wallet.spends.push(0);this.wallet.spends[u]=1}for(var d=!1,h=[],p=0;p<this.wallet.inputs.length;p++)if(0==this.wallet.spends[p]||p>=this.wallet.spends.length){var f=this.wallet.inputs[p];if(1==f.lc&&f.bid>=a&&1!=this.app.mempool.transactions_inputs_hmap[f.returnKey()]&&(h.push(p),t.push(f),(r+=f.returnAmount())>=n)){d=!0;break}}if(d){for(var m=0;m<h.length;m++)this.wallet.spends[h[m]]=1;return t}return null}},{key:"returnPublicKey",value:function(){return this.wallet.publickey}},{key:"returnPrivateKey",value:function(){return this.wallet.privatekey}},{key:"returnBalance",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"SAITO";if("SAITO"===t){var r=o(0);return this.wallet.inputs.forEach((function(t,n){e.isSlipValid(t,n)&&(r=r.plus(t.amt))})),r}return"0.0"}},{key:"resetWallet",value:(c=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.wallet.privatekey=this.app.crypto.generateKeys(),this.wallet.publickey=this.app.crypto.returnPublicKey(this.wallet.privatekey),null!=this.app.options.blockchain&&this.app.blockchain.resetBlockchain(),null!=this.app.options.keys&&(this.app.options.keys=[]),this.wallet.inputs=[],this.wallet.outputs=[],this.wallet.spends=[],this.wallet.pending=[],this.saveWallet(),1==this.app.browser.browser_active&&window.location.reload();case 10:case"end":return e.stop()}}),e,this)})),l=function(){var e=this,t=arguments;return new Promise((function(r,a){var i=c.apply(e,t);function o(e){n(i,r,a,o,s,"next",e)}function s(e){n(i,r,a,o,s,"throw",e)}o(void 0)}))},function(){return l.apply(this,arguments)})},{key:"saveWallet",value:function(){this.app.options.wallet=this.wallet,this.app.storage.saveOptions()}},{key:"signTransaction",value:function(e){if(null==e)return null;try{e.transaction.message=this.app.crypto.stringToBase64(JSON.stringify(e.msg)),e.sign(this.app)}catch(t){return console.error("####################"),console.error("### OVERSIZED TX ###"),console.error("###   -revert-   ###"),console.error("####################"),console.error(t),e.msg={},e}return e}},{key:"unspendInputSlips",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null!=e)for(var t=0;t<e.transaction.from.length;t++)for(var r=e.transaction.from[t].returnKey(),n=0;n<this.wallet.inputs.length;n++)r==this.wallet.inputs[n].returnKey()&&(this.wallet.spends[n]=0)}},{key:"calculateBalance",value:function(){var e=this,t=o(0);return this.wallet.inputs.forEach((function(r,n){e.isSlipValid(r,n)&&(t=t.plus(r.amt))})),t}},{key:"updateBalance",value:function(){var e=this.calculateBalance();this.wallet.balance=e.toString(),this.wallet.balance!=existing_balance&&this.app.connection.emit("update_balance",this)}}])&&a(t.prototype,r),s&&a(t,s),e}());e.exports=s},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){a(o,n,i,s,c,"next",e)}function c(e){a(o,n,i,s,c,"throw",e)}s(void 0)}))}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var a=u(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=r(19),h=(r(116).randomBytes,r(50)),p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(d,e);var t,r,n,a,l,u=c(d);function d(e,t){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(r=u.call(this,e)).previously_selected=0,r.introduction="",r.warning="",r.optionsStorage={},(this instanceof d?this.constructor:void 0)===d)throw new TypeError("Cannot construct Abstract instances directly");if("function"!=typeof r.returnBalance)throw new TypeError("Must override returnBalance");if("function"!=typeof r.transfer)throw new TypeError("Must override transfer");if("function"!=typeof r.returnAddress)throw new TypeError("Must override returnAddress");if("function"!=typeof r.returnPrivateKey)throw new TypeError("Must override returnPrivateKey");if("function"!=typeof r.hasPayment)throw new TypeError("Must override hasPayment");return r.app=e,r.ticker=t,r.categories="Cryptocurrency",r.eventEmitter=new h,r.optionsStorage.isActivated=!1,r}return t=d,(r=[{key:"initialize",value:function(e){this.optionsStorage.isActivated&&this.eventEmitter.emit("activated")}},{key:"activate",value:function(){this.optionsStorage.isActivated||(this.optionsStorage.isActivated=!0,this.save(),this.eventEmitter.emit("activated"))}},{key:"returnIsActivated",value:function(){return this.optionsStorage.isActivated}},{key:"onIsActivated",value:function(){var e=this;return new Promise((function(t,r){e.optionsStorage.isActivated&&t(),e.eventEmitter.on("activated",(function(){t()}))}))}},{key:"formatBalance",value:(l=i(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.returnBalance();case 2:return t=e.sent,balace=parseFloat(t),t<9999&&(t=t.toPrecision(5)),e.abrupt("return",t.toString());case 6:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"handlePeerRequest",value:(a=i(regeneratorRuntime.mark((function e(t,r,n,a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=r.request){e.next=2;break}return e.abrupt("return");case 2:if(null!=r.data){e.next=4;break}return e.abrupt("return");case 4:"cryptoAddressRequest"===r.request&&r.data.recipient===this.app.wallet.returnPublicKey()&&r.data.ticker===this.ticker&&a({address:this.returnAddress()});case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return a.apply(this,arguments)})},{key:"save",value:function(){this.app.storage.getModuleOptionsByName(this.name).storage=this.optionsStorage,this.app.storage.saveOptions()}},{key:"load",value:function(){var e=this.app.storage.getModuleOptionsByName(this.name);if(!e)throw"Module Not Installed: "+this.name;e.storage||(e.storage={},this.save()),this.optionsStorage=e.storage}}])&&o(t.prototype,r),n&&o(t,n),d}(d);p.prototype.renderModalSelectCrypto=function(){return null},p.prototype.attachEventsModalSelectCrypto=function(){return null},p.prototype.returnBalance=function(){throw new Error("returnBalance must be implemented by subclass!")},p.prototype.transfer=function(){throw new Error("transfer must be implemented by subclass!")},p.prototype.returnAddress=function(){throw new Error("returnAddress must be implemented by subclass!")},p.prototype.returnPrivateKey=function(){throw new Error("returnPrivateKey must be implemented by subclass!")},p.prototype.hasPayment=function(){throw new Error("hasPayment must be implemented by subclass!")},e.exports=p},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(1037),i=r(46),o=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.cryptomod=r}var t,r,o;return t=e,(r=[{key:"render",value:function(e,t){null!=this.cryptomod?(t.modal_overlay=new i(e),t.modal_overlay.render(e,t),t.modal_overlay.attachEvents(e,t),t.modal_overlay.showOverlay(e,t,a(e,t)),document.getElementById("saito-overlay-closebox").style.display="none",document.getElementById("saito-overlay-backdrop").onclick=function(e){}):console.log("ERROR: crypto module not supported")}},{key:"attachEvents",value:function(e,t){this.cryptomod.attachEventsModalSelectCrypto(e,this.cryptomod)}}])&&n(t.prototype,r),o&&n(t,o),e}();e.exports=o},function(e,t){e.exports=ModalSelectCryptoTemplate=function(e,t){return'  \n    <div class="modal-select-crypto">\n      '.concat(t.renderModalSelectCrypto(e,t),"\n    </div>\n  ")}},function(e,t){e.exports=SaitoOverlayTemplate=function(e){return e?'  \n      <div id="saito-overlay" class="saito-overlay">\n        <div id="saito-overlay-closebox" class="saito-overlay-closebox"><i class="fas fa-times-circle saito-overlay-closebox-btn"></i></div>\n      </div>\n      <div id="saito-overlay-backdrop" class="saito-overlay-backdrop"></div>\n    ':'  \n      <div id="saito-overlay" class="saito-overlay"></div>\n      <div id="saito-overlay-backdrop" class="saito-overlay-backdrop"></div>\n    '}},function(e,t){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=3)}([function(e,t,r){"use strict";function n(e){return e>4294967295&&(e-=4294967296),e.toString(2).padStart(32,"0")}function a(e){return parseInt(e,2)}Object.defineProperty(t,"__esModule",{value:!0}),t.intu8=function(e){return e>255&&(e-=256),e.toString(2).padStart(8,"0")},t.intu32=n,t.intu64=function(e){return e.toString(2).padStart(64,"0")},t.bitwiseShift=function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,n=e.substring(0,r-t),a=0;a<t;a++)n="0"+n;return n},t.u64u32=function(e){return e.substring(32,64)},t.wrappingAdd=function(e,t){var r=a(e)+a(t);return r>4294967295&&(r-=4294967296),n(r)},t.u32hex=function(e){return parseInt(e,2).toString(16).padStart(2,"0")},t.u64int=function(e){return parseInt(e,2)},t.u32int=a,t.u8hex=function(e){return e.toString(16).padStart(2,"0")},t.rotateRight=function(e,t){return e.substring(32-t)+e.substring(0,32-t)},t.xor=function(e,t){for(var r=[],n=0;n<32;n++)r+=e[n]==t[n]?"0":"1";return r},t.or=function(e,t){for(var r=[],n=0;n<32;n++)r+="1"===e[n]||"1"===t[n]?"1":"0";return r},t.and=function(e,t){for(var r=[],n=0;n<32;n++)r+="1"===e[n]&&"1"===t[n]?"1":"0";return r},t.or64=function(e,t){for(var r=[],n=0;n<64;n++)r+="1"===e[n]||"1"===t[n]?"1":"0";return r},t.and64=function(e,t){for(var r=[],n=0;n<64;n++)r+="1"===e[n]&&"1"===t[n]?"1":"0";return r},t.first_8_words=function(e){return e.slice(0,8)},t.words_from_little_endian_bytes=function(e){for(var t=[],r=0;r<e.length;r+=4){if(void 0===e[r]||void 0===e[r+1]||void 0===e[r+2]||void 0===e[r+3])return t;t.push(e[r+3].toString(2).padStart(8,"0")+e[r+2].toString(2).padStart(8,"0")+e[r+1].toString(2).padStart(8,"0")+e[r].toString(2).padStart(8,"0"))}return t},t.little_endian_bytes_from_words=function(e){for(var t=new Uint8Array(4*e.length),r=0;r<t.length;r+=4)t[r]=parseInt(e[r].substring(24,32),2),t[r+1]=parseInt(e[r].substring(16,24),2),t[r+2]=parseInt(e[r].substring(8,16),2),t[r+3]=parseInt(e[r].substring(0,8),2);return t},t.chunkArray=function(e,t){for(var r=[],n=0;n<e.length;n+=chunk)r.push(array.slice(n,n+chunk));return r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.g=a,t.round=i,t.permute=o,t.default=function(e,t,r,a,l){var u=[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],s[0],s[1],s[2],s[3],(0,n.u64u32)(r),(0,n.u64u32)((0,n.bitwiseShift)(r,32)),a,l];u=i(u,t),u=i(u,t=o(t,c)),u=i(u,t=o(t,c)),u=i(u,t=o(t,c)),u=i(u,t=o(t,c)),u=i(u,t=o(t,c)),u=i(u,t=o(t,c));for(var d=0;d<8;d++)u[d]=(0,n.xor)(u[d],u[d+8]),u[d+8]=(0,n.xor)(u[d+8],e[d]);return u};var n=r(0);function a(e,t,r,a,i,o,s){return e[t]=(0,n.wrappingAdd)((0,n.wrappingAdd)(e[t],e[r]),o),e[i]=(0,n.rotateRight)((0,n.xor)(e[i],e[t]),16),e[a]=(0,n.wrappingAdd)(e[a],e[i]),e[r]=(0,n.rotateRight)((0,n.xor)(e[r],e[a]),12),e[t]=(0,n.wrappingAdd)((0,n.wrappingAdd)(e[t],e[r]),s),e[i]=(0,n.rotateRight)((0,n.xor)(e[i],e[t]),8),e[a]=(0,n.wrappingAdd)(e[a],e[i]),e[r]=(0,n.rotateRight)((0,n.xor)(e[r],e[a]),7),e}function i(e,t){var r=e.slice(0);return r=a(r,0,4,8,12,t[0],t[1]),r=a(r,1,5,9,13,t[2],t[3]),r=a(r,2,6,10,14,t[4],t[5]),r=a(r,3,7,11,15,t[6],t[7]),r=a(r,0,5,10,15,t[8],t[9]),r=a(r,1,6,11,12,t[10],t[11]),r=a(r,2,7,8,13,t[12],t[13]),a(r,3,4,9,14,t[14],t[15])}function o(e,t){for(var r=[],n=0;n<16;n++)r[n]=e[t[n]];return r}var s=[(0,n.intu32)(1779033703),(0,n.intu32)(3144134277),(0,n.intu32)(1013904242),(0,n.intu32)(2773480762),(0,n.intu32)(1359893119),(0,n.intu32)(2600822924),(0,n.intu32)(528734635),(0,n.intu32)(1541459225)],c=[2,6,3,10,7,0,4,13,1,11,12,5,9,14,15,8]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=r(1))&&n.__esModule?n:{default:n},i=r(0);function o(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=(0,i.intu32)(8),l=function(){function e(t,r,n,a,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.input_chaining_value=t,this.block_words=r,this.counter=n,this.block_len=a,this.flags=i}var t,r;return t=e,(r=[{key:"chaining_value",value:function(){return(0,i.first_8_words)((0,a.default)(this.input_chaining_value,this.block_words,this.counter,this.block_len,this.flags))}},{key:"root_output_bytes",value:function(e){for(var t=0,r=[];r.length<e;){var n=(0,a.default)(this.input_chaining_value,this.block_words,(0,i.intu64)(t),this.block_len,(0,i.or)(this.flags,c)),s=!0,l=!1,u=void 0;try{for(var d,h=n[Symbol.iterator]();!(s=(d=h.next()).done);s=!0){var p=d.value;r=[].concat(o(r),o((0,i.little_endian_bytes_from_words)([p])))}}catch(e){l=!0,u=e}finally{try{s||null==h.return||h.return()}finally{if(l)throw u}}t+=1}return r.slice(0,e)}}])&&s(t.prototype,r),e}();t.default=l},function(e,t,r){"use strict";var n=r(4);e.exports=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(0),a=o(r(5)),i=o(r(2));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var l=(0,n.intu32)(64),u=(0,n.intu32)(4),d=[(0,n.intu32)(1779033703),(0,n.intu32)(3144134277),(0,n.intu32)(1013904242),(0,n.intu32)(2773480762),(0,n.intu32)(1359893119),(0,n.intu32)(2600822924),(0,n.intu32)(528734635),(0,n.intu32)(1541459225)],h=(0,n.intu32)(16),p=(0,n.intu32)(32),f=(0,n.intu32)(64);function m(e,t,r,a){var o=[].concat(c(e.slice(0,8)),c(t.slice(0,8)));return new i.default(r,o,(0,n.intu64)(0),l,(0,n.or)(u,a))}function g(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;++r)t[r]=e.charCodeAt(r);return t}var y=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.chunk_state=new a.default(t,0,r),this.key=t,this.cv_stack=[],this.cv_stack_len=0,this.flags=r}var t,r,i;return t=e,i=[{key:"newRegular",value:function(){return new e(d,(0,n.intu32)(0))}},{key:"newKeyed",value:function(t){return"string"==typeof t?t=g(t):input=new Uint8Array(t),new e((0,n.words_from_little_endian_bytes)(t),h)}},{key:"newDeriveKey",value:function(t){var r=new e(d,p);r.update(t);var a=r.finalize(32,"bytes");return new e((0,n.words_from_little_endian_bytes)(a),f)}}],(r=[{key:"pushStack",value:function(e){this.cv_stack[this.cv_stack_len]=e,this.cv_stack_len+=1}},{key:"popStack",value:function(){return this.cv_stack_len-=1,this.cv_stack[this.cv_stack_len]}},{key:"addChunkChainingValue",value:function(e,t){for(;(0,n.u64int)(t)%2==0;)e=m(this.popStack(),e,this.key,this.flags).chaining_value(),t=(0,n.bitwiseShift)(t,1);return this.pushStack(e),t}},{key:"update",value:function(e){for(e="string"==typeof e?g(e):new Uint8Array(e);e.length;){if(1024==this.chunk_state.len()){var t=this.chunk_state.output().chaining_value(),r=(0,n.intu64)(this.chunk_state.chunk_counter+1);this.addChunkChainingValue(t,r),this.chunk_state=new a.default(this.key,(0,n.u64int)(r),this.flags)}var i=1024-this.chunk_state.len(),o=Math.min(i,e.length);this.chunk_state.update(e.slice(0,o)),e=o===e.length?[]:e.slice(o)}return this}},{key:"finalize",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hex",r=this.chunk_state.output(),a=this.cv_stack_len;a>0;)a-=1,r=m(this.cv_stack[a],r.chaining_value(),this.key,this.flags);var i=r.root_output_bytes(e);return"hex"==t?i.map(n.u8hex).join(""):i}}])&&s(t.prototype,r),i&&s(t,i),e}();t.default=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(0),a=o(r(1)),i=o(r(2));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=(0,n.intu32)(1),l=(0,n.intu32)(2),u=function(){function e(t,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.chaining_value=t,this.chunk_counter=r,(this.block=[]).length=64,this.block.fill((0,n.intu32)(0)),this.block_len=0,this.blocks_compressed=0,this.flags=a}var t,r;return t=e,(r=[{key:"len",value:function(){return 64*this.blocks_compressed+this.block_len}},{key:"start_flag",value:function(){return 0===this.blocks_compressed?c:(0,n.intu32)(0)}},{key:"update",value:function(e){for(;e.length;){if(64==this.block_len){var t=(0,n.words_from_little_endian_bytes)(this.block);this.chaining_value=(0,n.first_8_words)((0,a.default)(this.chaining_value,t,(0,n.intu64)(this.chunk_counter),(0,n.intu32)(64),(0,n.or)(this.flags,this.start_flag()))),this.blocks_compressed+=1,(this.block=[]).length=64,this.block.fill((0,n.intu32)(0)),this.block_len=0}for(var r=64-this.block_len,i=Math.min(r,e.length),o=0;o<i;o++){var s=o+this.block_len;this.block[s]=e[o]}this.block_len+=i,e=i===e.length?[]:e.slice(i)}}},{key:"output",value:function(){var e=(0,n.words_from_little_endian_bytes)(this.block);return new i.default(this.chaining_value,e,(0,n.intu64)(this.chunk_counter),(0,n.intu32)(this.block_len),(0,n.or)((0,n.or)(this.flags,this.start_flag()),l))}}])&&s(t.prototype,r),e}();t.default=u}])},function(e,t,r){var n={"./arcade/arcade":436,"./arcade/arcade.js":436,"./arcade/lib/arcade-game/advanced-overlay":211,"./arcade/lib/arcade-game/advanced-overlay.js":211,"./arcade/lib/arcade-game/advanced-overlay.template":212,"./arcade/lib/arcade-game/advanced-overlay.template.js":212,"./arcade/lib/arcade-game/arcade-game-details":132,"./arcade/lib/arcade-game/arcade-game-details.js":132,"./arcade/lib/arcade-game/arcade-game-details.template":210,"./arcade/lib/arcade-game/arcade-game-details.template.js":210,"./arcade/lib/arcade-game/game-loaded.template":209,"./arcade/lib/arcade-game/game-loaded.template.js":209,"./arcade/lib/arcade-game/game-loader":207,"./arcade/lib/arcade-game/game-loader.js":207,"./arcade/lib/arcade-game/game-loader.template":208,"./arcade/lib/arcade-game/game-loader.template.js":208,"./arcade/lib/arcade-main/arcade-infobox":205,"./arcade/lib/arcade-main/arcade-infobox.js":205,"./arcade/lib/arcade-main/arcade-main":201,"./arcade/lib/arcade-main/arcade-main.js":201,"./arcade/lib/arcade-main/arcade-posts":203,"./arcade/lib/arcade-main/arcade-posts.js":203,"./arcade/lib/arcade-main/templates/arcade-container.template":93,"./arcade/lib/arcade-main/templates/arcade-container.template.js":93,"./arcade/lib/arcade-main/templates/arcade-infobox.template":206,"./arcade/lib/arcade-main/templates/arcade-infobox.template.js":206,"./arcade/lib/arcade-main/templates/arcade-invite.template":131,"./arcade/lib/arcade-main/templates/arcade-invite.template.js":131,"./arcade/lib/arcade-main/templates/arcade-main.template":202,"./arcade/lib/arcade-main/templates/arcade-main.template.js":202,"./arcade/lib/arcade-main/templates/arcade-observe.template":214,"./arcade/lib/arcade-main/templates/arcade-observe.template.js":214,"./arcade/lib/arcade-main/templates/arcade-posts.template":204,"./arcade/lib/arcade-main/templates/arcade-posts.template.js":204,"./arcade/lib/arcade-main/templates/arcposts.old":1055,"./arcade/lib/arcade-main/templates/saito-sarousel-leaf.template":439,"./arcade/lib/arcade-main/templates/saito-sarousel-leaf.template.js":439,"./arcade/lib/arcade-sidebar/arcade-games-full-list-overlay.template":217,"./arcade/lib/arcade-sidebar/arcade-games-full-list-overlay.template.js":217,"./arcade/lib/arcade-sidebar/arcade-sidebar":215,"./arcade/lib/arcade-sidebar/arcade-sidebar.js":215,"./arcade/lib/arcade-sidebar/arcade-sidebar.template":216,"./arcade/lib/arcade-sidebar/arcade-sidebar.template.js":216,"./arcade/mockinvites":218,"./arcade/mockinvites.js":218,"./archive/archive":440,"./archive/archive.js":440,"./blackjack/blackjack":441,"./blackjack/blackjack.js":441,"./chat/chat":442,"./chat/chat.js":442,"./chat/lib/chat-main/chat-list":244,"./chat/lib/chat-main/chat-list.js":244,"./chat/lib/chat-main/chat-main":243,"./chat/lib/chat-main/chat-main.js":243,"./chat/lib/chat-main/chat-room":99,"./chat/lib/chat-main/chat-room.js":99,"./chat/lib/email-chat/chat-box":225,"./chat/lib/email-chat/chat-box.js":225,"./chat/lib/email-chat/chat-sidebar":222,"./chat/lib/email-chat/chat-sidebar.js":222,"./chat/lib/email-chat/email-chat":221,"./chat/lib/email-chat/email-chat.js":221,"./chat/lib/templates/chat-box-message-block.template":133,"./chat/lib/templates/chat-box-message-block.template.js":133,"./chat/lib/templates/chat-box-message.template":227,"./chat/lib/templates/chat-box-message.template.js":227,"./chat/lib/templates/chat-box.template":226,"./chat/lib/templates/chat-box.template.js":226,"./chat/lib/templates/chat-list-header.template":246,"./chat/lib/templates/chat-list-header.template.js":246,"./chat/lib/templates/chat-list.template":245,"./chat/lib/templates/chat-list.template.js":245,"./chat/lib/templates/chat-main.template":248,"./chat/lib/templates/chat-main.template.js":248,"./chat/lib/templates/chat-room.template":247,"./chat/lib/templates/chat-room.template.js":247,"./chat/lib/templates/chat-sidebar-contact.template":224,"./chat/lib/templates/chat-sidebar-contact.template.js":224,"./chat/lib/templates/chat-sidebar.template":223,"./chat/lib/templates/chat-sidebar.template.js":223,"./chess/chess":472,"./chess/chess.js":472,"./chess/lib/chess":249,"./chess/lib/chess.js":249,"./chess/lib/chess.min":473,"./chess/lib/chess.min.js":473,"./chess/lib/chessboard":250,"./chess/lib/chessboard.js":250,"./debug/debug":474,"./debug/debug.js":474,"./debug/lib/email-appspace/debug-appspace":251,"./debug/lib/email-appspace/debug-appspace.js":251,"./debug/lib/email-appspace/debug-appspace.template":252,"./debug/lib/email-appspace/debug-appspace.template.js":252,"./email/email":475,"./email/email.js":475,"./email/lib/email-main/email-body/email-appspace/email-appspace":272,"./email/lib/email-main/email-body/email-appspace/email-appspace.js":272,"./email/lib/email-main/email-body/email-appspace/email-appspace.template":273,"./email/lib/email-main/email-body/email-appspace/email-appspace.template.js":273,"./email/lib/email-main/email-body/email-body":267,"./email/lib/email-main/email-body/email-body.js":267,"./email/lib/email-main/email-body/email-body.template":478,"./email/lib/email-main/email-body/email-body.template.js":478,"./email/lib/email-main/email-body/email-cryptoappspace/email-cryptoappspace":274,"./email/lib/email-main/email-body/email-cryptoappspace/email-cryptoappspace.js":274,"./email/lib/email-main/email-body/email-cryptoappspace/email-cryptoappspace.template":275,"./email/lib/email-main/email-body/email-cryptoappspace/email-cryptoappspace.template.js":275,"./email/lib/email-main/email-body/email-detail/email-detail":270,"./email/lib/email-main/email-body/email-detail/email-detail.js":270,"./email/lib/email-main/email-body/email-detail/email-detail.template":271,"./email/lib/email-main/email-body/email-detail/email-detail.template.js":271,"./email/lib/email-main/email-body/email-form/email-form":268,"./email/lib/email-main/email-body/email-form/email-form.js":268,"./email/lib/email-main/email-body/email-form/email-form.template":269,"./email/lib/email-main/email-body/email-form/email-form.template.js":269,"./email/lib/email-main/email-body/email-list/email-list":258,"./email/lib/email-main/email-body/email-list/email-list-row.template":259,"./email/lib/email-main/email-body/email-list/email-list-row.template.js":259,"./email/lib/email-main/email-body/email-list/email-list.js":258,"./email/lib/email-main/email-body/email-list/email-list.template":139,"./email/lib/email-main/email-body/email-list/email-list.template.js":139,"./email/lib/email-main/email-header/email-appspace-header/email-appspace-header":263,"./email/lib/email-main/email-header/email-appspace-header/email-appspace-header.js":263,"./email/lib/email-main/email-header/email-appspace-header/email-appspace-header.template":264,"./email/lib/email-main/email-header/email-appspace-header/email-appspace-header.template.js":264,"./email/lib/email-main/email-header/email-cryptoappspace-header/email-cryptoappspace-header":265,"./email/lib/email-main/email-header/email-cryptoappspace-header/email-cryptoappspace-header.js":265,"./email/lib/email-main/email-header/email-cryptoappspace-header/email-cryptoappspace-header.template":266,"./email/lib/email-main/email-header/email-cryptoappspace-header/email-cryptoappspace-header.template.js":266,"./email/lib/email-main/email-header/email-detail-header/email-detail-header":257,"./email/lib/email-main/email-header/email-detail-header/email-detail-header.js":257,"./email/lib/email-main/email-header/email-detail-header/email-detail-header.template":260,"./email/lib/email-main/email-header/email-detail-header/email-detail-header.template.js":260,"./email/lib/email-main/email-header/email-form-header/email-form-header":261,"./email/lib/email-main/email-header/email-form-header/email-form-header.js":261,"./email/lib/email-main/email-header/email-form-header/email-form-header.template":262,"./email/lib/email-main/email-header/email-form-header/email-form-header.template.js":262,"./email/lib/email-main/email-header/email-header":138,"./email/lib/email-main/email-header/email-header.js":138,"./email/lib/email-main/email-header/email-inbox-header/email-inbox-header":255,"./email/lib/email-main/email-header/email-inbox-header/email-inbox-header.js":255,"./email/lib/email-main/email-header/email-inbox-header/email-inbox-header.template":256,"./email/lib/email-main/email-header/email-inbox-header/email-inbox-header.template.js":256,"./email/lib/email-main/email-main":253,"./email/lib/email-main/email-main.js":253,"./email/lib/email-main/email-main.template":254,"./email/lib/email-main/email-main.template.js":254,"./email/lib/email-sidebar/email-bars-menu":280,"./email/lib/email-sidebar/email-bars-menu.js":280,"./email/lib/email-sidebar/email-bars-menu.template":281,"./email/lib/email-sidebar/email-bars-menu.template.js":281,"./email/lib/email-sidebar/email-chat":282,"./email/lib/email-sidebar/email-chat.js":282,"./email/lib/email-sidebar/email-chat.template":479,"./email/lib/email-sidebar/email-chat.template.js":479,"./email/lib/email-sidebar/email-controls":278,"./email/lib/email-sidebar/email-controls.js":278,"./email/lib/email-sidebar/email-controls.template":279,"./email/lib/email-sidebar/email-controls.template.js":279,"./email/lib/email-sidebar/email-sidebar":276,"./email/lib/email-sidebar/email-sidebar.js":276,"./email/lib/email-sidebar/email-sidebar.template":277,"./email/lib/email-sidebar/email-sidebar.template.js":277,"./encrypt/encrypt":480,"./encrypt/encrypt.js":480,"./encrypt/lib/email-appspace/encrypt-appspace":481,"./encrypt/lib/email-appspace/encrypt-appspace.js":481,"./encrypt/lib/email-appspace/encrypt-appspace.template":283,"./encrypt/lib/email-appspace/encrypt-appspace.template.js":283,"./imperium/compile":1165,"./imperium/imperium":482,"./imperium/imperium.js":482,"./imperium/src/actions/action":483,"./imperium/src/actions/action.js":483,"./imperium/src/actions/activate":484,"./imperium/src/actions/activate.js":484,"./imperium/src/actions/bombardment":485,"./imperium/src/actions/bombardment.js":485,"./imperium/src/actions/counter":486,"./imperium/src/actions/counter.js":486,"./imperium/src/actions/ground_combat":487,"./imperium/src/actions/ground_combat.js":487,"./imperium/src/actions/post_agenda":488,"./imperium/src/actions/post_agenda.js":488,"./imperium/src/actions/pre_agenda":489,"./imperium/src/actions/pre_agenda.js":489,"./imperium/src/actions/riders":490,"./imperium/src/actions/riders.js":490,"./imperium/src/actions/space_combat":491,"./imperium/src/actions/space_combat.js":491,"./imperium/src/actions/strategy":492,"./imperium/src/actions/strategy.js":492,"./imperium/src/agendas/agendas":493,"./imperium/src/agendas/agendas.js":493,"./imperium/src/factions/jolnar":494,"./imperium/src/factions/jolnar.js":494,"./imperium/src/factions/muaat":495,"./imperium/src/factions/muaat.js":495,"./imperium/src/factions/sardakk":496,"./imperium/src/factions/sardakk.js":496,"./imperium/src/factions/sol":497,"./imperium/src/factions/sol.js":497,"./imperium/src/factions/xxcha":498,"./imperium/src/factions/xxcha.js":498,"./imperium/src/factions/yin":499,"./imperium/src/factions/yin.js":499,"./imperium/src/factions/yssaril":500,"./imperium/src/factions/yssaril.js":500,"./imperium/src/imperium-action-cards":501,"./imperium/src/imperium-action-cards.js":501,"./imperium/src/imperium-agenda-cards":502,"./imperium/src/imperium-agenda-cards.js":502,"./imperium/src/imperium-display":503,"./imperium/src/imperium-display.js":503,"./imperium/src/imperium-end":504,"./imperium/src/imperium-end.js":504,"./imperium/src/imperium-events":505,"./imperium/src/imperium-events.js":505,"./imperium/src/imperium-factions":506,"./imperium/src/imperium-factions.js":506,"./imperium/src/imperium-gameloop":507,"./imperium/src/imperium-gameloop.js":507,"./imperium/src/imperium-helpers":508,"./imperium/src/imperium-helpers.js":508,"./imperium/src/imperium-initialize":509,"./imperium/src/imperium-initialize.js":509,"./imperium/src/imperium-objectives":510,"./imperium/src/imperium-objectives.js":510,"./imperium/src/imperium-player":511,"./imperium/src/imperium-player.js":511,"./imperium/src/imperium-promissary":512,"./imperium/src/imperium-promissary.js":512,"./imperium/src/imperium-start":513,"./imperium/src/imperium-start.js":513,"./imperium/src/imperium-state":514,"./imperium/src/imperium-state-checks":515,"./imperium/src/imperium-state-checks.js":515,"./imperium/src/imperium-state-updates":516,"./imperium/src/imperium-state-updates.js":516,"./imperium/src/imperium-state.js":514,"./imperium/src/imperium-strategy-cards":517,"./imperium/src/imperium-strategy-cards.js":517,"./imperium/src/imperium-tech":518,"./imperium/src/imperium-tech.js":518,"./imperium/src/imperium-ui":519,"./imperium/src/imperium-ui.js":519,"./imperium/src/imperium-unit":520,"./imperium/src/imperium-unit.js":520,"./imperium/src/imperium-universe":521,"./imperium/src/imperium-universe.js":521,"./imperium/src/objectives/secret":522,"./imperium/src/objectives/secret.js":522,"./imperium/src/objectives/stage1":523,"./imperium/src/objectives/stage1.js":523,"./imperium/src/objectives/stage2":524,"./imperium/src/objectives/stage2.js":524,"./imperium/src/promissary/promissary":525,"./imperium/src/promissary/promissary.js":525,"./imperium/src/strategy/construction":526,"./imperium/src/strategy/construction.js":526,"./imperium/src/strategy/diplomacy":527,"./imperium/src/strategy/diplomacy.js":527,"./imperium/src/strategy/imperial":528,"./imperium/src/strategy/imperial.js":528,"./imperium/src/strategy/leadership":529,"./imperium/src/strategy/leadership.js":529,"./imperium/src/strategy/politics":530,"./imperium/src/strategy/politics.js":530,"./imperium/src/strategy/tech":531,"./imperium/src/strategy/tech.js":531,"./imperium/src/strategy/trade":532,"./imperium/src/strategy/trade.js":532,"./imperium/src/strategy/warfare":533,"./imperium/src/strategy/warfare.js":533,"./imperium/src/tech/blue":534,"./imperium/src/tech/blue.js":534,"./imperium/src/tech/green":535,"./imperium/src/tech/green.js":535,"./imperium/src/tech/red":536,"./imperium/src/tech/red.js":536,"./imperium/src/tech/units":537,"./imperium/src/tech/units.js":537,"./imperium/src/tech/yellow":538,"./imperium/src/tech/yellow.js":538,"./imperium/src/units/universal":539,"./imperium/src/units/universal.js":539,"./myqrcode/lib/email-appspace/myqrcode-appspace":284,"./myqrcode/lib/email-appspace/myqrcode-appspace.js":284,"./myqrcode/lib/email-appspace/myqrcode-appspace.template":285,"./myqrcode/lib/email-appspace/myqrcode-appspace.template.js":285,"./myqrcode/myqrcode":540,"./myqrcode/myqrcode.js":540,"./poker/poker":541,"./poker/poker.js":541,"./post/lib/arcade-posts/arcade-posts":286,"./post/lib/arcade-posts/arcade-posts.js":286,"./post/lib/arcade-posts/arcade-posts.template":287,"./post/lib/arcade-posts/arcade-posts.template.js":287,"./post/lib/arcade-posts/post-teaser.template":288,"./post/lib/arcade-posts/post-teaser.template.js":288,"./post/lib/post-main/post-main":292,"./post/lib/post-main/post-main.js":292,"./post/lib/post-main/post-main.template":293,"./post/lib/post-main/post-main.template.js":293,"./post/lib/post-main/post-teaser.template":294,"./post/lib/post-main/post-teaser.template.js":294,"./post/lib/post-main/post-thread.template":542,"./post/lib/post-main/post-thread.template.js":542,"./post/lib/post-overlay/post-create":142,"./post/lib/post-overlay/post-create.js":142,"./post/lib/post-overlay/post-create.template":291,"./post/lib/post-overlay/post-create.template.js":291,"./post/lib/post-overlay/post-view":141,"./post/lib/post-overlay/post-view-comment.template":290,"./post/lib/post-overlay/post-view-comment.template.js":290,"./post/lib/post-overlay/post-view.js":141,"./post/lib/post-overlay/post-view.template":289,"./post/lib/post-overlay/post-view.template.js":289,"./post/lib/post-sidebar/post-sidebar":295,"./post/lib/post-sidebar/post-sidebar.js":295,"./post/lib/post-sidebar/post-sidebar.template":296,"./post/lib/post-sidebar/post-sidebar.template.js":296,"./post/lib/post/new-post":543,"./post/lib/post/new-post.js":543,"./post/lib/post/new-post.template":297,"./post/lib/post/new-post.template.js":297,"./post/lib/post/show-post":544,"./post/lib/post/show-post.js":544,"./post/lib/post/show-post.template":298,"./post/lib/post/show-post.template.js":298,"./post/lib/style.template":143,"./post/lib/style.template.js":143,"./post/post":545,"./post/post.js":545,"./qrscanner/lib/add-contact":299,"./qrscanner/lib/add-contact-complete":301,"./qrscanner/lib/add-contact-complete.js":301,"./qrscanner/lib/add-contact-complete.template":302,"./qrscanner/lib/add-contact-complete.template.js":302,"./qrscanner/lib/add-contact.js":299,"./qrscanner/lib/add-contact.template":300,"./qrscanner/lib/add-contact.template.js":300,"./qrscanner/lib/scanner/scanner":557,"./qrscanner/lib/scanner/scanner.js":557,"./qrscanner/qrscanner":558,"./qrscanner/qrscanner.js":558,"./registry/lib/email-appspace/registry-appspace":559,"./registry/lib/email-appspace/registry-appspace.js":559,"./registry/lib/email-appspace/registry-appspace.template":303,"./registry/lib/email-appspace/registry-appspace.template.js":303,"./registry/lib/modal/registry-modal":304,"./registry/lib/modal/registry-modal-success.template":306,"./registry/lib/modal/registry-modal-success.template.js":306,"./registry/lib/modal/registry-modal.js":304,"./registry/lib/modal/registry-modal.template":305,"./registry/lib/modal/registry-modal.template.js":305,"./registry/registry":560,"./registry/registry.js":560,"./relay/relay":561,"./relay/relay.js":561,"./settings/lib/email-appspace/settings-appspace":307,"./settings/lib/email-appspace/settings-appspace.js":307,"./settings/lib/email-appspace/settings-appspace.template":308,"./settings/lib/email-appspace/settings-appspace.template.js":308,"./settings/settings":562,"./settings/settings.js":562,"./solitrio/solitrio":563,"./solitrio/solitrio.js":563,"./website/lib/data":564,"./website/lib/data.js":564,"./website/lib/data.template":309,"./website/lib/data.template.js":309,"./website/lib/subpage/faq.template":310,"./website/lib/subpage/faq.template.js":310,"./website/lib/subpage/howSaitoWorks.template":311,"./website/lib/subpage/howSaitoWorks.template.js":311,"./website/lib/subpage/team.template":312,"./website/lib/subpage/team.template.js":312,"./website/lib/subpage/token/pools.template":313,"./website/lib/subpage/token/pools.template.js":313,"./website/lib/subpage/token/token.template":314,"./website/lib/subpage/token/token.template.js":314,"./website/lib/subpage/token/tokenburn.template":315,"./website/lib/subpage/token/tokenburn.template.js":315,"./website/lib/subpage/web3.template":316,"./website/lib/subpage/web3.template.js":316,"./website/website":565,"./website/website.js":565,"./wordblocks/wordblocks":566,"./wordblocks/wordblocks.js":566};function a(e){var t=i(e);return r(t)}function i(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=i,e.exports=a,a.id=1040},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(1042),i=r(1043),o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t}var t,r,o;return t=e,(r=[{key:"render",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"arcade",n=arguments.length>3?arguments[3]:void 0;document.getElementById("saito-carousel")||e.browser.prependElementToDom(a(),document.getElementById(n)),this.addLeaves(e,r),document.querySelector("#saito-carousel").onclick=function(){e.browser.logMatomoEvent("UXError","ArcadeUXError","CarouselClickAttempt")}}},{key:"attachEvents",value:function(e,t){}},{key:"addLeaves",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"arcade";carouselElem=document.querySelector(".carousel-wrapper"),carouselElem.innerHTML+="",e.modules.respondTo(t+"-carousel").forEach((function(e,r){var n=e.respondTo(t+"-carousel");n&&(carouselElem.innerHTML+=i(e,n))}))}}])&&n(t.prototype,r),o&&n(t,o),e}();e.exports=o},function(e,t){e.exports=SaitoGameCarouselTemplate=function(){return'\n  <div id="saito-carousel" class="saito-carousel">\n    <div id="saito-carousel-wrapper" class="carousel-wrapper">\n      <img src="/saito/img/16by5.png" class="carousel-spacer" />\n    </div>\n  </div>\n  '}},function(e,t){e.exports=AracadeGameCarouselLeafTemplate=function(e,t){return'\n         <div class="leaf" style="background: url('.concat(t.background,');background-size:cover">\n           <div class="big">').concat(t.title,"</div>\n         </div>\n  ")}},function(e,t){e.exports=ModalAddUserTemplate=function(){return'  \n  <div class="game-crypto-transfer-manager-container">\n    \n    <h2 class="auth_title">Authorize Crypto Transfer</h2>\n\n    <p></p>\n\n    <div class="button crypto_transfer_btn" id="crypto_transfer_btn">authorize</div>\n\n  </div>\n  '}},function(e,t){e.exports=GameCryptoTransferManagerSendTemplate=function(e,t){return'  \n  <div class="game-crypto-transfer-manager-container">\n    \n    <h2 class="auth_title">Authorize Crypto Transfer</h2>\n\n    <div class="amount">'.concat(t.amount," ").concat(t.ticker,'</div>\n\n    <div class="send_to">to</div>\n\n    <div class="to_address">').concat(t.to,'</div>\n\n    <div class="button crypto_transfer_btn" id="crypto_transfer_btn">authorize</div>\n\n  </div>\n  ')}},function(e,t){e.exports=GameCryptoTransferManagerReceive=function(e,t){return'  \n  <div class="game-crypto-transfer-manager-container">\n    \n    <h2 class="auth_title">Waiting for Transfer</h2>\n\n    <div class="amount">'.concat(t.amount," ").concat(t.ticker,'</div>\n\n    <img class="spinner" src="/website/img/spinner.svg" />\n\n    <div class="transfer-details">\n      <div class="send_to">from</div>\n      <div class="from_address">').concat(t.from,'</div>\n      <div class="send_to">to</div>\n      <div class="to_address">').concat(t.to,"</div>\n    </div>\n\n  </div>\n  ")}},function(e,t){e.exports=GameCryptoTransferManagerSendTemplate=function(e,t){return'  \n  <div class="game-crypto-transfer-manager-container">\n    \n    <h2 class="auth_title">Checking '.concat(t.ticker,' Balance</h2>\n\n    <div class="to_address">').concat(t.address,'</div>\n\n    <img style="margin-top: 20px" class="spinner" src="/website/img/spinner.svg" />\n\n  </div>\n  ')}},function(e,t){e.exports=GameOverlayTemplate=function(){return'  \n    <div id="game-overlay" class="game-overlay"></div>\n    <div id="game-overlay-backdrop" class="game-overlay-backdrop"></div>\n  '}},function(e,t){e.exports=ModalRegisterUsernameTemplate=function(){return'  \n  <div class="welcome-modal-wrapper">\n    <div class="welcome-modal-action">\n      <div class="welcome-modal-left">\n        <div class="welcome-modal-header">Register a Username</h1></div>\n        <div class="welcome-modal-main">\n          <div style="margin:1em 0">Please register a Saito username:</div>\n          <div style="display:flex;">\n      <input style="width:60%; color:black; background:#efefef;" class="username-registry-input" id="registry-input" type="text" placeholder="username"><b style="margin: 1em 1em 1em 10px;">@saito</b>\n      <input style="display: var(--saito-wu);" id="name" name="name" type="text"></input>\n      <button id="registry-modal-button" style="clear:both; margin:unset; margin-left:0px; min-width:6em; font-size:0.7em;background:#efefef;border:1px solid var(--saito-red);color: var(--saito-cyber-black);">REGISTER USERNAME</button>\n          </div>\n        </div>\n        <div class="welcome-modal-info">\n            <div class="tip"><b>What is a Saito username? <i class="fas fa-info-circle"></i></b>\n            <div class="tiptext">Saito usernames can be used to send and receive messages. Some applications require Saito usernames to help prevent robots/spam. It takes a minute to register an address. You should get one!</div>\n            </div>\n         </div>\n      </div>\n    </div>\n    <div class="welcome-modal-exit tutorial-skip">\n      <p>\n          Thanks, but...\n      </p>\n      <p>\n          Maybe later.\n      </p>\n      <i class="fas fa-arrow-right"></i>\n    </div>\n  </div>\n  '}},function(e,t){e.exports=SaitoHeaderTemplate=function(e,t){return'\n\n  <div id="saito-header" class="header header-home">\n    <div class="header-wrapper">\n      <a id="header-logo-link" href="/"><img class="logo" src="/saito/img/logo.svg"></a>\n      <div id="header-icon-links" class="header-icon-links">\n        <div id="header-mini-wallet" class="header-mini-wallet">\n          <span id="header-username" class="header-username"></span>\n        </div>\n        <i id="navigator" class="header-icon icon-med fas fa-bars"></i>\n      </div>\n\n      <div id="settings-dropdown" class="header-dropdown">\n        <div class="personal-info">\n          <img id="header-profile-photo" class="header-profile-photo" />\n          <div class="account-info">\n            <div id="profile-public-key" class="profile-public-key"></div>\n            <div class="saito-select">\n              <select id="header-token-select" class="saito-slct"></select>\n            </div>\n            </div>\n        </div>\n\n        <center><hr width="98%" style="color:#888"/></center>\n\n        <div class="wallet-actions">\n          \x3c!-- faucet disabled \n          div class="wallet-action-row" id="header-dropdown-faucet">\n            <span class="scan-qr-info"><i class="settings-fas-icon fas fa-tint"></i>SAITO testnet faucet</span>\n          </div\n          --\x3e\n          <div class="wallet-action-row" id="header-dropdown-backup-wallet">\n            <span class="scan-qr-info"><i class="settings-fas-icon fas fa-copy"></i> Backup Access Keys</span>\n          </div>\n          <div class="wallet-action-row" id="header-dropdown-restore-wallet">\n            <span class="scan-qr-info"><i class="settings-fas-icon fas fa-redo"></i> Restore Access Keys</span>\n\t    <div style="display:none"><input id="saito-header-file-input" class="saito-header-file-input" type="file" name="name" style="display:none;" /></div>\n          </div>\n          <div class="wallet-action-row" id="header-dropdown-settings">\n            <span class="scan-qr-info"><i class="settings-fas-icon fas fa-wrench"></i> Settings </span>\n          </div>\n          <div class="wallet-action-row" id="header-dropdown-scan-qr">\n            <span class="scan-qr-info"><i class="settings-fas-icon fas fa-qrcode"></i> Scan </span>\n          </div>\n        </div>\n       </div>\n     </div>\n  '}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var a=l(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(u,e);var t,r,n,c=s(u);function u(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),0==(r=c.call(this,e)).browser_active&&(r.browser_active=1),""==r.name&&(r.name="UI Component"),r}return t=u,(r=[{key:"initialize",value:function(e){e.modules.uimods.includes(this)||e.modules.uimods.push(this),i(l(u.prototype),"initialize",this).call(this,e)}}])&&a(t.prototype,r),n&&a(t,n),u}(r(19));e.exports=u},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.shown=!1}var t,n,a;return t=e,(n=[{key:"render",value:function(e,t){if(!document.getElementById("modules-dropdown")){var r='\n      <hr/>\n      <div id="modules-dropdown" class="header-dropdown-links">\n      ';e.modules.getRespondTos("header-dropdown").forEach((function(e,t){r+='<div class="wallet-action-row"><a id="nav-'.concat(e.name,'" href="/').concat(e.slug,'" class="wallet-action-nav-link"><i class="settings-fas-icon ').concat(e.icon_fa,'"></i> ').concat(e.name,"</a></div>")})),r+="</div><hr>",e.browser.addElementToDom(r,"settings-dropdown"),this.attachEvents(e,t)}this.shown?document.querySelector("#settings-dropdown").classList.add("show-right-sidebar"):document.querySelector("#settings-dropdown").classList.remove("show-right-sidebar")}},{key:"attachEvents",value:function(e,t){var r=this,n=function(n){document.querySelectorAll(".wallet-action-row, #modules-dropdown a").forEach((function(e,t){n.currentTarget})),r.shown=!1,r.render(e,t)};window.removeEventListener("click",n),window.addEventListener("click",n),document.querySelectorAll(".wallet-action-row .wallet-action-nav-link").forEach((function(t,r){t.onclick=function(t){var r=t.currentTarget.id.replace("nav-","");e.browser.logMatomoEvent("Navigation","HeaderDropdownNavigationClick",r)}})),document.querySelector("#settings-dropdown").addEventListener("click",(function(e){e.cancelBubble=!0})),document.querySelectorAll("#header-mini-wallet, #navigator").forEach((function(n,a){n.onclick=function(n){if(r.shown=!r.shown,r.shown){var a=document.querySelector(".chat-box-close");a&&a.click()}r.render(e,t),n.cancelBubble=!0}}))}}])&&r(t.prototype,n),a&&r(t,a),e}();e.exports=n},function(e,t){e.exports=TextSizer={render:function(e,t){if(!document.getElementById("text-sizer")){e.browser.addElementToDom('\n      <div class="wallet-action-row">\n      <div id="text-sizer">\n        <table class="text-sizer-table">\n          <thead>\n            <tr>\n              <td><div class="fas fa-text-height"></div></td>\n              <td><div id="text-sizer-small" class="text-sizer-small">A /</div></td>\n              <td>\n                <div id="text-sizer-medium" class="text-sizer-medium">A /</div>\n              </td>\n              <td><div id="text-sizer-large" class="text-sizer-large">A</div></td>\n            </tr>\n          </thead>\n        </table>\n      </div>\n    </div>\n    <hr />',"settings-dropdown"),this.attachEvents(e,t)}},attachEvents:function(e,t){document.querySelector(".text-sizer-small").addEventListener("click",(function(){document.body.style.fontSize="1em"})),document.querySelector(".text-sizer-medium").addEventListener("click",(function(){document.body.style.fontSize="1.2em"})),document.querySelector(".text-sizer-large").addEventListener("click",(function(){document.body.style.fontSize="1.5em"}))}}},function(e,t){e.exports=ModalRegisterEmailTemplate=function(e,t){var r={header:"Connect an Email Address:",description:"Email yourself an encrypted backup of your wallet:",button:"EMAIL BACKUP",opt_out:"I've already got a backup",has_newsletter_option:!0,has_tip_text:!0,tip_text:"Your browser will encrypt your wallet and email you a copy. No-one but you will ever have access to your private keys. If you opt-in for email your browser will separately request periodic updates from the Saito project."};return e===t.NEWSLETTER?r={header:"Sign up for the Newsletter:",description:"Keep up to date on the latest Saito news",button:"SIGN UP",opt_out:"Nevermind, I'm not interested in novel consensus mechanisms",has_newsletter_option:!1,has_tip_text:!1,tip_text:""}:e===t.PRIVATESALE?r={header:"Register interest in private sale:",description:"Provide your email to register interest in participating in a private sale of Saito Tokens.",button:"SIGN UP",opt_out:"Nevermind, I'm not interested in novel consensus mechanisms",has_newsletter_option:!0,has_tip_text:!1,tip_text:""}:e===t.REGISTEREMAIL&&(r={header:"Register an email address:",description:"Your email address will be stored in your local database only, this might be useful in the future for peer-to-peer applications",button:"Register",opt_out:"Nevermind",has_newsletter_option:!0,has_tip_text:!1,tip_text:""}),'  \n  <div class="welcome-modal-wrapper">\n    <div class="welcome-modal-action">\n      <div class="welcome-modal-left">\n        <div class="welcome-modal-header">'.concat(r.header,'</h1></div>\n        <div class="welcome-modal-main">\n          <div style="margin:1em 0">').concat(r.description,'</div>\n          <div style="display:flex;">\n            <input style="width:100%; color:black; font-size:1em; background:white;margin:0 1em 0 0;" id="registry-input" type="text" placeholder="email@domain.com">\n            <input style="display: var(--saito-wu);" id="name" name="name" type="text"></input>\n            <button id="backup-email-button" style="clear:both; margin:unset; margin-left:0px; min-width:6em; font-size:0.7em;">').concat(r.button,"</button>\n          </div>\n          ").concat(r.has_newsletter_option?'<div style="font-size:0.9em;height:30px;margin-top:10px; display:"><input type="checkbox" id="signup" style="float:left;width:2em;height:2em;margin-right:10px" checked /><span style="padding-top:8px">Send periodic updates on important Saito news (max monthly)</span></div>':"",'\n        </div>\n        <div class="welcome-modal-info">\n            ').concat(r.has_tip_text?'<div class="tip"><b>How does this work? <i class="fas fa-info-circle"></i></b><div class="tiptext">'.concat(r.tip_text,"</div></div>"):"",'\n          </div>\n      </div>\n    </div>\n    <div class="welcome-modal-exit tutorial-skip">\n      <p>\n\t').concat(r.opt_out,'\n      </p>\n      <i class="fas fa-arrow-right"></i>\n    </div>\n  </div>\n  ')}},function(e,t){e.exports=ArcadePostsTemplate=()=>'\n    <div id="arcade-posts" class="arcade-posts">\n\n      <div data-id="" id="arcade-post-" class="arcade-post">\n        <div id="arcade-post-title" class="arcade-post-title">Saito selected for Web3 Foundation gaming standard</div>\n        <div id="arcade-post-sublinks" class="arcade-post-sublinks">\n\t  <div id="" class="arcade-post-posted-by">posted by </div>\n\t  <div id="" class="arcade-post-user">david@saito</div>\n\t  <div id="" class="arcade-post-comments">2 comments</div>\n\t  <div id="" class="arcade-post-report">report</div>\n        </div>\n      </div> \n\n      <div data-id="" id="arcade-post-" class="arcade-post">\n        <div id="arcade-post-title" class="arcade-post-title">Saito selected for Web3 Foundation gaming standard</div>\n        <div id="arcade-post-sublinks" class="arcade-post-sublinks">\n\t  <div id="" class="arcade-post-posted-by">posted by </div>\n\t  <div id="" class="arcade-post-user">david@saito</div>\n\t  <div id="" class="arcade-post-comments">2 comments</div>\n\t  <div id="" class="arcade-post-report">report</div>\n        </div>\n      </div> \n\n      <div data-id="" id="arcade-post-" class="arcade-post">\n        <div id="arcade-post-title" class="arcade-post-title">Saito selected for Web3 Foundation gaming standard</div>\n        <div id="arcade-post-sublinks" class="arcade-post-sublinks">\n\t  <div id="" class="arcade-post-posted-by">posted by </div>\n\t  <div id="" class="arcade-post-user">david@saito</div>\n\t  <div id="" class="arcade-post-comments">2 comments</div>\n\t  <div id="" class="arcade-post-report">report</div>\n        </div>\n      </div> \n\n      <div data-id="" id="arcade-post-" class="arcade-post">\n        <div id="arcade-post-title" class="arcade-post-title">Saito selected for Web3 Foundation gaming standard</div>\n        <div id="arcade-post-sublinks" class="arcade-post-sublinks">\n\t  <div id="" class="arcade-post-posted-by">posted by </div>\n\t  <div id="" class="arcade-post-user">david@saito</div>\n\t  <div id="" class="arcade-post-comments">2 comments</div>\n\t  <div id="" class="arcade-post-report">report</div>\n        </div>\n      </div> \n\n      <div data-id="" id="arcade-post-" class="arcade-post">\n        <div id="arcade-post-title" class="arcade-post-title">Saito selected for Web3 Foundation gaming standard</div>\n        <div id="arcade-post-sublinks" class="arcade-post-sublinks">\n\t  <div id="" class="arcade-post-posted-by">posted by </div>\n\t  <div id="" class="arcade-post-user">david@saito</div>\n\t  <div id="" class="arcade-post-comments">2 comments</div>\n\t  <div id="" class="arcade-post-report">report</div>\n        </div>\n      </div> \n\n      <div data-id="" id="arcade-post-" class="arcade-post">\n        <div id="arcade-post-title" class="arcade-post-title">Saito selected for Web3 Foundation gaming standard</div>\n        <div id="arcade-post-sublinks" class="arcade-post-sublinks">\n\t  <div id="" class="arcade-post-posted-by">posted by </div>\n\t  <div id="" class="arcade-post-user">david@saito</div>\n\t  <div id="" class="arcade-post-comments">2 comments</div>\n\t  <div id="" class="arcade-post-report">report</div>\n        </div>\n      </div> \n\n      <div data-id="" id="arcade-post-" class="arcade-post">\n        <div id="arcade-post-title" class="arcade-post-title">Saito selected for Web3 Foundation gaming standard</div>\n        <div id="arcade-post-sublinks" class="arcade-post-sublinks">\n\t  <div id="" class="arcade-post-posted-by">posted by </div>\n\t  <div id="" class="arcade-post-user">david@saito</div>\n\t  <div id="" class="arcade-post-comments">2 comments</div>\n\t  <div id="" class="arcade-post-report">report</div>\n        </div>\n      </div> \n\n    </div>\n\n<style type="text/css">\n</style>\n\n  '},function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r(1057),o=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:150;n(this,e),this.app=t,this.height=r,this.width=a}var t,r,o;return t=e,(r=[{key:"render",value:function(e,t){var r=36e5;t&&parseInt(t.clock_limit)>0&&(r=parseInt(t.clock_limit)-parseInt(t.clock_spent));try{document.getElementById("game-clock")||document.body.append(elParser(i()))}catch(e){}this.displayTime(r)}},{key:"attachEvents",value:function(e,t){var r=this;try{document.querySelector(".game-clock").addEventListener("click",(function(e){r.moveClock()}))}catch(e){}}},{key:"returnHours",value:function(e){return Math.floor(this.returnMinutes(e)/60)}},{key:"returnMinutes",value:function(e){return Math.floor(this.returnSeconds(e)/60)}},{key:"returnSeconds",value:function(e){return Math.floor(e/1e3)}},{key:"displayTime",value:function(e){var t=this.returnHours(e),r=this.returnMinutes(e),n=this.returnSeconds(e);n-=60*r,r-=60*t,t<0&&(t=0),r<0&&(r=0),n<0&&(n=0),t<10&&(t="0"+t),r<10&&(r="0"+r),n<10&&(n="0"+n);try{document.getElementById("game-clock-hours").innerHTML=t,document.getElementById("game-clock-minutes").innerHTML=r,document.getElementById("game-clock-seconds").innerHTML=n}catch(e){}}},{key:"moveClock",value:function(){var e=document.querySelector(".game-clock");"0px"===e.style.top||null==e.style.top||" "===e.style.top||""==e.style.top?(e.style.top="unset",e.style.bottom="0px"):(e.style.bottom="unset",e.style.top="0px")}}])&&a(t.prototype,r),o&&a(t,o),e}();e.exports=o},function(e,t){e.exports=GameClockTemplate=function(){return'\n    <div id="game-clock" class="game-clock"><span id="game-clock-hours">00</span>:<span id="game-clock-minutes">00</span>:<span id="game-clock-seconds">00</span></div>\n  '}},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(1059),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.logs=[],this.logs_length=150,this.logs_last_msg="",this.mod=null}var t,r,i;return t=e,(r=[{key:"render",value:function(e,t){null==this.mod&&(this.mod=t),document.querySelector("#log")||e.browser.addElementToDom(a());var r=document.getElementById("log");r&&(r.innerHTML=this.logs.slice(0,this.logs_length).map((function(e){return"> <span> ".concat(e," </span>")})).join("<br>"))}},{key:"attachEvents",value:function(e,t){var r=this,n=0,a=0;document.querySelector("#log").onmousedown=function(e){n=e.clientX,a=e.clientY},document.querySelector("#log").onmouseup=function(e){Math.abs(n-e.clientX)>4||Math.abs(a-e.clientY)>4||r.toggleLog()}}},{key:"toggleLog",value:function(){document.querySelector("#log").toggleClass("log-lock")}},{key:"updateLog",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=1;e===this.logs_last_msg&&(n=0,e.indexOf("removes")>-1&&(n=1),e.indexOf("places")>-1&&(n=1)),1!=n&&1!=r||(this.logs_last_msg=e,this.logs.unshift(e),this.render(this.app,this.mod),t())}}])&&n(t.prototype,r),i&&n(t,i),e}();e.exports=i},function(e,t){e.exports=GameLogTemplate=function(){return'  \n    <div id="log" class="log"></div>\n  '}},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(1061),o=(r(220),r(1062)),s=o.DESKTOP,c=o.MOBILE_PORTRAIT,l=o.MOBILE_LANDSCAPE,u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.game_mod=null,this.status="",this.initial_render=0,this.mode=0,this.use_cardbox=1,this.use_cardfan=1,this.use_board_sizer=1,this.card_types=[]}var t,r,o;return t=e,(r=[{key:"render",value:function(e,t){if(this.game_mod=t,1==t.browser_active&&0==this.initial_render){document.querySelector(".hud")||e.browser.addElementToDom(a());var r=document.querySelector(".hud"),n=document.querySelector(".hud-body"),i=document.querySelector(".hud-header");0==this.mode&&(r.classList.add("hud-long"),r.appendChild(i),r.appendChild(n)),1==this.mode&&(r.classList.add("hud-square"),r.appendChild(i),r.appendChild(n)),2==this.mode&&(r.classList.add("hud-vertical"),r.appendChild(i),r.appendChild(n)),1==this.use_cardbox&&t.cardbox.render(e,t),this.initial_render=1,this.resizeHudHeight(),this.resizeHudWidth()}}},{key:"attachEvents",value:function(e,t){var r=this;try{var n=this;this.addCardType("card","select",t.cardbox_callback),e.browser.makeDraggable("hud","hud-header",(function(){n.resizeHudHeight()}))}catch(e){}try{var a=document.getElementById("hud-toggle-button");a.onclick=function(e){switch(e.stopPropagation(),r.checkSizeAndOrientation()){case s:hud.classList.toggle("hud-hidden-vertical"),a.classList.toggle("fa-caret-up"),a.classList.toggle("fa-caret-down")}}}catch(e){}}},{key:"attachCardEvents",value:function(e,t){var r=this;if(0!=t.browser_active){if(1==this.use_cardbox)t.cardbox.hideCardbox(),t.cardbox.cardbox_lock=0,t.cardbox.attachCardEvents(e,t);else for(var n=function(e){var t=r.card_types[e].css,n=(r.card_types[e].action,r.card_types[e].mycallback);Array.from(document.getElementsByClassName(t)).forEach((function(e){e.onmouseover=function(e){},e.onmouseout=function(e){},e.onclick=function(e){n(e.currentTarget.id)}}))},a=0;a<this.card_types.length;a++)n(a);0==this.mode&&this.resizeHudWidth()}}},{key:"renderStatus",value:function(e,t){try{var r=document.getElementById("status");if(r){document.getElementById("status");var n=document.getElementById("status-overlay");n&&"none"!=n.style.display&&(document.getElementById("status-overlay").style.display="none",r.style.display="block"),r.innerHTML!==this.status&&(r.innerHTML=this.status),null!=this.status_callback&&this.status_callback()}}catch(e){}}},{key:"resizeHudCards",value:function(){try{var e=document.querySelector(".cardimg-hud").width,t=this.game_mod.returnCardHeight(e);document.querySelector(".status-cardbox").height="unset",Array.from(document.querySelectorAll(".status-cardbox .card")).forEach((function(r){r.style.height=t+"px",r.style.width=e+"px"}))}catch(e){console.log("ERR: "+e)}}},{key:"updateStatus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.status=e,this.status_callback=t,this.renderStatus(),null!=this.game_mod&&1==this.use_cardbox&&(this.game_mod.cardbox.hideCardbox(),this.game_mod.cardbox_lock=0,this.game_mod.cardbox.attachCardEvents(this.app,this.game_mod))}},{key:"updateStatusMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.updateStatus('<div id="status-message" class="status-message">'+e+"</div>",t)}},{key:"updateStatusMessageAndShowCards",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;null!=this.game_mod&&1==this.use_cardbox&&(this.game_mod.cardbox.hideCardbox(),this.game_mod.cardbox_lock=0,this.game_mod.cardbox.attachCardEvents(this.app,this.game_mod));var a='\n        <div id="status-message" class="status-message">'.concat(e,"</div>\n        ").concat(this.returnCardList(t,r),"\n      ");this.updateStatus(a,n),this.attachCardEvents(this.app,this.game_mod),this.resizeHudWidth(),this.resizeHudCards(),this.resizeHudHeight()}},{key:"onCardClick",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.game_mod.changeable_callback=e,this.attachCardEvents(this.app,this.game_mod)}},{key:"returnCardList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r="";if(0==this.mode){for(i=0;i<e.length;i++)r+=this.returnCardItem(e[i],t);r='\n          <div class="status-cardbox" id="status-cardbox">\n            '.concat(r,"\n          </div>")}else{for(r='<ul class="status-cardbox">',i=0;i<e.length;i++)r+=this.returnCardItem(e[i],t);r+="</ul>"}return r}},{key:"returnCardItem",value:function(e,t){return 0==this.mode?'<div id="'.concat(e.replace(/ /g,""),'" class="card showcard cardbox-hud cardbox-hud-status">').concat(this.returnCardImage(e,t,1),"</div>"):'<li class="card showcard" id="'+e+'">'+t[e].name+"</li>"}},{key:"returnCardImage",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n="cardimg";return 1==r&&(n="cardimg-hud"),'<img class="'.concat(n,'" src="').concat(t[e].img,'" />')}},{key:"toggleHud",value:function(e,t){switch(this.checkSizeAndOrientation()){case s:e.style.top=null,e.style.left=null}}},{key:"checkSizeAndOrientation",value:function(){return window.matchMedia("(orientation: landscape)").matches&&window.innerHeight<=700?l:window.matchMedia("(orientation: portrait)").matches&&window.innerWidth<=600?c:s}},{key:"addCardType",value:function(e,t,r){for(var n=0;n<this.card_types.length;n++)if(this.card_types[n].css===e)return;this.card_types.push({css:e,action:t,mycallback:r}),this.game_mod.cardbox.addCardType(e,t,r)}},{key:"resizeHudHeight",value:function(){try{var e=document.getElementById("hud"),t=document.getElementById("hud-header"),r=document.getElementById("hud-body"),n=window.innerHeight,a=e.getBoundingClientRect(),i=t.getBoundingClientRect(),o=r.getBoundingClientRect(),s=i.bottom-i.top,c=(o.bottom,o.top,a.bottom-a.top);try{if(document.querySelector(".hud-body .status")&&document.querySelector(".status-cardbox")){var l=document.querySelector(".hud-body .status").getBoundingClientRect(),u=l.bottom-l.top;r.style.height=u+"px",r.style.minHeight=u+"px",r.style.maxHeight=u+"px",e=document.getElementById("hud"),t=document.getElementById("hud-header"),r=document.getElementById("hud-body"),a=e.getBoundingClientRect(),(o=r.getBoundingClientRect()).bottom,o.top,c=u+s}}catch(e){}n-o.top<a.bottom-a.top?(console.log("A"),r.style.height=c+"px",r.style.minHeight=c+"px",r.style.maxHeight=c+"px"):(console.log("B"),r.style.height=c+"px",r.style.minHeight=c+"px",r.style.maxHeight=c+"px");var d=parseInt(this.calculateElementHeight(document.getElementById("hud-body"))),h=parseInt(this.calculateElementHeight(document.getElementById("hud-header"))),p=parseInt(this.calculateElementHeight(document.getElementById("hud")));if(console.log(d+" - "+h+" - "+p),d+h>p){var f=p-h;console.log("adjusted height: "+f),r.style.height=f+"px",r.style.minHeight=f+"px",r.style.maxHeight=f+"px"}}catch(e){}}},{key:"resizeHudWidth",value:function(){var e=this,t=document.getElementById("hud"),r=document.querySelector(".status-cardbox"),n=document.querySelectorAll(".cardbox-hud");if(n&&n[0]){var a=window.innerWidth,i=(a*=.8)/n.length;i>220&&(i=220,1==this.use_cardbox&&(i=150)),Array.from(document.querySelectorAll(".status-cardbox .card")).forEach((function(t){t.style.width=i+"px",t.style.height=e.game_mod.returnCardHeight(i)+"px"}));var o=Math.floor(1.1*n[0].getBoundingClientRect().width);if(r){var s=o*r.childElementCount;s<510&&(s=510),t.style.width=s+"px"}}}},{key:"calculateElementHeight",value:function(e){return document.all?(elmHeight=e.currentStyle.height,elmMargin=parseInt(e.currentStyle.marginTop,10)+parseInt(e.currentStyle.marginBottom,10)):(elmHeight=document.defaultView.getComputedStyle(e,"").getPropertyValue("height"),elmMargin=parseInt(document.defaultView.getComputedStyle(e,"").getPropertyValue("margin-top"))+parseInt(document.defaultView.getComputedStyle(e,"").getPropertyValue("margin-bottom"))),parseInt(elmHeight)+parseInt(elmMargin)+"px"}}])&&n(t.prototype,r),o&&n(t,o),e}();e.exports=u},function(e,t){e.exports=GameHudTemplate=function(){return'\n    <div id="hud" class="hud"></div>\n    <div id="hud-header" class="hud-header"></div>\n    <div id="hud-body" class="hud-body">\n      <div id="status" class="status"></div>\n      <div id="status-overlay" class="status-overlay"></div>\n    </div>\n  '}},function(e,t){e.exports={DESKTOP:"desktop",MOBILE_PORTRAIT:"mobile_portrait",MOBILE_LANDSCAPE:"mobile_desktop"}},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(1064),i=r(1065),o=r(1066),s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.icons=[],this.options=[],this.sub_options=[],this.sub_menu_open=""}var t,r,s;return t=e,(r=[{key:"render",value:function(e,t){document.querySelector(".game-menu")||e.browser.addElementToDom(a());for(var r="<ul>",n=0;n<this.icons.length;n++)r+=i(this.icons[n]);for(var s=0;s<this.options.length;s++)r+=o(this.options[s],this.sub_options[s]);r+="</ul>",document.querySelector(".game-menu").innerHTML=r}},{key:"attachEvents",value:function(e,t){for(var r=this,n=0;n<this.options.length;n++){var a="#"+this.options[n].id,i=document.querySelector(a);i.ontouch=function(n){for(var a=n.currentTarget.id,i=0;i<r.options.length;i++)if(r.options[i].id===a){if(r.sub_menu_open===a)return r.hideSubMenus(),void n.stopPropagation();null!=r.options[i].callback&&(r.options[i].callback(e,t),n.stopPropagation())}},i.onclick=function(n){for(var a=n.currentTarget.id,i=0;i<r.options.length;i++)if(r.options[i].id===a){if(r.sub_menu_open===a)return r.hideSubMenus(),void n.stopPropagation();null!=r.options[i].callback&&(r.options[i].callback(e,t),n.stopPropagation())}}}for(var o=0;o<this.sub_options.length;o++)for(var s=0;s<this.sub_options[o].length;s++){var c="#"+this.sub_options[o][s].id,l=document.querySelector(c);l.ontouch=function(n){for(var a=n.currentTarget.id,i=0;i<r.sub_options.length;i++)for(var o=0;o<r.sub_options[i].length;o++)r.sub_options[i][o].id===a&&null!=r.sub_options[i][o].callback&&(r.sub_options[i][o].callback(e,t),n.stopPropagation())},l.onclick=function(n){for(var a=n.currentTarget.id,i=0;i<r.sub_options.length;i++)for(var o=0;o<r.sub_options[i].length;o++)r.sub_options[i][o].id===a&&null!=r.sub_options[i][o].callback&&(r.sub_options[i][o].callback(e,t),n.stopPropagation())}}for(var u=0;u<this.icons.length;u++){var d="#"+this.icons[u].id,h=document.querySelector(d);h.onclick=function(n){for(var a=n.currentTarget.id,i=0;i<r.icons.length;i++)r.icons[i].id===a&&null!=r.icons[i].callback&&(r.icons[i].callback(e,t),n.stopPropagation())},h.ontouch=function(n){for(var a=n.currentTarget.id,i=0;i<r.icons.length;i++)r.icons[i].id===a&&null!=r.icons[i].callback&&(r.icons[i].callback(e,t),n.stopPropagation())}}}},{key:"addMenuOption",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0;t<this.options.length;t++)if(this.options[t].id==e.id)return;this.options.push(e),this.sub_options.push([])}},{key:"addSubMenuOption",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=0;r<this.options.length;r++)if(this.options[r].id==e&&this.sub_options[r]){for(var n=0;n<this.sub_options[r].length;n++)if(this.sub_options[r][n].id===t.id)return;this.sub_options[r].push(t)}}},{key:"addMenuIcon",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0;t<this.icons.length;t++)if(this.icons[t].id==e.id)return;this.icons.push(e)}},{key:"showSubMenu",value:function(e){""!=this.sub_menu_open&&this.hideSubMenus(),this.sub_menu_open=e,document.querySelector("#"+e+" > ul").style.display="block"}},{key:"hideSubMenus",value:function(){this.sub_menu_open="";for(var e=0;e<this.options.length;e++){var t="#"+this.options[e].id+" > ul",r=document.querySelector(t);r&&(r.style.display="none")}}}])&&n(t.prototype,r),s&&n(t,s),e}();e.exports=s},function(e,t){e.exports=GameMenuTemplate=function(){return'  \n    <div id="game-menu" class="game-menu">\n      <div id="game-menu-icons" class="game-menu-icons"></div>\n      <div id="game-menu-options" class="game-menu-options"></div>\n    </div>\n  '}},function(e,t){e.exports=GameMenuIconTemplate=function(e){var t="";return null!=e.class&&(t=e.class),'<li id="'.concat(e.id,'" class="game-menu-icon ').concat(t,'">').concat(e.text,"</li>")}},function(e,t){e.exports=GameMenuOptionTemplate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r="";e.class&&(r=e.class);var n='<li id="'.concat(e.id,'" class="game-menu-option ').concat(r,'">').concat(e.text);if(t.length>0){n+='<ul class="game-menu-sub-options">';for(var a=0;a<t.length;a++)r="",t[a].class&&(r=t[a].class),n+='<li id="'.concat(t[a].id,'" class="game-menu-sub-option ').concat(r,'">').concat(t[a].text,"</li>");n+="</ul>"}return n+="</li>"}},function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r(1068),o=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:480,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:640;n(this,e),this.app=t,this.height=r,this.width=a,this.cards=[],this.cardfan=0,this.cardbox_lock=0,this.skip_card_prompt=0,this.card_types=[],this.game_mod=null}var t,r,o;return t=e,(r=[{key:"render",value:function(e,t){this.game_mod=t,document.getElementById("game-cardbox")||(e.browser.addElementToDom(i()),document.getElementById("game-cardbox").style.zindex=-10)}},{key:"attachEvents",value:function(e,t){}},{key:"attachCardEvents",value:function(e,t){var r=this;try{console.log("attach card events");for(var n=function(e){var t=r.card_types[e].css,n=r.card_types[e].action,a=r.card_types[e].mycallback;console.log("mouseover for: "+t+" -- "+r.cardbox_lock),Array.from(document.getElementsByClassName(t)).forEach((function(e){e.onmouseover=function(e){try{if(1==r.cardbox_lock)return;r.showCardbox(e.currentTarget.id)}catch(e){}},e.onmouseout=function(e){try{r.hideCardbox()}catch(e){}},e.onclick=function(e){r.cardbox_lock=1,""!=n&&null!=a?r.showCardbox(e.currentTarget.id,n,a):r.showCardbox(e.currentTarget.id)}}))},a=0;a<this.card_types.length;a++)n(a);document.getElementById("cardbox-exit").onclick=function(e){r.hideCardbox(1)}}catch(e){}}},{key:"showCardboxHTML",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(""==t||null==t||t.indexOf("noncard")>-1||t.indexOf("nocard")>-1)null!=a&&(a(e),this.hideCardbox(1));else{if(0==this.cardfan)document.getElementById("cardbox-card").innerHTML=t;else{t="";for(var i=0;i<this.cards.length;i++)t+=this.game_mod.returnCardImage(this.cards[i],n,a);document.getElementById("cardbox-card").innerHTML=t}if(1==this.skip_card_prompt&&null!=a)return a(e),void this.hideCardbox(1);""!=n&&(this.cardbox_lock=1,document.getElementById("cardbox-menu").style.display="block",document.getElementById("cardbox-menu").innerHTML=n,document.getElementById("cardbox-menu").onclick=function(t){null!=a&&a(e),r.hideCardbox(1)},document.getElementById("cardbox-exit").style.display="block"),1==this.cardbox_lock&&(document.getElementById("cardbox-exit").style.display="block",document.getElementById("cardbox-exit-background").style.display="block"),document.getElementById("game-cardbox").style.zIndex=250,document.getElementById("game-cardbox").style.display="block",document.getElementById("cardbox-card").style.display="block"}}},{key:"showCardbox",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;"undefined"!=e&&""!=e&&(this.cards.includes(e)||this.cards.push(e),this.showCardboxHTML(e,this.game_mod.returnCardImage(e),t,r))}},{key:"hideCardbox",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;try{if(1==this.cardbox_lock&&0==e)return;this.cards=[],document.getElementById("game-cardbox").style.zindex=-10,document.getElementById("game-cardbox").style.display="none",document.getElementById("cardbox-card").style.display="none",document.getElementById("cardbox-menu").style.display="none",document.getElementById("cardbox-exit").style.display="none",document.getElementById("cardbox-exit-background").style.display="none",this.cardbox_lock=0,document.getElementById("game-cardbox").style.zIndex=-1}catch(e){}}},{key:"addCardType",value:function(e,t,r){for(var n=0;n<this.card_types.length;n++)if(this.card_types[n].css===e)return;this.card_types.push({css:e,action:t,mycallback:r})}}])&&a(t.prototype,r),o&&a(t,o),e}();e.exports=o},function(e,t){e.exports=GameCardboxTemplate=function(){return'\n    <div id="game-cardbox" class="game-cardbox">\n      <div class="cardbox-exit-background" id="cardbox-exit-background" style="display:none"><div class="cardbox-exit" id="cardbox-exit" style="display:none">×</div></div>\n      <div class="cardbox-card cardfan" id="cardbox-card" style="display:none"></div>\n      <div class="cardbox-menu" id="cardbox-menu" style="display:none">PLAY</div>\n    </div>\n  '}},function(e,t,r){function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=r(1070),s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.game_mod=null}var t,r,a;return t=e,(r=[{key:"render",value:function(e,t){this.game_mod=t;try{for(var r=0;r<t.game.players.length;r++){var n=this._playerBox(r);if(!document.getElementById("player-box-"+n)){var a=e.browser.htmlToElement(o(n));document.querySelector(".main")?document.querySelector(".main").append(a):document.body.append(a),this.refreshName(r+1)}}}catch(e){}}},{key:"attachEvents",value:function(e){try{for(var t=0;t<this.game_mod.game.players.length;t++){var r=this._playerBox(t);e.browser.makeDraggable("player-box-"+r,"player-box-head-"+r),document.querySelector("#player-box-head-"+r).style.cursor="grab"}}catch(e){console.log(e)}}},{key:"_playerBox",value:function(e){if(e<0)return 1;var t=this.returnPlayersBoxArray(),r=e-this.game_mod.game.players.indexOf(this.app.wallet.returnPublicKey());return r<0&&(r+=this.game_mod.game.players.length),t[r]}},{key:"returnPlayersBoxArray",value:function(){var e=[];return this.game_mod.seats?e=this.game_mod.seats:(2==this.game_mod.game.players.length&&(e=[1,4]),3==this.game_mod.game.players.length&&(e=[1,3,5]),4==this.game_mod.game.players.length&&(e=[1,3,4,5]),5==this.game_mod.game.players.length&&(e=[1,2,3,5,6]),6==this.game_mod.game.players.length&&(e=[1,2,3,4,5,6])),e}},{key:"returnViewBoxArray",value:function(){var e=[];return 2==this.game_mod.game.players.length&&(e=[3,5]),3==this.game_mod.game.players.length&&(e=[3,4,5]),4==this.game_mod.game.players.length&&(e=[2,3,5,6]),5==this.game_mod.game.players.length&&(e=[2,3,4,5,6]),e}},{key:"addClassAll",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t)for(var r=1;r<=6;r++){var a=document.querySelector("#player-box-".concat(r));a&&a.classList.add("".concat(e).concat(r))}else{var i,o=document.querySelectorAll(".player_box"),s=n(o);try{for(s.s();!(i=s.n()).done;){var c=i.value;c.classList.add(e)}}catch(e){s.e(e)}finally{s.f()}}}},{key:"addClass",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r="#player-box-"+this._playerBox(t),n=document.querySelector(r);n&&n.classList.add(e)}},{key:"refreshName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r="#player-box-head-"+this._playerBox(e-1),n="";""==t&&(t=this.game_mod.game.players[e-1],n=this.app.keys.returnIdenticon(t),""!=(t=this.app.keys.returnUsername(t))&&t.indexOf("@")>0&&(t=t.substring(0,t.indexOf("@"))));var a=n?'<img class="player-identicon" src="'.concat(n,'">'):"";a+='<div class="player-info-name">'.concat(t,"</div>"),this._updateDiv(r,a)}},{key:"_updateDiv",value:function(e,t){var r=document.querySelector(e);r?r.innerHTML=t:console.log(e+" not found")}},{key:"addGraphicClass",value:function(e){var t,r=n(document.querySelectorAll(".player-box-graphic"));try{for(r.s();!(t=r.n()).done;){var a=t.value;a.classList.remove(e),a.classList.add(e)}}catch(e){r.e(e)}finally{r.f()}}},{key:"refreshGraphic",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this._updateDiv("#player-box-graphic-"+this._playerBox(t),e)}},{key:"refreshLog",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this._updateDiv("#player-box-log-"+this._playerBox(t),e)}},{key:"refreshInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this._updateDiv("#player-box-info-"+this._playerBox(t),e)}},{key:"hideInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t="#player-box-info-"+this._playerBox(e);try{document.querySelector(t).classList.add("hidden")}catch(e){}}},{key:"showInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t="#player-box-info-"+this._playerBox(e);try{document.querySelector(t).classList.remove("hidden")}catch(e){}}}])&&i(t.prototype,r),a&&i(t,a),e}();e.exports=s},function(e,t){e.exports=GamePlayerBoxTemplate=function(e){return'\n    <div class="player-box p'.concat(e,'" id="player-box-').concat(e,'">\n      <div class="player-box-graphic" id="player-box-graphic-').concat(e,'"></div> \n      <div class="player-box-head" id="player-box-head-').concat(e,'"></div>\n      <div class="player-box-info" id="player-box-info-').concat(e,'"></div>\n      <div class="plog ').concat(1==e?"status":"",'" id="player-box-log-').concat(e,'"></div>\n      </div>\n    </div>\n  ')}},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(1072),i=r(220),o=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.dimensions=r}var t,r,o;return t=e,(r=[{key:"render",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{if(document.getElementById("cardfan")||document.body.append(e.browser.htmlToElement(a())),""==r){var n=t.game.deck[0],i=n.cards,o=n.hand,s=o.map((function(e){return i[e]}));r=s.map((function(e){return'<img class="card" src="'.concat(t.card_img_dir,"/").concat(e.name,'">')})).join("")}document.getElementById("cardfan").innerHTML=r}catch(e){}}},{key:"prependCard",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";document.getElementById("cardfan").innerHTML=r+document.getElementById("cardfan").innerHTML}},{key:"addCard",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";document.getElementById("cardfan").innerHTML+=r}},{key:"attachEvents",value:function(e,t){try{var r=document.getElementById("cardfan");i(r)}catch(e){}}}])&&n(t.prototype,r),o&&n(t,o),e}();e.exports=o},function(e,t){e.exports=GameCardfanTemplate=function(){return'\n    <div id="cardfan" class="cardfan">\n    </div>\n  '}},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(1074),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.height=7,this.width=7,this.height=5,this.width=5,this.hexmode=[0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,0]}var t,r,i;return t=e,(r=[{key:"render",value:function(e,t){document.querySelector(".game-hexgrid-container")||e.browser.addElementToDom(a(this.height,this.width,this.hexmode))}},{key:"attachEvents",value:function(e,t){}}])&&n(t.prototype,r),i&&n(t,i),e}();e.exports=i},function(e,t){e.exports=GameHexGridTemplate=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n="",a=0;r.length>0&&(a=1),n+='\n    <style type="text/css">\n      .hex {\n        width: '.concat(100/t,"%\n      }\n      .hex:nth-child(9n+6) {\n        margin-left: ").concat(100/t/2,"%\n      }\n    </style>\n  "),n+='<div id="game-hexgrid-container" class="game-hexgrid-container"><ul id="game-hexgrid" class="game-hexgrid">',n+="\n";for(var i=0,o=1,s=1;o<=e;o++,s++){var c=t;o%2==0&&(c=t-1);for(var l=1,u=1;l<=c;l++){if(1==a)if(1==r[i]){var d=s+"_"+u;n+='\n    \t    <li id="'.concat(d,'" class="hex">\n\t      <div class="hexIn" id="hexIn_').concat(d,'">\n\t        <div class="hexLink" id="hexLink_').concat(d,'">\n\t \t  <div class="hex_bg" id="hex_bg_').concat(d,'">\n\t\t  </div>\n\t        </div>\n\t      </div>\n\t    </li>\n          '),u++}else n+='<li id="" class="hex"></li>';else{var h=s+"_"+u;n+='\n    \t  <li id="'.concat(h,'" class="hex">\n\t    <div class="hexIn" id="hexIn_').concat(h,'">\n\t      <div class="hexLink" id="hexLink_').concat(h,'">\n\t\t<div class="hex_bg" id="hex_bg_1_1">\n\t\t</div>\n\t      </div>\n\t    </div>\n\t  </li>\n        '),u++}i++}}if((e+1)%2==0)for(var p=0;p<t-1;p++)n+='<li id="" class="hex"></li>';else for(var f=0;f<t;f++)n+='<li id="" class="hex"></li>';return n+="\n",n+="</ul></div>"}},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(1076),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t}var t,r,i;return t=e,(r=[{key:"render",value:function(e,t){this.game_mod=t,document.getElementById("game-observer-next")||e.browser.addElementToDom(a())}},{key:"attachEvents",value:function(e,t){var r=this;document.getElementById("game-observer-next-btn").onclick=function(n){r.next(e,t)},document.getElementById("game-observer-last-btn").onclick=function(n){r.last(e,t)}}},{key:"next",value:function(e,t){var r=this,n=e.crypto.hash(JSON.stringify(t.game.queue));t.game.halted=0,t.game.gaming_active=0,t.saveGame(t.game.id);var a=e.modules.returnModule("Arcade");null!=a?a.observerDownloadNextMoves(t,(function(a){return 0==(t=a).game.future.length?(salert("No Moves Yet Available Beyond this Point"),void r.hideNextMoveButton()):(t.game.queue.length>0&&"OBSERVER_CHECKPOINT"===t.game.queue[t.game.queue.length-1]&&t.game.queue.splice(t.game.queue.length-1,1),t.runQueue(),t.processFutureMoves(),0==t.game.future.length&&e.crypto.hash(JSON.stringify(t.game.queue))===n?(salert("No Moves Yet Available Beyond this Point"),void r.hideNextMoveButton()):void 0)})):alert("ERROR 413231: Arcade Module not Installed")}},{key:"last",value:function(e,t){var r=e.modules.returnModule("Arcade");null!=r?(salert("Please wait while we move back one step..."),r.initializeObserverModePreviousStep(t.game.id,t.game.step.ts)):alert("ERROR 413252: Arcade Module not Installed")}},{key:"hideNextMoveButton",value:function(){document.getElementById("game-observer-next").style.display="none"}},{key:"showNextMoveButton",value:function(){document.getElementById("game-observer-next").style.display="block"}},{key:"hideLastMoveButton",value:function(){document.getElementById("game-observer-last").style.display="none"}},{key:"showLastMoveButton",value:function(){document.getElementById("game-observer-last").style.display="block"}}])&&n(t.prototype,r),i&&n(t,i),e}();e.exports=i},function(e,t){e.exports=GameObserverTemplate=function(){return'\n    <div id="game-observer-last" class="game-observer-last">\n      <div id="game-observer-last-btn" class="game-observer-last-btn"><i class="fas fa-backward"></i></div>\n      <div id="game-observer-next-btn" class="game-observer-next-btn"><i class="fas fa-forward"></i></div>\n    </div>\n  '}},function(e,t,r){var n=r(1078);e.exports=GameBoardSizer={render:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"body";if(!document.getElementById("game_board_sizer")){var a=document.querySelector(r);a.append(e.browser.htmlToElement(n()))}},attachEvents:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".gameboard",a=document.querySelector(n);if(document.querySelector("#game_board_sizer").addEventListener("change",(function(){r.scaleBoard(t,a)})),t.loadGamePreference(t.returnSlug()+"-board-scale"))try{document.querySelector("#game_board_sizer").value=t.loadGamePreference(t.returnSlug()+"-board-scale"),this.scaleBoard(t,a)}catch(e){}var i=t.loadGamePreference(t.returnSlug()+"-board-offset");i&&$(n).offset(i),$(n).draggable({stop:function(e,r){t.saveGamePreference(t.returnSlug()+"-board-offset",r.offset)}})},scaleBoard:function(e,t){try{e.hammertime.get("pinch").set({enable:!1}),e.hammertime.get("pan").set({enable:!1})}catch(e){}t.style.transform="scale(".concat(document.querySelector("#game_board_sizer").value/100,")"),e.saveGamePreference(e.returnSlug()+"-board-scale",document.querySelector("#game_board_sizer").value);try{e.hammertime.get("pinch").set({enable:!0}),e.hammertime.get("pan").set({enable:!0})}catch(e){}}}},function(e,t){e.exports=GameBoardSizerTemplate=function(){return'\n    <input class="game_board_sizer" id="game_board_sizer" type="range" min="33" max="200" value="100" />\n    '}},function(e,t,r){r(1080),r(1081);e.exports=GameHammerMobile={fixHammerjsDeltaIssue:null,lastEvent:null,pinchZoomOrigin:null,element:null,pinchStart:{x:void 0,y:void 0},originalSize:{width:2550,height:1650},current:{x:0,y:0,z:1,zooming:!1,width:2550,height:1650},last:{x:0,y:0,z:1},render:function(e,t){},attachEvents:function(e,t){try{var r=this;r.element=document.getElementById("gameboard");var n=new Hammer(r.element,{});n.get("pinch").set({enable:!0}),n.get("pan").set({threshold:0}),n.on("pan",(function(e){"pan"!==r.lastEvent&&(r.fixHammerjsDeltaIssue={x:e.deltaX,y:e.deltaY}),r.current.x=r.last.x+e.deltaX-r.fixHammerjsDeltaIssue.x,r.current.y=r.last.y+e.deltaY-r.fixHammerjsDeltaIssue.y,r.lastEvent="pan",r.update()})),n.on("pinch",(function(e){var t=r.scaleFrom(r.pinchZoomOrigin,r.last.z,r.last.z*e.scale);r.current.x=t.x+r.last.x+e.deltaX,r.current.y=t.y+r.last.y+e.deltaY,r.current.z=t.z+r.last.z,r.lastEvent="pinch",r.update()})),n.on("pinchstart",(function(e){r.pinchStart.x=e.center.x,r.pinchStart.y=e.center.y,r.pinchZoomOrigin=r.getRelativePosition(r.element,{x:r.pinchStart.x,y:r.pinchStart.y},r.originalSize,r.current.z),r.lastEvent="pinchstart"})),n.on("panend",(function(e){r.last.x=r.current.x,r.last.y=r.current.y,r.lastEvent="panend"})),n.on("pinchend",(function(e){r.last.x=r.current.x,r.last.y=r.current.y,r.last.z=r.current.z,r.lastEvent="pinchend"})),t.hammertime=n}catch(e){alert("Error: "+e)}},update:function(){this.current.height=this.originalSize.height*this.current.z,this.current.width=this.originalSize.width*this.current.z,this.element.style.transform="translate3d("+this.current.x+"px, "+this.current.y+"px, 0) scale("+this.current.z+")"},getRelativePosition:function(e,t,r,n){var a=this.getCoords(e),i=t.x-a.x,o=t.y-a.y;return{x:i/(r.width*n/2)-1,y:o/(r.height*n/2)-1}},getCoords:function(e){var t=e.getBoundingClientRect(),r=document.body,n=document.documentElement,a=window.pageYOffset||n.scrollTop||r.scrollTop,i=window.pageXOffset||n.scrollLeft||r.scrollLeft,o=n.clientTop||r.clientTop||0,s=n.clientLeft||r.clientLeft||0,c=t.top+a-o,l=t.left+i-s;return{x:Math.round(l),y:Math.round(c)}},scaleFrom:function(e,t,r){var n=this.getCoordinateShiftDueToScale(this.originalSize,t),a=this.getCoordinateShiftDueToScale(this.originalSize,r),i=r-t,o=n.x-a.x,s=n.y-a.y;return{x:e.x*o,y:e.y*s,z:i}},getCoordinateShiftDueToScale:function(e,t){var r=t*e.width,n=t*e.height;return{x:(r-e.width)/2,y:(n-e.height)/2}}}},function(e,t){e.exports=GameHammerMobile=function(){return""}},function(e,t){e.exports=function(e,t){var r=new Hammer(t,{});e.hammertime=r,r.get("pinch").set({enable:!0}),r.get("pan").set({threshold:0});var n=void 0,a={x:void 0,y:void 0},i=void 0,o={width:2550,height:1650},s={x:0,y:0,z:1,zooming:!1,width:1*o.width,height:1*o.height},c={x:s.x,y:s.y,z:s.z};function l(e,t,r,n){var a,i,o,s,c,l,u,d,h,p=(a=e.getBoundingClientRect(),i=document.body,o=document.documentElement,s=window.pageYOffset||o.scrollTop||i.scrollTop,c=window.pageXOffset||o.scrollLeft||i.scrollLeft,l=o.clientTop||i.clientTop||0,u=o.clientLeft||i.clientLeft||0,d=a.top+s-l,h=a.left+c-u,{x:Math.round(h),y:Math.round(d)}),f=t.x-p.x,m=t.y-p.y;return{x:f/(r.width*n/2)-1,y:m/(r.height*n/2)-1}}function u(e,t){var r=t*e.width,n=t*e.height;return{x:(r-e.width)/2,y:(n-e.height)/2}}r.on("pan",(function(e){"pan"!==i&&(n={x:e.deltaX,y:e.deltaY}),s.x=c.x+e.deltaX-n.x,s.y=c.y+e.deltaY-n.y,i="pan",h()})),r.on("pinch",(function(e){var t,r,n,a,l,p,f,m,g=(t=d,r=c.z,n=c.z*e.scale,a=u(o,r),l=u(o,n),p=n-r,f=a.x-l.x,m=a.y-l.y,{x:t.x*f,y:t.y*m,z:p});s.x=g.x+c.x+e.deltaX,s.y=g.y+c.y+e.deltaY,s.z=g.z+c.z,i="pinch",h()}));var d=void 0;function h(){s.height=o.height*s.z,s.width=o.width*s.z,t.style.transform="translate3d("+s.x+"px, "+s.y+"px, 0) scale("+s.z+")"}r.on("pinchstart",(function(e){a.x=e.center.x,a.y=e.center.y,d=l(t,{x:a.x,y:a.y},o,s.z),i="pinchstart"})),r.on("panend",(function(e){c.x=s.x,c.y=s.y,i="panend"})),r.on("pinchend",(function(e){c.x=s.x,c.y=s.y,c.z=s.z,i="pinchend"}))}},function(e,t){e.exports=ModalAddUserTemplate=function(){return'  \n  <div class="welcome-modal-wrapper">\n    <div class="welcome-modal-action">\n      <div class="welcome-modal-left">\n        <div class="welcome-modal-header">Invite Friends</h1></div>\n        <div class="welcome-modal-main">\n          <div style="margin:1em 0">How would you like to add a contact to Saito:</div>\n          <div style="">\n            <div class="welcome-invite-box address-link-box"><i class="fas fa-key"></i><div>Add by Saito address</div></div>\n            <div class="welcome-invite-box scanqr-link-box"><i class="fas fa-qrcode"></i><div>Scan QR Code</div></div>\n            <div class="welcome-invite-box generate-link-box"><i class="fas fa-link"></i><div>Share Bundle</div></div>\n          </div>\n          <div class="welcome-modal-info">\n            <div style="margin-top:20px" class="welcome-modal-explanation">\n              <div class="tip">\n                <div><b>What happens when I invite someone to Saito? <i class="fas fa-info-circle"></i></b></div>\n                <div class="tiptext">Your browser will create an encrypted communication channel with the users you invite, and they will show up on your contact list in the future.</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="welcome-modal-exit tutorial-skip">\n      <p>\n          Thanks, but...\n      </p>\n      <p>\n          Maybe later.\n      </p>\n      <i class="fas fa-arrow-right"></i>\n    </div>\n  </div>\n  '}},function(e,t){e.exports=ModalAddUserTemplate=function(){return'  \n  <div class="welcome-modal-wrapper confirm-modal-wrapper">\n    You and your friend are now negotiating a shared secret via Saito\'s blockchain. This requires two blocks to be mined. Once the process is complete your friend will be added to your chat list and you will be able to chat through the encrypted channel.\n    <div id="confirm-box" class="welcome-invite-box"><div>OK</div></div>\n  </div>\n  <style>\n    .confirm-modal-wrapper {\n      font-size: 1.5em;\n      padding: 1.5em;\n      color: white;\n      font-weight: bold;\n    }\n  </style>\n  '}},function(e,t,r){var n=r(1085);e.exports=InviteFriendsQR={render:function(e,t){var r=this;t.helpers.el_parser;document.querySelector(".add-contact-modal-qr")||(document.querySelector(".welcome-modal-left").innerHTML=n());var a=e.modules.returnModule("QRScanner");a.handleDecodedMessage=function(n){return r.handleDecodedMessage(n,e,t)},a.start(document.querySelector("video"),document.getElementById("qr-canvas"))},attachEvents:function(e,t){},handleDecodedMessage:function(e,t,r){if(t.crypto.isPublicKey(e)){var n=e;t.modules.returnModule("QRScanner").decoder.terminate(),r.startKeyExchange(n),r.stopVideo()}}}},function(e,t){e.exports=InviteFriendsQRTemplate=function(){return'\n    <div class="add-contact-modal-qr">\n      <div id="qr-hud-target" style="\n        position: absolute;\n        width: 10em;\n        height: 10em;\n        border: 2px solid red;\n        background-color: transparent;\n        margin: 2em 8.5em;"></div>\n      <div class="video-container">\n        <video playsinline autoplay style="width: 100%; max-width: 26em"></video>\n      </div>\n      <canvas style="display: none" id="qr-canvas"></canvas>\n    </div>\n  '}},function(e,t){e.exports=InviteFriendsTemplate=function(){return'\n  <div class="welcome-modal-wrapper">\n    <div class="welcome-modal-action">\n      <div class="welcome-modal-left">\n        <div class="welcome-modal-header">Invite Friends</h1></div>\n        <div class="welcome-modal-main">\n          <div style="margin:1em 0">How would you like to add a contact to Saito:</div>\n          <div style="">\n            <div class="welcome-invite-box generate-link-box"><i class="fas fa-link"></i><div>Generate Link</div></div>\n            <div class="welcome-invite-box scanqr-link-box"><i class="fas fa-qrcode"></i><div>Scan QR Code</div></div>\n            <div class="welcome-invite-box address-link-box"><i class="fas fa-key"></i><div>Add by Saito address</div></div>\n          </div>\n          <div class="welcome-modal-info">\n            <div style="margin-top:20px" class="welcome-modal-explanation">\n            <div class="tip">\n              <div><b>What happens when I invite someone to Saito? <i class="fas fa-info-circle"></i></b></div>\n              <div class="tiptext">Users you invite will be given a copy of your javascript bundle (so they are running the same applications). The Saito rewards module will give both you and your friends a bonus in Saito tokens for helping spread work.</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="welcome-modal-exit tutorial-skip">\n      <p>\n          Hmmm...\n      </p>\n      <p>\n          Maybe later.\n      </p>\n      <i class="fas fa-arrow-right"></i>\n    </div>\n  </div>\n\n<style>\n\n.welcome-modal-info {\n  clear: both;\n  font-size: 1.2em;\n}\n\n.welcome-invite-box {\n  float: left;\n  width: 250px;\n  border: none;\n  cursor: pointer;\n}\n\n.welcome-invite-box div {\n  text-align: center;\n  font-weight: bold;\n}\n\n.welcome-invite-box i {\n  display: block;\n  text-align: center;\n  margin: 0 0 15px 0;\n  font-size: 2em;\n}\n\n.welcome-invite-box:hover {\n  text-shadow: 2px 2px 2px #333;\n}\n\n</style>\n\n  '}},function(e,t){e.exports=InviteFriendsLinkTemplate=function(e){return'\n    <div class="welcome-modal-header">\n      <h1>Your Invitation Link:</h1>\n    </div>\n    <div class="welcome-modal-main">\n      <div class="welcome-modal-text">Share this link with your friends. Users you invite will be given a copy of your javascript bundle (Any games or applications you\'ve installed via the appstore will be included). The Saito rewards module will give both you and your friends a bonus in Saito tokens for helping spread work.</div>\n      <div class="link-space">\n        <input class="share-link" type="text" value="'.concat(e.browser.returnInviteLink(),'"></input>\n        <i class="fas fa-copy"></i>\n      </div>\n    </div>\n    \n<style>\n.welcome-modal-info {\n  clear: both;\n  font-size: 1.2em;\n}\n.welcome-modal-text {\n  margin:1em 0;\n  font-size: 1.5em;\n  font-weight: bold;\n}\n.link-space {\n    display: flex;\n}\n.link-space i {\n    font-size: 1.5em;\n    line-height: 1.5em;\n    margin: 0 10px;\n    cursor:pointer;\n}\n.link-space i:hover {\n    text-shadow: 2px 2px 2px #333;\n}\n</style>\n')}},function(e,t){e.exports=InviteFriendsPublickeyTemplate=function(e){return'\n    <div class="welcome-modal-header">\n      <h1>Add Contact using Network Address:</h1>\n    </div>\n    <div class="welcome-modal-main">\n      <div style="margin:1em 0">You can add contacts by providing their Saito username or publickey (address):</div>\n      <div style="display:flex">\n        <input style="width:100%; color:black; font-size:1em; background:white;margin:0 1em 0 0;" id="add-contact-input" type="text" placeholder="david@saito">\n        <button id="add-contact-btn" style="clear:both; margin:unset; margin-left:0px; min-width:6em; font-size:0.7em;">ADD CONTACT</button>\n      </div>\n      <div class="welcome-modal-info">\n        <div style="margin-top:20px" class="welcome-modal-explanation tip">\n          <div><b>What happens when I do this?</b></div>\n          <div class="tiptext">Your computer will send a request to connect over the blockchain. This will result in your two computers creating a secure encryption key and both of your accounts showing up in the account list (chat-box, etc.) of the other user.</div>\n        </div>\n      </div>\n    </div>\n  '}},function(e,t,r){e.exports=r(1090)},function(e,t,r){var n=r(1091),a=r(1132),i=/:([a-zA-Z0-9_\-\+]+):/g,o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function s(e){var t=e.indexOf(":");return t>-1?t===e.length-1?s(e=e.substring(0,t)):s(e=e.substr(t+1)):e}function c(e){return"string"==typeof e&&e.length>0?":"+e+":":e}var l=String.fromCharCode(65039),u=new RegExp(l,"g");function d(e){return e.replace(u,"")}var h=Object.keys(a).reduce((function(e,t){return e[d(a[t])]=t,e}),{}),p={emoji:a};p._get=function(e){return h[d(e)]?e:a.hasOwnProperty(e)?a[e]:"string"==typeof(t=e)&&":"!==t[0]?c(t):t;var t},p.get=function(e){return e=s(e),p._get(e)},p.find=function(e){return p.findByName(e)||p.findByCode(e)},p.findByName=function(e){var t=s(e),r=a[t];return r?{emoji:r,key:t}:void 0},p.findByCode=function(e){var t=d(e),r=h[t];return r?{emoji:a[r],key:r}:void 0},p.hasEmoji=function(e){return p.hasEmojiByName(e)||p.hasEmojiByCode(e)},p.hasEmojiByName=function(e){var t=p.findByName(e);return!!t&&t.key===s(e)},p.hasEmojiByCode=function(e){var t=p.findByCode(e);return!!t&&d(t.emoji)===d(e)},p.which=function(e,t){var r=d(e),n=h[r];return t?c(n):n},p.emojify=function(e,t,r){return e?e.split(i).map((function(e,n){if(n%2==0)return e;var a=p._get(e),i=a.indexOf(":")>-1;return i&&"function"==typeof t?t(e):i||"function"!=typeof r?a:r(a,e)})).join(""):""},p.random=function(){var e=Object.keys(a),t=e[Math.floor(Math.random()*e.length)];return{key:t,emoji:p._get(t)}},p.search=function(e){var t=Object.keys(a),r=s(e);return t.filter((function(e){return 0===e.toString().indexOf(r)})).map((function(e){return{key:e,emoji:p._get(e)}}))},p.unemojify=function(e){return e?n(e).map((function(e){return p.which(e,!0)||e})).join(""):""},p.replace=function(e,t,r){if(!e)return"";var a="function"==typeof t?t:function(){return t},i=n(e),s=i.map((function(e,t){var n=p.findByCode(e);return n&&r&&" "===i[t+1]&&(i[t+1]=""),n?a(n):e})).join("");return r?s.replace(o,""):s},p.strip=function(e){return p.replace(e,"",!0)},e.exports=p},function(e,t,r){var n=r(228),a=r(1092),i=r(1093),o=r(448),s=r(1105),c=r(1106),l=r(1107),u=r(1108),d=r(1109),h=r(1113),p=n?n.iterator:void 0;e.exports=function(e){if(!e)return[];if(o(e))return s(e)?d(e):a(e);if(p&&e[p])return c(e[p]());var t=i(e);return("[object Map]"==t?l:"[object Set]"==t?u:h)(e)}},function(e,t){e.exports=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}},function(e,t,r){var n=r(1094),a=r(1101),i=r(1102),o=r(1103),s=r(1104),c=r(96),l=r(447),u=l(n),d=l(a),h=l(i),p=l(o),f=l(s),m=c;(n&&"[object DataView]"!=m(new n(new ArrayBuffer(1)))||a&&"[object Map]"!=m(new a)||i&&"[object Promise]"!=m(i.resolve())||o&&"[object Set]"!=m(new o)||s&&"[object WeakMap]"!=m(new s))&&(m=function(e){var t=c(e),r="[object Object]"==t?e.constructor:void 0,n=r?l(r):"";if(n)switch(n){case u:return"[object DataView]";case d:return"[object Map]";case h:return"[object Promise]";case p:return"[object Set]";case f:return"[object WeakMap]"}return t}),e.exports=m},function(e,t,r){var n=r(95)(r(52),"DataView");e.exports=n},function(e,t,r){var n=r(445),a=r(1098),i=r(446),o=r(447),s=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,d=l.hasOwnProperty,h=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||a(e))&&(n(e)?h:s).test(o(e))}},function(e,t,r){var n=r(228),a=Object.prototype,i=a.hasOwnProperty,o=a.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=i.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var a=o.call(e);return n&&(t?e[s]=r:delete e[s]),a}},function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},function(e,t,r){var n,a=r(1099),i=(n=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!i&&i in e}},function(e,t,r){var n=r(52)["__core-js_shared__"];e.exports=n},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,r){var n=r(95)(r(52),"Map");e.exports=n},function(e,t,r){var n=r(95)(r(52),"Promise");e.exports=n},function(e,t,r){var n=r(95)(r(52),"Set");e.exports=n},function(e,t,r){var n=r(95)(r(52),"WeakMap");e.exports=n},function(e,t,r){var n=r(96),a=r(450),i=r(134);e.exports=function(e){return"string"==typeof e||!a(e)&&i(e)&&"[object String]"==n(e)}},function(e,t){e.exports=function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}},function(e,t){e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}},function(e,t){e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}},function(e,t,r){var n=r(1110),a=r(1111),i=r(1112);e.exports=function(e){return a(e)?i(e):n(e)}},function(e,t){e.exports=function(e){return e.split("")}},function(e,t){var r=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return r.test(e)}},function(e,t){var r="[\\ud800-\\udfff]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\\ud83c[\\udffb-\\udfff]",i="[^\\ud800-\\udfff]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+n+"|"+a+")"+"?",l="[\\ufe0e\\ufe0f]?"+c+("(?:\\u200d(?:"+[i,o,s].join("|")+")[\\ufe0e\\ufe0f]?"+c+")*"),u="(?:"+[i+n+"?",n,o,s,r].join("|")+")",d=RegExp(a+"(?="+a+")|"+u+l,"g");e.exports=function(e){return e.match(d)||[]}},function(e,t,r){var n=r(1114),a=r(1116);e.exports=function(e){return null==e?[]:n(e,a(e))}},function(e,t,r){var n=r(1115);e.exports=function(e,t){return n(t,(function(t){return e[t]}))}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}},function(e,t,r){var n=r(1117),a=r(1128),i=r(448);e.exports=function(e){return i(e)?n(e):a(e)}},function(e,t,r){var n=r(1118),a=r(1119),i=r(450),o=r(1121),s=r(1123),c=r(1124),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=i(e),u=!r&&a(e),d=!r&&!u&&o(e),h=!r&&!u&&!d&&c(e),p=r||u||d||h,f=p?n(e.length,String):[],m=f.length;for(var g in e)!t&&!l.call(e,g)||p&&("length"==g||d&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||f.push(g);return f}},function(e,t){e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},function(e,t,r){var n=r(1120),a=r(134),i=Object.prototype,o=i.hasOwnProperty,s=i.propertyIsEnumerable,c=n(function(){return arguments}())?n:function(e){return a(e)&&o.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},function(e,t,r){var n=r(96),a=r(134);e.exports=function(e){return a(e)&&"[object Arguments]"==n(e)}},function(e,t,r){(function(e){var n=r(52),a=r(1122),i=t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=o&&o.exports===i?n.Buffer:void 0,c=(s?s.isBuffer:void 0)||a;e.exports=c}).call(this,r(66)(e))},function(e,t){e.exports=function(){return!1}},function(e,t){var r=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&r.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,r){var n=r(1125),a=r(1126),i=r(1127),o=i&&i.isTypedArray,s=o?a(o):n;e.exports=s},function(e,t,r){var n=r(96),a=r(449),i=r(134),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&a(e.length)&&!!o[n(e)]}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,r){(function(e){var n=r(444),a=t&&!t.nodeType&&t,i=a&&"object"==typeof e&&e&&!e.nodeType&&e,o=i&&i.exports===a&&n.process,s=function(){try{var e=i&&i.require&&i.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=s}).call(this,r(66)(e))},function(e,t,r){var n=r(1129),a=r(1130),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return a(e);var t=[];for(var r in Object(e))i.call(e,r)&&"constructor"!=r&&t.push(r);return t}},function(e,t){var r=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},function(e,t,r){var n=r(1131)(Object.keys,Object);e.exports=n},function(e,t){e.exports=function(e,t){return function(r){return e(t(r))}}},function(e){e.exports=JSON.parse('{"100":"💯","1234":"🔢","umbrella_with_rain_drops":"☔","coffee":"☕","aries":"♈","taurus":"♉","sagittarius":"♐","capricorn":"♑","aquarius":"♒","pisces":"♓","anchor":"⚓","white_check_mark":"✅","sparkles":"✨","question":"❓","grey_question":"❔","grey_exclamation":"❕","exclamation":"❗","heavy_exclamation_mark":"❗","heavy_plus_sign":"➕","heavy_minus_sign":"➖","heavy_division_sign":"➗","hash":"#️⃣","keycap_star":"*️⃣","zero":"0️⃣","one":"1️⃣","two":"2️⃣","three":"3️⃣","four":"4️⃣","five":"5️⃣","six":"6️⃣","seven":"7️⃣","eight":"8️⃣","nine":"9️⃣","copyright":"©️","registered":"®️","mahjong":"🀄","black_joker":"🃏","a":"🅰️","b":"🅱️","o2":"🅾️","parking":"🅿️","ab":"🆎","cl":"🆑","cool":"🆒","free":"🆓","id":"🆔","new":"🆕","ng":"🆖","ok":"🆗","sos":"🆘","up":"🆙","vs":"🆚","flag-ac":"🇦🇨","flag-ad":"🇦🇩","flag-ae":"🇦🇪","flag-af":"🇦🇫","flag-ag":"🇦🇬","flag-ai":"🇦🇮","flag-al":"🇦🇱","flag-am":"🇦🇲","flag-ao":"🇦🇴","flag-aq":"🇦🇶","flag-ar":"🇦🇷","flag-as":"🇦🇸","flag-at":"🇦🇹","flag-au":"🇦🇺","flag-aw":"🇦🇼","flag-ax":"🇦🇽","flag-az":"🇦🇿","flag-ba":"🇧🇦","flag-bb":"🇧🇧","flag-bd":"🇧🇩","flag-be":"🇧🇪","flag-bf":"🇧🇫","flag-bg":"🇧🇬","flag-bh":"🇧🇭","flag-bi":"🇧🇮","flag-bj":"🇧🇯","flag-bl":"🇧🇱","flag-bm":"🇧🇲","flag-bn":"🇧🇳","flag-bo":"🇧🇴","flag-bq":"🇧🇶","flag-br":"🇧🇷","flag-bs":"🇧🇸","flag-bt":"🇧🇹","flag-bv":"🇧🇻","flag-bw":"🇧🇼","flag-by":"🇧🇾","flag-bz":"🇧🇿","flag-ca":"🇨🇦","flag-cc":"🇨🇨","flag-cd":"🇨🇩","flag-cf":"🇨🇫","flag-cg":"🇨🇬","flag-ch":"🇨🇭","flag-ci":"🇨🇮","flag-ck":"🇨🇰","flag-cl":"🇨🇱","flag-cm":"🇨🇲","cn":"🇨🇳","flag-cn":"🇨🇳","flag-co":"🇨🇴","flag-cp":"🇨🇵","flag-cr":"🇨🇷","flag-cu":"🇨🇺","flag-cv":"🇨🇻","flag-cw":"🇨🇼","flag-cx":"🇨🇽","flag-cy":"🇨🇾","flag-cz":"🇨🇿","de":"🇩🇪","flag-de":"🇩🇪","flag-dg":"🇩🇬","flag-dj":"🇩🇯","flag-dk":"🇩🇰","flag-dm":"🇩🇲","flag-do":"🇩🇴","flag-dz":"🇩🇿","flag-ea":"🇪🇦","flag-ec":"🇪🇨","flag-ee":"🇪🇪","flag-eg":"🇪🇬","flag-eh":"🇪🇭","flag-er":"🇪🇷","es":"🇪🇸","flag-es":"🇪🇸","flag-et":"🇪🇹","flag-eu":"🇪🇺","flag-fi":"🇫🇮","flag-fj":"🇫🇯","flag-fk":"🇫🇰","flag-fm":"🇫🇲","flag-fo":"🇫🇴","fr":"🇫🇷","flag-fr":"🇫🇷","flag-ga":"🇬🇦","gb":"🇬🇧","uk":"🇬🇧","flag-gb":"🇬🇧","flag-gd":"🇬🇩","flag-ge":"🇬🇪","flag-gf":"🇬🇫","flag-gg":"🇬🇬","flag-gh":"🇬🇭","flag-gi":"🇬🇮","flag-gl":"🇬🇱","flag-gm":"🇬🇲","flag-gn":"🇬🇳","flag-gp":"🇬🇵","flag-gq":"🇬🇶","flag-gr":"🇬🇷","flag-gs":"🇬🇸","flag-gt":"🇬🇹","flag-gu":"🇬🇺","flag-gw":"🇬🇼","flag-gy":"🇬🇾","flag-hk":"🇭🇰","flag-hm":"🇭🇲","flag-hn":"🇭🇳","flag-hr":"🇭🇷","flag-ht":"🇭🇹","flag-hu":"🇭🇺","flag-ic":"🇮🇨","flag-id":"🇮🇩","flag-ie":"🇮🇪","flag-il":"🇮🇱","flag-im":"🇮🇲","flag-in":"🇮🇳","flag-io":"🇮🇴","flag-iq":"🇮🇶","flag-ir":"🇮🇷","flag-is":"🇮🇸","it":"🇮🇹","flag-it":"🇮🇹","flag-je":"🇯🇪","flag-jm":"🇯🇲","flag-jo":"🇯🇴","jp":"🇯🇵","flag-jp":"🇯🇵","flag-ke":"🇰🇪","flag-kg":"🇰🇬","flag-kh":"🇰🇭","flag-ki":"🇰🇮","flag-km":"🇰🇲","flag-kn":"🇰🇳","flag-kp":"🇰🇵","kr":"🇰🇷","flag-kr":"🇰🇷","flag-kw":"🇰🇼","flag-ky":"🇰🇾","flag-kz":"🇰🇿","flag-la":"🇱🇦","flag-lb":"🇱🇧","flag-lc":"🇱🇨","flag-li":"🇱🇮","flag-lk":"🇱🇰","flag-lr":"🇱🇷","flag-ls":"🇱🇸","flag-lt":"🇱🇹","flag-lu":"🇱🇺","flag-lv":"🇱🇻","flag-ly":"🇱🇾","flag-ma":"🇲🇦","flag-mc":"🇲🇨","flag-md":"🇲🇩","flag-me":"🇲🇪","flag-mf":"🇲🇫","flag-mg":"🇲🇬","flag-mh":"🇲🇭","flag-mk":"🇲🇰","flag-ml":"🇲🇱","flag-mm":"🇲🇲","flag-mn":"🇲🇳","flag-mo":"🇲🇴","flag-mp":"🇲🇵","flag-mq":"🇲🇶","flag-mr":"🇲🇷","flag-ms":"🇲🇸","flag-mt":"🇲🇹","flag-mu":"🇲🇺","flag-mv":"🇲🇻","flag-mw":"🇲🇼","flag-mx":"🇲🇽","flag-my":"🇲🇾","flag-mz":"🇲🇿","flag-na":"🇳🇦","flag-nc":"🇳🇨","flag-ne":"🇳🇪","flag-nf":"🇳🇫","flag-ng":"🇳🇬","flag-ni":"🇳🇮","flag-nl":"🇳🇱","flag-no":"🇳🇴","flag-np":"🇳🇵","flag-nr":"🇳🇷","flag-nu":"🇳🇺","flag-nz":"🇳🇿","flag-om":"🇴🇲","flag-pa":"🇵🇦","flag-pe":"🇵🇪","flag-pf":"🇵🇫","flag-pg":"🇵🇬","flag-ph":"🇵🇭","flag-pk":"🇵🇰","flag-pl":"🇵🇱","flag-pm":"🇵🇲","flag-pn":"🇵🇳","flag-pr":"🇵🇷","flag-ps":"🇵🇸","flag-pt":"🇵🇹","flag-pw":"🇵🇼","flag-py":"🇵🇾","flag-qa":"🇶🇦","flag-re":"🇷🇪","flag-ro":"🇷🇴","flag-rs":"🇷🇸","ru":"🇷🇺","flag-ru":"🇷🇺","flag-rw":"🇷🇼","flag-sa":"🇸🇦","flag-sb":"🇸🇧","flag-sc":"🇸🇨","flag-sd":"🇸🇩","flag-se":"🇸🇪","flag-sg":"🇸🇬","flag-sh":"🇸🇭","flag-si":"🇸🇮","flag-sj":"🇸🇯","flag-sk":"🇸🇰","flag-sl":"🇸🇱","flag-sm":"🇸🇲","flag-sn":"🇸🇳","flag-so":"🇸🇴","flag-sr":"🇸🇷","flag-ss":"🇸🇸","flag-st":"🇸🇹","flag-sv":"🇸🇻","flag-sx":"🇸🇽","flag-sy":"🇸🇾","flag-sz":"🇸🇿","flag-ta":"🇹🇦","flag-tc":"🇹🇨","flag-td":"🇹🇩","flag-tf":"🇹🇫","flag-tg":"🇹🇬","flag-th":"🇹🇭","flag-tj":"🇹🇯","flag-tk":"🇹🇰","flag-tl":"🇹🇱","flag-tm":"🇹🇲","flag-tn":"🇹🇳","flag-to":"🇹🇴","flag-tr":"🇹🇷","flag-tt":"🇹🇹","flag-tv":"🇹🇻","flag-tw":"🇹🇼","flag-tz":"🇹🇿","flag-ua":"🇺🇦","flag-ug":"🇺🇬","flag-um":"🇺🇲","flag-un":"🇺🇳","us":"🇺🇸","flag-us":"🇺🇸","flag-uy":"🇺🇾","flag-uz":"🇺🇿","flag-va":"🇻🇦","flag-vc":"🇻🇨","flag-ve":"🇻🇪","flag-vg":"🇻🇬","flag-vi":"🇻🇮","flag-vn":"🇻🇳","flag-vu":"🇻🇺","flag-wf":"🇼🇫","flag-ws":"🇼🇸","flag-xk":"🇽🇰","flag-ye":"🇾🇪","flag-yt":"🇾🇹","flag-za":"🇿🇦","flag-zm":"🇿🇲","flag-zw":"🇿🇼","koko":"🈁","sa":"🈂️","u7121":"🈚","u6307":"🈯","u7981":"🈲","u7a7a":"🈳","u5408":"🈴","u6e80":"🈵","u6709":"🈶","u6708":"🈷️","u7533":"🈸","u5272":"🈹","u55b6":"🈺","ideograph_advantage":"🉐","accept":"🉑","cyclone":"🌀","foggy":"🌁","closed_umbrella":"🌂","night_with_stars":"🌃","sunrise_over_mountains":"🌄","sunrise":"🌅","city_sunset":"🌆","city_sunrise":"🌇","rainbow":"🌈","bridge_at_night":"🌉","ocean":"🌊","volcano":"🌋","milky_way":"🌌","earth_africa":"🌍","earth_americas":"🌎","earth_asia":"🌏","globe_with_meridians":"🌐","new_moon":"🌑","waxing_crescent_moon":"🌒","first_quarter_moon":"🌓","moon":"🌔","waxing_gibbous_moon":"🌔","full_moon":"🌕","waning_gibbous_moon":"🌖","last_quarter_moon":"🌗","waning_crescent_moon":"🌘","crescent_moon":"🌙","new_moon_with_face":"🌚","first_quarter_moon_with_face":"🌛","last_quarter_moon_with_face":"🌜","full_moon_with_face":"🌝","sun_with_face":"🌞","star2":"🌟","stars":"🌠","thermometer":"🌡️","mostly_sunny":"🌤️","sun_small_cloud":"🌤️","barely_sunny":"🌥️","sun_behind_cloud":"🌥️","partly_sunny_rain":"🌦️","sun_behind_rain_cloud":"🌦️","rain_cloud":"🌧️","snow_cloud":"🌨️","lightning":"🌩️","lightning_cloud":"🌩️","tornado":"🌪️","tornado_cloud":"🌪️","fog":"🌫️","wind_blowing_face":"🌬️","hotdog":"🌭","taco":"🌮","burrito":"🌯","chestnut":"🌰","seedling":"🌱","evergreen_tree":"🌲","deciduous_tree":"🌳","palm_tree":"🌴","cactus":"🌵","hot_pepper":"🌶️","tulip":"🌷","cherry_blossom":"🌸","rose":"🌹","hibiscus":"🌺","sunflower":"🌻","blossom":"🌼","corn":"🌽","ear_of_rice":"🌾","herb":"🌿","four_leaf_clover":"🍀","maple_leaf":"🍁","fallen_leaf":"🍂","leaves":"🍃","mushroom":"🍄","tomato":"🍅","eggplant":"🍆","grapes":"🍇","melon":"🍈","watermelon":"🍉","tangerine":"🍊","lemon":"🍋","banana":"🍌","pineapple":"🍍","apple":"🍎","green_apple":"🍏","pear":"🍐","peach":"🍑","cherries":"🍒","strawberry":"🍓","hamburger":"🍔","pizza":"🍕","meat_on_bone":"🍖","poultry_leg":"🍗","rice_cracker":"🍘","rice_ball":"🍙","rice":"🍚","curry":"🍛","ramen":"🍜","spaghetti":"🍝","bread":"🍞","fries":"🍟","sweet_potato":"🍠","dango":"🍡","oden":"🍢","sushi":"🍣","fried_shrimp":"🍤","fish_cake":"🍥","icecream":"🍦","shaved_ice":"🍧","ice_cream":"🍨","doughnut":"🍩","cookie":"🍪","chocolate_bar":"🍫","candy":"🍬","lollipop":"🍭","custard":"🍮","honey_pot":"🍯","cake":"🍰","bento":"🍱","stew":"🍲","fried_egg":"🍳","cooking":"🍳","fork_and_knife":"🍴","tea":"🍵","sake":"🍶","wine_glass":"🍷","cocktail":"🍸","tropical_drink":"🍹","beer":"🍺","beers":"🍻","baby_bottle":"🍼","knife_fork_plate":"🍽️","champagne":"🍾","popcorn":"🍿","ribbon":"🎀","gift":"🎁","birthday":"🎂","jack_o_lantern":"🎃","christmas_tree":"🎄","santa":"🎅","fireworks":"🎆","sparkler":"🎇","balloon":"🎈","tada":"🎉","confetti_ball":"🎊","tanabata_tree":"🎋","crossed_flags":"🎌","bamboo":"🎍","dolls":"🎎","flags":"🎏","wind_chime":"🎐","rice_scene":"🎑","school_satchel":"🎒","mortar_board":"🎓","medal":"🎖️","reminder_ribbon":"🎗️","studio_microphone":"🎙️","level_slider":"🎚️","control_knobs":"🎛️","film_frames":"🎞️","admission_tickets":"🎟️","carousel_horse":"🎠","ferris_wheel":"🎡","roller_coaster":"🎢","fishing_pole_and_fish":"🎣","microphone":"🎤","movie_camera":"🎥","cinema":"🎦","headphones":"🎧","art":"🎨","tophat":"🎩","circus_tent":"🎪","ticket":"🎫","clapper":"🎬","performing_arts":"🎭","video_game":"🎮","dart":"🎯","slot_machine":"🎰","8ball":"🎱","game_die":"🎲","bowling":"🎳","flower_playing_cards":"🎴","musical_note":"🎵","notes":"🎶","saxophone":"🎷","guitar":"🎸","musical_keyboard":"🎹","trumpet":"🎺","violin":"🎻","musical_score":"🎼","running_shirt_with_sash":"🎽","tennis":"🎾","ski":"🎿","basketball":"🏀","checkered_flag":"🏁","snowboarder":"🏂","woman-running":"🏃‍♀️","man-running":"🏃‍♂️","runner":"🏃‍♂️","running":"🏃‍♂️","woman-surfing":"🏄‍♀️","man-surfing":"🏄‍♂️","surfer":"🏄‍♂️","sports_medal":"🏅","trophy":"🏆","horse_racing":"🏇","football":"🏈","rugby_football":"🏉","woman-swimming":"🏊‍♀️","man-swimming":"🏊‍♂️","swimmer":"🏊‍♂️","woman-lifting-weights":"🏋️‍♀️","man-lifting-weights":"🏋️‍♂️","weight_lifter":"🏋️‍♂️","woman-golfing":"🏌️‍♀️","man-golfing":"🏌️‍♂️","golfer":"🏌️‍♂️","racing_motorcycle":"🏍️","racing_car":"🏎️","cricket_bat_and_ball":"🏏","volleyball":"🏐","field_hockey_stick_and_ball":"🏑","ice_hockey_stick_and_puck":"🏒","table_tennis_paddle_and_ball":"🏓","snow_capped_mountain":"🏔️","camping":"🏕️","beach_with_umbrella":"🏖️","building_construction":"🏗️","house_buildings":"🏘️","cityscape":"🏙️","derelict_house_building":"🏚️","classical_building":"🏛️","desert":"🏜️","desert_island":"🏝️","national_park":"🏞️","stadium":"🏟️","house":"🏠","house_with_garden":"🏡","office":"🏢","post_office":"🏣","european_post_office":"🏤","hospital":"🏥","bank":"🏦","atm":"🏧","hotel":"🏨","love_hotel":"🏩","convenience_store":"🏪","school":"🏫","department_store":"🏬","factory":"🏭","izakaya_lantern":"🏮","lantern":"🏮","japanese_castle":"🏯","european_castle":"🏰","rainbow-flag":"🏳️‍🌈","transgender_flag":"🏳️‍⚧️","waving_white_flag":"🏳️","pirate_flag":"🏴‍☠️","flag-england":"🏴󠁧󠁢󠁥󠁮󠁧󠁿","flag-scotland":"🏴󠁧󠁢󠁳󠁣󠁴󠁿","flag-wales":"🏴󠁧󠁢󠁷󠁬󠁳󠁿","waving_black_flag":"🏴","rosette":"🏵️","label":"🏷️","badminton_racquet_and_shuttlecock":"🏸","bow_and_arrow":"🏹","amphora":"🏺","skin-tone-2":"🏻","skin-tone-3":"🏼","skin-tone-4":"🏽","skin-tone-5":"🏾","skin-tone-6":"🏿","rat":"🐀","mouse2":"🐁","ox":"🐂","water_buffalo":"🐃","cow2":"🐄","tiger2":"🐅","leopard":"🐆","rabbit2":"🐇","black_cat":"🐈‍⬛","cat2":"🐈","dragon":"🐉","crocodile":"🐊","whale2":"🐋","snail":"🐌","snake":"🐍","racehorse":"🐎","ram":"🐏","goat":"🐐","sheep":"🐑","monkey":"🐒","rooster":"🐓","chicken":"🐔","service_dog":"🐕‍🦺","dog2":"🐕","pig2":"🐖","boar":"🐗","elephant":"🐘","octopus":"🐙","shell":"🐚","bug":"🐛","ant":"🐜","bee":"🐝","honeybee":"🐝","ladybug":"🐞","lady_beetle":"🐞","fish":"🐟","tropical_fish":"🐠","blowfish":"🐡","turtle":"🐢","hatching_chick":"🐣","baby_chick":"🐤","hatched_chick":"🐥","bird":"🐦","penguin":"🐧","koala":"🐨","poodle":"🐩","dromedary_camel":"🐪","camel":"🐫","dolphin":"🐬","flipper":"🐬","mouse":"🐭","cow":"🐮","tiger":"🐯","rabbit":"🐰","cat":"🐱","dragon_face":"🐲","whale":"🐳","horse":"🐴","monkey_face":"🐵","dog":"🐶","pig":"🐷","frog":"🐸","hamster":"🐹","wolf":"🐺","polar_bear":"🐻‍❄️","bear":"🐻","panda_face":"🐼","pig_nose":"🐽","feet":"🐾","paw_prints":"🐾","chipmunk":"🐿️","eyes":"👀","eye-in-speech-bubble":"👁️‍🗨️","eye":"👁️","ear":"👂","nose":"👃","lips":"👄","tongue":"👅","point_up_2":"👆","point_down":"👇","point_left":"👈","point_right":"👉","facepunch":"👊","punch":"👊","wave":"👋","ok_hand":"👌","+1":"👍","thumbsup":"👍","-1":"👎","thumbsdown":"👎","clap":"👏","open_hands":"👐","crown":"👑","womans_hat":"👒","eyeglasses":"👓","necktie":"👔","shirt":"👕","tshirt":"👕","jeans":"👖","dress":"👗","kimono":"👘","bikini":"👙","womans_clothes":"👚","purse":"👛","handbag":"👜","pouch":"👝","mans_shoe":"👞","shoe":"👞","athletic_shoe":"👟","high_heel":"👠","sandal":"👡","boot":"👢","footprints":"👣","bust_in_silhouette":"👤","busts_in_silhouette":"👥","boy":"👦","girl":"👧","male-farmer":"👨‍🌾","male-cook":"👨‍🍳","man_feeding_baby":"👨‍🍼","male-student":"👨‍🎓","male-singer":"👨‍🎤","male-artist":"👨‍🎨","male-teacher":"👨‍🏫","male-factory-worker":"👨‍🏭","man-boy-boy":"👨‍👦‍👦","man-boy":"👨‍👦","man-girl-boy":"👨‍👧‍👦","man-girl-girl":"👨‍👧‍👧","man-girl":"👨‍👧","man-man-boy":"👨‍👨‍👦","man-man-boy-boy":"👨‍👨‍👦‍👦","man-man-girl":"👨‍👨‍👧","man-man-girl-boy":"👨‍👨‍👧‍👦","man-man-girl-girl":"👨‍👨‍👧‍👧","man-woman-boy":"👨‍👩‍👦","family":"👨‍👩‍👦","man-woman-boy-boy":"👨‍👩‍👦‍👦","man-woman-girl":"👨‍👩‍👧","man-woman-girl-boy":"👨‍👩‍👧‍👦","man-woman-girl-girl":"👨‍👩‍👧‍👧","male-technologist":"👨‍💻","male-office-worker":"👨‍💼","male-mechanic":"👨‍🔧","male-scientist":"👨‍🔬","male-astronaut":"👨‍🚀","male-firefighter":"👨‍🚒","man_with_probing_cane":"👨‍🦯","red_haired_man":"👨‍🦰","curly_haired_man":"👨‍🦱","bald_man":"👨‍🦲","white_haired_man":"👨‍🦳","man_in_motorized_wheelchair":"👨‍🦼","man_in_manual_wheelchair":"👨‍🦽","male-doctor":"👨‍⚕️","male-judge":"👨‍⚖️","male-pilot":"👨‍✈️","man-heart-man":"👨‍❤️‍👨","man-kiss-man":"👨‍❤️‍💋‍👨","man":"👨","female-farmer":"👩‍🌾","female-cook":"👩‍🍳","woman_feeding_baby":"👩‍🍼","female-student":"👩‍🎓","female-singer":"👩‍🎤","female-artist":"👩‍🎨","female-teacher":"👩‍🏫","female-factory-worker":"👩‍🏭","woman-boy-boy":"👩‍👦‍👦","woman-boy":"👩‍👦","woman-girl-boy":"👩‍👧‍👦","woman-girl-girl":"👩‍👧‍👧","woman-girl":"👩‍👧","woman-woman-boy":"👩‍👩‍👦","woman-woman-boy-boy":"👩‍👩‍👦‍👦","woman-woman-girl":"👩‍👩‍👧","woman-woman-girl-boy":"👩‍👩‍👧‍👦","woman-woman-girl-girl":"👩‍👩‍👧‍👧","female-technologist":"👩‍💻","female-office-worker":"👩‍💼","female-mechanic":"👩‍🔧","female-scientist":"👩‍🔬","female-astronaut":"👩‍🚀","female-firefighter":"👩‍🚒","woman_with_probing_cane":"👩‍🦯","red_haired_woman":"👩‍🦰","curly_haired_woman":"👩‍🦱","bald_woman":"👩‍🦲","white_haired_woman":"👩‍🦳","woman_in_motorized_wheelchair":"👩‍🦼","woman_in_manual_wheelchair":"👩‍🦽","female-doctor":"👩‍⚕️","female-judge":"👩‍⚖️","female-pilot":"👩‍✈️","woman-heart-man":"👩‍❤️‍👨","woman-heart-woman":"👩‍❤️‍👩","woman-kiss-man":"👩‍❤️‍💋‍👨","woman-kiss-woman":"👩‍❤️‍💋‍👩","woman":"👩","man_and_woman_holding_hands":"👫","woman_and_man_holding_hands":"👫","couple":"👫","two_men_holding_hands":"👬","men_holding_hands":"👬","two_women_holding_hands":"👭","women_holding_hands":"👭","female-police-officer":"👮‍♀️","male-police-officer":"👮‍♂️","cop":"👮‍♂️","women-with-bunny-ears-partying":"👯‍♀️","woman-with-bunny-ears-partying":"👯‍♀️","dancers":"👯‍♀️","men-with-bunny-ears-partying":"👯‍♂️","man-with-bunny-ears-partying":"👯‍♂️","woman_with_veil":"👰‍♀️","man_with_veil":"👰‍♂️","bride_with_veil":"👰","blond-haired-woman":"👱‍♀️","blond-haired-man":"👱‍♂️","person_with_blond_hair":"👱‍♂️","man_with_gua_pi_mao":"👲","woman-wearing-turban":"👳‍♀️","man-wearing-turban":"👳‍♂️","man_with_turban":"👳‍♂️","older_man":"👴","older_woman":"👵","baby":"👶","female-construction-worker":"👷‍♀️","male-construction-worker":"👷‍♂️","construction_worker":"👷‍♂️","princess":"👸","japanese_ogre":"👹","japanese_goblin":"👺","ghost":"👻","angel":"👼","alien":"👽","space_invader":"👾","imp":"👿","skull":"💀","woman-tipping-hand":"💁‍♀️","information_desk_person":"💁‍♀️","man-tipping-hand":"💁‍♂️","female-guard":"💂‍♀️","male-guard":"💂‍♂️","guardsman":"💂‍♂️","dancer":"💃","lipstick":"💄","nail_care":"💅","woman-getting-massage":"💆‍♀️","massage":"💆‍♀️","man-getting-massage":"💆‍♂️","woman-getting-haircut":"💇‍♀️","haircut":"💇‍♀️","man-getting-haircut":"💇‍♂️","barber":"💈","syringe":"💉","pill":"💊","kiss":"💋","love_letter":"💌","ring":"💍","gem":"💎","couplekiss":"💏","bouquet":"💐","couple_with_heart":"💑","wedding":"💒","heartbeat":"💓","broken_heart":"💔","two_hearts":"💕","sparkling_heart":"💖","heartpulse":"💗","cupid":"💘","blue_heart":"💙","green_heart":"💚","yellow_heart":"💛","purple_heart":"💜","gift_heart":"💝","revolving_hearts":"💞","heart_decoration":"💟","diamond_shape_with_a_dot_inside":"💠","bulb":"💡","anger":"💢","bomb":"💣","zzz":"💤","boom":"💥","collision":"💥","sweat_drops":"💦","droplet":"💧","dash":"💨","hankey":"💩","poop":"💩","shit":"💩","muscle":"💪","dizzy":"💫","speech_balloon":"💬","thought_balloon":"💭","white_flower":"💮","moneybag":"💰","currency_exchange":"💱","heavy_dollar_sign":"💲","credit_card":"💳","yen":"💴","dollar":"💵","euro":"💶","pound":"💷","money_with_wings":"💸","chart":"💹","seat":"💺","computer":"💻","briefcase":"💼","minidisc":"💽","floppy_disk":"💾","cd":"💿","dvd":"📀","file_folder":"📁","open_file_folder":"📂","page_with_curl":"📃","page_facing_up":"📄","date":"📅","calendar":"📆","card_index":"📇","chart_with_upwards_trend":"📈","chart_with_downwards_trend":"📉","bar_chart":"📊","clipboard":"📋","pushpin":"📌","round_pushpin":"📍","paperclip":"📎","straight_ruler":"📏","triangular_ruler":"📐","bookmark_tabs":"📑","ledger":"📒","notebook":"📓","notebook_with_decorative_cover":"📔","closed_book":"📕","book":"📖","open_book":"📖","green_book":"📗","blue_book":"📘","orange_book":"📙","books":"📚","name_badge":"📛","scroll":"📜","memo":"📝","pencil":"📝","telephone_receiver":"📞","pager":"📟","fax":"📠","satellite_antenna":"📡","loudspeaker":"📢","mega":"📣","outbox_tray":"📤","inbox_tray":"📥","package":"📦","e-mail":"📧","incoming_envelope":"📨","envelope_with_arrow":"📩","mailbox_closed":"📪","mailbox":"📫","mailbox_with_mail":"📬","mailbox_with_no_mail":"📭","postbox":"📮","postal_horn":"📯","newspaper":"📰","iphone":"📱","calling":"📲","vibration_mode":"📳","mobile_phone_off":"📴","no_mobile_phones":"📵","signal_strength":"📶","camera":"📷","camera_with_flash":"📸","video_camera":"📹","tv":"📺","radio":"📻","vhs":"📼","film_projector":"📽️","prayer_beads":"📿","twisted_rightwards_arrows":"🔀","repeat":"🔁","repeat_one":"🔂","arrows_clockwise":"🔃","arrows_counterclockwise":"🔄","low_brightness":"🔅","high_brightness":"🔆","mute":"🔇","speaker":"🔈","sound":"🔉","loud_sound":"🔊","battery":"🔋","electric_plug":"🔌","mag":"🔍","mag_right":"🔎","lock_with_ink_pen":"🔏","closed_lock_with_key":"🔐","key":"🔑","lock":"🔒","unlock":"🔓","bell":"🔔","no_bell":"🔕","bookmark":"🔖","link":"🔗","radio_button":"🔘","back":"🔙","end":"🔚","on":"🔛","soon":"🔜","top":"🔝","underage":"🔞","keycap_ten":"🔟","capital_abcd":"🔠","abcd":"🔡","symbols":"🔣","abc":"🔤","fire":"🔥","flashlight":"🔦","wrench":"🔧","hammer":"🔨","nut_and_bolt":"🔩","hocho":"🔪","knife":"🔪","gun":"🔫","microscope":"🔬","telescope":"🔭","crystal_ball":"🔮","six_pointed_star":"🔯","beginner":"🔰","trident":"🔱","black_square_button":"🔲","white_square_button":"🔳","red_circle":"🔴","large_blue_circle":"🔵","large_orange_diamond":"🔶","large_blue_diamond":"🔷","small_orange_diamond":"🔸","small_blue_diamond":"🔹","small_red_triangle":"🔺","small_red_triangle_down":"🔻","arrow_up_small":"🔼","arrow_down_small":"🔽","om_symbol":"🕉️","dove_of_peace":"🕊️","kaaba":"🕋","mosque":"🕌","synagogue":"🕍","menorah_with_nine_branches":"🕎","clock1":"🕐","clock2":"🕑","clock3":"🕒","clock4":"🕓","clock5":"🕔","clock6":"🕕","clock7":"🕖","clock8":"🕗","clock9":"🕘","clock10":"🕙","clock11":"🕚","clock12":"🕛","clock130":"🕜","clock230":"🕝","clock330":"🕞","clock430":"🕟","clock530":"🕠","clock630":"🕡","clock730":"🕢","clock830":"🕣","clock930":"🕤","clock1030":"🕥","clock1130":"🕦","clock1230":"🕧","candle":"🕯️","mantelpiece_clock":"🕰️","hole":"🕳️","man_in_business_suit_levitating":"🕴️","female-detective":"🕵️‍♀️","male-detective":"🕵️‍♂️","sleuth_or_spy":"🕵️‍♂️","dark_sunglasses":"🕶️","spider":"🕷️","spider_web":"🕸️","joystick":"🕹️","man_dancing":"🕺","linked_paperclips":"🖇️","lower_left_ballpoint_pen":"🖊️","lower_left_fountain_pen":"🖋️","lower_left_paintbrush":"🖌️","lower_left_crayon":"🖍️","raised_hand_with_fingers_splayed":"🖐️","middle_finger":"🖕","reversed_hand_with_middle_finger_extended":"🖕","spock-hand":"🖖","black_heart":"🖤","desktop_computer":"🖥️","printer":"🖨️","three_button_mouse":"🖱️","trackball":"🖲️","frame_with_picture":"🖼️","card_index_dividers":"🗂️","card_file_box":"🗃️","file_cabinet":"🗄️","wastebasket":"🗑️","spiral_note_pad":"🗒️","spiral_calendar_pad":"🗓️","compression":"🗜️","old_key":"🗝️","rolled_up_newspaper":"🗞️","dagger_knife":"🗡️","speaking_head_in_silhouette":"🗣️","left_speech_bubble":"🗨️","right_anger_bubble":"🗯️","ballot_box_with_ballot":"🗳️","world_map":"🗺️","mount_fuji":"🗻","tokyo_tower":"🗼","statue_of_liberty":"🗽","japan":"🗾","moyai":"🗿","grinning":"😀","grin":"😁","joy":"😂","smiley":"😃","smile":"😄","sweat_smile":"😅","laughing":"😆","satisfied":"😆","innocent":"😇","smiling_imp":"😈","wink":"😉","blush":"😊","yum":"😋","relieved":"😌","heart_eyes":"😍","sunglasses":"😎","smirk":"😏","neutral_face":"😐","expressionless":"😑","unamused":"😒","sweat":"😓","pensive":"😔","confused":"😕","confounded":"😖","kissing":"😗","kissing_heart":"😘","kissing_smiling_eyes":"😙","kissing_closed_eyes":"😚","stuck_out_tongue":"😛","stuck_out_tongue_winking_eye":"😜","stuck_out_tongue_closed_eyes":"😝","disappointed":"😞","worried":"😟","angry":"😠","rage":"😡","cry":"😢","persevere":"😣","triumph":"😤","disappointed_relieved":"😥","frowning":"😦","anguished":"😧","fearful":"😨","weary":"😩","sleepy":"😪","tired_face":"😫","grimacing":"😬","sob":"😭","face_exhaling":"😮‍💨","open_mouth":"😮","hushed":"😯","cold_sweat":"😰","scream":"😱","astonished":"😲","flushed":"😳","sleeping":"😴","face_with_spiral_eyes":"😵‍💫","dizzy_face":"😵","face_in_clouds":"😶‍🌫️","no_mouth":"😶","mask":"😷","smile_cat":"😸","joy_cat":"😹","smiley_cat":"😺","heart_eyes_cat":"😻","smirk_cat":"😼","kissing_cat":"😽","pouting_cat":"😾","crying_cat_face":"😿","scream_cat":"🙀","slightly_frowning_face":"🙁","slightly_smiling_face":"🙂","upside_down_face":"🙃","face_with_rolling_eyes":"🙄","woman-gesturing-no":"🙅‍♀️","no_good":"🙅‍♀️","man-gesturing-no":"🙅‍♂️","woman-gesturing-ok":"🙆‍♀️","ok_woman":"🙆‍♀️","man-gesturing-ok":"🙆‍♂️","woman-bowing":"🙇‍♀️","man-bowing":"🙇‍♂️","bow":"🙇‍♂️","see_no_evil":"🙈","hear_no_evil":"🙉","speak_no_evil":"🙊","woman-raising-hand":"🙋‍♀️","raising_hand":"🙋‍♀️","man-raising-hand":"🙋‍♂️","raised_hands":"🙌","woman-frowning":"🙍‍♀️","person_frowning":"🙍‍♀️","man-frowning":"🙍‍♂️","woman-pouting":"🙎‍♀️","person_with_pouting_face":"🙎‍♀️","man-pouting":"🙎‍♂️","pray":"🙏","rocket":"🚀","helicopter":"🚁","steam_locomotive":"🚂","railway_car":"🚃","bullettrain_side":"🚄","bullettrain_front":"🚅","train2":"🚆","metro":"🚇","light_rail":"🚈","station":"🚉","tram":"🚊","train":"🚋","bus":"🚌","oncoming_bus":"🚍","trolleybus":"🚎","busstop":"🚏","minibus":"🚐","ambulance":"🚑","fire_engine":"🚒","police_car":"🚓","oncoming_police_car":"🚔","taxi":"🚕","oncoming_taxi":"🚖","car":"🚗","red_car":"🚗","oncoming_automobile":"🚘","blue_car":"🚙","truck":"🚚","articulated_lorry":"🚛","tractor":"🚜","monorail":"🚝","mountain_railway":"🚞","suspension_railway":"🚟","mountain_cableway":"🚠","aerial_tramway":"🚡","ship":"🚢","woman-rowing-boat":"🚣‍♀️","man-rowing-boat":"🚣‍♂️","rowboat":"🚣‍♂️","speedboat":"🚤","traffic_light":"🚥","vertical_traffic_light":"🚦","construction":"🚧","rotating_light":"🚨","triangular_flag_on_post":"🚩","door":"🚪","no_entry_sign":"🚫","smoking":"🚬","no_smoking":"🚭","put_litter_in_its_place":"🚮","do_not_litter":"🚯","potable_water":"🚰","non-potable_water":"🚱","bike":"🚲","no_bicycles":"🚳","woman-biking":"🚴‍♀️","man-biking":"🚴‍♂️","bicyclist":"🚴‍♂️","woman-mountain-biking":"🚵‍♀️","man-mountain-biking":"🚵‍♂️","mountain_bicyclist":"🚵‍♂️","woman-walking":"🚶‍♀️","man-walking":"🚶‍♂️","walking":"🚶‍♂️","no_pedestrians":"🚷","children_crossing":"🚸","mens":"🚹","womens":"🚺","restroom":"🚻","baby_symbol":"🚼","toilet":"🚽","wc":"🚾","shower":"🚿","bath":"🛀","bathtub":"🛁","passport_control":"🛂","customs":"🛃","baggage_claim":"🛄","left_luggage":"🛅","couch_and_lamp":"🛋️","sleeping_accommodation":"🛌","shopping_bags":"🛍️","bellhop_bell":"🛎️","bed":"🛏️","place_of_worship":"🛐","octagonal_sign":"🛑","shopping_trolley":"🛒","hindu_temple":"🛕","hut":"🛖","elevator":"🛗","hammer_and_wrench":"🛠️","shield":"🛡️","oil_drum":"🛢️","motorway":"🛣️","railway_track":"🛤️","motor_boat":"🛥️","small_airplane":"🛩️","airplane_departure":"🛫","airplane_arriving":"🛬","satellite":"🛰️","passenger_ship":"🛳️","scooter":"🛴","motor_scooter":"🛵","canoe":"🛶","sled":"🛷","flying_saucer":"🛸","skateboard":"🛹","auto_rickshaw":"🛺","pickup_truck":"🛻","roller_skate":"🛼","large_orange_circle":"🟠","large_yellow_circle":"🟡","large_green_circle":"🟢","large_purple_circle":"🟣","large_brown_circle":"🟤","large_red_square":"🟥","large_blue_square":"🟦","large_orange_square":"🟧","large_yellow_square":"🟨","large_green_square":"🟩","large_purple_square":"🟪","large_brown_square":"🟫","pinched_fingers":"🤌","white_heart":"🤍","brown_heart":"🤎","pinching_hand":"🤏","zipper_mouth_face":"🤐","money_mouth_face":"🤑","face_with_thermometer":"🤒","nerd_face":"🤓","thinking_face":"🤔","face_with_head_bandage":"🤕","robot_face":"🤖","hugging_face":"🤗","the_horns":"🤘","sign_of_the_horns":"🤘","call_me_hand":"🤙","raised_back_of_hand":"🤚","left-facing_fist":"🤛","right-facing_fist":"🤜","handshake":"🤝","crossed_fingers":"🤞","hand_with_index_and_middle_fingers_crossed":"🤞","i_love_you_hand_sign":"🤟","face_with_cowboy_hat":"🤠","clown_face":"🤡","nauseated_face":"🤢","rolling_on_the_floor_laughing":"🤣","drooling_face":"🤤","lying_face":"🤥","woman-facepalming":"🤦‍♀️","man-facepalming":"🤦‍♂️","face_palm":"🤦","sneezing_face":"🤧","face_with_raised_eyebrow":"🤨","face_with_one_eyebrow_raised":"🤨","star-struck":"🤩","grinning_face_with_star_eyes":"🤩","zany_face":"🤪","grinning_face_with_one_large_and_one_small_eye":"🤪","shushing_face":"🤫","face_with_finger_covering_closed_lips":"🤫","face_with_symbols_on_mouth":"🤬","serious_face_with_symbols_covering_mouth":"🤬","face_with_hand_over_mouth":"🤭","smiling_face_with_smiling_eyes_and_hand_covering_mouth":"🤭","face_vomiting":"🤮","face_with_open_mouth_vomiting":"🤮","exploding_head":"🤯","shocked_face_with_exploding_head":"🤯","pregnant_woman":"🤰","breast-feeding":"🤱","palms_up_together":"🤲","selfie":"🤳","prince":"🤴","woman_in_tuxedo":"🤵‍♀️","man_in_tuxedo":"🤵‍♂️","person_in_tuxedo":"🤵","mrs_claus":"🤶","mother_christmas":"🤶","woman-shrugging":"🤷‍♀️","man-shrugging":"🤷‍♂️","shrug":"🤷","woman-cartwheeling":"🤸‍♀️","man-cartwheeling":"🤸‍♂️","person_doing_cartwheel":"🤸","woman-juggling":"🤹‍♀️","man-juggling":"🤹‍♂️","juggling":"🤹","fencer":"🤺","woman-wrestling":"🤼‍♀️","man-wrestling":"🤼‍♂️","wrestlers":"🤼","woman-playing-water-polo":"🤽‍♀️","man-playing-water-polo":"🤽‍♂️","water_polo":"🤽","woman-playing-handball":"🤾‍♀️","man-playing-handball":"🤾‍♂️","handball":"🤾","diving_mask":"🤿","wilted_flower":"🥀","drum_with_drumsticks":"🥁","clinking_glasses":"🥂","tumbler_glass":"🥃","spoon":"🥄","goal_net":"🥅","first_place_medal":"🥇","second_place_medal":"🥈","third_place_medal":"🥉","boxing_glove":"🥊","martial_arts_uniform":"🥋","curling_stone":"🥌","lacrosse":"🥍","softball":"🥎","flying_disc":"🥏","croissant":"🥐","avocado":"🥑","cucumber":"🥒","bacon":"🥓","potato":"🥔","carrot":"🥕","baguette_bread":"🥖","green_salad":"🥗","shallow_pan_of_food":"🥘","stuffed_flatbread":"🥙","egg":"🥚","glass_of_milk":"🥛","peanuts":"🥜","kiwifruit":"🥝","pancakes":"🥞","dumpling":"🥟","fortune_cookie":"🥠","takeout_box":"🥡","chopsticks":"🥢","bowl_with_spoon":"🥣","cup_with_straw":"🥤","coconut":"🥥","broccoli":"🥦","pie":"🥧","pretzel":"🥨","cut_of_meat":"🥩","sandwich":"🥪","canned_food":"🥫","leafy_green":"🥬","mango":"🥭","moon_cake":"🥮","bagel":"🥯","smiling_face_with_3_hearts":"🥰","yawning_face":"🥱","smiling_face_with_tear":"🥲","partying_face":"🥳","woozy_face":"🥴","hot_face":"🥵","cold_face":"🥶","ninja":"🥷","disguised_face":"🥸","pleading_face":"🥺","sari":"🥻","lab_coat":"🥼","goggles":"🥽","hiking_boot":"🥾","womans_flat_shoe":"🥿","crab":"🦀","lion_face":"🦁","scorpion":"🦂","turkey":"🦃","unicorn_face":"🦄","eagle":"🦅","duck":"🦆","bat":"🦇","shark":"🦈","owl":"🦉","fox_face":"🦊","butterfly":"🦋","deer":"🦌","gorilla":"🦍","lizard":"🦎","rhinoceros":"🦏","shrimp":"🦐","squid":"🦑","giraffe_face":"🦒","zebra_face":"🦓","hedgehog":"🦔","sauropod":"🦕","t-rex":"🦖","cricket":"🦗","kangaroo":"🦘","llama":"🦙","peacock":"🦚","hippopotamus":"🦛","parrot":"🦜","raccoon":"🦝","lobster":"🦞","mosquito":"🦟","microbe":"🦠","badger":"🦡","swan":"🦢","mammoth":"🦣","dodo":"🦤","sloth":"🦥","otter":"🦦","orangutan":"🦧","skunk":"🦨","flamingo":"🦩","oyster":"🦪","beaver":"🦫","bison":"🦬","seal":"🦭","guide_dog":"🦮","probing_cane":"🦯","bone":"🦴","leg":"🦵","foot":"🦶","tooth":"🦷","female_superhero":"🦸‍♀️","male_superhero":"🦸‍♂️","superhero":"🦸","female_supervillain":"🦹‍♀️","male_supervillain":"🦹‍♂️","supervillain":"🦹","safety_vest":"🦺","ear_with_hearing_aid":"🦻","motorized_wheelchair":"🦼","manual_wheelchair":"🦽","mechanical_arm":"🦾","mechanical_leg":"🦿","cheese_wedge":"🧀","cupcake":"🧁","salt":"🧂","beverage_box":"🧃","garlic":"🧄","onion":"🧅","falafel":"🧆","waffle":"🧇","butter":"🧈","mate_drink":"🧉","ice_cube":"🧊","bubble_tea":"🧋","woman_standing":"🧍‍♀️","man_standing":"🧍‍♂️","standing_person":"🧍","woman_kneeling":"🧎‍♀️","man_kneeling":"🧎‍♂️","kneeling_person":"🧎","deaf_woman":"🧏‍♀️","deaf_man":"🧏‍♂️","deaf_person":"🧏","face_with_monocle":"🧐","farmer":"🧑‍🌾","cook":"🧑‍🍳","person_feeding_baby":"🧑‍🍼","mx_claus":"🧑‍🎄","student":"🧑‍🎓","singer":"🧑‍🎤","artist":"🧑‍🎨","teacher":"🧑‍🏫","factory_worker":"🧑‍🏭","technologist":"🧑‍💻","office_worker":"🧑‍💼","mechanic":"🧑‍🔧","scientist":"🧑‍🔬","astronaut":"🧑‍🚀","firefighter":"🧑‍🚒","people_holding_hands":"🧑‍🤝‍🧑","person_with_probing_cane":"🧑‍🦯","red_haired_person":"🧑‍🦰","curly_haired_person":"🧑‍🦱","bald_person":"🧑‍🦲","white_haired_person":"🧑‍🦳","person_in_motorized_wheelchair":"🧑‍🦼","person_in_manual_wheelchair":"🧑‍🦽","health_worker":"🧑‍⚕️","judge":"🧑‍⚖️","pilot":"🧑‍✈️","adult":"🧑","child":"🧒","older_adult":"🧓","woman_with_beard":"🧔‍♀️","man_with_beard":"🧔‍♂️","bearded_person":"🧔","person_with_headscarf":"🧕","woman_in_steamy_room":"🧖‍♀️","man_in_steamy_room":"🧖‍♂️","person_in_steamy_room":"🧖‍♂️","woman_climbing":"🧗‍♀️","person_climbing":"🧗‍♀️","man_climbing":"🧗‍♂️","woman_in_lotus_position":"🧘‍♀️","person_in_lotus_position":"🧘‍♀️","man_in_lotus_position":"🧘‍♂️","female_mage":"🧙‍♀️","mage":"🧙‍♀️","male_mage":"🧙‍♂️","female_fairy":"🧚‍♀️","fairy":"🧚‍♀️","male_fairy":"🧚‍♂️","female_vampire":"🧛‍♀️","vampire":"🧛‍♀️","male_vampire":"🧛‍♂️","mermaid":"🧜‍♀️","merman":"🧜‍♂️","merperson":"🧜‍♂️","female_elf":"🧝‍♀️","male_elf":"🧝‍♂️","elf":"🧝‍♂️","female_genie":"🧞‍♀️","male_genie":"🧞‍♂️","genie":"🧞‍♂️","female_zombie":"🧟‍♀️","male_zombie":"🧟‍♂️","zombie":"🧟‍♂️","brain":"🧠","orange_heart":"🧡","billed_cap":"🧢","scarf":"🧣","gloves":"🧤","coat":"🧥","socks":"🧦","red_envelope":"🧧","firecracker":"🧨","jigsaw":"🧩","test_tube":"🧪","petri_dish":"🧫","dna":"🧬","compass":"🧭","abacus":"🧮","fire_extinguisher":"🧯","toolbox":"🧰","bricks":"🧱","magnet":"🧲","luggage":"🧳","lotion_bottle":"🧴","thread":"🧵","yarn":"🧶","safety_pin":"🧷","teddy_bear":"🧸","broom":"🧹","basket":"🧺","roll_of_paper":"🧻","soap":"🧼","sponge":"🧽","receipt":"🧾","nazar_amulet":"🧿","ballet_shoes":"🩰","one-piece_swimsuit":"🩱","briefs":"🩲","shorts":"🩳","thong_sandal":"🩴","drop_of_blood":"🩸","adhesive_bandage":"🩹","stethoscope":"🩺","yo-yo":"🪀","kite":"🪁","parachute":"🪂","boomerang":"🪃","magic_wand":"🪄","pinata":"🪅","nesting_dolls":"🪆","ringed_planet":"🪐","chair":"🪑","razor":"🪒","axe":"🪓","diya_lamp":"🪔","banjo":"🪕","military_helmet":"🪖","accordion":"🪗","long_drum":"🪘","coin":"🪙","carpentry_saw":"🪚","screwdriver":"🪛","ladder":"🪜","hook":"🪝","mirror":"🪞","window":"🪟","plunger":"🪠","sewing_needle":"🪡","knot":"🪢","bucket":"🪣","mouse_trap":"🪤","toothbrush":"🪥","headstone":"🪦","placard":"🪧","rock":"🪨","fly":"🪰","worm":"🪱","beetle":"🪲","cockroach":"🪳","potted_plant":"🪴","wood":"🪵","feather":"🪶","anatomical_heart":"🫀","lungs":"🫁","people_hugging":"🫂","blueberries":"🫐","bell_pepper":"🫑","olive":"🫒","flatbread":"🫓","tamale":"🫔","fondue":"🫕","teapot":"🫖","bangbang":"‼️","interrobang":"⁉️","tm":"™️","information_source":"ℹ️","left_right_arrow":"↔️","arrow_up_down":"↕️","arrow_upper_left":"↖️","arrow_upper_right":"↗️","arrow_lower_right":"↘️","arrow_lower_left":"↙️","leftwards_arrow_with_hook":"↩️","arrow_right_hook":"↪️","watch":"⌚","hourglass":"⌛","keyboard":"⌨️","eject":"⏏️","fast_forward":"⏩","rewind":"⏪","arrow_double_up":"⏫","arrow_double_down":"⏬","black_right_pointing_double_triangle_with_vertical_bar":"⏭️","black_left_pointing_double_triangle_with_vertical_bar":"⏮️","black_right_pointing_triangle_with_double_vertical_bar":"⏯️","alarm_clock":"⏰","stopwatch":"⏱️","timer_clock":"⏲️","hourglass_flowing_sand":"⏳","double_vertical_bar":"⏸️","black_square_for_stop":"⏹️","black_circle_for_record":"⏺️","m":"Ⓜ️","black_small_square":"▪️","white_small_square":"▫️","arrow_forward":"▶️","arrow_backward":"◀️","white_medium_square":"◻️","black_medium_square":"◼️","white_medium_small_square":"◽","black_medium_small_square":"◾","sunny":"☀️","cloud":"☁️","umbrella":"☂️","snowman":"☃️","comet":"☄️","phone":"☎️","telephone":"☎️","ballot_box_with_check":"☑️","shamrock":"☘️","point_up":"☝️","skull_and_crossbones":"☠️","radioactive_sign":"☢️","biohazard_sign":"☣️","orthodox_cross":"☦️","star_and_crescent":"☪️","peace_symbol":"☮️","yin_yang":"☯️","wheel_of_dharma":"☸️","white_frowning_face":"☹️","relaxed":"☺️","female_sign":"♀️","male_sign":"♂️","gemini":"♊","cancer":"♋","leo":"♌","virgo":"♍","libra":"♎","scorpius":"♏","chess_pawn":"♟️","spades":"♠️","clubs":"♣️","hearts":"♥️","diamonds":"♦️","hotsprings":"♨️","recycle":"♻️","infinity":"♾️","wheelchair":"♿","hammer_and_pick":"⚒️","crossed_swords":"⚔️","medical_symbol":"⚕️","staff_of_aesculapius":"⚕️","scales":"⚖️","alembic":"⚗️","gear":"⚙️","atom_symbol":"⚛️","fleur_de_lis":"⚜️","warning":"⚠️","zap":"⚡","transgender_symbol":"⚧️","white_circle":"⚪","black_circle":"⚫","coffin":"⚰️","funeral_urn":"⚱️","soccer":"⚽","baseball":"⚾","snowman_without_snow":"⛄","partly_sunny":"⛅","thunder_cloud_and_rain":"⛈️","ophiuchus":"⛎","pick":"⛏️","helmet_with_white_cross":"⛑️","chains":"⛓️","no_entry":"⛔","shinto_shrine":"⛩️","church":"⛪","mountain":"⛰️","umbrella_on_ground":"⛱️","fountain":"⛲","golf":"⛳","ferry":"⛴️","boat":"⛵","sailboat":"⛵","skier":"⛷️","ice_skate":"⛸️","woman-bouncing-ball":"⛹️‍♀️","man-bouncing-ball":"⛹️‍♂️","person_with_ball":"⛹️‍♂️","tent":"⛺","fuelpump":"⛽","scissors":"✂️","airplane":"✈️","email":"✉️","envelope":"✉️","fist":"✊","hand":"✋","raised_hand":"✋","v":"✌️","writing_hand":"✍️","pencil2":"✏️","black_nib":"✒️","heavy_check_mark":"✔️","heavy_multiplication_x":"✖️","latin_cross":"✝️","star_of_david":"✡️","eight_spoked_asterisk":"✳️","eight_pointed_black_star":"✴️","snowflake":"❄️","sparkle":"❇️","x":"❌","negative_squared_cross_mark":"❎","heavy_heart_exclamation_mark_ornament":"❣️","heart_on_fire":"❤️‍🔥","mending_heart":"❤️‍🩹","heart":"❤️","arrow_right":"➡️","curly_loop":"➰","loop":"➿","arrow_heading_up":"⤴️","arrow_heading_down":"⤵️","arrow_left":"⬅️","arrow_up":"⬆️","arrow_down":"⬇️","black_large_square":"⬛","white_large_square":"⬜","star":"⭐","o":"⭕","wavy_dash":"〰️","part_alternation_mark":"〽️","congratulations":"㊗️","secret":"㊙️"}')},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RssHandler=t.DefaultHandler=t.DomUtils=t.ElementType=t.Tokenizer=t.createDomStream=t.parseDOM=t.parseDocument=t.DomHandler=t.Parser=void 0;var c=r(451);Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return c.Parser}});var l=r(53);function u(e,t){var r=new l.DomHandler(void 0,t);return new c.Parser(r,t).end(e),r.root}Object.defineProperty(t,"DomHandler",{enumerable:!0,get:function(){return l.DomHandler}}),Object.defineProperty(t,"DefaultHandler",{enumerable:!0,get:function(){return l.DomHandler}}),t.parseDocument=u,t.parseDOM=function(e,t){return u(e,t).children},t.createDomStream=function(e,t,r){var n=new l.DomHandler(e,t,r);return new c.Parser(n,t)};var d=r(452);Object.defineProperty(t,"Tokenizer",{enumerable:!0,get:function(){return s(d).default}});var h=i(r(97));t.ElementType=h,o(r(456),t),t.DomUtils=i(r(457));var p=r(456);Object.defineProperty(t,"RssHandler",{enumerable:!0,get:function(){return p.FeedHandler}})},function(e){e.exports=JSON.parse('{"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376}')},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var s=o(r(97)),c=r(1136),l=r(1137),u=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);var d=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function h(e,t){void 0===t&&(t={});for(var r=("length"in e?e:[e]),n="",a=0;a<r.length;a++)n+=p(r[a],t);return n}function p(e,t){switch(e.type){case s.Root:return h(e.children,t);case s.Directive:case s.Doctype:return"<"+e.data+">";case s.Comment:return function(e){return"\x3c!--"+e.data+"--\x3e"}(e);case s.CDATA:return function(e){return"<![CDATA["+e.children[0].data+"]]>"}(e);case s.Script:case s.Style:case s.Tag:return function(e,t){var r;"foreign"===t.xmlMode&&(e.name=null!==(r=l.elementNames.get(e.name))&&void 0!==r?r:e.name,e.parent&&f.has(e.parent.name)&&(t=n(n({},t),{xmlMode:!1})));!t.xmlMode&&m.has(e.name)&&(t=n(n({},t),{xmlMode:"foreign"}));var a="<"+e.name,i=function(e,t){if(e)return Object.keys(e).map((function(r){var n,a,i=null!==(n=e[r])&&void 0!==n?n:"";return"foreign"===t.xmlMode&&(r=null!==(a=l.attributeNames.get(r))&&void 0!==a?a:r),t.emptyAttrs||t.xmlMode||""!==i?r+'="'+(!1!==t.decodeEntities?c.encodeXML(i):i.replace(/"/g,"&quot;"))+'"':r})).join(" ")}(e.attribs,t);i&&(a+=" "+i);0===e.children.length&&(t.xmlMode?!1!==t.selfClosingTags:t.selfClosingTags&&d.has(e.name))?(t.xmlMode||(a+=" "),a+="/>"):(a+=">",e.children.length>0&&(a+=h(e.children,t)),!t.xmlMode&&d.has(e.name)||(a+="</"+e.name+">"));return a}(e,t);case s.Text:return function(e,t){var r=e.data||"";!1===t.decodeEntities||!t.xmlMode&&e.parent&&u.has(e.parent.name)||(r=c.encodeXML(r));return r}(e,t)}}t.default=h;var f=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),m=new Set(["svg","math"])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXMLStrict=t.decodeHTML5Strict=t.decodeHTML4Strict=t.decodeHTML5=t.decodeHTML4=t.decodeHTMLStrict=t.decodeHTML=t.decodeXML=t.encodeHTML5=t.encodeHTML4=t.escapeUTF8=t.escape=t.encodeNonAsciiHTML=t.encodeHTML=t.encodeXML=t.encode=t.decodeStrict=t.decode=void 0;var n=r(459),a=r(460);t.decode=function(e,t){return(!t||t<=0?n.decodeXML:n.decodeHTML)(e)},t.decodeStrict=function(e,t){return(!t||t<=0?n.decodeXML:n.decodeHTMLStrict)(e)},t.encode=function(e,t){return(!t||t<=0?a.encodeXML:a.encodeHTML)(e)};var i=r(460);Object.defineProperty(t,"encodeXML",{enumerable:!0,get:function(){return i.encodeXML}}),Object.defineProperty(t,"encodeHTML",{enumerable:!0,get:function(){return i.encodeHTML}}),Object.defineProperty(t,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return i.encodeNonAsciiHTML}}),Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return i.escape}}),Object.defineProperty(t,"escapeUTF8",{enumerable:!0,get:function(){return i.escapeUTF8}}),Object.defineProperty(t,"encodeHTML4",{enumerable:!0,get:function(){return i.encodeHTML}}),Object.defineProperty(t,"encodeHTML5",{enumerable:!0,get:function(){return i.encodeHTML}});var o=r(459);Object.defineProperty(t,"decodeXML",{enumerable:!0,get:function(){return o.decodeXML}}),Object.defineProperty(t,"decodeHTML",{enumerable:!0,get:function(){return o.decodeHTML}}),Object.defineProperty(t,"decodeHTMLStrict",{enumerable:!0,get:function(){return o.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML4",{enumerable:!0,get:function(){return o.decodeHTML}}),Object.defineProperty(t,"decodeHTML5",{enumerable:!0,get:function(){return o.decodeHTML}}),Object.defineProperty(t,"decodeHTML4Strict",{enumerable:!0,get:function(){return o.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML5Strict",{enumerable:!0,get:function(){return o.decodeHTMLStrict}}),Object.defineProperty(t,"decodeXMLStrict",{enumerable:!0,get:function(){return o.decodeXML}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attributeNames=t.elementNames=void 0,t.elementNames=new Map([["altglyph","altGlyph"],["altglyphdef","altGlyphDef"],["altglyphitem","altGlyphItem"],["animatecolor","animateColor"],["animatemotion","animateMotion"],["animatetransform","animateTransform"],["clippath","clipPath"],["feblend","feBlend"],["fecolormatrix","feColorMatrix"],["fecomponenttransfer","feComponentTransfer"],["fecomposite","feComposite"],["feconvolvematrix","feConvolveMatrix"],["fediffuselighting","feDiffuseLighting"],["fedisplacementmap","feDisplacementMap"],["fedistantlight","feDistantLight"],["fedropshadow","feDropShadow"],["feflood","feFlood"],["fefunca","feFuncA"],["fefuncb","feFuncB"],["fefuncg","feFuncG"],["fefuncr","feFuncR"],["fegaussianblur","feGaussianBlur"],["feimage","feImage"],["femerge","feMerge"],["femergenode","feMergeNode"],["femorphology","feMorphology"],["feoffset","feOffset"],["fepointlight","fePointLight"],["fespecularlighting","feSpecularLighting"],["fespotlight","feSpotLight"],["fetile","feTile"],["feturbulence","feTurbulence"],["foreignobject","foreignObject"],["glyphref","glyphRef"],["lineargradient","linearGradient"],["radialgradient","radialGradient"],["textpath","textPath"]]),t.attributeNames=new Map([["definitionurl","definitionURL"],["attributename","attributeName"],["attributetype","attributeType"],["basefrequency","baseFrequency"],["baseprofile","baseProfile"],["calcmode","calcMode"],["clippathunits","clipPathUnits"],["diffuseconstant","diffuseConstant"],["edgemode","edgeMode"],["filterunits","filterUnits"],["glyphref","glyphRef"],["gradienttransform","gradientTransform"],["gradientunits","gradientUnits"],["kernelmatrix","kernelMatrix"],["kernelunitlength","kernelUnitLength"],["keypoints","keyPoints"],["keysplines","keySplines"],["keytimes","keyTimes"],["lengthadjust","lengthAdjust"],["limitingconeangle","limitingConeAngle"],["markerheight","markerHeight"],["markerunits","markerUnits"],["markerwidth","markerWidth"],["maskcontentunits","maskContentUnits"],["maskunits","maskUnits"],["numoctaves","numOctaves"],["pathlength","pathLength"],["patterncontentunits","patternContentUnits"],["patterntransform","patternTransform"],["patternunits","patternUnits"],["pointsatx","pointsAtX"],["pointsaty","pointsAtY"],["pointsatz","pointsAtZ"],["preservealpha","preserveAlpha"],["preserveaspectratio","preserveAspectRatio"],["primitiveunits","primitiveUnits"],["refx","refX"],["refy","refY"],["repeatcount","repeatCount"],["repeatdur","repeatDur"],["requiredextensions","requiredExtensions"],["requiredfeatures","requiredFeatures"],["specularconstant","specularConstant"],["specularexponent","specularExponent"],["spreadmethod","spreadMethod"],["startoffset","startOffset"],["stddeviation","stdDeviation"],["stitchtiles","stitchTiles"],["surfacescale","surfaceScale"],["systemlanguage","systemLanguage"],["tablevalues","tableValues"],["targetx","targetX"],["targety","targetY"],["textlength","textLength"],["viewbox","viewBox"],["viewtarget","viewTarget"],["xchannelselector","xChannelSelector"],["ychannelselector","yChannelSelector"],["zoomandpan","zoomAndPan"]])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prevElementSibling=t.nextElementSibling=t.getName=t.hasAttrib=t.getAttributeValue=t.getSiblings=t.getParent=t.getChildren=void 0;var n=r(53),a=[];function i(e){var t;return null!==(t=e.children)&&void 0!==t?t:a}function o(e){return e.parent||null}t.getChildren=i,t.getParent=o,t.getSiblings=function(e){var t=o(e);if(null!=t)return i(t);for(var r=[e],n=e.prev,a=e.next;null!=n;)r.unshift(n),n=n.prev;for(;null!=a;)r.push(a),a=a.next;return r},t.getAttributeValue=function(e,t){var r;return null===(r=e.attribs)||void 0===r?void 0:r[t]},t.hasAttrib=function(e,t){return null!=e.attribs&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&null!=e.attribs[t]},t.getName=function(e){return e.name},t.nextElementSibling=function(e){for(var t=e.next;null!==t&&!(0,n.isTag)(t);)t=t.next;return t},t.prevElementSibling=function(e){for(var t=e.prev;null!==t&&!(0,n.isTag)(t);)t=t.prev;return t}},function(e,t,r){"use strict";function n(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children;t.splice(t.lastIndexOf(e),1)}}Object.defineProperty(t,"__esModule",{value:!0}),t.prepend=t.prependChild=t.append=t.appendChild=t.replaceElement=t.removeElement=void 0,t.removeElement=n,t.replaceElement=function(e,t){var r=t.prev=e.prev;r&&(r.next=t);var n=t.next=e.next;n&&(n.prev=t);var a=t.parent=e.parent;if(a){var i=a.children;i[i.lastIndexOf(e)]=t}},t.appendChild=function(e,t){if(n(t),t.next=null,t.parent=e,e.children.push(t)>1){var r=e.children[e.children.length-2];r.next=t,t.prev=r}else t.prev=null},t.append=function(e,t){n(t);var r=e.parent,a=e.next;if(t.next=a,t.prev=e,e.next=t,t.parent=r,a){if(a.prev=t,r){var i=r.children;i.splice(i.lastIndexOf(a),0,t)}}else r&&r.children.push(t)},t.prependChild=function(e,t){if(n(t),t.parent=e,t.prev=null,1!==e.children.unshift(t)){var r=e.children[1];r.prev=t,t.next=r}else t.next=null},t.prepend=function(e,t){n(t);var r=e.parent;if(r){var a=r.children;a.splice(a.indexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=r,t.prev=e.prev,t.next=e,e.prev=t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueSort=t.compareDocumentPosition=t.removeSubsets=void 0;var n=r(53);function a(e,t){var r=[],a=[];if(e===t)return 0;for(var i=(0,n.hasChildren)(e)?e:e.parent;i;)r.unshift(i),i=i.parent;for(i=(0,n.hasChildren)(t)?t:t.parent;i;)a.unshift(i),i=i.parent;for(var o=Math.min(r.length,a.length),s=0;s<o&&r[s]===a[s];)s++;if(0===s)return 1;var c=r[s-1],l=c.children,u=r[s],d=a[s];return l.indexOf(u)>l.indexOf(d)?c===t?20:4:c===e?10:2}t.removeSubsets=function(e){for(var t=e.length;--t>=0;){var r=e[t];if(t>0&&e.lastIndexOf(r,t-1)>=0)e.splice(t,1);else for(var n=r.parent;n;n=n.parent)if(e.includes(n)){e.splice(t,1);break}}return e},t.compareDocumentPosition=a,t.uniqueSort=function(e){return(e=e.filter((function(e,t,r){return!r.includes(e,t+1)}))).sort((function(e,t){var r=a(e,t);return 2&r?-1:4&r?1:0})),e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFeed=void 0;var n=r(458),a=r(462);t.getFeed=function(e){var t=c(d,e);return t?"feed"===t.name?function(e){var t,r=e.children,n={type:"atom",items:(0,a.getElementsByTagName)("entry",r).map((function(e){var t,r=e.children,n={media:s(r)};u(n,"id","id",r),u(n,"title","title",r);var a=null===(t=c("link",r))||void 0===t?void 0:t.attribs.href;a&&(n.link=a);var i=l("summary",r)||l("content",r);i&&(n.description=i);var o=l("updated",r);return o&&(n.pubDate=new Date(o)),n}))};u(n,"id","id",r),u(n,"title","title",r);var i=null===(t=c("link",r))||void 0===t?void 0:t.attribs.href;i&&(n.link=i);u(n,"description","subtitle",r);var o=l("updated",r);o&&(n.updated=new Date(o));return u(n,"author","email",r,!0),n}(t):function(e){var t,r,n=null!==(r=null===(t=c("channel",e.children))||void 0===t?void 0:t.children)&&void 0!==r?r:[],i={type:e.name.substr(0,3),id:"",items:(0,a.getElementsByTagName)("item",e.children).map((function(e){var t=e.children,r={media:s(t)};u(r,"id","guid",t),u(r,"title","title",t),u(r,"link","link",t),u(r,"description","description",t);var n=l("pubDate",t);return n&&(r.pubDate=new Date(n)),r}))};u(i,"title","title",n),u(i,"link","link",n),u(i,"description","description",n);var o=l("lastBuildDate",n);o&&(i.updated=new Date(o));return u(i,"author","managingEditor",n,!0),i}(t):null};var i=["url","type","lang"],o=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function s(e){return(0,a.getElementsByTagName)("media:content",e).map((function(e){for(var t=e.attribs,r={medium:t.medium,isDefault:!!t.isDefault},n=0,a=i;n<a.length;n++){t[l=a[n]]&&(r[l]=t[l])}for(var s=0,c=o;s<c.length;s++){var l;t[l=c[s]]&&(r[l]=parseInt(t[l],10))}return t.expression&&(r.expression=t.expression),r}))}function c(e,t){return(0,a.getElementsByTagName)(e,t,!0,1)[0]}function l(e,t,r){return void 0===r&&(r=!1),(0,n.textContent)((0,a.getElementsByTagName)(e,t,r,1)).trim()}function u(e,t,r,n,a){void 0===a&&(a=!1);var i=l(r,n,a);i&&(e[t]=i)}function d(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}},function(e,t,r){"use strict";e.exports=e=>{if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}},function(e,t,r){"use strict";function n(e){if("object"!=typeof e)return e;var t,r,a=Object.prototype.toString.call(e);if("[object Object]"===a){if(e.constructor!==Object&&"function"==typeof e.constructor)for(t in r=new e.constructor,e)e.hasOwnProperty(t)&&r[t]!==e[t]&&(r[t]=n(e[t]));else for(t in r={},e)"__proto__"===t?Object.defineProperty(r,t,{value:n(e[t]),configurable:!0,enumerable:!0,writable:!0}):r[t]=n(e[t]);return r}if("[object Array]"===a){for(t=e.length,r=Array(t);t--;)r[t]=n(e[t]);return r}return"[object Set]"===a?(r=new Set,e.forEach((function(e){r.add(n(e))})),r):"[object Map]"===a?(r=new Map,e.forEach((function(e,t){r.set(n(t),n(e))})),r):"[object Date]"===a?new Date(+e):"[object RegExp]"===a?((r=new RegExp(e.source,e.flags)).lastIndex=e.lastIndex,r):"[object DataView]"===a?new e.constructor(n(e.buffer)):"[object ArrayBuffer]"===a?e.slice(0):"Array]"===a.slice(-6)?new e.constructor(e):e}r.r(t),r.d(t,"klona",(function(){return n}))},function(e,t,r){"use strict";
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
function n(e){return"[object Object]"===Object.prototype.toString.call(e)}function a(e){var t,r;return!1!==n(e)&&(void 0===(t=e.constructor)||!1!==n(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf"))}r.r(t),r.d(t,"isPlainObject",(function(){return a}))},function(e,t,r){"use strict";var n=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===a}(e)}(e)};var a="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function i(e,t){return!1!==t.clone&&t.isMergeableObject(e)?u((r=e,Array.isArray(r)?[]:{}),e,t):e;var r}function o(e,t,r){return e.concat(t).map((function(e){return i(e,r)}))}function s(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function c(e,t){try{return t in e}catch(e){return!1}}function l(e,t,r){var n={};return r.isMergeableObject(e)&&s(e).forEach((function(t){n[t]=i(e[t],r)})),s(t).forEach((function(a){(function(e,t){return c(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,a)||(c(e,a)&&r.isMergeableObject(t[a])?n[a]=function(e,t){if(!t.customMerge)return u;var r=t.customMerge(e);return"function"==typeof r?r:u}(a,r)(e[a],t[a],r):n[a]=i(t[a],r))})),n}function u(e,t,r){(r=r||{}).arrayMerge=r.arrayMerge||o,r.isMergeableObject=r.isMergeableObject||n,r.cloneUnlessOtherwiseSpecified=i;var a=Array.isArray(t);return a===Array.isArray(e)?a?r.arrayMerge(e,t,r):l(e,t,r):i(t,r)}u.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,r){return u(e,r,t)}),{})};var d=u;e.exports=d},function(e,t,r){var n,a,i;a=[],void 0===(i="function"==typeof(n=function(){return function(e){function t(e){return" "===e||"\t"===e||"\n"===e||"\f"===e||"\r"===e}function r(t){var r,n=t.exec(e.substring(m));if(n)return r=n[0],m+=r.length,r}for(var n,a,i,o,s,c=e.length,l=/^[ \t\n\r\u000c]+/,u=/^[, \t\n\r\u000c]+/,d=/^[^ \t\n\r\u000c]+/,h=/[,]+$/,p=/^\d+$/,f=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,m=0,g=[];;){if(r(u),m>=c)return g;n=r(d),a=[],","===n.slice(-1)?(n=n.replace(h,""),v()):y()}function y(){for(r(l),i="",o="in descriptor";;){if(s=e.charAt(m),"in descriptor"===o)if(t(s))i&&(a.push(i),i="",o="after descriptor");else{if(","===s)return m+=1,i&&a.push(i),void v();if("("===s)i+=s,o="in parens";else{if(""===s)return i&&a.push(i),void v();i+=s}}else if("in parens"===o)if(")"===s)i+=s,o="in descriptor";else{if(""===s)return a.push(i),void v();i+=s}else if("after descriptor"===o)if(t(s));else{if(""===s)return void v();o="in descriptor",m-=1}m+=1}}function v(){var t,r,i,o,s,c,l,u,d,h=!1,m={};for(o=0;o<a.length;o++)c=(s=a[o])[s.length-1],l=s.substring(0,s.length-1),u=parseInt(l,10),d=parseFloat(l),p.test(l)&&"w"===c?((t||r)&&(h=!0),0===u?h=!0:t=u):f.test(l)&&"x"===c?((t||r||i)&&(h=!0),d<0?h=!0:r=d):p.test(l)&&"h"===c?((i||r)&&(h=!0),0===u?h=!0:i=u):h=!0;h?console&&console.log&&console.log("Invalid srcset descriptor found in '"+e+"' at '"+s+"'."):(m.url=n,t&&(m.w=t),r&&(m.d=r),i&&(m.h=i),g.push(m))}}})?n.apply(t,a):n)||(e.exports=i)},function(e,t,r){"use strict";(function(t){let n=r(233),a=r(135),i=r(465),o=r(69),s=r(1155),c=r(235),l=r(1156),u=r(238),d=r(468),h=r(137),p=r(239),f=r(467),m=r(241),g=r(469),y=r(470),v=r(240),b=r(98),_=r(136);function w(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),new s(e)}w.plugin=function(e,r){function n(...t){let n=r(...t);return n.postcssPlugin=e,n.postcssVersion=(new s).version,n}let a;return console&&console.warn&&(console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),t.env.LANG&&t.env.LANG.startsWith("cn")&&console.warn(e+": 里面 postcss.plugin 被弃用. 迁移指南:\nhttps://www.w3ctech.com/topic/2226")),Object.defineProperty(n,"postcss",{get:()=>(a||(a=n()),a)}),n.process=function(e,t,r){return w([n(r)]).process(e,t)},n},w.stringify=c,w.parse=g,w.fromJSON=l,w.list=y,w.comment=e=>new h(e),w.atRule=e=>new p(e),w.decl=e=>new a(e),w.rule=e=>new v(e),w.root=e=>new b(e),w.document=e=>new u(e),w.CssSyntaxError=n,w.Declaration=a,w.Container=o,w.Document=u,w.Comment=h,w.Warning=d,w.AtRule=p,w.Result=f,w.Input=m,w.Rule=v,w.Root=b,w.Node=_,i.registerPostcss(w),e.exports=w,w.default=w}).call(this,r(9))},function(e,t){var r=String,n=function(){return{isColorSupported:!1,reset:r,bold:r,dim:r,italic:r,underline:r,inverse:r,hidden:r,strikethrough:r,black:r,red:r,green:r,yellow:r,blue:r,magenta:r,cyan:r,white:r,gray:r,bgBlack:r,bgRed:r,bgGreen:r,bgYellow:r,bgBlue:r,bgMagenta:r,bgCyan:r,bgWhite:r}};e.exports=n(),e.exports.createColors=n},function(e,t,r){"use strict";(function(t){let{SourceMapConsumer:n,SourceMapGenerator:a}=r(236),{dirname:i,resolve:o,relative:s,sep:c}=r(237),{pathToFileURL:l}=r(466),u=Boolean(n&&a),d=Boolean(i&&o&&s&&c);e.exports=class{constructor(e,t,r){this.stringify=e,this.mapOpts=r.map||{},this.root=t,this.opts=r}isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}previous(){return this.previousMaps||(this.previousMaps=[],this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}})),this.previousMaps}isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;let e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some(e=>e.inline))}isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(e=>e.withContent())}clearAnnotation(){if(!1===this.mapOpts.annotation)return;let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],"comment"===e.type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t)}setSourcesContent(){let e={};this.root.walk(t=>{if(t.source){let r=t.source.input.from;r&&!e[r]&&(e[r]=!0,this.map.setSourceContent(this.toUrl(this.path(r)),t.source.input.css))}})}applyPrevMaps(){for(let e of this.previous()){let t,r=this.toUrl(this.path(e.file)),a=e.root||i(e.file);!1===this.mapOpts.sourcesContent?(t=new n(e.text),t.sourcesContent&&(t.sourcesContent=t.sourcesContent.map(()=>null))):t=e.consumer(),this.map.applySourceMap(t,r,this.toUrl(this.path(a)))}}isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some(e=>e.annotation))}toBase64(e){return t?t.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}addAnnotation(){let e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}generateMap(){return this.generateString(),this.isSourcesContent()&&this.setSourcesContent(),this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}path(e){if(0===e.indexOf("<"))return e;if(/^\w+:\/\//.test(e))return e;if(this.mapOpts.absolute)return e;let t=this.opts.to?i(this.opts.to):".";return"string"==typeof this.mapOpts.annotation&&(t=i(o(t,this.mapOpts.annotation))),e=s(t,e)}toUrl(e){return"\\"===c&&(e=e.replace(/\\/g,"/")),encodeURI(e).replace(/[#?]/g,encodeURIComponent)}sourcePath(e){if(this.mapOpts.from)return this.toUrl(this.mapOpts.from);if(this.mapOpts.absolute){if(l)return l(e.source.input.from).toString();throw new Error("`map.absolute` option is not available in this PostCSS build")}return this.toUrl(this.path(e.source.input.from))}generateString(){this.css="",this.map=new a({file:this.outputFile()});let e,t,r=1,n=1,i={source:"",generated:{line:0,column:0},original:{line:0,column:0}};this.stringify(this.root,(a,o,s)=>{if(this.css+=a,o&&"end"!==s&&(i.generated.line=r,i.generated.column=n-1,o.source&&o.source.start?(i.source=this.sourcePath(o),i.original.line=o.source.start.line,i.original.column=o.source.start.column-1,this.map.addMapping(i)):(i.source="<no source>",i.original.line=1,i.original.column=0,this.map.addMapping(i))),e=a.match(/\n/g),e?(r+=e.length,t=a.lastIndexOf("\n"),n=a.length-t):n+=a.length,o&&"start"!==s){let e=o.parent||{raws:{}};("decl"!==o.type||o!==e.last||e.raws.semicolon)&&(o.source&&o.source.end?(i.source=this.sourcePath(o),i.original.line=o.source.end.line,i.original.column=o.source.end.column-1,i.generated.line=r,i.generated.column=n-2,this.map.addMapping(i)):(i.source="<no source>",i.original.line=1,i.original.column=0,i.generated.line=r,i.generated.column=n-1,this.map.addMapping(i)))}})}generate(){if(this.clearAnnotation(),d&&u&&this.isMap())return this.generateMap();let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}}).call(this,r(4).Buffer)},function(e,t,r){"use strict";let n={};e.exports=function(e){n[e]||(n[e]=!0,"undefined"!=typeof console&&console.warn&&console.warn(e))}},function(e,t,r){"use strict";let n=r(135),a=r(1152),i=r(137),o=r(239),s=r(98),c=r(240);e.exports=class{constructor(e){this.input=e,this.root=new s,this.current=this.root,this.spaces="",this.semicolon=!1,this.customProperty=!1,this.createTokenizer(),this.root.source={input:e,start:{offset:0,line:1,column:1}}}createTokenizer(){this.tokenizer=a(this.input)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}comment(e){let t=new i;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]);let r=e[1].slice(2,-2);if(/^\s*$/.test(r))t.text="",t.raws.left=r,t.raws.right="";else{let e=r.match(/^(\s*)([^]*\S)(\s*)$/);t.text=e[2],t.raws.left=e[1],t.raws.right=e[3]}}emptyRule(e){let t=new c;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}other(e){let t=!1,r=null,n=!1,a=null,i=[],o=e[1].startsWith("--"),s=[],c=e;for(;c;){if(r=c[0],s.push(c),"("===r||"["===r)a||(a=c),i.push("("===r?")":"]");else if(o&&n&&"{"===r)a||(a=c),i.push("}");else if(0===i.length){if(";"===r){if(n)return void this.decl(s,o);break}if("{"===r)return void this.rule(s);if("}"===r){this.tokenizer.back(s.pop()),t=!0;break}":"===r&&(n=!0)}else r===i[i.length-1]&&(i.pop(),0===i.length&&(a=null));c=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),i.length>0&&this.unclosedBracket(a),t&&n){for(;s.length&&(c=s[s.length-1][0],"space"===c||"comment"===c);)this.tokenizer.back(s.pop());this.decl(s,o)}else this.unknownWord(s)}rule(e){e.pop();let t=new c;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}decl(e,t){let r=new n;this.init(r,e[0][2]);let a,i=e[e.length-1];for(";"===i[0]&&(this.semicolon=!0,e.pop()),r.source.end=this.getPosition(i[3]||i[2]);"word"!==e[0][0];)1===e.length&&this.unknownWord(e),r.raws.before+=e.shift()[1];for(r.source.start=this.getPosition(e[0][2]),r.prop="";e.length;){let t=e[0][0];if(":"===t||"space"===t||"comment"===t)break;r.prop+=e.shift()[1]}for(r.raws.between="";e.length;){if(a=e.shift(),":"===a[0]){r.raws.between+=a[1];break}"word"===a[0]&&/\w/.test(a[1])&&this.unknownWord([a]),r.raws.between+=a[1]}"_"!==r.prop[0]&&"*"!==r.prop[0]||(r.raws.before+=r.prop[0],r.prop=r.prop.slice(1));let o=this.spacesAndCommentsFromStart(e);this.precheckMissedSemicolon(e);for(let t=e.length-1;t>=0;t--){if(a=e[t],"!important"===a[1].toLowerCase()){r.important=!0;let n=this.stringFrom(e,t);n=this.spacesFromEnd(e)+n," !important"!==n&&(r.raws.important=n);break}if("important"===a[1].toLowerCase()){let n=e.slice(0),a="";for(let e=t;e>0;e--){let t=n[e][0];if(0===a.trim().indexOf("!")&&"space"!==t)break;a=n.pop()[1]+a}0===a.trim().indexOf("!")&&(r.important=!0,r.raws.important=a,e=n)}if("space"!==a[0]&&"comment"!==a[0])break}let s=e.some(e=>"space"!==e[0]&&"comment"!==e[0]);this.raw(r,"value",e),s?r.raws.between+=o:r.value=o+r.value,r.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}atrule(e){let t,r,n,a=new o;a.name=e[1].slice(1),""===a.name&&this.unnamedAtrule(a,e),this.init(a,e[2]);let i=!1,s=!1,c=[],l=[];for(;!this.tokenizer.endOfFile();){if(t=(e=this.tokenizer.nextToken())[0],"("===t||"["===t?l.push("("===t?")":"]"):"{"===t&&l.length>0?l.push("}"):t===l[l.length-1]&&l.pop(),0===l.length){if(";"===t){a.source.end=this.getPosition(e[2]),this.semicolon=!0;break}if("{"===t){s=!0;break}if("}"===t){if(c.length>0){for(n=c.length-1,r=c[n];r&&"space"===r[0];)r=c[--n];r&&(a.source.end=this.getPosition(r[3]||r[2]))}this.end(e);break}c.push(e)}else c.push(e);if(this.tokenizer.endOfFile()){i=!0;break}}a.raws.between=this.spacesAndCommentsFromEnd(c),c.length?(a.raws.afterName=this.spacesAndCommentsFromStart(c),this.raw(a,"params",c),i&&(e=c[c.length-1],a.source.end=this.getPosition(e[3]||e[2]),this.spaces=a.raws.between,a.raws.between="")):(a.raws.afterName="",a.params=""),s&&(a.nodes=[],this.current=a)}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let e=this.current.nodes[this.current.nodes.length-1];e&&"rule"===e.type&&!e.raws.ownSemicolon&&(e.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{offset:e,line:t.line,column:t.col}}init(e,t){this.current.push(e),e.source={start:this.getPosition(t),input:this.input},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}raw(e,t,r){let n,a,i,o,s=r.length,c="",l=!0,u=/^([#.|])?(\w)+/i;for(let t=0;t<s;t+=1)n=r[t],a=n[0],"comment"!==a||"rule"!==e.type?"comment"===a||"space"===a&&t===s-1?l=!1:c+=n[1]:(o=r[t-1],i=r[t+1],"space"!==o[0]&&"space"!==i[0]&&u.test(o[1])&&u.test(i[1])?c+=n[1]:l=!1);if(!l){let n=r.reduce((e,t)=>e+t[1],"");e.raws[t]={value:c,raw:n}}e[t]=c}spacesAndCommentsFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],"space"===t||"comment"===t);)r=e.pop()[1]+r;return r}spacesAndCommentsFromStart(e){let t,r="";for(;e.length&&(t=e[0][0],"space"===t||"comment"===t);)r+=e.shift()[1];return r}spacesFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],"space"===t);)r=e.pop()[1]+r;return r}stringFrom(e,t){let r="";for(let n=t;n<e.length;n++)r+=e[n][1];return e.splice(t,e.length-t),r}colon(e){let t,r,n,a=0;for(let[i,o]of e.entries()){if(t=o,r=t[0],"("===r&&(a+=1),")"===r&&(a-=1),0===a&&":"===r){if(n){if("word"===n[0]&&"progid"===n[1])continue;return i}this.doubleColon(t)}n=t}return!1}unclosedBracket(e){throw this.input.error("Unclosed bracket",e[2])}unknownWord(e){throw this.input.error("Unknown word",e[0][2])}unexpectedClose(e){throw this.input.error("Unexpected }",e[2])}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}doubleColon(e){throw this.input.error("Double colon",e[2])}unnamedAtrule(e,t){throw this.input.error("At-rule without name",t[2])}precheckMissedSemicolon(){}checkMissedSemicolon(e){let t=this.colon(e);if(!1===t)return;let r,n=0;for(let a=t-1;a>=0&&(r=e[a],"space"===r[0]||(n+=1,2!==n));a--);throw this.input.error("Missed semicolon","word"===r[0]?r[3]+1:r[2])}}},function(e,t,r){"use strict";const n="'".charCodeAt(0),a='"'.charCodeAt(0),i="\\".charCodeAt(0),o="/".charCodeAt(0),s="\n".charCodeAt(0),c=" ".charCodeAt(0),l="\f".charCodeAt(0),u="\t".charCodeAt(0),d="\r".charCodeAt(0),h="[".charCodeAt(0),p="]".charCodeAt(0),f="(".charCodeAt(0),m=")".charCodeAt(0),g="{".charCodeAt(0),y="}".charCodeAt(0),v=";".charCodeAt(0),b="*".charCodeAt(0),_=":".charCodeAt(0),w="@".charCodeAt(0),x=/[\t\n\f\r "#'()/;[\\\]{}]/g,k=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,S=/.[\n"'(/\\]/,E=/[\da-f]/i;e.exports=function(e,t={}){let r,A,P,C,D,T,O,M,I,R,F=e.css.valueOf(),B=t.ignoreErrors,j=F.length,N=0,q=[],L=[];function U(t){throw e.error("Unclosed "+t,N)}return{back:function(e){L.push(e)},nextToken:function(e){if(L.length)return L.pop();if(N>=j)return;let t=!!e&&e.ignoreUnclosed;switch(r=F.charCodeAt(N),r){case s:case c:case u:case d:case l:A=N;do{A+=1,r=F.charCodeAt(A)}while(r===c||r===s||r===u||r===d||r===l);R=["space",F.slice(N,A)],N=A-1;break;case h:case p:case g:case y:case _:case v:case m:{let e=String.fromCharCode(r);R=[e,e,N];break}case f:if(M=q.length?q.pop()[1]:"",I=F.charCodeAt(N+1),"url"===M&&I!==n&&I!==a&&I!==c&&I!==s&&I!==u&&I!==l&&I!==d){A=N;do{if(T=!1,A=F.indexOf(")",A+1),-1===A){if(B||t){A=N;break}U("bracket")}for(O=A;F.charCodeAt(O-1)===i;)O-=1,T=!T}while(T);R=["brackets",F.slice(N,A+1),N,A],N=A}else A=F.indexOf(")",N+1),C=F.slice(N,A+1),-1===A||S.test(C)?R=["(","(",N]:(R=["brackets",C,N,A],N=A);break;case n:case a:P=r===n?"'":'"',A=N;do{if(T=!1,A=F.indexOf(P,A+1),-1===A){if(B||t){A=N+1;break}U("string")}for(O=A;F.charCodeAt(O-1)===i;)O-=1,T=!T}while(T);R=["string",F.slice(N,A+1),N,A],N=A;break;case w:x.lastIndex=N+1,x.test(F),A=0===x.lastIndex?F.length-1:x.lastIndex-2,R=["at-word",F.slice(N,A+1),N,A],N=A;break;case i:for(A=N,D=!0;F.charCodeAt(A+1)===i;)A+=1,D=!D;if(r=F.charCodeAt(A+1),D&&r!==o&&r!==c&&r!==s&&r!==u&&r!==d&&r!==l&&(A+=1,E.test(F.charAt(A)))){for(;E.test(F.charAt(A+1));)A+=1;F.charCodeAt(A+1)===c&&(A+=1)}R=["word",F.slice(N,A+1),N,A],N=A;break;default:r===o&&F.charCodeAt(N+1)===b?(A=F.indexOf("*/",N+2)+1,0===A&&(B||t?A=F.length:U("comment")),R=["comment",F.slice(N,A+1),N,A],N=A):(k.lastIndex=N+1,k.test(F),A=0===k.lastIndex?F.length-1:k.lastIndex-2,R=["word",F.slice(N,A+1),N,A],q.push(R),N=A)}return N++,R},endOfFile:function(){return 0===L.length&&N>=j},position:function(){return N}}}},function(e,t,r){"use strict";r.r(t),r.d(t,"nanoid",(function(){return a})),r.d(t,"customAlphabet",(function(){return n}));let n=(e,t)=>()=>{let r="",n=t;for(;n--;)r+=e[Math.random()*e.length|0];return r},a=(e=21)=>{let t="",r=e;for(;r--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t}},function(e,t){},function(e,t,r){"use strict";let n=r(465),a=r(238),i=r(98);class o{constructor(e=[]){this.version="8.3.11",this.plugins=this.normalize(e)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}process(e,t={}){return 0!==this.plugins.length||void 0!==t.parser||void 0!==t.stringifier||void 0!==t.syntax||t.hideNothingWarning,new n(this,e,t)}normalize(e){let t=[];for(let r of e)if(!0===r.postcss?r=r():r.postcss&&(r=r.postcss),"object"==typeof r&&Array.isArray(r.plugins))t=t.concat(r.plugins);else if("object"==typeof r&&r.postcssPlugin)t.push(r);else if("function"==typeof r)t.push(r);else{if("object"!=typeof r||!r.parse&&!r.stringify)throw new Error(r+" is not a PostCSS plugin")}return t}}e.exports=o,o.default=o,i.registerProcessor(o),a.registerProcessor(o)},function(e,t,r){"use strict";let n=r(135),a=r(471),i=r(137),o=r(239),s=r(241),c=r(98),l=r(240);function u(e,t){if(Array.isArray(e))return e.map(e=>u(e));let{inputs:r,...d}=e;if(r){t=[];for(let e of r){let r={...e,__proto__:s.prototype};r.map&&(r.map={...r.map,__proto__:a.prototype}),t.push(r)}}if(d.nodes&&(d.nodes=e.nodes.map(e=>u(e,t))),d.source){let{inputId:e,...r}=d.source;d.source=r,null!=e&&(d.source.input=t[e])}if("root"===d.type)return new c(d);if("decl"===d.type)return new n(d);if("rule"===d.type)return new l(d);if("comment"===d.type)return new i(d);if("atrule"===d.type)return new o(d);throw new Error("Unknown node type: "+e.type)}e.exports=u,u.default=u},function(e,t,r){"use strict";function n(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach((function(t){t&&Object.keys(t).forEach((function(r){e[r]=t[r]}))})),e}function a(e){return Object.prototype.toString.call(e)}function i(e){return"[object Function]"===a(e)}function o(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var s={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};var c={"http:":{validate:function(e,t,r){var n=e.slice(t);return r.re.http||(r.re.http=new RegExp("^\\/\\/"+r.re.src_auth+r.re.src_host_port_strict+r.re.src_path,"i")),r.re.http.test(n)?n.match(r.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,r){var n=e.slice(t);return r.re.no_http||(r.re.no_http=new RegExp("^"+r.re.src_auth+"(?:localhost|(?:(?:"+r.re.src_domain+")\\.)+"+r.re.src_domain_root+")"+r.re.src_port+r.re.src_host_terminator+r.re.src_path,"i")),r.re.no_http.test(n)?t>=3&&":"===e[t-3]||t>=3&&"/"===e[t-3]?0:n.match(r.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,r){var n=e.slice(t);return r.re.mailto||(r.re.mailto=new RegExp("^"+r.re.src_email_name+"@"+r.re.src_host_strict,"i")),r.re.mailto.test(n)?n.match(r.re.mailto)[0].length:0}}},l="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function u(e){var t=e.re=r(1158)(e.__opts__),n=e.__tlds__.slice();function s(e){return e.replace("%TLDS%",t.src_tlds)}e.onCompile(),e.__tlds_replaced__||n.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),n.push(t.src_xn),t.src_tlds=n.join("|"),t.email_fuzzy=RegExp(s(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(s(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(s(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(s(t.tpl_host_fuzzy_test),"i");var c=[];function l(e,t){throw new Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}e.__compiled__={},Object.keys(e.__schemas__).forEach((function(t){var r=e.__schemas__[t];if(null!==r){var n={validate:null,link:null};if(e.__compiled__[t]=n,"[object Object]"===a(r))return!function(e){return"[object RegExp]"===a(e)}(r.validate)?i(r.validate)?n.validate=r.validate:l(t,r):n.validate=function(e){return function(t,r){var n=t.slice(r);return e.test(n)?n.match(e)[0].length:0}}(r.validate),void(i(r.normalize)?n.normalize=r.normalize:r.normalize?l(t,r):n.normalize=function(e,t){t.normalize(e)});!function(e){return"[object String]"===a(e)}(r)?l(t,r):c.push(t)}})),c.forEach((function(t){e.__compiled__[e.__schemas__[t]]&&(e.__compiled__[t].validate=e.__compiled__[e.__schemas__[t]].validate,e.__compiled__[t].normalize=e.__compiled__[e.__schemas__[t]].normalize)})),e.__compiled__[""]={validate:null,normalize:function(e,t){t.normalize(e)}};var u=Object.keys(e.__compiled__).filter((function(t){return t.length>0&&e.__compiled__[t]})).map(o).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+u+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+u+")","ig"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),function(e){e.__index__=-1,e.__text_cache__=""}(e)}function d(e,t){var r=e.__index__,n=e.__last_index__,a=e.__text_cache__.slice(r,n);this.schema=e.__schema__.toLowerCase(),this.index=r+t,this.lastIndex=n+t,this.raw=a,this.text=a,this.url=a}function h(e,t){var r=new d(e,t);return e.__compiled__[r.schema].normalize(r,e),r}function p(e,t){if(!(this instanceof p))return new p(e,t);var r;t||(r=e,Object.keys(r||{}).reduce((function(e,t){return e||s.hasOwnProperty(t)}),!1)&&(t=e,e={})),this.__opts__=n({},s,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=n({},c,e),this.__compiled__={},this.__tlds__=l,this.__tlds_replaced__=!1,this.re={},u(this)}p.prototype.add=function(e,t){return this.__schemas__[e]=t,u(this),this},p.prototype.set=function(e){return this.__opts__=n(this.__opts__,e),this},p.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var t,r,n,a,i,o,s,c;if(this.re.schema_test.test(e))for((s=this.re.schema_search).lastIndex=0;null!==(t=s.exec(e));)if(a=this.testSchemaAt(e,t[2],s.lastIndex)){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+a;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=e.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||c<this.__index__)&&null!==(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(i=r.index+r[1].length,(this.__index__<0||i<this.__index__)&&(this.__schema__="",this.__index__=i,this.__last_index__=r.index+r[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&e.indexOf("@")>=0&&null!==(n=e.match(this.re.email_fuzzy))&&(i=n.index+n[1].length,o=n.index+n[0].length,(this.__index__<0||i<this.__index__||i===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=i,this.__last_index__=o)),this.__index__>=0},p.prototype.pretest=function(e){return this.re.pretest.test(e)},p.prototype.testSchemaAt=function(e,t,r){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,r,this):0},p.prototype.match=function(e){var t=0,r=[];this.__index__>=0&&this.__text_cache__===e&&(r.push(h(this,t)),t=this.__last_index__);for(var n=t?e.slice(t):e;this.test(n);)r.push(h(this,t)),n=n.slice(this.__last_index__),t+=this.__last_index__;return r.length?r:null},p.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter((function(e,t,r){return e!==r[t-1]})).reverse(),u(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,u(this),this)},p.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},p.prototype.onCompile=function(){},e.exports=p},function(e,t,r){"use strict";e.exports=function(e){var t={};t.src_Any=r(1159).source,t.src_Cc=r(1160).source,t.src_Z=r(1161).source,t.src_P=r(1162).source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");return t.src_pseudo_letter="(?:(?![><｜]|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|[><｜]|"+t.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|[><｜]|[()[\\]{}.,\"'?!\\-]).|\\[(?:(?!"+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-]).|\\.{2,4}[a-zA-Z0-9%/]|\\.(?!"+t.src_ZCc+"|[.]).|"+(e&&e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+t.src_ZCc+").|\\!(?!"+t.src_ZCc+"|[!]).|\\?(?!"+t.src_ZCc+"|[?]).)+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy='(^|[><｜]|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}},function(e,t){e.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},function(e,t){e.exports=/[\0-\x1F\x7F-\x9F]/},function(e,t){e.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},function(e,t){e.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},function(e,t){var r=function(){var e,t={getClass:function(e){return Object.prototype.toString.call(e)},getType:function(e){if(null===e)return"null";switch(typeof e){case"number":return"number";case"string":return"string";case"boolean":return"boolean"}switch(t.getClass(e)){case"[object Array]":return"array";case"[object Object]":return"object"}throw new Error("Bad type: "+t.getClass(e))},forEachNode:function(e,r){var n;switch(t.getType(e)){case"array":n=e.length-1,e.forEach((function(e,t){r(t,e,t===n)}));break;case"object":var a=Object.keys(e).sort();n=a.length-1,a.forEach((function(t,a){r(t,e[t],a===n)}))}},inherits:(e=function(){},function(t,r){e.prototype=r.prototype,t.prototype=new e,t.prototype.constructor=t}),isValidRoot:function(e){switch(t.getType(e)){case"object":case"array":return!0;default:return!1}},extend:function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}};function r(e,n,a){var i=t.getType(n);if(i in r.CONSTRUCTORS)return new r.CONSTRUCTORS[i](e,n,a);throw new Error("Bad type: "+t.getClass(n))}function n(e,t,r){if(this.constructor===n)throw new Error("This is abstract class");var a=this,i=document.createElement("li");a.label=e,a.isComplex=!1,i.classList.add("jsontree_node"),i.innerHTML=function(e,t){return'                    <span class="jsontree_label-wrapper">                        <span class="jsontree_label">"'+e+'"</span> :                     </span>                    <span class="jsontree_value-wrapper">                        <span class="jsontree_value jsontree_value_'+a.type+'">'+t+"</span>"+(r?"":",")+"</span>"}(e,t),a.el=i,i.querySelector(".jsontree_label").addEventListener("click",(function(e){if(!e.altKey)return e.shiftKey?(document.getSelection().removeAllRanges(),void alert(a.getJSONPath())):void 0;a.toggleMarked()}),!1)}function a(e,t,r){this.type="boolean",n.call(this,e,t,r)}function i(e,t,r){this.type="number",n.call(this,e,t,r)}function o(e,t,r){this.type="string",n.call(this,e,'"'+t+'"',r)}function s(e,t,r){this.type="null",n.call(this,e,t,r)}function c(e,n,a){if(this.constructor===c)throw new Error("This is abstract class");var i,o,s,l=this,u=document.createElement("li"),d=[];l.label=e,l.isComplex=!0,u.classList.add("jsontree_node"),u.classList.add("jsontree_node_complex"),u.innerHTML=function(e,t){var r=a?"":",",n='                        <div class="jsontree_value-wrapper">                            <div class="jsontree_value jsontree_value_'+l.type+'">                                <b>'+t[0]+'</b>                                <span class="jsontree_show-more">&hellip;</span>                                <ul class="jsontree_child-nodes"></ul>                                <b>'+t[1]+"</b></div>"+r+"</div>";return null!==e&&(n='                        <span class="jsontree_label-wrapper">                            <span class="jsontree_label"><span class="jsontree_expand-button"></span>"'+e+'"</span> :                         </span>'+n),n}(e,l.sym),i=u.querySelector(".jsontree_child-nodes"),null!==e?(o=u.querySelector(".jsontree_label"),s=u.querySelector(".jsontree_show-more"),o.addEventListener("click",(function(e){if(!e.altKey)return e.shiftKey?(document.getSelection().removeAllRanges(),void alert(l.getJSONPath())):void l.toggle(e.ctrlKey||e.metaKey);l.toggleMarked()}),!1),s.addEventListener("click",(function(e){l.toggle(e.ctrlKey||e.metaKey)}),!1),l.isRoot=!1):(l.isRoot=!0,l.parent=null,u.classList.add("jsontree_node_expanded")),l.el=u,l.childNodes=d,l.childNodesUl=i,t.forEachNode(n,(function(e,t,n){l.addChild(new r(e,t,n))})),l.isEmpty=!Boolean(d.length),l.isEmpty&&u.classList.add("jsontree_node_empty")}function l(e,t,r){this.sym=["{","}"],this.type="object",c.call(this,e,t,r)}function u(e,t,r){this.sym=["[","]"],this.type="array",c.call(this,e,t,r)}function d(e,t){this.wrapper=document.createElement("ul"),this.wrapper.className="jsontree_tree clearfix",this.rootNode=null,this.sourceJSONObj=e,this.loadData(e),this.appendTo(t)}return r.CONSTRUCTORS={boolean:a,number:i,string:o,null:s,object:l,array:u},n.prototype={constructor:n,mark:function(){this.el.classList.add("jsontree_node_marked")},unmark:function(){this.el.classList.remove("jsontree_node_marked")},toggleMarked:function(){this.el.classList.toggle("jsontree_node_marked")},expandParent:function(e){this.parent&&(this.parent.expand(),this.parent.expandParent(e))},getJSONPath:function(e){return this.isRoot?"$":(t="array"===this.parent.type?"["+this.label+"]":e?"."+this.label:"['"+this.label+"']",this.parent.getJSONPath(e)+t);var t}},t.inherits(a,n),t.inherits(i,n),t.inherits(o,n),t.inherits(s,n),t.inherits(c,n),t.extend(c.prototype,{constructor:c,addChild:function(e){this.childNodes.push(e),this.childNodesUl.appendChild(e.el),e.parent=this},expand:function(e){this.isEmpty||(this.isRoot||this.el.classList.add("jsontree_node_expanded"),e&&this.childNodes.forEach((function(t,r){t.isComplex&&t.expand(e)})))},collapse:function(e){this.isEmpty||(this.isRoot||this.el.classList.remove("jsontree_node_expanded"),e&&this.childNodes.forEach((function(t,r){t.isComplex&&t.collapse(e)})))},toggle:function(e){if(!this.isEmpty&&(this.el.classList.toggle("jsontree_node_expanded"),e)){var t=this.el.classList.contains("jsontree_node_expanded");this.childNodes.forEach((function(r,n){r.isComplex&&r[t?"expand":"collapse"](e)}))}},findChildren:function(e,t,r){this.isEmpty||this.childNodes.forEach((function(n,a){e(n)&&t(n),n.isComplex&&r&&n.findChildren(e,t,r)}))}}),t.inherits(l,c),t.inherits(u,c),d.prototype={constructor:d,loadData:function(e){t.isValidRoot(e)?(this.sourceJSONObj=e,this.rootNode=new r(null,e,"last"),this.wrapper.innerHTML="",this.wrapper.appendChild(this.rootNode.el)):alert("The root should be an object or an array")},appendTo:function(e){e.appendChild(this.wrapper)},expand:function(e){this.rootNode.isComplex&&("function"==typeof e?this.rootNode.childNodes.forEach((function(t,r){t.isComplex&&e(t)&&t.expand()})):this.rootNode.expand("recursive"))},collapse:function(){"function"==typeof this.rootNode.collapse&&this.rootNode.collapse("recursive")},toSourceJSON:function(e){if(!e)return JSON.stringify(this.sourceJSONObj);var t=JSON.stringify(this.sourceJSONObj,null,"[%^$#$%^%]");return t=(t=t.split("\n").join("<br />")).split("[%^$#$%^%]").join("&nbsp;&nbsp;&nbsp;&nbsp;")},findAndHandle:function(e,t){this.rootNode.findChildren(e,t,"isRecursive")},unmarkAll:function(){this.rootNode.findChildren((function(e){return!0}),(function(e){e.unmark()}),"isRecursive")}},{create:function(e,t){return new d(e,t)}}}();e.exports=r},function(e,t){e.exports=datetimeFormatter=function(e){var t=new Date(e),r=t.getFullYear(),n=t.getMonth();n++;var a=t.getDate(),i=t.getHours(),o=t.getMinutes();return{years:r,months:n,days:a,hours:i,minutes:o=1==o.toString().length?"0".concat(o):"".concat(o)}},e.exports=datetimeRelative=function(e){var t=new Date,r=(t.getTime()-e)/1e3;return r<60?"".concat(parseInt(r),"s ago"):r<3600?"".concat(parseInt(r/60),"m ago"):r<=86400?"".concat(parseInt(r/3600),"h ago"):r>86400?(mydate=new Date(e),day=mydate.getDate(),month=mydate.toDateString().match(/ [a-zA-Z]*/)[0].replace(" ",""),year=mydate.getFullYear()==t.getFullYear()?"":" "+mydate.getFullYear(),day+" "+month+year):void 0}},function(e,t){throw new Error("Module parse failed: Unexpected token (2:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n| \n> rm ../../web/saito/saito.js\n| \n| ")},function(e,t){var r;!function(){function e(e){this.mode=n.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var t=0,r=this.data.length;t<r;t++){var a=[],i=this.data.charCodeAt(t);i>65536?(a[0]=240|(1835008&i)>>>18,a[1]=128|(258048&i)>>>12,a[2]=128|(4032&i)>>>6,a[3]=128|63&i):i>2048?(a[0]=224|(61440&i)>>>12,a[1]=128|(4032&i)>>>6,a[2]=128|63&i):i>128?(a[0]=192|(1984&i)>>>6,a[1]=128|63&i):a[0]=i,this.parsedData.push(a)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function t(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}e.prototype={getLength:function(e){return this.parsedData.length},write:function(e){for(var t=0,r=this.parsedData.length;t<r;t++)e.put(this.parsedData[t],8)}},t.prototype={addData:function(t){var r=new e(t);this.dataList.push(r),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,r){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++)this.modules[n][a]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,r),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=t.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,r)},setupPositionProbePattern:function(e,t){for(var r=-1;r<=7;r++)if(!(e+r<=-1||this.moduleCount<=e+r))for(var n=-1;n<=7;n++)t+n<=-1||this.moduleCount<=t+n||(this.modules[e+r][t+n]=0<=r&&r<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=n&&n<=4)},getBestMaskPattern:function(){for(var e=0,t=0,r=0;r<8;r++){this.makeImpl(!0,r);var n=p.getLostPoint(this);(0==r||e>n)&&(e=n,t=r)}return t},createMovieClip:function(e,t,r){var n=e.createEmptyMovieClip(t,r);this.make();for(var a=0;a<this.modules.length;a++)for(var i=1*a,o=0;o<this.modules[a].length;o++){var s=1*o;this.modules[a][o]&&(n.beginFill(0,100),n.moveTo(s,i),n.lineTo(s+1,i),n.lineTo(s+1,i+1),n.lineTo(s,i+1),n.endFill())}return n},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=p.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var r=0;r<e.length;r++){var n=e[t],a=e[r];if(null==this.modules[n][a])for(var i=-2;i<=2;i++)for(var o=-2;o<=2;o++)this.modules[n+i][a+o]=-2==i||2==i||-2==o||2==o||0==i&&0==o}},setupTypeNumber:function(e){for(var t=p.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var n=!e&&1==(t>>r&1);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n}for(r=0;r<18;r++){n=!e&&1==(t>>r&1);this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=n}},setupTypeInfo:function(e,t){for(var r=this.errorCorrectLevel<<3|t,n=p.getBCHTypeInfo(r),a=0;a<15;a++){var i=!e&&1==(n>>a&1);a<6?this.modules[a][8]=i:a<8?this.modules[a+1][8]=i:this.modules[this.moduleCount-15+a][8]=i}for(a=0;a<15;a++){i=!e&&1==(n>>a&1);a<8?this.modules[8][this.moduleCount-a-1]=i:a<9?this.modules[8][15-a-1+1]=i:this.modules[8][15-a-1]=i}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var r=-1,n=this.moduleCount-1,a=7,i=0,o=this.moduleCount-1;o>0;o-=2)for(6==o&&o--;;){for(var s=0;s<2;s++)if(null==this.modules[n][o-s]){var c=!1;i<e.length&&(c=1==(e[i]>>>a&1)),p.getMask(t,n,o-s)&&(c=!c),this.modules[n][o-s]=c,-1==--a&&(i++,a=7)}if((n+=r)<0||this.moduleCount<=n){n-=r,r=-r;break}}}},t.PAD0=236,t.PAD1=17,t.createData=function(e,r,n){for(var a=y.getRSBlocks(e,r),i=new v,o=0;o<n.length;o++){var s=n[o];i.put(s.mode,4),i.put(s.getLength(),p.getLengthInBits(s.mode,e)),s.write(i)}var c=0;for(o=0;o<a.length;o++)c+=a[o].dataCount;if(i.getLengthInBits()>8*c)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+8*c+")");for(i.getLengthInBits()+4<=8*c&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*c||(i.put(t.PAD0,8),i.getLengthInBits()>=8*c));)i.put(t.PAD1,8);return t.createBytes(i,a)},t.createBytes=function(e,t){for(var r=0,n=0,a=0,i=new Array(t.length),o=new Array(t.length),s=0;s<t.length;s++){var c=t[s].dataCount,l=t[s].totalCount-c;n=Math.max(n,c),a=Math.max(a,l),i[s]=new Array(c);for(var u=0;u<i[s].length;u++)i[s][u]=255&e.buffer[u+r];r+=c;var d=p.getErrorCorrectPolynomial(l),h=new g(i[s],d.getLength()-1).mod(d);o[s]=new Array(d.getLength()-1);for(u=0;u<o[s].length;u++){var f=u+h.getLength()-o[s].length;o[s][u]=f>=0?h.get(f):0}}var m=0;for(u=0;u<t.length;u++)m+=t[u].totalCount;var y=new Array(m),v=0;for(u=0;u<n;u++)for(s=0;s<t.length;s++)u<i[s].length&&(y[v++]=i[s][u]);for(u=0;u<a;u++)for(s=0;s<t.length;s++)u<o[s].length&&(y[v++]=o[s][u]);return y};for(var n={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},a={L:1,M:0,Q:3,H:2},i=0,o=1,s=2,c=3,l=4,u=5,d=6,h=7,p={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;p.getBCHDigit(t)-p.getBCHDigit(p.G15)>=0;)t^=p.G15<<p.getBCHDigit(t)-p.getBCHDigit(p.G15);return(e<<10|t)^p.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;p.getBCHDigit(t)-p.getBCHDigit(p.G18)>=0;)t^=p.G18<<p.getBCHDigit(t)-p.getBCHDigit(p.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return p.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,r){switch(e){case i:return(t+r)%2==0;case o:return t%2==0;case s:return r%3==0;case c:return(t+r)%3==0;case l:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case u:return t*r%2+t*r%3==0;case d:return(t*r%2+t*r%3)%2==0;case h:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new g([1],0),r=0;r<e;r++)t=t.multiply(new g([1,f.gexp(r)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:case n.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),r=0,n=0;n<t;n++)for(var a=0;a<t;a++){for(var i=0,o=e.isDark(n,a),s=-1;s<=1;s++)if(!(n+s<0||t<=n+s))for(var c=-1;c<=1;c++)a+c<0||t<=a+c||0==s&&0==c||o==e.isDark(n+s,a+c)&&i++;i>5&&(r+=3+i-5)}for(n=0;n<t-1;n++)for(a=0;a<t-1;a++){var l=0;e.isDark(n,a)&&l++,e.isDark(n+1,a)&&l++,e.isDark(n,a+1)&&l++,e.isDark(n+1,a+1)&&l++,0!=l&&4!=l||(r+=3)}for(n=0;n<t;n++)for(a=0;a<t-6;a++)e.isDark(n,a)&&!e.isDark(n,a+1)&&e.isDark(n,a+2)&&e.isDark(n,a+3)&&e.isDark(n,a+4)&&!e.isDark(n,a+5)&&e.isDark(n,a+6)&&(r+=40);for(a=0;a<t;a++)for(n=0;n<t-6;n++)e.isDark(n,a)&&!e.isDark(n+1,a)&&e.isDark(n+2,a)&&e.isDark(n+3,a)&&e.isDark(n+4,a)&&!e.isDark(n+5,a)&&e.isDark(n+6,a)&&(r+=40);var u=0;for(a=0;a<t;a++)for(n=0;n<t;n++)e.isDark(n,a)&&u++;return r+=10*(Math.abs(100*u/t/t-50)/5)}},f={glog:function(e){if(e<1)throw new Error("glog("+e+")");return f.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return f.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},m=0;m<8;m++)f.EXP_TABLE[m]=1<<m;for(m=8;m<256;m++)f.EXP_TABLE[m]=f.EXP_TABLE[m-4]^f.EXP_TABLE[m-5]^f.EXP_TABLE[m-6]^f.EXP_TABLE[m-8];for(m=0;m<255;m++)f.LOG_TABLE[f.EXP_TABLE[m]]=m;function g(e,t){if(null==e.length)throw new Error(e.length+"/"+t);for(var r=0;r<e.length&&0==e[r];)r++;this.num=new Array(e.length-r+t);for(var n=0;n<e.length-r;n++)this.num[n]=e[n+r]}function y(e,t){this.totalCount=e,this.dataCount=t}function v(){this.buffer=[],this.length=0}g.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),r=0;r<this.getLength();r++)for(var n=0;n<e.getLength();n++)t[r+n]^=f.gexp(f.glog(this.get(r))+f.glog(e.get(n)));return new g(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=f.glog(this.get(0))-f.glog(e.get(0)),r=new Array(this.getLength()),n=0;n<this.getLength();n++)r[n]=this.get(n);for(n=0;n<e.getLength();n++)r[n]^=f.gexp(f.glog(e.get(n))+t);return new g(r,0).mod(e)}},y.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],y.getRSBlocks=function(e,t){var r=y.getRsBlockTable(e,t);if(null==r)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var n=r.length/3,a=[],i=0;i<n;i++)for(var o=r[3*i+0],s=r[3*i+1],c=r[3*i+2],l=0;l<o;l++)a.push(new y(s,c));return a},y.getRsBlockTable=function(e,t){switch(t){case a.L:return y.RS_BLOCK_TABLE[4*(e-1)+0];case a.M:return y.RS_BLOCK_TABLE[4*(e-1)+1];case a.Q:return y.RS_BLOCK_TABLE[4*(e-1)+2];case a.H:return y.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},v.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var r=0;r<t;r++)this.putBit(1==(e>>>t-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var b=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function _(){var e=!1,t=navigator.userAgent;if(/android/i.test(t)){e=!0;var r=t.toString().match(/android ([0-9]\.[0-9])/i);r&&r[1]&&(e=parseFloat(r[1]))}return e}var w=function(){var e=function(e,t){this._el=e,this._htOption=t};return e.prototype.draw=function(e){var t=this._htOption,r=this._el,n=e.getModuleCount();Math.floor(t.width/n),Math.floor(t.height/n);function a(e,t){var r=document.createElementNS("http://www.w3.org/2000/svg",e);for(var n in t)t.hasOwnProperty(n)&&r.setAttribute(n,t[n]);return r}this.clear();var i=a("svg",{viewBox:"0 0 "+String(n)+" "+String(n),width:"100%",height:"100%",fill:t.colorLight});i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),r.appendChild(i),i.appendChild(a("rect",{fill:t.colorLight,width:"100%",height:"100%"})),i.appendChild(a("rect",{fill:t.colorDark,width:"1",height:"1",id:"template"}));for(var o=0;o<n;o++)for(var s=0;s<n;s++)if(e.isDark(o,s)){var c=a("use",{x:String(s),y:String(o)});c.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),i.appendChild(c)}},e.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},e}(),x="svg"===document.documentElement.tagName.toLowerCase()?w:"undefined"==typeof CanvasRenderingContext2D?function(){var e=function(e,t){this._el=e,this._htOption=t};return e.prototype.draw=function(e){for(var t=this._htOption,r=this._el,n=e.getModuleCount(),a=Math.floor(t.width/n),i=Math.floor(t.height/n),o=['<table style="border:0;border-collapse:collapse;">'],s=0;s<n;s++){o.push("<tr>");for(var c=0;c<n;c++)o.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+a+"px;height:"+i+"px;background-color:"+(e.isDark(s,c)?t.colorDark:t.colorLight)+';"></td>');o.push("</tr>")}o.push("</table>"),r.innerHTML=o.join("");var l=r.childNodes[0],u=(t.width-l.offsetWidth)/2,d=(t.height-l.offsetHeight)/2;u>0&&d>0&&(l.style.margin=d+"px "+u+"px")},e.prototype.clear=function(){this._el.innerHTML=""},e}():function(){function e(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}if(this&&this._android<=2.1){var t=1/window.devicePixelRatio,r=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(e,n,a,i,o,s,c,l,u){if("nodeName"in e&&/img/i.test(e.nodeName))for(var d=arguments.length-1;d>=1;d--)arguments[d]=arguments[d]*t;else void 0===l&&(arguments[1]*=t,arguments[2]*=t,arguments[3]*=t,arguments[4]*=t);r.apply(this,arguments)}}function n(e,t){var r=this;if(r._fFail=t,r._fSuccess=e,null===r._bSupportDataURI){var n=document.createElement("img"),a=function(){r._bSupportDataURI=!1,r._fFail&&r._fFail.call(r)};return n.onabort=a,n.onerror=a,n.onload=function(){r._bSupportDataURI=!0,r._fSuccess&&r._fSuccess.call(r)},void(n.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}!0===r._bSupportDataURI&&r._fSuccess?r._fSuccess.call(r):!1===r._bSupportDataURI&&r._fFail&&r._fFail.call(r)}var a=function(e,t){this._bIsPainted=!1,this._android=_(),this._htOption=t,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=t.width,this._elCanvas.height=t.height,e.appendChild(this._elCanvas),this._el=e,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return a.prototype.draw=function(e){var t=this._elImage,r=this._oContext,n=this._htOption,a=e.getModuleCount(),i=n.width/a,o=n.height/a,s=Math.round(i),c=Math.round(o);t.style.display="none",this.clear();for(var l=0;l<a;l++)for(var u=0;u<a;u++){var d=e.isDark(l,u),h=u*i,p=l*o;r.strokeStyle=d?n.colorDark:n.colorLight,r.lineWidth=1,r.fillStyle=d?n.colorDark:n.colorLight,r.fillRect(h,p,i,o),r.strokeRect(Math.floor(h)+.5,Math.floor(p)+.5,s,c),r.strokeRect(Math.ceil(h)-.5,Math.ceil(p)-.5,s,c)}this._bIsPainted=!0},a.prototype.makeImage=function(){this._bIsPainted&&n.call(this,e)},a.prototype.isPainted=function(){return this._bIsPainted},a.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},a.prototype.round=function(e){return e?Math.floor(1e3*e)/1e3:e},a}();function k(e,t){for(var r=1,n=function(e){var t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=e?3:0)}(e),i=0,o=b.length;i<=o;i++){var s=0;switch(t){case a.L:s=b[i][0];break;case a.M:s=b[i][1];break;case a.Q:s=b[i][2];break;case a.H:s=b[i][3]}if(n<=s)break;r++}if(r>b.length)throw new Error("Too long data");return r}(r=function(e,t){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:a.H},"string"==typeof t&&(t={text:t}),t)for(var r in t)this._htOption[r]=t[r];"string"==typeof e&&(e=document.getElementById(e)),this._htOption.useSVG&&(x=w),this._android=_(),this._el=e,this._oQRCode=null,this._oDrawing=new x(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)}).prototype.makeCode=function(e){this._oQRCode=new t(k(e,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(e),this._oQRCode.make(),this._el.title=e,this._oDrawing.draw(this._oQRCode),this.makeImage()},r.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},r.prototype.clear=function(){this._oDrawing.clear()},r.CorrectLevel=a}(),e.exports=r},function(e,t,r){var n=r(1168),a=r(1174),i=r(1180),o=r(1181),s=r(1182),c=r(1183),l=r(1184),u=r(1185),d=r(1186),h=r(1211);function p(e){this.options=e,this.utils=new n(e),this.filters=[]}p.prototype.register=function(e){return this.filters.push(e),this},p.prototype.next=function(e,t,r){var n=this;e.length?e[0].resolve(t,(function(a){return null===a?void n.next(e.slice(1),t,r):void r(a)}),this.options,this.utils):r(null)},p.prototype.resolve=function(e,t){var r=this.filters;return this.next(r,e,(function(r){return r?void t({url:e,image:r}):void t(null)})),this},p.FileExtension=a,p.NineGag=i,p.Instagram=o,p.ImgurPage=s,p.MimeType=u,p.ImgurAlbum=c,p.Flickr=l,p.Opengraph=d,p.Webpage=h,e.exports=p},function(e,t,r){var n=r(1169),a=function(e){this.options=e||{},this.cache={}};a.prototype.fetch=function(e,t,r){var a=this,i=null;if(this.options.requestPlugin&&"function"==typeof this.options.requestPlugin&&(i=this.options.requestPlugin),e in this.cache)t(this.cache[e].data,this.cache[e].response);else{var o=n.get(e);i&&(o=o.use(i)),o.on("error",r),o.end((function(n,i){n?r(n):(a.cache[e]={data:i.text,response:i},t(i.text,i))}))}},a.prototype.request=n,e.exports=a},function(e,t,r){var n;"undefined"!=typeof window?n=window:"undefined"!=typeof self?n=self:(console.warn("Using browser-only version of superagent in non-browser environment"),n=this);var a=r(68),i=r(1170),o=r(546),s=r(1171),c=r(1173);function l(){}var u=t=e.exports=function(e,r){return"function"==typeof r?new t.Request("GET",e).end(r):1==arguments.length?new t.Request("GET",e):new t.Request(e,r)};t.Request=y,u.getXHR=function(){if(!(!n.XMLHttpRequest||n.location&&"file:"==n.location.protocol&&n.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only version of superagent could not find XHR")};var d="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function h(e){if(!o(e))return e;var t=[];for(var r in e)p(t,r,e[r]);return t.join("&")}function p(e,t,r){if(null!=r)if(Array.isArray(r))r.forEach((function(r){p(e,t,r)}));else if(o(r))for(var n in r)p(e,t+"["+n+"]",r[n]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));else null===r&&e.push(encodeURIComponent(t))}function f(e){for(var t,r,n={},a=e.split("&"),i=0,o=a.length;i<o;++i)-1==(r=(t=a[i]).indexOf("="))?n[decodeURIComponent(t)]="":n[decodeURIComponent(t.slice(0,r))]=decodeURIComponent(t.slice(r+1));return n}function m(e){return/[\/+]json($|[^-\w])/.test(e)}function g(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=function(e){for(var t,r,n,a,i=e.split(/\r?\n/),o={},s=0,c=i.length;s<c;++s)-1!==(t=(r=i[s]).indexOf(":"))&&(n=r.slice(0,t).toLowerCase(),a=d(r.slice(t+1)),o[n]=a);return o}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function y(e,t){var r=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",(function(){var e,t=null,n=null;try{n=new g(r)}catch(e){return(t=new Error("Parser is unable to parse the response")).parse=!0,t.original=e,r.xhr?(t.rawResponse=void 0===r.xhr.responseType?r.xhr.responseText:r.xhr.response,t.status=r.xhr.status?r.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),r.callback(t)}r.emit("response",n);try{r._isResponseOK(n)||(e=new Error(n.statusText||"Unsuccessful HTTP response"))}catch(t){e=t}e?(e.original=t,e.response=n,e.status=n.status,r.callback(e,n)):r.callback(null,n)}))}function v(e,t,r){var n=u("DELETE",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n}u.serializeObject=h,u.parseString=f,u.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},u.serialize={"application/x-www-form-urlencoded":h,"application/json":JSON.stringify},u.parse={"application/x-www-form-urlencoded":f,"application/json":JSON.parse},s(g.prototype),g.prototype._parseBody=function(e){var t=u.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&m(this.type)&&(t=u.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},g.prototype.toError=function(){var e=this.req,t=e.method,r=e.url,n="cannot "+t+" "+r+" ("+this.status+")",a=new Error(n);return a.status=this.status,a.method=t,a.url=r,a},u.Response=g,a(y.prototype),i(y.prototype),y.prototype.type=function(e){return this.set("Content-Type",u.types[e]||e),this},y.prototype.accept=function(e){return this.set("Accept",u.types[e]||e),this},y.prototype.auth=function(e,t,r){1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(r=t,t=""),r||(r={type:"function"==typeof btoa?"basic":"auto"});var n=function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(e,t,r,n)},y.prototype.query=function(e){return"string"!=typeof e&&(e=h(e)),e&&this._query.push(e),this},y.prototype.attach=function(e,t,r){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,r||t.name)}return this},y.prototype._getFormData=function(){return this._formData||(this._formData=new n.FormData),this._formData},y.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var r=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),r(e,t)},y.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},y.prototype.buffer=y.prototype.ca=y.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},y.prototype.pipe=y.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},y.prototype._isHost=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},y.prototype.end=function(e){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||l,this._finalizeQueryString(),this._end()},y.prototype._end=function(){var e=this,t=this.xhr=u.getXHR(),r=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var r=t.readyState;if(r>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4==r){var n;try{n=t.status}catch(e){n=0}if(!n){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var n=function(t,r){r.total>0&&(r.percent=r.loaded/r.total*100),r.direction=t,e.emit("progress",r)};if(this.hasListeners("progress"))try{t.onprogress=n.bind(null,"download"),t.upload&&(t.upload.onprogress=n.bind(null,"upload"))}catch(e){}try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof r&&!this._isHost(r)){var a=this._header["content-type"],i=this._serializer||u.serialize[a?a.split(";")[0]:""];!i&&m(a)&&(i=u.serialize["application/json"]),i&&(r=i(r))}for(var o in this.header)null!=this.header[o]&&this.header.hasOwnProperty(o)&&t.setRequestHeader(o,this.header[o]);return this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send(void 0!==r?r:null),this},u.agent=function(){return new c},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach((function(e){c.prototype[e.toLowerCase()]=function(t,r){var n=new u.Request(e,t);return this._setDefaults(n),r&&n.end(r),n}})),c.prototype.del=c.prototype.delete,u.get=function(e,t,r){var n=u("GET",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},u.head=function(e,t,r){var n=u("HEAD",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},u.options=function(e,t,r){var n=u("OPTIONS",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},u.del=v,u.delete=v,u.patch=function(e,t,r){var n=u("PATCH",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},u.post=function(e,t,r){var n=u("POST",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},u.put=function(e,t,r){var n=u("PUT",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n}},function(e,t,r){"use strict";var n=r(546);function a(e){if(e)return function(e){for(var t in a.prototype)e[t]=a.prototype[t];return e}(e)}e.exports=a,a.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},a.prototype.parse=function(e){return this._parser=e,this},a.prototype.responseType=function(e){return this._responseType=e,this},a.prototype.serialize=function(e){return this._serializer=e,this},a.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},a.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var i=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];a.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var r=this._retryCallback(e,t);if(!0===r)return!0;if(!1===r)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~i.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},a.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},a.prototype.then=function(e,t){if(!this._fullfilledPromise){var r=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(e,t){r.end((function(r,n){r?t(r):e(n)}))}))}return this._fullfilledPromise.then(e,t)},a.prototype.catch=function(e){return this.then(void 0,e)},a.prototype.use=function(e){return e(this),this},a.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},a.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},a.prototype.get=function(e){return this._header[e.toLowerCase()]},a.prototype.getHeader=a.prototype.get,a.prototype.set=function(e,t){if(n(e)){for(var r in e)this.set(r,e[r]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},a.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},a.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),n(e)){for(var r in e)this.field(r,e[r]);return this}if(Array.isArray(t)){for(var a in t)this.field(e,t[a]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},a.prototype.abort=function(){return this._aborted||(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort")),this},a.prototype._auth=function(e,t,r,n){switch(r.type){case"basic":this.set("Authorization","Basic "+n(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},a.prototype.withCredentials=function(e){return null==e&&(e=!0),this._withCredentials=e,this},a.prototype.redirects=function(e){return this._maxRedirects=e,this},a.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},a.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},a.prototype.send=function(e){var t=n(e),r=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&n(this._data))for(var a in e)this._data[a]=e[a];else"string"==typeof e?(r||this.type("form"),r=this._header["content-type"],this._data="application/x-www-form-urlencoded"==r?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)||r||this.type("json"),this},a.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},a.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var r=this.url.substring(t+1).split("&");"function"==typeof this._sort?r.sort(this._sort):r.sort(),this.url=this.url.substring(0,t)+"?"+r.join("&")}}},a.prototype._appendQueryString=function(){console.trace("Unsupported")},a.prototype._timeoutError=function(e,t,r){if(!this._aborted){var n=new Error(e+t+"ms exceeded");n.timeout=t,n.code="ECONNABORTED",n.errno=r,this.timedout=!0,this.abort(),this.callback(n)}},a.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))}},function(e,t,r){"use strict";var n=r(1172);function a(e){if(e)return function(e){for(var t in a.prototype)e[t]=a.prototype[t];return e}(e)}e.exports=a,a.prototype.get=function(e){return this.header[e.toLowerCase()]},a.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=n.type(t);var r=n.params(t);for(var a in r)this[a]=r[a];this.links={};try{e.link&&(this.links=n.parseLinks(e.link))}catch(e){}},a.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},function(e,t,r){"use strict";t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){return e.split(/ *; */).reduce((function(e,t){var r=t.split(/ *= */),n=r.shift(),a=r.shift();return n&&a&&(e[n]=a),e}),{})},t.parseLinks=function(e){return e.split(/ *, */).reduce((function(e,t){var r=t.split(/ *; */),n=r[0].slice(1,-1);return e[r[1].split(/ *= */)[1].slice(1,-1)]=n,e}),{})},t.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},function(e,t){function r(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach((function(e){r.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}})),r.prototype._setDefaults=function(e){this._defaults.forEach((function(t){e[t.fn].apply(e,t.arguments)}))},e.exports=r},function(e,t,r){var n=r(144);function a(){}a.prototype.resolve=function(e,t){n.parse(e).pathname.match(/\.(png|jpg|jpeg|gif|bmp|svg)$/i)?t(e):t(null)},e.exports=a},function(e,t,r){(function(e,n){var a;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(i){t&&t.nodeType,e&&e.nodeType;var o="object"==typeof n&&n;o.global!==o&&o.window!==o&&o.self;var s,c=2147483647,l=/^xn--/,u=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,f=String.fromCharCode;function m(e){throw new RangeError(h[e])}function g(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function y(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+g((e=e.replace(d,".")).split("."),t).join(".")}function v(e){for(var t,r,n=[],a=0,i=e.length;a<i;)(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<i?56320==(64512&(r=e.charCodeAt(a++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),a--):n.push(t);return n}function b(e){return g(e,(function(e){var t="";return e>65535&&(t+=f((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=f(e)})).join("")}function _(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function w(e,t,r){var n=0;for(e=r?p(e/700):e>>1,e+=p(e/t);e>455;n+=36)e=p(e/35);return p(n+36*e/(e+38))}function x(e){var t,r,n,a,i,o,s,l,u,d,h,f=[],g=e.length,y=0,v=128,_=72;for((r=e.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&m("not-basic"),f.push(e.charCodeAt(n));for(a=r>0?r+1:0;a<g;){for(i=y,o=1,s=36;a>=g&&m("invalid-input"),((l=(h=e.charCodeAt(a++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:36)>=36||l>p((c-y)/o))&&m("overflow"),y+=l*o,!(l<(u=s<=_?1:s>=_+26?26:s-_));s+=36)o>p(c/(d=36-u))&&m("overflow"),o*=d;_=w(y-i,t=f.length+1,0==i),p(y/t)>c-v&&m("overflow"),v+=p(y/t),y%=t,f.splice(y++,0,v)}return b(f)}function k(e){var t,r,n,a,i,o,s,l,u,d,h,g,y,b,x,k=[];for(g=(e=v(e)).length,t=128,r=0,i=72,o=0;o<g;++o)(h=e[o])<128&&k.push(f(h));for(n=a=k.length,a&&k.push("-");n<g;){for(s=c,o=0;o<g;++o)(h=e[o])>=t&&h<s&&(s=h);for(s-t>p((c-r)/(y=n+1))&&m("overflow"),r+=(s-t)*y,t=s,o=0;o<g;++o)if((h=e[o])<t&&++r>c&&m("overflow"),h==t){for(l=r,u=36;!(l<(d=u<=i?1:u>=i+26?26:u-i));u+=36)x=l-d,b=36-d,k.push(f(_(d+x%b,0))),l=p(x/b);k.push(f(_(l,0))),i=w(r,y,n==a),r=0,++n}++r,++t}return k.join("")}s={version:"1.4.1",ucs2:{decode:v,encode:b},decode:x,encode:k,toASCII:function(e){return y(e,(function(e){return u.test(e)?"xn--"+k(e):e}))},toUnicode:function(e){return y(e,(function(e){return l.test(e)?x(e.slice(4).toLowerCase()):e}))}},void 0===(a=function(){return s}.call(t,r,t,e))||(e.exports=a)}()}).call(this,r(66)(e),r(18))},function(e,t,r){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){"use strict";t.decode=t.parse=r(1178),t.encode=t.stringify=r(1179)},function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,i){t=t||"&",r=r||"=";var o={};if("string"!=typeof e||0===e.length)return o;var s=/\+/g;e=e.split(t);var c=1e3;i&&"number"==typeof i.maxKeys&&(c=i.maxKeys);var l=e.length;c>0&&l>c&&(l=c);for(var u=0;u<l;++u){var d,h,p,f,m=e[u].replace(s,"%20"),g=m.indexOf(r);g>=0?(d=m.substr(0,g),h=m.substr(g+1)):(d=m,h=""),p=decodeURIComponent(d),f=decodeURIComponent(h),n(o,p)?a(o[p])?o[p].push(f):o[p]=[o[p],f]:o[p]=f}return o};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,s){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?i(o(e),(function(o){var s=encodeURIComponent(n(o))+r;return a(e[o])?i(e[o],(function(e){return s+encodeURIComponent(n(e))})).join(t):s+encodeURIComponent(n(e[o]))})).join(t):s?encodeURIComponent(n(s))+r+encodeURIComponent(n(e)):""};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var o=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){var n=r(144),a=/^\/gag\/(.*)$/;function i(){}i.prototype.resolve=function(e,t){var r,i=(e=n.parse(e)).pathname.match(a)||[];if("9gag.com"===e.hostname&&i.length)return r=i[1],void t("http://d24w6bsrhbeh9d.cloudfront.net/photo/{{id}}_700b.jpg".replace("{{id}}",r));t(null)},e.exports=i},function(e,t){var r=/http(s*):\/\/instagr(\.am|am\.com)\/p\/([^\/]+)/;function n(){}n.prototype.resolve=function(e,t){var n=e.match(r);n&&n.length>1?t(e="http://instagram.com/p/{{id}}/media/?size=l".replace("{{id}}",n[3])):t(null)},e.exports=n},function(e,t){var r=/http(s*):\/\/(i\.|m\.)*imgur.com\/(gallery\/){0,1}(.*)/;function n(){}n.prototype.resolve=function(e,t){var n,a=e.match(r);if(a&&a.length&&-1===a[a.length-1].indexOf("/"))return n=a[a.length-1],void t("http://i.imgur.com/{{id}}.jpg".replace("{{id}}",n));t(null)},e.exports=n},function(e,t){var r=/http(s*):\/\/(i\.|m\.)*imgur.com\/a\/([^\/]*)/;function n(e){if(!e.client_id)throw new Error("ImgurAlbum plugin: client_id is missing");this.config=e}n.prototype.resolve=function(e,t,n,a){var i,o,s=a.request,c=e.match(r);c&&c.length?(i=c[c.length-1],o="https://api.imgur.com/3/album/{{albumHash}}".replace("{{albumHash}}",i),s.get(o).set("Authorization","Client-ID "+this.config.client_id).end((function(e){var r=(e.body.data.images||[]).shift();return r?void t(r.link):void t(null)}))):t(null)},e.exports=n},function(e,t){function r(e){this.apikey=e}r.prototype.resolve=function(e,t,r,n){var a,i,o=n.request,s=e.match(/http(s?):\/\/www.flickr.com\/photos\/([^\/]*)\/(\d+)\b/)||[];s.length?(a=s[3],i="https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key={{APIKEY}}&photo_id={{ID}}&format=json&nojsoncallback=1".replace("{{APIKEY}}",this.apikey).replace("{{ID}}",a),o.get(i).end((function(e){if(data=JSON.parse(e.text),data&&data.sizes&&data.sizes.size)for(var r=data.sizes.size,n=0,a=r.length;n<a;n++)if("Large"===r[n].label||"Original"===r[n].label)return void t(r[n].source);t(null)}))):t(null)},e.exports=r},function(e,t){function r(){}r.prototype.resolve=function(e,t,r,n){n.fetch(e,(function(r,n){switch(n.type){case"image/jpeg":case"image/png":case"image/gif":case"image/svg+xml":case"image/bmp":case"image/tiff":t(e);break;default:t(null)}}),(function(){t(null)}))},e.exports=r},function(e,t,r){var n=r(100),a=r(144),i=[{type:"facebook",attribute:"property",name:"og:image",value:"content"},{type:"facebook",attribute:"rel",name:"image_src",value:"href"},{type:"twitter",attribute:"name",name:"twitter:image",value:"value"},{type:"twitter",attribute:"name",name:"twitter:image",value:"content"}];function o(){}o.prototype.resolve=function(e,t,r,n){var a=this;n.fetch(e,(function(i,o){a.parseHTML(i,e,t,r,n)}),(function(){t(null)}))},o.prototype.parseHTML=function(e,t,r,o,s){var c=n.DomUtils,l=new n.DomHandler((function(e,n){if(e)r(null);else{for(var o,s,l=[].concat(c.getElementsByTagName("meta",n,!0),c.getElementsByTagName("link",n,!0)),u=[],d=0,h=l.length;d<h;d++){s=l[d];for(var p=0,f=i.length;p<f;p++)s.attribs[i[p].attribute]&&s.attribs[i[p].attribute]===i[p].name&&s.attribs[i[p].value]&&u.push({url:s.attribs[i[p].value],type:i[p].type,score:0})}if(1===u.length)o=u[0].url;else if(u.length>1){for(d=0,h=u.length;d<h;d++)u[d].url.match(/(large|big)/i)&&u[d].score++,"twitter"===u[d].type&&u[d].score++;u.sort((function(e,t){return t.score-e.score})),o=u[0].url}o?(o.match(/^http/)||(o=a.resolve(t,o)),r(o)):r(null)}})),u=new n.Parser(l);u.write(e),u.done()},e.exports=o},function(e,t,r){var n=r(1188);e.exports=function(e){if(e>=55296&&e<=57343||e>1114111)return"�";e in n&&(e=n[e]);var t="";e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e);return t+=String.fromCharCode(e)}},function(e){e.exports=JSON.parse('{"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376}')},function(e){e.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Abreve":"Ă","abreve":"ă","ac":"∾","acd":"∿","acE":"∾̳","Acirc":"Â","acirc":"â","acute":"´","Acy":"А","acy":"а","AElig":"Æ","aelig":"æ","af":"⁡","Afr":"𝔄","afr":"𝔞","Agrave":"À","agrave":"à","alefsym":"ℵ","aleph":"ℵ","Alpha":"Α","alpha":"α","Amacr":"Ā","amacr":"ā","amalg":"⨿","amp":"&","AMP":"&","andand":"⩕","And":"⩓","and":"∧","andd":"⩜","andslope":"⩘","andv":"⩚","ang":"∠","ange":"⦤","angle":"∠","angmsdaa":"⦨","angmsdab":"⦩","angmsdac":"⦪","angmsdad":"⦫","angmsdae":"⦬","angmsdaf":"⦭","angmsdag":"⦮","angmsdah":"⦯","angmsd":"∡","angrt":"∟","angrtvb":"⊾","angrtvbd":"⦝","angsph":"∢","angst":"Å","angzarr":"⍼","Aogon":"Ą","aogon":"ą","Aopf":"𝔸","aopf":"𝕒","apacir":"⩯","ap":"≈","apE":"⩰","ape":"≊","apid":"≋","apos":"\'","ApplyFunction":"⁡","approx":"≈","approxeq":"≊","Aring":"Å","aring":"å","Ascr":"𝒜","ascr":"𝒶","Assign":"≔","ast":"*","asymp":"≈","asympeq":"≍","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","awconint":"∳","awint":"⨑","backcong":"≌","backepsilon":"϶","backprime":"‵","backsim":"∽","backsimeq":"⋍","Backslash":"∖","Barv":"⫧","barvee":"⊽","barwed":"⌅","Barwed":"⌆","barwedge":"⌅","bbrk":"⎵","bbrktbrk":"⎶","bcong":"≌","Bcy":"Б","bcy":"б","bdquo":"„","becaus":"∵","because":"∵","Because":"∵","bemptyv":"⦰","bepsi":"϶","bernou":"ℬ","Bernoullis":"ℬ","Beta":"Β","beta":"β","beth":"ℶ","between":"≬","Bfr":"𝔅","bfr":"𝔟","bigcap":"⋂","bigcirc":"◯","bigcup":"⋃","bigodot":"⨀","bigoplus":"⨁","bigotimes":"⨂","bigsqcup":"⨆","bigstar":"★","bigtriangledown":"▽","bigtriangleup":"△","biguplus":"⨄","bigvee":"⋁","bigwedge":"⋀","bkarow":"⤍","blacklozenge":"⧫","blacksquare":"▪","blacktriangle":"▴","blacktriangledown":"▾","blacktriangleleft":"◂","blacktriangleright":"▸","blank":"␣","blk12":"▒","blk14":"░","blk34":"▓","block":"█","bne":"=⃥","bnequiv":"≡⃥","bNot":"⫭","bnot":"⌐","Bopf":"𝔹","bopf":"𝕓","bot":"⊥","bottom":"⊥","bowtie":"⋈","boxbox":"⧉","boxdl":"┐","boxdL":"╕","boxDl":"╖","boxDL":"╗","boxdr":"┌","boxdR":"╒","boxDr":"╓","boxDR":"╔","boxh":"─","boxH":"═","boxhd":"┬","boxHd":"╤","boxhD":"╥","boxHD":"╦","boxhu":"┴","boxHu":"╧","boxhU":"╨","boxHU":"╩","boxminus":"⊟","boxplus":"⊞","boxtimes":"⊠","boxul":"┘","boxuL":"╛","boxUl":"╜","boxUL":"╝","boxur":"└","boxuR":"╘","boxUr":"╙","boxUR":"╚","boxv":"│","boxV":"║","boxvh":"┼","boxvH":"╪","boxVh":"╫","boxVH":"╬","boxvl":"┤","boxvL":"╡","boxVl":"╢","boxVL":"╣","boxvr":"├","boxvR":"╞","boxVr":"╟","boxVR":"╠","bprime":"‵","breve":"˘","Breve":"˘","brvbar":"¦","bscr":"𝒷","Bscr":"ℬ","bsemi":"⁏","bsim":"∽","bsime":"⋍","bsolb":"⧅","bsol":"\\\\","bsolhsub":"⟈","bull":"•","bullet":"•","bump":"≎","bumpE":"⪮","bumpe":"≏","Bumpeq":"≎","bumpeq":"≏","Cacute":"Ć","cacute":"ć","capand":"⩄","capbrcup":"⩉","capcap":"⩋","cap":"∩","Cap":"⋒","capcup":"⩇","capdot":"⩀","CapitalDifferentialD":"ⅅ","caps":"∩︀","caret":"⁁","caron":"ˇ","Cayleys":"ℭ","ccaps":"⩍","Ccaron":"Č","ccaron":"č","Ccedil":"Ç","ccedil":"ç","Ccirc":"Ĉ","ccirc":"ĉ","Cconint":"∰","ccups":"⩌","ccupssm":"⩐","Cdot":"Ċ","cdot":"ċ","cedil":"¸","Cedilla":"¸","cemptyv":"⦲","cent":"¢","centerdot":"·","CenterDot":"·","cfr":"𝔠","Cfr":"ℭ","CHcy":"Ч","chcy":"ч","check":"✓","checkmark":"✓","Chi":"Χ","chi":"χ","circ":"ˆ","circeq":"≗","circlearrowleft":"↺","circlearrowright":"↻","circledast":"⊛","circledcirc":"⊚","circleddash":"⊝","CircleDot":"⊙","circledR":"®","circledS":"Ⓢ","CircleMinus":"⊖","CirclePlus":"⊕","CircleTimes":"⊗","cir":"○","cirE":"⧃","cire":"≗","cirfnint":"⨐","cirmid":"⫯","cirscir":"⧂","ClockwiseContourIntegral":"∲","CloseCurlyDoubleQuote":"”","CloseCurlyQuote":"’","clubs":"♣","clubsuit":"♣","colon":":","Colon":"∷","Colone":"⩴","colone":"≔","coloneq":"≔","comma":",","commat":"@","comp":"∁","compfn":"∘","complement":"∁","complexes":"ℂ","cong":"≅","congdot":"⩭","Congruent":"≡","conint":"∮","Conint":"∯","ContourIntegral":"∮","copf":"𝕔","Copf":"ℂ","coprod":"∐","Coproduct":"∐","copy":"©","COPY":"©","copysr":"℗","CounterClockwiseContourIntegral":"∳","crarr":"↵","cross":"✗","Cross":"⨯","Cscr":"𝒞","cscr":"𝒸","csub":"⫏","csube":"⫑","csup":"⫐","csupe":"⫒","ctdot":"⋯","cudarrl":"⤸","cudarrr":"⤵","cuepr":"⋞","cuesc":"⋟","cularr":"↶","cularrp":"⤽","cupbrcap":"⩈","cupcap":"⩆","CupCap":"≍","cup":"∪","Cup":"⋓","cupcup":"⩊","cupdot":"⊍","cupor":"⩅","cups":"∪︀","curarr":"↷","curarrm":"⤼","curlyeqprec":"⋞","curlyeqsucc":"⋟","curlyvee":"⋎","curlywedge":"⋏","curren":"¤","curvearrowleft":"↶","curvearrowright":"↷","cuvee":"⋎","cuwed":"⋏","cwconint":"∲","cwint":"∱","cylcty":"⌭","dagger":"†","Dagger":"‡","daleth":"ℸ","darr":"↓","Darr":"↡","dArr":"⇓","dash":"‐","Dashv":"⫤","dashv":"⊣","dbkarow":"⤏","dblac":"˝","Dcaron":"Ď","dcaron":"ď","Dcy":"Д","dcy":"д","ddagger":"‡","ddarr":"⇊","DD":"ⅅ","dd":"ⅆ","DDotrahd":"⤑","ddotseq":"⩷","deg":"°","Del":"∇","Delta":"Δ","delta":"δ","demptyv":"⦱","dfisht":"⥿","Dfr":"𝔇","dfr":"𝔡","dHar":"⥥","dharl":"⇃","dharr":"⇂","DiacriticalAcute":"´","DiacriticalDot":"˙","DiacriticalDoubleAcute":"˝","DiacriticalGrave":"`","DiacriticalTilde":"˜","diam":"⋄","diamond":"⋄","Diamond":"⋄","diamondsuit":"♦","diams":"♦","die":"¨","DifferentialD":"ⅆ","digamma":"ϝ","disin":"⋲","div":"÷","divide":"÷","divideontimes":"⋇","divonx":"⋇","DJcy":"Ђ","djcy":"ђ","dlcorn":"⌞","dlcrop":"⌍","dollar":"$","Dopf":"𝔻","dopf":"𝕕","Dot":"¨","dot":"˙","DotDot":"⃜","doteq":"≐","doteqdot":"≑","DotEqual":"≐","dotminus":"∸","dotplus":"∔","dotsquare":"⊡","doublebarwedge":"⌆","DoubleContourIntegral":"∯","DoubleDot":"¨","DoubleDownArrow":"⇓","DoubleLeftArrow":"⇐","DoubleLeftRightArrow":"⇔","DoubleLeftTee":"⫤","DoubleLongLeftArrow":"⟸","DoubleLongLeftRightArrow":"⟺","DoubleLongRightArrow":"⟹","DoubleRightArrow":"⇒","DoubleRightTee":"⊨","DoubleUpArrow":"⇑","DoubleUpDownArrow":"⇕","DoubleVerticalBar":"∥","DownArrowBar":"⤓","downarrow":"↓","DownArrow":"↓","Downarrow":"⇓","DownArrowUpArrow":"⇵","DownBreve":"̑","downdownarrows":"⇊","downharpoonleft":"⇃","downharpoonright":"⇂","DownLeftRightVector":"⥐","DownLeftTeeVector":"⥞","DownLeftVectorBar":"⥖","DownLeftVector":"↽","DownRightTeeVector":"⥟","DownRightVectorBar":"⥗","DownRightVector":"⇁","DownTeeArrow":"↧","DownTee":"⊤","drbkarow":"⤐","drcorn":"⌟","drcrop":"⌌","Dscr":"𝒟","dscr":"𝒹","DScy":"Ѕ","dscy":"ѕ","dsol":"⧶","Dstrok":"Đ","dstrok":"đ","dtdot":"⋱","dtri":"▿","dtrif":"▾","duarr":"⇵","duhar":"⥯","dwangle":"⦦","DZcy":"Џ","dzcy":"џ","dzigrarr":"⟿","Eacute":"É","eacute":"é","easter":"⩮","Ecaron":"Ě","ecaron":"ě","Ecirc":"Ê","ecirc":"ê","ecir":"≖","ecolon":"≕","Ecy":"Э","ecy":"э","eDDot":"⩷","Edot":"Ė","edot":"ė","eDot":"≑","ee":"ⅇ","efDot":"≒","Efr":"𝔈","efr":"𝔢","eg":"⪚","Egrave":"È","egrave":"è","egs":"⪖","egsdot":"⪘","el":"⪙","Element":"∈","elinters":"⏧","ell":"ℓ","els":"⪕","elsdot":"⪗","Emacr":"Ē","emacr":"ē","empty":"∅","emptyset":"∅","EmptySmallSquare":"◻","emptyv":"∅","EmptyVerySmallSquare":"▫","emsp13":" ","emsp14":" ","emsp":" ","ENG":"Ŋ","eng":"ŋ","ensp":" ","Eogon":"Ę","eogon":"ę","Eopf":"𝔼","eopf":"𝕖","epar":"⋕","eparsl":"⧣","eplus":"⩱","epsi":"ε","Epsilon":"Ε","epsilon":"ε","epsiv":"ϵ","eqcirc":"≖","eqcolon":"≕","eqsim":"≂","eqslantgtr":"⪖","eqslantless":"⪕","Equal":"⩵","equals":"=","EqualTilde":"≂","equest":"≟","Equilibrium":"⇌","equiv":"≡","equivDD":"⩸","eqvparsl":"⧥","erarr":"⥱","erDot":"≓","escr":"ℯ","Escr":"ℰ","esdot":"≐","Esim":"⩳","esim":"≂","Eta":"Η","eta":"η","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","euro":"€","excl":"!","exist":"∃","Exists":"∃","expectation":"ℰ","exponentiale":"ⅇ","ExponentialE":"ⅇ","fallingdotseq":"≒","Fcy":"Ф","fcy":"ф","female":"♀","ffilig":"ﬃ","fflig":"ﬀ","ffllig":"ﬄ","Ffr":"𝔉","ffr":"𝔣","filig":"ﬁ","FilledSmallSquare":"◼","FilledVerySmallSquare":"▪","fjlig":"fj","flat":"♭","fllig":"ﬂ","fltns":"▱","fnof":"ƒ","Fopf":"𝔽","fopf":"𝕗","forall":"∀","ForAll":"∀","fork":"⋔","forkv":"⫙","Fouriertrf":"ℱ","fpartint":"⨍","frac12":"½","frac13":"⅓","frac14":"¼","frac15":"⅕","frac16":"⅙","frac18":"⅛","frac23":"⅔","frac25":"⅖","frac34":"¾","frac35":"⅗","frac38":"⅜","frac45":"⅘","frac56":"⅚","frac58":"⅝","frac78":"⅞","frasl":"⁄","frown":"⌢","fscr":"𝒻","Fscr":"ℱ","gacute":"ǵ","Gamma":"Γ","gamma":"γ","Gammad":"Ϝ","gammad":"ϝ","gap":"⪆","Gbreve":"Ğ","gbreve":"ğ","Gcedil":"Ģ","Gcirc":"Ĝ","gcirc":"ĝ","Gcy":"Г","gcy":"г","Gdot":"Ġ","gdot":"ġ","ge":"≥","gE":"≧","gEl":"⪌","gel":"⋛","geq":"≥","geqq":"≧","geqslant":"⩾","gescc":"⪩","ges":"⩾","gesdot":"⪀","gesdoto":"⪂","gesdotol":"⪄","gesl":"⋛︀","gesles":"⪔","Gfr":"𝔊","gfr":"𝔤","gg":"≫","Gg":"⋙","ggg":"⋙","gimel":"ℷ","GJcy":"Ѓ","gjcy":"ѓ","gla":"⪥","gl":"≷","glE":"⪒","glj":"⪤","gnap":"⪊","gnapprox":"⪊","gne":"⪈","gnE":"≩","gneq":"⪈","gneqq":"≩","gnsim":"⋧","Gopf":"𝔾","gopf":"𝕘","grave":"`","GreaterEqual":"≥","GreaterEqualLess":"⋛","GreaterFullEqual":"≧","GreaterGreater":"⪢","GreaterLess":"≷","GreaterSlantEqual":"⩾","GreaterTilde":"≳","Gscr":"𝒢","gscr":"ℊ","gsim":"≳","gsime":"⪎","gsiml":"⪐","gtcc":"⪧","gtcir":"⩺","gt":">","GT":">","Gt":"≫","gtdot":"⋗","gtlPar":"⦕","gtquest":"⩼","gtrapprox":"⪆","gtrarr":"⥸","gtrdot":"⋗","gtreqless":"⋛","gtreqqless":"⪌","gtrless":"≷","gtrsim":"≳","gvertneqq":"≩︀","gvnE":"≩︀","Hacek":"ˇ","hairsp":" ","half":"½","hamilt":"ℋ","HARDcy":"Ъ","hardcy":"ъ","harrcir":"⥈","harr":"↔","hArr":"⇔","harrw":"↭","Hat":"^","hbar":"ℏ","Hcirc":"Ĥ","hcirc":"ĥ","hearts":"♥","heartsuit":"♥","hellip":"…","hercon":"⊹","hfr":"𝔥","Hfr":"ℌ","HilbertSpace":"ℋ","hksearow":"⤥","hkswarow":"⤦","hoarr":"⇿","homtht":"∻","hookleftarrow":"↩","hookrightarrow":"↪","hopf":"𝕙","Hopf":"ℍ","horbar":"―","HorizontalLine":"─","hscr":"𝒽","Hscr":"ℋ","hslash":"ℏ","Hstrok":"Ħ","hstrok":"ħ","HumpDownHump":"≎","HumpEqual":"≏","hybull":"⁃","hyphen":"‐","Iacute":"Í","iacute":"í","ic":"⁣","Icirc":"Î","icirc":"î","Icy":"И","icy":"и","Idot":"İ","IEcy":"Е","iecy":"е","iexcl":"¡","iff":"⇔","ifr":"𝔦","Ifr":"ℑ","Igrave":"Ì","igrave":"ì","ii":"ⅈ","iiiint":"⨌","iiint":"∭","iinfin":"⧜","iiota":"℩","IJlig":"Ĳ","ijlig":"ĳ","Imacr":"Ī","imacr":"ī","image":"ℑ","ImaginaryI":"ⅈ","imagline":"ℐ","imagpart":"ℑ","imath":"ı","Im":"ℑ","imof":"⊷","imped":"Ƶ","Implies":"⇒","incare":"℅","in":"∈","infin":"∞","infintie":"⧝","inodot":"ı","intcal":"⊺","int":"∫","Int":"∬","integers":"ℤ","Integral":"∫","intercal":"⊺","Intersection":"⋂","intlarhk":"⨗","intprod":"⨼","InvisibleComma":"⁣","InvisibleTimes":"⁢","IOcy":"Ё","iocy":"ё","Iogon":"Į","iogon":"į","Iopf":"𝕀","iopf":"𝕚","Iota":"Ι","iota":"ι","iprod":"⨼","iquest":"¿","iscr":"𝒾","Iscr":"ℐ","isin":"∈","isindot":"⋵","isinE":"⋹","isins":"⋴","isinsv":"⋳","isinv":"∈","it":"⁢","Itilde":"Ĩ","itilde":"ĩ","Iukcy":"І","iukcy":"і","Iuml":"Ï","iuml":"ï","Jcirc":"Ĵ","jcirc":"ĵ","Jcy":"Й","jcy":"й","Jfr":"𝔍","jfr":"𝔧","jmath":"ȷ","Jopf":"𝕁","jopf":"𝕛","Jscr":"𝒥","jscr":"𝒿","Jsercy":"Ј","jsercy":"ј","Jukcy":"Є","jukcy":"є","Kappa":"Κ","kappa":"κ","kappav":"ϰ","Kcedil":"Ķ","kcedil":"ķ","Kcy":"К","kcy":"к","Kfr":"𝔎","kfr":"𝔨","kgreen":"ĸ","KHcy":"Х","khcy":"х","KJcy":"Ќ","kjcy":"ќ","Kopf":"𝕂","kopf":"𝕜","Kscr":"𝒦","kscr":"𝓀","lAarr":"⇚","Lacute":"Ĺ","lacute":"ĺ","laemptyv":"⦴","lagran":"ℒ","Lambda":"Λ","lambda":"λ","lang":"⟨","Lang":"⟪","langd":"⦑","langle":"⟨","lap":"⪅","Laplacetrf":"ℒ","laquo":"«","larrb":"⇤","larrbfs":"⤟","larr":"←","Larr":"↞","lArr":"⇐","larrfs":"⤝","larrhk":"↩","larrlp":"↫","larrpl":"⤹","larrsim":"⥳","larrtl":"↢","latail":"⤙","lAtail":"⤛","lat":"⪫","late":"⪭","lates":"⪭︀","lbarr":"⤌","lBarr":"⤎","lbbrk":"❲","lbrace":"{","lbrack":"[","lbrke":"⦋","lbrksld":"⦏","lbrkslu":"⦍","Lcaron":"Ľ","lcaron":"ľ","Lcedil":"Ļ","lcedil":"ļ","lceil":"⌈","lcub":"{","Lcy":"Л","lcy":"л","ldca":"⤶","ldquo":"“","ldquor":"„","ldrdhar":"⥧","ldrushar":"⥋","ldsh":"↲","le":"≤","lE":"≦","LeftAngleBracket":"⟨","LeftArrowBar":"⇤","leftarrow":"←","LeftArrow":"←","Leftarrow":"⇐","LeftArrowRightArrow":"⇆","leftarrowtail":"↢","LeftCeiling":"⌈","LeftDoubleBracket":"⟦","LeftDownTeeVector":"⥡","LeftDownVectorBar":"⥙","LeftDownVector":"⇃","LeftFloor":"⌊","leftharpoondown":"↽","leftharpoonup":"↼","leftleftarrows":"⇇","leftrightarrow":"↔","LeftRightArrow":"↔","Leftrightarrow":"⇔","leftrightarrows":"⇆","leftrightharpoons":"⇋","leftrightsquigarrow":"↭","LeftRightVector":"⥎","LeftTeeArrow":"↤","LeftTee":"⊣","LeftTeeVector":"⥚","leftthreetimes":"⋋","LeftTriangleBar":"⧏","LeftTriangle":"⊲","LeftTriangleEqual":"⊴","LeftUpDownVector":"⥑","LeftUpTeeVector":"⥠","LeftUpVectorBar":"⥘","LeftUpVector":"↿","LeftVectorBar":"⥒","LeftVector":"↼","lEg":"⪋","leg":"⋚","leq":"≤","leqq":"≦","leqslant":"⩽","lescc":"⪨","les":"⩽","lesdot":"⩿","lesdoto":"⪁","lesdotor":"⪃","lesg":"⋚︀","lesges":"⪓","lessapprox":"⪅","lessdot":"⋖","lesseqgtr":"⋚","lesseqqgtr":"⪋","LessEqualGreater":"⋚","LessFullEqual":"≦","LessGreater":"≶","lessgtr":"≶","LessLess":"⪡","lesssim":"≲","LessSlantEqual":"⩽","LessTilde":"≲","lfisht":"⥼","lfloor":"⌊","Lfr":"𝔏","lfr":"𝔩","lg":"≶","lgE":"⪑","lHar":"⥢","lhard":"↽","lharu":"↼","lharul":"⥪","lhblk":"▄","LJcy":"Љ","ljcy":"љ","llarr":"⇇","ll":"≪","Ll":"⋘","llcorner":"⌞","Lleftarrow":"⇚","llhard":"⥫","lltri":"◺","Lmidot":"Ŀ","lmidot":"ŀ","lmoustache":"⎰","lmoust":"⎰","lnap":"⪉","lnapprox":"⪉","lne":"⪇","lnE":"≨","lneq":"⪇","lneqq":"≨","lnsim":"⋦","loang":"⟬","loarr":"⇽","lobrk":"⟦","longleftarrow":"⟵","LongLeftArrow":"⟵","Longleftarrow":"⟸","longleftrightarrow":"⟷","LongLeftRightArrow":"⟷","Longleftrightarrow":"⟺","longmapsto":"⟼","longrightarrow":"⟶","LongRightArrow":"⟶","Longrightarrow":"⟹","looparrowleft":"↫","looparrowright":"↬","lopar":"⦅","Lopf":"𝕃","lopf":"𝕝","loplus":"⨭","lotimes":"⨴","lowast":"∗","lowbar":"_","LowerLeftArrow":"↙","LowerRightArrow":"↘","loz":"◊","lozenge":"◊","lozf":"⧫","lpar":"(","lparlt":"⦓","lrarr":"⇆","lrcorner":"⌟","lrhar":"⇋","lrhard":"⥭","lrm":"‎","lrtri":"⊿","lsaquo":"‹","lscr":"𝓁","Lscr":"ℒ","lsh":"↰","Lsh":"↰","lsim":"≲","lsime":"⪍","lsimg":"⪏","lsqb":"[","lsquo":"‘","lsquor":"‚","Lstrok":"Ł","lstrok":"ł","ltcc":"⪦","ltcir":"⩹","lt":"<","LT":"<","Lt":"≪","ltdot":"⋖","lthree":"⋋","ltimes":"⋉","ltlarr":"⥶","ltquest":"⩻","ltri":"◃","ltrie":"⊴","ltrif":"◂","ltrPar":"⦖","lurdshar":"⥊","luruhar":"⥦","lvertneqq":"≨︀","lvnE":"≨︀","macr":"¯","male":"♂","malt":"✠","maltese":"✠","Map":"⤅","map":"↦","mapsto":"↦","mapstodown":"↧","mapstoleft":"↤","mapstoup":"↥","marker":"▮","mcomma":"⨩","Mcy":"М","mcy":"м","mdash":"—","mDDot":"∺","measuredangle":"∡","MediumSpace":" ","Mellintrf":"ℳ","Mfr":"𝔐","mfr":"𝔪","mho":"℧","micro":"µ","midast":"*","midcir":"⫰","mid":"∣","middot":"·","minusb":"⊟","minus":"−","minusd":"∸","minusdu":"⨪","MinusPlus":"∓","mlcp":"⫛","mldr":"…","mnplus":"∓","models":"⊧","Mopf":"𝕄","mopf":"𝕞","mp":"∓","mscr":"𝓂","Mscr":"ℳ","mstpos":"∾","Mu":"Μ","mu":"μ","multimap":"⊸","mumap":"⊸","nabla":"∇","Nacute":"Ń","nacute":"ń","nang":"∠⃒","nap":"≉","napE":"⩰̸","napid":"≋̸","napos":"ŉ","napprox":"≉","natural":"♮","naturals":"ℕ","natur":"♮","nbsp":" ","nbump":"≎̸","nbumpe":"≏̸","ncap":"⩃","Ncaron":"Ň","ncaron":"ň","Ncedil":"Ņ","ncedil":"ņ","ncong":"≇","ncongdot":"⩭̸","ncup":"⩂","Ncy":"Н","ncy":"н","ndash":"–","nearhk":"⤤","nearr":"↗","neArr":"⇗","nearrow":"↗","ne":"≠","nedot":"≐̸","NegativeMediumSpace":"​","NegativeThickSpace":"​","NegativeThinSpace":"​","NegativeVeryThinSpace":"​","nequiv":"≢","nesear":"⤨","nesim":"≂̸","NestedGreaterGreater":"≫","NestedLessLess":"≪","NewLine":"\\n","nexist":"∄","nexists":"∄","Nfr":"𝔑","nfr":"𝔫","ngE":"≧̸","nge":"≱","ngeq":"≱","ngeqq":"≧̸","ngeqslant":"⩾̸","nges":"⩾̸","nGg":"⋙̸","ngsim":"≵","nGt":"≫⃒","ngt":"≯","ngtr":"≯","nGtv":"≫̸","nharr":"↮","nhArr":"⇎","nhpar":"⫲","ni":"∋","nis":"⋼","nisd":"⋺","niv":"∋","NJcy":"Њ","njcy":"њ","nlarr":"↚","nlArr":"⇍","nldr":"‥","nlE":"≦̸","nle":"≰","nleftarrow":"↚","nLeftarrow":"⇍","nleftrightarrow":"↮","nLeftrightarrow":"⇎","nleq":"≰","nleqq":"≦̸","nleqslant":"⩽̸","nles":"⩽̸","nless":"≮","nLl":"⋘̸","nlsim":"≴","nLt":"≪⃒","nlt":"≮","nltri":"⋪","nltrie":"⋬","nLtv":"≪̸","nmid":"∤","NoBreak":"⁠","NonBreakingSpace":" ","nopf":"𝕟","Nopf":"ℕ","Not":"⫬","not":"¬","NotCongruent":"≢","NotCupCap":"≭","NotDoubleVerticalBar":"∦","NotElement":"∉","NotEqual":"≠","NotEqualTilde":"≂̸","NotExists":"∄","NotGreater":"≯","NotGreaterEqual":"≱","NotGreaterFullEqual":"≧̸","NotGreaterGreater":"≫̸","NotGreaterLess":"≹","NotGreaterSlantEqual":"⩾̸","NotGreaterTilde":"≵","NotHumpDownHump":"≎̸","NotHumpEqual":"≏̸","notin":"∉","notindot":"⋵̸","notinE":"⋹̸","notinva":"∉","notinvb":"⋷","notinvc":"⋶","NotLeftTriangleBar":"⧏̸","NotLeftTriangle":"⋪","NotLeftTriangleEqual":"⋬","NotLess":"≮","NotLessEqual":"≰","NotLessGreater":"≸","NotLessLess":"≪̸","NotLessSlantEqual":"⩽̸","NotLessTilde":"≴","NotNestedGreaterGreater":"⪢̸","NotNestedLessLess":"⪡̸","notni":"∌","notniva":"∌","notnivb":"⋾","notnivc":"⋽","NotPrecedes":"⊀","NotPrecedesEqual":"⪯̸","NotPrecedesSlantEqual":"⋠","NotReverseElement":"∌","NotRightTriangleBar":"⧐̸","NotRightTriangle":"⋫","NotRightTriangleEqual":"⋭","NotSquareSubset":"⊏̸","NotSquareSubsetEqual":"⋢","NotSquareSuperset":"⊐̸","NotSquareSupersetEqual":"⋣","NotSubset":"⊂⃒","NotSubsetEqual":"⊈","NotSucceeds":"⊁","NotSucceedsEqual":"⪰̸","NotSucceedsSlantEqual":"⋡","NotSucceedsTilde":"≿̸","NotSuperset":"⊃⃒","NotSupersetEqual":"⊉","NotTilde":"≁","NotTildeEqual":"≄","NotTildeFullEqual":"≇","NotTildeTilde":"≉","NotVerticalBar":"∤","nparallel":"∦","npar":"∦","nparsl":"⫽⃥","npart":"∂̸","npolint":"⨔","npr":"⊀","nprcue":"⋠","nprec":"⊀","npreceq":"⪯̸","npre":"⪯̸","nrarrc":"⤳̸","nrarr":"↛","nrArr":"⇏","nrarrw":"↝̸","nrightarrow":"↛","nRightarrow":"⇏","nrtri":"⋫","nrtrie":"⋭","nsc":"⊁","nsccue":"⋡","nsce":"⪰̸","Nscr":"𝒩","nscr":"𝓃","nshortmid":"∤","nshortparallel":"∦","nsim":"≁","nsime":"≄","nsimeq":"≄","nsmid":"∤","nspar":"∦","nsqsube":"⋢","nsqsupe":"⋣","nsub":"⊄","nsubE":"⫅̸","nsube":"⊈","nsubset":"⊂⃒","nsubseteq":"⊈","nsubseteqq":"⫅̸","nsucc":"⊁","nsucceq":"⪰̸","nsup":"⊅","nsupE":"⫆̸","nsupe":"⊉","nsupset":"⊃⃒","nsupseteq":"⊉","nsupseteqq":"⫆̸","ntgl":"≹","Ntilde":"Ñ","ntilde":"ñ","ntlg":"≸","ntriangleleft":"⋪","ntrianglelefteq":"⋬","ntriangleright":"⋫","ntrianglerighteq":"⋭","Nu":"Ν","nu":"ν","num":"#","numero":"№","numsp":" ","nvap":"≍⃒","nvdash":"⊬","nvDash":"⊭","nVdash":"⊮","nVDash":"⊯","nvge":"≥⃒","nvgt":">⃒","nvHarr":"⤄","nvinfin":"⧞","nvlArr":"⤂","nvle":"≤⃒","nvlt":"<⃒","nvltrie":"⊴⃒","nvrArr":"⤃","nvrtrie":"⊵⃒","nvsim":"∼⃒","nwarhk":"⤣","nwarr":"↖","nwArr":"⇖","nwarrow":"↖","nwnear":"⤧","Oacute":"Ó","oacute":"ó","oast":"⊛","Ocirc":"Ô","ocirc":"ô","ocir":"⊚","Ocy":"О","ocy":"о","odash":"⊝","Odblac":"Ő","odblac":"ő","odiv":"⨸","odot":"⊙","odsold":"⦼","OElig":"Œ","oelig":"œ","ofcir":"⦿","Ofr":"𝔒","ofr":"𝔬","ogon":"˛","Ograve":"Ò","ograve":"ò","ogt":"⧁","ohbar":"⦵","ohm":"Ω","oint":"∮","olarr":"↺","olcir":"⦾","olcross":"⦻","oline":"‾","olt":"⧀","Omacr":"Ō","omacr":"ō","Omega":"Ω","omega":"ω","Omicron":"Ο","omicron":"ο","omid":"⦶","ominus":"⊖","Oopf":"𝕆","oopf":"𝕠","opar":"⦷","OpenCurlyDoubleQuote":"“","OpenCurlyQuote":"‘","operp":"⦹","oplus":"⊕","orarr":"↻","Or":"⩔","or":"∨","ord":"⩝","order":"ℴ","orderof":"ℴ","ordf":"ª","ordm":"º","origof":"⊶","oror":"⩖","orslope":"⩗","orv":"⩛","oS":"Ⓢ","Oscr":"𝒪","oscr":"ℴ","Oslash":"Ø","oslash":"ø","osol":"⊘","Otilde":"Õ","otilde":"õ","otimesas":"⨶","Otimes":"⨷","otimes":"⊗","Ouml":"Ö","ouml":"ö","ovbar":"⌽","OverBar":"‾","OverBrace":"⏞","OverBracket":"⎴","OverParenthesis":"⏜","para":"¶","parallel":"∥","par":"∥","parsim":"⫳","parsl":"⫽","part":"∂","PartialD":"∂","Pcy":"П","pcy":"п","percnt":"%","period":".","permil":"‰","perp":"⊥","pertenk":"‱","Pfr":"𝔓","pfr":"𝔭","Phi":"Φ","phi":"φ","phiv":"ϕ","phmmat":"ℳ","phone":"☎","Pi":"Π","pi":"π","pitchfork":"⋔","piv":"ϖ","planck":"ℏ","planckh":"ℎ","plankv":"ℏ","plusacir":"⨣","plusb":"⊞","pluscir":"⨢","plus":"+","plusdo":"∔","plusdu":"⨥","pluse":"⩲","PlusMinus":"±","plusmn":"±","plussim":"⨦","plustwo":"⨧","pm":"±","Poincareplane":"ℌ","pointint":"⨕","popf":"𝕡","Popf":"ℙ","pound":"£","prap":"⪷","Pr":"⪻","pr":"≺","prcue":"≼","precapprox":"⪷","prec":"≺","preccurlyeq":"≼","Precedes":"≺","PrecedesEqual":"⪯","PrecedesSlantEqual":"≼","PrecedesTilde":"≾","preceq":"⪯","precnapprox":"⪹","precneqq":"⪵","precnsim":"⋨","pre":"⪯","prE":"⪳","precsim":"≾","prime":"′","Prime":"″","primes":"ℙ","prnap":"⪹","prnE":"⪵","prnsim":"⋨","prod":"∏","Product":"∏","profalar":"⌮","profline":"⌒","profsurf":"⌓","prop":"∝","Proportional":"∝","Proportion":"∷","propto":"∝","prsim":"≾","prurel":"⊰","Pscr":"𝒫","pscr":"𝓅","Psi":"Ψ","psi":"ψ","puncsp":" ","Qfr":"𝔔","qfr":"𝔮","qint":"⨌","qopf":"𝕢","Qopf":"ℚ","qprime":"⁗","Qscr":"𝒬","qscr":"𝓆","quaternions":"ℍ","quatint":"⨖","quest":"?","questeq":"≟","quot":"\\"","QUOT":"\\"","rAarr":"⇛","race":"∽̱","Racute":"Ŕ","racute":"ŕ","radic":"√","raemptyv":"⦳","rang":"⟩","Rang":"⟫","rangd":"⦒","range":"⦥","rangle":"⟩","raquo":"»","rarrap":"⥵","rarrb":"⇥","rarrbfs":"⤠","rarrc":"⤳","rarr":"→","Rarr":"↠","rArr":"⇒","rarrfs":"⤞","rarrhk":"↪","rarrlp":"↬","rarrpl":"⥅","rarrsim":"⥴","Rarrtl":"⤖","rarrtl":"↣","rarrw":"↝","ratail":"⤚","rAtail":"⤜","ratio":"∶","rationals":"ℚ","rbarr":"⤍","rBarr":"⤏","RBarr":"⤐","rbbrk":"❳","rbrace":"}","rbrack":"]","rbrke":"⦌","rbrksld":"⦎","rbrkslu":"⦐","Rcaron":"Ř","rcaron":"ř","Rcedil":"Ŗ","rcedil":"ŗ","rceil":"⌉","rcub":"}","Rcy":"Р","rcy":"р","rdca":"⤷","rdldhar":"⥩","rdquo":"”","rdquor":"”","rdsh":"↳","real":"ℜ","realine":"ℛ","realpart":"ℜ","reals":"ℝ","Re":"ℜ","rect":"▭","reg":"®","REG":"®","ReverseElement":"∋","ReverseEquilibrium":"⇋","ReverseUpEquilibrium":"⥯","rfisht":"⥽","rfloor":"⌋","rfr":"𝔯","Rfr":"ℜ","rHar":"⥤","rhard":"⇁","rharu":"⇀","rharul":"⥬","Rho":"Ρ","rho":"ρ","rhov":"ϱ","RightAngleBracket":"⟩","RightArrowBar":"⇥","rightarrow":"→","RightArrow":"→","Rightarrow":"⇒","RightArrowLeftArrow":"⇄","rightarrowtail":"↣","RightCeiling":"⌉","RightDoubleBracket":"⟧","RightDownTeeVector":"⥝","RightDownVectorBar":"⥕","RightDownVector":"⇂","RightFloor":"⌋","rightharpoondown":"⇁","rightharpoonup":"⇀","rightleftarrows":"⇄","rightleftharpoons":"⇌","rightrightarrows":"⇉","rightsquigarrow":"↝","RightTeeArrow":"↦","RightTee":"⊢","RightTeeVector":"⥛","rightthreetimes":"⋌","RightTriangleBar":"⧐","RightTriangle":"⊳","RightTriangleEqual":"⊵","RightUpDownVector":"⥏","RightUpTeeVector":"⥜","RightUpVectorBar":"⥔","RightUpVector":"↾","RightVectorBar":"⥓","RightVector":"⇀","ring":"˚","risingdotseq":"≓","rlarr":"⇄","rlhar":"⇌","rlm":"‏","rmoustache":"⎱","rmoust":"⎱","rnmid":"⫮","roang":"⟭","roarr":"⇾","robrk":"⟧","ropar":"⦆","ropf":"𝕣","Ropf":"ℝ","roplus":"⨮","rotimes":"⨵","RoundImplies":"⥰","rpar":")","rpargt":"⦔","rppolint":"⨒","rrarr":"⇉","Rrightarrow":"⇛","rsaquo":"›","rscr":"𝓇","Rscr":"ℛ","rsh":"↱","Rsh":"↱","rsqb":"]","rsquo":"’","rsquor":"’","rthree":"⋌","rtimes":"⋊","rtri":"▹","rtrie":"⊵","rtrif":"▸","rtriltri":"⧎","RuleDelayed":"⧴","ruluhar":"⥨","rx":"℞","Sacute":"Ś","sacute":"ś","sbquo":"‚","scap":"⪸","Scaron":"Š","scaron":"š","Sc":"⪼","sc":"≻","sccue":"≽","sce":"⪰","scE":"⪴","Scedil":"Ş","scedil":"ş","Scirc":"Ŝ","scirc":"ŝ","scnap":"⪺","scnE":"⪶","scnsim":"⋩","scpolint":"⨓","scsim":"≿","Scy":"С","scy":"с","sdotb":"⊡","sdot":"⋅","sdote":"⩦","searhk":"⤥","searr":"↘","seArr":"⇘","searrow":"↘","sect":"§","semi":";","seswar":"⤩","setminus":"∖","setmn":"∖","sext":"✶","Sfr":"𝔖","sfr":"𝔰","sfrown":"⌢","sharp":"♯","SHCHcy":"Щ","shchcy":"щ","SHcy":"Ш","shcy":"ш","ShortDownArrow":"↓","ShortLeftArrow":"←","shortmid":"∣","shortparallel":"∥","ShortRightArrow":"→","ShortUpArrow":"↑","shy":"­","Sigma":"Σ","sigma":"σ","sigmaf":"ς","sigmav":"ς","sim":"∼","simdot":"⩪","sime":"≃","simeq":"≃","simg":"⪞","simgE":"⪠","siml":"⪝","simlE":"⪟","simne":"≆","simplus":"⨤","simrarr":"⥲","slarr":"←","SmallCircle":"∘","smallsetminus":"∖","smashp":"⨳","smeparsl":"⧤","smid":"∣","smile":"⌣","smt":"⪪","smte":"⪬","smtes":"⪬︀","SOFTcy":"Ь","softcy":"ь","solbar":"⌿","solb":"⧄","sol":"/","Sopf":"𝕊","sopf":"𝕤","spades":"♠","spadesuit":"♠","spar":"∥","sqcap":"⊓","sqcaps":"⊓︀","sqcup":"⊔","sqcups":"⊔︀","Sqrt":"√","sqsub":"⊏","sqsube":"⊑","sqsubset":"⊏","sqsubseteq":"⊑","sqsup":"⊐","sqsupe":"⊒","sqsupset":"⊐","sqsupseteq":"⊒","square":"□","Square":"□","SquareIntersection":"⊓","SquareSubset":"⊏","SquareSubsetEqual":"⊑","SquareSuperset":"⊐","SquareSupersetEqual":"⊒","SquareUnion":"⊔","squarf":"▪","squ":"□","squf":"▪","srarr":"→","Sscr":"𝒮","sscr":"𝓈","ssetmn":"∖","ssmile":"⌣","sstarf":"⋆","Star":"⋆","star":"☆","starf":"★","straightepsilon":"ϵ","straightphi":"ϕ","strns":"¯","sub":"⊂","Sub":"⋐","subdot":"⪽","subE":"⫅","sube":"⊆","subedot":"⫃","submult":"⫁","subnE":"⫋","subne":"⊊","subplus":"⪿","subrarr":"⥹","subset":"⊂","Subset":"⋐","subseteq":"⊆","subseteqq":"⫅","SubsetEqual":"⊆","subsetneq":"⊊","subsetneqq":"⫋","subsim":"⫇","subsub":"⫕","subsup":"⫓","succapprox":"⪸","succ":"≻","succcurlyeq":"≽","Succeeds":"≻","SucceedsEqual":"⪰","SucceedsSlantEqual":"≽","SucceedsTilde":"≿","succeq":"⪰","succnapprox":"⪺","succneqq":"⪶","succnsim":"⋩","succsim":"≿","SuchThat":"∋","sum":"∑","Sum":"∑","sung":"♪","sup1":"¹","sup2":"²","sup3":"³","sup":"⊃","Sup":"⋑","supdot":"⪾","supdsub":"⫘","supE":"⫆","supe":"⊇","supedot":"⫄","Superset":"⊃","SupersetEqual":"⊇","suphsol":"⟉","suphsub":"⫗","suplarr":"⥻","supmult":"⫂","supnE":"⫌","supne":"⊋","supplus":"⫀","supset":"⊃","Supset":"⋑","supseteq":"⊇","supseteqq":"⫆","supsetneq":"⊋","supsetneqq":"⫌","supsim":"⫈","supsub":"⫔","supsup":"⫖","swarhk":"⤦","swarr":"↙","swArr":"⇙","swarrow":"↙","swnwar":"⤪","szlig":"ß","Tab":"\\t","target":"⌖","Tau":"Τ","tau":"τ","tbrk":"⎴","Tcaron":"Ť","tcaron":"ť","Tcedil":"Ţ","tcedil":"ţ","Tcy":"Т","tcy":"т","tdot":"⃛","telrec":"⌕","Tfr":"𝔗","tfr":"𝔱","there4":"∴","therefore":"∴","Therefore":"∴","Theta":"Θ","theta":"θ","thetasym":"ϑ","thetav":"ϑ","thickapprox":"≈","thicksim":"∼","ThickSpace":"  ","ThinSpace":" ","thinsp":" ","thkap":"≈","thksim":"∼","THORN":"Þ","thorn":"þ","tilde":"˜","Tilde":"∼","TildeEqual":"≃","TildeFullEqual":"≅","TildeTilde":"≈","timesbar":"⨱","timesb":"⊠","times":"×","timesd":"⨰","tint":"∭","toea":"⤨","topbot":"⌶","topcir":"⫱","top":"⊤","Topf":"𝕋","topf":"𝕥","topfork":"⫚","tosa":"⤩","tprime":"‴","trade":"™","TRADE":"™","triangle":"▵","triangledown":"▿","triangleleft":"◃","trianglelefteq":"⊴","triangleq":"≜","triangleright":"▹","trianglerighteq":"⊵","tridot":"◬","trie":"≜","triminus":"⨺","TripleDot":"⃛","triplus":"⨹","trisb":"⧍","tritime":"⨻","trpezium":"⏢","Tscr":"𝒯","tscr":"𝓉","TScy":"Ц","tscy":"ц","TSHcy":"Ћ","tshcy":"ћ","Tstrok":"Ŧ","tstrok":"ŧ","twixt":"≬","twoheadleftarrow":"↞","twoheadrightarrow":"↠","Uacute":"Ú","uacute":"ú","uarr":"↑","Uarr":"↟","uArr":"⇑","Uarrocir":"⥉","Ubrcy":"Ў","ubrcy":"ў","Ubreve":"Ŭ","ubreve":"ŭ","Ucirc":"Û","ucirc":"û","Ucy":"У","ucy":"у","udarr":"⇅","Udblac":"Ű","udblac":"ű","udhar":"⥮","ufisht":"⥾","Ufr":"𝔘","ufr":"𝔲","Ugrave":"Ù","ugrave":"ù","uHar":"⥣","uharl":"↿","uharr":"↾","uhblk":"▀","ulcorn":"⌜","ulcorner":"⌜","ulcrop":"⌏","ultri":"◸","Umacr":"Ū","umacr":"ū","uml":"¨","UnderBar":"_","UnderBrace":"⏟","UnderBracket":"⎵","UnderParenthesis":"⏝","Union":"⋃","UnionPlus":"⊎","Uogon":"Ų","uogon":"ų","Uopf":"𝕌","uopf":"𝕦","UpArrowBar":"⤒","uparrow":"↑","UpArrow":"↑","Uparrow":"⇑","UpArrowDownArrow":"⇅","updownarrow":"↕","UpDownArrow":"↕","Updownarrow":"⇕","UpEquilibrium":"⥮","upharpoonleft":"↿","upharpoonright":"↾","uplus":"⊎","UpperLeftArrow":"↖","UpperRightArrow":"↗","upsi":"υ","Upsi":"ϒ","upsih":"ϒ","Upsilon":"Υ","upsilon":"υ","UpTeeArrow":"↥","UpTee":"⊥","upuparrows":"⇈","urcorn":"⌝","urcorner":"⌝","urcrop":"⌎","Uring":"Ů","uring":"ů","urtri":"◹","Uscr":"𝒰","uscr":"𝓊","utdot":"⋰","Utilde":"Ũ","utilde":"ũ","utri":"▵","utrif":"▴","uuarr":"⇈","Uuml":"Ü","uuml":"ü","uwangle":"⦧","vangrt":"⦜","varepsilon":"ϵ","varkappa":"ϰ","varnothing":"∅","varphi":"ϕ","varpi":"ϖ","varpropto":"∝","varr":"↕","vArr":"⇕","varrho":"ϱ","varsigma":"ς","varsubsetneq":"⊊︀","varsubsetneqq":"⫋︀","varsupsetneq":"⊋︀","varsupsetneqq":"⫌︀","vartheta":"ϑ","vartriangleleft":"⊲","vartriangleright":"⊳","vBar":"⫨","Vbar":"⫫","vBarv":"⫩","Vcy":"В","vcy":"в","vdash":"⊢","vDash":"⊨","Vdash":"⊩","VDash":"⊫","Vdashl":"⫦","veebar":"⊻","vee":"∨","Vee":"⋁","veeeq":"≚","vellip":"⋮","verbar":"|","Verbar":"‖","vert":"|","Vert":"‖","VerticalBar":"∣","VerticalLine":"|","VerticalSeparator":"❘","VerticalTilde":"≀","VeryThinSpace":" ","Vfr":"𝔙","vfr":"𝔳","vltri":"⊲","vnsub":"⊂⃒","vnsup":"⊃⃒","Vopf":"𝕍","vopf":"𝕧","vprop":"∝","vrtri":"⊳","Vscr":"𝒱","vscr":"𝓋","vsubnE":"⫋︀","vsubne":"⊊︀","vsupnE":"⫌︀","vsupne":"⊋︀","Vvdash":"⊪","vzigzag":"⦚","Wcirc":"Ŵ","wcirc":"ŵ","wedbar":"⩟","wedge":"∧","Wedge":"⋀","wedgeq":"≙","weierp":"℘","Wfr":"𝔚","wfr":"𝔴","Wopf":"𝕎","wopf":"𝕨","wp":"℘","wr":"≀","wreath":"≀","Wscr":"𝒲","wscr":"𝓌","xcap":"⋂","xcirc":"◯","xcup":"⋃","xdtri":"▽","Xfr":"𝔛","xfr":"𝔵","xharr":"⟷","xhArr":"⟺","Xi":"Ξ","xi":"ξ","xlarr":"⟵","xlArr":"⟸","xmap":"⟼","xnis":"⋻","xodot":"⨀","Xopf":"𝕏","xopf":"𝕩","xoplus":"⨁","xotime":"⨂","xrarr":"⟶","xrArr":"⟹","Xscr":"𝒳","xscr":"𝓍","xsqcup":"⨆","xuplus":"⨄","xutri":"△","xvee":"⋁","xwedge":"⋀","Yacute":"Ý","yacute":"ý","YAcy":"Я","yacy":"я","Ycirc":"Ŷ","ycirc":"ŷ","Ycy":"Ы","ycy":"ы","yen":"¥","Yfr":"𝔜","yfr":"𝔶","YIcy":"Ї","yicy":"ї","Yopf":"𝕐","yopf":"𝕪","Yscr":"𝒴","yscr":"𝓎","YUcy":"Ю","yucy":"ю","yuml":"ÿ","Yuml":"Ÿ","Zacute":"Ź","zacute":"ź","Zcaron":"Ž","zcaron":"ž","Zcy":"З","zcy":"з","Zdot":"Ż","zdot":"ż","zeetrf":"ℨ","ZeroWidthSpace":"​","Zeta":"Ζ","zeta":"ζ","zfr":"𝔷","Zfr":"ℨ","ZHcy":"Ж","zhcy":"ж","zigrarr":"⇝","zopf":"𝕫","Zopf":"ℤ","Zscr":"𝒵","zscr":"𝓏","zwj":"‍","zwnj":"‌"}')},function(e){e.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Acirc":"Â","acirc":"â","acute":"´","AElig":"Æ","aelig":"æ","Agrave":"À","agrave":"à","amp":"&","AMP":"&","Aring":"Å","aring":"å","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","brvbar":"¦","Ccedil":"Ç","ccedil":"ç","cedil":"¸","cent":"¢","copy":"©","COPY":"©","curren":"¤","deg":"°","divide":"÷","Eacute":"É","eacute":"é","Ecirc":"Ê","ecirc":"ê","Egrave":"È","egrave":"è","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","frac12":"½","frac14":"¼","frac34":"¾","gt":">","GT":">","Iacute":"Í","iacute":"í","Icirc":"Î","icirc":"î","iexcl":"¡","Igrave":"Ì","igrave":"ì","iquest":"¿","Iuml":"Ï","iuml":"ï","laquo":"«","lt":"<","LT":"<","macr":"¯","micro":"µ","middot":"·","nbsp":" ","not":"¬","Ntilde":"Ñ","ntilde":"ñ","Oacute":"Ó","oacute":"ó","Ocirc":"Ô","ocirc":"ô","Ograve":"Ò","ograve":"ò","ordf":"ª","ordm":"º","Oslash":"Ø","oslash":"ø","Otilde":"Õ","otilde":"õ","Ouml":"Ö","ouml":"ö","para":"¶","plusmn":"±","pound":"£","quot":"\\"","QUOT":"\\"","raquo":"»","reg":"®","REG":"®","sect":"§","shy":"­","sup1":"¹","sup2":"²","sup3":"³","szlig":"ß","THORN":"Þ","thorn":"þ","times":"×","Uacute":"Ú","uacute":"ú","Ucirc":"Û","ucirc":"û","Ugrave":"Ù","ugrave":"ù","uml":"¨","Uuml":"Ü","uuml":"ü","Yacute":"Ý","yacute":"ý","yen":"¥","yuml":"ÿ"}')},function(e){e.exports=JSON.parse('{"amp":"&","apos":"\'","gt":">","lt":"<","quot":"\\""}')},function(e,t,r){var n=r(550),a=e.exports=Object.create(n),i={tagName:"name"};Object.keys(i).forEach((function(e){var t=i[e];Object.defineProperty(a,e,{get:function(){return this[t]||null},set:function(e){return this[t]=e,e}})}))},function(e,t,r){var n=r(549),a=r(551);function i(e,t){this.init(e,t)}function o(e,t){return a.getElementsByTagName(e,t,!0)}function s(e,t){return a.getElementsByTagName(e,t,!0,1)[0]}function c(e,t,r){return a.getText(a.getElementsByTagName(e,t,r,1)).trim()}function l(e,t,r,n,a){var i=c(r,n,a);i&&(e[t]=i)}r(1)(i,n),i.prototype.init=n;var u=function(e){return"rss"===e||"feed"===e||"rdf:RDF"===e};i.prototype.onend=function(){var e,t,r={},a=s(u,this.dom);a&&("feed"===a.name?(t=a.children,r.type="atom",l(r,"id","id",t),l(r,"title","title",t),(e=s("link",t))&&(e=e.attribs)&&(e=e.href)&&(r.link=e),l(r,"description","subtitle",t),(e=c("updated",t))&&(r.updated=new Date(e)),l(r,"author","email",t,!0),r.items=o("entry",t).map((function(e){var t,r={};return l(r,"id","id",e=e.children),l(r,"title","title",e),(t=s("link",e))&&(t=t.attribs)&&(t=t.href)&&(r.link=t),(t=c("summary",e)||c("content",e))&&(r.description=t),(t=c("updated",e))&&(r.pubDate=new Date(t)),r}))):(t=s("channel",a.children).children,r.type=a.name.substr(0,3),r.id="",l(r,"title","title",t),l(r,"link","link",t),l(r,"description","description",t),(e=c("lastBuildDate",t))&&(r.updated=new Date(e)),l(r,"author","managingEditor",t,!0),r.items=o("item",a.children).map((function(e){var t,r={};return l(r,"id","guid",e=e.children),l(r,"title","title",e),l(r,"link","link",e),l(r,"description","description",e),(t=c("pubDate",e))&&(r.pubDate=new Date(t)),r})))),this.dom=r,n.prototype._handleCallback.call(this,a?null:Error("couldn't find root of feed"))},e.exports=i},function(e,t,r){var n=r(101),a=r(1195),i=n.isTag;e.exports={getInnerHTML:function(e,t){return e.children?e.children.map((function(e){return a(e,t)})).join(""):""},getOuterHTML:a,getText:function e(t){return Array.isArray(t)?t.map(e).join(""):i(t)?"br"===t.name?"\n":e(t.children):t.type===n.CDATA?e(t.children):t.type===n.Text?t.data:""}}},function(e,t,r){var n=r(1196),a=r(1197),i=r(1201);i.elementNames.__proto__=null,i.attributeNames.__proto__=null;var o={__proto__:null,style:!0,script:!0,xmp:!0,iframe:!0,noembed:!0,noframes:!0,plaintext:!0,noscript:!0};var s={__proto__:null,area:!0,base:!0,basefont:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},c=e.exports=function(e,t){Array.isArray(e)||e.cheerio||(e=[e]),t=t||{};for(var r="",a=0;a<e.length;a++){var i=e[a];"root"===i.type?r+=c(i.children,t):n.isTag(i)?r+=u(i,t):i.type===n.Directive?r+=d(i):i.type===n.Comment?r+=f(i):i.type===n.CDATA?r+=p(i):r+=h(i,t)}return r},l=["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"];function u(e,t){"foreign"===t.xmlMode&&(e.name=i.elementNames[e.name]||e.name,e.parent&&l.indexOf(e.parent.name)>=0&&(t=Object.assign({},t,{xmlMode:!1}))),!t.xmlMode&&["svg","math"].indexOf(e.name)>=0&&(t=Object.assign({},t,{xmlMode:"foreign"}));var r="<"+e.name,n=function(e,t){if(e){var r,n="";for(var o in e)r=e[o],n&&(n+=" "),"foreign"===t.xmlMode&&(o=i.attributeNames[o]||o),n+=o,(null!==r&&""!==r||t.xmlMode)&&(n+='="'+(t.decodeEntities?a.encodeXML(r):r.replace(/\"/g,"&quot;"))+'"');return n}}(e.attribs,t);return n&&(r+=" "+n),!t.xmlMode||e.children&&0!==e.children.length?(r+=">",e.children&&(r+=c(e.children,t)),s[e.name]&&!t.xmlMode||(r+="</"+e.name+">")):r+="/>",r}function d(e){return"<"+e.data+">"}function h(e,t){var r=e.data||"";return!t.decodeEntities||e.parent&&e.parent.name in o||(r=a.encodeXML(r)),r}function p(e){return"<![CDATA["+e.children[0].data+"]]>"}function f(e){return"\x3c!--"+e.data+"--\x3e"}},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Doctype=t.CDATA=t.Tag=t.Style=t.Script=t.Comment=t.Directive=t.Text=t.Root=t.isTag=t.ElementType=void 0,function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"}(n=t.ElementType||(t.ElementType={})),t.isTag=function(e){return e.type===n.Tag||e.type===n.Script||e.type===n.Style},t.Root=n.Root,t.Text=n.Text,t.Directive=n.Directive,t.Comment=n.Comment,t.Script=n.Script,t.Style=n.Style,t.Tag=n.Tag,t.CDATA=n.CDATA,t.Doctype=n.Doctype},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXMLStrict=t.decodeHTML5Strict=t.decodeHTML4Strict=t.decodeHTML5=t.decodeHTML4=t.decodeHTMLStrict=t.decodeHTML=t.decodeXML=t.encodeHTML5=t.encodeHTML4=t.escapeUTF8=t.escape=t.encodeNonAsciiHTML=t.encodeHTML=t.encodeXML=t.encode=t.decodeStrict=t.decode=void 0;var n=r(552),a=r(555);t.decode=function(e,t){return(!t||t<=0?n.decodeXML:n.decodeHTML)(e)},t.decodeStrict=function(e,t){return(!t||t<=0?n.decodeXML:n.decodeHTMLStrict)(e)},t.encode=function(e,t){return(!t||t<=0?a.encodeXML:a.encodeHTML)(e)};var i=r(555);Object.defineProperty(t,"encodeXML",{enumerable:!0,get:function(){return i.encodeXML}}),Object.defineProperty(t,"encodeHTML",{enumerable:!0,get:function(){return i.encodeHTML}}),Object.defineProperty(t,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return i.encodeNonAsciiHTML}}),Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return i.escape}}),Object.defineProperty(t,"escapeUTF8",{enumerable:!0,get:function(){return i.escapeUTF8}}),Object.defineProperty(t,"encodeHTML4",{enumerable:!0,get:function(){return i.encodeHTML}}),Object.defineProperty(t,"encodeHTML5",{enumerable:!0,get:function(){return i.encodeHTML}});var o=r(552);Object.defineProperty(t,"decodeXML",{enumerable:!0,get:function(){return o.decodeXML}}),Object.defineProperty(t,"decodeHTML",{enumerable:!0,get:function(){return o.decodeHTML}}),Object.defineProperty(t,"decodeHTMLStrict",{enumerable:!0,get:function(){return o.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML4",{enumerable:!0,get:function(){return o.decodeHTML}}),Object.defineProperty(t,"decodeHTML5",{enumerable:!0,get:function(){return o.decodeHTML}}),Object.defineProperty(t,"decodeHTML4Strict",{enumerable:!0,get:function(){return o.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML5Strict",{enumerable:!0,get:function(){return o.decodeHTMLStrict}}),Object.defineProperty(t,"decodeXMLStrict",{enumerable:!0,get:function(){return o.decodeXML}})},function(e){e.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Acirc":"Â","acirc":"â","acute":"´","AElig":"Æ","aelig":"æ","Agrave":"À","agrave":"à","amp":"&","AMP":"&","Aring":"Å","aring":"å","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","brvbar":"¦","Ccedil":"Ç","ccedil":"ç","cedil":"¸","cent":"¢","copy":"©","COPY":"©","curren":"¤","deg":"°","divide":"÷","Eacute":"É","eacute":"é","Ecirc":"Ê","ecirc":"ê","Egrave":"È","egrave":"è","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","frac12":"½","frac14":"¼","frac34":"¾","gt":">","GT":">","Iacute":"Í","iacute":"í","Icirc":"Î","icirc":"î","iexcl":"¡","Igrave":"Ì","igrave":"ì","iquest":"¿","Iuml":"Ï","iuml":"ï","laquo":"«","lt":"<","LT":"<","macr":"¯","micro":"µ","middot":"·","nbsp":" ","not":"¬","Ntilde":"Ñ","ntilde":"ñ","Oacute":"Ó","oacute":"ó","Ocirc":"Ô","ocirc":"ô","Ograve":"Ò","ograve":"ò","ordf":"ª","ordm":"º","Oslash":"Ø","oslash":"ø","Otilde":"Õ","otilde":"õ","Ouml":"Ö","ouml":"ö","para":"¶","plusmn":"±","pound":"£","quot":"\\"","QUOT":"\\"","raquo":"»","reg":"®","REG":"®","sect":"§","shy":"­","sup1":"¹","sup2":"²","sup3":"³","szlig":"ß","THORN":"Þ","thorn":"þ","times":"×","Uacute":"Ú","uacute":"ú","Ucirc":"Û","ucirc":"û","Ugrave":"Ù","ugrave":"ù","uml":"¨","Uuml":"Ü","uuml":"ü","Yacute":"Ý","yacute":"ý","yen":"¥","yuml":"ÿ"}')},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(r(1200)),i=String.fromCodePoint||function(e){var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e)};t.default=function(e){return e>=55296&&e<=57343||e>1114111?"�":(e in a.default&&(e=a.default[e]),i(e))}},function(e){e.exports=JSON.parse('{"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376}')},function(e){e.exports=JSON.parse('{"elementNames":{"altglyph":"altGlyph","altglyphdef":"altGlyphDef","altglyphitem":"altGlyphItem","animatecolor":"animateColor","animatemotion":"animateMotion","animatetransform":"animateTransform","clippath":"clipPath","feblend":"feBlend","fecolormatrix":"feColorMatrix","fecomponenttransfer":"feComponentTransfer","fecomposite":"feComposite","feconvolvematrix":"feConvolveMatrix","fediffuselighting":"feDiffuseLighting","fedisplacementmap":"feDisplacementMap","fedistantlight":"feDistantLight","fedropshadow":"feDropShadow","feflood":"feFlood","fefunca":"feFuncA","fefuncb":"feFuncB","fefuncg":"feFuncG","fefuncr":"feFuncR","fegaussianblur":"feGaussianBlur","feimage":"feImage","femerge":"feMerge","femergenode":"feMergeNode","femorphology":"feMorphology","feoffset":"feOffset","fepointlight":"fePointLight","fespecularlighting":"feSpecularLighting","fespotlight":"feSpotLight","fetile":"feTile","feturbulence":"feTurbulence","foreignobject":"foreignObject","glyphref":"glyphRef","lineargradient":"linearGradient","radialgradient":"radialGradient","textpath":"textPath"},"attributeNames":{"definitionurl":"definitionURL","attributename":"attributeName","attributetype":"attributeType","basefrequency":"baseFrequency","baseprofile":"baseProfile","calcmode":"calcMode","clippathunits":"clipPathUnits","diffuseconstant":"diffuseConstant","edgemode":"edgeMode","filterunits":"filterUnits","glyphref":"glyphRef","gradienttransform":"gradientTransform","gradientunits":"gradientUnits","kernelmatrix":"kernelMatrix","kernelunitlength":"kernelUnitLength","keypoints":"keyPoints","keysplines":"keySplines","keytimes":"keyTimes","lengthadjust":"lengthAdjust","limitingconeangle":"limitingConeAngle","markerheight":"markerHeight","markerunits":"markerUnits","markerwidth":"markerWidth","maskcontentunits":"maskContentUnits","maskunits":"maskUnits","numoctaves":"numOctaves","pathlength":"pathLength","patterncontentunits":"patternContentUnits","patterntransform":"patternTransform","patternunits":"patternUnits","pointsatx":"pointsAtX","pointsaty":"pointsAtY","pointsatz":"pointsAtZ","preservealpha":"preserveAlpha","preserveaspectratio":"preserveAspectRatio","primitiveunits":"primitiveUnits","refx":"refX","refy":"refY","repeatcount":"repeatCount","repeatdur":"repeatDur","requiredextensions":"requiredExtensions","requiredfeatures":"requiredFeatures","specularconstant":"specularConstant","specularexponent":"specularExponent","spreadmethod":"spreadMethod","startoffset":"startOffset","stddeviation":"stdDeviation","stitchtiles":"stitchTiles","surfacescale":"surfaceScale","systemlanguage":"systemLanguage","tablevalues":"tableValues","targetx":"targetX","targety":"targetY","textlength":"textLength","viewbox":"viewBox","viewtarget":"viewTarget","xchannelselector":"xChannelSelector","ychannelselector":"yChannelSelector","zoomandpan":"zoomAndPan"}}')},function(e,t){var r=t.getChildren=function(e){return e.children},n=t.getParent=function(e){return e.parent};t.getSiblings=function(e){var t=n(e);return t?r(t):[e]},t.getAttributeValue=function(e,t){return e.attribs&&e.attribs[t]},t.hasAttrib=function(e,t){return!!e.attribs&&hasOwnProperty.call(e.attribs,t)},t.getName=function(e){return e.name}},function(e,t){t.removeElement=function(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children;t.splice(t.lastIndexOf(e),1)}},t.replaceElement=function(e,t){var r=t.prev=e.prev;r&&(r.next=t);var n=t.next=e.next;n&&(n.prev=t);var a=t.parent=e.parent;if(a){var i=a.children;i[i.lastIndexOf(e)]=t}},t.appendChild=function(e,t){if(t.parent=e,1!==e.children.push(t)){var r=e.children[e.children.length-2];r.next=t,t.prev=r,t.next=null}},t.append=function(e,t){var r=e.parent,n=e.next;if(t.next=n,t.prev=e,e.next=t,t.parent=r,n){if(n.prev=t,r){var a=r.children;a.splice(a.lastIndexOf(n),0,t)}}else r&&r.children.push(t)},t.prepend=function(e,t){var r=e.parent;if(r){var n=r.children;n.splice(n.lastIndexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=r,t.prev=e.prev,t.next=e,e.prev=t}},function(e,t,r){var n=r(101).isTag;function a(e,t,r,n){for(var i,o=[],s=0,c=t.length;s<c&&!(e(t[s])&&(o.push(t[s]),--n<=0))&&(i=t[s].children,!(r&&i&&i.length>0&&(i=a(e,i,r,n),o=o.concat(i),(n-=i.length)<=0)));s++);return o}e.exports={filter:function(e,t,r,n){Array.isArray(t)||(t=[t]);"number"==typeof n&&isFinite(n)||(n=1/0);return a(e,t,!1!==r,n)},find:a,findOneChild:function(e,t){for(var r=0,n=t.length;r<n;r++)if(e(t[r]))return t[r];return null},findOne:function e(t,r){for(var a=null,i=0,o=r.length;i<o&&!a;i++)n(r[i])&&(t(r[i])?a=r[i]:r[i].children.length>0&&(a=e(t,r[i].children)));return a},existsOne:function e(t,r){for(var a=0,i=r.length;a<i;a++)if(n(r[a])&&(t(r[a])||r[a].children.length>0&&e(t,r[a].children)))return!0;return!1},findAll:function(e,t){var r=[],a=t.slice();for(;a.length;){var i=a.shift();n(i)&&(i.children&&i.children.length>0&&a.unshift.apply(a,i.children),e(i)&&r.push(i))}return r}}},function(e,t,r){var n=r(101),a=t.isTag=n.isTag;t.testElement=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){if("tag_name"===r){if(!a(t)||!e.tag_name(t.name))return!1}else if("tag_type"===r){if(!e.tag_type(t.type))return!1}else if("tag_contains"===r){if(a(t)||!e.tag_contains(t.data))return!1}else if(!t.attribs||!e[r](t.attribs[r]))return!1}else;return!0};var i={tag_name:function(e){return"function"==typeof e?function(t){return a(t)&&e(t.name)}:"*"===e?a:function(t){return a(t)&&t.name===e}},tag_type:function(e){return"function"==typeof e?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(e){return"function"==typeof e?function(t){return!a(t)&&e(t.data)}:function(t){return!a(t)&&t.data===e}}};function o(e,t){return"function"==typeof t?function(r){return r.attribs&&t(r.attribs[e])}:function(r){return r.attribs&&r.attribs[e]===t}}function s(e,t){return function(r){return e(r)||t(r)}}t.getElements=function(e,t,r,n){var a=Object.keys(e).map((function(t){var r=e[t];return t in i?i[t](r):o(t,r)}));return 0===a.length?[]:this.filter(a.reduce(s),t,r,n)},t.getElementById=function(e,t,r){return Array.isArray(t)||(t=[t]),this.findOne(o("id",e),t,!1!==r)},t.getElementsByTagName=function(e,t,r,n){return this.filter(i.tag_name(e),t,r,n)},t.getElementsByTagType=function(e,t,r,n){return this.filter(i.tag_type(e),t,r,n)}},function(e,t){t.removeSubsets=function(e){for(var t,r,n,a=e.length;--a>-1;){for(t=r=e[a],e[a]=null,n=!0;r;){if(e.indexOf(r)>-1){n=!1,e.splice(a,1);break}r=r.parent}n&&(e[a]=t)}return e};var r=1,n=2,a=4,i=8,o=16,s=t.compareDocumentPosition=function(e,t){var s,c,l,u,d,h,p=[],f=[];if(e===t)return 0;for(s=e;s;)p.unshift(s),s=s.parent;for(s=t;s;)f.unshift(s),s=s.parent;for(h=0;p[h]===f[h];)h++;return 0===h?r:(l=(c=p[h-1]).children,u=p[h],d=f[h],l.indexOf(u)>l.indexOf(d)?c===t?a|o:a:c===e?n|i:n)};t.uniqueSort=function(e){var t,r,i=e.length;for(e=e.slice();--i>-1;)t=e[i],(r=e.indexOf(t))>-1&&r<i&&e.splice(i,1);return e.sort((function(e,t){var r=s(e,t);return r&n?-1:r&a?1:0})),e}},function(e,t,r){e.exports=a;var n=r(556);function a(e){n.call(this,new i(this),e)}function i(e){this.scope=e}r(1)(a,n),a.prototype.readable=!0;var o=r(100).EVENTS;Object.keys(o).forEach((function(e){if(0===o[e])i.prototype["on"+e]=function(){this.scope.emit(e)};else if(1===o[e])i.prototype["on"+e]=function(t){this.scope.emit(e,t)};else{if(2!==o[e])throw Error("wrong number of arguments!");i.prototype["on"+e]=function(t,r){this.scope.emit(e,t,r)}}}))},function(e,t){},function(e,t,r){function n(e){this._cbs=e||{}}e.exports=n;var a=r(100).EVENTS;Object.keys(a).forEach((function(e){if(0===a[e])e="on"+e,n.prototype[e]=function(){this._cbs[e]&&this._cbs[e]()};else if(1===a[e])e="on"+e,n.prototype[e]=function(t){this._cbs[e]&&this._cbs[e](t)};else{if(2!==a[e])throw Error("wrong number of arguments");e="on"+e,n.prototype[e]=function(t,r){this._cbs[e]&&this._cbs[e](t,r)}}}))},function(e,t,r){function n(e){this._cbs=e||{},this.events=[]}e.exports=n;var a=r(100).EVENTS;Object.keys(a).forEach((function(e){if(0===a[e])e="on"+e,n.prototype[e]=function(){this.events.push([e]),this._cbs[e]&&this._cbs[e]()};else if(1===a[e])e="on"+e,n.prototype[e]=function(t){this.events.push([e,t]),this._cbs[e]&&this._cbs[e](t)};else{if(2!==a[e])throw Error("wrong number of arguments");e="on"+e,n.prototype[e]=function(t,r){this.events.push([e,t,r]),this._cbs[e]&&this._cbs[e](t,r)}}})),n.prototype.onreset=function(){this.events=[],this._cbs.onreset&&this._cbs.onreset()},n.prototype.restart=function(){this._cbs.onreset&&this._cbs.onreset();for(var e=0,t=this.events.length;e<t;e++)if(this._cbs[this.events[e][0]]){var r=this.events[e].length;1===r?this._cbs[this.events[e][0]]():2===r?this._cbs[this.events[e][0]](this.events[e][1]):this._cbs[this.events[e][0]](this.events[e][1],this.events[e][2])}}},function(e,t,r){var n=r(100),a=r(144);function i(){}i.prototype._score=function(e){var t,r=0;if(e.attribs.src&&(t=e.attribs.src),e.attribs["data-src"]&&(t=e.attribs["data-src"]),e.attribs["data-lazy-src"]&&(t=e.attribs["data-lazy-src"]),!t)return-10;for(var n=[{pattern:/(large|big)/,score:1},{pattern:"upload",score:1},{pattern:"media",score:1},{pattern:"gravatar.com",score:-1},{pattern:"feeds.feedburner.com",score:-1},{pattern:/icon/i,score:-1},{pattern:/logo/i,score:-1},{pattern:/spinner/i,score:-1},{pattern:/loading/i,score:-1},{pattern:"badge",score:-1},{pattern:"1x1",score:-1},{pattern:"pixel",score:-1},{pattern:/ads/i,score:-1},{pattern:/doubleclick/i,score:-1}],a=0,i=n.length;a<i;a++)t.match(n[a].pattern)&&(r+=n[a].score);return r},i.prototype.resolve=function(e,t,r,n){var a=this;n.fetch(e,(function(i,o){a.parseHTML(i,e,t,r,n)}),(function(){t(null)}))},i.prototype.parseHTML=function(e,t,r,i,o){var s=n.DomUtils,c=this,l=new n.DomHandler((function(e,n){if(e)r(null);else{var i,o=s.getElementsByTagName("img",n,!0),l=[];if(o.length){for(var u=0,d=o.length;u<d;u++)if(o[u].attribs["data-src"]&&(o[u].attribs.src=o[u].attribs["data-src"]),o[u].attribs["data-lazy-src"]&&(o[u].attribs.src=o[u].attribs["data-lazy-src"]),o[u].attribs.src){var h=o[u].attribs.width||1,p=o[u].attribs.height||1;o[u].surface=h*p,o[u].score=c._score(o[u]),o[u].surface>256&&l.push(o[u])}if(l.length>0)return l.sort((function(e,t){return e.surface==t.surface?t.score-e.score:t.surface-e.surface})),(i=l[0].attribs.src).match(/^http/)||(i=a.resolve(t,i)),void r(i);r(null)}else r(null)}})),u=new n.Parser(l);u.write(e),u.done()},e.exports=i},function(e,t,r){var n=r(1213),a=r(140);e.exports=GameBoardSizer={render:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"body";if(!document.getElementById("game_board_sizer")){var i=document.querySelector(r);i.append(a(n()))}},attachEvents:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".gameboard",a=document.querySelector(n);if(document.querySelector("#game_board_sizer").addEventListener("change",(function(){r.scaleBoard(t,a)})),t.loadGamePreference(t.returnSlug()+"-board-scale"))try{document.querySelector("#game_board_sizer").value=t.loadGamePreference(t.returnSlug()+"-board-scale"),this.scaleBoard(t,a)}catch(e){}var i=t.loadGamePreference(t.returnSlug()+"-board-offset");i&&$(n).offset(i),$(n).draggable({stop:function(e,r){t.saveGamePreference(t.returnSlug()+"-board-offset",r.offset)}})},scaleBoard:function(e,t){try{e.hammertime.get("pinch").set({enable:!1}),e.hammertime.get("pan").set({enable:!1})}catch(e){}t.style.transform="scale(".concat(document.querySelector("#game_board_sizer").value/100,")"),e.saveGamePreference(e.returnSlug()+"-board-scale",document.querySelector("#game_board_sizer").value);try{e.hammertime.get("pinch").set({enable:!0}),e.hammertime.get("pan").set({enable:!0})}catch(e){}}}},function(e,t){e.exports=GameBoardSizerTemplate=function(){return'\n    <input class="game_board_sizer" id="game_board_sizer" type="range" min="33" max="200" value="100" />\n    '}},function(e,t,r){r(1215),r(477);e.exports=GameHammerMobile={fixHammerjsDeltaIssue:null,lastEvent:null,pinchZoomOrigin:null,element:null,pinchStart:{x:void 0,y:void 0},originalSize:{width:2550,height:1650},current:{x:0,y:0,z:1,zooming:!1,width:2550,height:1650},last:{x:0,y:0,z:1},render:function(e,t){},attachEvents:function(e,t){try{var r=this;r.element=document.getElementById("gameboard");var n=new Hammer(r.element,{});n.get("pinch").set({enable:!0}),n.get("pan").set({threshold:0}),n.on("pan",(function(e){"pan"!==r.lastEvent&&(r.fixHammerjsDeltaIssue={x:e.deltaX,y:e.deltaY}),r.current.x=r.last.x+e.deltaX-r.fixHammerjsDeltaIssue.x,r.current.y=r.last.y+e.deltaY-r.fixHammerjsDeltaIssue.y,r.lastEvent="pan",r.update()})),n.on("pinch",(function(e){var t=r.scaleFrom(r.pinchZoomOrigin,r.last.z,r.last.z*e.scale);r.current.x=t.x+r.last.x+e.deltaX,r.current.y=t.y+r.last.y+e.deltaY,r.current.z=t.z+r.last.z,r.lastEvent="pinch",r.update()})),n.on("pinchstart",(function(e){r.pinchStart.x=e.center.x,r.pinchStart.y=e.center.y,r.pinchZoomOrigin=r.getRelativePosition(r.element,{x:r.pinchStart.x,y:r.pinchStart.y},r.originalSize,r.current.z),r.lastEvent="pinchstart"})),n.on("panend",(function(e){r.last.x=r.current.x,r.last.y=r.current.y,r.lastEvent="panend"})),n.on("pinchend",(function(e){r.last.x=r.current.x,r.last.y=r.current.y,r.last.z=r.current.z,r.lastEvent="pinchend"})),t.hammertime=n}catch(e){}},update:function(){this.current.height=this.originalSize.height*this.current.z,this.current.width=this.originalSize.width*this.current.z,this.element.style.transform="translate3d("+this.current.x+"px, "+this.current.y+"px, 0) scale("+this.current.z+")"},getRelativePosition:function(e,t,r,n){var a=this.getCoords(e),i=t.x-a.x,o=t.y-a.y;return{x:i/(r.width*n/2)-1,y:o/(r.height*n/2)-1}},getCoords:function(e){var t=e.getBoundingClientRect(),r=document.body,n=document.documentElement,a=window.pageYOffset||n.scrollTop||r.scrollTop,i=window.pageXOffset||n.scrollLeft||r.scrollLeft,o=n.clientTop||r.clientTop||0,s=n.clientLeft||r.clientLeft||0,c=t.top+a-o,l=t.left+i-s;return{x:Math.round(l),y:Math.round(c)}},scaleFrom:function(e,t,r){var n=this.getCoordinateShiftDueToScale(this.originalSize,t),a=this.getCoordinateShiftDueToScale(this.originalSize,r),i=r-t,o=n.x-a.x,s=n.y-a.y;return{x:e.x*o,y:e.y*s,z:i}},getCoordinateShiftDueToScale:function(e,t){var r=t*e.width,n=t*e.height;return{x:(r-e.width)/2,y:(n-e.height)/2}}}},function(e,t){e.exports=GameHammerMobile=function(){return""}}]);